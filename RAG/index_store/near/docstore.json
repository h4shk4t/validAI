{"docstore/data": {"21ee2a05-4442-4200-8a62-4ae8527fb875": {"__data__": {"id_": "21ee2a05-4442-4200-8a62-4ae8527fb875", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0d702ed-136e-40f6-afbe-b535f9e41284", "node_type": "1", "metadata": {}, "hash": "5a31629699a882de68fc45340ead88252fc072bdd84ff15f56a671fe75371e30", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: bidding-with-fts\ntitle: Bidding with FTs\nsidebar_label: Bidding with FTs\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nTo further develop this contract we will introduce another primitive: [fungible tokens](../../2.build/5.primitives/ft.md). Instead of placing bids in $NEAR tokens, they will be placed in FTs. This may be useful if, for example, an auctioneer wants to keep the bid amounts constant in terms of dollars as an auction is carried out, so bids can be placed in stablecoins such as $USDC. Another use case is if a project like Ref Finance was holding its own auction and wanted the auction to happen in its project's token $REF.\n\n---\n\n## Specifying the FT contract \n\nWe want to only accept bids in one type of fungible token; accepting many different FTs would make the value of each bid difficult to compare. We're also going to adjust the contract so that the auctioneer can specify a starting bid amount for the auction.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L23-L30\"\n                start=\"23\" end=\"30\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L33-L53\"\n                start=\"33\" end=\"53\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Accepting bids in FTs\n\nWhen we were making bids in $NEAR tokens we would call the auction contract directly and attach $NEAR tokens to the call. With fungible tokens, since an account's balance lives on a separate contract, we call the FT contract which then calls the auction contract and transfers tokens.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2001, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0d702ed-136e-40f6-afbe-b535f9e41284": {"__data__": {"id_": "e0d702ed-136e-40f6-afbe-b535f9e41284", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "21ee2a05-4442-4200-8a62-4ae8527fb875", "node_type": "1", "metadata": {}, "hash": "78f8df08ce5db1a1930dd91a96eeb4bce2a3befd0356501fa79744bac69c39b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3bf47376-3ddb-4366-8a07-4ce48e886c56", "node_type": "1", "metadata": {}, "hash": "cd609f46135ed97929859bb9fa456372a58afcbe0c0c2ec4a24df4249a2db75a", "class_name": "RelatedNodeInfo"}}, "text": "The method on the FT contract to do this is named `ft_transfer_call` and it will always call a method in the target contract named `ft_on_transfer`. Take a look [here](../../2.build/5.primitives/ft.md#attaching-fts-to-a-call) for more information. \n\n![ft_transfer_call-flow](/docs/assets/auction/auction-ft-transfer.png)\n\nThe `ft_on_transfer` method always has the same interface; the FT contract will pass it the `sender`, the `amount` of FTs being sent and a `msg` which can be empty (which it will be here) or it can contain some information needed by the method (if you want to send multiple arguments in msg it is best practice to deliver this in JSON then parse it in the contract). The method returns the number of tokens to refund the user, in our case we will use all the tokens attached to the call for the bid unless the contract panics in which case the user will automatically be refunded their FTs in full.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L57\"\n                start=\"57\" end=\"57\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L56\"\n                start=\"56\" end=\"56\" />\n\n    </TabItem>\n\n</Tabs>\n\n\nWe need to confirm that the user is attaching fungible tokens when calling the method and that they are using the right FT, this is done by checking the predecessor's account ID. Since it's the FT contract that directly calls the auction contract, the `predecessor` is now the account ID of the FT contract.", "mimetype": "text/plain", "start_char_idx": 2002, "end_char_idx": 3871, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3bf47376-3ddb-4366-8a07-4ce48e886c56": {"__data__": {"id_": "3bf47376-3ddb-4366-8a07-4ce48e886c56", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e0d702ed-136e-40f6-afbe-b535f9e41284", "node_type": "1", "metadata": {}, "hash": "5a31629699a882de68fc45340ead88252fc072bdd84ff15f56a671fe75371e30", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6a972dc0-69f9-43b5-80c0-9250ebcdec31", "node_type": "1", "metadata": {}, "hash": "422c8098fc0256b6daa17123354b5d0c20bf5d719666c09b64ef32b0f47223cd", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L62\"\n                start=\"62\" end=\"62\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L62-L63\"\n                start=\"62\" end=\"63\" />\n\n    </TabItem>\n\n</Tabs>\n\nThe bidder's account ID is now given by the argument `sender_id`.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L64-L67\"\n                start=\"64\" end=\"67\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L75-L78\"\n                start=\"75\" end=\"78\" />\n\n    </TabItem>\n\n</Tabs>\n\nWhen we want to return the funds to the previous bidder we now make a cross-contract call to the FT contract.", "mimetype": "text/plain", "start_char_idx": 3873, "end_char_idx": 5339, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6a972dc0-69f9-43b5-80c0-9250ebcdec31": {"__data__": {"id_": "6a972dc0-69f9-43b5-80c0-9250ebcdec31", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3bf47376-3ddb-4366-8a07-4ce48e886c56", "node_type": "1", "metadata": {}, "hash": "cd609f46135ed97929859bb9fa456372a58afcbe0c0c2ec4a24df4249a2db75a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "adb07afc-9aee-487a-a667-00d1853c8fd3", "node_type": "1", "metadata": {}, "hash": "6643d0a09e52d53597ad06306110656c6ca9695b794325054c8c9bb6e9966644", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Language value=\"javascript\" language=\"javascript\">\n            <Github fname=\"call\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L69-L75\"\n                start=\"69\" end=\"75\" />\n            <Github fname=\"callback\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L78-L81\"\n                start=\"78\" end=\"81\" />\n        </Language>\n\n        In JavaScript, we have to return the Promise to transfer the FTs but we also need to return how much to refund the user. So after transferring the FTs, we make a `callback` to our own contract to resume the contract flow. Note that the callback is private so it can only be called by the contract. We return 0 because the method uses all the FTs in the call.\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Language value=\"rust\" language=\"rust\">\n            <Github fname=\"lib.rs\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L81-L84\"\n                start=\"81\" end=\"84\" />\n            <Github fname=\"ext.rs\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/ext.rs#L8-L11\"\n                start=\"8\" end=\"11\" />\n        </Language>\n\n         We then return 0 because the method uses all the FTs in the call.", "mimetype": "text/plain", "start_char_idx": 5342, "end_char_idx": 6972, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "adb07afc-9aee-487a-a667-00d1853c8fd3": {"__data__": {"id_": "adb07afc-9aee-487a-a667-00d1853c8fd3", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6a972dc0-69f9-43b5-80c0-9250ebcdec31", "node_type": "1", "metadata": {}, "hash": "422c8098fc0256b6daa17123354b5d0c20bf5d719666c09b64ef32b0f47223cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86e0959d-e116-4cc4-92db-2303df3a33e4", "node_type": "1", "metadata": {}, "hash": "266eb2cd6dffc016b85f3482b293a38c2f48f583f21efe52955352f31979139b", "class_name": "RelatedNodeInfo"}}, "text": "<Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L86\"\n                start=\"86\" end=\"86\" />\n\n    </TabItem>\n\n</Tabs>\n\n<details> \n        \n    <summary> What happens if the cross-contract call fails? </summary>\n\n    The first time this method is called the contract will try to send itself FTs. Most fungible token contracts don't allow one to send themselves FTs so the cross-contract call will fail. However, since cross-contract calls are asynchronous and independent and we are not checking the result of the call then the auction contract does not care that the call failed and ft_on_transfer will complete successfully.\n\n    In the other cases, the call to the fungible token contract could only fail if the receiver does not exist, the FT contract does not exist, the auction contract doesn't have enough fungible tokens to cover the amount being sent, or the receiver is not registered in the FT contract. Our contract is set up such that these errors cannot occur, the receiver must exist since they placed the previous bid, the FT contract exists since it was used to place the bid, the auction contract has enough FTs to cover the amount since it was sent that amount by the previous bid, and the receiver must be registered in the FT contract since they needed to have held the token in the first place to make a bid.\n\n</details>  \n\n---\n\n## Claiming the FTs\n\nWhen the auction is complete we need to send the fungible tokens to the auctioneer when we send the NFT to the highest bidder, we implement a similar call as when we were returning the funds just changing the arguments.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/src/contract.ts#L49-L53\"\n                start=\"49\" end=\"53\" />\n\n        In JavaScript, since we need to return each cross-contract call we chain the NFT and FT transfer.", "mimetype": "text/plain", "start_char_idx": 6982, "end_char_idx": 9136, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86e0959d-e116-4cc4-92db-2303df3a33e4": {"__data__": {"id_": "86e0959d-e116-4cc4-92db-2303df3a33e4", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "adb07afc-9aee-487a-a667-00d1853c8fd3", "node_type": "1", "metadata": {}, "hash": "6643d0a09e52d53597ad06306110656c6ca9695b794325054c8c9bb6e9966644", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7ee550d-3c85-471b-9969-aec1027090ad", "node_type": "1", "metadata": {}, "hash": "b994034071377f36953539a534b2b6001c0439227156b34733fc0991e3c9787a", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/src/lib.rs#L99-L109\"\n                start=\"99\" end=\"109\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Creating a new FT\n\nJust as with the NFT contract, we will deploy an FT contract in the sandbox tests using a WASM file compiled from [this repo](https://github.com/near-examples/FT).\n\nWhen the contract is deployed it is initialized with `new_default_meta` which sets the token's metadata, including things like its name and symbol, to default values while requiring the owner (where the token supply will sent), and the total supply of the token.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L28-L29\"\n                start=\"28\" end=\"29\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L26-L39\"\n                start=\"26\" end=\"39\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Registering users in the FT contract\n\nFor one to receive fungible tokens, first their account ID must be [registered](../../2.build/5.primitives/ft.md#registering-a-user) in the FT contract. A user has to register in an FT contract to pay for the storage used to track their amount of tokens. By default, a contract pays for its own storage, but not requiring a user to register and pay for storage would drain the contract of $NEAR tokens.", "mimetype": "text/plain", "start_char_idx": 9142, "end_char_idx": 11038, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d7ee550d-3c85-471b-9969-aec1027090ad": {"__data__": {"id_": "d7ee550d-3c85-471b-9969-aec1027090ad", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "86e0959d-e116-4cc4-92db-2303df3a33e4", "node_type": "1", "metadata": {}, "hash": "266eb2cd6dffc016b85f3482b293a38c2f48f583f21efe52955352f31979139b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6de39e96-fa17-4c48-97dd-dfa442f23ebf", "node_type": "1", "metadata": {}, "hash": "28d1d42594710500d3740c2f88f62fa15377ce2fa773d664c013cd6dabb60764", "class_name": "RelatedNodeInfo"}}, "text": "When the contract is live we don't need to register the accounts that we transfer tokens back to since to make a bid in the first place they would have needed to be registered, but we do need to register the auction contract in the FT contract to receive bids and the auctioneer to receive the funds at the end of the auction. It is most convenient to register users from the frontend rather than the contract.\n\nIn our tests, since we are creating a new fungible token and new accounts we will actually have to register every account that will interact with FTs.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L50-L53\"\n                start=\"50\" end=\"53\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L74-L90\"\n                start=\"74\" end=\"90\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Simple FT transfer to bidders\n\nThen we will transfer the bidders FTs so they can use them to bid. A simple transfer of FTs is done using the method `ft_transfer` on the FT contract.", "mimetype": "text/plain", "start_char_idx": 11039, "end_char_idx": 12466, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6de39e96-fa17-4c48-97dd-dfa442f23ebf": {"__data__": {"id_": "6de39e96-fa17-4c48-97dd-dfa442f23ebf", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d7ee550d-3c85-471b-9969-aec1027090ad", "node_type": "1", "metadata": {}, "hash": "b994034071377f36953539a534b2b6001c0439227156b34733fc0991e3c9787a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b7dcd9f-3cd1-448d-8c56-f80736f6c821", "node_type": "1", "metadata": {}, "hash": "83f362eae4b88d0fd407183c268c317392f1ab470eaffe7f8df1861844f399e2", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L56-L57\"\n                start=\"56\" end=\"57\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Language value=\"rust\" language=\"rust\">\n            <Github fname=\"Call ft_transfer\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L95-L100\"\n                start=\"95\" end=\"100\" />\n            <Github fname=\"ft_transfer definition\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L284-L300\"\n                start=\"284\" end=\"300\" />\n        </Language>\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## FT transfer call\n\nAs stated previously, to bid on the auction the bidder now calls `ft_transfer_call` on the FT contract which subsequently calls the auction contract's `ft_on_transfer` method with fungible tokens attached.", "mimetype": "text/plain", "start_char_idx": 12468, "end_char_idx": 13688, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b7dcd9f-3cd1-448d-8c56-f80736f6c821": {"__data__": {"id_": "7b7dcd9f-3cd1-448d-8c56-f80736f6c821", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6de39e96-fa17-4c48-97dd-dfa442f23ebf", "node_type": "1", "metadata": {}, "hash": "28d1d42594710500d3740c2f88f62fa15377ce2fa773d664c013cd6dabb60764", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a372d6ab-bec4-4acb-b9af-66e5ded45131", "node_type": "1", "metadata": {}, "hash": "188e187bc0591e3aef1b78e54bd155e8b67b8f8398ffd7ffec06696642160d2e", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L101-L104\"\n                start=\"101\" end=\"104\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Language value=\"rust\" language=\"rust\">\n            <Github fname=\"Call ft_transfer_call\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L142-L154\"\n                start=\"142\" end=\"154\" />\n            <Github fname=\"ft_transfer_call definition\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L315-L330\"\n                start=\"315\" end=\"330\" />\n        </Language>\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Checking users' FT balance\n\nPreviously, to check a user's $NEAR balance, we pulled the details from their account. Now we are using FTs we query the balance on the FT contract using `ft_balance_of`, let's check that the contract's balance increased by the bid amount and the user's balance decreased by the bid amount.", "mimetype": "text/plain", "start_char_idx": 13690, "end_char_idx": 15021, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a372d6ab-bec4-4acb-b9af-66e5ded45131": {"__data__": {"id_": "a372d6ab-bec4-4acb-b9af-66e5ded45131", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7b7dcd9f-3cd1-448d-8c56-f80736f6c821", "node_type": "1", "metadata": {}, "hash": "83f362eae4b88d0fd407183c268c317392f1ab470eaffe7f8df1861844f399e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb32371e-fca0-4c6f-9571-b87bcdd71468", "node_type": "1", "metadata": {}, "hash": "8f3abeab0062a6e97274ea044cb4565447c9b8f8a6562b8bf6247b16d0846730", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L106-L109\"\n                start=\"106\" end=\"109\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Language value=\"rust\" language=\"rust\">\n            <Github fname=\"Call ft_balance_of\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L156-L159\"\n                start=\"156\" end=\"159\" />\n            <Github fname=\"ft_transfer_call definition\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L302-L313\"\n                start=\"302\" end=\"313\" />\n        </Language>\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Invalid FT transfer call\n\nIf we make a lower bid than the previous this will cause the auction contract to panic. One might expect that `ft_transfer_call` will fail, but it does not. `ft_on_transfer` will fail and the FT contract will recognize this and reverse the transfer of tokens. So after making an invalid bid, we should check that the call was successful but the parties involved in the transaction (the bidder and the contract) have the same balance of fungible tokens as they did before the call.\n\nPrevious to this, Bob made a bid of 60,000 and Alice was returned her bid bringing her balance back up to 150,000. Now when Alice makes an invalid of 50,000 Alice's balance should remain at 150,000 and the contract should remain at a balance of 60,000.", "mimetype": "text/plain", "start_char_idx": 15023, "end_char_idx": 16793, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb32371e-fca0-4c6f-9571-b87bcdd71468": {"__data__": {"id_": "eb32371e-fca0-4c6f-9571-b87bcdd71468", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a372d6ab-bec4-4acb-b9af-66e5ded45131", "node_type": "1", "metadata": {}, "hash": "188e187bc0591e3aef1b78e54bd155e8b67b8f8398ffd7ffec06696642160d2e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90a65b8a-ab58-4293-b3b0-b49f34980645", "node_type": "1", "metadata": {}, "hash": "d511f1612e8d3ecec15c0508231949c1d0af433f0f8f0a5d84477962b4d95caf", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/04-ft-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L122-L130\"\n                start=\"122\" end=\"130\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/04-ft-owner-claims-winner-gets-nft/tests/test_basics.rs#L183-L200\"\n                start=\"183\" end=\"200\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Using FTs with the CLI\n\nIf you want to interact with the auction contract you're going to need FTs. For this example, we'll use $DAI where the contract address is `dai.fakes.testnet`. One can easily acquire FTs through the [testnet faucet](https://near-faucet.io/). Select DAI and withdraw to the account you will use to place a bid. If you take a look at the transaction details you can see that the faucet registers your account in the FT contract and then sends you DAI from the faucet account.\n\nWhen deploying the contract make sure to specify the FT contract `dai.fakes.testnet`.\n\nThe auction contract will need to be registered as well, you could do this by sending it an arbitrary amount of $DAI from the faucet or you can just register it since it doesn't need any FTs. You should also register the auctioneer,\n\n```\nnear contract call-function as-transaction dai.fakes.testnet storage_deposit json-args '{\"account_id\": \"<auctionContractId>\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR'\n```\n\nNow you can go ahead and place a bid. DAI has 18 decimals meaning that 1 $DAI is made up of 10^24 smallest units.", "mimetype": "text/plain", "start_char_idx": 16795, "end_char_idx": 18607, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90a65b8a-ab58-4293-b3b0-b49f34980645": {"__data__": {"id_": "90a65b8a-ab58-4293-b3b0-b49f34980645", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eb32371e-fca0-4c6f-9571-b87bcdd71468", "node_type": "1", "metadata": {}, "hash": "8f3abeab0062a6e97274ea044cb4565447c9b8f8a6562b8bf6247b16d0846730", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f07ea3cb-2630-44e3-a68a-ccf5c29c4d78", "node_type": "1", "metadata": {}, "hash": "80caf287a8864ca0ef0561ff66923dca16fc0654aac5af395e48be36f5aba96a", "class_name": "RelatedNodeInfo"}}, "text": "To make a bid of 2 $DAI you can use the command:\n\n```\nnear contract call-function as-transaction dai.fakes.testnet ft_transfer_call json-args '{\"receiver_id\": \"<auctionContractId>\", \"amount\": \"2000000000000000000\", \"msg\": \"\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR'\n```\n\n## Auction architecture \n\nWhen creating an application there are numerous ways to structure it. Here, we have one contract per auction meaning we have to deploy a new contract each time we want to host an auction. To make this easier we will leverage a factory contract to deploy auction contracts for an auctioneer. Deploying code for each auction gets expensive, with 100kb of storage costing 1 $NEAR, since each auction stores all the same type of information and implements the same methods one could instead decide to have multiple auctions per contract. \n\nIn such case, the Contract struct would be a map of auctions. We would implement a method to create a new auction by adding an entry to the map with the specific details of that individual auction.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        ```javascript\n        class Contract {\n            auctions: UnorderedMap<string, Auction>\n        ```\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        ```rust \n        pub struct Contract {\n            auctions: IterableMap<String, Auction>\n        ```\n\n    </TabItem>\n\n</Tabs>\n\nHowever, this architecture could be deemed less secure since if a bad actor were to gain access to the contract they would have access to every auction instead of just one.\n\n--- \n\n## Conclusion\n\nIn this section, you learned a lot about fungible tokens: how to send and receive FTs in a smart contract, and then in sandbox tests how to deploy and initialize an FT contract, how to register a user in an FT contract, and send them some tokens, how to attach FTs to a smart contract call and finally how to view the FT balance of a user. With that, we now have our completed auction smart contract!  \n\nTaking a further step back we've taken a very simple auction contract and transformed it into a more production contract with thorough testing.", "mimetype": "text/plain", "start_char_idx": 18608, "end_char_idx": 20781, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f07ea3cb-2630-44e3-a68a-ccf5c29c4d78": {"__data__": {"id_": "f07ea3cb-2630-44e3-a68a-ccf5c29c4d78", "embedding": null, "metadata": {"file_path": "./near_dist/4-ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155", "node_type": "4", "metadata": {}, "hash": "65da1c86101e091a4c2f9a69954549a6407856bae7ce809a82a1beb24b399b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90a65b8a-ab58-4293-b3b0-b49f34980645", "node_type": "1", "metadata": {}, "hash": "d511f1612e8d3ecec15c0508231949c1d0af433f0f8f0a5d84477962b4d95caf", "class_name": "RelatedNodeInfo"}}, "text": "To improve the auction we learned how to make a contract more secure by locking it, added a prize by introducing NFTs, and enabled auctioneers to host auctions with FTs.\n\nUp to now, we've just interacted with the contract via the CLI. In the [next part](./5-frontend.md), we'll learn the basics of creating frontends for NEAR contracts by creating a simple frontend for our auction contract so users can seamlessly interact with it.", "mimetype": "text/plain", "start_char_idx": 20782, "end_char_idx": 21214, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00e39d19-ebbc-45bb-8cf2-e6941c0cbe94": {"__data__": {"id_": "00e39d19-ebbc-45bb-8cf2-e6941c0cbe94", "embedding": null, "metadata": {"file_path": "./near_dist/runtime.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5ed4c21b-7284-40eb-96a0-5d09a14586c1", "node_type": "4", "metadata": {}, "hash": "b0a1c7ec9ddcd51a78ed3e1d75e0b5fbd9ca9a3ba5d03e131aaa0c506f99e3ed", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: runtime\ntitle: Runtime\n---\n\nThis section contains videos that explore the core Runtime, its operation, and how it implements cross-contract calls.\n\n## Runtime Overview\n\nAn in-depth code overview of NEAR Runtime.\n\n<iframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube-nocookie.com/embed/Xi_8PapFCjo\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n  allowfullscreen>\n</iframe>\n\n## Runtime Action and Data Receipts\n\nAn in-depth code review of how NEAR Runtime implements cross contract calls.\n\n<iframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube-nocookie.com/embed/RBb3rJGtqOE\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n  allowfullscreen>\n</iframe>\n\n## Runtime State\n\nAn in-depth overview of how NEAR runtime operates with its state.\n\n<iframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube-nocookie.com/embed/JCkSNL4ie1U\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n  allowfullscreen>\n</iframe>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1148, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42da6a22-f139-4956-8deb-f00fe4ea33c4": {"__data__": {"id_": "42da6a22-f139-4956-8deb-f00fe4ea33c4", "embedding": null, "metadata": {"file_path": "./near_dist/explorer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "603c0fd1-85c8-4339-9082-d5a5d097307c", "node_type": "4", "metadata": {}, "hash": "3f948ad8ac8f2a93e9bcfcb6b0d2f4ea4d0c58e6b30d6e2a1ea119d9016b5cfd", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: explorer\ntitle: Explorer\nsidebar_label: Explorers\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nAn Explorer allows you to quickly obtain information from the blockchain through a friendly user interface.\nThese useful tools enable for example to:\n\n1. Search for a transactions and its receipts.\n2. Check all the interactions in a smart contract.\n3. See the balance of an account.\n4. View block creations in real time\n\n---\n\n## NearBlocks\n\nCreated by the community, [NearBlocks](https://nearblocks.io/) enables to check accounts and transactions with an interface similar to etherscan.\n\n![NearBlocks](/docs/assets/explorers/nearblocks.png)\n*Main page of [NearBlocks](https://nearblocks.io/)*\n\n<hr className=\"subsection\"/>\n\n## Nearscope\n\n[Nearscope](https://nearscope.net/) provides a NEAR node validator and delegator explorer.\n\n![Nearscope](/docs/assets/explorers/nearscope.png)\n*Main page of [Nearscope](https://nearscope.net/)*\n\n<hr className=\"subsection\"/>\n\n## DappLooker\n\n[DappLooker](https://dapplooker.com/) lets you analyze and query NEAR blockchain data, build dashboards to visualize data and share with your community.\n\n![DappLooker](/docs/assets/explorers/dapplooker.png)\n*Main page of [DappLooker](https://dapplooker.com/)*\n\n\n<hr className=\"subsection\"/>\n\n## Pikespeak\n\n[Pikespeak](https://pikespeak.ai/) provides access to real-time and historical data on the NEAR Protocol.\n\n![Pikespeak](/docs/assets/explorers/pikespeak.png)\n*Main page of [Pikespeak](https://pikespeak.ai/)*\n\n## NEARCatalog\n\n[NEARCatalog](https://dev.near.org/applications) provides access to trending decentralized applications (DApps) on the NEAR Protocol.\n\n\n![Nearcatalog](/docs/assets/explorers/nearcatalog.png)\n*Main page of [NEARCatalog](https://dev.near.org/applications)*", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1796, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f41bea12-96fe-4699-b693-c971608d2565": {"__data__": {"id_": "f41bea12-96fe-4699-b693-c971608d2565", "embedding": null, "metadata": {"file_path": "./near_dist/epic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0c7858c-ffbc-4c5d-9544-af1108c36983", "node_type": "4", "metadata": {}, "hash": "95c14be3c467d6ba5a080f833333e54dc9c375c2885ec9b31a516e753ff03141", "class_name": "RelatedNodeInfo"}}, "text": "---\nname: Create an EPIC \ud83d\udd39 \nabout: Create an epic of work that tracks several issues\ntitle: \"\ud83d\udd39[EPIC] \"\nlabels: Epic\nassignees: ''\n\n---\n\n### Description\n\n(Problem statement with a description of work to be accomplished.)\n\n---\n\n### Goal\n\n(Define success. What is the desired outcome?)\n\n---\n\n### Resources\n\n(Relevant documentation, Figma links, and other reference material)\n\n- Item 1\n- Item 2\n- Item 3\n\n---\n\n```[tasklist]\n### Related Issues\n- [ ] https://github.com/near/docs/issues/1\n- [ ] https://github.com/near/docs/issues/2\n- [ ] https://github.com/near/docs/issues/3\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 574, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80ee0266-8c88-4605-91aa-6a8b57de1aff": {"__data__": {"id_": "80ee0266-8c88-4605-91aa-6a8b57de1aff", "embedding": null, "metadata": {"file_path": "./near_dist/01-set-up-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b", "node_type": "4", "metadata": {}, "hash": "24d983b68740ca8ce97bed09fbf8a2df7b3460a600a79b6b067e051654315c47", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5d94f86-f63f-4509-9e1d-6a1c0486ade4", "node_type": "1", "metadata": {}, "hash": "c2ffd83d438292ebfcf431268378d1bdbe0a4fa8fccae9a6d001a8cb066c3532", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 2\nsidebar_label: \"Set up Rust and a contract skeleton\"\ntitle: \"Set up Rust, get a NEAR testnet account, NEAR CLI, and get a basic smart contract skeleton ready\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n# Getting started\n\nIn this tutorial we'll get a `testnet` account, use [NEAR CLI RS](../../../4.tools/cli.md) to add a key to our computer's file system, and set up the basic skeleton of a Rust smart contract.\n\n## Setting up Rust\n\nYou may have found the [online Rust Book](https://doc.rust-lang.org/stable/book), which is a great resource for getting started with Rust. However, there are key items that are different when it comes to blockchain development. Namely, that smart contracts are [technically libraries and not binaries](https://learning-rust.github.io/docs/cargo-crates-and-basic-project-structure/#crate), but for now just know that we won't be using some commands commonly found in the Rust Book.\n\n:::caution\nWe won't be using `cargo run` during smart contract development.\n:::\n\nInstead, we'll be iterating on our smart contract by building it and running tests.\n\n### Install Rust using `rustup`\n\nPlease see the directions from the [Rustup site](https://rustup.rs/#). For OS X or Unix, you may use:\n\n```bash\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n```\n\n(Taken from the [Rust installation guide](https://www.rust-lang.org/tools/install))\n\n### Add Wasm toolchain\n\nSmart contracts compile to WebAssembly (Wasm) so we'll add the toolchain for Rust.\n\n```bash\nrustup target add wasm32-unknown-unknown\n```\n\n(More info on [targets and this toolchain here](https://doc.rust-lang.org/edition-guide/rust-2018/platform-and-target-support/webassembly-support.html).)\n\n## Getting a testnet account\n\nVisit [NEAR Wallet for testnet](https://testnet.mynearwallet.com/) and register for a free account.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1934, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5d94f86-f63f-4509-9e1d-6a1c0486ade4": {"__data__": {"id_": "c5d94f86-f63f-4509-9e1d-6a1c0486ade4", "embedding": null, "metadata": {"file_path": "./near_dist/01-set-up-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b", "node_type": "4", "metadata": {}, "hash": "24d983b68740ca8ce97bed09fbf8a2df7b3460a600a79b6b067e051654315c47", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80ee0266-8c88-4605-91aa-6a8b57de1aff", "node_type": "1", "metadata": {}, "hash": "ca3ff486683cf8043374d1540d1c203f4ac7da2790f6274e5899e77f5aa22dda", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e766689-3e78-4068-a91a-83cc8ae2550a", "node_type": "1", "metadata": {}, "hash": "b55768231c53de9825698d567ed901b04455636851aff5410bbf0b9947590335", "class_name": "RelatedNodeInfo"}}, "text": "For the purposes of this tutorial, you may skip the option to add two-factor authentication if you wish.\n\n:::note What just happened?\nWhen you created your NEAR `testnet` account, a private key was created and placed into your browser's local storage. You may inspect this using developer tools and see it.\n:::\n\n## Creating a new key on your computer\n\nWe'll want to use a command-line interface (CLI) tool to deploy a contract, but at the moment the private key only exists in the browser. Next we'll _add a new key_ to the testnet account and have this stored locally on our computer as a JSON file. (Yes, you can have multiple keys on your NEAR account, which is quite powerful!)\n\nLet's install [NEAR CLI RS](../../../4.tools/cli.md) using `cargo`. You can also download the pre-compiled version of `near-cli-rs` for your OS from [GitHub's Releases page](https://github.com/near/near-cli-rs/releases/).\n\n```bash\ncargo install near-cli-rs\n```\n\nYou may now run:\n\n```bash\nnear\n```\n\nto see various commands, which are covered [in detail here](https://github.com/near/near-cli-rs/blob/main/docs/GUIDE.en.md).\n\nWe'll start by \"logging in\" with this command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near login\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account import-account using-web-wallet network-config testnet\n  ```\n  </TabItem>\n</Tabs>\n\nThis will bring you to NEAR Wallet again where you can confirm the creation of a **full-access** key. We'll get to full-access and function-call access keys later, just know that for powerful actions like \"deploy\" we'll need a full-access key. Follow the instructions from the login command to create a key on your hard drive. This will be located in your operating system's home directory in a folder called `.near-credentials`.\n\n:::note How was a key added?\nWhen you typed `near login`, NEAR CLI generated a key pair: a private and public key.", "mimetype": "text/plain", "start_char_idx": 1935, "end_char_idx": 3896, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e766689-3e78-4068-a91a-83cc8ae2550a": {"__data__": {"id_": "4e766689-3e78-4068-a91a-83cc8ae2550a", "embedding": null, "metadata": {"file_path": "./near_dist/01-set-up-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b", "node_type": "4", "metadata": {}, "hash": "24d983b68740ca8ce97bed09fbf8a2df7b3460a600a79b6b067e051654315c47", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5d94f86-f63f-4509-9e1d-6a1c0486ade4", "node_type": "1", "metadata": {}, "hash": "c2ffd83d438292ebfcf431268378d1bdbe0a4fa8fccae9a6d001a8cb066c3532", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "222d0d2d-6c91-45bf-beaf-bc7d19309fec", "node_type": "1", "metadata": {}, "hash": "11856890a71989f73b1e93cb3ae1d58e50761ad106548bcc713377d28e3b6df9", "class_name": "RelatedNodeInfo"}}, "text": "It kept the private key tucked away in a JSON file and sent the public key as a URL parameter to NEAR Wallet. The URL is long and contains other info instructing NEAR Wallet to \"add a full access key\" to the account. Our browser's local storage had a key (created when the account was made) that is able to do several things, including adding another key. It took the public key from the URL parameter, used it as an argument, and voil\u00e0: the `testnet` account has an additional key!\n:::\n\nYou can see the keys associated with your account by running the following command, replacing `friend.testnet` with your account name:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near list-keys friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account list-keys friend.testnet network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n## Start writing Rust!\n\nThere's a basic repository that's helpful to clone or download [located here](https://github.com/near/boilerplate-template-rs).\n\nThe first thing we'll do is modify the manifest file at `Cargo.toml`:\n\n```diff\n[package]\n-  name = \"rust-template\"\n+  name = \"my-crossword\"\nversion = \"0.1.0\"\n- authors = [\"Near Inc <hello@near.org>\"]\n+ authors = [\"NEAR Friend <friend@example.com>\"]\nedition = \"2018\"\n```\n\nBy changing the `name` here, we'll be changing the compiled Wasm file's name after running the build script. (`build.sh` for OS X and Linux, `build.bat` for Windows.) After running the build script, we can expect to find our compiled Wasm smart contract in `res/my_crossword.wasm`.", "mimetype": "text/plain", "start_char_idx": 3897, "end_char_idx": 5503, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "222d0d2d-6c91-45bf-beaf-bc7d19309fec": {"__data__": {"id_": "222d0d2d-6c91-45bf-beaf-bc7d19309fec", "embedding": null, "metadata": {"file_path": "./near_dist/01-set-up-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b", "node_type": "4", "metadata": {}, "hash": "24d983b68740ca8ce97bed09fbf8a2df7b3460a600a79b6b067e051654315c47", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e766689-3e78-4068-a91a-83cc8ae2550a", "node_type": "1", "metadata": {}, "hash": "b55768231c53de9825698d567ed901b04455636851aff5410bbf0b9947590335", "class_name": "RelatedNodeInfo"}}, "text": "Now let's look at our main file, in `src/lib.rs`:\n\n<Github language=\"rust\" start=\"9\" end=\"44\" url=\"https://github.com/near/boilerplate-template-rs/blob/f1edeead98a9ec12c3f6db311f62025305f57874/contract/src/lib.rs\" />\n\nAs you can see, this is a stub that's ready to be filled in. Let's pause and point out a few items:\n\n- Note the **near** macro is above the struct and the impl\n- Here the main struct is called `Contract`, while in other examples it might be `Counter` or something else. This is purely stylistic, but you may learn more from the link in the previous bullet.\n- You may notice the word \"Borsh\" and wonder what that means. This is a binary serializer. Eventually, we'll want to save data as ones and zeroes to validators' hard drives, and do it efficiently. We use Borsh for this, as is explained [on this website](https://borsh.io).\n\nNext, let's modify this contract little by little\u2026", "mimetype": "text/plain", "start_char_idx": 5505, "end_char_idx": 6404, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "09759803-2e40-4fd1-8099-c2dbd19de1a1": {"__data__": {"id_": "09759803-2e40-4fd1-8099-c2dbd19de1a1", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b747cecf-9e09-470c-bfd7-b8a4740ac2d9", "node_type": "1", "metadata": {}, "hash": "757339552034dc75b8dd2d81f5d9fca68253e5cacf5d725a801de53455624b97", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: storage-solutions\ntitle: Decentralized Storage Solutions\nsidebar_label: Alternative Solutions\n---\n\n> In this article you'll find a brief overview of different decentralized storage solutions that can be integrated into your decentralized applications (dApps). This will allow you to store large amounts of data using a more economical alternative to native NEAR storage.\n\n- [Arweave](#arweave)\n- [Crust](#crust)\n- [IPFS](#ipfs)\n\n---\n\n## On-Chain Storage Constraints\n\nFor storing data on-chain it's important to keep in mind the following:\n\n- You can store an unlimited amount of files, but will cost you 1\u24c3 per 100KB\n- There is a 4 MB limit on how much you can upload at once\n\n\nFor example, if you want to store an NFT purely on-chain (rather than using IPFS or some other decentralized storage solution as mentioned below) you'll have almost an unlimited amount of storage but will have to pay 1 $NEAR per 100 KB of storage used (see [Storage Staking](https://docs.near.org/concepts/storage/storage-staking))\n\nUsers will be limited to 4MB per contract call upload due to `MAX_GAS` constraints. The maximum amount of gas one can attach to a given `functionCall` is 300TGas.\n\n## Arweave\n\n[Arweave](https://www.arweave.org/) is a new type of storage that backs data with sustainable and perpetual endowments\n(tokens held within the protocol that benefit from inflation and the decrease in the cost of storage over long periods of time). This allows users and developers to store data forever.\nArweave acts as a collectively owned hard drive, and allows their users to preserve valuable information, apps, and history indefinitely.\n\nThe Arweave protocol matches a torrent-like swarm of incentivised miners with massive collective hard drive space with those individuals and organizations that need to store data or host content permanently. This is achieved in a decentralized network, and all data stored is backed by block mining rewards and a [sustainable endowment](https://arwiki.wiki/#/en/storage-endowment) ensuring it is available in perpetuity.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2058, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b747cecf-9e09-470c-bfd7-b8a4740ac2d9": {"__data__": {"id_": "b747cecf-9e09-470c-bfd7-b8a4740ac2d9", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09759803-2e40-4fd1-8099-c2dbd19de1a1", "node_type": "1", "metadata": {}, "hash": "2e88ad17d9498b428f8064890340211452be8a85b2d8d3119d5d4e71f8f8154f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "892d327e-e7cc-4dec-b27c-819f736b21c3", "node_type": "1", "metadata": {}, "hash": "7340bbb2238efc5b14775363d25c9bca3cb4b90fbfe5e8dd2b7b2cdb5a67d085", "class_name": "RelatedNodeInfo"}}, "text": ":::info\nTo learn more about Arweave, check its [mining mechanism](https://arwiki.wiki/#/en/arweave-mining) and its [bandwidth-sharing system](https://arwiki.wiki/#/en/karma).\n:::\n\n### Example implementation\n\nLet's see how to store some files on Arweave, by running a local Arweave gateway-like server.\n\n### Arlocal setup\n\n[Arlocal](https://github.com/textury/arlocal) essentially creates a simulated version of Arweave. Think of it like a local node that runs on your computer to store information.\n\nIn this example you'll need to run **two terminals**.\n\n- Open your first terminal and run:\n\n```bash\nnpx arlocal\n```\n\nYou should see the response: `arlocal started on port 1984`.\n\n:::tip\nYou can specify the port by using `npx arlocal <desired port number>`.\n:::\n\n### NEAR-Arweave frontend\n\nThe [NEAR-Arweave repository](https://github.com/near-examples/NEAR-Arweave-Tutorial) has a simple frontend that allows you to store `.png` files using arlocal.\n\n- Now open your second terminal and clone the frontend by running the following command:\n\n```bash\ngit clone https://github.com/near-examples/NEAR-Arweave-Tutorial.git\n```\n\n- Install dependencies by running the following in the project folder:\n\n```bash\ncd NEAR-Arweave-Tutorial\nyarn\n```\n\n- Next, start the application by running:\n\n```bash\nyarn start\n```\n\n\n- Now you're ready to upload an image by selecting the <kbd>Choose File</kbd> button:\n\n![Arweave step 1](/docs/assets/arweave-1.png)\n\n- You should see the transaction ID window become populated after hitting the <kbd>Submit</kbd> button:\n\n![Arweave step 2](/docs/assets/arweave-2.png)\n\n:::tip\nIf you get an error, make sure your arlocal node is running in a **separate terminal.**\n:::\n\n### Mining your transaction\n\nOn Arweave your transaction goes through two stages; a pending stage and a confirmed stage.", "mimetype": "text/plain", "start_char_idx": 2060, "end_char_idx": 3872, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "892d327e-e7cc-4dec-b27c-819f736b21c3": {"__data__": {"id_": "892d327e-e7cc-4dec-b27c-819f736b21c3", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b747cecf-9e09-470c-bfd7-b8a4740ac2d9", "node_type": "1", "metadata": {}, "hash": "757339552034dc75b8dd2d81f5d9fca68253e5cacf5d725a801de53455624b97", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0605c67e-2ca4-41c7-828f-8f01df41de62", "node_type": "1", "metadata": {}, "hash": "09871a7cad5928f128e9f21bf3b366d569668893d31f8f45212623db121e8e1c", "class_name": "RelatedNodeInfo"}}, "text": "For the transaction to be complete and for you to be able to retrieve your data, your transaction must be confirmed.\n\n- Visit `http://localhost:1984/mine` in your browser to send a mine request to your local node.\n\n:::tip\nyou may find that you are still able to retrieve your data without this step, but that's because you are running a local node.\nWhen dealing with a real Arweave node you will have to wait until your transaction has been mined and confirmed.\n:::\n\n### Retrieve the image\n\n- Now you can copy and paste any of your listed arweave transaction IDs in step 5 on the frontend to retrieve your file from your local node:\n\n![Arweave step 3](/docs/assets/arweave-3.png)\n\n:::info\nUsing Arweave's live network will require purchasing artokens to pay for storage. You can find out more at [arweave.org](https://www.arweave.org/).\n:::\n\n:::tip\nThe [near-api-js](https://github.com/near/near-api-js) and [arweave-js](https://github.com/ArweaveTeam/arweave-js) JavaScript libraries allow you to automate most of these steps.\n:::\n\n---\n\n## Crust\n\n[Crust](https://crust.network) provides a Web3.0 decentralized storage network for the Metaverse.\nIt is designed to realize core values of decentralization, privacy and assurance.\nCrust supports multiple storage-layer protocols such as IPFS and exposes instant accessible on-chain storage functions to users.\nCrust\u02bcs technical stack is also capable of supporting data manipulation and computing.\n\nThe Crust protocol is 100% compatible with the [IPFS](https://ipfs.io) protocol, and it matches people who have hard drive space to spare with those who need to store data or host content.\nCrust is based on the Polkadot ecosystem and supports most contract platforms, including NEAR/Solana/Ethereum/Elrond/etc. with its cross-chain solution.\n\n:::info\nTo learn more about Crust, check its [Decentralized Storage Market](https://wiki.crust.network/docs/en/DSM) and [Guaranteed Proof of Stake](https://wiki.crust.network/docs/en/GPoS).", "mimetype": "text/plain", "start_char_idx": 3873, "end_char_idx": 5850, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0605c67e-2ca4-41c7-828f-8f01df41de62": {"__data__": {"id_": "0605c67e-2ca4-41c7-828f-8f01df41de62", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "892d327e-e7cc-4dec-b27c-819f736b21c3", "node_type": "1", "metadata": {}, "hash": "7340bbb2238efc5b14775363d25c9bca3cb4b90fbfe5e8dd2b7b2cdb5a67d085", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a65d0199-fe73-436b-acec-85559591e98e", "node_type": "1", "metadata": {}, "hash": "24a712b26c676ff8926a519448ac3cdca280502bd3068c0bdef78ad3a3f1e5d6", "class_name": "RelatedNodeInfo"}}, "text": "Also, you can start with [Build-101](https://wiki.crust.network/docs/en/build101).\n:::\n\n### Integration example\n\nHere's a simple integration example to store a file with Crust and NEAR.\n\n#### 1. Upload the file to IPFS\n\nFirst, you need to put your files into IPFS.\n\n:::tip\nIf you want to learn how to upload **files and folders** into IPFS, please refer to [this section](https://wiki.crust.network/docs/en/buildFileStoringWithGWDemo#1-upload-files-to-ipfs-gateway).\n:::\n\nThere are 2 ways to upload a file to IPFS:\n\n- using a local IPFS node\n- using a remote [IPFS W3Authed Gateway](https://docs.ipfs.io/concepts/ipfs-gateway/#authenticated-gateways)\n\n:::info\n- You can find more details about `ipfsW3GW` endpoints on [this link](https://github.com/crustio/ipfsscan/blob/main/lib/constans.ts#L29).\n- You can also find a code example on how to upload a file to IPFS on [this link](https://github.com/crustio/crust-demo/blob/main/near/src/index.ts#L20-L51).\n:::\n\n#### 2. Place an storage order\n\nNext, you need to send a transaction named `Place Storage Order` on Crust chain.\nThis transaction will dispatch your storage requirement to each Crust IPFS nodes through the blockchain.\nThen the IPFS nodes will start pulling your file using the IPFS protocol.\n\n:::info\n- You can find more information about `crustChainEndpoint` on [this link](https://github.com/crustio/crust-apps/blob/master/packages/apps-config/src/endpoints/production.ts#L9).\n- You can create your own account (`seeds`) following [these instructions](https://wiki.crust.network/docs/en/crustAccount#create-an-account-1).\n- Check [this link](https://github.com/crustio/crust-demo/blob/main/near/src/index.ts#L82-L112) for a code example about placing a storage order on Crust.\n:::\n\n#### 3. Query order status\n\nThen, you can query the storage order by calling on-chain status (`status{replica_count, storage_duration, ...}`).", "mimetype": "text/plain", "start_char_idx": 5851, "end_char_idx": 7738, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a65d0199-fe73-436b-acec-85559591e98e": {"__data__": {"id_": "a65d0199-fe73-436b-acec-85559591e98e", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0605c67e-2ca4-41c7-828f-8f01df41de62", "node_type": "1", "metadata": {}, "hash": "09871a7cad5928f128e9f21bf3b366d569668893d31f8f45212623db121e8e1c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "24f9e3ed-cd08-4511-ad0e-5cf5492a12e9", "node_type": "1", "metadata": {}, "hash": "1511221c90ddc40f2700d65539fa1d48b5ef4cce1e39df2fcb7365eb71b98eaf", "class_name": "RelatedNodeInfo"}}, "text": "This call will return:\n\n```json\n{\n    \"file_size\": 23710,\n    \"spower\": 24895,\n    \"expired_at\": 2594488, // Storage duration\n    \"calculated_at\": 2488,\n    \"amount\": \"545.3730 nCRU\",\n    \"prepaid\": 0,\n    \"reported_replica_count\": 1, // Replica count\n    \"replicas\": [{\n        \"who\": \"cTHATJrSgZM2haKfn5e47NSP5Y5sqSCCToxrShtVifD2Nfxv5\",\n        \"valid_at\": 2140,\n        \"anchor\": \"0xd9aa29dda8ade9718b38681adaf6f84126531246b40a56c02eff8950bb9a78b7c459721ce976c5c0c9cd4c743cae107e25adc3a85ed7f401c8dde509d96dcba0\",\n        \"is_reported\": true,\n        \"created_at\": 2140\n    }] // Who stores the file\n}\n```\n\n:::info\nFind a code example about quering storage status on [this link](https://github.com/crustio/crust-demo/blob/main/near/src/index.ts#L144-L147).\n:::\n\n#### 4. Add file prepaid\n\nThe default storage time for a single transaction (order) is 6 months.\nIf you want to extend the storage duration, Crust provides a prepaid pool so you can customize the file's storage time.\nThis pool allows you to put some tokens and will automatically extend the file's storage time.\n\n:::info\nFollow [this link](https://github.com/crustio/crust-demo/blob/main/near/src/index.ts#L114-L142) for a code snippet on how to add prepaid tokens to your files.\n:::\n\n---\n\n## IPFS\n\nThe [InterPlanetary File System](https://ipfs.io/) (IPFS) is a protocol and peer-to-peer network for storing and sharing data in a distributed file system. IPFS uses content-addressing to uniquely identify each file in a global namespace connecting all computing devices.", "mimetype": "text/plain", "start_char_idx": 7739, "end_char_idx": 9274, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "24f9e3ed-cd08-4511-ad0e-5cf5492a12e9": {"__data__": {"id_": "24f9e3ed-cd08-4511-ad0e-5cf5492a12e9", "embedding": null, "metadata": {"file_path": "./near_dist/decentralized-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98", "node_type": "4", "metadata": {}, "hash": "dd8d977f21cd6a8f7e487f6f7b56492b5ec887a0e1d2b40e9d892395d172f72c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a65d0199-fe73-436b-acec-85559591e98e", "node_type": "1", "metadata": {}, "hash": "24a712b26c676ff8926a519448ac3cdca280502bd3068c0bdef78ad3a3f1e5d6", "class_name": "RelatedNodeInfo"}}, "text": "### Content identifier\n\nWhen you add a file to IPFS it is split into cryptographically hashed smaller chunks and then given a unique fingerprint called a content identifier (CID).\n\n:::tip\nThe CID acts as an permanent record of a file as it exists at that point in time.\n:::\n\n### Look-up\n\nWhen a node looks up for a file, it ask the peer nodes for the content referenced by the file's CID. When a node views or downloads a file, it caches a copy and become another provider until the cache is cleared.\n\n### Pinned content\n\nOn the IPFS network, each node stores only content it is interested in.\nA node can pin content in order to keep it forever, or discard content it hasn't used to save space.\n\n### File versions\n\nWhen you add a new version of your file to IPFS it will get a new CID since the cryptographic hash is different.\nThis means that any changes to a file will not overwrite the original and common chunks across files can be reused in order to minimize storage costs.\n\n### Naming system\n\nIPFS offers a decentralized naming system so you don't need to remember a long string of CIDs.\nIPFS can find the latest version of your file using the IPNS decentralized naming system and you can use DNSLink to map CIDs to human-readable DNS names.\n\n### IPFS providers\n\n- [Web3.Storage](https://web3.storage/): it's a service that simplifies building on top of IPFS and Filecoin. Web3.Storage is backed by Filecoin and makes content available via IPFS, leveraging the unique properties of each network.\n- [NFT.Storage](https://nft.storage/): this service is built specifically for storing off-chain NFT data. Data is stored decentralized on IPFS and Filecoin. The data is referenced using content-addressed IPFS URIs that can be used in your smart contracts.\n- [Filebase](https://filebase.com/): a geo-redundant IPFS pinning provider that pins all IPFS files with automatic 3x redundancy across diverse, geographic locations for additional performance, redundancy, and reliability.", "mimetype": "text/plain", "start_char_idx": 9276, "end_char_idx": 11256, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ddcefc90-4921-48db-8095-0d41a7110168": {"__data__": {"id_": "ddcefc90-4921-48db-8095-0d41a7110168", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9df625ec-0619-406b-bdbd-3ff899bdcffd", "node_type": "1", "metadata": {}, "hash": "2ba73dbb033d8d846a1c0b3ec0b4c27da157fd05cf30ff75c07192c5559c7d33", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: environment\ntitle: Environment\n#sidebar_label: \ud83c\udfde\ufe0f Environment\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nEvery method execution has an environment associated with information such as:\n\n1. Who called the method\n2. How much money is attached to the call\n3. How many computational resources are available\n4. The current timestamp\n5. Helper functions for Public Key derivation, for example\n\n---\n\n## Environment Variables\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n| Variable Name          | SDK Variable                  | Description                                                                          |\n|------------------------|-------------------------------|--------------------------------------------------------------------------------------|\n| Predecessor            | `near.predecessorAccountId()` | Account ID that called this method                                                   |\n| Current Account        | `near.currentAccountId()`     | Account ID of this smart contract                                                    |\n| Signer                 | `near.signerAccountId()`      | Account ID that signed the transaction leading to this execution                     |\n| Attached Deposit       | `near.attachedDeposit()`      | Amount in NEAR attached to the call by the predecessor                               |\n| Account Balance        | `near.accountBalance()`       | Balance of this smart contract (including Attached Deposit)                          |\n| Prepaid Gas            | `near.prepaidGas()`           | Amount of gas available for execution                                                |\n| Timestamp              | `near.blockTimestamp()`       | Current timestamp (number of non-leap-nanoseconds since January 1, 1970 0:00:00 UTC) |\n| Current Epoch          | `near.epochHeight()`          | Current epoch in the blockchain                                                      |\n| Block Index            | `near.blockIndex()`           | Current block index (a.k.a.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2103, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9df625ec-0619-406b-bdbd-3ff899bdcffd": {"__data__": {"id_": "9df625ec-0619-406b-bdbd-3ff899bdcffd", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ddcefc90-4921-48db-8095-0d41a7110168", "node_type": "1", "metadata": {}, "hash": "cb9a8cb6e948ef758daf70c724b58e274787230a2fbc1e8e3b520642bb07e9e5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3b80943-d011-4240-a8bd-969957b626f5", "node_type": "1", "metadata": {}, "hash": "944795393e78cab25ed6f373cd22bff47b67d72ada524c7844742d057c65dae1", "class_name": "RelatedNodeInfo"}}, "text": "block height)                                            |\n| Storage Used           | `near.storageUsage()`         | Current storage used by this smart contract                                          |\n| Used Gas               | `near.usedGas()`              | Amount of gas used for execution                                                     |\n| Signer Public Key      | `near.signerAccountPk()`      | Sender Public Key                                                                    |\n| Account Locked Balance | `near.accountLockedBalance()` | Balance of this smart contract that is locked                                        |\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n| Variable Name          | SDK Variable                    | Description                                                                          |\n|------------------------|---------------------------------|--------------------------------------------------------------------------------------|\n| Predecessor            | `env::predecessor_account_id()` | Account ID that called this method                                                   |\n| Current Account        | `env::current_account_id()`     | Account ID of this smart contract                                                    |\n| Signer                 | `env::signer_account_id()`      | Account ID that signed the transaction leading to this execution                     |\n| Attached Deposit       | `env::attached_deposit()`       | Amount in NEAR attached to the call by the predecessor                               |\n| Account Balance        | `env::account_balance()`        | Balance of this smart contract (including Attached Deposit)                          |\n| Prepaid Gas            | `env::prepaid_gas()`            | Amount of gas available for execution                                                |\n| Timestamp              | `env::block_timestamp()`        | Current timestamp (number of non-leap-nanoseconds since January 1, 1970 0:00:00 UTC) |\n| Current Epoch          | `env::epoch_height()`           | Current epoch in the blockchain                                                      |\n| Block Index            | `env::block_index()`            | Current block index (a.k.a. block height)                                            |\n| Storage Used           | `env::storage_usage()`          | Current storage used by this smart contract in bytes                                 |\n| Storage Byte Cost      | `env::storage_byte_cost()`      | Current storage cost per byte in yoctoNEAR                                           |\n| Used Gas               | `env::used_gas()`               | Amount of gas used for execution                                                     |\n| Signer Public Key      | `env::signer_account_pk()`      | Sender Public Key                                                                    |\n| Account Locked Balance | `env::account_locked_balance()` | Balance of this smart contract that is locked                                        |\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Who is Calling? Who am I?", "mimetype": "text/plain", "start_char_idx": 2104, "end_char_idx": 5222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3b80943-d011-4240-a8bd-969957b626f5": {"__data__": {"id_": "b3b80943-d011-4240-a8bd-969957b626f5", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9df625ec-0619-406b-bdbd-3ff899bdcffd", "node_type": "1", "metadata": {}, "hash": "2ba73dbb033d8d846a1c0b3ec0b4c27da157fd05cf30ff75c07192c5559c7d33", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84a84c3d-336a-4d72-8a6f-d5650b83de41", "node_type": "1", "metadata": {}, "hash": "2680bf174caa5df09dbfb496f1df4a55f30bbbeaa22de05221aca17cb0f6fa06", "class_name": "RelatedNodeInfo"}}, "text": "The environment gives you access to 3 important users: the `current_account`, the `predecessor`, and the `signer`.\n\n### Current Account\n\nThe `current_account` contains the address in which your contract is deployed. This is very useful to implement ownership, e.g. making a public method only callable by the contract itself.\n\n### Predecessor and Signer\n\nThe `predecessor` is the account that called the method in the contract. Meanwhile, the `signer` is the account that _signed_ the initial transaction.\n\nDuring a simple transaction (no [cross-contract calls](../anatomy/crosscontract.md)) the `predecessor` is the same as the `signer`. For example, if **alice.near** calls **contract.near**, from the contract's perspective, **alice.near** is both the `signer` and the `predecessor`. However, if **contract.near** creates a [cross-contract call](../anatomy/crosscontract.md), then the `predecessor` changes down the line. In the example below, when **pool.near** executes, it would see **contract.near** as the `predecessor` and **alice.near** as the `signer`.\n\n![img](https://miro.medium.com/max/1400/1*LquSNOoRyXpITQF9ugsDpQ.png)\n*You can access information about the users interacting with your smart contract*\n\n:::tip\nIn most scenarios you will **only need to know the predecessor**. However, there are situations in which the signer is very useful. For example, when adding [NFTs](../../5.primitives/nft.md) into [this marketplace](https://github.com/near-examples/nft-tutorial/blob/7fb267b83899d1f65f1bceb71804430fab62c7a7/market-contract/src/nft_callbacks.rs#L42), the contract checks that the `signer`, i.e. the person who generated the transaction chain, is the NFT owner.", "mimetype": "text/plain", "start_char_idx": 5224, "end_char_idx": 6908, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84a84c3d-336a-4d72-8a6f-d5650b83de41": {"__data__": {"id_": "84a84c3d-336a-4d72-8a6f-d5650b83de41", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3b80943-d011-4240-a8bd-969957b626f5", "node_type": "1", "metadata": {}, "hash": "944795393e78cab25ed6f373cd22bff47b67d72ada524c7844742d057c65dae1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2", "node_type": "1", "metadata": {}, "hash": "c6b765f911b4cc4f9a7b36a896ba669fbcc4ac55bf6f8edcb912f54306427807", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Balances and Attached NEAR\nThe environment gives you access to 3 token-related parameters, all expressed in yoctoNEAR (1 \u24c3 = 10<sup>24</sup>y\u24c3):\n\n### Attached Deposit\n`attached_deposit` represents the amount of yoctoNEAR the predecessor attached to the call. \n\nThis amount is **already deposited** in your contract's account, and is **automatically returned** to the `predecessor` if your **method panics**.\n\n:::warning\nIf you make a [cross-contract call](../anatomy/crosscontract.md) and it panics, the funds are sent back to **your contract**. See how to handle this situation in the [callback section](../anatomy/crosscontract.md#failed-execution)\n:::\n\n### Account Balance\n\n`account_balance` represents the balance of your contract (`current_account`).\n\nIt includes the `attached_deposit`, since it was deposited when the method execution started.\n\nIf the contract has any locked $NEAR, it will appear in `account_locked_balance`.\n\n---\n\n### Storage Used\n\n`storage_used` represents the amount of [storage](../anatomy/storage.md) that is currently being used by your contract.\n\n:::tip\nIf you want to know how much storage a structure uses, print the storage before and after storing it.\n:::\n\n---\n\n## Telling the Time\n\nThe environment exposes three different ways to tell the pass of time, each representing a different dimension of the underlying blockchain.\n\n### Timestamp\n\nThe `timestamp` attribute represents the approximated **UNIX timestamp** in **nanoseconds** at which this call was executed. It quantifies time passing in a human way, enabling us to check if a specific date has passed or not.\n\n### Current Epoch\n\nThe NEAR blockchain groups blocks in [Epochs](../../../1.concepts/basics/epoch.md). The `current_epoch` attribute measures how many epochs have passed so far. It is very useful to coordinate with other contracts that measure time in epochs, such as the [validators](../../../1.concepts/basics/validators.md).\n\n### Block Index\n\nThe `block_index` represents the index of the block in which this transaction will be added to the blockchain.\n\n---\n\n## Gas\n\nYour contract has a **limited number of computational resources** to use on each call.", "mimetype": "text/plain", "start_char_idx": 6909, "end_char_idx": 9083, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2": {"__data__": {"id_": "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "84a84c3d-336a-4d72-8a6f-d5650b83de41", "node_type": "1", "metadata": {}, "hash": "2680bf174caa5df09dbfb496f1df4a55f30bbbeaa22de05221aca17cb0f6fa06", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe", "node_type": "1", "metadata": {}, "hash": "8f13f3228fc95973fdf90df3f6f8fdc409f367644647f6f7a808f15223ecb3ab", "class_name": "RelatedNodeInfo"}}, "text": "Such resources are measured in [Gas](/concepts/protocol/gas).\n\nGas can be thought of as wall time, where 1 PetaGas (1_000 TGas) is ~1 second of compute time.\n\nEach code instruction costs a certain amount of Gas, and if you run out of it, the execution halts with the error message `Exceeded the prepaid gas`.\n\nThe environment gives you access to two gas-related arguments: `prepaid_gas` and `used_gas`.\n\n### Prepaid Gas\n`prepaid_gas` represents the amount of Gas the `predecessor` attached to this call. It cannot exceed the limit 300TGas (300 * 10<sup>12</sup> Gas).\n\n### Used Gas\n`used_gas` contains the amount of Gas that has been used so far. It is useful to estimate the Gas cost of running a method.\n\n:::warning\nDuring [cross-contract calls](./crosscontract.md) always make sure the callback has enough Gas to fully execute.\n:::\n\n:::tip\n\nIf you already [estimated the Gas](../../../1.concepts/protocol/gas.md#estimating-costs-for-a-call) a method needs, you can ensure it never runs out of Gas by using `assert`\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\nconst REQUIRED_GAS: Gas = Gas(20_000_000_000_000); // 20 TGas\nassert!(env::prepaid_gas() >= REQUIRED_GAS, \"Please attach at least 20 TGas\");\n```\n\n</TabItem>\n\n</Tabs>\n\n:::\n\n---\n\n## Environment Functions\n\nBesides environmental variables, the SDK also exposes some functions to perform basic cryptographic operations\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n| Function Name         | SDK method                                       | Description                                                                                                                                                                                                                                                                                                                      |\n|-----------------------|--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| SHA 256               | `near.sha256(value)`                             | Hashes a sequence of bytes using sha256.                                                                                                                                                                                                                                                                                         |\n| Keccak 256            | `near.keccak256(value)`                          | Hashes a sequence of bytes using keccak256.", "mimetype": "text/plain", "start_char_idx": 9084, "end_char_idx": 11936, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe": {"__data__": {"id_": "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2", "node_type": "1", "metadata": {}, "hash": "c6b765f911b4cc4f9a7b36a896ba669fbcc4ac55bf6f8edcb912f54306427807", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c0b97064-36b7-4f06-a62a-de6da3b96ab5", "node_type": "1", "metadata": {}, "hash": "4699e06b652304756cdbc7ff9ecc9c9498950ba1e480b43c54f3941f61d887bc", "class_name": "RelatedNodeInfo"}}, "text": "|\n| Keccak 512            | `near.keccak512(value)`                          | Hashes a sequence of bytes using keccak512.                                                                                                                                                                                                                                                                                      |\n| RIPEMD 160            | `near.ripemd160(value)`                          | Hashes the bytes using the RIPEMD-160 hash function.                                                                                                                                                                                                                                                                             |\n| EC Recover            | `near.ecrecover(hash, sig, v, malleabilityFlag)` | Recovers an ECDSA signer address from a 32-byte message `hash` and a corresponding `signature` along with `v` recovery byte. Takes in an additional flag to check for malleability of the signature which is generally only ideal for transactions. Returns 64 bytes representing the public key if the recovery was successful. |\n| Log String            | `near.log(msg)`                                  | Logs the string message. This message is stored on chain.                                                                                                                                                                                                                                                                        |\n| Validator Stake       | `near.validatorStake(accountId)`                 | For a given account return its current stake. If the account is not a validator, returns 0.                                                                                                                                                                                                                                      |\n| Validator Total Stake | `near.validatorTotalStake()`                     | Returns the total stake of validators in the current epoch.                                                                                                                                                                                                                                                                      |\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n| Function Name         | SDK method                                              | Description                                                                                                                                                                                                                                                                                                                      |\n|-----------------------|---------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| SHA 256               | `env::sha256(value)`                                    | Hashes a sequence of bytes using sha256.                                                                                                                                                                                                                                                                                         |\n| Keccak 256            | `env::keccak256(value)`                                 | Hashes a sequence of bytes using keccak256.                                                                                                                                                                                                                                                                                      |\n| Keccak 512            | `env::keccak512(value)`                                 | Hashes a sequence of bytes using keccak512.                                                                                                                                                                                                                                                                                      |\n| SHA 256 (Array)       | `env::sha256_array(value)`                              | Hashes the bytes using the SHA-256 hash function. This returns a 32 byte hash.                                                                                                                                                                                                                                                   |\n| Keccak 256 (Array)    | `env::keccak256_array(value)`                           | Hashes the bytes using the Keccak-256 hash function. This returns a 32 byte hash.", "mimetype": "text/plain", "start_char_idx": 12214, "end_char_idx": 17275, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0b97064-36b7-4f06-a62a-de6da3b96ab5": {"__data__": {"id_": "c0b97064-36b7-4f06-a62a-de6da3b96ab5", "embedding": null, "metadata": {"file_path": "./near_dist/environment.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f27afff-676f-4d43-a604-93cfabfe68d3", "node_type": "4", "metadata": {}, "hash": "d3ea21d9459a9684c03ce902c7e145bf0d40cbbfa17bce38fee711b9698859a7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe", "node_type": "1", "metadata": {}, "hash": "8f13f3228fc95973fdf90df3f6f8fdc409f367644647f6f7a808f15223ecb3ab", "class_name": "RelatedNodeInfo"}}, "text": "|\n| Keccak 512 (Array)    | `env::keccak512_array(value)`                           | Hashes the bytes using the Keccak-512 hash function. This returns a 64 byte hash.                                                                                                                                                                                                                                                |\n| RIPEMD 160 (Array)    | `env::ripemd160_array(value)`                           | Hashes the bytes using the RIPEMD-160 hash function. This returns a 20 byte hash.                                                                                                                                                                                                                                                |\n| EC Recover            | `env::ecrecover(hash, signature, v, malleability_flag)` | Recovers an ECDSA signer address from a 32-byte message `hash` and a corresponding `signature` along with `v` recovery byte. Takes in an additional flag to check for malleability of the signature which is generally only ideal for transactions. Returns 64 bytes representing the public key if the recovery was successful. |\n| Panic String          | `env::panic_str(message)`                               | Terminates the execution of the program with the UTF-8 encoded message.                                                                                                                                                                                                                                                          |\n| Log String            | `env::log_str(message)`                                 | Logs the string message. This message is stored on chain.                                                                                                                                                                                                                                                                        |\n| Validator Stake       | `env::validator_stake(account_id)`                      | For a given account return its current stake. If the account is not a validator, returns 0.                                                                                                                                                                                                                                      |\n| Validator Total Stake | `env::validator_total_stake()`                          | Returns the total stake of validators in the current epoch.                                                                                                                                                                                                                                                                      |\n\n</TabItem>\n\n</Tabs>\n\n:::info \nIn the JS SDK, `throw new Error(\"message\")` mimics the behavior of Rust's `env::panic_str(\"message\")`.\n:::\n\n---", "mimetype": "text/plain", "start_char_idx": 17515, "end_char_idx": 20508, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52fd1eb8-bbb2-46eb-add8-5beb31f09f59": {"__data__": {"id_": "52fd1eb8-bbb2-46eb-add8-5beb31f09f59", "embedding": null, "metadata": {"file_path": "./near_dist/buy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "88073a1a-78ef-4fa3-a822-244de42f52b6", "node_type": "4", "metadata": {}, "hash": "dd815eceb10bedcfb7e9df59ab057c8d8fd28c412f03dac3da7230db483e3ef0", "class_name": "RelatedNodeInfo"}}, "text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"nft-contract-tabs\" className=\"file-tabs\">\n<TabItem value=\"Paras\" label=\"Paras\" default>\n\n```bash\nnear call x.paras.near buy '{\"token_series_id\": \"299102\", \"receiver_id\": \"bob.near\"}' --accountId bob.near --deposit 0.20574\n```\n\n**Example response:**\n\n```json\n\"299102:1\"\n```\n\n\n</TabItem>\n\n<TabItem value=\"Mintbase\" label=\"Mintbase\">\n\n```bash\nnear call simple.market.mintbase1.near buy '{\"nft_contract_id\": \"rubennnnnnnn.mintbase1.near\", \"token_id\": \"38\"}' --accountId bob.near --deposit 0.001\n```\n\n**Example response:**\n\n```json\n{\n  \"payout\": {\n    \"rub3n.near\": \"889200000000000000000\",\n    \"rubenm4rcus.near\": \"85800000000000000000\"\n  }\n}\n```\n\n\n</TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 750, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3a59d227-88be-4978-87b1-31df6fb521f9": {"__data__": {"id_": "3a59d227-88be-4978-87b1-31df6fb521f9", "embedding": null, "metadata": {"file_path": "./near_dist/account-id.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c", "node_type": "4", "metadata": {}, "hash": "4161265b4d62a59f5d5a2f908ea5d84eb329be8469205c12b505b2939ade252a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b370603c-0c31-4080-8ba0-7bafb53b22be", "node_type": "1", "metadata": {}, "hash": "07e44d68b0b33dd4337db5ec9fda23c07375b1777617913b07815ccf2e51f4a5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: account-id\ntitle: Address (Account ID)\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nNEAR accounts are identified by a unique address, which take one of two forms:\n1. [**Implicit addresses**](#implicit-address), which are 64 characters long (e.g. `fb9243ce...`)\n2. [**Named addresses**](#named-address), which are simpler to remember and act as domains (e.g. `alice.near`)\n\n:::tip Searching to create an account?\nYou have multiple ways to create an account, you can [sign-up using your email](https://dev.near.org/signup) (note: email-based accounts currently have limited ability to transfer funds or sign transactions), get a mobile wallet through [telegram](https://web.telegram.org/k/#@herewalletbot), or create a [web wallet](https://app.mynearwallet.com).\n:::\n\n---\n\n## Implicit Address\nImplicit accounts are denoted by a 64 character address, which corresponds to a unique public/private key-pair. Who controls the [private key](./access-keys.md) of the implicit account controls the account.\n\nFor example:\n- The private key: `ed25519:4x1xiJ6u3sZF3NgrwPUCnHqup2o...`\n- Corresponds to the public key: `ed25519:CQLP1o1F3Jbdttek3GoRJYhzfT...`\n- And controls the account: `a96ad3cb539b653e4b869bd7cf26590690e8971...`\n\nImplicit accounts always *exist*, and thus do not need to be created. However, in order to use the account you will still need to fund it with NEAR tokens (or get somebody to pay the gas for your transaction).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1467, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b370603c-0c31-4080-8ba0-7bafb53b22be": {"__data__": {"id_": "b370603c-0c31-4080-8ba0-7bafb53b22be", "embedding": null, "metadata": {"file_path": "./near_dist/account-id.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c", "node_type": "4", "metadata": {}, "hash": "4161265b4d62a59f5d5a2f908ea5d84eb329be8469205c12b505b2939ade252a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3a59d227-88be-4978-87b1-31df6fb521f9", "node_type": "1", "metadata": {}, "hash": "5f0f42dbdd971d349e99593afc882506a535fcb89640b8531551a608a3c4c06a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9556fb67-6820-45b4-9cf3-e82bd6dfc215", "node_type": "1", "metadata": {}, "hash": "99ea4cfff062e8956c9aea01a49bc768469f02dfd2ada88bf2fc7dfc407ae9e6", "class_name": "RelatedNodeInfo"}}, "text": "<details>\n\n<summary> \ud83e\uddd1\u200d\ud83d\udcbb Technical: How to obtain a key-pair  </summary>\n\nThe simplest way to obtain a public / private key that represents an account is using the [NEAR CLI](../../4.tools/cli.md)\n\n```bash\nnear account create-account fund-later use-auto-generation save-to-folder ~/.near-credentials/implicit\n\n# The file \"~/.near-credentials/testnet/8bca86065be487de45e795b2c3154fe834d53ffa07e0a44f29e76a2a5f075df8.json\" was saved successfully\n\n# Here is your console command if you need to script it or re-run:\n#     near account create-account fund-later use-auto-generation save-to-folder ~/.near-credentials/implicit\n```\n\n</details>\n\n---\n\n## Named Address\nIn NEAR, users can register **named accounts** (e.g. `bob.near`) which are simpler to share and remember.\n\nAnother advantage of named accounts is that they can create **sub-accounts** of themselves, effectively working as domains:\n\n1. The [`registrar`](https://nearblocks.io/address/registrar) account can create top-level accounts (e.g. `near`, `sweat`, `kaiching`).\n2. The `near` account can create sub-accounts such as `bob.near` or `alice.near`\n3. `bob.near` can create sub-accounts of itself, such as `app.bob.near`\n4. Accounts cannot create sub-accounts of other accounts\n    - `near` **cannot** create `app.bob.near`\n    - `account.near` **cannot** create `sub.another-account.near`\n5. Accounts have **no control** over their sub-account, they are different entities\n\nAnyone can create a `.near` or `.testnet` account, you just to call the `create_account` method of the corresponding top-level account - `testnet` on testnet, and `near` on mainnet.", "mimetype": "text/plain", "start_char_idx": 1469, "end_char_idx": 3085, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9556fb67-6820-45b4-9cf3-e82bd6dfc215": {"__data__": {"id_": "9556fb67-6820-45b4-9cf3-e82bd6dfc215", "embedding": null, "metadata": {"file_path": "./near_dist/account-id.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c", "node_type": "4", "metadata": {}, "hash": "4161265b4d62a59f5d5a2f908ea5d84eb329be8469205c12b505b2939ade252a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b370603c-0c31-4080-8ba0-7bafb53b22be", "node_type": "1", "metadata": {}, "hash": "07e44d68b0b33dd4337db5ec9fda23c07375b1777617913b07815ccf2e51f4a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "612c5044-66e3-45b4-8fa2-1dd6d62b3706", "node_type": "1", "metadata": {}, "hash": "97b562f9865660153712797d5d95943859bfed627cca3ae992d2e386765ccd54", "class_name": "RelatedNodeInfo"}}, "text": "<details>\n\n<summary> \ud83e\uddd1\u200d\ud83d\udcbb Technical: How to create a named account  </summary>\n\nNamed accounts are created by calling the `create_account` method of the network's top-level account - `testnet` on testnet, and `near` on mainnet. \n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call testnet create_account '{\"new_account_id\": \"new-acc.testnet\", \"new_public_key\": \"ed25519:<data>\"}' --deposit 0.00182 --accountId funding-account.testnet --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction testnet create_account json-args '{\"new_account_id\": \"new-acc.testnet\", \"new_public_key\": \"ed25519:<data>\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.00182 NEAR' sign-as funding-account.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nWe abstract this process in the [NEAR CLI](././4.tools/cli.md) with the following command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near create-account new-acc.testnet --useAccount funding-account.testnet --publicKey ed25519:<data>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account create-account fund-myself new-acc.testnet '1 NEAR' use-manually-provided-public-key ed25519:<data> sign-as funding-account.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nYou can use the same command to create sub-accounts of an existing named account:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near create-account sub-acc.new-acc.testnet --useAccount new-acc.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "612c5044-66e3-45b4-8fa2-1dd6d62b3706": {"__data__": {"id_": "612c5044-66e3-45b4-8fa2-1dd6d62b3706", "embedding": null, "metadata": {"file_path": "./near_dist/account-id.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c", "node_type": "4", "metadata": {}, "hash": "4161265b4d62a59f5d5a2f908ea5d84eb329be8469205c12b505b2939ade252a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9556fb67-6820-45b4-9cf3-e82bd6dfc215", "node_type": "1", "metadata": {}, "hash": "99ea4cfff062e8956c9aea01a49bc768469f02dfd2ada88bf2fc7dfc407ae9e6", "class_name": "RelatedNodeInfo"}}, "text": "testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account create-account fund-myself sub-acc.new-acc.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as new-acc.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n</details>\n\n:::tip\nAccounts have **no control** over their sub-accounts, they are different entities. This means that `near` cannot control `bob.near`, and `bob.near` cannot control `sub.bob.near`.\n:::", "mimetype": "text/plain", "start_char_idx": 4756, "end_char_idx": 5250, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e38b7a23-c662-4a5f-b916-2e4a09cd2dde": {"__data__": {"id_": "e38b7a23-c662-4a5f-b916-2e4a09cd2dde", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b", "node_type": "1", "metadata": {}, "hash": "fd3d36f5c5e9b2843a812842b06784921ff3f5f8fe154b1dd1c2caa3a696de28", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: crosscontract\ntitle: Cross-Contract Calls\n---\n\nimport {CodeTabs, Language, Github} from '@site/src/components/codetabs'\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nYour contract can interact with other deployed contracts, **querying** information and **executing functions** on them.\n\nSince NEAR is a sharded blockchain, its cross-contract calls behave differently than calls do in other chains. In NEAR. cross-contract calls are asynchronous and independent.\n\n:::info Cross-Contract Calls are **Independent**\n\nYou will need two independent functions: one to make the call, and another to receive the result\n\n:::\n\n:::info Cross-Contract Calls are **Asynchronous**\n\nThere is a delay between the call and the callback execution, usually of **1 or 2 blocks**. During this time, the contract is still active and can receive other calls.\n\n:::\n\n---\n\n## Snippet: Querying Information\n\nWhile making your contract, it is likely that you will want to query information from another contract. Below, you can see a basic example in which we query the greeting message from our [Hello NEAR](../quickstart.md) example.\n\n<CodeTabs>\n<Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\" \n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-ts/src/contract.ts\"\n            start=\"18\" end=\"52\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/lib.rs\"\n            start=\"22\" end=\"51\" />\n            <Github fname=\"external.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/external.rs\"\n            start=\"2\" end=\"12\" />\n\n</Language>\n\n</CodeTabs>\n\n---\n\n## Snippet: Sending Information\nCalling another contract passing information is also a common scenario. Below you can see a function that interacts with the [Hello NEAR](../quickstart.md) example to change its greeting message.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2051, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b": {"__data__": {"id_": "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e38b7a23-c662-4a5f-b916-2e4a09cd2dde", "node_type": "1", "metadata": {}, "hash": "ed883db47bdeafa273f5fca725b6749fee3c39deb7c5d16d85b3c1ecc064c287", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "576dfee6-2220-47ae-9793-3f56591a4f42", "node_type": "1", "metadata": {}, "hash": "97b4ed97b8eee3ee7644dd567bdde11a65ba4d5ad23f4d9146b8f444436c1209", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n<Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-ts/src/contract.ts\"\n            start=\"54\" end=\"87\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/lib.rs\"\n            start=\"53\" end=\"80\" />\n    <Github fname=\"external.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/external.rs\"\n            start=\"2\" end=\"12\" />\n\n</Language>\n\n</CodeTabs>\n\n---\n\n## Promises\nCross-contract calls work by creating two promises in the network:\n1. A promise to execute code in the external contract (`Promise.create`)\n2. Optional: A promise to call another function with the result (`Promise.then`)\n\nBoth promises will contain the following information:\n\n- The address of the contract you want to interact with\n- The function that you want to execute\n- The (**encoded**) arguments to pass to the function\n- The amount of GAS to use (deducted from the **attached Gas**)\n- The amount of NEAR to attach (deducted from **your contract\u2019s balance**)\n\n:::tip\n\nThe callback can be made to **any** contract. Meaning that the result could potentially be handled by another contract\n\n:::\n\n\n<hr class=\"subsection\" />\n\n### Creating a Cross Contract Call\n\nTo create a cross-contract call with a callback, create two promises and use the `.then` method to link them:", "mimetype": "text/plain", "start_char_idx": 2053, "end_char_idx": 3612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "576dfee6-2220-47ae-9793-3f56591a4f42": {"__data__": {"id_": "576dfee6-2220-47ae-9793-3f56591a4f42", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b", "node_type": "1", "metadata": {}, "hash": "fd3d36f5c5e9b2843a812842b06784921ff3f5f8fe154b1dd1c2caa3a696de28", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1433af1d-7047-46a4-a5b4-8070a603a63d", "node_type": "1", "metadata": {}, "hash": "e4bdc24a1ebcc69dbfdce290dfce8dd588b529bf0fefff702cf724af4285b867", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    ```ts\n    NearPromise.new(\"external_address\").functionCall(\"function_name\", JSON.stringify(arguments), DEPOSIT, GAS)\n    .then(\n      // this function is the callback\n      NearPromise.new(near.currentAccountId()).functionCall(\"callback_name\", JSON.stringify(arguments), DEPOSIT, GAS)\n    );\n    ```\n\n  </TabItem>\n  <TabItem value=\"rs\" label=\"\ud83e\udd80 Rust\">\n\n    There is a helper macro that allows you to make cross-contract calls with the syntax `#[ext_contract(...)]`. It takes a Rust Trait and converts it to a module with static methods. Each of these static methods takes positional arguments defined by the Trait, then the `receiver_id`, the attached deposit and the amount of gas and returns a new `Promise`.\n\n    ```rust\n    #[ext_contract(external_trait)]\n    trait Contract {\n        fn function_name(&self, param1: T, param2: T) -> T;\n    }\n\n    external_trait::ext(\"external_address\")\n    .with_attached_deposit(DEPOSIT)\n    .with_static_gas(GAS)\n    .function_name(arguments)\n    .then(\n      // this is the callback\n      Self::ext(env::current_account_id())\n      .with_attached_deposit(DEPOSIT)\n      .with_static_gas(GAS)\n      .callback_name(arguments)\n    );\n\n    ```\n\n<details>\n<summary> Gas </summary> \n\nYou can attach an unused GAS weight by specifying the `.with_unused_gas_weight()` method but it is defaulted to 1. The unused GAS will be split amongst all the functions in the current execution depending on their weights. If there is only 1 function, any weight above 1 will result in all the unused GAS being attached to that function. If you specify a weight of 0, however, the unused GAS will **not** be attached to that function. If you have two functions, one with a weight of 3, and one with a weight of 1, the first function will get `3/4` of the unused GAS and the other function will get `1/4` of the unused GAS.", "mimetype": "text/plain", "start_char_idx": 3615, "end_char_idx": 5513, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1433af1d-7047-46a4-a5b4-8070a603a63d": {"__data__": {"id_": "1433af1d-7047-46a4-a5b4-8070a603a63d", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "576dfee6-2220-47ae-9793-3f56591a4f42", "node_type": "1", "metadata": {}, "hash": "97b4ed97b8eee3ee7644dd567bdde11a65ba4d5ad23f4d9146b8f444436c1209", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f423a8c4-d143-471b-8324-a6665b52a676", "node_type": "1", "metadata": {}, "hash": "01f017038d5eca25181a739aa16d4c2981ad63f91c9db7434187aadade72ceb2", "class_name": "RelatedNodeInfo"}}, "text": "</details>\n\n  </TabItem>\n</Tabs>\n\n:::info\n\nIf a function returns a promise, then it will delegate the return value and status of transaction execution, but if you return a value or nothing, then the `Promise` result will not influence the transaction status\n\n:::\n\n:::caution\n\nThe Promises you are creating will **not execute immediately**. In fact, they will be queued in the network an:\n- The cross-contract call will execute 1 or 2 blocks after your function finishes **correctly**.\n\n:::\n\n---\n\n## Callback Function\nIf your function finishes correctly, then eventually your callback function will execute. This will happen whether the **external contract fails or not**.\n\nIn the callback function you will have access to the result, which will contain the status of the external function (if it worked or not), and the values in case of success.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-ts/src/contract.ts\"\n            start=\"42\" end=\"53\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n\n  <Github fname=\"lib.rs\"\n          url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/lib.rs\"\n          start=\"37\" end=\"51\" />\n\n</Language>\n\n</CodeTabs>\n\n:::info Callback with always execute\n\nWe repeat, if your function finishes correctly, then your callback will **always execute**. This will happen no matter if the external function finished correctly or not\n\n:::\n\n:::warning\n\nAlways make sure to have enough Gas for your callback function to execute \n\n:::\n\n:::tip\n\nRemember to mark your callback function as private using macros/decorators, so it can only be called by the contract itself\n\n:::\n\n<hr class=\"subsection\" />\n\n### What happens if the function I call fails?\nIf the external function fails (i.e. it panics), then your callback will be **executed anyway**. Here you need to **manually rollback** any changes made in your\ncontract during the original call. Particularly:\n\n1.", "mimetype": "text/plain", "start_char_idx": 5515, "end_char_idx": 7578, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f423a8c4-d143-471b-8324-a6665b52a676": {"__data__": {"id_": "f423a8c4-d143-471b-8324-a6665b52a676", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1433af1d-7047-46a4-a5b4-8070a603a63d", "node_type": "1", "metadata": {}, "hash": "e4bdc24a1ebcc69dbfdce290dfce8dd588b529bf0fefff702cf724af4285b867", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e5946586-537a-4a8f-b243-9be66e13a876", "node_type": "1", "metadata": {}, "hash": "15cd95f2a90e10535b2fb110df59db99d292eae015e15ca3d6b4c7abc4550948", "class_name": "RelatedNodeInfo"}}, "text": "**Refund the predecessor** if needed: If the contract attached NEAR to the call, the funds are now back in **the contract's account**\n2. **Revert any state changes**: If the original function made any state changes (i.e. changed or stored data), you need to manually roll them back. **They won't revert automatically**\n\n:::warning\nIf your original function finishes correctly then the callback executes **even if the external function panics**. Your state will **not** rollback automatically,\nand $NEAR will **not** be returned to the signer automatically. Always make sure to check in the callback if the external function failed, and manually rollback any\noperation if necessary.\n:::\n\n---\n\n## Concatenating Functions and Promises\n\n\u2705 Promises can be concatenate using the `.and` operator: `P1.and(P2).and(P3).then(P4)`: `P1`, `P2`, and `P3` execute in parallel, after they finish, `P4` will execute and have access to all their results\n\n\u26d4 You cannot **return** a joint promise without a callback: `return P1.and(P2)` is invalid since it misses the `then`\n\n\u2705 You can concatenate `then` promises: `P1.then(P2).then(P3)`: `P1` executes, then `P2` executes with the result of `P1`, then `P3` executes with the result of `P2`\n\n\u26d4 You cannot use an `and` within a `then`: `P1.then(P2.and(P3))` is invalid\n\n\u26d4 You cannot use a `then` within a `then`: `P1.then(P2.then(P3))` is invalid\n\n<hr class=\"subsection\" />\n\n### Multiple Functions, Same Contract\n\nYou can call multiple functions in the same external contract, which is known as a **batch call**.\n\nAn important property of batch calls is that they **act as a unit**: they execute in the same [receipt](../../../1.concepts/protocol/transactions.md#receipt-receipt), and if **any function fails**, then they **all get reverted**.", "mimetype": "text/plain", "start_char_idx": 7579, "end_char_idx": 9352, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e5946586-537a-4a8f-b243-9be66e13a876": {"__data__": {"id_": "e5946586-537a-4a8f-b243-9be66e13a876", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f423a8c4-d143-471b-8324-a6665b52a676", "node_type": "1", "metadata": {}, "hash": "01f017038d5eca25181a739aa16d4c2981ad63f91c9db7434187aadade72ceb2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "81ca5b98-7db6-4f08-ab75-8735d9e32aa2", "node_type": "1", "metadata": {}, "hash": "e304d55eb03aee3da28c1311d8e86312c22103161d347f3f1e9ccb59941d839a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  <Github fname=\"batch_actions\" language=\"js\"\n        url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/batch_actions.ts\"\n        start=\"7\" end=\"17\" />\n\n  </TabItem>\n  <TabItem value=\"rs\" label=\"\ud83e\udd80 Rust\">\n\n  <Github fname=\"lib.ts\" language=\"rust\"\n        url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/batch_actions.rs\"\n        start=\"14\" end=\"19\" />\n\n  </TabItem>\n</Tabs>\n\n:::tip\n\nCallbacks only have access to the result of the **last function** in a batch call\n\n:::\n\n---\n\n### Multiple Functions: Different Contracts\n\nYou can also call multiple functions in **different contracts**. These functions will be executed in parallel, and do not impact each other. This means that, if one fails, the others **will execute, and NOT be reverted**.\n\n<Tabs>\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  <Github fname=\"lib.ts\" language=\"js\"\n        url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/multiple_contracts.ts\"\n        start=\"6\" end=\"21\" />\n\n  </TabItem>\n  <TabItem value=\"rs\" label=\"\ud83e\udd80 Rust\">\n\n  <Github fname=\"lib.rs\" language=\"rust\"\n        url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/multiple_contracts.rs\"\n        start=\"17\" end=\"55\" />\n\n  </TabItem>\n</Tabs>\n\n:::tip\n\nCallbacks have access to the result of **all functions** in a parallel call\n\n:::", "mimetype": "text/plain", "start_char_idx": 9354, "end_char_idx": 10864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "81ca5b98-7db6-4f08-ab75-8735d9e32aa2": {"__data__": {"id_": "81ca5b98-7db6-4f08-ab75-8735d9e32aa2", "embedding": null, "metadata": {"file_path": "./near_dist/crosscontract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0", "node_type": "4", "metadata": {}, "hash": "4894c9b6961e8e1bad4e09fea846ac5514189faa95ebf0435792d8e712660656", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e5946586-537a-4a8f-b243-9be66e13a876", "node_type": "1", "metadata": {}, "hash": "15cd95f2a90e10535b2fb110df59db99d292eae015e15ca3d6b4c7abc4550948", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n## Security Concerns\n\nWhile writing cross-contract calls there is a significant aspect to keep in mind: all the calls are **independent** and **asynchronous**. In other words:\n\n- The function in which you make the call and function for the callback are **independent**.\n- There is a **delay between the call and the callback**, in which people can still interact with the contract\n\nThis has important implications on how you should handle the callbacks. Particularly:\n\n1. Make sure you don't leave the contract in a exploitable state between the call and the callback.\n2. Manually rollback any changes to the state in the callback if the external call failed.\n\nWe have a whole [security section](../security/callbacks.md) dedicated to these specific errors, so please go and check it.\n\n:::warning\nNot following these basic security guidelines could expose your contract to exploits. Please check the [security section](../security/callbacks.md), and if still in doubt, [join us in Discord](https://near.chat).\n:::", "mimetype": "text/plain", "start_char_idx": 10867, "end_char_idx": 11885, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a711a4cb-b4b6-426a-94fc-e5da015bb566": {"__data__": {"id_": "a711a4cb-b4b6-426a-94fc-e5da015bb566", "embedding": null, "metadata": {"file_path": "./near_dist/near-data-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2", "node_type": "4", "metadata": {}, "hash": "ff37e4f1d7212bf1fc2ce9c073db4a324b0b80f91b985d37983c6fa750d2bbd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07ff7850-f63e-4503-a75f-2771dc64a609", "node_type": "1", "metadata": {}, "hash": "8779c486b9248b001a1b0d0cbcb2a2e255cc667ce718212496157f143c05f8b3", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"NEAR Data Flow\"\n---\n\n# NEAR Data Flow\n\n\n<iframe\n width=\"100%\"\n height=\"500\"\n src=\"https://www.youtube.com/embed/VSBJ-A69Km4\"\n title=\"YouTube video player\"\n frameborder=\"0\"\n allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n allowfullscreen>\n</iframe>\n\n\n:::info Data flow\n\nIn this video we give a quick overview on the main concept of how the data flows across the NEAR Protocol blockchain.\n\n:::\n\nNEAR Protocol blockchain data flow might be a bit tricky at a glance. But it is pretty straightforward and follows well-defined rules. In this article, we are going to have a closer look at how the data flows in NEAR Protocol blockchain.\n\nIn fact, any blockchain flow can be represented as an infinity timeline that has a start but has no end.\n\n\n![Blocks Timeline](/docs/flow/01-timeline.png)\n\n\nAnd a block appears on that timeline with some interval. Each of these blocks holds the information about the previous one, thus, creating a *chain of blocks*.\n\n\nNEAR Protocol has a sharded nature, meaning that more than one parallel network, called a [Shard](../../2.build/6.data-infrastructure/lake-data-structures/shard.mdx), can be live at any moment. And each Shard produces a chunk of a block at a given interval. A Block in NEAR Blockchain is a collection of the block chunks from all shards. Block chunk is shortened to [Chunk](../../2.build/6.data-infrastructure/lake-data-structures/chunk.mdx) in NEAR Protocol documentation.\n\nReturning to the data flow itself. The best we can do is to imagine tracks like we could see in audio/video editing apps. Each Shard has its own set of tracks. The top track is for Chunks. They appear no matter what at a given interval, for NEAR Blockchain the interval is about one second. Chunks are being produced even if nothing is happening on the blockchain.\n\n![Timeline as tracks](/docs/flow/02-tracks.png)\n\nBut what do we mean by saying something is happening? We mean that something has triggered some changes in the blockchain.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2032, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07ff7850-f63e-4503-a75f-2771dc64a609": {"__data__": {"id_": "07ff7850-f63e-4503-a75f-2771dc64a609", "embedding": null, "metadata": {"file_path": "./near_dist/near-data-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2", "node_type": "4", "metadata": {}, "hash": "ff37e4f1d7212bf1fc2ce9c073db4a324b0b80f91b985d37983c6fa750d2bbd9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a711a4cb-b4b6-426a-94fc-e5da015bb566", "node_type": "1", "metadata": {}, "hash": "b7b3942383075a75afefe1fd8a55f3fb065b0f73aa27896d3d5dedd9d2c30c51", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "20a4bf6f-f269-4b68-9f07-b24ca79c58e0", "node_type": "1", "metadata": {}, "hash": "ba79e393d7fe2279225d45dfddf7ecfa322f019230883b72d780bdd7d3f2cc6d", "class_name": "RelatedNodeInfo"}}, "text": "And the most well-known method to trigger any changes is to send a [Transaction](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx) to the blockchain with instructions of what we want to change and who has requested those changes.\n\nA transaction needs to be constructed, signed and sent to the blockchain. Once it is executed we expect to have a result - [ExecutionOutcome](../../2.build/6.data-infrastructure/lake-data-structures/execution_outcome.mdx). Oh, that is simple. But it\u2019s not really accurate for NEAR Blockchain.\n\n![Transaction execution](/docs/flow/03-tx-outcome-receipt.png)\n\nIn the beginning there is a [Transaction](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx), it contains instructions we want to be executed on the blockchain. Transaction is sent to NEAR Blockchain.\n\nAnd yes, it is executed there immediately BUT the immediate result of the transaction execution is always just *an acknowledgement that it will be executed on the chain;* this internal execution request is known as [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx). You can think of the [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx) as an internal transaction that exists to pass information across shards.\n\nLet\u2019s get back to the tracks to look at the example.\n\nAssuming we have two accounts living on different [Shards](../../2.build/6.data-infrastructure/lake-data-structures/shard.mdx) **alice.near** and **bob.near**. **alice.near** creates a [Transaction](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx) to send a few tokens to **bob.near**. The [Transaction](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx) is immediately executed and the [ExecutionOutcome](../../2.build/6.data-infrastructure/lake-data-structures/execution_outcome.mdx) for the [Transaction](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx) is always a [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx).", "mimetype": "text/plain", "start_char_idx": 2033, "end_char_idx": 4119, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "20a4bf6f-f269-4b68-9f07-b24ca79c58e0": {"__data__": {"id_": "20a4bf6f-f269-4b68-9f07-b24ca79c58e0", "embedding": null, "metadata": {"file_path": "./near_dist/near-data-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2", "node_type": "4", "metadata": {}, "hash": "ff37e4f1d7212bf1fc2ce9c073db4a324b0b80f91b985d37983c6fa750d2bbd9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07ff7850-f63e-4503-a75f-2771dc64a609", "node_type": "1", "metadata": {}, "hash": "8779c486b9248b001a1b0d0cbcb2a2e255cc667ce718212496157f143c05f8b3", "class_name": "RelatedNodeInfo"}}, "text": "But this [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx) cannot be executed here, because **bob.near** doesn\u2019t live on the same Shard as **alice.near**, so **the Receipt must be executed on the receiver\u2019s Shard**. So the Receipt is moving to the Shard where **bob.near** belongs to.\n\nOn the destination Shard the Receipt is executed and the process is considered as done.\n\n:::info The explanation here is simplified\n\nPlease refer to the [Token transfer](token-transfer-flow.md) flow article\n\n:::\n\nSo the final scheme will look like:\n\n![Complete scheme of sending tokens from an account from one Shard to an account on another](/docs/flow/04-send-nears-flow.png)\n\n## Summary\n\nWe have learnt the main principles of how data is flowing in NEAR Protocol. We have found out that [Transactions](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx) execute and the [ExecutionOutcome](../../2.build/6.data-infrastructure/lake-data-structures/execution_outcome.mdx) of the Transaction is always a [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx).\n\nNow we know that [Receipt](../../2.build/6.data-infrastructure/lake-data-structures/receipt.mdx) is a main internal asset for NEAR Protocol blockchain and it has a power of traveling between [Shards](../../2.build/6.data-infrastructure/lake-data-structures/shard.mdx). We learnt the NEAR Data flow on a simple example. Of course in real life with more complex transactions that involve cross-contract calls, there will be more Receipts and ExecutionOutcomes.\n\nWe hope this article is useful and you will be able to build your dApps and indexers easily with the knowledge of how data if flowing in NEAR Protocol.", "mimetype": "text/plain", "start_char_idx": 4121, "end_char_idx": 5855, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "93712ae1-debe-483e-8370-5d143653d004": {"__data__": {"id_": "93712ae1-debe-483e-8370-5d143653d004", "embedding": null, "metadata": {"file_path": "./near_dist/checklist.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "15ed78f1-8bd7-4a38-a80e-d3aa8915409d", "node_type": "4", "metadata": {}, "hash": "f12ad19075542cac070316453c636b18d2ea071d9f0ea1a6a876b4f8d7da2d4f", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: checklist\ntitle: \u2705 Checklist\n---\n\nOnce you finished developing your smart contract please go through the following list in order to ensure everything is safe for the end user.\n\n:::info\nCheck our [security articles](./welcome.md) to understand how to improve the security of your contract.\n:::\n\n---\n\n## Anatomy\n1. All private methods are decorated as `private`.\n\n## Environment\n2. `predecessor` and `signer` are used correctly through the entire contract.\n\n## Storage\n3. Each time the state grows it is ensured that there is enough balance to cover it\n4. All collections (i.e. Vector, Map, Tree, etc) have an unique id\n5. Check for underflow and overflow!. In rust, you can do this by simply adding the `overflow-checks = true` flag in your `Cargo.toml`.\n\n## Actions\n6. When sending money, you leave enough in the contract to cover the storage cost\n7. If you are tracking user's fund, you **deduct them before** sending them back to the user. \n\n## Callbacks\n8. All private callbacks are marked as `private`\n9. All cross-contract calls have a callback\n10. All callbacks check for errors and roll back the state if necessary\n11. All callbacks return money to the `predecessor` if necessary\n12. Callbacks are free of `panic!`\n13. All the callbacks are given enough GAS to execute entirely\n14. The contract is not left in an exploitable state between a cross-contract call and its callback", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1392, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2799694-4181-4d91-bf2b-b47fd15facf2": {"__data__": {"id_": "e2799694-4181-4d91-bf2b-b47fd15facf2", "embedding": null, "metadata": {"file_path": "./near_dist/01-collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294", "node_type": "4", "metadata": {}, "hash": "fe11e3bd8fbdaa43e4a5cb0a25da8b391fc05e00e7f51e74dc55c6bafc566229", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a78a8da-5e67-44d7-97dc-80787da24f60", "node_type": "1", "metadata": {}, "hash": "1d17f9b13ca11f80e475fb481a4cf3b308418626d73287e4b85355800230102f", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 2\nsidebar_label: \"Store multiple puzzles\"\ntitle: \"Store multiple crossword puzzles using a specialized collection in NEAR called a LookupMap\"\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\nimport bookPagination from '/docs/assets/crosswords/paging-through-hashes-swing--pierced_staggg.near--pierced_stag.jpg';\nimport guardsAroundContract from '/docs/assets/crosswords/guards-contract-permissions--connoisseur_dane.near--connoisseurdane.png';\n\n# Using collections\n\nAs mentioned in the previous chapter, the [online Rust Book](https://doc.rust-lang.org/stable/book) is a great reference for folks getting started with Rust, but there are concepts that differ when we're dealing with the blockchain. One of these differences is the use of collections.\n\nThe reference-level documentation of the Rust SDK explains this concept well:\n\n:::note  Motivation for specialized collections\n>Collections that offer an alternative to standard containers from [Rust's] std::collections::* by **utilizing the underlying blockchain trie storage more efficiently**.<br/>\n>For example, the following smart contract does not work with state efficiently, because **it will load the entire HashMap at the beginning of the contract call**, and will save it entirely at the end, in cases when there is state modification. **This is fine for small number of elements, but very inefficient for large numbers**.\n\n\u2014 [NEAR SDK reference documentation](https://docs.rs/near-sdk/latest/near_sdk/collections/index.html)\n:::\n\nIn chapter 1, we set the crossword puzzle solution hash when we first deployed the contract and called the initialization method `new`, passing it. This would only allow us to have only one puzzle, but let's allow for many.\n\nAt a high level, let's discuss what we'll want to add if our contract is to store multiple crossword puzzles. First, we'll have the concept of many puzzles where some of them will have different states (unfinished and finished) and we'll want to know which ones are unsolved in quick way. Another thing, which is a general rule of thumb when writing smart contracts, is to anticipate what might happen if it gets a lot of usage. What if we end up with 10,000 crossword puzzles? How might that affect how many data structures we use and which ones?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2297, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a78a8da-5e67-44d7-97dc-80787da24f60": {"__data__": {"id_": "9a78a8da-5e67-44d7-97dc-80787da24f60", "embedding": null, "metadata": {"file_path": "./near_dist/01-collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294", "node_type": "4", "metadata": {}, "hash": "fe11e3bd8fbdaa43e4a5cb0a25da8b391fc05e00e7f51e74dc55c6bafc566229", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2799694-4181-4d91-bf2b-b47fd15facf2", "node_type": "1", "metadata": {}, "hash": "6784f86ab221193da638c513041df3fefd1f21e8cbf611eb03a68071de2de071", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9ae249f5-25c9-4191-8d81-78ce84330948", "node_type": "1", "metadata": {}, "hash": "72d6d54297f02a95f4ce229df66f0fd5629c9998bbca8ad7a75baeeec9d1d335", "class_name": "RelatedNodeInfo"}}, "text": "## LookupMap and UnorderedSet\n\nLet's try having two specialized NEAR collections:\n\n1. A [LookupMap](https://docs.rs/near-sdk/latest/near_sdk/collections/struct.LookupMap.html) which will store key-value pairs. (Solution hash \u00bb Puzzle object)\n2. An [UnorderedSet](https://docs.rs/near-sdk/latest/near_sdk/collections/struct.UnorderedSet.html) containing a set (list with no duplicates) of the solution hashes for puzzles which have not been solved yet.\n\nAs you look at the list of specialized collections in the Rust SDK, you might notice some begin with `Lookup` while others have `Unordered`. As is written in the reference documentation, the `Lookup` is non-iterable while the `Unordered` collections are iterable. This means if you will need to loop through the list of contents of this data structure, you'll likely use an iterable data structure. If you'll only ever be adding and retrieving data by the key, and the key will always be known, it's more efficient to use a non-iterable collection.\n\nSo why would we have two data structures here? Again, if we end up with a large number of puzzles, we might not be able to loop through all the puzzles, looking for ones that are unsolved. Because of the limit of gas execution per transaction, we must be conscious that there can be operations which will eventually exceed this limit. I suppose we could assume  that our `UnorderedSet` of unsolved puzzles wouldn't contain tens of thousands of puzzles. That's one way to avoid running into limits, but we could also learn how to utilize **pagination** through an iterable collection like an `UnorderedSet` which we'll get to later.\n\n<figure>\n    <img src={bookPagination} alt=\"Book showing pagination of hashes. Art created by pierced_staggg.near\" width=\"600\"/>\n    <figcaption>Think of our collection as having multiple pages of puzzle hashes.<br/>Art by <a href=\"https://twitter.com/pierced_stag\" target=\"_blank\" rel=\"noopener noreferrer\">pierced_staggg.near</a></figcaption>\n</figure>\n<br/>\n\nAs we remember from the previous chapter, every smart contract has a primary struct containing the `#[near(contract_state)]` macro.", "mimetype": "text/plain", "start_char_idx": 2299, "end_char_idx": 4428, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9ae249f5-25c9-4191-8d81-78ce84330948": {"__data__": {"id_": "9ae249f5-25c9-4191-8d81-78ce84330948", "embedding": null, "metadata": {"file_path": "./near_dist/01-collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294", "node_type": "4", "metadata": {}, "hash": "fe11e3bd8fbdaa43e4a5cb0a25da8b391fc05e00e7f51e74dc55c6bafc566229", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a78a8da-5e67-44d7-97dc-80787da24f60", "node_type": "1", "metadata": {}, "hash": "1d17f9b13ca11f80e475fb481a4cf3b308418626d73287e4b85355800230102f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0695e43a-0ddb-4c80-880b-58256516c59f", "node_type": "1", "metadata": {}, "hash": "29a9af9cca844680e93c53938e835f34d5518f8101ae7bbea91911c0161a5f27", "class_name": "RelatedNodeInfo"}}, "text": ":::note Naming the primary struct\nNote in the [previous chapter](../01-basics/01-set-up-skeleton.md#start-writing-rust) we named our primary struct `Contract`, but in this chapter we'll call it `Crossword.`\n\nThe name of the struct doesn't matter and there's nothing special about naming it `Contract`, though you might see that convention used in several smart contracts on NEAR. We've named it something different simply to illustrate that there's no magic behind the scenes. This *does* mean, however, that our `impl` block will also be `Crossword`.\n:::\n\nHere's how our struct will look with the iterable and non-iterable NEAR collections:\n\n<Github language=\"rust\" start=\"62\" end=\"72\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/master/contract/src/lib.rs\" />\n\nAbove, we have the `puzzles` and `unsolved_puzzles` fields which are collections.\n\nWe also have an `owner_id` so we can exercise a common pattern in smart contract development: implementing a rudimentary permission system which can restrict access to certain functions. We'll expand on this thought in a moment.\n\nThe snippet below shows the first method in the implementation of the `Crossword` struct, where the `new` function sets up these two specialized collections.\n\n<Github language=\"rust\" start=\"74\" end=\"83\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/master/contract/src/lib.rs\" />\n\nSo during the initialization function (`new`) we're setting the `owner_id`. For our purposes the owner will likely be the contract itself, but there can be several reasons to have it be a DAO or another user. Next, let's look at the `b\"c\"` and `b\"u\"` bits for the collection fields.\n\n## Collections have prefixes\n\nAbove, the `new` function is initializing the struct's fields by giving them a unique prefix. You can learn more about [the prefixes here](../../../2.build/2.smart-contracts/anatomy/collections.md), but know that these prefixes (`c` and `u`) should be short and different.\n\nLet's take a peek at how we'll add a new crossword puzzle.", "mimetype": "text/plain", "start_char_idx": 4430, "end_char_idx": 6487, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0695e43a-0ddb-4c80-880b-58256516c59f": {"__data__": {"id_": "0695e43a-0ddb-4c80-880b-58256516c59f", "embedding": null, "metadata": {"file_path": "./near_dist/01-collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294", "node_type": "4", "metadata": {}, "hash": "fe11e3bd8fbdaa43e4a5cb0a25da8b391fc05e00e7f51e74dc55c6bafc566229", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9ae249f5-25c9-4191-8d81-78ce84330948", "node_type": "1", "metadata": {}, "hash": "72d6d54297f02a95f4ce229df66f0fd5629c9998bbca8ad7a75baeeec9d1d335", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3571af43-9277-419f-ae43-f16dbe01ba87", "node_type": "1", "metadata": {}, "hash": "5eca19d592ef796ecc652a9ee5947a91901d6856cea9d7603128974925e1653d", "class_name": "RelatedNodeInfo"}}, "text": "Note that there will be a new struct here, `Answer`, which we haven't defined yet. We'll also be introducing the concept of enums, like `PuzzleStatus::Solved` and `PuzzleStatus::Unsolved`. We'll be covering these in the next section.\n\nUnlike the previous chapter where there was only one crossword puzzle, we'll be inserting into our new collections, so let's create a `new_puzzle` method.\n\n<Github language=\"rust\" start=\"140\" end=\"157\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/master/contract/src/lib.rs\" />\n\nNow we're set up to store multiple puzzles!\n\n## Permissions or permissionless?\n\n<figure>\n    <img src={guardsAroundContract} alt=\"Guards or bouncers in front of a futuristic club with the label of a NEAR smart contract. Art created by connoisseur_dane.near\" width=\"600\"/>\n    <figcaption>Guarding which accounts can enter the smart contract logic.<br/>Art by <a href=\"https://twitter.com/connoisseurdane\" target=\"_blank\" rel=\"noopener noreferrer\">connoisseur_dane.near</a></figcaption>\n</figure>\n<br/>\n\n**Is NEAR permissionless?**\n\nYes.\n\n**What did you mean by a permission system earlier, and what are the ways you can control permissions?**\n\nThere are two ways that permissions can be controlled:\n\n1. In the smart contract code itself\n2. When using function-call access keys\n\nWe'll get to the second topic in later in this chapter, but will focus on the first item.\n\nAs you can see in the previous snippet, the first thing that happens in the `new_puzzle` method is a check. It looks to see if the predecessor (the person who most recently called this method, sometimes the same as the signer) is the same as the `owner_id` that we set during the contract's initialization.\n\nIf someone else is trying to call `new_puzzle`, this check will fail and the smart contract will panic, going no further. This example is the simplest form of a permission. Much more complex system can exist for users. The SputnikDAO smart contracts, for instance, implement custom policies. It's up the smart contract developer to write their roles/policies and apply them to users.", "mimetype": "text/plain", "start_char_idx": 6488, "end_char_idx": 8589, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3571af43-9277-419f-ae43-f16dbe01ba87": {"__data__": {"id_": "3571af43-9277-419f-ae43-f16dbe01ba87", "embedding": null, "metadata": {"file_path": "./near_dist/01-collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294", "node_type": "4", "metadata": {}, "hash": "fe11e3bd8fbdaa43e4a5cb0a25da8b391fc05e00e7f51e74dc55c6bafc566229", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0695e43a-0ddb-4c80-880b-58256516c59f", "node_type": "1", "metadata": {}, "hash": "29a9af9cca844680e93c53938e835f34d5518f8101ae7bbea91911c0161a5f27", "class_name": "RelatedNodeInfo"}}, "text": "Sometimes an allow-list (or whitelist) is used.\n\nIn short, **any account with a full-access key can call any method on a smart contract**, but that doesn't mean the smart contract will let them continue execution. It's up to the developer to protect their functions with guards like the one in `new_puzzle`.\n\n---\n\nLet's dive into structs and enums next.", "mimetype": "text/plain", "start_char_idx": 8590, "end_char_idx": 8943, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4a9ebb97-4c93-4b57-bef9-eca579c6d95c": {"__data__": {"id_": "4a9ebb97-4c93-4b57-bef9-eca579c6d95c", "embedding": null, "metadata": {"file_path": "./near_dist/query-data.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "71cf68bb-46aa-4bb7-9d15-eab0945e5724", "node_type": "4", "metadata": {}, "hash": "ef81e729adcf595daf00c95a0df2bc95110bb0643ee7db2539d9f211f2ec9bc9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c4e662d-54ec-4be3-a87c-bb02458891df", "node_type": "1", "metadata": {}, "hash": "3b4761d7c07924ba0465c87c8321c00a5c50cd410634a77d5fdffb6b1537f91c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: query-data\ntitle: Accessing and Querying Historical data\nsidebar_label: Access & Query Historical data\n---\n\nIn this article, you'll find a high-level overview about the two most common use-cases for blockchain indexing, and how they can be solved using NEAR [QueryAPI](intro.md) and [BigQuery](../big-query.md).\n\n## Overview\n\nBuilding a blockchain indexer depends on the kind of historical blockchain data that you want to access and query. Let's consider these two most common blockchain indexing use cases:\n\n- an indexer doing [blockchain analytics](#analytics), reporting, business intelligence, and big-data queries.\n- an indexer built as a backend for a [web3 dApp](#webapps) building interactive and responsive UIs, that tracks interactions over a specific smart contract.\n\n:::tip\n\nWant to learn more about indexing? Check the [Introduction to Indexers](../../../1.concepts/3.advanced/indexers.md) article.\n\n:::\n\n## Analytics\n\nWhen building a Blockchain analytics solution, you'll be creating queries to track NEAR assets, monitor transactions, or analyze on-chain events at a massive scale. Handling that huge amount of data in an optimal way so you can provide accurate results quickly requires a well designed solution.\n\nNear [BigQuery solution](../big-query.md) provides instant insights, and let you access Historical on-chain data and queries at scale. It also eliminates your need to store and process bulk NEAR protocol data; you can just query as little or as much data as you want.\n\nBigQuery does not require prior experience with blockchain technology. As long as you have a general knowledge of SQL, you'll be able create queries and unlock insights about transactions, smart contract utilization, user engagement, trends, and much more.\n\n:::tip\n\nLearn more about BigQuery in [this article](../big-query.md).\n\n:::\n\n### Analytics use cases\n\nCommon Blockchain analytics use cases that can be managed with [BigQuery](../big-query.md):\n\n- create queries to track NEAR assets\n- monitor transactions\n- analyze on-chain events at a massive scale.\n- use indexed data for data science tasks, including on-chain activities\n- identifying trends\n- feeding AI/ML pipelines for predictive analysis\n- use NEAR's indexed data for deep insights on user engagement\n- smart contract utilization\n- insights across tokens and NFT adoption.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2344, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7c4e662d-54ec-4be3-a87c-bb02458891df": {"__data__": {"id_": "7c4e662d-54ec-4be3-a87c-bb02458891df", "embedding": null, "metadata": {"file_path": "./near_dist/query-data.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "71cf68bb-46aa-4bb7-9d15-eab0945e5724", "node_type": "4", "metadata": {}, "hash": "ef81e729adcf595daf00c95a0df2bc95110bb0643ee7db2539d9f211f2ec9bc9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a9ebb97-4c93-4b57-bef9-eca579c6d95c", "node_type": "1", "metadata": {}, "hash": "8fd89fc585b7252769a2bf06265120152e4f0c0c1f316fc905bdb642262b1fa4", "class_name": "RelatedNodeInfo"}}, "text": "## WebApps\n\nBuilding Web3 apps that handle historical blockchain data require dedicated solutions that manage the data and reduce the latency of requests, as it's not possible to scan the whole blockchain when a user makes a request.\nFor example, if your dApp needs to keep track of minted NFTs from a specific smart contract, you'll need to keep historical data related to that contract, the NFTs, and all the transactions in an optimized way so the dApp can provide fast responses to the user.\n\nA simple solution for developers building [NEAR Components](../../3.near-components/what-is.md) is using [QueryAPI](intro.md), a fully managed solution to build indexer functions, extract on-chain data, store it in a database, and be able to query it using GraphQL endpoints.\n\nIn the NFT example, with QueryApi you can create an indexer that follow the activity of your `my-nft-contract.near` smart contract, records all activities related to it (such as minting and transfers), and provides simple endpoints to communicate with your dApp, when your application needs to display all the minted NFTs, or the related transactions to a specific NFT.\n\nQueryApi can also reduce app development time, by letting you auto-generate [NEAR component code](index-function.md#create-a-bos-component-from-query) straight from a GraphQL query. By creating the boilerplate code, you can use it to render a UI and publish your new NEAR component.\n\n:::tip\n\nLearn more about QueryAPI in this [Overview article](intro.md).\n\n:::\n\n### dApp use cases\n\nFor a technical implementation deep-dive, check these QueryAPI tutorials:\nbuild/near-data-infrastructure/lake-framework/building-indexers/nft-indexer\n  - [NFTs Indexer](../lake-framework/building-indexers/nft-indexer.md): an indexer that keeps track of newly minted NFT on Near blockchain.\n  - [Posts Indexer](../../../3.tutorials/near-components/indexer-tutorials/posts-indexer.md): this indexer keeps track of every new NEAR Social post found on the blockchain.\n  - [Social Feed Indexer](../../../3.tutorials/near-components/indexer-tutorials/feed-indexer.md): this indexer keeps track of new posts, comments, and likes on NEAR Social, so a social feed can be rendered quickly.", "mimetype": "text/plain", "start_char_idx": 2347, "end_char_idx": 4553, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dfffeca2-a736-4de9-ac76-d43522a09268": {"__data__": {"id_": "dfffeca2-a736-4de9-ac76-d43522a09268", "embedding": null, "metadata": {"file_path": "./near_dist/get-proposal-list.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c6414cc-64c0-4e35-a787-e986444721ec", "node_type": "4", "metadata": {}, "hash": "23b625e7b49125dcb94e97a71fcf9ae0036cfd77daae472b2a47874094c5a1e1", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view nearweek-news-contribution.sputnik-dao.near get_proposals '{\"from_index\": 9262, \"limit\": 2}'\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n[\n  {\n    id: 9262,\n    proposer: 'pasternag.near',\n    description: 'NEAR, a top non-EVM blockchain, has gone live on Router\u2019s Testnet Mandara. With Router Nitro, our flagship dApp, users in the NEAR ecosystem can now transfer test tokens to and from NEAR onto other supported chains. $$$$https://twitter.com/routerprotocol/status/1727732303491961232',\n    kind: {\n      Transfer: {\n        token_id: '',\n        receiver_id: 'pasternag.near',\n        amount: '500000000000000000000000',\n        msg: null\n      }\n    },\n    status: 'Approved',\n    vote_counts: { council: [ 1, 0, 0 ] },\n    votes: { 'brzk-93444.near': 'Approve' },\n    submission_time: '1700828277659425683'\n  },\n  {\n    id: 9263,\n    proposer: 'fittedn.near',\n    description: 'How to deploy BOS component$$$$https://twitter.com/BitkubAcademy/status/1728003163318563025?t=PiN6pwS380T1N4JuQXSONA&s=19',\n    kind: {\n      Transfer: {\n        token_id: '',\n        receiver_id: 'fittedn.near',\n        amount: '500000000000000000000000',\n        msg: null\n      }\n    },\n    status: 'InProgress',\n    vote_counts: { 'Whitelisted Members': [ 1, 0, 0 ] },\n    votes: { 'trendheo.near': 'Approve' },\n    submission_time: '1700832601849419123'\n  }\n]\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1409, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cd96485e-f8e5-4906-839a-76673189a565": {"__data__": {"id_": "cd96485e-f8e5-4906-839a-76673189a565", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa6c2b9e-2abc-4995-81fc-374edf6176d4", "node_type": "1", "metadata": {}, "hash": "521242be8d5e100e51e6ee0e6306645612b5c8f85b8b96efed3cbd9e19e5308e", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 6\nsidebar_label: \"Access keys and login 2/2\"\ntitle: \"Implementing the login button\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport loggingIn from '/docs/assets/crosswords/logging-in.png';\nimport explorerTransfer from '/docs/assets/crosswords/chapter-2-explorer-transfer.jpg';\n\n# Add the login functionality\n\n## Plan\n\nWe're going to add a login button that uses `near-api-js` to login with NEAR.\n\nBelow is the workflow of logging in:\n\n<img src={loggingIn} alt=\"Three steps to logging in. 1. click the login button we will build. 2. It creates a private key in the browser local storage. 3. Redirected to NEAR Wallet where you sign, creating a new key\"/><br/><br/>\n\n1. User clicks the login button\n2. `near-api-js` creates a private key in the browser\n3. A redirect to NEAR Wallet occurs, passing the public key. NEAR Wallet (often) has a full-access key capable of the `AddKey` action. The user follows a wizard, ultimately authorizing the creation of a new key.\n\n## Adding the button\n\nIn the `src` directory we'll look at:\n\n- `index.js`\n- `App.js`\n\nWe won't go over every change, but instead point to the new logic.\n\nFirst we set up a `WalletConnection` object from our JavaScript library:\n\n<Github language=\"js\" start=\"12\" end=\"20\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/1d64bf29c3376a18c71e5c5a075e29824d7a55f5/src/index.js\" />\n\nIt's then used in React:\n\n```js\nconst signIn = () => {\n  walletConnection.requestSignIn(\n    nearConfig.contractName,\n    '', // title. Optional, by the way\n    '', // successUrl. Optional, by the way\n    '', // failureUrl.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1698, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa6c2b9e-2abc-4995-81fc-374edf6176d4": {"__data__": {"id_": "aa6c2b9e-2abc-4995-81fc-374edf6176d4", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd96485e-f8e5-4906-839a-76673189a565", "node_type": "1", "metadata": {}, "hash": "890a8f31bc5e13799aa3ce880b60be14049a5dcacfc361d1819a864564fb2872", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "77f32702-5152-4c4a-bc66-8dd1165d3da7", "node_type": "1", "metadata": {}, "hash": "e7ad8b89f4c505c9b664b80463388defdaf0f5e18948cc7dd2fa72fb3561ddb0", "class_name": "RelatedNodeInfo"}}, "text": "Optional, by the way\n  );\n};\n\nconst signOut = () => {\n  walletConnection.signOut();\n  \u2026\n};\n\n\u2026\n\nreturn (\n  <div id=\"page\">\n    <h1>NEAR Crossword Puzzle</h1>\n    <div id=\"crossword-wrapper\">\n      <div id=\"login\">\n        { currentUser\n          ? <button onClick={signOut}>Log out</button>\n          : <button onClick={signIn}>Log in</button>\n        }\n      </div>\n      \u2026\n    </div>\n  </div>\n);\n```\n\nOnce logged in, that `WalletConnection` object will be tied to the logged-in user, and they'll use that key to sign transactions and interact with the contract.\n\n:::info Transactions that redirect to NEAR Wallet\nIn our improved crossword puzzle, the function-call access key for the logged-in user will be signing a transaction to submit their solution.\n\nYou may notice, however, that sometimes you'll be redirected to NEAR Wallet, and other times you aren't.\n\nThis goes back to an earlier rule we mentioned: function-call access keys cannot send NEAR. They cannot perform the `Transfer` Action.\n\nIf a function call requires even 1 yoctoNEAR, NEAR Wallet (or any other wallet containing a full-access key) is required to sign the transaction.\n:::\n\n## Call the contract function from JavaScript\n\nThe frontend code contains a check to see if the user has completed the crossword puzzle successfully. In there we'll add logic to call the `submit_solution` function on the smart contract.\n\n```js\n// Send the 5 NEAR prize to the logged-in winner\nlet functionCallResult = await walletConnection.account().functionCall({\n  contractId: nearConfig.contractName,\n  methodName: 'submit_solution',\n  args: {solution: seedPhrase, memo: \"Yay I won!", "mimetype": "text/plain", "start_char_idx": 1699, "end_char_idx": 3335, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77f32702-5152-4c4a-bc66-8dd1165d3da7": {"__data__": {"id_": "77f32702-5152-4c4a-bc66-8dd1165d3da7", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa6c2b9e-2abc-4995-81fc-374edf6176d4", "node_type": "1", "metadata": {}, "hash": "521242be8d5e100e51e6ee0e6306645612b5c8f85b8b96efed3cbd9e19e5308e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f", "node_type": "1", "metadata": {}, "hash": "facdbfd5b5ee1f1e4a64eafc676d34a2ad7f0cfcdc701639f803d137602a504a", "class_name": "RelatedNodeInfo"}}, "text": "\"},\n  gas: DEFAULT_FUNCTION_CALL_GAS, // optional param, by the way\n  attachedDeposit: 0,\n  walletMeta: '', // optional param, by the way\n  walletCallbackUrl: '' // optional param, by the way\n});\n\nif (functionCallResult && functionCallResult.transaction && functionCallResult.transaction.hash) {\n  // Display a link the NEAR Explorer\n  console.log('Transaction hash for explorer', functionCallResult.transaction.hash)\n}\n```\n\n:::tip try\u2026catch blocks\nIt's not a bad idea to wrap these type of calls in try\u2026catch blocks to properly handle any errors that come from the blockchain.\n\nThese errors can be quite helpful to the developer and the end user.\n:::\n\n## Fetch the puzzle, finish up\n\nIn the previous chapter, the frontend had a hardcoded file containing information about the clues for a simple crossword puzzle. In this chapter, we've given the coordinates and details about the clues, but the frontend needs to fetch this information.\n\nWe're going to modify the logic surrounding our view-only call to `get_unsolved_puzzles` on the contract. This method now returns the clue information, so we've implemented a function that puts it in the proper format for React to construct the crossword puzzle.\n\nThis is a tutorial about Rust smart contract development, so we won't focus on the details of this, but know we've added the function `mungeBlockchainCrossword`. This allows us to keep adding custom crossword puzzles and have the frontend be dynamic.\n\nWe'll also make other minor changes like adding a page for when there are no puzzles available, and adding a loading screen.\n\n## Run the React app\n\nIf you've been following this guide closely, you'll likely just need to start the React app with:\n\n```bash\nenv CONTRACT_NAME=crossword.friend.testnet npm run start\n```\n\nAs a helpful reminder, below has the steps necessary to recreate the subaccount, build the contract, deploy the subaccount, and call methods on the contract.", "mimetype": "text/plain", "start_char_idx": 3335, "end_char_idx": 5264, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f": {"__data__": {"id_": "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77f32702-5152-4c4a-bc66-8dd1165d3da7", "node_type": "1", "metadata": {}, "hash": "e7ad8b89f4c505c9b664b80463388defdaf0f5e18948cc7dd2fa72fb3561ddb0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7044a93a-78b1-4b56-9fc2-6af462736fd2", "node_type": "1", "metadata": {}, "hash": "a86d297ffbe1c4d8171f1a1c83e00868aebd9acdb4012db4b15b83f2791891bf", "class_name": "RelatedNodeInfo"}}, "text": "Go into the directory containing the Rust smart contract and build it:\n\n```bash\ncd contract\n\n# Build\ncargo near build\n```\n\nCreate fresh account if you wish, which is good practice:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Delete an account\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n  \n  # Create an account again\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Delete an account\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # Create an account again\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nDeploy the contract:\n\n```bash\ncargo near deploy crossword.friend.testnet with-init-call new json-args '{\"owner_id\": \"crossword.friend.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nAdd the crossword puzzle:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near call crossword.friend.testnet new_puzzle '{\"solution_hash\":\"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\",\"answers\":[{\"num\": 1,\"start\": {\"x\": 1,\"y\": 1},\"direction\": \"Down\",\"length\": 5,\"clue\": \"NFT market on NEAR that specializes in cards and comics.", "mimetype": "text/plain", "start_char_idx": 5266, "end_char_idx": 6876, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7044a93a-78b1-4b56-9fc2-6af462736fd2": {"__data__": {"id_": "7044a93a-78b1-4b56-9fc2-6af462736fd2", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f", "node_type": "1", "metadata": {}, "hash": "facdbfd5b5ee1f1e4a64eafc676d34a2ad7f0cfcdc701639f803d137602a504a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "959ae596-a9c5-48b1-aea7-e7da203bf795", "node_type": "1", "metadata": {}, "hash": "46197b601cdcb41a7708863371741a75672c4f8ad39bf897e38423a601ce3fae", "class_name": "RelatedNodeInfo"}}, "text": "\"},{\"num\": 2,\"start\": {\"x\": 0,\"y\": 2},\"direction\": \"Across\",\"length\": 13,\"clue\": \"You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app\"},{\"num\": 3,\"start\": {\"x\": 9,\"y\": 1},\"direction\": \"Down\",\"length\": 8,\"clue\": \"NFT market on NEAR with art, physical items, tickets, and more.\"},{\"num\": 4,\"start\": {\"x\": 3,\"y\": 8},\"direction\": \"Across\",\"length\": 9,\"clue\": \"The smallest denomination of the native token on NEAR.\"},{\"num\": 5,\"start\": {\"x\": 5,\"y\": 8},\"direction\": \"Down\",\"length\": 3,\"clue\": \"You typically deploy a smart contract with the NEAR ___ tool.\"}]}' --gas 100000000000000 --accountId crossword.friend.testnet --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-transaction crossword.friend.testnet new_puzzle json-args '{\"solution_hash\":\"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\",\"answers\":[{\"num\": 1,\"start\": {\"x\": 1,\"y\": 1},\"direction\": \"Down\",\"length\": 5,\"clue\": \"NFT market on NEAR that specializes in cards and comics.\"},{\"num\": 2,\"start\": {\"x\": 0,\"y\": 2},\"direction\": \"Across\",\"length\": 13,\"clue\": \"You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app\"},{\"num\": 3,\"start\": {\"x\": 9,\"y\": 1},\"direction\": \"Down\",\"length\": 8,\"clue\": \"NFT market on NEAR with art, physical items, tickets, and more.\"},{\"num\": 4,\"start\": {\"x\": 3,\"y\": 8},\"direction\": \"Across\",\"length\": 9,\"clue\": \"The smallest denomination of the native token on NEAR.", "mimetype": "text/plain", "start_char_idx": 6876, "end_char_idx": 8403, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "959ae596-a9c5-48b1-aea7-e7da203bf795": {"__data__": {"id_": "959ae596-a9c5-48b1-aea7-e7da203bf795", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7044a93a-78b1-4b56-9fc2-6af462736fd2", "node_type": "1", "metadata": {}, "hash": "a86d297ffbe1c4d8171f1a1c83e00868aebd9acdb4012db4b15b83f2791891bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a9d04506-d43a-4e7d-84c0-390d8126aac4", "node_type": "1", "metadata": {}, "hash": "0cc3e01a8b6fca5d96a83a763d5dd96c3e8ba90c0c6398c09f22a49e38be5169", "class_name": "RelatedNodeInfo"}}, "text": "\"},{\"num\": 5,\"start\": {\"x\": 5,\"y\": 8},\"direction\": \"Down\",\"length\": 3,\"clue\": \"You typically deploy a smart contract with the NEAR ___ tool.\"}]}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as crossword.friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nReturn to the project root and start the React app:\n\n```bash\ncd ..\nenv CONTRACT_NAME=crossword.friend.testnet npm run start\n```\n\n## For kicks\n\nFor fun, try interacting with the smart contract using the React frontend and the CLI. We can check the status of the puzzle using the CLI, solve the puzzle with the frontend, and check the status again.\n\nBefore and after solving the puzzle, run this command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view crossword.friend.testnet get_puzzle_status '{\"solution_hash\": \"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only crossword.friend.testnet get_puzzle_status json-args '{\"solution_hash\": \"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nThis will return our enum `PuzzleStatus`. Before solving the puzzle it should print:\n\n```json\n    'Unsolved'\n```\n\nand after:\n\n```json\n    { Solved: { memo: 'Yay I won!' } }\n```\n\nAfter you solve the crossword puzzle you'll see a screen with a link to NEAR Explorer to look at the details of the transaction.", "mimetype": "text/plain", "start_char_idx": 8403, "end_char_idx": 9970, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a9d04506-d43a-4e7d-84c0-390d8126aac4": {"__data__": {"id_": "a9d04506-d43a-4e7d-84c0-390d8126aac4", "embedding": null, "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab", "node_type": "4", "metadata": {}, "hash": "ad41bdb213e3e4e9daef054a089278bc513aa49285f3284819bb40194c810ef2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "959ae596-a9c5-48b1-aea7-e7da203bf795", "node_type": "1", "metadata": {}, "hash": "46197b601cdcb41a7708863371741a75672c4f8ad39bf897e38423a601ce3fae", "class_name": "RelatedNodeInfo"}}, "text": "Notice we have our `Transfer` Action in there:\n\n<figure>\n    <img src={explorerTransfer} alt=\"Screenshot from the NEAR Explorer highlighting a place in the transaction where 5 NEAR is sent to mike.testnet\"/>\n</figure>\n<br/>\n\n---\n\nThat's it for this chapter! As a reminder the full code is available at:\n\nhttps://github.com/near-examples/crossword-tutorial-chapter-2", "mimetype": "text/plain", "start_char_idx": 9971, "end_char_idx": 10336, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d64062e2-f85d-4c5c-a4db-daf9a901344a": {"__data__": {"id_": "d64062e2-f85d-4c5c-a4db-daf9a901344a", "embedding": null, "metadata": {"file_path": "./near_dist/welcome.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "17be715e-4b45-4336-8f50-688788f8ca8c", "node_type": "4", "metadata": {}, "hash": "652afef35b58430d691ee1f6ac8221c90b833811d68cafe6bb3996b4394c2067", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: welcome\ntitle: Tools\nsidebar_label: Home\n---\n\nWelcome! The NEAR ecosystem has a complete set of tools for you to make the most out of the NEAR network.\nIn this page you will find:\n\n1. [Wallets](https://www.mynearwallet.com/) to handle your assets.\n2. [Explorers](explorer.md) to quickly obtain information from the blockchain.\n3. Websites to simplify creating and participating on governance projects.\n4. Developer tools to deploy and interact with contracts such as the [NEAR CLI](cli.md) and [NEAR JavaScript API](/tools/near-api-js/quick-reference).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 560, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "066d6561-36b5-4747-a6c5-e6439a6ef07b": {"__data__": {"id_": "066d6561-36b5-4747-a6c5-e6439a6ef07b", "embedding": null, "metadata": {"file_path": "./near_dist/random.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0ad5c9c9-a70f-44aa-b28a-5eedf303bf33", "node_type": "4", "metadata": {}, "hash": "bcc6e701d18f5b1c8899f9d0c0a2e5908bb051d943c265e1276834ae98cf07bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fa98aa92-589b-4654-865c-685477424b20", "node_type": "1", "metadata": {}, "hash": "ac63d223daed7f8ea3da85b49c9568998da4ba83360769886fc2939975280d6f", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: random\ntitle: Random Numbers\n---\n\nWhen writing smart contracts in NEAR you have access to a `random seed` that enables you to create random numbers/strings\nwithin your contract.\n\nThis `random seed` is **deterministic and verifiable**: it comes from the validator that produced the block signing the previous\nblock-hash with their private key.\n\nThe way the random seed is created implies two things:\n\n- Only the validator mining the transaction **can predict** which random number will come out. **No one else** could predict it because nobody knows the validator's private key (except the validator itself).\n\n- The validator **cannot interfere** with the random number being created. This is because they need to sign the previous block, over which (with a high probability) they had no control.\n\n\nHowever, notice that this still leaves room for three types of attacks from the validator:\n1. [Frontrunning](./frontrunning.md), which we cover in another page\n2. Gaming the input\n3. Refusing to mine the block. \n\n----\n\n## Gaming the Input\nImagine you have a method that takes an input and gives a reward based on it. For example, you ask the user to choose a number,\nand if it the same as your `random seed` you give them money.\n\nSince the validator knows which `random seed` will come out, it can create a transaction with that specific input and win the prize.\n\n----\n\n## Refusing to Mine the Block\nOne way to fix the \"gaming the input\" problem is to force the user to send the input first, and then decide the result on a different block.\nLet's call these two stages: \"bet\" and \"resolve\".\n\nIn this way, a validator cannot game the input, since the `random` number against which it will be compared is computed in a different block.\n\nHowever, something that the validator can still do to increase their chance of winning is:\n1. Create a \"bet\" transaction with an account.\n2. When it's their turn to validate, decide if they want to \"resolve\" or not.\n\nIf the validator, on their turn, sees that generating a random number makes them win, they can add the transaction to the block. And if they\nsee that they will not, they can skip the transaction.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2153, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fa98aa92-589b-4654-865c-685477424b20": {"__data__": {"id_": "fa98aa92-589b-4654-865c-685477424b20", "embedding": null, "metadata": {"file_path": "./near_dist/random.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0ad5c9c9-a70f-44aa-b28a-5eedf303bf33", "node_type": "4", "metadata": {}, "hash": "bcc6e701d18f5b1c8899f9d0c0a2e5908bb051d943c265e1276834ae98cf07bf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "066d6561-36b5-4747-a6c5-e6439a6ef07b", "node_type": "1", "metadata": {}, "hash": "4c6058ad3f123e0f698e94c9b984db7c2301331ecf50ad73e23e059bbdfc9f27", "class_name": "RelatedNodeInfo"}}, "text": "While this does not ensure that the validator will win (other good validators could mine the transaction), it can improve their chance of winning.\n\nImagine a flip-coin game, where you choose `heads` or `tails` in the \"bet\" stage, and later resolve if you won or not. If you are a validator\nyou can send a first transaction choosing either input.\n\nThen, on your turn to validate, you can check if your chosen input came out. If not, you can simply skip the transaction. This brings your\nprobability of winning from `1/2` to `3/4`, that's a 25% increase!\n\nThese odds, of course, dilute in games with more possible outcomes.\n\n<details>\n<summary>How does the math work here?</summary>\n\nImagine you always bet for `heads`.\n\nIn a fair coin-flip game you have 50-50 percent chance of winning, this is because after the coin is flipped there are two possible outcomes:\n`H` and `T`, and you only win in one (`H`).\n\nHowever, if you can choose to flip again if `tails` comes out, now there are 4 scenarios: `H H` `T H` `H T` `T T`, and in 3 of those\nyou win (all the ones including an `H`)!!!.\n\n</details>", "mimetype": "text/plain", "start_char_idx": 2155, "end_char_idx": 3249, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2484f59f-b029-43fd-b956-5cb5056e42c2": {"__data__": {"id_": "2484f59f-b029-43fd-b956-5cb5056e42c2", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e83de3ee-8c0e-494f-8100-1b88a88f002a", "node_type": "1", "metadata": {}, "hash": "2316fa4212f84f2c32f3959d4eb3bd727b4bae92fe098c29f74141e640472b0a", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 5\nsidebar_label: \"Cross-contract calls, etc.\"\ntitle: \"Adding cross-contract calls, access key shuffling, etc.\"\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\n# Updating the contract\n\nimport shuffleKeys from '/docs/assets/crosswords/shuffle-keys.gif';\nimport clionSuggestion from '/docs/assets/crosswords/clion-suggestion.gif';\nimport carpenterAddingKey from '/docs/assets/crosswords/create-key-carpenter-near--carlcarlkarl.near--CarlCarlKarl.jpg';\nimport recycleKey from '/docs/assets/crosswords/remove-key-recycle--eerie_ram.near--eerie_ram.png';\n\nTo reiterate, we'd like anyone to be able to participate in the crossword puzzle, even folks who don't have a NEAR account.\n\nThe first person to win will \"reserve their spot\" and choose where to send the prize money: either an account they own or an account they'd like to create.\n\n## Reserving their spot\n\n### The plan\n\nWhen a user first visits the crossword, they only see the crossword. No login button and no fields (like a `memo` field) to fill out.\n\nOn their first visit, our frontend will create a brand new, random seed phrase in their browser. We'll use this seed phrase to create the user's unique key pair. If a random seed phrase is already there, it skips this part. (We covered the code for this in [a previous section](02-use-seed-phrase.md#generate-random-seed-phrase).)\n\nIf the user is the first to solve the puzzle, it discovers the function-call access key and calls `submit_solution` with that key. It's basically using someone else's key, as this key is on the crossword account.\n\n**We'll be adding a new parameter** to the `submit_solution` so the user can include the random, public key we just stored in their browser.\n\nDuring the execution of `submit_solution`, because contracts can use Promises to perform Actions, we'll remove the solution public key and add the user's public key.\n\nThis will lock out other attempts to solve the crossword puzzle and ensure there is only one winner.\n\n<img src={shuffleKeys} width=\"600\"/><br/><br/>\n\nThis means that a puzzle can have three states it can be in:\n\n1.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2107, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e83de3ee-8c0e-494f-8100-1b88a88f002a": {"__data__": {"id_": "e83de3ee-8c0e-494f-8100-1b88a88f002a", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2484f59f-b029-43fd-b956-5cb5056e42c2", "node_type": "1", "metadata": {}, "hash": "e82a6969f8862f5056b3935706820bf4f0ecf6aafdd2ba49aaf36723b9454c39", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "04a3c513-4edd-476a-85e0-f3f11e2529aa", "node_type": "1", "metadata": {}, "hash": "ad1ae0235d0f946804657aea8206fd6762f9f94cdd0580494460dbaabf2b4a25", "class_name": "RelatedNodeInfo"}}, "text": "Unsolved\n2. Solved and not yet claimed (not paid out)\n3. Claimed and finalized\n\nThe previous chapter [we discussed enums](../02-beginner/02-structs-enums.md#using-enums), so this is simply modifying the enumeration variants.\n\n### The implementation\n\nFirst, let's see how the `submit_solution` will verify the correct solution.\n\n<Github language=\"rust\" start=\"136\" end=\"142\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\nInstead of hashing the plaintext, we simply check that the public key matches what we know the answer is. (The answer being the series of words representing the solution to the crossword puzzle, used as a seed phrase to create a key pair, including a public key.)\n\nFurther down in the `submit_solution` method we'll follow our plan by **adding a function-call access key** (that only the winner has) and removing the access key that was discovered by the winner, so no one else can use it.\n\n<figure>\n    <img src={carpenterAddingKey} alt=\"Illustration of a carpenter who has created a key. Art by carlcarlkarl.near\" width=\"400\"/>\n    <figcaption className=\"small\">Our smart contract is like this carpenter adding a key to itself.<br/>Art by <a href=\"https://twitter.com/CarlCarlKarl\" target=\"_blank\" rel=\"noopener noreferrer\">carlcarlkarl.near</a></figcaption>\n</figure>\n<br/>\n\n<Github language=\"rust\" start=\"166\" end=\"172\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\nThe first promise above adds an access key, and the second deletes the access key on the account that was derived from the solution as a seed phrase.\n\n<figure>\n    <img src={recycleKey} alt=\"Book showing pagination of hashes.", "mimetype": "text/plain", "start_char_idx": 2108, "end_char_idx": 3839, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "04a3c513-4edd-476a-85e0-f3f11e2529aa": {"__data__": {"id_": "04a3c513-4edd-476a-85e0-f3f11e2529aa", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e83de3ee-8c0e-494f-8100-1b88a88f002a", "node_type": "1", "metadata": {}, "hash": "2316fa4212f84f2c32f3959d4eb3bd727b4bae92fe098c29f74141e640472b0a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97739b92-d3ce-45f4-a751-e145534c2a82", "node_type": "1", "metadata": {}, "hash": "2f0fb2213fe5aa44bf49404fd6f357f4a4fb50a5a83342af0b9a37e33af93b6a", "class_name": "RelatedNodeInfo"}}, "text": "Art created by eerie_ram.near\" width=\"600\"/>\n    <figcaption>We delete the function-call access key so there is only one winner.<br/>Art by <a href=\"https://twitter.com/eerie_ram\" target=\"_blank\" rel=\"noopener noreferrer\">eerie_ram.near</a></figcaption>\n</figure>\n<br/>\n\nNote that the new function-call access key is able to call two methods we'll be adding:\n\n1. `claim_reward` \u2014 when the user has an existing account and wishes to send the prize to it\n2. `claim_reward_new_account` \u2014 when the user doesn't have an account, wants to create one and send the prize to it\n\nBoth functions will do cross-contract calls and use callbacks to see the result. We finally get to the meat of this chapter, let's go!\n\n## Cross-contract calls\n\n### The traits\n\nWe're going to be making a cross-contract call to the linkdrop account deployed to the `testnet` account. We're also going to have callbacks for that, and for a simple transfer to a (potentially existing) account. We'll create the traits that define both those methods.\n\n<Github language=\"rust\" start=\"17\" end=\"43\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\n:::tip\nIt's not necessary to create the trait for the callback as we could have just implemented the functions `callback_after_transfer` and `callback_after_create_account` in our `Crossword` struct implementation. We chose to define the trait and implement it to make the code a bit more readable.\n:::\n\n### `claim_reward`\n\nAgain, this function is called when the user solves the crossword puzzle and wishes to send the prize money to an existing account.\n\nSeems straightforward, so why would we need a callback? We didn't use a callback in the previous chapter when the user logged in, so what gives?\n\nIt's possible that while claiming the prize, the user accidentally fat-fingers their username, or their cat jumps on their keyboard. Instead of typing `mike.testnet` they type `mike.testnzzz` and hit send. In short, if we try to send the prize to a non-existent account, we want to catch that.", "mimetype": "text/plain", "start_char_idx": 3840, "end_char_idx": 5902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97739b92-d3ce-45f4-a751-e145534c2a82": {"__data__": {"id_": "97739b92-d3ce-45f4-a751-e145534c2a82", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "04a3c513-4edd-476a-85e0-f3f11e2529aa", "node_type": "1", "metadata": {}, "hash": "ad1ae0235d0f946804657aea8206fd6762f9f94cdd0580494460dbaabf2b4a25", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d766215e-6d7c-4a9f-9a31-deebe180089b", "node_type": "1", "metadata": {}, "hash": "126dc0165ea30d3b7e4d544ef8e701617616c802e0cff4c3cd822e0597096af8", "class_name": "RelatedNodeInfo"}}, "text": "For brevity, we'll skip some code in this function to focus on the Promise and callback:\n\n```rust\npub fn claim_reward(\n    &mut self,\n    crossword_pk: PublicKey,\n    receiver_acc_id: String,\n    memo: String,\n    ) -> Promise {\n        let signer_pk = env::signer_account_pk();\n        ...\n        Promise::new(receiver_acc_id.parse().unwrap())\n            .transfer(reward_amount)\n            .then(\n                Self::ext(env::current_account_id())\n                    .with_static_gas(GAS_FOR_ACCOUNT_CALLBACK)\n                    .callback_after_transfer(\n                        crossword_pk,\n                        receiver_acc_id,\n                        memo,\n                        env::signer_account_pk(),\n                    ),\n            )\n    }\n```\n\n:::tip Your IDE is your friend\n\nOftentimes, the IDE can help you.\n\nFor instance, in the above snippet we have `receiver_acc_id.parse().unwrap()` which might look confusing. You can lean on code examples or documentation to see how this is done, or you can utilize the suggestions from your IDE.\n\n:::\n\nThis `claim_reward` method will attempt to use the `Transfer` Action to send NEAR to the account specified. It might fail on a protocol level (as opposed to a smart contract failure), which would indicate the account doesn't exist.\n\nLet's see how we check this in the callback:\n\n<Github language=\"rust\" start=\"372\" end=\"400\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\n:::info The `#[private]` macro\nNotice that above the function, we have declared it to be private.\n\nThis is an ergonomic helper that checks to make sure the predecessor is the current account ID.\n\nWe actually saw this done \"the long way\" in the callback for the linkdrop contract in [the previous section](03-linkdrop.md#the-callback).\n\nEvery callback will want to have this `#[private]` macro above it.\n:::\n\nThe snippet above essentially says it expects there to be a Promise result for exactly one Promise, and then sees if that was successful or not. Note that we're not actually getting a *value* in this callback, just if it succeeded or failed.", "mimetype": "text/plain", "start_char_idx": 5904, "end_char_idx": 8054, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d766215e-6d7c-4a9f-9a31-deebe180089b": {"__data__": {"id_": "d766215e-6d7c-4a9f-9a31-deebe180089b", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97739b92-d3ce-45f4-a751-e145534c2a82", "node_type": "1", "metadata": {}, "hash": "2f0fb2213fe5aa44bf49404fd6f357f4a4fb50a5a83342af0b9a37e33af93b6a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70", "node_type": "1", "metadata": {}, "hash": "37a3d50f3869ecfb5cf89ce17e9c5e19602744f9bd56485c4b8e329ee1716620", "class_name": "RelatedNodeInfo"}}, "text": "If it succeeded, we proceed to finalize the puzzle, like setting its status to be claimed and finished, removing it from the `unsolved_puzzles` collection, etc.\n\n### `claim_reward_new_account`\n\nNow we want to handle a more interesting case. We're going to do a cross-contract call to the smart contract located on `testnet` and ask it to create an account for us. This name might be unavailable, and this time we get to write a callback that *gets a value*.\n\nAgain, for brevity, we'll show the meat of the `claim_reward_new_account` method:\n\n```rust\npub fn claim_reward_new_account(\n    &mut self,\n    crossword_pk: PublicKey,\n    new_acc_id: String,\n    new_pk: PublicKey,\n    memo: String,\n) -> Promise {\n    ...\n    ext_linkdrop::ext(AccountId::from(self.creator_account.clone()))\n        .with_attached_deposit(reward_amount)\n        .with_static_gas(GAS_FOR_ACCOUNT_CREATION) // This amount of gas will be split\n        .create_account(new_acc_id.parse().unwrap(), new_pk)\n        .then(\n            // Chain a promise callback to ourselves\n            Self::ext(env::current_account_id())\n                .with_static_gas(GAS_FOR_ACCOUNT_CALLBACK)\n                .callback_after_create_account(\n                    crossword_pk,\n                    new_acc_id,\n                    memo,\n                    env::signer_account_pk(),\n                ),\n        )\n}\n```\n\nThen the callback:\n\n<Github language=\"rust\" start=\"401\" end=\"433\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\nIn the above snippet, there's one difference from the callback we saw in `claim_reward`: we capture the value returned from the smart contract we just called. Since the linkdrop contract returns a bool, we can expect that type. (See the comments with \"NOTE:\" above, highlighting this.)\n\n## Callbacks\n\nThe way that the callback works is that you start with the `Self::ext()` and pass in the current acount ID using `env::current_account_id()`. This is essentially saying that you want to call a function that lives on the current account ID.\n\nYou then have a couple of config options that each start with `.with_*`:\n\n1.", "mimetype": "text/plain", "start_char_idx": 8056, "end_char_idx": 10220, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70": {"__data__": {"id_": "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d766215e-6d7c-4a9f-9a31-deebe180089b", "node_type": "1", "metadata": {}, "hash": "126dc0165ea30d3b7e4d544ef8e701617616c802e0cff4c3cd822e0597096af8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930", "node_type": "1", "metadata": {}, "hash": "b7df83b344e158798a94b572cb31d75dae43c74e4761bd16f72b06cab7732ba2", "class_name": "RelatedNodeInfo"}}, "text": "You can attach a deposit of \u24c3, in yocto\u24c3 to the call by specifying the `.with_attached_deposit()` method but it is defaulted to 0 (1 \u24c3 = 1000000000000000000000000 yocto\u24c3, or 1^24 yocto\u24c3).\n2. You can attach a static amount of GAS by specifying the `.with_static_gas()` method but it is defaulted to 0.\n3. You can attach an unused GAS weight by specifying the `.with_unused_gas_weight()` method but it is defaulted to 1. The unused GAS will be split amongst all the functions in the current execution depending on their weights. If there is only 1 function, any weight above 1 will result in all the unused GAS being attached to that function. If you specify a weight of 0, however, the unused GAS will not be attached to that function. If you have two functions, one with a weight of 3, and one with a weight of 1, the first function will get 3/4 of the unused GAS and the other function will get 1/4 of the unused GAS.\n\nAfter you've added the desired configurations to the call, you execute the function and pass in the parameters. In this case, we call the function `callback_after_create_account` and pass in the crossword public key, the new account ID, the memo, and the signer's public key.\n\nThis function will be called with static GAS equal to `GAS_FOR_ACCOUNT_CALLBACK` and will have no deposit attached. In addition, since the `with_unused_gas_weight()` method wasn't called, it will default to a weight of 1 meaning that it will split all the unused GAS with the `create_account` function to be added on top of the `GAS_FOR_ACCOUNT_CALLBACK`.\n\n```rust\n.then(\n    // Chain a promise callback to ourselves\n    Self::ext(env::current_account_id())\n        .with_static_gas(GAS_FOR_ACCOUNT_CALLBACK)\n        .callback_after_create_account(\n            crossword_pk,\n            new_acc_id,\n            memo,\n            env::signer_account_pk(),\n        ),\n)\n```\n\n:::tip Consider changing contract state in callback\nIt's not always the case, but often you'll want to change the contract state in the callback.", "mimetype": "text/plain", "start_char_idx": 10221, "end_char_idx": 12236, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930": {"__data__": {"id_": "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70", "node_type": "1", "metadata": {}, "hash": "37a3d50f3869ecfb5cf89ce17e9c5e19602744f9bd56485c4b8e329ee1716620", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c5480d5-a889-4124-94ca-aa4ae6a87b5c", "node_type": "1", "metadata": {}, "hash": "5d9b2f23e20a04438b4f66e3f6661c5088f5b2f7d390a66563cd26d00fde97b6", "class_name": "RelatedNodeInfo"}}, "text": "The callback is a safe place where we have knowledge of what's happened after cross-contract calls or Actions. If your smart contract is changing state *before* doing a cross-contract call, make sure there's a good reason for it. It might be best to move this logic into the callback.\n:::\n\nSo what parameters should I pass into a callback?\n\nThere's no one-size-fits-all solution, but perhaps there's some advice that can be helpful.\n\nTry to pass parameters that would be unwise to trust coming from another source. For instance, if an account calls a method to transfer some digital asset, and you need to do a cross-contract call, don't rely on the results of contract call to determine ownership. If the original function call determines the owner of a digital asset, pass this to the callback.\n\nPassing parameters to callbacks is also a handy way to save fetching data from persistent collections twice: once in the initial method and again in the callback. Instead, just pass them along and save some CPU cycles.\n\n## Checking the public key\n\nThe last simple change in this section is to modify the way we verify if a user has found the crossword solution.\n\nIn previous chapters we hashed the plaintext solution and compared it to the known solution's hash.\n\nHere we're able to simply check the signer's public key, which is available in the `env` object [under `signer_account_pk`](https://docs.rs/near-sdk/latest/near_sdk/env/fn.signer_account_pk.html).\n\nWe'll do this check in both when the solution is submitted, and when the prize is claimed.", "mimetype": "text/plain", "start_char_idx": 12238, "end_char_idx": 13788, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c5480d5-a889-4124-94ca-aa4ae6a87b5c": {"__data__": {"id_": "3c5480d5-a889-4124-94ca-aa4ae6a87b5c", "embedding": null, "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27269808-b3f0-40f8-a515-fcda2b2e1099", "node_type": "4", "metadata": {}, "hash": "ed6a727034a68a48e2c40bfc0a78c8b7560aa5bb7603a9c9ba41232fe592da72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930", "node_type": "1", "metadata": {}, "hash": "b7df83b344e158798a94b572cb31d75dae43c74e4761bd16f72b06cab7732ba2", "class_name": "RelatedNodeInfo"}}, "text": "### When the crossword is solved\n\n```rust\n// The solver_pk parameter is the public key generated and stored in their browser\npub fn submit_solution(&mut self, solver_pk: PublicKey) {\n    let answer_pk = env::signer_account_pk();\n    // check to see if the answer_pk from signer is in the puzzles\n    let mut puzzle = self\n        .puzzles\n        .get(&answer_pk)\n        .expect(\"ERR_NOT_CORRECT_ANSWER\");\n```\n\n### When prize is claimed\n\n```rust\npub fn claim_reward(\n    &mut self,\n    crossword_pk: PublicKey,\n    receiver_acc_id: String,\n    memo: String,\n) -> Promise {\n    let signer_pk = env::signer_account_pk();\n    ...\n    // Check that puzzle is solved and the signer has the right public key\n    match puzzle.status {\n        PuzzleStatus::Solved {\n            solver_pk: puzzle_pk,\n        } => {\n            // Check to see if signer_pk matches\n            assert_eq!(signer_pk, puzzle_pk, \"You're not the person who can claim this, or else you need to use your function-call access key, friend.\");\n        }\n        _ => {\n            env::panic_str(\"puzzle should have `Solved` status to be claimed\");\n        }\n    };\n    ...\n}\n```", "mimetype": "text/plain", "start_char_idx": 13790, "end_char_idx": 14937, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73b6723e-09bd-487e-a2c2-6e3f49dc53b3": {"__data__": {"id_": "73b6723e-09bd-487e-a2c2-6e3f49dc53b3", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1b31513a-07c5-40ff-907c-a7e2d30bfbd8", "node_type": "1", "metadata": {}, "hash": "c87596f608dbae3b62032c49bd34b783083fbe16a9a7da2beeb2c171ab66d0f5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: defining-a-token\ntitle: Defining a Fungible Token\nsidebar_label: Defining Your Token\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThis is the first of many tutorials in a series where you'll be creating a complete FT smart contract from scratch that conforms with all the NEAR [FT standards](https://nomicon.io/Standards/Tokens/FungibleToken/Core). Today you'll learn what a Fungible Token is and how you can define one on the NEAR blockchain. You will be modifying a bare-bones [skeleton smart contract](/tutorials/fts/skeleton) by filling in the necessary code snippets needed to add this functionality.\n\n---\n\n## Introduction\n\nTo get started, switch to the `1.skeleton` folder in our repo. If you haven't cloned the repository, refer to the [Contract Architecture](/tutorials/fts/skeleton) to get started.\n\nIf you wish to see the finished code for this portion of the tutorial, that can be found on the `2.defining-a-token` folder.\n\n---\n\n## Modifications to the skeleton contract {#modifications}\n\nAt its very core, a fungible token is an exchangeable asset that **is divisible** but is **not unique**. For example, if Benji had 1 Canadian dollar, it would be worth the exact same as Matt's Canadian dollar. Both their dollars are fungible and exchangeable. In this case, the fungible token is the canadian dollar. All fiat currencies are fungible and exchangeable.\n\nNon-fungible tokens, on the other hand, are **unique** and **indivisible** such as a house or a car. You **cannot** have another asset that is exactly the same. Even if you had a specific car model, such as a Corvette 1963 C2 Stingray, each car would have a separate serial number with a different number of kilometers driven etc...\n\nNow that you understand what a fungible token is, let's look at how you can define one in the contract itself.\n\n<hr className=\"subsection\" />\n\n### Defining a fungible token {#defining-a-fungible-token}\n\nStart by navigating to the `1.skeleton/src/metadata.rs` file.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2059, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b31513a-07c5-40ff-907c-a7e2d30bfbd8": {"__data__": {"id_": "1b31513a-07c5-40ff-907c-a7e2d30bfbd8", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73b6723e-09bd-487e-a2c2-6e3f49dc53b3", "node_type": "1", "metadata": {}, "hash": "cd957d20983d8e15fbc4cf8e693c28b954384d905c53cad1a78bde29fe7b217e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "756f7d30-124e-4689-a899-855432d1cf9c", "node_type": "1", "metadata": {}, "hash": "3428cb88c68c76ab86f45d2e28543d32d2cd6b60f44ac0e78de581f546922f86", "class_name": "RelatedNodeInfo"}}, "text": "This is where you'll define the metadata for the fungible token itself. There are several ways NEAR allows you to customize your token, all of which are found in the [metadata](https://nomicon.io/Standards/Tokens/FungibleToken/Core#metadata) standard. Let's break them up into the optional and non-optional portions.\n\nRequired:\n- **spec**: Indicates the version of the standard the contract is using. This should be set to `ft-1.0.0`.\n- **name**: The human readable name of the token such as \"Wrapped NEAR\" or \"TEAM Tokens\".\n- **symbol**: The abbreviation of the token such as `wNEAR` or `gtNEAR`.\n- **decimals**: used in frontends to show the proper significant digits of a token. This concept is explained well in this [OpenZeppelin post](https://docs.openzeppelin.com/contracts/3.x/erc20#a-note-on-decimals).\n\nOptional:\n- **icon**: The image for the token (must be a [data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs)).\n- **reference**: A link to any supplementary JSON details for the token stored off-chain.\n- **reference_hash**: A hash of the referenced JSON.\n\nWith this finished, you can now add these fields to the metadata in the contract.\n\n<Github language=\"rust\" start=\"8\" end=\"19\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/2.define-a-token/src/metadata.rs\" />\n\nNow that you've defined what the metadata will look like, you need someway to store it on the contract. Switch to the `1.skeleton/src/lib.rs` file and add the following to the `Contract` struct. You'll want to store the metadata on the contract under the `metadata` field.\n\n<Github language=\"rust\" start=\"18\" end=\"24\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/2.define-a-token/src/lib.rs\" />\n\nYou've now defined *where* the metadata will live but you'll also need someway to pass in the metadata itself. This is where the initialization function comes into play.", "mimetype": "text/plain", "start_char_idx": 2060, "end_char_idx": 3967, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "756f7d30-124e-4689-a899-855432d1cf9c": {"__data__": {"id_": "756f7d30-124e-4689-a899-855432d1cf9c", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b31513a-07c5-40ff-907c-a7e2d30bfbd8", "node_type": "1", "metadata": {}, "hash": "c87596f608dbae3b62032c49bd34b783083fbe16a9a7da2beeb2c171ab66d0f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc0a30fd-5830-4a76-a3ec-8955c71bba6f", "node_type": "1", "metadata": {}, "hash": "ae17dc50d74e5aa97aea7c639e6e224f7d73a3776e9023f1220f1bc561c6ab5d", "class_name": "RelatedNodeInfo"}}, "text": "<hr className=\"subsection\" />\n\n#### Initialization Functions\n\nYou'll now create what's called an initialization function; you can name it `new`. This function needs to be invoked when you first deploy the contract. It will initialize all the contract's fields that you've defined with default values. It's important to note that you **cannot** call these methods more than once.\n\n<Github language=\"rust\" start=\"58\" end=\"74\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/2.define-a-token/src/lib.rs\" />\n\nMore often than not when doing development, you'll need to deploy contracts several times. You can imagine that it might get tedious to have to pass in metadata every single time you want to initialize the contract. For this reason, let's create a function that can initialize the contract with a set of default `metadata`. You can call it `new_default_meta`.\n\n<Github language=\"rust\" start=\"38\" end=\"54\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/2.define-a-token/src/lib.rs\" />\n\nThis function is simply calling the previous `new` function and passing in some default metadata behind the scenes.\n\nAt this point, you've defined the metadata for your fungible tokens and you've created a way to store this information on the contract. The last step is to introduce a getter that will query for and return the metadata. Switch to the `1.skeleton/src/metadata.rs` file and add the following code to the `ft_metadata` function.\n\n<Github language=\"rust\" start=\"21\" end=\"31\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/2.define-a-token/src/metadata.rs\" />\n\nThis function will get the `metadata` object from the contract which is of type `FungibleTokenMetadata` and will return it.\n\n---\n\n## Interacting with the contract on-chain\n\nNow that the logic for defining a custom fungible token is complete and you've added a way to query for the metadata, it's time to build and deploy your contract to the blockchain.", "mimetype": "text/plain", "start_char_idx": 3969, "end_char_idx": 5923, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc0a30fd-5830-4a76-a3ec-8955c71bba6f": {"__data__": {"id_": "dc0a30fd-5830-4a76-a3ec-8955c71bba6f", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "756f7d30-124e-4689-a899-855432d1cf9c", "node_type": "1", "metadata": {}, "hash": "3428cb88c68c76ab86f45d2e28543d32d2cd6b60f44ac0e78de581f546922f86", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26f7a2e6-b69d-493c-8830-37823ed327c3", "node_type": "1", "metadata": {}, "hash": "23d24cc176b19396be57c49b53ad69005fdb685ad673e312cb73c4904a8cf72a", "class_name": "RelatedNodeInfo"}}, "text": "### Deploying and initializing the contract {#deploy-the-contract}\n\nYou can build a contract using the following command:\n\n```bash\ncd 2.define-a-token\ncargo near build\n```\n\nThere will be a list of warnings on your console, but as the tutorial progresses, these warnings will go away.\n\nFor deployment, you will need a NEAR account with the keys stored on your local machine. Navigate to the [NEAR wallet](https://testnet.mynearwallet.com/) site and create an account.\n\n:::info\nPlease ensure that you deploy the contract to an account with no pre-existing contracts. It's easiest to simply create a new account or create a sub-account for this tutorial.\n:::\n\nLog in to your newly created account with `near-cli-rs` by running the following command in your terminal.\n\n```bash\nnear account import-account using-web-wallet network-config testnet\n```\n\nTo make this tutorial easier to copy/paste, we're going to set an environment variable for your account ID. In the command below, replace `YOUR_ACCOUNT_NAME` with the account name you just logged in with including the `.testnet` portion:\n\n```bash\nexport FT_CONTRACT_ID=\"YOUR_ACCOUNT_NAME.testnet\"\n```\n\nTest that the environment variable is set correctly by running:\n\n```bash\necho $FT_CONTRACT_ID\n```\n\nVerify that the correct account ID is printed in the terminal. If everything looks correct you can now deploy your contract. For simplicity, let's call the default metadata initialization function you wrote earlier so that you don't have to type the metadata manually in the CLI. In the root of your FT project run the following command to deploy your smart contract.\n\n```bash\ncargo near deploy $FT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$FT_CONTRACT_ID'\", \"total_supply\": \"0\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nAt this point, the contract should have been deployed to your account and initialized.\n\n<hr className=\"subsection\" />\n\n### Viewing the contract's metadata\n\nNow that the contract has been initialized, you can query for the metadata by calling the function you wrote earlier.", "mimetype": "text/plain", "start_char_idx": 5925, "end_char_idx": 8058, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "26f7a2e6-b69d-493c-8830-37823ed327c3": {"__data__": {"id_": "26f7a2e6-b69d-493c-8830-37823ed327c3", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc0a30fd-5830-4a76-a3ec-8955c71bba6f", "node_type": "1", "metadata": {}, "hash": "ae17dc50d74e5aa97aea7c639e6e224f7d73a3776e9023f1220f1bc561c6ab5d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4790ab4f-dcb2-41a9-96b6-7c98de06b266", "node_type": "1", "metadata": {}, "hash": "a4d073119f778f3549e2889152c913d0fcab54e562fd415559d844248344ea31", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $FT_CONTRACT_ID ft_metadata '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $FT_CONTRACT_ID ft_metadata json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```js\n{\n  spec: 'ft-1.0.0',\n  name: 'Team Token FT Tutorial',\n  symbol: 'gtNEAR',\n  icon: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/\n        /*\n        ...lots of base64 data...\n        */\n        j4Mvhy9H9NlnieJ4iwoo9ZlyLGx4pnrPWeB4CVGRZZcJ7Vohwhi0z5MJY4cVL4MdP/Z',\n  reference: null,\n  reference_hash: null,\n  decimals: 24\n}\n```\n\n**Go team!** You've now verified that everything works correctly and you've defined your own fungible token!\n\nIn the next tutorial, you'll learn about how to create a total supply and view the tokens in the wallet.\n\n---\n\n## Conclusion\n\nIn this tutorial, you went through the basics of setting up and understanding the logic behind creating a fungible token on the blockchain using a skeleton contract.\n\nYou first looked at [what a fungible token is](#modifications) and how it differs from a non-fungible token. You then learned how to customize and create your own fungible tokens and how you could modify the skeleton contract to achieve this. Finally you built and deployed the contract and interacted with it using the NEAR CLI.\n\n## Next Steps\n\nIn the [next tutorial](/tutorials/fts/circulating-supply), you'll find out how to create an initial supply of tokens and have them show up in the NEAR wallet.", "mimetype": "text/plain", "start_char_idx": 8060, "end_char_idx": 9719, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4790ab4f-dcb2-41a9-96b6-7c98de06b266": {"__data__": {"id_": "4790ab4f-dcb2-41a9-96b6-7c98de06b266", "embedding": null, "metadata": {"file_path": "./near_dist/2-define-a-token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d46641ad-d78e-463a-bfdc-305892ff5a10", "node_type": "4", "metadata": {}, "hash": "f06e470c0926905f56c02b0087209c3516bda60b91ef96dd07002d735b63b460", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26f7a2e6-b69d-493c-8830-37823ed327c3", "node_type": "1", "metadata": {}, "hash": "23d24cc176b19396be57c49b53ad69005fdb685ad673e312cb73c4904a8cf72a", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-sdk-rs: `5.1.0` (with enabled `legacy` feature)\n- cargo-near: `0.6.1`\n- near-cli-rs: `0.11.0`\n:::", "mimetype": "text/plain", "start_char_idx": 9721, "end_char_idx": 9962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c53fc74-f9aa-41d6-818e-968163bc9f74": {"__data__": {"id_": "3c53fc74-f9aa-41d6-818e-968163bc9f74", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-01.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117", "node_type": "4", "metadata": {}, "hash": "2e9c9f0239e9c29a13d02193ca1482a68e9406751f98dc72396f048109f2d2aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dce5d856-4dec-4505-9c81-4837182200cb", "node_type": "1", "metadata": {}, "hash": "a1cef980ffa5a06d723c27739720865e0c268e641374b540cc68700ee8c031bc", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: Pagoda Pauses the B.O.S. Web Engine R&D Project\nauthors: [thisisjoshford]\nslug: bos-web-engine-sunset\ntags: [updates, BWE, VM2, BOS]\nhide_table_of_contents: true\n---\n\n*After careful consideration, Pagoda has decided to discontinue its active efforts to improve the B.O.S. Web Engine*\n\n<p><img src=\"/assets/images/protocol-b73c2a3ace3307226ee7eb2149ee432f.png\" /></p>\n\n<!-- truncate -->\n\nAfter many discussions with NEAR\u2019s B.O.S. component developers and careful consideration, Pagoda has decided to discontinue its active development for [B.O.S. Web Engine R&D ](https://github.com/near/bos-web-engine)for an improved execution layer for NEAR B.O.S. Components. (also known as \u201cBWE\u201d & \u201cVM2\u201d)\n\n## Background\n\nLast year, [NEAR introduced the Blockchain Operating System](https://near.org/blog/near-announces-the-blockchain-operating-system), demonstrating how NEAR\u2019s performant tech stack could support a full-stack decentralized development platform that was multi-chain compatible. A core feature of this system consisted of composable decentralized front-ends (B.O.S. Components) paired with a user-centric data storage contract (social-db). This model, [pioneered by NEAR Social](https://thewiki.near.page/PastPresentAndFutureOfNearSocial), aimed to continue NEAR\u2019s mission of empowering users to own their data as well as eliminate reliance on centralized, single-entity-controlled web applications. The potential of a fully decentralized web and the creation of real dApps became closer to reality with these inherently open and customizable experiences.\n\nAs the community started to adopt B.O.S. it soon became clear that, while devs loved how fast it was to go from an idea to a product, its intrinsic technical limitations made it hard to use B.O.S. for any real-world application. This consistent feedback from multiple members of the community prompted Pagoda to start an R&D effort to improve B.O.S. such that:\n\n- It was as close to vanilla React as possible\n- Supported npm package imports\n- Unlocked multi-chain scalability limitations\n- Improved performance\n- Improved security\n\n## B.O.S.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2112, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dce5d856-4dec-4505-9c81-4837182200cb": {"__data__": {"id_": "dce5d856-4dec-4505-9c81-4837182200cb", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-01.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117", "node_type": "4", "metadata": {}, "hash": "2e9c9f0239e9c29a13d02193ca1482a68e9406751f98dc72396f048109f2d2aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c53fc74-f9aa-41d6-818e-968163bc9f74", "node_type": "1", "metadata": {}, "hash": "bbc3fe5682388bbc893018cb22b96dc273ec462001810c77705dce4f2b2f7430", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5e3d0c85-bf98-48df-a1f7-8b784e0d4396", "node_type": "1", "metadata": {}, "hash": "5f3c7ccf60b5b1a4de110aa8d367f454c77b406eb674aed40064e440528d3719", "class_name": "RelatedNodeInfo"}}, "text": "Web Engine\n\nIn order to act on this feedback and accomplish these goals, improvements had to be made to the execution layer that makes this all possible. At its core, a virtual machine, ([NEAR Social VM](https://github.com/NearSocial/VM)) renders front-end code that developers store in a smart contract onchain (social-db). It was determined that a new approach to the original VM solution was needed, and the B.O.S. Web Engine project was created. Countless hours of hard work and dedication have gone into this project, yielding many significant achievements along the way. However, one major challenge still stands in the way of a production-ready beta release: expanding support for npm packages, particularly UI libraries.\n\nDuring the alpha testing phase of this project, we anticipated a fairly straightforward path in resolving wider npm support but unfortunately, the team discovered a more complex scenario. While standard JavaScript packages work well, React UI libraries frequently encounter difficulties. These challenges stem from the unique packaging methods of each library and the complexities involved in synchronizing changes between the iframe and the outer DOM. Although we have identified several theoretical solutions, each requires further research and development to assess their practicality and effectiveness. This has been more fully detailed in [a GitHub discussion within the BWE Repo](https://github.com/near/react-on-chain/discussions/425).\n\nWe reached out to leading B.O.S. component contributors to determine whether this limitation would be unnegotiable and to learn what features they value most. Do they prioritize unrestricted NPM support over secure iframe composability? How important is composability, and how would they define it? (considering our approach dissects it down to the atomic level of every element)\n\nThis revealed some interesting findings, one of which was that secure composability on an atomic level was not at the top of the list. Most favored the ease of quick prototyping, deployment, and onboarding with managed infra and wallet connections. Many valued social-db features and the ability to create custom gateways (websites) using code and user data publicly available to them.\n\nIn short, there were three camps:\n\n### True Believers\n\n- Decentralize all the things!", "mimetype": "text/plain", "start_char_idx": 2113, "end_char_idx": 4440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5e3d0c85-bf98-48df-a1f7-8b784e0d4396": {"__data__": {"id_": "5e3d0c85-bf98-48df-a1f7-8b784e0d4396", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-01.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117", "node_type": "4", "metadata": {}, "hash": "2e9c9f0239e9c29a13d02193ca1482a68e9406751f98dc72396f048109f2d2aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dce5d856-4dec-4505-9c81-4837182200cb", "node_type": "1", "metadata": {}, "hash": "a1cef980ffa5a06d723c27739720865e0c268e641374b540cc68700ee8c031bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fef757ee-6f6f-4420-bfdd-58a238acc116", "node_type": "1", "metadata": {}, "hash": "58c6dcb7663fe81527ec82f0b6be3cb2ad5d2f42de5fadbaafe3f4fbf15d84d7", "class_name": "RelatedNodeInfo"}}, "text": "- Love bleeding-edge unique tech\n- Love inherent open-source\n- Love social-db and its features\n\n### Quick Builders\n\n- Love the speed of development, prototyping, remixing\n- Love reverse engineering existing components\n- Quick onboarding with managed infra and wallet connections\n- Great for hackathons\n\n### Detractors\n\n- Don't like anything about B.O.S. components\n- DevX is poor and UI is slow\n- Value convenience over decentralization\n\nAfter reviewing our findings and engaging extensively with developers using this platform, it became clear that continuing with the release of the B.O.S. web engine as currently planned could potentially have a net negative impact. The majority of developers indicated that they do not favor a version of the BWE with limited npm support, even if it means enhanced secure composability. Additionally, while a minority of builders prioritize decentralization over performance and convenience, those who truly value decentralized frontends might find simpler ways to achieve their objectives once the need for secure composability is eliminated.\n\nFor those who may disagree with this perspective, the B.O.S. Web Engine remains, and will always be an open-source project. Anyone who sees value in the work we have done and wishes to advance this initiative is welcome to carry this torch and continue the development. https://github.com/near/bos-web-engine\n\n## What does this mean for B.O.S. components & the current VM?\n\nDuring the development of the B.O.S. Web Engine, a large focus was placed on addressing the security aspects of the existing VM and B.O.S. component architecture. The primary concern is with the composability and attack vectors that are exposed when importing components authored by third parties. Despite numerous patches to address discovered exploits, the inherent complexities of JavaScript and the current VM\u2019s architecture suggest that such vulnerabilities may continue to persist. Pagoda has diligently monitored and addressed these issues to date but we anticipate challenges in continuing to proactively discover and mitigate future vulnerabilities.\n\n_For examples of previously discovered vulnerabilities, view the [VM changelog](https://github.com/NearSocial/VM/releases) going back to `v2.5.1`, paying attention to lines tagged as `FIX` on issues Reported by `BrunoModificato` from OtterSec._\n\nIf you find value in creating B.O.S.", "mimetype": "text/plain", "start_char_idx": 4441, "end_char_idx": 6840, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fef757ee-6f6f-4420-bfdd-58a238acc116": {"__data__": {"id_": "fef757ee-6f6f-4420-bfdd-58a238acc116", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-01.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117", "node_type": "4", "metadata": {}, "hash": "2e9c9f0239e9c29a13d02193ca1482a68e9406751f98dc72396f048109f2d2aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5e3d0c85-bf98-48df-a1f7-8b784e0d4396", "node_type": "1", "metadata": {}, "hash": "5f3c7ccf60b5b1a4de110aa8d367f454c77b406eb674aed40064e440528d3719", "class_name": "RelatedNodeInfo"}}, "text": "components and leveraging the features of the social-db smart contract, rest assured that this framework will remain open-source and permanently accessible on-chain. However, we urge caution when incorporating and using third-party components. Due to the current virtual machine's limitations, we cannot guarantee protection against potential future exploits.\n\n## Should I migrate my project off of B.O.S.?\n\nIf your application relies on community-contributed or unreviewed third-party components, then **yes**. As described above, we cannot guarantee protection against future security vulnerabilities in the VM and B.O.S. component architecture. However, you can mitigate (but not eliminate) these security risks by reviewing all third-party components and either forking them or locking down dependencies to the specific version that you reviewed.\n\nIf you are not relying on any untrusted component code, then **maybe**. You are not being forced to migrate and there are still teams actively building new applications leveraging B.O.S. Additionally, there are no plans to deprecate main B.O.S. gateways at [dev.near.org](https://dev.near.org), [near.social](https://near.social), [dapdap](https://dapdap.net) or [bos.gg](https://bos.gg). However, the underlying framework and virtual machine are no longer actively developed or maintained by the original team. Consequently, the pace at which new features are introduced and existing bugs or vulnerabilities are addressed may be slower than expected. We openly welcome new maintainers for [this codebase](https://github.com/nearsocial). However, as previously mentioned, we anticipate that additional security vulnerabilities may still be discovered.\n\nWe have updated [\u201cFrontends for Web3 dApps\u201d in docs.near.org](https://docs.near.org/build/web3-apps/frontend)  to help you choose a solution that is right for you. If you need help, please reach out to one of our support channels on [Telegram](https://t.me/neardev) or [Discord](https://near.chat) and we will be happy to assist you or answer any questions you have.", "mimetype": "text/plain", "start_char_idx": 6841, "end_char_idx": 8912, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8600231-f27a-4a0d-a857-61fbb20100fb": {"__data__": {"id_": "d8600231-f27a-4a0d-a857-61fbb20100fb", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "051e5885-cfd7-40e3-8d94-ad8b5143c58d", "node_type": "1", "metadata": {}, "hash": "c0d99c7f28b596fd551c808ec0d8919f0c28947b3deb1ca8d86ac23f4de646a4", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: minecraft-nfts\ntitle: Create NFTs in Minecraft\nsidebar_label: Minecraft NFTs\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n> In this tutorial you'll learn how to take your custom Minecraft creations and mint the schematics into NFTs on the NEAR blockchain!\n\n## Overview\n\nThis tutorial will run you through minting Minecraft structures of any size onto the NEAR blockchain. It will allow you to copy and paste the designs into your own worlds. For this, we will be using WorldEdit to download and read the schematics and we'll put them on-chain using [IPFS](https://ipfs.io/).\n\n## Prerequisites\n\n:::info\nIt is recommended that you first complete the introductory **[minting NFTs tutorial](/tutorials/nfts/minting-nfts)**\n:::\n\nTo complete this tutorial successfully, you'll need:\n\n- [A Minecraft account](https://www.minecraft.net/)\n- [WorldEdit installed](https://worldedit.enginehub.org/en/latest/install/)\n- [A NEAR account](#wallet)\n- [NEAR command-line interface](/tools/near-cli#installation) (`near-cli`)\n\n## Creating a Schematic\n\nIn this section, we'll be creating the Minecraft schematic to put on chain.\n\n### Setup\n\n- Once you have [WorldEdit](https://worldedit.enginehub.org/en/latest/install/) installed and Minecraft loaded up, let's check if WorldEdit is working properly by running:\n\n```bash\n//pos1\n```\n\nIf WorldEdit is properly installed, it should output `First position set to (X, Y, Z).` where X, Y, and Z are coordinates.\n\nFor this tutorial, we will be minting a small village house. To follow along, choose any structure that you'd like to mint as shown below:\n\n![Village House Minecraft](/docs/assets/nfts/village-house-minecraft.png)\n\nYou'll then want to choose the boundaries of the structure that you'd like to copy. We will turn these into schematics which will be placed on chain for you or others to download and paste in your own worlds.\n\n- To do this, we'll need to outline the boundaries of the build using WorldEdit.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1984, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "051e5885-cfd7-40e3-8d94-ad8b5143c58d": {"__data__": {"id_": "051e5885-cfd7-40e3-8d94-ad8b5143c58d", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d8600231-f27a-4a0d-a857-61fbb20100fb", "node_type": "1", "metadata": {}, "hash": "7fcfa973a6f8a48acbf68b880273dacc7f9d5bbd3b6010a29d59455a2461b1a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fa2f3b55-48ff-42fd-85da-770bb9d66a65", "node_type": "1", "metadata": {}, "hash": "4a25eba87e6b736f5b1e098f38971dfae2af9684adda3374f5b33c21b7d7eb94", "class_name": "RelatedNodeInfo"}}, "text": "Stand in the bottom left corner of your build and run:\n\n```bash\n//pos1\n```\n\n- You can then move to the top right corner and run:\n\n```bash\n//pos2\n```\n\nSetting these two positions has now created a cube around your build.\n\n- We can now copy the contents of that build by running:\n\n```bash\n//copy\n```\n\nThe output should look something like this:\n\n![Copy Chat Message](/docs/assets/nfts/copy-chat-message-minecraft.png)\n\n:::info TIP\nRemember to note the position of your player when copying. If you copy the build and lets say you're standing on the roof, when you paste the build it will paste the build in a way that will result in you standing on the roof.\n:::\n\n### Sanity Check\n\nWe can check and see if our build is fine by pasting what we just copied elsewhere in our world.\n\n- Go to a location that you would like to paste the build and run:\n\n```bash\n//paste\n```\n\nIn the example below, we pasted the village house floating above a coral reef biome. You should also see a response notifying you that the clipboard has been pasted. (See example below)\n\n![Pasted Minecraft House](/docs/assets/nfts/pasted-minecraft-house.png)\n\n### Creating the Schematics File\n\nWhen you're happy with the build you've just copied and pasted, it's time to create the schematic file that we'll mint into an NFT. To do this we'll run a WorldEdit command that will save the schematic file on our local machine.\n\n- To do this, run the command `schematic save FILE_NAME` replacing `FILE_NAME` with a name of your choosing.\n\nThis will save the file to your Minecraft folder with under `minecraft/config/worldedit/schematics` witha `.schem` extension.\n\n- Now test your file by loading the schematic we just saved using `schematic load FILE_NAME`.\n\nThis will load the schematic to our clipboard and we're free to paste it in our world.\n\n## Minting the Schematic\n\nIn this section, we'll mint the schematics file, we've just created and put it on the blockchain using IPFS and web3.storage. In order to proceed, you need to locate the `FILE_NAME.schem` we created in the last section.", "mimetype": "text/plain", "start_char_idx": 1985, "end_char_idx": 4040, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fa2f3b55-48ff-42fd-85da-770bb9d66a65": {"__data__": {"id_": "fa2f3b55-48ff-42fd-85da-770bb9d66a65", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "051e5885-cfd7-40e3-8d94-ad8b5143c58d", "node_type": "1", "metadata": {}, "hash": "c0d99c7f28b596fd551c808ec0d8919f0c28947b3deb1ca8d86ac23f4de646a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d9d72c7f-c63f-42ee-95be-cb52692aad1c", "node_type": "1", "metadata": {}, "hash": "2242b6cf651adff4b6f9e7c32cef3b521b12b3b59aa942b8261f759d8c648fc2", "class_name": "RelatedNodeInfo"}}, "text": "This file can be found in your Minecraft folder under `minecraft/config/worldedit/schematics`. The location of your minecraft folder differs depending on your OS.\n\n### Uploading the schematic\n\nTo upload the schematic, we are going to use the free [web3.storage](https://web3.storage/) service built for storing off-chain data.\nWeb3.storage offers free decentralized storage and bandwidth on [IPFS](https://ipfs.io/) and [Filecoin](https://filecoin.io/).\n\n#### Steps\n\n1. Register an account and log in to [web3.storage](https://web3.storage/) either via email or your GitHub.\n\n2. Go to the [Files](https://web3.storage/) section, and click on the [Upload more Files](https://web3.storage/) button.\n\n   ![web3.storage](/docs/assets/nfts/web3-storage-upload.png)\n\n3. Once you have uploaded your file, you'll get a unique `CID` for your content, and a URL similar to:\n   ```\n   https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/\n   ```\n\n:::info\nSee the [web3.storage docs](https://docs.web3.storage/) for information on uploading multiple files and available API endpoints.\n:::\n\n### Interacting With the Contract\n\nNEAR has already deployed a contract to the account `nft.examples.testnet` which allows users to freely mint tokens. This is the account we'll be interacting with to mint our NFTs. Alternatively, if you've deployed a contract when following the original tutorial, you can use that as well.\n\n:::info\nWe'll be using the IPFS link we got in step three of the uploading process above as the media value when calling `nft_mint`.", "mimetype": "text/plain", "start_char_idx": 4041, "end_char_idx": 5607, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d9d72c7f-c63f-42ee-95be-cb52692aad1c": {"__data__": {"id_": "d9d72c7f-c63f-42ee-95be-cb52692aad1c", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fa2f3b55-48ff-42fd-85da-770bb9d66a65", "node_type": "1", "metadata": {}, "hash": "4a25eba87e6b736f5b1e098f38971dfae2af9684adda3374f5b33c21b7d7eb94", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c", "node_type": "1", "metadata": {}, "hash": "7576f1f79e65e35283db6e41f209e28635478cc82eb2d92f4b5bffe71b2ccd89", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n- Run the following command and replace the `receiver_id` field and the `--accountId` flag with the account ID you're [logged into](../../4.tools/cli.md#import) with NEAR CLI:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call nft.examples.testnet nft_mint '{\"token_id\": \"my-token-unique-id\", \"receiver_id\": \"YOUR_ACCOUNT\", \"metadata\": { \"title\": \"YOUR NFT TITLE\", \"description\": \"YOUR NFT DESCRIPTION\", \"media\": \"https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/\", \"copies\": 1}}' --accountId YOUR_ACCOUNT --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction nft.examples.testnet nft_mint json-args '{\"token_id\": \"my-token-unique-id\", \"receiver_id\": \"YOUR_ACCOUNT\", \"metadata\": { \"title\": \"YOUR NFT TITLE\", \"description\": \"YOUR NFT DESCRIPTION\", \"media\": \"https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/\", \"copies\": 1}}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as YOUR_ACCOUNT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n- Be sure to replace the title, description and media URL with your own.\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"token_id\": \"0\",\n  \"owner_id\": \"YOUR_ACCOUNT\",\n  \"metadata\": {\n    \"title\": \"My awesome Minecraft NFT\",\n    \"description\": \"Custom log cabin\",\n    \"media\": \"https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/\",\n    \"media_hash\": null,", "mimetype": "text/plain", "start_char_idx": 5608, "end_char_idx": 7178, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c": {"__data__": {"id_": "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d9d72c7f-c63f-42ee-95be-cb52692aad1c", "node_type": "1", "metadata": {}, "hash": "2242b6cf651adff4b6f9e7c32cef3b521b12b3b59aa942b8261f759d8c648fc2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc", "node_type": "1", "metadata": {}, "hash": "f8090753ee7ca3c4eb4aed350ddcc111a90662eb7e95c824d3bfcd0f240a1d89", "class_name": "RelatedNodeInfo"}}, "text": "\"copies\": 1,\n    \"issued_at\": null,\n    \"expires_at\": null,\n    \"starts_at\": null,\n    \"updated_at\": null,\n    \"extra\": null,\n    \"reference\": null,\n    \"reference_hash\": null\n  },\n  \"approved_account_ids\": {}\n}\n```\n\n</p>\n</details>\n\n- To view tokens owned by an account on the `example-nft` contract, you can call the contract with the following `near-cli` command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view nft.examples.testnet nft_tokens_for_owner '{\"account_id\": \"YOUR_ACCOUNT\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only nft.examples.testnet nft_tokens_for_owner json-args '{\"account_id\": \"YOUR_ACCOUNT\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n[\n  {\n    \"token_id\": \"0\",\n    \"owner_id\": \"YOUR_ACCOUNT\",\n    \"metadata\": {\n      \"title\": \"Some Art\",\n      \"description\": \"My NFT media\",\n      \"media\": \"https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/\",\n      \"media_hash\": null,\n      \"copies\": 1,\n      \"issued_at\": null,\n      \"expires_at\": null,\n      \"starts_at\": null,\n      \"updated_at\": null,\n      \"extra\": null,\n      \"reference\": null,\n      \"reference_hash\": null\n    },\n    \"approved_account_ids\": {}\n  }\n]\n```\n\n</p>\n</details>\n\n## Using the Village Schematic\n\nNow that you've uploaded your schematic to the blockchain, all someone would need to do to paste it in their own world would be to download the `*.schem` file associated with the IPFS link we minted the NFT with and place it in their schematics folder.", "mimetype": "text/plain", "start_char_idx": 7183, "end_char_idx": 8849, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc": {"__data__": {"id_": "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c", "node_type": "1", "metadata": {}, "hash": "7576f1f79e65e35283db6e41f209e28635478cc82eb2d92f4b5bffe71b2ccd89", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "487427e1-6910-48b5-87fb-a6f27791fbd9", "node_type": "1", "metadata": {}, "hash": "04b47ffdc34f41d0810a88ee3df3406ba73e29015bd134514d45049deb4a2847", "class_name": "RelatedNodeInfo"}}, "text": "As a test, we've minted an NFT that contains the village schematic we've been working with so that you can download it and paste it in your world.\n\n### Getting the Schematics File\n\nThe first thing you'll need to do is view the metadata for the token we've minted that contains the IPFS link to the village schematic. We've minted a token with the ID `village-schematic` under the account `village-schematic.testnet`.\n\n- To get the media link, run the following command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view nft.examples.testnet nft_tokens_for_owner '{\"account_id\": \"village-schematic.testnet\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only nft.examples.testnet nft_tokens_for_owner json-args '{\"account_id\": \"village-schematic.testnet\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Expected response: </summary>\n<p>\n\n```bash\n[\n  {\n    token_id: 'village-schematic',\n    owner_id: 'village-schematic.testnet',\n    metadata: {\n      title: 'Village Schematic',\n      description: 'Blockcraft Village Schematic Tutorial NFT',\n      media: 'https://bafybeidadhfilezx23dcdaueo3bjuafqeehokw33vyepkjtppigorrhbpy.ipfs.dweb.link/',\n      media_hash: null,\n      copies: 1,\n      issued_at: null,\n      expires_at: null,\n      starts_at: null,\n      updated_at: null,\n      extra: null,\n      reference: null,\n      reference_hash: null\n    },\n    approved_account_ids: {}\n  }\n]\n```\n\n</p>\n</details>\n\n- You can then take the media link and paste it into your browser. It should send you to a page that looks similar to this:\n\n![IPFS Village Schem](/docs/assets/nfts/IPFS-village-schem.png)\n\n- If you click on the file called `village-house.schem`, it will download the file.", "mimetype": "text/plain", "start_char_idx": 8851, "end_char_idx": 10671, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "487427e1-6910-48b5-87fb-a6f27791fbd9": {"__data__": {"id_": "487427e1-6910-48b5-87fb-a6f27791fbd9", "embedding": null, "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cdb8af0f-469a-44c5-885f-812bd849793d", "node_type": "4", "metadata": {}, "hash": "4d15c1605bc0619b577f4fcc95828b4fcf779e8561ff532e1f50c4f437f5a35e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc", "node_type": "1", "metadata": {}, "hash": "f8090753ee7ca3c4eb4aed350ddcc111a90662eb7e95c824d3bfcd0f240a1d89", "class_name": "RelatedNodeInfo"}}, "text": "- You can then copy the schematics file and paste it into your `minecraft/config/worldedit/schematics` folder.\n\n### Loading the Schematics File in Minecraft\n\n- After you've pasted the schematics file into the `minecraft/config/worldedit/schematics` folder, you can then load the schematic into your clipboard by running the following command in your minecraft world:\n\n```bash\n//schematics load village-house\n```\n\n- You can now paste the file anywhere in your world by simply using the `//paste` command and voila! You should see something similar to this:\n\n![Final Village Pasting](/docs/assets/nfts/final-village-pasting.png)\n\nCongratulations! You've just learned how to mint a Mincraft schematic NFT and load it into your world!\n\n## Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `2.1.1`", "mimetype": "text/plain", "start_char_idx": 10672, "end_char_idx": 11533, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c1e90991-c601-45a8-b696-dd1764b1b7da": {"__data__": {"id_": "c1e90991-c601-45a8-b696-dd1764b1b7da", "embedding": null, "metadata": {"file_path": "./near_dist/iframes.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "700ce749-5082-42b3-9e0e-a20af208afd5", "node_type": "4", "metadata": {}, "hash": "c1629643409936076da6dd333b2510c8a192189e602bc5a1f733f4f1334b758b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b11e06a3-2814-42e7-8627-8853c928344f", "node_type": "1", "metadata": {}, "hash": "30dc052b6aece5bcc6406f2d1757cba22d8eae8aced67ab385a254bcc6c23a19", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: using-iframes\ntitle: Using IFrames\n---\n\n# Iframes\n\nIn this tutorial you'll learn [how to use](#using-iframes-on-bos-vm) the `iframe` VM tag and the [Iframe resizer](#iframe-resizer) library, so you can embed external HTML or use custom DOM elements when building NEAR components.\nYou can use it along the rest of approved VM tags to simplify your component development.\n\n\n## Using IFrames on NEAR VM\n\nIframes can be used to embed external HTML or to use custom DOM\nelements, for example `canvas`.\n\n### Properties\n\nThe `iframe` tag takes the following properties: `className`, `style`, `src`,\n`srcDoc`, `title`, `message`, and `onMessage`. The iframe has a sandbox property\nset to `sandbox=\"allow-scripts\"`, which only allows scripts.\n\n:::info\n\n`message` and `onMessage` are used to communicate with this iframe\ninstance.\n\n:::\n\n| param | description |\n|-------|-------------|\n| `message` | it's passed to the iframe every time the deep equal is different, or the iframe is recreated. The message is passed using `contentWindow.postMessage(message, \"*\")` on the iframe. |\n| `onMessage(data)` | it's called when the iframe passes a message to `window.top`. Only `event.data` is passed to the `onMessage` |\n\n### Events\n\nThe VM exposes the following `<iframe>` events:\n- `onLoad()`: support for `onLoad` event without any event info\n   ```js\n   <iframe onLoad={() => { console.log('iframe loaded') }}>\n   ```\n\n- `onResized()`: support for `onResized` [Iframe Resizer](#iframe-resizer) event with an object only containing the new `width` and `height`\n   ```js\n   <iframe iframeResizer={{\n      onResized: ({width, height}) => { console.log('iframe resized', width, height) },\n   }}>\n   ```\n\n### Example\n\nThe following example demonstrates how you can use an iframe to call\n`eval`:\n```js\nState.init({\n  text: `\"b\" + \"a\" + +\"a\" + \"a\"`,\n});", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1840, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b11e06a3-2814-42e7-8627-8853c928344f": {"__data__": {"id_": "b11e06a3-2814-42e7-8627-8853c928344f", "embedding": null, "metadata": {"file_path": "./near_dist/iframes.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "700ce749-5082-42b3-9e0e-a20af208afd5", "node_type": "4", "metadata": {}, "hash": "c1629643409936076da6dd333b2510c8a192189e602bc5a1f733f4f1334b758b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c1e90991-c601-45a8-b696-dd1764b1b7da", "node_type": "1", "metadata": {}, "hash": "4676b631d4409f74840bc61396534c709fedc092bd896d93d47cb240cc24a796", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1", "node_type": "1", "metadata": {}, "hash": "9aa4893d1b1751f8c59d2e97dc86cfda2d97555246781d99ab06f4c1658f3568", "class_name": "RelatedNodeInfo"}}, "text": "const code = `\n<div>Expression: <pre id=\"exp\" /></div>\n<div>Results: <pre id=\"res\" /></div>\n\n<script>\n    window.top.postMessage(\"loaded\", \"*\");\n    window.addEventListener(\"message\", (event) => {\n        const data = event.data\n        document.getElementById(\"exp\").innerHTML = JSON.stringify(data);\n        try {\n            const result = eval(data.exp);\n            document.getElementById(\"res\").innerHTML = result;\n            event.source.postMessage(result, \"*\");\n        } catch (e) {\n            // ignore\n        }\n    }, false);\n</script>\n`;\n\nreturn (\n  <div>\n    <input\n      value={state.text || \"\"}\n      onChange={(e) => State.update({ text: e.target.value })}\n    />\n    Iframes below\n    <div className=\"d-flex\">\n      <iframe\n        className=\"w-50 border\"\n        srcDoc={code}\n        message={{ exp: state.text || \"\" }}\n        onMessage={(res1) => State.update({ res1 })}\n      />\n      <iframe\n        className=\"w-50 border\"\n        srcDoc={code}\n        message={{ exp: (state.text || \"\") + \" + ' banana'\" }}\n        onMessage={(res2) => State.update({ res2 })}\n      />\n    </div>\n    Result:{\" \"}\n    <pre>\n      res1 = {JSON.stringify(state.res1)}\n      res2 = {JSON.stringify(state.res2)}\n    </pre>\n  </div>\n);\n```\n\n![iframes](https://user-images.githubusercontent.com/470453/216140589-801a49e8-9ff1-4b76-9019-499b375989cc.png)\n\n\n## Iframe Resizer\n\n[Iframe Resizer](https://github.com/davidjbradshaw/iframe-resizer) is a critical library for rendering responsive iframes. This library automatically resizes the `iframe` to match the child content size to avoid scrollbars on the `iframe` itself.", "mimetype": "text/plain", "start_char_idx": 1842, "end_char_idx": 3470, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1": {"__data__": {"id_": "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1", "embedding": null, "metadata": {"file_path": "./near_dist/iframes.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "700ce749-5082-42b3-9e0e-a20af208afd5", "node_type": "4", "metadata": {}, "hash": "c1629643409936076da6dd333b2510c8a192189e602bc5a1f733f4f1334b758b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b11e06a3-2814-42e7-8627-8853c928344f", "node_type": "1", "metadata": {}, "hash": "30dc052b6aece5bcc6406f2d1757cba22d8eae8aced67ab385a254bcc6c23a19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1f41f6e5-ea6b-4d44-8b15-47850c10a93e", "node_type": "1", "metadata": {}, "hash": "afc2445836bf98edd348ccedf3bd663ffdb2a37725d73e228547ca3049842624", "class_name": "RelatedNodeInfo"}}, "text": ":::caution don't forget \n\nThe child page rendered by the `iframe` **must include** this script in order for the resizing to work:\n\n```html\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.6/iframeResizer.contentWindow.js\"></script>\n```\n\n:::\n\n:::note\n\nNEAR VM uses the React flavor of [this plugin](https://github.com/davidjbradshaw/iframe-resizer-react).\n\n:::\n\n### Basic Example\n\nYou can use the Iframe resizer library like this:\n\n```js\nreturn (\n  <div>\n    <iframe\n      iframeResizer\n      src=\"https://davidjbradshaw.com/iframe-resizer/example/frame.content.html\"\n    />\n  </div>\n);\n```\n\nIf you need to pass in options to override the default behavior:\n\n```js\nreturn (\n  <div>\n    <iframe\n      iframeResizer={{ log: true }}\n      src=\"https://davidjbradshaw.com/iframe-resizer/example/frame.content.html\"\n    />\n  </div>\n);\n```\n\n![iframe resizer](https://user-images.githubusercontent.com/1475067/231292519-51f571c6-5f7b-4076-a1bb-91fd8a99c775.png)\n\n:::tip\n\nYou can check [this example](https://near.org/near/widget/ComponentDetailsPage?src=calebjacob.near/widget/IframeResizerTest) to see a complete component using Iframe Resizer.", "mimetype": "text/plain", "start_char_idx": 3472, "end_char_idx": 4653, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1f41f6e5-ea6b-4d44-8b15-47850c10a93e": {"__data__": {"id_": "1f41f6e5-ea6b-4d44-8b15-47850c10a93e", "embedding": null, "metadata": {"file_path": "./near_dist/iframes.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "700ce749-5082-42b3-9e0e-a20af208afd5", "node_type": "4", "metadata": {}, "hash": "c1629643409936076da6dd333b2510c8a192189e602bc5a1f733f4f1334b758b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1", "node_type": "1", "metadata": {}, "hash": "9aa4893d1b1751f8c59d2e97dc86cfda2d97555246781d99ab06f4c1658f3568", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n### `srcDoc` Example\n\nAn example of a valid `srcDoc` for a secure Iframe using `iframeResizer`:\n\n```js\nconst code = `\n<script>\n// ...your code...\n\n// define message handler\nconst handleMessage = (m) => {\n  console.log('received message', m)\n  document.getElementById(\"messageText\").innerHTML = m;\n};\n\n// finally, configure iframe resizer options before importing the script\nwindow.iFrameResizer = {\n    onMessage: handleMessage\n  }\n</script>\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.6/iframeResizer.contentWindow.js\"></script>\n<p id=\"messageText\">loading...</p>\n`;\n\nreturn (\n  <div>\n    <iframe\n      iframeResizer\n      className=\"w-100\"\n      srcDoc={code}\n      message=\"my message\"\n    />\n  </div>\n);\n```", "mimetype": "text/plain", "start_char_idx": 4655, "end_char_idx": 5421, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "65456c7c-9607-4fc0-8991-26fad71ac078": {"__data__": {"id_": "65456c7c-9607-4fc0-8991-26fad71ac078", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7038f198-ee21-4d7b-a215-216aeed17d66", "node_type": "1", "metadata": {}, "hash": "c7c1d2b457381eea8e0ddd0bb90848b7fce4439cf92935ad66c3e3dd9a11006b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: protocol\ntitle: Protocol\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n\nThe RPC API enables you to retrieve the current genesis and protocol configuration.\n\n---\n\n## Genesis Config {#genesis-config}\n\n> Returns current genesis configuration.\n\n- method: `EXPERIMENTAL_genesis_config`\n- params: _none_\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_genesis_config\"\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_genesisConfig();\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_genesis_config\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"protocol_version\": 29,\n    \"genesis_time\": \"2020-07-31T03:39:42.911378Z\",\n    \"chain_id\": \"testnet\",\n    \"genesis_height\": 10885359,\n    \"num_block_producer_seats\": 100,\n    \"num_block_producer_seats_per_shard\": [100],\n    \"avg_hidden_validator_seats_per_shard\": [0],\n    \"dynamic_resharding\": false,\n    \"protocol_upgrade_stake_threshold\": [4, 5],\n    \"protocol_upgrade_num_epochs\": 2,\n    \"epoch_length\": 43200,\n    \"gas_limit\": 1000000000000000,\n    \"min_gas_price\": \"5000\",\n    \"max_gas_price\": \"10000000000000000000000\",\n    \"block_producer_kickout_threshold\": 80,\n    \"chunk_producer_kickout_threshold\": 90,\n    \"online_min_threshold\": [90, 100],", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1595, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7038f198-ee21-4d7b-a215-216aeed17d66": {"__data__": {"id_": "7038f198-ee21-4d7b-a215-216aeed17d66", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "65456c7c-9607-4fc0-8991-26fad71ac078", "node_type": "1", "metadata": {}, "hash": "8a5ce96bec538c4c125d131ee0beffe2f97844e03904a5e1393c1af2f4dcdad5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "937d7422-5df1-4d5c-b845-50b33da696b6", "node_type": "1", "metadata": {}, "hash": "65a0d69dd93dbf5227c5b4cfd0a7c763bee6ab8cbcc5065e804b8f90d0248242", "class_name": "RelatedNodeInfo"}}, "text": "\"online_max_threshold\": [99, 100],\n    \"gas_price_adjustment_rate\": [1, 100],\n    \"runtime_config\": {\n      \"storage_amount_per_byte\": \"90949470177292823791\",\n      \"transaction_costs\": {\n        \"action_receipt_creation_config\": {\n          \"send_sir\": 108059500000,\n          \"send_not_sir\": 108059500000,\n          \"execution\": 108059500000\n        },\n        \"data_receipt_creation_config\": {\n          \"base_cost\": {\n            \"send_sir\": 4697339419375,\n            \"send_not_sir\": 4697339419375,\n            \"execution\": 4697339419375\n          },\n          \"cost_per_byte\": {\n            \"send_sir\": 59357464,\n            \"send_not_sir\": 59357464,\n            \"execution\": 59357464\n          }\n        },\n        \"action_creation_config\": {\n          \"create_account_cost\": {\n            \"send_sir\": 99607375000,\n            \"send_not_sir\": 99607375000,\n            \"execution\": 99607375000\n          },\n          \"deploy_contract_cost\": {\n            \"send_sir\": 184765750000,\n            \"send_not_sir\": 184765750000,\n            \"execution\": 184765750000\n          },\n          \"deploy_contract_cost_per_byte\": {\n            \"send_sir\": 6812999,\n            \"send_not_sir\": 6812999,\n            \"execution\": 6812999\n          },\n          \"function_call_cost\": {\n            \"send_sir\": 2319861500000,\n            \"send_not_sir\": 2319861500000,\n            \"execution\": 2319861500000\n          },\n          \"function_call_cost_per_byte\": {\n            \"send_sir\": 2235934,\n            \"send_not_sir\": 2235934,\n            \"execution\": 2235934\n          },\n          \"transfer_cost\": {\n            \"send_sir\": 115123062500,\n            \"send_not_sir\": 115123062500,\n            \"execution\": 115123062500\n          },", "mimetype": "text/plain", "start_char_idx": 1600, "end_char_idx": 3327, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "937d7422-5df1-4d5c-b845-50b33da696b6": {"__data__": {"id_": "937d7422-5df1-4d5c-b845-50b33da696b6", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7038f198-ee21-4d7b-a215-216aeed17d66", "node_type": "1", "metadata": {}, "hash": "c7c1d2b457381eea8e0ddd0bb90848b7fce4439cf92935ad66c3e3dd9a11006b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c79b139-8419-416f-a6a0-1da4b328b789", "node_type": "1", "metadata": {}, "hash": "27b5d70e9a71f39cb0060c5cacefa26f1ac8e5e0511f97f2d7e0e4c26df15cc4", "class_name": "RelatedNodeInfo"}}, "text": "\"stake_cost\": {\n            \"send_sir\": 141715687500,\n            \"send_not_sir\": 141715687500,\n            \"execution\": 102217625000\n          },\n          \"add_key_cost\": {\n            \"full_access_cost\": {\n              \"send_sir\": 101765125000,\n              \"send_not_sir\": 101765125000,\n              \"execution\": 101765125000\n            },\n            \"function_call_cost\": {\n              \"send_sir\": 102217625000,\n              \"send_not_sir\": 102217625000,\n              \"execution\": 102217625000\n            },\n            \"function_call_cost_per_byte\": {\n              \"send_sir\": 1925331,\n              \"send_not_sir\": 1925331,\n              \"execution\": 1925331\n            }\n          },\n          \"delete_key_cost\": {\n            \"send_sir\": 94946625000,\n            \"send_not_sir\": 94946625000,\n            \"execution\": 94946625000\n          },\n          \"delete_account_cost\": {\n            \"send_sir\": 147489000000,\n            \"send_not_sir\": 147489000000,\n            \"execution\": 147489000000\n          }\n        },\n        \"storage_usage_config\": {\n          \"num_bytes_account\": 100,\n          \"num_extra_bytes_record\": 40\n        },\n        \"burnt_gas_reward\": [3, 10],\n        \"pessimistic_gas_price_inflation_ratio\": [103, 100]\n      },\n      \"wasm_config\": {\n        \"ext_costs\": {\n          \"base\": 264768111,\n          \"contract_compile_base\": 35445963,\n          \"contract_compile_bytes\": 216750,\n          \"read_memory_base\": 2609863200,\n          \"read_memory_byte\": 3801333,\n          \"write_memory_base\": 2803794861,\n          \"write_memory_byte\": 2723772,\n          \"read_register_base\": 2517165186,\n          \"read_register_byte\": 98562,\n          \"write_register_base\": 2865522486,", "mimetype": "text/plain", "start_char_idx": 3338, "end_char_idx": 5058, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c79b139-8419-416f-a6a0-1da4b328b789": {"__data__": {"id_": "3c79b139-8419-416f-a6a0-1da4b328b789", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "937d7422-5df1-4d5c-b845-50b33da696b6", "node_type": "1", "metadata": {}, "hash": "65a0d69dd93dbf5227c5b4cfd0a7c763bee6ab8cbcc5065e804b8f90d0248242", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e372648d-e1e1-4a32-871b-8f28afe290e8", "node_type": "1", "metadata": {}, "hash": "6a3809011cb7e13acff2f26b3ffb994ab6646727fbdec074dfab0136e4ba7f71", "class_name": "RelatedNodeInfo"}}, "text": "\"write_register_byte\": 3801564,\n          \"utf8_decoding_base\": 3111779061,\n          \"utf8_decoding_byte\": 291580479,\n          \"utf16_decoding_base\": 3543313050,\n          \"utf16_decoding_byte\": 163577493,\n          \"sha256_base\": 4540970250,\n          \"sha256_byte\": 24117351,\n          \"keccak256_base\": 5879491275,\n          \"keccak256_byte\": 21471105,\n          \"keccak512_base\": 5811388236,\n          \"keccak512_byte\": 36649701,\n          \"log_base\": 3543313050,\n          \"log_byte\": 13198791,\n          \"storage_write_base\": 64196736000,\n          \"storage_write_key_byte\": 70482867,\n          \"storage_write_value_byte\": 31018539,\n          \"storage_write_evicted_byte\": 32117307,\n          \"storage_read_base\": 56356845750,\n          \"storage_read_key_byte\": 30952533,\n          \"storage_read_value_byte\": 5611005,\n          \"storage_remove_base\": 53473030500,\n          \"storage_remove_key_byte\": 38220384,\n          \"storage_remove_ret_value_byte\": 11531556,\n          \"storage_has_key_base\": 54039896625,\n          \"storage_has_key_byte\": 30790845,\n          \"storage_iter_create_prefix_base\": 0,\n          \"storage_iter_create_prefix_byte\": 0,\n          \"storage_iter_create_range_base\": 0,\n          \"storage_iter_create_from_byte\": 0,\n          \"storage_iter_create_to_byte\": 0,\n          \"storage_iter_next_base\": 0,\n          \"storage_iter_next_key_byte\": 0,\n          \"storage_iter_next_value_byte\": 0,\n          \"touching_trie_node\": 16101955926,\n          \"promise_and_base\": 1465013400,\n          \"promise_and_per_promise\": 5452176,\n          \"promise_return\": 560152386,\n          \"validator_stake_base\": 911834726400,", "mimetype": "text/plain", "start_char_idx": 5069, "end_char_idx": 6711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e372648d-e1e1-4a32-871b-8f28afe290e8": {"__data__": {"id_": "e372648d-e1e1-4a32-871b-8f28afe290e8", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c79b139-8419-416f-a6a0-1da4b328b789", "node_type": "1", "metadata": {}, "hash": "27b5d70e9a71f39cb0060c5cacefa26f1ac8e5e0511f97f2d7e0e4c26df15cc4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e8bd3657-6ad4-47a6-8979-e34111c9a0fe", "node_type": "1", "metadata": {}, "hash": "a7bf5b1945c056bd8226b8ae2b8773328b9a027d48e63e3316d496bb74affb34", "class_name": "RelatedNodeInfo"}}, "text": "\"validator_total_stake_base\": 911834726400\n        },\n        \"grow_mem_cost\": 1,\n        \"regular_op_cost\": 3856371,\n        \"limit_config\": {\n          \"max_gas_burnt\": 200000000000000,\n          \"max_gas_burnt_view\": 200000000000000,\n          \"max_stack_height\": 16384,\n          \"initial_memory_pages\": 1024,\n          \"max_memory_pages\": 2048,\n          \"registers_memory_limit\": 1073741824,\n          \"max_register_size\": 104857600,\n          \"max_number_registers\": 100,\n          \"max_number_logs\": 100,\n          \"max_total_log_length\": 16384,\n          \"max_total_prepaid_gas\": 300000000000000,\n          \"max_actions_per_receipt\": 100,\n          \"max_number_bytes_method_names\": 2000,\n          \"max_length_method_name\": 256,\n          \"max_arguments_length\": 4194304,\n          \"max_length_returned_data\": 4194304,\n          \"max_contract_size\": 4194304,\n          \"max_length_storage_key\": 4194304,\n          \"max_length_storage_value\": 4194304,\n          \"max_promises_per_function_call_action\": 1024,\n          \"max_number_input_data_dependencies\": 128\n        }\n      },\n      \"account_creation_config\": {\n        \"min_allowed_top_level_account_length\": 0,\n        \"registrar_account_id\": \"registrar\"\n      }\n    },\n    \"validators\": [\n      {\n        \"account_id\": \"node0\",\n        \"public_key\": \"ed25519:7PGseFbWxvYVgZ89K1uTJKYoKetWs7BJtbyXDzfbAcqX\",\n        \"amount\": \"1000000000000000000000000000000\"\n      },\n      {\n        \"account_id\": \"node1\",\n        \"public_key\": \"ed25519:6DSjZ8mvsRZDvFqFxo8tCKePG96omXW7eVYVSySmDk8e\",", "mimetype": "text/plain", "start_char_idx": 6722, "end_char_idx": 8269, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e8bd3657-6ad4-47a6-8979-e34111c9a0fe": {"__data__": {"id_": "e8bd3657-6ad4-47a6-8979-e34111c9a0fe", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e372648d-e1e1-4a32-871b-8f28afe290e8", "node_type": "1", "metadata": {}, "hash": "6a3809011cb7e13acff2f26b3ffb994ab6646727fbdec074dfab0136e4ba7f71", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b18844d8-36e6-474a-b3dc-89dc3a07f148", "node_type": "1", "metadata": {}, "hash": "42f62049d41998c6e870d1bfaea5b34e4f51b8a0e9b48ca4c0968b01d0bc88a8", "class_name": "RelatedNodeInfo"}}, "text": "\"amount\": \"1000000000000000000000000000000\"\n      },\n      {\n        \"account_id\": \"node2\",\n        \"public_key\": \"ed25519:GkDv7nSMS3xcqA45cpMvFmfV1o4fRF6zYo1JRR6mNqg5\",\n        \"amount\": \"1000000000000000000000000000000\"\n      },\n      {\n        \"account_id\": \"node3\",\n        \"public_key\": \"ed25519:ydgzeXHJ5Xyt7M1gXLxqLBW1Ejx6scNV5Nx2pxFM8su\",\n        \"amount\": \"1000000000000000000000000000000\"\n      }\n    ],\n    \"transaction_validity_period\": 86400,\n    \"protocol_reward_rate\": [1, 10],\n    \"max_inflation_rate\": [1, 20],\n    \"total_supply\": \"1031467299046044096035532756810080\",\n    \"num_blocks_per_year\": 31536000,\n    \"protocol_treasury_account\": \"near\",\n    \"fishermen_threshold\": \"10000000000000000000\",\n    \"minimum_stake_divisor\": 10\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 8278, "end_char_idx": 9438, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b18844d8-36e6-474a-b3dc-89dc3a07f148": {"__data__": {"id_": "b18844d8-36e6-474a-b3dc-89dc3a07f148", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e8bd3657-6ad4-47a6-8979-e34111c9a0fe", "node_type": "1", "metadata": {}, "hash": "a7bf5b1945c056bd8226b8ae2b8773328b9a027d48e63e3316d496bb74affb34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "272032ca-909d-43c5-bd65-a6ee0eac0732", "node_type": "1", "metadata": {}, "hash": "6ff7f7b1832fe48496c565db37f2a74af4bc94b51a59352da7066f60e2f27a37", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_genesis_config` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Protocol Config {#protocol-config}\n\n> Returns most recent protocol configuration or a specific queried block. Useful for finding current storage and transaction costs.\n\n- method: `EXPERIMENTAL_protocol_config`\n- params:\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_protocol_config\",", "mimetype": "text/plain", "start_char_idx": 9441, "end_char_idx": 11184, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "272032ca-909d-43c5-bd65-a6ee0eac0732": {"__data__": {"id_": "272032ca-909d-43c5-bd65-a6ee0eac0732", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b18844d8-36e6-474a-b3dc-89dc3a07f148", "node_type": "1", "metadata": {}, "hash": "42f62049d41998c6e870d1bfaea5b34e4f51b8a0e9b48ca4c0968b01d0bc88a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6f944914-fddf-4034-8fe8-aec02f7585f7", "node_type": "1", "metadata": {}, "hash": "bdd8f85b3f88813d412f7c30ac507b349753a495904a7f94429480baf4afb377", "class_name": "RelatedNodeInfo"}}, "text": "\"params\": {\n    \"finality\": \"final\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_protocol_config \\\n  params:='{\n    \"finality\": \"final\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"protocol_version\": 45,\n    \"genesis_time\": \"2020-07-31T03:39:42.911378Z\",\n    \"chain_id\": \"testnet\",\n    \"genesis_height\": 42376888,\n    \"num_block_producer_seats\": 200,\n    \"num_block_producer_seats_per_shard\": [200],\n    \"avg_hidden_validator_seats_per_shard\": [0],\n    \"dynamic_resharding\": false,\n    \"protocol_upgrade_stake_threshold\": [4, 5],\n    \"epoch_length\": 43200,\n    \"gas_limit\": 1000000000000000,\n    \"min_gas_price\": \"5000\",\n    \"max_gas_price\": \"10000000000000000000000\",\n    \"block_producer_kickout_threshold\": 80,\n    \"chunk_producer_kickout_threshold\": 90,\n    \"online_min_threshold\": [90, 100],\n    \"online_max_threshold\": [99, 100],\n    \"gas_price_adjustment_rate\": [1, 100],\n    \"runtime_config\": {\n      \"storage_amount_per_byte\": \"10000000000000000000\",\n      \"transaction_costs\": {\n        \"action_receipt_creation_config\": {\n          \"send_sir\": 108059500000,\n          \"send_not_sir\": 108059500000,\n          \"execution\": 108059500000\n        },\n        \"data_receipt_creation_config\": {\n          \"base_cost\": {\n            \"send_sir\": 4697339419375,\n            \"send_not_sir\": 4697339419375,", "mimetype": "text/plain", "start_char_idx": 11187, "end_char_idx": 12684, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6f944914-fddf-4034-8fe8-aec02f7585f7": {"__data__": {"id_": "6f944914-fddf-4034-8fe8-aec02f7585f7", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "272032ca-909d-43c5-bd65-a6ee0eac0732", "node_type": "1", "metadata": {}, "hash": "6ff7f7b1832fe48496c565db37f2a74af4bc94b51a59352da7066f60e2f27a37", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c064bf5e-a931-4139-8921-e1df021090ef", "node_type": "1", "metadata": {}, "hash": "28c011b470f16cf7f030405ef895b054e852ee4d6174ed8ef2bf6a4f88bdc14a", "class_name": "RelatedNodeInfo"}}, "text": "\"execution\": 4697339419375\n          },\n          \"cost_per_byte\": {\n            \"send_sir\": 59357464,\n            \"send_not_sir\": 59357464,\n            \"execution\": 59357464\n          }\n        },\n        \"action_creation_config\": {\n          \"create_account_cost\": {\n            \"send_sir\": 99607375000,\n            \"send_not_sir\": 99607375000,\n            \"execution\": 99607375000\n          },\n          \"deploy_contract_cost\": {\n            \"send_sir\": 184765750000,\n            \"send_not_sir\": 184765750000,\n            \"execution\": 184765750000\n          },\n          \"deploy_contract_cost_per_byte\": {\n            \"send_sir\": 6812999,\n            \"send_not_sir\": 6812999,\n            \"execution\": 6812999\n          },\n          \"function_call_cost\": {\n            \"send_sir\": 2319861500000,\n            \"send_not_sir\": 2319861500000,\n            \"execution\": 2319861500000\n          },\n          \"function_call_cost_per_byte\": {\n            \"send_sir\": 2235934,\n            \"send_not_sir\": 2235934,\n            \"execution\": 2235934\n          },\n          \"transfer_cost\": {\n            \"send_sir\": 115123062500,\n            \"send_not_sir\": 115123062500,\n            \"execution\": 115123062500\n          },\n          \"stake_cost\": {\n            \"send_sir\": 141715687500,\n            \"send_not_sir\": 141715687500,\n            \"execution\": 102217625000\n          },\n          \"add_key_cost\": {\n            \"full_access_cost\": {\n              \"send_sir\": 101765125000,\n              \"send_not_sir\": 101765125000,\n              \"execution\": 101765125000\n            },\n            \"function_call_cost\": {\n              \"send_sir\": 102217625000,\n              \"send_not_sir\": 102217625000,\n              \"execution\": 102217625000\n            },", "mimetype": "text/plain", "start_char_idx": 2116, "end_char_idx": 3860, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c064bf5e-a931-4139-8921-e1df021090ef": {"__data__": {"id_": "c064bf5e-a931-4139-8921-e1df021090ef", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6f944914-fddf-4034-8fe8-aec02f7585f7", "node_type": "1", "metadata": {}, "hash": "bdd8f85b3f88813d412f7c30ac507b349753a495904a7f94429480baf4afb377", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d8728fd9-04ee-430c-b8df-9e98f4bca553", "node_type": "1", "metadata": {}, "hash": "f4bf35f28b1e39b6778d068627348019a1dd4dc4f61c60becaffcfb5036eecbc", "class_name": "RelatedNodeInfo"}}, "text": "\"function_call_cost_per_byte\": {\n              \"send_sir\": 1925331,\n              \"send_not_sir\": 1925331,\n              \"execution\": 1925331\n            }\n          },\n          \"delete_key_cost\": {\n            \"send_sir\": 94946625000,\n            \"send_not_sir\": 94946625000,\n            \"execution\": 94946625000\n          },\n          \"delete_account_cost\": {\n            \"send_sir\": 147489000000,\n            \"send_not_sir\": 147489000000,\n            \"execution\": 147489000000\n          }\n        },\n        \"storage_usage_config\": {\n          \"num_bytes_account\": 100,\n          \"num_extra_bytes_record\": 40\n        },\n        \"burnt_gas_reward\": [3, 10],\n        \"pessimistic_gas_price_inflation_ratio\": [103, 100]\n      },\n      \"wasm_config\": {\n        \"ext_costs\": {\n          \"base\": 264768111,\n          \"contract_compile_base\": 35445963,\n          \"contract_compile_bytes\": 216750,\n          \"read_memory_base\": 2609863200,\n          \"read_memory_byte\": 3801333,\n          \"write_memory_base\": 2803794861,\n          \"write_memory_byte\": 2723772,\n          \"read_register_base\": 2517165186,\n          \"read_register_byte\": 98562,\n          \"write_register_base\": 2865522486,\n          \"write_register_byte\": 3801564,\n          \"utf8_decoding_base\": 3111779061,\n          \"utf8_decoding_byte\": 291580479,\n          \"utf16_decoding_base\": 3543313050,\n          \"utf16_decoding_byte\": 163577493,\n          \"sha256_base\": 4540970250,\n          \"sha256_byte\": 24117351,\n          \"keccak256_base\": 5879491275,\n          \"keccak256_byte\": 21471105,\n          \"keccak512_base\": 5811388236,\n          \"keccak512_byte\": 36649701,", "mimetype": "text/plain", "start_char_idx": 3873, "end_char_idx": 5504, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8728fd9-04ee-430c-b8df-9e98f4bca553": {"__data__": {"id_": "d8728fd9-04ee-430c-b8df-9e98f4bca553", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c064bf5e-a931-4139-8921-e1df021090ef", "node_type": "1", "metadata": {}, "hash": "28c011b470f16cf7f030405ef895b054e852ee4d6174ed8ef2bf6a4f88bdc14a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b2213053-de1c-43c1-8d4a-15dd26cecf97", "node_type": "1", "metadata": {}, "hash": "6a5866390c90e55598ac92cc403421abb4b38fcabf097f2cd0cecc46974b6432", "class_name": "RelatedNodeInfo"}}, "text": "\"log_base\": 3543313050,\n          \"log_byte\": 13198791,\n          \"storage_write_base\": 64196736000,\n          \"storage_write_key_byte\": 70482867,\n          \"storage_write_value_byte\": 31018539,\n          \"storage_write_evicted_byte\": 32117307,\n          \"storage_read_base\": 56356845750,\n          \"storage_read_key_byte\": 30952533,\n          \"storage_read_value_byte\": 5611005,\n          \"storage_remove_base\": 53473030500,\n          \"storage_remove_key_byte\": 38220384,\n          \"storage_remove_ret_value_byte\": 11531556,\n          \"storage_has_key_base\": 54039896625,\n          \"storage_has_key_byte\": 30790845,\n          \"storage_iter_create_prefix_base\": 0,\n          \"storage_iter_create_prefix_byte\": 0,\n          \"storage_iter_create_range_base\": 0,\n          \"storage_iter_create_from_byte\": 0,\n          \"storage_iter_create_to_byte\": 0,\n          \"storage_iter_next_base\": 0,\n          \"storage_iter_next_key_byte\": 0,\n          \"storage_iter_next_value_byte\": 0,\n          \"touching_trie_node\": 16101955926,\n          \"promise_and_base\": 1465013400,\n          \"promise_and_per_promise\": 5452176,\n          \"promise_return\": 560152386,\n          \"validator_stake_base\": 911834726400,\n          \"validator_total_stake_base\": 911834726400\n        },\n        \"grow_mem_cost\": 1,\n        \"regular_op_cost\": 3856371,\n        \"limit_config\": {\n          \"max_gas_burnt\": 200000000000000,\n          \"max_gas_burnt_view\": 200000000000000,\n          \"max_stack_height\": 16384,\n          \"initial_memory_pages\": 1024,\n          \"max_memory_pages\": 2048,\n          \"registers_memory_limit\": 1073741824,\n          \"max_register_size\": 104857600,\n          \"max_number_registers\": 100,\n          \"max_number_logs\": 100,", "mimetype": "text/plain", "start_char_idx": 5515, "end_char_idx": 7234, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b2213053-de1c-43c1-8d4a-15dd26cecf97": {"__data__": {"id_": "b2213053-de1c-43c1-8d4a-15dd26cecf97", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d8728fd9-04ee-430c-b8df-9e98f4bca553", "node_type": "1", "metadata": {}, "hash": "f4bf35f28b1e39b6778d068627348019a1dd4dc4f61c60becaffcfb5036eecbc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3bf9848-e830-4e7b-9116-29d7b31239f7", "node_type": "1", "metadata": {}, "hash": "0ca4bce507a6bf2c6f920d8e9921cf8efee6f9097154c0f1d723b60d6d5ed357", "class_name": "RelatedNodeInfo"}}, "text": "\"max_total_log_length\": 16384,\n          \"max_total_prepaid_gas\": 300000000000000,\n          \"max_actions_per_receipt\": 100,\n          \"max_number_bytes_method_names\": 2000,\n          \"max_length_method_name\": 256,\n          \"max_arguments_length\": 4194304,\n          \"max_length_returned_data\": 4194304,\n          \"max_contract_size\": 4194304,\n          \"max_length_storage_key\": 4194304,\n          \"max_length_storage_value\": 4194304,\n          \"max_promises_per_function_call_action\": 1024,\n          \"max_number_input_data_dependencies\": 128\n        }\n      },\n      \"account_creation_config\": {\n        \"min_allowed_top_level_account_length\": 0,\n        \"registrar_account_id\": \"registrar\"\n      }\n    },\n    \"transaction_validity_period\": 86400,\n    \"protocol_reward_rate\": [1, 10],\n    \"max_inflation_rate\": [1, 20],\n    \"num_blocks_per_year\": 31536000,\n    \"protocol_treasury_account\": \"near\",\n    \"fishermen_threshold\": \"340282366920938463463374607431768211455\",\n    \"minimum_stake_divisor\": 10\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-1}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 17826, "end_char_idx": 19245, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3bf9848-e830-4e7b-9116-29d7b31239f7": {"__data__": {"id_": "b3bf9848-e830-4e7b-9116-29d7b31239f7", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b2213053-de1c-43c1-8d4a-15dd26cecf97", "node_type": "1", "metadata": {}, "hash": "6a5866390c90e55598ac92cc403421abb4b38fcabf097f2cd0cecc46974b6432", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "99f71980-043d-4ffb-8c78-9cb44a06d12f", "node_type": "1", "metadata": {}, "hash": "cb78b9071e3359a7be2e07858511df95b8a549becdc6933723e1859289a936c0", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 9441, "end_char_idx": 9902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "99f71980-043d-4ffb-8c78-9cb44a06d12f": {"__data__": {"id_": "99f71980-043d-4ffb-8c78-9cb44a06d12f", "embedding": null, "metadata": {"file_path": "./near_dist/protocol.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "338e38b0-7839-4aef-a87f-c1797d241229", "node_type": "4", "metadata": {}, "hash": "b49009a293e6c2ee69258c37c78ba48665b4e16a5ac0261ccc113c3e2c04679f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3bf9848-e830-4e7b-9116-29d7b31239f7", "node_type": "1", "metadata": {}, "hash": "0ca4bce507a6bf2c6f920d8e9921cf8efee6f9097154c0f1d723b60d6d5ed357", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_protocol_config` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 19711, "end_char_idx": 21072, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2bc80f03-ca45-4c76-9066-10fb0ca2ad7b": {"__data__": {"id_": "2bc80f03-ca45-4c76-9066-10fb0ca2ad7b", "embedding": null, "metadata": {"file_path": "./near_dist/mint.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e5c957c7-d7f2-47e9-9929-237318c6e7ee", "node_type": "4", "metadata": {}, "hash": "3fda3c1ad02cfc4c257477a7ab8d24b5365b11f505272edf8010c85311d1d75a", "class_name": "RelatedNodeInfo"}}, "text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"nft-contract-tabs\" className=\"file-tabs\">\n<TabItem value=\"NFT Primitive\" label=\"Reference\" default>\n\n```bash\nnear call nft.primitives.near nft_mint '{\"token_id\": \"1\", \"receiver_id\": \"bob.near\", \"token_metadata\": {\"title\": \"NFT Primitive Token\", \"description\": \"Awesome NFT Primitive Token\", \"media\": \"string\"}}' --depositYocto 10000000000000000000000, --accountId bob.near\n```\n\n</TabItem>\n\n<TabItem value=\"Paras\" label=\"Paras\">\n\n```bash\nnear call x.paras.near nft_mint '{\"token_series_id\": \"490641\", \"receiver_id\": \"bob.near\"}' --depositYocto 10000000000000000000000 --accountId bob.near\n```\n\n:::note\nIn order to use `nft_mint` method of the `x.paras.near` contract you have to be a creator of a particular token series.\n:::\n\n</TabItem>\n\n<TabItem value=\"Mintbase\" label=\"Mintbase\">\n\n```bash\nnear call thomasettorreiv.mintbase1.near nft_batch_mint '{\"num_to_mint\": 1, \"owner_id\": \"bob.near\", \"metadata\": {}}' --accountId bob.near --depositYocto 10000000000000000000000\n```\n\n:::note\nIn order to use `nft_batch_mint` method of Mintbase store contract your account have to be a in the contract minters list.\n:::\n\n</TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1214, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a18d0cf3-3365-470f-979b-4496c1f449c6": {"__data__": {"id_": "a18d0cf3-3365-470f-979b-4496c1f449c6", "embedding": null, "metadata": {"file_path": "./near_dist/epoch.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9bc6c187-19de-4588-b061-68dc80c48907", "node_type": "4", "metadata": {}, "hash": "895cfe0de1c26aacb60577de6fa8177db9be476de2eba8003d311bf9062be1e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a59aabc9-a666-438d-a445-42df0bb8250b", "node_type": "1", "metadata": {}, "hash": "0dcdb723677460e5f1590b0734d448d03cc16b9ab58966af538ca1edc151fd2d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: epoch\ntitle: Epoch\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n\nAn **epoch** is a unit of time when validators of the network remain constant. It is measured in blocks:\n\n- Both `testnet` and `mainnet` have an epoch duration of 43,200 blocks. Ideally epochs last about 12 hours, since blocks are created every second (in reality, they take slightly longer to be created).\n- You can view this setting by querying the **[`protocol_config`](/api/rpc/setup#protocol-config)** RPC endpoint and searching for `epoch_length`.\n\n**Note:** Nodes garbage collect blocks after 5 epochs (~2.5 days) unless they are [archival nodes](https://near-nodes.io/intro/node-types#archival-node).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 712, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a59aabc9-a666-438d-a445-42df0bb8250b": {"__data__": {"id_": "a59aabc9-a666-438d-a445-42df0bb8250b", "embedding": null, "metadata": {"file_path": "./near_dist/epoch.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9bc6c187-19de-4588-b061-68dc80c48907", "node_type": "4", "metadata": {}, "hash": "895cfe0de1c26aacb60577de6fa8177db9be476de2eba8003d311bf9062be1e3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a18d0cf3-3365-470f-979b-4496c1f449c6", "node_type": "1", "metadata": {}, "hash": "67c952116368e22972985106d2c739dd2694acf5b5223054dcc427a878e7817c", "class_name": "RelatedNodeInfo"}}, "text": "**Example:**\n\n<Tabs>\n\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_protocol_config\",\n  \"params\": {\n    \"finality\": \"final\"\n  }\n}\n```\n\n</TabItem>\n\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_protocol_config \\\n  params:='{\n    \"finality\": \"final\"\n  }'\n```\n\n</TabItem>\n\n</Tabs>\n\n**Example Response:**\n\n```json\n{\n    \"jsonrpc\": \"2.0\",\n    \"result\": {\n        \"protocol_version\": 44,\n        \"genesis_time\": \"2020-07-21T16:55:51.591948Z\",\n        \"chain_id\": \"mainnet\",\n        \"genesis_height\": 9820210,\n        \"num_block_producer_seats\": 100,\n        \"num_block_producer_seats_per_shard\": [\n            100\n        ],\n        \"avg_hidden_validator_seats_per_shard\": [\n            0\n        ],\n        \"dynamic_resharding\": false,\n        \"protocol_upgrade_stake_threshold\": [\n            4,\n            5\n        ],\n        \"epoch_length\": 43200,\n        \"gas_limit\": 1000000000000000,\n        \"min_gas_price\": \"1000000000\",\n        \"max_gas_price\": \"10000000000000000000000\",\n        \"block_producer_kickout_threshold\": 90,\n        \"chunk_producer_kickout_threshold\": 90,\n\n// ---- snip ----\n}\n```\n\nYou can learn more about how epochs are used to manage network validation in the [Validator FAQ](https://github.com/near/wiki/blob/master/Archive/validators/faq.md#what-is-an-epoch).\n\n:::tip Got a question?\n\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n\n:::", "mimetype": "text/plain", "start_char_idx": 714, "end_char_idx": 2324, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "79b1ca5c-5cde-4c9a-b826-665d5bcbc622": {"__data__": {"id_": "79b1ca5c-5cde-4c9a-b826-665d5bcbc622", "embedding": null, "metadata": {"file_path": "./near_dist/minter.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5", "node_type": "4", "metadata": {}, "hash": "5cae689f5b0280c84b83aba113c8ec1e004646ddecebfa8656b1f98e85168331", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f1cbde58-b09f-4afc-99b9-5daa19f70644", "node_type": "1", "metadata": {}, "hash": "feb56ddfef9cba16a58a56c2c02752cd8b8a64ab297ebc400939e19cb8bc8713", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: minter\ntitle: NFT minter\n---\n\n# NFT Minter\n\n[![Demo](https://img.shields.io/badge/Demo-Visit%20Demo-brightgreen)](https://minter.mintbase.xyz/)\n[![Deploy](https://img.shields.io/badge/Deploy-on%20Vercel-blue)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FMintbase%2Ftemplates%2Fblob%2Fmain%2Fminter)\n\nThis is a Next.js 14 frontend minter example that includes a simple interface from which you can mint nfts easily\n\n![img](https://i.imgur.com/QDJPsAA.png)\n\n:::tip Mintbase Templates\nThis is part of the [Mintbase Templates](https://templates.mintbase.xyz/), a collection of templates that you can use to scaffold your own project\n:::\n\n---\n\n## Project Walkthrough\n\nThis is a simple minter example built on top of **Next.js 14** using some of [@mintbase-js](https://github.com/Mintbase/mintbase-js) packages.\n\n*NOTE: As a standard on Mintbase as we use the latest versions of Next.js we recommend using pnpm, but the package manager is up to your personal choice.*\n\nif you dont have a store you can [deploy a new contract](https://www.mintbase.xyz/launchpad/contracts/0) on our launchpad\n\n---\n\n## Pre-Setup\nIf you would like the minter to use your own NFT contract you can easily deploy one through the mintbase market UI, additionally if you want to open up minting to be available for any person you will need to connect it to a proxy contract\n\n### Deploying a Near Contract on Mintbase:\n1. Login on Mintbase and access [Contracts Page](https://www.mintbase.xyz/launchpad/contracts/0)\n2. Click on New Contract\n3. Choose Store Name (this will be the contract address to add on your minsta instance, this need to be added on the `process.env.NEXT_PUBLIC_NFT_CONTRACT_ADDRESS` environment variable) and Store Symbol\n4. Proceed to transaction.\n5. Succeeded\n6.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1789, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f1cbde58-b09f-4afc-99b9-5daa19f70644": {"__data__": {"id_": "f1cbde58-b09f-4afc-99b9-5daa19f70644", "embedding": null, "metadata": {"file_path": "./near_dist/minter.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5", "node_type": "4", "metadata": {}, "hash": "5cae689f5b0280c84b83aba113c8ec1e004646ddecebfa8656b1f98e85168331", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79b1ca5c-5cde-4c9a-b826-665d5bcbc622", "node_type": "1", "metadata": {}, "hash": "3a666daccf0c8ec66fff15d242ba38267d707c9af79e0d705e6b72c89a672d8b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "584ddcac-12da-4edf-ab48-8f24093f7524", "node_type": "1", "metadata": {}, "hash": "967c21d7d858ef25ab9c1be2a98d3c0b7dca9cc08d4ba5b0804e40035ab34e98", "class_name": "RelatedNodeInfo"}}, "text": "Go to Contract Settings\n\n<hr class=\"subsection\" />\n\n### Add Proxy Minter Contract\n1. Under Contract Settings go to Minters\n2. add `0.drop.proxy.mintbase.near` (this is the contract address that need to be added on `process.env.NEXT_PUBLIC_PROXY_MINTER_CONTRACT_ADDRESS`), and click Add Minters.\n3. Proceed to transaction.\n4. Succeeded\n\n<hr class=\"subsection\" />\n\n### Step 1: Get the wallet connection\n\nThis method will get the wallet instance used to send the mint transaction. To learn more about this, you can check our guide at [Wallet Connection Guide](https://docs.mintbase.xyz/dev/getting-started/add-wallet-connection-to-your-react-app).\n\n```typescript\n const getWallet = async () => {\n    try {\n      return await selector.wallet();\n    } catch (error) {\n      console.error(\"Failed to retrieve the wallet:\", error);\n      throw new Error(\"Failed to retrieve the wallet\");\n    }\n  };\n  ```\n\n<hr class=\"subsection\" />\n\n### Step 2: Use the onSubmit method \n\nGet all the form data and use the onSubmit method to handle the minting process\n\n```typescript\nconst onSubmit = async (data: SubmitData) => {\n    const wallet = await getWallet();\n\n    const reference = await uploadReference({\n      title: typeof data?.title === \"string\" ? data.title : \"\",\n      media: data?.media as unknown as File,\n    });\n\n    const file = uploadFile(data?.media as unknown as File);\n\n    await handleMint(\n      reference.id,\n      file,\n      activeAccountId as string,\n      wallet,\n      reference.media_url as string,\n      data.title\n    );\n  };\n  ```\n\n<hr class=\"subsection\" />\n\n### Step 3: Upload the NFT reference\n\nThe nft reference represents the offchain data which permanently stored on IPFS on Arweave in this case you can use [@mintbase-js/data](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/data) to easily upload it to arweave.\n\nIn this not only are we uploading an offchain JSON object which contains the media as well as the title but also uploading a separate media file to be included onchain.", "mimetype": "text/plain", "start_char_idx": 1790, "end_char_idx": 3790, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "584ddcac-12da-4edf-ab48-8f24093f7524": {"__data__": {"id_": "584ddcac-12da-4edf-ab48-8f24093f7524", "embedding": null, "metadata": {"file_path": "./near_dist/minter.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5", "node_type": "4", "metadata": {}, "hash": "5cae689f5b0280c84b83aba113c8ec1e004646ddecebfa8656b1f98e85168331", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f1cbde58-b09f-4afc-99b9-5daa19f70644", "node_type": "1", "metadata": {}, "hash": "feb56ddfef9cba16a58a56c2c02752cd8b8a64ab297ebc400939e19cb8bc8713", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "708d871a-9ef1-4a6c-b768-ecccc1a63ec1", "node_type": "1", "metadata": {}, "hash": "1b5678ced23e3aec29b372507258fd65b7ed3c4c3a51e855c7dc211d28d44634", "class_name": "RelatedNodeInfo"}}, "text": "[Learn more about how references work here](https://docs.mintbase.xyz/dev/getting-started/anatomy-of-a-non-fungible-token)\n\n```typescript\nconst reference = await uploadReference({\n    title: typeof data?.title === \"string\" ? data.title : \"\",\n    media: data?.media as unknown as File,\n  });\n\n  const file = uploadFile(data?.media as unknown as File);\n```\n\n<hr class=\"subsection\" />\n\n### Step 4: Handling the mint\n\nHere we start by configuring the callback which is the link and params to where the user will be redirected after minting after signing the mint transaction on the wallet.\n\nIn this case a number of params are included to be able to show a better success page.\n\nThe argument for calling the contracts \"mint\" function is then built. This transaction will be sent to the proxy contract which then calls the nft contracts nft_batch_mint method\n\n\n  ```typescript\n   async function handleMint(\n    reference: string,\n    media: Promise<ArweaveResponse>,\n    activeAccountId: string,\n    wallet: Wallet,\n    mediaUrl: string,\n    nftTitle: string\n  ) {\n    const callbackArgs = {\n      contractAddress: MintbaseWalletSetup.contractAddress.toString(),\n      amount: 1,\n      ref: `${reference}`,\n      mediaUrl: mediaUrl,\n      title: nftTitle,\n    };\n\n    if (reference) {\n      await wallet.signAndSendTransaction({\n        signerId: activeAccountId,\n        receiverId: proxyAddress,\n        callbackUrl: cbUrl(reference, callbackArgs),\n        actions: [\n          {\n            type: \"FunctionCall\",\n            params: {\n              methodName: \"mint\",\n              args: {\n                metadata: JSON.stringify({\n                  reference,\n                  media: (await media).id,\n                }),\n                nft_contract_id: MintbaseWalletSetup.contractAddress,\n              },\n              gas: \"200000000000000\",\n              deposit: \"10000000000000000000000\",\n            },\n          },\n        ],\n      });\n    }\n  }\n\n  return { form, onSubmit, preview, setPreview };\n};\n\n```\n\nThis sums up the blockchain portion of the code\n\n<hr class=\"subsection\" />\n\n### Setup\nIn the `minter/src/config/setup.ts` file, we define several key configurations for interacting with the Mintbase platform.", "mimetype": "text/plain", "start_char_idx": 3792, "end_char_idx": 6018, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "708d871a-9ef1-4a6c-b768-ecccc1a63ec1": {"__data__": {"id_": "708d871a-9ef1-4a6c-b768-ecccc1a63ec1", "embedding": null, "metadata": {"file_path": "./near_dist/minter.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5", "node_type": "4", "metadata": {}, "hash": "5cae689f5b0280c84b83aba113c8ec1e004646ddecebfa8656b1f98e85168331", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "584ddcac-12da-4edf-ab48-8f24093f7524", "node_type": "1", "metadata": {}, "hash": "967c21d7d858ef25ab9c1be2a98d3c0b7dca9cc08d4ba5b0804e40035ab34e98", "class_name": "RelatedNodeInfo"}}, "text": "This setup is crucial for ensuring that our application communicates correctly with Mintbase smart contracts.\n\n---\n\n## ENV Variables\n\n- `proxyAddress`: This is the address of the proxy contract on Mintbase. It is either taken from the environment variable `NEXT_PUBLIC_PROXY_CONTRACT_ADDRESS` or defaults to `\"0.minsta.proxy.mintbase.testnet\"` if the environment variable is not set.\n\n- `contractAddress`: The address of the minting contract. Similar to `proxyAddress`, it is sourced from `NEXT_PUBLIC_MINT_CONTRACT_ADDRESS` or defaults to `\"test122212.mintspace2.testnet\"`.\n\n- `network`: Indicates the blockchain network we are interacting with. It defaults to `\"testnet\"` if `NEXT_PUBLIC_NETWORK` is not specified in the environment.\n\n- `callbackUrl`: A URL used for callbacks, constructed dynamically based on the `network` variable. If we are on the testnet, it uses the testnet URL; otherwise, it defaults to the mainnet URL.\n\nTo customize these configurations for different environments, you can set the following environment variables in your `.env` file:\n\n`NOTE: the env variables need to have the NEXT_PUBLIC_ on the variable name due to be available for the browser to process`\n\n- `NEXT_PUBLIC_PROXY_CONTRACT_ADDRESS`: Your proxy contract address on Mintbase.\n- `NEXT_PUBLIC_MINT_CONTRACT_ADDRESS`: Your mint contract address on Mintbase.\n- `NEXT_PUBLIC_NETWORK`: The network you want to interact with (`\"testnet\"` or `\"mainnet\"`).\n\nafter that you can run\n\n```bash\npnpm install\npnpm dev\n```\n\n---\n\n## Extending\n\nThis project is setup using Next.js + @mintbase/js\nYou can use this project as a reference to build your own, and use or remove any library you think it would suit your needs.\n\n:::info Get in touch\nYou can get in touch with the mintbase team using the following channels:\n\n- Support: [Join the Telegram](https://t.me/mintdev)\n- Twitter: [@mintbase](https://twitter.com/mintbase)\n:::", "mimetype": "text/plain", "start_char_idx": 6019, "end_char_idx": 7922, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2930de98-214d-46ca-9604-eb5a78963168": {"__data__": {"id_": "2930de98-214d-46ca-9604-eb5a78963168", "embedding": null, "metadata": {"file_path": "./near_dist/get-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "070e642c-5bd5-4405-9200-e6f9f5d6ec1d", "node_type": "4", "metadata": {}, "hash": "82f3833367387ed47a96f714388070d685792984e2dbff54db08bde384a6b603", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: Get API Keys \ntitle: Get Pagoda API Keys\n---\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\n1. Register an account on [Pagoda Console](https://console.pagoda.co/):\n\n   ![](/docs/pagoda/getkey1.png)\n\n2. Create a blank project\n\n   ![](/docs/pagoda/getkey2.png)\n\n3. Give your project a cool name\n\n   ![](/docs/pagoda/getkey3.png)\n\n4. Grab your API Key\n\n   Click the API Tab and you will see your API key already generated for you and ready to use, remember to switch networks for `MainNet` using the button on top, you can also navigate through your different projects there.\n\n   ![](/docs/pagoda/getkey4.png)\n\n5. Connect to Pagoda RPC Node\n\n   Follow the instructions on the screen to set up your Pagoda RPC Access, we have created a quick setup guide for all NEAR tools.\n   - `https://near-testnet.api.pagoda.co/rpc/v1/`\n   - `https://near-mainnet.api.pagoda.co/rpc/v1/`\n\n   ![](/docs/pagoda/getkey5.png)\n\n6. You can use this line of code for a quick test\n\n   ```sh\n   curl -X POST -H 'x-api-key:<YOUR-API-KEY>' -H 'Content-Type: application/json' -d '{\"jsonrpc\": \"2.0\", \"id\":\"dontcare\",\"method\":\"status\",\"params\":[] }' https://near-testnet.api.pagoda.co/rpc/v1/\n   ```\n\n   ![](/docs/pagoda/getkey6.png)\n\nCongrats! You are connected!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1318, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "be09aea8-81f8-4e03-860d-9c27669153a8": {"__data__": {"id_": "be09aea8-81f8-4e03-860d-9c27669153a8", "embedding": null, "metadata": {"file_path": "./near_dist/upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a", "node_type": "4", "metadata": {}, "hash": "d13ec9c1bb10f54754d1fa26f75422cba9222865a25c2154a3c6cc3168293ffc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "baab5a31-3288-47a9-a2e0-3ce546070658", "node_type": "1", "metadata": {}, "hash": "4d7dd9a80df9faff971c7e2b0ce7be51c334a2351106aa60447657205090beed", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: upgrade\ntitle: Updating Contracts\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nNEAR accounts separate their logic (contract's code) from their state (storage), allowing the code to be changed.\n\nContract's can be updated in two ways:\n\n1. **Through tools** such as [NEAR CLI](../../../4.tools/cli.md) or [near-api-js](../../../4.tools/near-api-js/quick-reference.md) (if you hold the account's [full access key](../../../1.concepts/protocol/access-keys.md)).\n2. **Programmatically**, by implementing a method that [takes the new code and deploys it](#programmatic-update).\n\n---\n\n## Updating Through Tools\n\nSimply re-deploy another contract using your preferred tool, for example, using [NEAR CLI](../../../4.tools/cli.md):\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n```bash\n# (optional) If you don't have an account, create one\nnear create-account <account-id> --useFaucet\n\n# Deploy the contract\nnear deploy <account-id> <wasm-file>\n```\n\n</TabItem>\n\n<TabItem value=\"full\" label=\"Full\">\n\n```bash\n# (optional) If you don't have an account, create one\nnear account create-account sponsor-by-faucet-service somrnd.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n\n# Deploy the contract\nnear contract deploy <accountId> use-file <route_to_wasm> without-init-call network-config testnet sign-with-keychain send\n```\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Programmatic Update\nA smart contract can also update itself by implementing a method that:\n1. Takes the new wasm contract as input\n2. Creates a Promise to deploy it on itself\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"update.rs\"\n        url=\"https://github.com/near-examples/update-migrate-rust/blob/main/self-updates/base/src/update.rs\"\n        start=\"10\" end=\"31\" />\n\n</Language>\n\n</CodeTabs>\n\n#### How to Invoke Such Method?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "baab5a31-3288-47a9-a2e0-3ce546070658": {"__data__": {"id_": "baab5a31-3288-47a9-a2e0-3ce546070658", "embedding": null, "metadata": {"file_path": "./near_dist/upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a", "node_type": "4", "metadata": {}, "hash": "d13ec9c1bb10f54754d1fa26f75422cba9222865a25c2154a3c6cc3168293ffc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "be09aea8-81f8-4e03-860d-9c27669153a8", "node_type": "1", "metadata": {}, "hash": "8d95ddad87238395ea6017ce6676cc74b9db43c2fff703d69ca8cff478a7516d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b", "node_type": "1", "metadata": {}, "hash": "d174405f6b50a76965630846b3e94afc98639de1bc67d56e1f10c91f4c0f33e0", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Near CLI (short)\">\n\n```bash\n# Load the contract's raw bytes\nCONTRACT_BYTES=`cat ./path/to/wasm.wasm | base64`\n\n# Call the update_contract method\nnear call <contract-account> update_contract \"$CONTRACT_BYTES\" --base64 --accountId <manager-account> --gas 300000000000000\n```\n\n</TabItem>\n\n<TabItem value=\"full\" label=\"Near CLI (full)\">\n\n```bash\n# Call the update_contract method\nnear contract call-function as-transaction <contract-account> update_contract file-args </path/to/wasm.wasm> prepaid-gas '300.0 Tgas' attached-deposit '0 NEAR' sign-as <manager-account> network-config testnet sign-with-keychain send\n```\n\n</TabItem>\n\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n// Load the contract's raw bytes\nconst code = fs.readFileSync(\"./path/to/wasm.wasm\");\n\n// Call the update_contract method\nawait wallet.callMethod({contractId: guestBook, method: \"update_contract\", args: code, gas: \"300000000000000\"});\n```\n\n</TabItem>\n\n</Tabs>\n\n:::tip DAO Factories\n\nThis is how DAO factories [update their contracts](https://github.com/near-daos/sputnik-dao-contract/blob/main/sputnikdao-factory2/src/factory_manager.rs#L60)\n\n:::\n\n---\n\n## Migrating the State\n\nSince the account's logic (smart contract) is separated from the account's state (storage),\n**the account's state persists** when re-deploying a contract.\n\nBecause of this, **adding methods** or **modifying existing ones** will yield **no problems**.\n\nHowever, deploying a contract that **modifies or removes structures**  stored in the state will raise an\nerror: `Cannot deserialize the contract state`, in which case you can choose to:\n1. Use a different account\n2. Rollback to the previous contract code\n3. Add a method to migrate the contract's state\n\n<hr className=\"subsection\" />\n\n### The Migration Method\n\nIf you have no option but to migrate the state, then you need to implement a method that:\n1. Reads the current state of the contract\n2.", "mimetype": "text/plain", "start_char_idx": 1964, "end_char_idx": 3922, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b": {"__data__": {"id_": "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b", "embedding": null, "metadata": {"file_path": "./near_dist/upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a", "node_type": "4", "metadata": {}, "hash": "d13ec9c1bb10f54754d1fa26f75422cba9222865a25c2154a3c6cc3168293ffc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "baab5a31-3288-47a9-a2e0-3ce546070658", "node_type": "1", "metadata": {}, "hash": "4d7dd9a80df9faff971c7e2b0ce7be51c334a2351106aa60447657205090beed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac072a10-9b2d-4a6d-bd48-cef84b9da9c2", "node_type": "1", "metadata": {}, "hash": "08623fa4665fba69c7bd3986c89e65654a32a415d458226a35805d9400c26228", "class_name": "RelatedNodeInfo"}}, "text": "Applies different functions to transform it into the new state\n3. Returns the new state\n\n:::tip DAO Update\n\nThis is how DAOs [update themselves](https://github.com/near-daos/sputnik-dao-contract/blob/main/sputnikdao2/src/upgrade.rs#L59)\n\n:::\n\n<hr className=\"subsection\" />\n\n### Example: Guest Book Migration\n\nImagine you have a Guest Book where you store messages, and the users can pay for such messages\nto be \"premium\". You keep track of the messages and payments using the following state:\n\n<CodeTabs>\n<Language value=\"js\" language=\"js\">\n\n<Github fname=\"index.js\"\n      url=\"https://github.com/near/near-sdk-js/blob/develop/examples/src/basic-updates-base.js\"\n      start=\"16\" end=\"37\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n\n<Github fname=\"lib.rs\"\n    url=\"https://github.com/near-examples/update-migrate-rust/blob/main/basic-updates/base/src/lib.rs\"\n    start=\"10\" end=\"21\" />\n\n</Language>\n\n</CodeTabs>\n\n#### Update Contract\n\nAt some point you realize that you could keep track of the `payments` inside of the `PostedMessage` itself,\nso you change the contract to:\n\n<CodeTabs>\n<Language value=\"js\" language=\"js\">\n\n<Github fname=\"index.js\"\n      url=\"https://github.com/near/near-sdk-js/blob/develop/examples/src/basic-updates-update.js\"\n      start=\"23\" end=\"45\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n\n<Github fname=\"lib.rs\"\n    url=\"https://github.com/near-examples/update-migrate-rust/blob/main/basic-updates/update/src/lib.rs\"\n    start=\"12\" end=\"23\" />\n\n</Language>\n\n</CodeTabs>\n\n#### Incompatible States\n\nIf you deploy the update into an initialized account the contract will fail to deserialize the account's state,\nbecause:\n1. There is an extra `payments` vector saved in the state (from the previous contract)\n2.", "mimetype": "text/plain", "start_char_idx": 3923, "end_char_idx": 5685, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac072a10-9b2d-4a6d-bd48-cef84b9da9c2": {"__data__": {"id_": "ac072a10-9b2d-4a6d-bd48-cef84b9da9c2", "embedding": null, "metadata": {"file_path": "./near_dist/upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a", "node_type": "4", "metadata": {}, "hash": "d13ec9c1bb10f54754d1fa26f75422cba9222865a25c2154a3c6cc3168293ffc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b", "node_type": "1", "metadata": {}, "hash": "d174405f6b50a76965630846b3e94afc98639de1bc67d56e1f10c91f4c0f33e0", "class_name": "RelatedNodeInfo"}}, "text": "The stored `PostedMessages` are missing the `payment` field (as in the previous contract)\n\n#### Migrating the State\n\nTo fix the problem, you need to implement a method that goes through the old state, removes the `payments` vector and\nadds the information to the `PostedMessages`:\n\n<CodeTabs>\n<Language value=\"js\" language=\"js\">\n\n<Github fname=\"index.js\"\n      url=\"https://github.com/near/near-sdk-js/blob/develop/examples/src/basic-updates-update.js\"\n      start=\"7\" end=\"70\" />\n\n</Language>\n\n<Language value=\"rust\" language=\"rust\">\n\n<Github fname=\"lib.rs\"\n    url=\"https://github.com/near-examples/update-migrate-rust/blob/main/basic-updates/update/src/migrate.rs\"\n    start=\"3\" end=\"46\" />\n\n</Language>\n\n</CodeTabs>\n\nNotice that `migrate` is actually an [initialization method](../anatomy/anatomy.md#initialization-method) that **ignores** the existing state (`[#init(ignore_state)]`), thus being able to execute and rewrite the state.\n\n:::tip\n\nYou can follow a migration step by step in the [official migration example](https://github.com/near-examples/update-migrate-rust/tree/main/basic-updates/base)\nJavascript migration example testfile can be found on here: [test-basic-updates.ava.js](https://github.com/near/near-sdk-js/blob/develop/examples/__tests__/test-basic-updates.ava.js), run by this command: `pnpm run test:basic-update` in examples directory.\n\n:::", "mimetype": "text/plain", "start_char_idx": 5686, "end_char_idx": 7055, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2f2c4e0d-77e1-4eec-ba31-173676568775": {"__data__": {"id_": "2f2c4e0d-77e1-4eec-ba31-173676568775", "embedding": null, "metadata": {"file_path": "./near_dist/bug_report.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5660f8c0-f8ee-461f-b42c-76bec8b11e86", "node_type": "4", "metadata": {}, "hash": "3efd2a93dfba5e0eed8d79e84b4a66a6cca7e4dacd831bad7083bd33445f4af2", "class_name": "RelatedNodeInfo"}}, "text": "---\nname: Bug report \ud83d\udc1e\nabout: Create a report to help us improve the docs\ntitle: \"[BUG] \"\nlabels: bug\nassignees: ''\n\n---\n<!-- \u26a0\ufe0f Do Not Delete This! bug_report_template \u26a0\ufe0f -->\n<!-- Please search existing issues to avoid creating duplicates. -->\n\n**Describe the bug** \ud83d\udc1e\nBriefly describe the issue you're experiencing.\n\n**Expected behavior**\nDescribe what you were expecting to find.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Location** \ud83c\udfaf\nPlease link to the page that you see this issue.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 524, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4cf4d8cf-7715-4c83-a42f-9d16f70e8c32": {"__data__": {"id_": "4cf4d8cf-7715-4c83-a42f-9d16f70e8c32", "embedding": null, "metadata": {"file_path": "./near_dist/storage-staking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "308723b6-072b-40a7-8355-29e45b489871", "node_type": "4", "metadata": {}, "hash": "6e4e52c0afe8ea355e0808672b7d602f587e08e290d6c4a29d2d385b5dff78d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b6ca282e-e652-4be1-9a3b-fad124472327", "node_type": "1", "metadata": {}, "hash": "0c2917b855b299468d430b7942637bca929c79141fb79c40362c8a804244907b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: storage-staking\ntitle: Storage Staking\nsidebar_label: Storage Staking\n---\n\n> When you deploy a smart contract to NEAR, you pay for the storage that this contract requires using a mechanism called storage staking.\n>\n> In storage staking (sometimes called _state_ staking), the account that owns a smart contract must stake (or lock) tokens according to the amount of data stored in that smart contract, effectively reducing the balance of the contract's account.\n\n<blockquote className=\"info\">\n<strong>Coming from Ethereum?</strong><br /><br />\n\nIf you\u2019re familiar with Ethereum\u2019s pricing model, you may know that, like NEAR, the protocol charges a fee (called \"gas\") for each transaction. Unlike NEAR, Ethereum's gas fee accounts for the amount of data stored via that transaction. This essentially means that anyone can pay once to store permanent data on-chain. This is a poor economic design for at least two reasons: 1. The people running the network (miners, in the case of Ethereum 1) are not appropriately incentivized to store large amounts of data, since a gas fee far charged in the distant past can increase storage costs forever, and 2. The users of a smart contract are charged for the data they send to store in it, rather than charging the owner of the smart contract.\n\n</blockquote>\n\n## How does NEAR's design align incentives?\n\nStorage-staked tokens are unavailable for other uses, such as validation staking. This increases the yield that validators will receive. Learn more in [the economics whitepaper](https://pages.near.org/papers/economics-in-sharded-blockchain/).\n\n## When do tokens get staked?\n\nOn each incoming transaction that adds data.\n\nLet's walk through an example:\n\n1. You launch [a guest book app](https://examples.near.org/guest-book), deploying your app's smart contract to the account `example.near`\n2. Visitors to your app can add messages to the guest book. This means your users will, [by default](/concepts/protocol/gas#what-about-prepaid-gas), pay a small gas fee to send their message to your contract.\n3. When such a call comes in, NEAR will check that `example.near` has a large enough balance that it can stake an amount to cover the new storage needs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2205, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b6ca282e-e652-4be1-9a3b-fad124472327": {"__data__": {"id_": "b6ca282e-e652-4be1-9a3b-fad124472327", "embedding": null, "metadata": {"file_path": "./near_dist/storage-staking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "308723b6-072b-40a7-8355-29e45b489871", "node_type": "4", "metadata": {}, "hash": "6e4e52c0afe8ea355e0808672b7d602f587e08e290d6c4a29d2d385b5dff78d9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4cf4d8cf-7715-4c83-a42f-9d16f70e8c32", "node_type": "1", "metadata": {}, "hash": "fe838705e734f8a5f4627b8cc2529c6b16cb55f750a194f42a55a3ddd8cd922b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea", "node_type": "1", "metadata": {}, "hash": "0a1462915de59a5eeb0f97d5c27f706275e4cdf76e845f91588e77e688eff849", "class_name": "RelatedNodeInfo"}}, "text": "If it does not, the transaction will fail.\n\n## The \"million cheap data additions\" attack\n\nNote that this can create an attack surface. To continue the example above, if sending data to your guest book costs users close to nothing while costing the contract owner significantly more, then a malicious user can exploit the imbalance to make maintaining the contract prohibitively expensive.\n\nTake care, then, when designing your smart contracts to ensure that such attacks cost potential attackers more than it would be worth.\n\n## btw, you can remove data to unstake some tokens\n\nPeople familiar with the \"immutable data\" narrative about blockchains find this surprising. While it's true that an _indexing node_ will keep all data forever, _validating nodes_ (that is, the nodes run by most validators in the network) do not. Smart contracts can provide ways to delete data, and this data will be purged from most nodes in the network within a few [epochs](../basics/epoch.md).\n\nNote that a call to your smart contract to remove data has an associated gas fee. Given NEAR's gas limit, this creates an upper limit on how much data can be deleted in a single transaction.\n\n## How much does it cost?\n\nStorage staking is priced in an amount set by the network, which is set to **1E19 yoctoNEAR per byte**, or **100kb per NEAR token (\u24c3)**. [^1] [^2]\n\nNEAR's JSON RPC API provides [a way to query this initial setting](/api/rpc/setup#genesis-config) as well as a [a way to query the live config / recent blocks](/api/rpc/setup#protocol-config).\n\n## Example cost breakdown\n\nLet's walk through an example.\n\nA [non-fungible token](https://github.com/near/NEPs/pull/4) is unique, which means each token has its own ID. The contract must store a mapping from token IDs to owners' account ID.\n\nIf such an NFT is used to track **1 million** tokens, how much storage will be required for the token-ID-to-owner mapping? And how many tokens will need to be staked for that storage?\n\nLet's calculate the storage needs when using a `PersistentMap` that stores data as UTF-8 strings.", "mimetype": "text/plain", "start_char_idx": 2206, "end_char_idx": 4268, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea": {"__data__": {"id_": "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea", "embedding": null, "metadata": {"file_path": "./near_dist/storage-staking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "308723b6-072b-40a7-8355-29e45b489871", "node_type": "4", "metadata": {}, "hash": "6e4e52c0afe8ea355e0808672b7d602f587e08e290d6c4a29d2d385b5dff78d9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b6ca282e-e652-4be1-9a3b-fad124472327", "node_type": "1", "metadata": {}, "hash": "0c2917b855b299468d430b7942637bca929c79141fb79c40362c8a804244907b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5185b0c0-777c-401c-bac1-caa57ebb307b", "node_type": "1", "metadata": {}, "hash": "06422c5eb8ac48a48926eb3aa26e2b81cc2511829187c4d650624add56a42a6a", "class_name": "RelatedNodeInfo"}}, "text": "Here's our `PersistentMap`:\n\n```ts\ntype AccountId = string;\ntype TokenId = u64;\nconst tokenToOwner = new PersistentMap<TokenId, AccountId>(\"t2o\");\n```\n\nBehind the scenes, all data stored on the NEAR blockchain is saved in a key-value database. That `'t2o'` variable that's passed to `PersistentMap` helps it keep track of all its values. If your account `example.near` owns token with ID `0`, then at the time of writing, here's the data that would get saved to the key-value database:\n\n- key: `t2o::0`\n- value: `example.near`\n\nSo for 1 million tokens, here are all the things we need to add up and multiply by 1 million:\n\n1. The prefix, `t2o`, will be serialized as three bytes in UTF-8, and the two colons will add another two. That's 5 bytes.\n2. For an implementation where `TokenId` auto-increments, the values will be between `0` and `999999`, which makes the average length 5 bytes.\n3. Let's assume well-formed NEAR `AccountId`s, and let's guess that NEAR Account IDs follow the approximate pattern of domain names, which [average about 10 characters](https://www.gaebler.com/Domain-Length-Research.htm), plus a top-level name like `.near`. So a reasonable average to expect might be about 15 characters; let's keep our estimate pessimistic and say 25. This will equal 25 bytes, since NEAR account IDs must use characters from the ASCII set.\n\nSo:\n\n    1_000_000 * (5 + 5 + 25)\n\n35 million bytes. 350 times 100Kib, meaning \u24c3350. To do the exact math: Multiplying by 1e19 yoctoNEAR per byte, we find that the `tokenToOwner` mapping with 35m bytes will require staking 3.5e26 yoctoNEAR, or \u24c3350\n\nNote that you can get this down to \u24c3330 just by changing the prefix from `t2o` to a single character. Or get rid of it entirely!", "mimetype": "text/plain", "start_char_idx": 4270, "end_char_idx": 5997, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5185b0c0-777c-401c-bac1-caa57ebb307b": {"__data__": {"id_": "5185b0c0-777c-401c-bac1-caa57ebb307b", "embedding": null, "metadata": {"file_path": "./near_dist/storage-staking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "308723b6-072b-40a7-8355-29e45b489871", "node_type": "4", "metadata": {}, "hash": "6e4e52c0afe8ea355e0808672b7d602f587e08e290d6c4a29d2d385b5dff78d9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea", "node_type": "1", "metadata": {}, "hash": "0a1462915de59a5eeb0f97d5c27f706275e4cdf76e845f91588e77e688eff849", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42aa4f16-38b2-40df-9fe9-2ceb4d8057ab", "node_type": "1", "metadata": {}, "hash": "b3dafb5299659834471f6d28f5c11be4d71486d88242e84e2220916c95cafc65", "class_name": "RelatedNodeInfo"}}, "text": "You can have a zero-length prefix on one `PersistentVector` in your smart contract. If you did that with this one, you could get it down to \u24c3250.\n\n## Calculate costs for your own contract\n\nDoing manual byte math as shown above is difficult and error-prone. Good news: you don't have to!\n\nYou can test the storage used using the [SDK environment](../../2.build/2.smart-contracts/anatomy/environment.md) and checking `env.storage_usage()`\n\n## Other ways to keep costs down\n\nStoring data on-chain isn't cheap for the people running the network, and NEAR passes on this cost to developers. So, how do you, as a developer, keep your costs down? There are two popular approaches:\n\n1. Use a binary serialization format, rather than JSON\n2. Store data off-chain\n\n### Use a binary serialization format, rather than JSON\n\nThe core NEAR team maintains a library called [borsh](https://borsh.io/),\nwhich is used automatically when you use `near-sdk-rs`. Someday, it will probably also be used by `near-sdk-js`.\n\nImagine that you want to store an array like `[0, 1, 2, 3]`. You could serialize it as a string and store it as UTF-8 bytes. This is what `near-sdk-js` does today. Cutting out spaces, you end up using 9 bytes.\n\nUsing borsh, this same array gets saved as 8 bytes:\n\n    \\u0004\\u0000\\u0000\\u0000\\u0000\\u0001\\u0002\\u0003\n\nAt first glance, saving 1 byte might not seem significant. But let's look closer.\n\nThe first four bytes here, `\\u0004\\u0000\\u0000\\u0000`, tell the serializer that this is a `u32` array of length `4` using little-endian encoding. The rest of the bytes are the literal numbers of the array \u2013 `\\u0000\\u0001\\u0002\\u0003`. As you serialize more elements, each will add one byte to the data structure. With JSON, each new element requires adding two bytes, to represent both another comma and the number.\n\nIn general, Borsh is faster, uses less storage, and costs less gas. Use it if you can.", "mimetype": "text/plain", "start_char_idx": 5998, "end_char_idx": 7902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42aa4f16-38b2-40df-9fe9-2ceb4d8057ab": {"__data__": {"id_": "42aa4f16-38b2-40df-9fe9-2ceb4d8057ab", "embedding": null, "metadata": {"file_path": "./near_dist/storage-staking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "308723b6-072b-40a7-8355-29e45b489871", "node_type": "4", "metadata": {}, "hash": "6e4e52c0afe8ea355e0808672b7d602f587e08e290d6c4a29d2d385b5dff78d9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5185b0c0-777c-401c-bac1-caa57ebb307b", "node_type": "1", "metadata": {}, "hash": "06422c5eb8ac48a48926eb3aa26e2b81cc2511829187c4d650624add56a42a6a", "class_name": "RelatedNodeInfo"}}, "text": "### Store data off-chain\n\nThis is especially important if you are storing user-generated data!\n\nLet's use this [Guest Book](https://github.com/near-examples/guest-book-examples) as an example. As implemented today, visitors to the app can sign in with NEAR and leave a message. Their message is stored on-chain.\n\nImagine this app got very popular, and that visitors started leaving unexpectedly long messages. The contract owner might run out of funding for storage very quickly!\n\nA better strategy could be to store data off-chain. If you want to keep the app decentralized, a popular off-chain data storage solution is [IPFS](https://ipfs.io/). With this, you can represent any set of data with a predictable content address such as:\n\n    QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG\n\nSuch a content address could represent a JSON structure or an image or any other type of data. Where does this data get physically stored? You could use [Filecoin](https://filecoin.io/) or run your own IPFS server to pin your app's data.\n\nWith this approach, each record you add to your contract will be a predictable size.\n\n## Summary\n\nNEAR's structure incentivizes network operators while giving flexibility and predictability to contract developers. Managing storage is an important aspect of smart contract design, and NEAR's libraries make it easy to figure out how much storage will cost for your application.\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"><h8>Ask it on StackOverflow!</h8></a>\n:::\n\n## Footnotes\n\n[^1]: [Storage staking price](https://gov.near.org/t/storage-staking-price/399)\n[^2]: [Lower storage cost 10x](https://github.com/near/nearcore/pull/3881)", "mimetype": "text/plain", "start_char_idx": 7904, "end_char_idx": 9652, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0d5e3417-4bd3-4826-bf19-12ee0ff8e55b": {"__data__": {"id_": "0d5e3417-4bd3-4826-bf19-12ee0ff8e55b", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "52f25481-34e2-40db-a929-4617b6bb9fd3", "node_type": "1", "metadata": {}, "hash": "1e80151ef00a0cad2b4976a11013863622cebfddcb9f45f130f2f78ff3532a77", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: transactions\ntitle: RPC Endpoints\nsidebar_label: Transactions\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to send transactions and query their status.\n\n---\n\n## Send transaction {#send-tx}\n\n> Sends transaction.\n> Returns the guaranteed execution status and the results the blockchain can provide at the moment.\n\n- method: `send_tx`\n- params: \n  - `signed_tx_base64`: SignedTransaction encoded in base64\n  - [Optional] `wait_until`: the required minimal execution level. [Read more here](#tx-status-result). The default value is `EXECUTED_OPTIMISTIC`.\n\nUsing `send_tx` with `wait_until = NONE` is equal to legacy `broadcast_tx_async` method.  \nUsing `send_tx` with finality `wait_until = EXECUTED_OPTIMISTIC` is equal to legacy `broadcast_tx_commit` method.\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"send_tx\",\n  \"params\": {\n    \"signed_tx_base64\": \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDwAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldNMnL7URB1cxPOu3G8jTqlEwlcasagIbKlAJlF5ywVFLAQAAAAMAAACh7czOG8LTAAAAAAAAAGQcOG03xVSFQFjoagOb4NBBqWhERnnz45LY4+52JgZhm1iQKz7qAdPByrGFDQhQ2Mfga8RlbysuQ8D8LlA6bQE=\",\n    \"wait_until\": \"INCLUDED_FINAL\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1415, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52f25481-34e2-40db-a929-4617b6bb9fd3": {"__data__": {"id_": "52f25481-34e2-40db-a929-4617b6bb9fd3", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0d5e3417-4bd3-4826-bf19-12ee0ff8e55b", "node_type": "1", "metadata": {}, "hash": "b9c585180f687932c7c7b21096e919de63e569e29f631a7eb94a81e9f553d6d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "066349e4-5804-4e7f-94f9-7d3a879e5228", "node_type": "1", "metadata": {}, "hash": "cd8453747944890fa2bfd73a8791798ef3bb2abf3918d9c7f15ea18f96a97d15", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=send_tx \\\n    params:='{\n      \"signed_tx_base64\": \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDwAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldNMnL7URB1cxPOu3G8jTqlEwlcasagIbKlAJlF5ywVFLAQAAAAMAAACh7czOG8LTAAAAAAAAAGQcOG03xVSFQFjoagOb4NBBqWhERnnz45LY4+52JgZhm1iQKz7qAdPByrGFDQhQ2Mfga8RlbysuQ8D8LlA6bQE=\",\n      \"wait_until\": \"EXECUTED\"\n    }'\n```\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=send_tx \\\n    params:='{\n      \"signed_tx_base64\": \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDwAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldNMnL7URB1cxPOu3G8jTqlEwlcasagIbKlAJlF5ywVFLAQAAAAMAAACh7czOG8LTAAAAAAAAAGQcOG03xVSFQFjoagOb4NBBqWhERnnz45LY4+52JgZhm1iQKz7qAdPByrGFDQhQ2Mfga8RlbysuQ8D8LlA6bQE=\"\n    }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"final_execution_status\": \"FINAL\",", "mimetype": "text/plain", "start_char_idx": 1415, "end_char_idx": 2361, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "066349e4-5804-4e7f-94f9-7d3a879e5228": {"__data__": {"id_": "066349e4-5804-4e7f-94f9-7d3a879e5228", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "52f25481-34e2-40db-a929-4617b6bb9fd3", "node_type": "1", "metadata": {}, "hash": "1e80151ef00a0cad2b4976a11013863622cebfddcb9f45f130f2f78ff3532a77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "66960c4c-44ba-4802-aef3-7d34a514e342", "node_type": "1", "metadata": {}, "hash": "393d7f658730e86ba6c9602b0cab4cba0d0c89f1e8a0a0aa64575c9cab4223e7", "class_name": "RelatedNodeInfo"}}, "text": "\"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"signer_id\": \"sender.testnet\",\n      \"public_key\": \"ed25519:Gowpa4kXNyTMRKgt5W7147pmcc2PxiFic8UHW9rsNvJ6\",\n      \"nonce\": 13,\n      \"receiver_id\": \"receiver.testnet\",\n      \"actions\": [\n        {\n          \"Transfer\": {\n            \"deposit\": \"1000000000000000000000000\"\n          }\n        }\n      ],\n      \"signature\": \"ed25519:7oCBMfSHrZkT7tzPDBxxCd3tWFhTES38eks3MCZMpYPJRfPWKxJsvmwQiVBBxRLoxPTnXVaMU2jPV3MdFKZTobH\",\n      \"hash\": \"ASS7oYwGiem9HaNwJe6vS2kznx2CxueKDvU9BAYJRjNR\"\n    },\n    \"transaction_outcome\": {\n      \"proof\": [],\n      \"block_hash\": \"9MzuZrRPW1BGpFnZJUJg6SzCrixPpJDfjsNeUobRXsLe\",\n      \"id\": \"ASS7oYwGiem9HaNwJe6vS2kznx2CxueKDvU9BAYJRjNR\",\n      \"outcome\": {\n        \"logs\": [],\n        \"receipt_ids\": [\"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\"],\n        \"gas_burnt\": 223182562500,\n        \"tokens_burnt\": \"22318256250000000000\",\n        \"executor_id\": \"sender.testnet\",\n        \"status\": {\n          \"SuccessReceiptId\": \"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\"\n        }\n      }\n    },\n    \"receipts_outcome\": [\n      {\n        \"proof\": [],", "mimetype": "text/plain", "start_char_idx": 2366, "end_char_idx": 3513, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "66960c4c-44ba-4802-aef3-7d34a514e342": {"__data__": {"id_": "66960c4c-44ba-4802-aef3-7d34a514e342", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "066349e4-5804-4e7f-94f9-7d3a879e5228", "node_type": "1", "metadata": {}, "hash": "cd8453747944890fa2bfd73a8791798ef3bb2abf3918d9c7f15ea18f96a97d15", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "57c2ace6-9959-46da-a2d8-4302114efa9a", "node_type": "1", "metadata": {}, "hash": "8fb445a5d6e04f48da816fe54d4520f66ad9e6ac74a880d406398e57bfe816c6", "class_name": "RelatedNodeInfo"}}, "text": "\"block_hash\": \"5Hpj1PeCi32ZkNXgiD1DrW4wvW4Xtic74DJKfyJ9XL3a\",\n        \"id\": \"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [\"3sawynPNP8UkeCviGqJGwiwEacfPyxDKRxsEWPpaUqtR\"],\n          \"gas_burnt\": 223182562500,\n          \"tokens_burnt\": \"22318256250000000000\",\n          \"executor_id\": \"receiver.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      },\n      {\n        \"proof\": [],\n        \"block_hash\": \"CbwEqMpPcu6KwqVpBM3Ry83k6M4H1FrJjES9kBXThcRd\",\n        \"id\": \"3sawynPNP8UkeCviGqJGwiwEacfPyxDKRxsEWPpaUqtR\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"gas_burnt\": 0,\n          \"tokens_burnt\": \"0\",\n          \"executor_id\": \"sender.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-send-tx}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 3522, "end_char_idx": 4823, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "57c2ace6-9959-46da-a2d8-4302114efa9a": {"__data__": {"id_": "57c2ace6-9959-46da-a2d8-4302114efa9a", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "66960c4c-44ba-4802-aef3-7d34a514e342", "node_type": "1", "metadata": {}, "hash": "393d7f658730e86ba6c9602b0cab4cba0d0c89f1e8a0a0aa64575c9cab4223e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3788a3fe-92f6-44a2-a007-75e6286f3216", "node_type": "1", "metadata": {}, "hash": "e7aceda6303197886ad89640764fcfa4a8c811285bcd6b81d2c05b4e74136418", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `broadcast_tx_commit` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>INVALID_TRANSACTION</td>\n      <td>200</td>\n      <td>An error happened during transaction execution</td>\n      <td>\n        <ul>\n          <li>See <code>error.cause.info</code> for details, likely a field in the transaction was invalid</li>\n          <li>If <code>error.cause.info</code> is <code>ShardCongested</code>, resubmit the identical transaction after a delay. (Consider adding a priority fee once [NEP-541](https://github.com/near/NEPs/pull/541) is released.", "mimetype": "text/plain", "start_char_idx": 4826, "end_char_idx": 6222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3788a3fe-92f6-44a2-a007-75e6286f3216": {"__data__": {"id_": "3788a3fe-92f6-44a2-a007-75e6286f3216", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "57c2ace6-9959-46da-a2d8-4302114efa9a", "node_type": "1", "metadata": {}, "hash": "8fb445a5d6e04f48da816fe54d4520f66ad9e6ac74a880d406398e57bfe816c6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01fb1edb-ff0f-4b70-987a-4ae741408fce", "node_type": "1", "metadata": {}, "hash": "d602f86017ddb625cdb68d17b9cf0b57715cb9fe52accd9bb61f7923a6330c7e", "class_name": "RelatedNodeInfo"}}, "text": ")</li>\n          <li>If <code>error.cause.info</code> is <code>ShardStuck</code>, you may also resubmit the identical transaction after a delay</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>TIMEOUT_ERROR</td>\n      <td>408</td>\n      <td>Transaction was routed, but has not been recorded on chain in 10 seconds.</td>\n      <td>\n        <ul>\n          <li> Resubmit the request with the identical transaction (in NEAR Protocol unique transactions apply exactly once, so if the previously sent transaction gets applied, this request will just return the known result, otherwise, it will route the transaction to the chain once again)</li>\n          <li>Check that your transaction is valid</li>\n          <li>Check that the signer account id has enough tokens to cover the transaction fees (keep in mind that some tokens on each account are locked to cover the storage cost)</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Transaction Status {#transaction-status}\n\n> Queries status of a transaction by hash and returns the final transaction result.", "mimetype": "text/plain", "start_char_idx": 6222, "end_char_idx": 8109, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01fb1edb-ff0f-4b70-987a-4ae741408fce": {"__data__": {"id_": "01fb1edb-ff0f-4b70-987a-4ae741408fce", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3788a3fe-92f6-44a2-a007-75e6286f3216", "node_type": "1", "metadata": {}, "hash": "e7aceda6303197886ad89640764fcfa4a8c811285bcd6b81d2c05b4e74136418", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b6f3abe5-8ad2-4554-826f-f3bd96beb74a", "node_type": "1", "metadata": {}, "hash": "8e6ed04b6cc4667be69d5f62cadeca4decd02d3c409444c6a8340f745fdc5e6a", "class_name": "RelatedNodeInfo"}}, "text": "- method: `tx`\n- params:\n  - `tx_hash` _(see [NearBlocks Explorer](https://testnet.nearblocks.io) for a valid transaction hash)_\n  - `sender_account_id` _(used to determine which shard to query for transaction)_\n  - [Optional] `wait_until`: the required minimal execution level. Read more [here](/api/rpc/transactions#tx-status-result). The default value is `EXECUTED_OPTIMISTIC`.\n\nA Transaction status request with `wait_until != NONE` will wait until the transaction appears on the blockchain.\nIf the transaction does not exist, the method will wait until the timeout is reached.\nIf you only need to check whether the transaction exists, use `wait_until = NONE`, it will return the response immediately.\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"tx\",\n  \"params\": {\n    \"tx_hash\": \"6zgh2u9DqHHiXzdy9ouTP7oGky2T4nugqzqt9wJZwNFm\",\n    \"sender_account_id\": \"sender.testnet\",\n    \"wait_until\": \"EXECUTED\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=tx \\\n    params:='{\"tx_hash\": \"6zgh2u9DqHHiXzdy9ouTP7oGky2T4nugqzqt9wJZwNFm\", \"sender_account_id\": \"sender.testnet\"}'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example Result:</summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"final_execution_status\": \"FINAL\",\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"signer_id\": \"sender.testnet\",", "mimetype": "text/plain", "start_char_idx": 8111, "end_char_idx": 9617, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b6f3abe5-8ad2-4554-826f-f3bd96beb74a": {"__data__": {"id_": "b6f3abe5-8ad2-4554-826f-f3bd96beb74a", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01fb1edb-ff0f-4b70-987a-4ae741408fce", "node_type": "1", "metadata": {}, "hash": "d602f86017ddb625cdb68d17b9cf0b57715cb9fe52accd9bb61f7923a6330c7e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c", "node_type": "1", "metadata": {}, "hash": "954c61fdcef65b1d99ad75b2c8217e25279edd22b15bfb126c71d2ea5d3064b4", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:Gowpa4kXNyTMRKgt5W7147pmcc2PxiFic8UHW9rsNvJ6\",\n      \"nonce\": 15,\n      \"receiver_id\": \"receiver.testnet\",\n      \"actions\": [\n        {\n          \"Transfer\": {\n            \"deposit\": \"1000000000000000000000000\"\n          }\n        }\n      ],\n      \"signature\": \"ed25519:3168QMdTpcwHvM1dmMYBc8hg9J3Wn8n7MWBSE9WrEpns6P5CaY87RM6k4uzyBkQuML38CZhU18HzmQEevPG1zCvk\",\n      \"hash\": \"6zgh2u9DqHHiXzdy9ouTP7oGky2T4nugqzqt9wJZwNFm\"\n    },\n    \"transaction_outcome\": {\n      \"proof\": [\n        {\n          \"hash\": \"F7mL76CMdfbdZ3xCehVGNh1fCyaR37gr3MeGX3EZkiVf\",\n          \"direction\": \"Right\"\n        }\n      ],\n      \"block_hash\": \"ADTMLVtkhsvzUxuf6m87Pt1dnF5vi1yY7ftxmNpFx7y\",\n      \"id\": \"6zgh2u9DqHHiXzdy9ouTP7oGky2T4nugqzqt9wJZwNFm\",\n      \"outcome\": {\n        \"logs\": [],\n        \"receipt_ids\": [\"3dMfwczW5GQqXbD9GMTnmf8jy5uACxG6FC5dWxm3KcXT\"],\n        \"gas_burnt\": 223182562500,\n        \"tokens_burnt\": \"22318256250000000000\",\n        \"executor_id\": \"sender.testnet\",", "mimetype": "text/plain", "start_char_idx": 9624, "end_char_idx": 10610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c": {"__data__": {"id_": "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b6f3abe5-8ad2-4554-826f-f3bd96beb74a", "node_type": "1", "metadata": {}, "hash": "8e6ed04b6cc4667be69d5f62cadeca4decd02d3c409444c6a8340f745fdc5e6a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "663e204f-9d91-46ab-b7ed-eb8b0a018576", "node_type": "1", "metadata": {}, "hash": "4c683c4c5619601aebedae9825edda22d1bcae05f05dab55b5c617e497bfd8fa", "class_name": "RelatedNodeInfo"}}, "text": "\"status\": {\n          \"SuccessReceiptId\": \"3dMfwczW5GQqXbD9GMTnmf8jy5uACxG6FC5dWxm3KcXT\"\n        }\n      }\n    },\n    \"receipts_outcome\": [\n      {\n        \"proof\": [\n          {\n            \"hash\": \"6h95oEd7ih62KXfyPT4zsZYont4qy9sWEXc5VQVDhqtG\",\n            \"direction\": \"Right\"\n          },\n          {\n            \"hash\": \"6DnibgZk1T669ZprcehUy1GpCSPw1kjzXRGu69nSaUNn\",\n            \"direction\": \"Right\"\n          }\n        ],\n        \"block_hash\": \"GgFTVr33r4MrpAiHc9mr8TZqLnpZAX1BaZTNvhBnciy2\",\n        \"id\": \"3dMfwczW5GQqXbD9GMTnmf8jy5uACxG6FC5dWxm3KcXT\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [\"46KYgN8ddxs4Qy8C7BDQH49XUfcYZsaQmAvdU1nfcL9V\"],\n          \"gas_burnt\": 223182562500,\n          \"tokens_burnt\": \"22318256250000000000\",\n          \"executor_id\": \"receiver.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      },\n      {\n        \"proof\": [\n          {\n            \"hash\": \"CD9Y7Bw3MSFgaPZzpc1yP51ajhGDCAsR61qXcMNcRoHf\",\n            \"direction\": \"Left\"\n          }\n        ],\n        \"block_hash\": \"EGAgKuW6Bd6QKYSaxAkx2pPGmnjrjAcq4UpoUiqMXvPH\",", "mimetype": "text/plain", "start_char_idx": 10619, "end_char_idx": 11745, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "663e204f-9d91-46ab-b7ed-eb8b0a018576": {"__data__": {"id_": "663e204f-9d91-46ab-b7ed-eb8b0a018576", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c", "node_type": "1", "metadata": {}, "hash": "954c61fdcef65b1d99ad75b2c8217e25279edd22b15bfb126c71d2ea5d3064b4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e062d97-ae51-4ec2-84df-24e17d34748c", "node_type": "1", "metadata": {}, "hash": "3019afcd2f7c552ace73e7775936f1cb97459883f6f9e46881cb16b399a7613a", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"46KYgN8ddxs4Qy8C7BDQH49XUfcYZsaQmAvdU1nfcL9V\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"gas_burnt\": 0,\n          \"tokens_burnt\": \"0\",\n          \"executor_id\": \"sender.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-2}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 11754, "end_char_idx": 12948, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0e062d97-ae51-4ec2-84df-24e17d34748c": {"__data__": {"id_": "0e062d97-ae51-4ec2-84df-24e17d34748c", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "663e204f-9d91-46ab-b7ed-eb8b0a018576", "node_type": "1", "metadata": {}, "hash": "4c683c4c5619601aebedae9825edda22d1bcae05f05dab55b5c617e497bfd8fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "43608d91-39d0-41e1-a932-e6da440a10d9", "node_type": "1", "metadata": {}, "hash": "3878729e311279acc1f21d1678878d99b53964cde94a9d7e7297cd180d9f04c5", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `tx` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"3\">HANDLER_ERROR</td>\n      <td>INVALID_TRANSACTION</td>\n      <td>200</td>\n      <td>An error happened during transaction execution</td>\n      <td>\n        <ul>\n          <li>See <code>error.cause.info</code> for details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_TRANSACTION</td>\n      <td>200</td>\n      <td>The requested transaction is not available on the node since it might have not been recorded on the chain yet or has been garbage-collected</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>If the transaction had been submitted more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n          <li>Check the transaction hash</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>TIMEOUT_ERROR</td>\n      <td>408</td>\n      <td>It was unable to wait for the transaction status for reasonable time</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node</li>\n          <li>Try again later</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 12950, "end_char_idx": 14726, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "43608d91-39d0-41e1-a932-e6da440a10d9": {"__data__": {"id_": "43608d91-39d0-41e1-a932-e6da440a10d9", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0e062d97-ae51-4ec2-84df-24e17d34748c", "node_type": "1", "metadata": {}, "hash": "3019afcd2f7c552ace73e7775936f1cb97459883f6f9e46881cb16b399a7613a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f5a0716e-bf5e-44af-afba-744946bfce71", "node_type": "1", "metadata": {}, "hash": "73cbb88cd75880b07673c6e4147c603d91854ad90dbd6e02e4622d0e4d3232fc", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Transaction Status with Receipts {#transaction-status-with-receipts}\n\n> Queries status of a transaction by hash, returning the final transaction result _and_ details of all receipts.\n\n- method: `EXPERIMENTAL_tx_status`\n- params:\n  - `tx_hash` _(see [NearBlocks Explorer](https://testnet.nearblocks.io) for a valid transaction hash)_\n  - `sender_account_id` _(used to determine which shard to query for transaction)_\n  - [Optional] `wait_until`: the required minimal execution level. Read more [here](/api/rpc/transactions#tx-status-result). The default value is `EXECUTED_OPTIMISTIC`.\n\nA Transaction status request with `wait_until != NONE` will wait until the transaction appears on the blockchain.\nIf the transaction does not exist, the method will wait until the timeout is reached.\nIf you only need to check whether the transaction exists, use `wait_until = NONE`, it will return the response immediately.\n\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_tx_status\",\n  \"params\": {\n    \"tx_hash\": \"HEgnVQZfs9uJzrqTob4g2Xmebqodq9waZvApSkrbcAhd\",\n    \"sender_account_id\": \"bowen\",", "mimetype": "text/plain", "start_char_idx": 14726, "end_char_idx": 16518, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f5a0716e-bf5e-44af-afba-744946bfce71": {"__data__": {"id_": "f5a0716e-bf5e-44af-afba-744946bfce71", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43608d91-39d0-41e1-a932-e6da440a10d9", "node_type": "1", "metadata": {}, "hash": "3878729e311279acc1f21d1678878d99b53964cde94a9d7e7297cd180d9f04c5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1", "node_type": "1", "metadata": {}, "hash": "8e5ca6a7e848d3bdcf1df51b99ace250e4503cd091298bb38a07d9209d8e008f", "class_name": "RelatedNodeInfo"}}, "text": "\"wait_until\": \"EXECUTED\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=EXPERIMENTAL_tx_status params:='{\"tx_hash\": \"HEgnVQZfs9uJzrqTob4g2Xmebqodq9waZvApSkrbcAhd\", \"sender_account_id\": \"bowen\"}' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response:</summary>\n<p>\n\n```json\n{\n  \"id\": \"123\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"final_execution_status\": \"FINAL\",\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"bowen\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJhbW91bnQiOiIxMDAwIiwicmVjZWl2ZXJfaWQiOiJib3dlbiJ9\",\n                  \"deposit\": \"0\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"bowen\",\n            \"signer_public_key\": \"ed25519:2f9Zv5kuyuPM5DCyEP5pSqg58NQ8Ct9uSRerZXnCS9fK\"\n          }\n        },\n        \"receipt_id\": \"FXMVxdhSUZaZftbmPJWaoqhEB9GrKB2oqg9Wgvuyvom8\",\n        \"receiver_id\": \"evgeny.lockup.m0\"\n      },\n      {\n        \"predecessor_id\": \"evgeny.lockup.m0\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"1000\"\n                }\n              }\n            ],", "mimetype": "text/plain", "start_char_idx": 16523, "end_char_idx": 18046, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1": {"__data__": {"id_": "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f5a0716e-bf5e-44af-afba-744946bfce71", "node_type": "1", "metadata": {}, "hash": "73cbb88cd75880b07673c6e4147c603d91854ad90dbd6e02e4622d0e4d3232fc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d6747ba-3e2a-4911-9d75-241a3e7a6c00", "node_type": "1", "metadata": {}, "hash": "32328c9762b663f5360e4f04341c216c76e8b3cd1216a436fbfec1f66dfbc972", "class_name": "RelatedNodeInfo"}}, "text": "\"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"bowen\",\n            \"signer_public_key\": \"ed25519:2f9Zv5kuyuPM5DCyEP5pSqg58NQ8Ct9uSRerZXnCS9fK\"\n          }\n        },\n        \"receipt_id\": \"3Ad7pUygUegMUWUb1rEazfjnTaHfptXCABqKQ6WNq6Wa\",\n        \"receiver_id\": \"bowen\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"19200274886926125000\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"bowen\",\n            \"signer_public_key\": \"ed25519:2f9Zv5kuyuPM5DCyEP5pSqg58NQ8Ct9uSRerZXnCS9fK\"\n          }\n        },\n        \"receipt_id\": \"5DdQg9pfoJMX1q6bvhsjyyRihzA3sb9Uq5K1J7vK43Ze\",\n        \"receiver_id\": \"bowen\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18663792669276228632284\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"bowen\",\n            \"signer_public_key\": \"ed25519:2f9Zv5kuyuPM5DCyEP5pSqg58NQ8Ct9uSRerZXnCS9fK\"\n          }\n        },", "mimetype": "text/plain", "start_char_idx": 18059, "end_char_idx": 19545, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d6747ba-3e2a-4911-9d75-241a3e7a6c00": {"__data__": {"id_": "9d6747ba-3e2a-4911-9d75-241a3e7a6c00", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1", "node_type": "1", "metadata": {}, "hash": "8e5ca6a7e848d3bdcf1df51b99ace250e4503cd091298bb38a07d9209d8e008f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b91e421-c96e-4713-93a3-258d0098404c", "node_type": "1", "metadata": {}, "hash": "6d0e9a6a2bb00614c476d2ac3aa6e84ec9a149e0aba3ab4bc313f150b71d83e2", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_id\": \"FDp8ovTf5uJYDFemW5op6ebjCT2n4CPExHYie3S1h4qp\",\n        \"receiver_id\": \"bowen\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"HuqYrYsC7h2VERFMgFkqaNqSiFuTH9CA3uJr3BkyNxhF\",\n        \"id\": \"FXMVxdhSUZaZftbmPJWaoqhEB9GrKB2oqg9Wgvuyvom8\",\n        \"outcome\": {\n          \"executor_id\": \"evgeny.lockup.m0\",\n          \"gas_burnt\": 3493189769144,\n          \"logs\": [\"Transferring 1000 to account @bowen\"],\n          \"receipt_ids\": [\n            \"3Ad7pUygUegMUWUb1rEazfjnTaHfptXCABqKQ6WNq6Wa\",\n            \"FDp8ovTf5uJYDFemW5op6ebjCT2n4CPExHYie3S1h4qp\"\n          ],\n          \"status\": {\n            \"SuccessReceiptId\": \"3Ad7pUygUegMUWUb1rEazfjnTaHfptXCABqKQ6WNq6Wa\"\n          },\n          \"tokens_burnt\": \"349318976914400000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"5WwHEszBcpfrHnt2VTvVDVnEEACNq5EpQdjz1aW9gTAa\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"DJ6oK5FtPPSwksS6pKdEjFvHWAaSVocnVNLoyi8aYk1k\",\n        \"id\": \"3Ad7pUygUegMUWUb1rEazfjnTaHfptXCABqKQ6WNq6Wa\",\n        \"outcome\": {\n          \"executor_id\": \"bowen\",", "mimetype": "text/plain", "start_char_idx": 19554, "end_char_idx": 20682, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b91e421-c96e-4713-93a3-258d0098404c": {"__data__": {"id_": "2b91e421-c96e-4713-93a3-258d0098404c", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d6747ba-3e2a-4911-9d75-241a3e7a6c00", "node_type": "1", "metadata": {}, "hash": "32328c9762b663f5360e4f04341c216c76e8b3cd1216a436fbfec1f66dfbc972", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4", "node_type": "1", "metadata": {}, "hash": "279d613e76c9db7ee259ad85b7445cad9aab1193ccb6ac24d9e536b76c244738", "class_name": "RelatedNodeInfo"}}, "text": "\"gas_burnt\": 223182562500,\n          \"logs\": [],\n          \"receipt_ids\": [\"5DdQg9pfoJMX1q6bvhsjyyRihzA3sb9Uq5K1J7vK43Ze\"],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"22318256250000000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"CXSXmKpDU8R3UUrBAsffWMeGfKanKqEHCQrHeZkR3RKT\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"2dNo7A1VHKBmMA86m1k3Z9DVXwWgQJGkKGRg8wUR3co9\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"9cjUoqAksMbs7ZJ4CXiuwm8vppz9QctTwGmgwZ5mDmUA\",\n        \"id\": \"5DdQg9pfoJMX1q6bvhsjyyRihzA3sb9Uq5K1J7vK43Ze\",\n        \"outcome\": {\n          \"executor_id\": \"bowen\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"DJ6oK5FtPPSwksS6pKdEjFvHWAaSVocnVNLoyi8aYk1k\",\n        \"id\": \"FDp8ovTf5uJYDFemW5op6ebjCT2n4CPExHYie3S1h4qp\",\n        \"outcome\": {\n          \"executor_id\": \"bowen\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],", "mimetype": "text/plain", "start_char_idx": 20693, "end_char_idx": 21911, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4": {"__data__": {"id_": "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b91e421-c96e-4713-93a3-258d0098404c", "node_type": "1", "metadata": {}, "hash": "6d0e9a6a2bb00614c476d2ac3aa6e84ec9a149e0aba3ab4bc313f150b71d83e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "56321410-6139-4b43-a73f-b9bc410e94d2", "node_type": "1", "metadata": {}, "hash": "0425f525aecb3a1be4472c8bd857e57b59110f90770fc199a25a574d7f04b17a", "class_name": "RelatedNodeInfo"}}, "text": "\"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"A2Ry6NCeuK8WhRCWc41hy6uddadc5nLJ1NBX5wVYo3Yb\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"2dNo7A1VHKBmMA86m1k3Z9DVXwWgQJGkKGRg8wUR3co9\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJhbW91bnQiOiIxMDAwIiwicmVjZWl2ZXJfaWQiOiJib3dlbiJ9\",\n            \"deposit\": \"0\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"transfer\"\n          }\n        }\n      ],\n      \"hash\": \"HEgnVQZfs9uJzrqTob4g2Xmebqodq9waZvApSkrbcAhd\",\n      \"nonce\": 77,\n      \"public_key\": \"ed25519:2f9Zv5kuyuPM5DCyEP5pSqg58NQ8Ct9uSRerZXnCS9fK\",\n      \"receiver_id\": \"evgeny.lockup.m0\",\n      \"signature\": \"ed25519:5v1hJuw5RppKGezJHBFU6z3hwmmdferETud9rUbwxVf6xSBAWyiod93Lezaq4Zdcp4zbukDusQY9PjhV47JVCgBx\",\n      \"signer_id\": \"bowen\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"9RX2pefXKw8M4EYjLznDF3AMvbkf9asAjN8ACK7gxKsa\",", "mimetype": "text/plain", "start_char_idx": 21922, "end_char_idx": 23095, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "56321410-6139-4b43-a73f-b9bc410e94d2": {"__data__": {"id_": "56321410-6139-4b43-a73f-b9bc410e94d2", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4", "node_type": "1", "metadata": {}, "hash": "279d613e76c9db7ee259ad85b7445cad9aab1193ccb6ac24d9e536b76c244738", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41e55d0d-5f09-4299-b3d1-82310c52c21b", "node_type": "1", "metadata": {}, "hash": "14c300cf5edaad6994190aae497cc9ece5f96ba5914f591b368bdd269d8f1166", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"HEgnVQZfs9uJzrqTob4g2Xmebqodq9waZvApSkrbcAhd\",\n      \"outcome\": {\n        \"executor_id\": \"bowen\",\n        \"gas_burnt\": 2428026088898,\n        \"logs\": [],\n        \"receipt_ids\": [\"FXMVxdhSUZaZftbmPJWaoqhEB9GrKB2oqg9Wgvuyvom8\"],\n        \"status\": {\n          \"SuccessReceiptId\": \"FXMVxdhSUZaZftbmPJWaoqhEB9GrKB2oqg9Wgvuyvom8\"\n        },\n        \"tokens_burnt\": \"242802608889800000000\"\n      },\n      \"proof\": [\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"DXf4XVmAF5jnjZhcxi1CYxGPuuQrcAmayq9X5inSAYvJ\"\n        }\n      ]\n    }\n  }\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-3}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 23102, "end_char_idx": 24508, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "41e55d0d-5f09-4299-b3d1-82310c52c21b": {"__data__": {"id_": "41e55d0d-5f09-4299-b3d1-82310c52c21b", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "56321410-6139-4b43-a73f-b9bc410e94d2", "node_type": "1", "metadata": {}, "hash": "0425f525aecb3a1be4472c8bd857e57b59110f90770fc199a25a574d7f04b17a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc690d9e-82ef-491c-83e0-c9f8b615e6d8", "node_type": "1", "metadata": {}, "hash": "951743a1ae4892f5b6a9205d7c7ed81dd5b024e64d7061b3de957e958dc3e6dd", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_tx_status` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"3\">HANDLER_ERROR</td>\n      <td>INVALID_TRANSACTION</td>\n      <td>200</td>\n      <td>An error happened during transaction execution</td>\n      <td>\n        <ul>\n          <li>See <code>error.cause.info</code> for details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_TRANSACTION</td>\n      <td>200</td>\n      <td>The requested transaction is not available on the node since it might have not been recorded on the chain yet or has been garbage-collected</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>If the transaction had been submitted more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n          <li>Check the transaction hash</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>TIMEOUT_ERROR</td>\n      <td>408</td>\n      <td>It was unable to wait for the transaction status for reasonable time</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node</li>\n          <li>Try again later</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 24510, "end_char_idx": 26306, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc690d9e-82ef-491c-83e0-c9f8b615e6d8": {"__data__": {"id_": "bc690d9e-82ef-491c-83e0-c9f8b615e6d8", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41e55d0d-5f09-4299-b3d1-82310c52c21b", "node_type": "1", "metadata": {}, "hash": "14c300cf5edaad6994190aae497cc9ece5f96ba5914f591b368bdd269d8f1166", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b666083-b310-4401-88ca-c9b796ee0fbb", "node_type": "1", "metadata": {}, "hash": "f188a023b18120130bf758f0d39d2db17577362696601a7d9fcb302094b54e60", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n### Receipt by ID {#receipt-by-id}\n\n> Fetches a receipt by it's ID (as is, without a status or execution outcome)\n\n- method: `EXPERIMENTAL_receipt`\n- params:\n  - `receipt_id` _(see [NearBlocks Explorer](https://testnet.nearblocks.io) for a valid receipt id)_\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_receipt\",\n  \"params\": { \"receipt_id\": \"2EbembRPJhREPtmHCrGv3Xtdm3xoc5BMVYHm3b2kjvMY\" }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=EXPERIMENTAL_receipt params:='{\"receipt_id\": \"2EbembRPJhREPtmHCrGv3Xtdm3xoc5BMVYHm3b2kjvMY\"}' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response:</summary>\n<p>\n\n```json\n{\n  \"id\": \"dontcare\",\n  \"jsonrpc\": \"2.0\",", "mimetype": "text/plain", "start_char_idx": 26306, "end_char_idx": 27763, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b666083-b310-4401-88ca-c9b796ee0fbb": {"__data__": {"id_": "9b666083-b310-4401-88ca-c9b796ee0fbb", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc690d9e-82ef-491c-83e0-c9f8b615e6d8", "node_type": "1", "metadata": {}, "hash": "951743a1ae4892f5b6a9205d7c7ed81dd5b024e64d7061b3de957e958dc3e6dd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1e35ebbe-ca91-42be-90b2-492307d76242", "node_type": "1", "metadata": {}, "hash": "a3e6b6721ee3a53d1536f6639876b6a352f98615b4fc4b724e1f5f917e88fb4a", "class_name": "RelatedNodeInfo"}}, "text": "\"result\": {\n    \"predecessor_id\": \"bohdan.testnet\",\n    \"receipt\": {\n      \"Action\": {\n        \"actions\": [\n          {\n            \"Transfer\": {\n              \"deposit\": \"1000000000000000000000000\"\n            }\n          }\n        ],\n        \"gas_price\": \"103000000\",\n        \"input_data_ids\": [],\n        \"output_data_receivers\": [],\n        \"signer_id\": \"bohdan.testnet\",\n        \"signer_public_key\": \"ed25519:DhC7rPNTBwWJtmVXs1U1SqJztkn9AWbj6jCmQtkrg3TA\"\n      }\n    },\n    \"receipt_id\": \"2EbembRPJhREPtmHCrGv3Xtdm3xoc5BMVYHm3b2kjvMY\",\n    \"receiver_id\": \"frol.testnet\"\n  }\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-4}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 27766, "end_char_idx": 29200, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1e35ebbe-ca91-42be-90b2-492307d76242": {"__data__": {"id_": "1e35ebbe-ca91-42be-90b2-492307d76242", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b666083-b310-4401-88ca-c9b796ee0fbb", "node_type": "1", "metadata": {}, "hash": "f188a023b18120130bf758f0d39d2db17577362696601a7d9fcb302094b54e60", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e188452-b596-4e97-9fec-83e8a2886f3c", "node_type": "1", "metadata": {}, "hash": "bf086a871e524f4f1060f8f2f6f1a2e5ec22b2a43e70c6bb7c900252aff60289", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_receipt` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>HANDLER_ERROR</td>\n      <td>UNKNOWN_RECEIPT</td>\n      <td>200</td>\n      <td>The receipt with the given <code>receipt_id</code> was never observed on the node</td>\n      <td>\n        <ul>\n          <li>Check the provided <code>receipt_id</code> is correct</li>\n          <li>Send a request on a different node</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n## Transaction Execution Levels {#tx-status-result}\n\nAll the methods listed above have `wait_until` request parameter, and `final_execution_status` response value.\nThey correspond to the same enum `TxExecutionStatus`.", "mimetype": "text/plain", "start_char_idx": 29202, "end_char_idx": 30977, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e188452-b596-4e97-9fec-83e8a2886f3c": {"__data__": {"id_": "6e188452-b596-4e97-9fec-83e8a2886f3c", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1e35ebbe-ca91-42be-90b2-492307d76242", "node_type": "1", "metadata": {}, "hash": "a3e6b6721ee3a53d1536f6639876b6a352f98615b4fc4b724e1f5f917e88fb4a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "195d42e2-eb5c-4a1c-a043-c145b979351a", "node_type": "1", "metadata": {}, "hash": "0d4e0b504e206d4527aaaad1b9c1fe300a18a8720c4267b2ea4ae14735f7ad36", "class_name": "RelatedNodeInfo"}}, "text": "See the detailed explanation for all the options:\n\n```rust\n#[serde(rename_all = \"SCREAMING_SNAKE_CASE\")]\npub enum TxExecutionStatus {\n  /// Transaction is waiting to be included into the block\n  None,\n  /// Transaction is included into the block. The block may be not finalized yet\n  Included,\n  /// Transaction is included into the block +\n  /// All non-refund transaction receipts finished their execution.\n  /// The corresponding blocks for tx and each receipt may be not finalized yet\n  #[default]\n  ExecutedOptimistic,\n  /// Transaction is included into finalized block\n  IncludedFinal,\n  /// Transaction is included into finalized block +\n  /// All non-refund transaction receipts finished their execution.\n  /// The corresponding blocks for each receipt may be not finalized yet\n  Executed,\n  /// Transaction is included into finalized block +\n  /// Execution of all transaction receipts is finalized, including refund receipts\n  Final,\n}\n```\n\n---\n\n# Deprecated methods {#deprecated}\n\n## [deprecated] Send transaction (async) {#send-transaction-async}\n\n> Consider using [`send_tx`](/api/rpc/transactions#send-tx) instead\n\n> Sends a transaction and immediately returns transaction hash.\n\n- method: `broadcast_tx_async`\n- params: [SignedTransaction encoded in base64]\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"broadcast_tx_async\",", "mimetype": "text/plain", "start_char_idx": 30978, "end_char_idx": 32397, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "195d42e2-eb5c-4a1c-a043-c145b979351a": {"__data__": {"id_": "195d42e2-eb5c-4a1c-a043-c145b979351a", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e188452-b596-4e97-9fec-83e8a2886f3c", "node_type": "1", "metadata": {}, "hash": "bf086a871e524f4f1060f8f2f6f1a2e5ec22b2a43e70c6bb7c900252aff60289", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c32aabb8-5856-474d-9d97-3cb517500aa1", "node_type": "1", "metadata": {}, "hash": "a4044e2cc7d0631036d2f3f76665271375087bbe8a00ab8e1366ea539b2bb8dd", "class_name": "RelatedNodeInfo"}}, "text": "\"params\": [\n    \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDwAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldNMnL7URB1cxPOu3G8jTqlEwlcasagIbKlAJlF5ywVFLAQAAAAMAAACh7czOG8LTAAAAAAAAAGQcOG03xVSFQFjoagOb4NBBqWhERnnz45LY4+52JgZhm1iQKz7qAdPByrGFDQhQ2Mfga8RlbysuQ8D8LlA6bQE=\"\n  ]\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=broadcast_tx_async \\\n    params:='[\n        \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDwAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldNMnL7URB1cxPOu3G8jTqlEwlcasagIbKlAJlF5ywVFLAQAAAAMAAACh7czOG8LTAAAAAAAAAGQcOG03xVSFQFjoagOb4NBBqWhERnnz45LY4+52JgZhm1iQKz7qAdPByrGFDQhQ2Mfga8RlbysuQ8D8LlA6bQE=\"\n    ]'\n```\n\n</TabItem>\n</Tabs>\n\nExample response:\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": \"6zgh2u9DqHHiXzdy9ouTP7oGky2T4nugqzqt9wJZwNFm\",", "mimetype": "text/plain", "start_char_idx": 32400, "end_char_idx": 33273, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c32aabb8-5856-474d-9d97-3cb517500aa1": {"__data__": {"id_": "c32aabb8-5856-474d-9d97-3cb517500aa1", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "195d42e2-eb5c-4a1c-a043-c145b979351a", "node_type": "1", "metadata": {}, "hash": "0d4e0b504e206d4527aaaad1b9c1fe300a18a8720c4267b2ea4ae14735f7ad36", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149", "node_type": "1", "metadata": {}, "hash": "7f6a5b5381f1cd4c7b5fca8cccb0b5787a35e993df720a21e455e5efd486fd08", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"dontcare\"\n}\n```\n\nFinal transaction results can be queried using [Transaction Status](#transaction-status)\nor [NearBlocks Explorer](https://testnet.nearblocks.io/) using the above `result` hash returning a result similar to the example below.\n\n![NEAR-Explorer-transactionHash](/docs/assets/NEAR-Explorer-transactionHash.png)\n\n#### What could go wrong? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `broadcast_tx_async` method:\n\n<table class=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 33276, "end_char_idx": 35048, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149": {"__data__": {"id_": "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c32aabb8-5856-474d-9d97-3cb517500aa1", "node_type": "1", "metadata": {}, "hash": "a4044e2cc7d0631036d2f3f76665271375087bbe8a00ab8e1366ea539b2bb8dd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27f2f505-36ca-44b3-8363-39352ffc193b", "node_type": "1", "metadata": {}, "hash": "1448e90f1d000c43d47c46315f8d5597a75519ce2ae62c1a01b676538ce25556", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## [deprecated] Send transaction (await) {#send-transaction-await}\n\n> Consider using [`send_tx`](/api/rpc/transactions#send-tx) instead\n\n> Sends a transaction and waits until transaction is fully complete. _(Has a 10 second timeout)_\n\n- method: `broadcast_tx_commit`\n- params: `[SignedTransaction encoded in base64]`\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"broadcast_tx_commit\",\n  \"params\": [\n    \"DgAAAHNlbmRlci50ZXN0bmV0AOrmAai64SZOv9e/naX4W15pJx0GAap35wTT1T/DwcbbDQAAAAAAAAAQAAAAcmVjZWl2ZXIudGVzdG5ldIODI4YfV/QS++blXpQYT+bOsRblTRW4f547y/LkvMQ9AQAAAAMAAACh7czOG8LTAAAAAAAAAAXcaTJzu9GviPT7AD4mNJGY79jxTrjFLoyPBiLGHgBi8JK1AnhK8QknJ1ourxlvOYJA2xEZE8UR24THmSJcLQw=\"\n  ]\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 35048, "end_char_idx": 36153, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "27f2f505-36ca-44b3-8363-39352ffc193b": {"__data__": {"id_": "27f2f505-36ca-44b3-8363-39352ffc193b", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149", "node_type": "1", "metadata": {}, "hash": "7f6a5b5381f1cd4c7b5fca8cccb0b5787a35e993df720a21e455e5efd486fd08", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "581915bd-e724-4767-af58-8e5e3056e6a8", "node_type": "1", "metadata": {}, "hash": "85560647cbe8876beb24496233ada2fd33970eb213eb1599b4f87f3afcd28ef3", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=broadcast_tx_commit \\\n    params:='[\n        \"DwAAAG5lYXJrYXQudGVzdG5ldABuTi5L1rwnlb35hc9tn5WELkxfiGfGh1Q5aeGNQDejo0QAAAAAAAAAEAAAAGpvc2hmb3JkLnRlc3RuZXSiWAc6W9KlqXS5fK+vjFRDV5pAxHRKU0srKX/cmdRTBgEAAAADAAAAoe3MzhvC0wAAAAAAAAB9rOE9zc5zQYLL1j6VTh3I4fQbERs6I07gJfrAC6jo8DB4HolR9Xps3v4qrZxkgZjwv6wB0QOROM4UEbeOaBoB\"\n    ]'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"final_execution_status\": \"FINAL\",\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"signer_id\": \"sender.testnet\",\n      \"public_key\": \"ed25519:Gowpa4kXNyTMRKgt5W7147pmcc2PxiFic8UHW9rsNvJ6\",\n      \"nonce\": 13,\n      \"receiver_id\": \"receiver.testnet\",\n      \"actions\": [\n        {\n          \"Transfer\": {\n            \"deposit\": \"1000000000000000000000000\"\n          }\n        }\n      ],\n      \"signature\": \"ed25519:7oCBMfSHrZkT7tzPDBxxCd3tWFhTES38eks3MCZMpYPJRfPWKxJsvmwQiVBBxRLoxPTnXVaMU2jPV3MdFKZTobH\",\n      \"hash\": \"ASS7oYwGiem9HaNwJe6vS2kznx2CxueKDvU9BAYJRjNR\"\n    },", "mimetype": "text/plain", "start_char_idx": 36153, "end_char_idx": 37216, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "581915bd-e724-4767-af58-8e5e3056e6a8": {"__data__": {"id_": "581915bd-e724-4767-af58-8e5e3056e6a8", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "27f2f505-36ca-44b3-8363-39352ffc193b", "node_type": "1", "metadata": {}, "hash": "1448e90f1d000c43d47c46315f8d5597a75519ce2ae62c1a01b676538ce25556", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5f49057c-7d5c-4353-9e35-deeb3863ec90", "node_type": "1", "metadata": {}, "hash": "cab86aa6a635a9244a02f65902dc10c3f808272126169e195f7e320a83e9c663", "class_name": "RelatedNodeInfo"}}, "text": "\"transaction_outcome\": {\n      \"proof\": [],\n      \"block_hash\": \"9MzuZrRPW1BGpFnZJUJg6SzCrixPpJDfjsNeUobRXsLe\",\n      \"id\": \"ASS7oYwGiem9HaNwJe6vS2kznx2CxueKDvU9BAYJRjNR\",\n      \"outcome\": {\n        \"logs\": [],\n        \"receipt_ids\": [\"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\"],\n        \"gas_burnt\": 223182562500,\n        \"tokens_burnt\": \"22318256250000000000\",\n        \"executor_id\": \"sender.testnet\",\n        \"status\": {\n          \"SuccessReceiptId\": \"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\"\n        }\n      }\n    },\n    \"receipts_outcome\": [\n      {\n        \"proof\": [],\n        \"block_hash\": \"5Hpj1PeCi32ZkNXgiD1DrW4wvW4Xtic74DJKfyJ9XL3a\",\n        \"id\": \"BLV2q6p8DX7pVgXRtGtBkyUNrnqkNyU7iSksXG7BjVZh\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [\"3sawynPNP8UkeCviGqJGwiwEacfPyxDKRxsEWPpaUqtR\"],\n          \"gas_burnt\": 223182562500,\n          \"tokens_burnt\": \"22318256250000000000\",\n          \"executor_id\": \"receiver.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      },\n      {\n        \"proof\": [],\n        \"block_hash\": \"CbwEqMpPcu6KwqVpBM3Ry83k6M4H1FrJjES9kBXThcRd\",", "mimetype": "text/plain", "start_char_idx": 2929, "end_char_idx": 4078, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5f49057c-7d5c-4353-9e35-deeb3863ec90": {"__data__": {"id_": "5f49057c-7d5c-4353-9e35-deeb3863ec90", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "581915bd-e724-4767-af58-8e5e3056e6a8", "node_type": "1", "metadata": {}, "hash": "85560647cbe8876beb24496233ada2fd33970eb213eb1599b4f87f3afcd28ef3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6f01bfed-41b2-4bde-8a0f-2d7b427d3831", "node_type": "1", "metadata": {}, "hash": "ade48c9ca38b28084d0a1efcca5c754db286a1d0d1d477bdd5b9e1f9de28a532", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"3sawynPNP8UkeCviGqJGwiwEacfPyxDKRxsEWPpaUqtR\",\n        \"outcome\": {\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"gas_burnt\": 0,\n          \"tokens_burnt\": \"0\",\n          \"executor_id\": \"sender.testnet\",\n          \"status\": {\n            \"SuccessValue\": \"\"\n          }\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-1}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 38379, "end_char_idx": 39573, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6f01bfed-41b2-4bde-8a0f-2d7b427d3831": {"__data__": {"id_": "6f01bfed-41b2-4bde-8a0f-2d7b427d3831", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5f49057c-7d5c-4353-9e35-deeb3863ec90", "node_type": "1", "metadata": {}, "hash": "cab86aa6a635a9244a02f65902dc10c3f808272126169e195f7e320a83e9c663", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f6224d51-49d2-4381-b1c6-0084c473c650", "node_type": "1", "metadata": {}, "hash": "716b4ed2e18fecb950ad12c53451284c75056369d023372449d22b32acfe1a09", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `broadcast_tx_commit` method:\n\n<table class=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>INVALID_TRANSACTION</td>\n      <td>200</td>\n      <td>An error happened during transaction execution</td>\n      <td>\n        <ul>\n          <li>See <code>error.cause.info</code> for details, likely a field in the transaction was invalid</li>\n          <li>If <code>error.cause.info</code> is <code>ShardCongested</code>, resubmit the identical transaction after a delay. (Consider adding a priority fee once [NEP-541](https://github.com/near/NEPs/pull/541) is released.", "mimetype": "text/plain", "start_char_idx": 39575, "end_char_idx": 40504, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f6224d51-49d2-4381-b1c6-0084c473c650": {"__data__": {"id_": "f6224d51-49d2-4381-b1c6-0084c473c650", "embedding": null, "metadata": {"file_path": "./near_dist/transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39", "node_type": "4", "metadata": {}, "hash": "290831126b6a90c85422e13a38a429459467a5f692cf8e0fdf832555cd6f6bf3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6f01bfed-41b2-4bde-8a0f-2d7b427d3831", "node_type": "1", "metadata": {}, "hash": "ade48c9ca38b28084d0a1efcca5c754db286a1d0d1d477bdd5b9e1f9de28a532", "class_name": "RelatedNodeInfo"}}, "text": ")</li>\n          <li>If <code>error.cause.info</code> is <code>ShardStuck</code>, you may also resubmit the identical transaction after a delay</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>TIMEOUT_ERROR</td>\n      <td>408</td>\n      <td>Transaction was routed, but has not been recorded on chain in 10 seconds.</td>\n      <td>\n        <ul>\n          <li> Resubmit the request with the identical transaction (in NEAR Protocol unique transactions apply exactly once, so if the previously sent transaction gets applied, this request will just return the known result, otherwise, it will route the transaction to the chain once again)</li>\n          <li>Check that your transaction is valid</li>\n          <li>Check that the signer account id has enough tokens to cover the transaction fees (keep in mind that some tokens on each account are locked to cover the storage cost)</li>\n        </ul>\n      </td>\n    </tr>\n    <tr class=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 40504, "end_char_idx": 42257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e9fc336e-d917-485e-8371-8ae4680e7c81": {"__data__": {"id_": "e9fc336e-d917-485e-8371-8ae4680e7c81", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b199681f-ed9c-41aa-8057-7089a04e3c30", "node_type": "1", "metadata": {}, "hash": "5c9c33b11a4ef8e255e5410efa63a27383fe200d74238b0bc39b780713d7e979", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: skeleton\ntitle: Skeleton and JavaScript Architecture\nsidebar_label: Contract Architecture\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\n> In this article, you'll learn about the basic architecture behind the NFT contract that you'll develop while following this _\"Zero to Hero\"_ series.\n> You'll discover the contract's layout and you'll see how the JavaScript files are structured in order to build a feature-complete smart contract.\n\n\n\n\n## Introduction\n\nThis tutorial presents the code skeleton for the NFT smart contract and its file structure.\nYou'll find how all the functions are laid out as well as the missing JS code that needs to be filled in.\nOnce every file and function has been covered, you'll go through the process of building the mock-up contract to confirm that everything is working correctly.\n\n## File structure\n\nFollowing a regular [JavaScript](https://www.javascript.com/) project, the file structure for this smart contract has:\n\n- `package.json` file to define the packages and scripts used in the project.\n- `src` folder where all the JavaScript source files are stored\n- `build` folder where the compiled `wasm` will output to.\n\n### Source files\n\n| File                             | Description                                                                      |\n| -------------------------------- | -------------------------------------------------------------------------------- |\n| [approval.ts](#approvalts)       | Has the internal functions that controls the access and transfers of non-fungible tokens. |\n| [enumeration.ts](#enumerationts) | Contains the internal methods to query for NFT tokens and their owners.                        |\n| [index.ts](#indexts)                 | Holds the exposed smart contract functions.                               |\n| [metadata.ts](#metadatats)       | Defines the token and metadata structures.                                        |\n| [mint.ts](#mintts)               | Contains the internal token minting logic.                                                    |\n| [nft_core.ts](#nft_corets)       | Has the internal core logic that allows you to transfer NFTs between users.                       |\n| [royalty.ts](#royaltyts)         | Contains the internal payout-related functions.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2288, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b199681f-ed9c-41aa-8057-7089a04e3c30": {"__data__": {"id_": "b199681f-ed9c-41aa-8057-7089a04e3c30", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e9fc336e-d917-485e-8371-8ae4680e7c81", "node_type": "1", "metadata": {}, "hash": "6389ca04b45a67ca206ef078e8d6ed46545eb700a40ddd474e1d4db706c934a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48c1e6c7-df82-45e4-ad1d-7942fd798825", "node_type": "1", "metadata": {}, "hash": "b96ed9f9cb699a97e19d6b2f8f69c5d3004c10be67e873c0dfb23651ed34c206", "class_name": "RelatedNodeInfo"}}, "text": "|\n\n```\nnft-tutorial-js\n\u2514\u2500\u2500 src\n    market-contract\n    nft-contract\n    \u251c\u2500\u2500 approval.ts\n    \u251c\u2500\u2500 enumeration.ts\n    \u251c\u2500\u2500 index.ts\n    \u251c\u2500\u2500 metadata.ts\n    \u251c\u2500\u2500 mint.ts\n    \u251c\u2500\u2500 nft_core.ts\n    \u2514\u2500\u2500 royalty.ts\n```\n\n:::tip\nExplore the code in our [GitHub repository](https://github.com/near-examples/nft-tutorial-js/tree/1.skeleton).\n:::\n\n---\n\n## `approval.ts`\n\n> This allows people to approve other accounts to transfer NFTs on their behalf.\n\nThis file contains the internal logic that complies with the standard's [approvals management](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement) extension. Here is a breakdown of the methods and their functions:\n\n| Method              | Description                                                                                               |\n| ------------------- | --------------------------------------------------------------------------------------------------------- |\n| **internalNftApprove**     | Approves an account ID to transfer a token on your behalf. Called during **nft_approve**.                                                |\n| **internalNftIsApproved** | Checks if the input account has access to approve the token ID. Called during **nft_is_approved**.                                            |\n| **internalNftRevoke**      | Revokes a specific account from transferring the token on your behalf. Called during **nft_revoke**.                                     |\n| **internalNftRevokeAll**  | Revokes all accounts from transferring the token on your behalf. Called during **nft_revoke_all**.                                         |\n\n<Github language=\"js\" start=\"9\" end=\"69\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/approval.ts\" />\n\nYou'll learn more about these functions in the [approvals section](/tutorials/nfts/js/approvals) of the Zero to Hero series.\n\n---\n\n## `enumeration.ts`\n\n> This file provides the internal functions needed to view information about NFTs, and follows the standard's [enumeration](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration) extension.\n\n| Method                   | Description                                                                        |\n| ------------------------ | ---------------------------------------------------------------------------------- |\n| **internalNftTotalSupply**           | Returns the total amount of NFTs stored on the contract.", "mimetype": "text/plain", "start_char_idx": 2335, "end_char_idx": 4781, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "48c1e6c7-df82-45e4-ad1d-7942fd798825": {"__data__": {"id_": "48c1e6c7-df82-45e4-ad1d-7942fd798825", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b199681f-ed9c-41aa-8057-7089a04e3c30", "node_type": "1", "metadata": {}, "hash": "5c9c33b11a4ef8e255e5410efa63a27383fe200d74238b0bc39b780713d7e979", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53cb86e4-5764-4888-bd9a-ee90ec04c77a", "node_type": "1", "metadata": {}, "hash": "c2fa4ab9defcffa7d0b271ed6d51c9f13185b7bfa24bfde2fa323ef6a9968561", "class_name": "RelatedNodeInfo"}}, "text": "Called during **nft_total_supply**.    |\n| **internalNftTokens**           | Returns a paginated list of NFTs stored on the contract regardless of their owner. Called during **nft_tokens**.    |\n| **internalNftSupplyForOwner** | Allows you view the total number of NFTs owned by any given user. Called during **nft_supply_for_owner**.                     |\n| **internalNftTokensForOwner** | Returns a paginated list of NFTs owned by any given user. Called during **nft_tokens_for_owner**.                             |\n\n<Github language=\"js\" start=\"8\" end=\"62\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/enumeration.ts\" />\n\nYou'll learn more about these functions in the [enumeration section](/tutorials/nfts/js/enumeration) of the tutorial series.\n\n---\n\n## `metadata.ts`\n\n> This file is used to keep track of the information to be stored for tokens, and metadata.\n> In addition, you can define a function to view the contract's metadata which is part of the standard's [metadata](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata) extension.\n\n| Name              | Description                                                                                                   |\n| ----------------- | ------------------------------------------------------------------------------------------------------------- |\n| **TokenMetadata** | This structure defines the metadata that can be stored for each token. (title, description, media, etc.       |\n| **Token**         | This structure outlines what information will be stored on the contract for each token.                       |\n| **JsonToken**     | When querying information about NFTs through view calls, the return information is stored in this JSON token. |\n| **internalNftMetadata**  | This function allows users to query for the contact's internal metadata. Called during **nft_metadata**.                                           |\n\n<Github language=\"js\" start=\"12\" end=\"46\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/metadata.ts\" />\n\nYou'll learn more about these functions in the [minting section](/tutorials/nfts/js/minting) of the tutorial series.\n\n---\n\n## `mint.ts`\n\n> Contains the internal token minting logic.", "mimetype": "text/plain", "start_char_idx": 4782, "end_char_idx": 7058, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53cb86e4-5764-4888-bd9a-ee90ec04c77a": {"__data__": {"id_": "53cb86e4-5764-4888-bd9a-ee90ec04c77a", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "48c1e6c7-df82-45e4-ad1d-7942fd798825", "node_type": "1", "metadata": {}, "hash": "b96ed9f9cb699a97e19d6b2f8f69c5d3004c10be67e873c0dfb23651ed34c206", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "299f5da7-3102-4fd6-aeb6-59106414ba75", "node_type": "1", "metadata": {}, "hash": "6d9da0683499ecaf1e512af419a8709310193a07d07e827fd7cbf1219f791b52", "class_name": "RelatedNodeInfo"}}, "text": "| Method       | Description                               |\n| ------------ | ----------------------------------------- |\n| **internalNftMint** | This function mints a non-fungible token. Called during **nft_mint**. |\n\n<Github language=\"js\" start=\"7\" end=\"23\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/mint.ts\" />\n\n---\n\n## `nft_core.ts`\n\n> Core logic that allows you to transfer NFTs between users.\n\n| Method                   | Description                                                                                                                                                                                                                                                                                   |\n| ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **internalNftTransfer**         | Transfers an NFT to a receiver ID. Called during **nft_transfer**.                                                                                                                                                                                                                                                            |\n| **internalNftTransferCall**    | Transfers an NFT to a receiver and calls a function on the receiver ID's contract. The function returns `true` if the token was transferred from the sender's account. Called during **nft_transfer_call**.                                                                                                                        |\n| **internalNftToken**            | Allows users to query for the information about a specific NFT. Called during **nft_token**.                                                                                                                                                                                                                               |                                                                                                       |\n| **internalNftResolveTransfer** | When you start the `nft_transfer_call` and transfer an NFT, the standard dictates that you should also call a method on the receiver's contract. If the receiver needs you to return the NFT to the sender (as per the return value of the `nft_on_transfer` method), this function allows you to execute that logic. Called during **nft_resolve_transfer**. |\n\n<Github language=\"js\" start=\"10\" end=\"85\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/nft_core.ts\" />\n\nYou'll learn more about these functions in the [minting section](/tutorials/nfts/js/minting) of the tutorial series.\n\n---\n\n## `royalty.ts`\n\n> Contains the internal payout-related functions.\n\n| Method                  | Description                                                                                                   |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------- |\n| **internalNftPayout**          | This internal method calculates the payout for a given token. Called during **nft_payout**.", "mimetype": "text/plain", "start_char_idx": 7060, "end_char_idx": 10443, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "299f5da7-3102-4fd6-aeb6-59106414ba75": {"__data__": {"id_": "299f5da7-3102-4fd6-aeb6-59106414ba75", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53cb86e4-5764-4888-bd9a-ee90ec04c77a", "node_type": "1", "metadata": {}, "hash": "c2fa4ab9defcffa7d0b271ed6d51c9f13185b7bfa24bfde2fa323ef6a9968561", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b182797-729b-4b76-a63e-fc1300026183", "node_type": "1", "metadata": {}, "hash": "b86f9fcd9c838d7d6d8744b45ad28cff8b06c2c11522c60fac6d2d916c853f66", "class_name": "RelatedNodeInfo"}}, "text": "|\n| **internalNftTransferPayout** | Internal method to transfer the token to the receiver ID and return the payout object that should be paid for a given balance. Called during **nft_transfer_payout**. |\n\n<Github language=\"js\" start=\"7\" end=\"45\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/royalty.ts\" />\n\nYou'll learn more about these functions in the [royalty section](/tutorials/nfts/js/royalty) of the tutorial series.\n\n---\n\n## `index.ts`\n\n> This file outlines the smart contract class and what information it stores and keeps track of. In addition, it exposes all public facing methods that are callable by the user.\n\n| Method               | Description                                                                                     |\n| -------------------- | ----------------------------------------------------------------------------------------------- |\n| **init** | Constructor function used to initialize the contract with some metadata and default state. |\n| **nft_mint** | Calls the internal mint function to mint an NFT. |\n| **nft_token** | Calls the internal function to query for info on a specific NFT |\n| **nft_transfer** | Calls the internal function to transfer an NFT  |\n| **nft_transfer_call** | Calls the internal function to transfer an NFT and call `nft_on_transfer` on the receiver's contract |\n| **nft_resolve_transfer** | Calls the internal function to resolve the transfer call promise.|\n| **nft_is_approved** | Calls the internal function to check whether someone is approved for an NFT|\n| **nft_approve** | Calls the internal function to approve someone to transfer your NFT|\n| **nft_payout** | Calls the internal function to query for the payout object for an NFT|\n| **nft_transfer_payout** | Calls the internal function to transfer an NFT and return the payout object.", "mimetype": "text/plain", "start_char_idx": 10496, "end_char_idx": 12346, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b182797-729b-4b76-a63e-fc1300026183": {"__data__": {"id_": "9b182797-729b-4b76-a63e-fc1300026183", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "299f5da7-3102-4fd6-aeb6-59106414ba75", "node_type": "1", "metadata": {}, "hash": "6d9da0683499ecaf1e512af419a8709310193a07d07e827fd7cbf1219f791b52", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e76f4d8-5e12-4896-b4bf-e0c3522eaaf8", "node_type": "1", "metadata": {}, "hash": "0d67872a9acb66c380422428b32750750df0cfe02a8e397f913b19aad3f0c5e7", "class_name": "RelatedNodeInfo"}}, "text": "|\n| **nft_revoke** | Calls the internal function to revoke someone access to transfer your NFT|\n| **nft_revoke_all** | Calls the internal function to revoke everyone's access to transfer your NFT|\n| **nft_total_supply** | Calls the internal function to query the total supply of NFTs on the contract.|\n| **nft_tokens** | Calls the internal function to paginate through NFTs on the contract|\n| **nft_tokens_for_owner** | Calls the internal function to paginate through NFTs for a given owner|\n| **nft_supply_for_owner** | Calls the internal function to query for the total number of NFTs owned by someone.|\n| **nft_metadata** | Calls the internal function to query for the contract's metadata|", "mimetype": "text/plain", "start_char_idx": 12347, "end_char_idx": 13039, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0e76f4d8-5e12-4896-b4bf-e0c3522eaaf8": {"__data__": {"id_": "0e76f4d8-5e12-4896-b4bf-e0c3522eaaf8", "embedding": null, "metadata": {"file_path": "./near_dist/1-skeleton.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "de8f877c-135c-48f8-93d6-33185f073d88", "node_type": "4", "metadata": {}, "hash": "6ef0b2a5514b5667bb4e826a86b79cebd582c9028b872e76e8ed2aa82081581b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b182797-729b-4b76-a63e-fc1300026183", "node_type": "1", "metadata": {}, "hash": "b86f9fcd9c838d7d6d8744b45ad28cff8b06c2c11522c60fac6d2d916c853f66", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"16\" end=\"157\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/1.skeleton/src/nft-contract/index.ts\" />\n\nYou'll learn more about these functions in the [minting section](/tutorials/nfts/js/minting) of the tutorial series.\n\n---\n\n## Building the skeleton\n\n- If you haven't cloned the main repository yet, open a terminal and run:\n\n```sh\ngit clone https://github.com/near-examples/nft-tutorial-js/\n```\n\n- Next, switch to the `1.skeleton` branch. \n- Install the dependencies (including the JS SDK): `yarn`\n- Build the contract with `yarn build`:\n\n```sh\ngit clone https://github.com/near-examples/nft-tutorial-js/\ncd nft-tutorial-js\ngit checkout 1.skeleton\nyarn && yarn build\n```\n\nOnce this finishes, the `nft-tutorial-js/build` directory should contain the `nft.wasm` smart contract!\n\nBuilding the skeleton is useful to validate that everything works properly and that you'll be able to compile improved versions of this NFT contract in the upcoming tutorials.\n\n---\n\n## Conclusion\n\nYou've seen the layout of this NFT smart contract, and how all the functions are laid out across the different source files.\nUsing `yarn`, you've been able to compile the contract, and you'll start fleshing out this skeleton in the next [Minting tutorial](/tutorials/nfts/js/minting).\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- near-sdk-js: `0.4.0-5`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 13043, "end_char_idx": 14590, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "212fce63-26b6-4247-9d11-287a7d2b7367": {"__data__": {"id_": "212fce63-26b6-4247-9d11-287a7d2b7367", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d", "node_type": "1", "metadata": {}, "hash": "ef593a1ef32bf26847dad89395fd9261339644496564da653bf7214910dd1483", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: events\ntitle: Events\nsidebar_label: Events\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial, you'll learn about the [events standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event) and how to implement it in your smart contract.\n\n\n\n## Introduction\n\nTo get started, either switch to the `6.royalty` branch from our [GitHub repository](https://github.com/near-examples/nft-tutorial/), or continue your work from the previous tutorials.\n\n```bash\ngit checkout 6.royalty\n```\n\n:::tip\nIf you wish to see the finished code for this _Events_ tutorial, you can find it on the `7.events` branch.\n:::\n\n## Understanding the use case {#understanding-the-use-case}\n\nHave you ever wondered how the wallet knows which NFTs you own and how it can display them in the [collectibles tab](https://testnet.mynearwallet.com//?tab=collectibles)? Originally, an indexer used to listen for any functions calls starting with `nft_` on your account. These contracts were then flagged on your account as likely NFT contracts. \n\nWhen you navigated to your collectibles tab, the wallet would then query all those contracts for the list of NFTs you owned using the `nft_tokens_for_owner` function you saw in the [enumeration tutorial](/tutorials/nfts/js/enumeration).\n\n### The problem {#the-problem}\n\nThis method of flagging contracts was not reliable as each NFT-driven application might have its own way of minting or transferring NFTs. In addition, it's common for apps to transfer or mint many tokens at a time using batch functions. \n\n### The solution {#the-solution}\n\nA standard was introduced so that smart contracts could emit an event anytime NFTs were transferred, minted, or burnt. This event was in the form of a log. No matter how a contract implemented the functionality, an indexer could now listen for those standardized logs.\n\nAs per the standard, you need to implement a logging functionality that gets fired when NFTs are transferred or minted.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2049, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d": {"__data__": {"id_": "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "212fce63-26b6-4247-9d11-287a7d2b7367", "node_type": "1", "metadata": {}, "hash": "738a7a917540a4025421d52e91f657724795a709d342189079767ba610720323", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "83f248f1-38d0-47fb-a9cb-4542e39dfd37", "node_type": "1", "metadata": {}, "hash": "4356f6272d4eb6af2e0faecdb0cb6c298f5b8905d66841f179b1f3eb3f44dcba", "class_name": "RelatedNodeInfo"}}, "text": "In this case, the contract doesn't support burning so you don't need to worry about that for now.\n\nIt's important to note the standard dictates that the log should begin with `\"EVENT_JSON:\"`. The structure of your log should, however, always contain the 3 following things: \n\n- **standard**: the current name of the standard (e.g. nep171)\n- **version**: the version of the standard you're using (e.g. 1.0.0)\n- **event**: a list of events you're emitting.\n\nThe event interface differs based on whether you're recording transfers or mints. The interface for both events is outlined below.\n\n**Transfer events**:\n- *Optional* - **authorized_id**: the account approved to transfer on behalf of the owner.\n- **old_owner_id**: the old owner of the NFT.\n- **new_owner_id**: the new owner that the NFT is being transferred to.\n- **token_ids**: a list of NFTs being transferred.\n- *Optional* - **memo**: an optional message to include with the event.\n\n**Minting events**:\n- **owner_id**: the owner that the NFT is being minted to.\n- **token_ids**: a list of NFTs being transferred.\n- *Optional* - **memo**: an optional message to include with the event.\n\n### Examples {#examples}\n\nIn order to solidify your understanding of the standard, let's walk through three scenarios and see what the logs should look like.\n\n#### Scenario A - simple mint\n\nIn this scenario, Benji wants to mint an NFT to Mike with a token ID `\"team-token\"` and he doesn't include a message. The log should look as follows.\n\n```js\nEVENT_JSON:{\n  \"standard\": \"nep171\",\n  \"version\": \"1.0.0\",\n  \"event\": \"nft_mint\",\n  \"data\": [\n    {\"owner_id\": \"mike.testnet\", \"token_ids\": [\"team-token\"]}\n  ]\n}\n```\n\n#### Scenario B - batch mint\n\nIn this scenario, Benji wants to perform a batch mint. He will mint an NFT to Mike, Damian, Josh, and Dorian. Dorian, however, will get two NFTs. Each token ID will be `\"team-token\"` followed by an incrementing number. The log is as follows.", "mimetype": "text/plain", "start_char_idx": 2050, "end_char_idx": 3980, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "83f248f1-38d0-47fb-a9cb-4542e39dfd37": {"__data__": {"id_": "83f248f1-38d0-47fb-a9cb-4542e39dfd37", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d", "node_type": "1", "metadata": {}, "hash": "ef593a1ef32bf26847dad89395fd9261339644496564da653bf7214910dd1483", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c9ac6bc8-db4d-4741-b1c6-992d68b83e20", "node_type": "1", "metadata": {}, "hash": "f5b7489a6ce221ccb9ccb5153cb2468a368b33cdb1758faf3bf7f3a4148a520c", "class_name": "RelatedNodeInfo"}}, "text": "```js\nEVENT_JSON:{\n  \"standard\": \"nep171\",\n  \"version\": \"1.0.0\",\n  \"event\": \"nft_mint\",\n  \"data\": [\n    {\"owner_id\": \"mike.testnet\", \"token_ids\": [\"team-token0\"]},\n    {\"owner_id\": \"damian.testnet\", \"token_ids\": [\"team-token1\"]},\n    {\"owner_id\": \"josh.testnet\", \"token_ids\": [\"team-token2\"]}\n    {\"owner_id\": \"dorian.testnet\", \"token_ids\": [\"team-token3\", \"team-token4\"]},\n  ]\n}\n```\n\n#### Scenario C - transfer NFTs\n\nIn this scenario, Mike is transferring both his team tokens to Josh. The log should look as follows.\n\n```js\nEVENT_JSON:{\n  \"standard\": \"nep171\",\n  \"version\": \"1.0.0\",\n  \"event\": \"nft_transfer\",\n  \"data\": [\n    {\"old_owner_id\": \"mike.testnet\", \"new_owner_id\": \"josh.testnet\", \"token_ids\": [\"team-token\", \"team-token0\"], \"memo\": \"Go Team!\"}\n  ]\n}\n```\n\n## Modifications to the contract {#modifications-to-the-contract}\n\nAt this point, you should have a good understanding of what the end goal should be so let's get to work!\n\n### Logging minted tokens {#logging-minted-tokens}\n\nSince the contract will only be minting tokens in one place, it's trivial where you should place the log. Open the `nft-contract/src/mint.ts` file and navigate to the bottom of the file. This is where you'll construct the log for minting. Anytime someone successfully mints an NFT, it will now correctly emit a log.\n\n```js\n// Construct the mint log as per the events standard.\nlet nftMintLog = {\n    // Standard name (\"nep171\").\n    standard: NFT_STANDARD_NAME,\n    // Version of the standard (\"nft-1.0.0\").\n    version: NFT_METADATA_SPEC,\n    // The data related with the event stored in a vector.\n    event: \"nft_mint\",\n    data: [\n        {\n            // Owner of the token.", "mimetype": "text/plain", "start_char_idx": 3983, "end_char_idx": 5654, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c9ac6bc8-db4d-4741-b1c6-992d68b83e20": {"__data__": {"id_": "c9ac6bc8-db4d-4741-b1c6-992d68b83e20", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "83f248f1-38d0-47fb-a9cb-4542e39dfd37", "node_type": "1", "metadata": {}, "hash": "4356f6272d4eb6af2e0faecdb0cb6c298f5b8905d66841f179b1f3eb3f44dcba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1b82f720-321e-4919-895d-0ce027a2105b", "node_type": "1", "metadata": {}, "hash": "eebfaa34afabef72e40f3777498583c99a5be1764f1354e27ac0b5cab1ceadfe", "class_name": "RelatedNodeInfo"}}, "text": "owner_id: token.owner_id,\n            // Vector of token IDs that were minted.\n            token_ids: [tokenId],\n        }\n    ]\n}\n\n// Log the json.\nnear.log(`EVENT_JSON:${JSON.stringify(nftMintLog)}`);\n```\n\n<Github language=\"js\" start=\"7\" end=\"85\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/7.events/src/nft-contract/mint.ts\" />\n\n### Logging transfers {#logging-transfers}\n\nLet's open the `nft-contract/src/internal.ts` file and navigate to the `internalTransfer` function. This is the location where you'll build your transfer logs. Whenever an NFT is transferred, this function is called and so you'll correctly be logging the transfers.\n\n```js\n// Construct the transfer log as per the events standard.\nlet nftTransferLog = {\n    // Standard name (\"nep171\").\n    standard: NFT_STANDARD_NAME,\n    // Version of the standard (\"nft-1.0.0\").\n    version: NFT_METADATA_SPEC,\n    // The data related with the event stored in a vector.\n    event: \"nft_transfer\",\n    data: [\n        {\n            // The optional authorized account ID to transfer the token on behalf of the old owner.\n            authorized_id: authorizedId,\n            // The old owner's account ID.\n            old_owner_id: token.owner_id,\n            // The account ID of the new owner of the token.\n            new_owner_id: receiverId,\n            // A vector containing the token IDs as strings.\n            token_ids: [tokenId],\n            // An optional memo to include.\n            memo,\n        }\n    ]\n}\n\n// Log the serialized json.\nnear.log(`EVENT_JSON:${JSON.stringify(nftTransferLog)}`);\n```\n<Github language=\"js\" start=\"113\" end=\"205\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/7.events/src/nft-contract/internal.ts\" />\n\nThis solution, unfortunately, has an edge case which will break things. If an NFT is transferred via the `nft_transfer_call` function, there's a chance that the transfer will be reverted if the `nft_on_transfer` function returns `true`. Taking a look at the logic for `nft_transfer_call`, you can see why this is a problem.", "mimetype": "text/plain", "start_char_idx": 5667, "end_char_idx": 7724, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b82f720-321e-4919-895d-0ce027a2105b": {"__data__": {"id_": "1b82f720-321e-4919-895d-0ce027a2105b", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c9ac6bc8-db4d-4741-b1c6-992d68b83e20", "node_type": "1", "metadata": {}, "hash": "f5b7489a6ce221ccb9ccb5153cb2468a368b33cdb1758faf3bf7f3a4148a520c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a6eeddac-8500-45a3-a48b-ce54f70ffaa6", "node_type": "1", "metadata": {}, "hash": "2d8bc6cd1e1c8b7054d01c3f0ac8c4b62c9dae9f23d70a50d154831cae4322f1", "class_name": "RelatedNodeInfo"}}, "text": "When `nft_transfer_call` is invoked, it will: \n- Call `internalTransfer` to perform the actual transfer logic.\n- Initiate a cross-contract call and invoke the `nft_on_transfer` function.\n- Resolve the promise and perform logic in `internalResolveTransfer`.\n    - This will either return true meaning the transfer went fine or it will revert the transfer and return false.\n\nIf you only place the log in the `internalTransfer` function, the log will be emitted and the indexer will think that the NFT was transferred. If the transfer is reverted during `internalResolveTransfer`, however, that event should **also** be emitted. Anywhere that an NFT **could** be transferred, we should add logs. Replace the `internalResolveTransfer` with the following code.\n\n<Github language=\"js\" start=\"138\" end=\"242\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/7.events/src/nft-contract/nft_core.ts\" />\n\nWith that finished, you've successfully implemented the events standard and it's time to start testing.\n\n## Deploying the contract {#redeploying-contract}\n\nFor the purpose of readability and ease of development, instead of redeploying the contract to the same account, let's create a sub-account and deploy to that instead. You could have deployed to the same account as none of the changes you implemented in this tutorial would have caused errors.\n\n### Creating a sub-account\n\nRun the following command to create a sub-account `events` of your main account with an initial balance of 25 NEAR which will be transferred from the original to your new account.\n\n```bash\nnear create-account events.$NFT_CONTRACT_ID --masterAccount $NFT_CONTRACT_ID --initialBalance 25\n```\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport EVENTS_NFT_CONTRACT_ID=events.$NFT_CONTRACT_ID\n```\n\nUsing the build script, build the deploy the contract as you did in the previous tutorials:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $EVENTS_NFT_CONTRACT_ID\n```\n\n### Initialization and minting {#initialization-and-minting}\n\nSince this is a new contract, you'll need to initialize and mint a token.", "mimetype": "text/plain", "start_char_idx": 7726, "end_char_idx": 9873, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a6eeddac-8500-45a3-a48b-ce54f70ffaa6": {"__data__": {"id_": "a6eeddac-8500-45a3-a48b-ce54f70ffaa6", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b82f720-321e-4919-895d-0ce027a2105b", "node_type": "1", "metadata": {}, "hash": "eebfaa34afabef72e40f3777498583c99a5be1764f1354e27ac0b5cab1ceadfe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53872eb5-3ff1-4983-b04f-1a57ff89860a", "node_type": "1", "metadata": {}, "hash": "97b9810b63fa79ce3d02535b420eb48ac0e375784dd399ef59b01f62ac263f5b", "class_name": "RelatedNodeInfo"}}, "text": "Use the following command to initialize the contract:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $EVENTS_NFT_CONTRACT_ID init '{\"owner_id\": \"'$EVENTS_NFT_CONTRACT_ID'\"}' --accountId $EVENTS_NFT_CONTRACT_ID\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $EVENTS_NFT_CONTRACT_ID init json-args '{\"owner_id\": \"'$EVENTS_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $EVENTS_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNext, you'll need to mint a token. By running this command, you'll mint a token with a token ID `\"events-token\"` and the receiver will be your new account. In addition, you're passing in a map with two accounts that will get perpetual royalties whenever your token is sold.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $EVENTS_NFT_CONTRACT_ID nft_mint '{\"token_id\": \"events-token\", \"metadata\": {\"title\": \"Events Token\", \"description\": \"testing out the new events extension of the standard\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$EVENTS_NFT_CONTRACT_ID'\"}' --accountId $EVENTS_NFT_CONTRACT_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $EVENTS_NFT_CONTRACT_ID nft_mint json-args '{\"token_id\": \"events-token\", \"metadata\": {\"title\": \"Events Token\", \"description\": \"testing out the new events extension of the standard\",", "mimetype": "text/plain", "start_char_idx": 9874, "end_char_idx": 11528, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53872eb5-3ff1-4983-b04f-1a57ff89860a": {"__data__": {"id_": "53872eb5-3ff1-4983-b04f-1a57ff89860a", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a6eeddac-8500-45a3-a48b-ce54f70ffaa6", "node_type": "1", "metadata": {}, "hash": "2d8bc6cd1e1c8b7054d01c3f0ac8c4b62c9dae9f23d70a50d154831cae4322f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15bb4f4c-a318-4e82-9bfb-0856a7d7636f", "node_type": "1", "metadata": {}, "hash": "b5f66ad54eff94b5566897fc343fdcec61e6afab8aeb154afa0e60d9748f4eb7", "class_name": "RelatedNodeInfo"}}, "text": "\"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$EVENTS_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $EVENTS_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou can check to see if everything went through properly by looking at the output in your CLI:\n\n```bash\nDoing account.functionCall()\nReceipts: F4oxNfv54cqwUwLUJ7h74H1iE66Y3H7QDfZMmGENwSxd, BJxKNFRuLDdbhbGeLA3UBSbL8UicU7oqHsWGink5WX7S\n\tLog [events.goteam.examples.testnet]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"1.0.0\",\"event\":\"nft_mint\",\"data\":[{\"owner_id\":\"events.goteam.examples.testnet\",\"token_ids\":[\"events-token\"]}]}\nTransaction Id 4Wy2KQVTuAWQHw5jXcRAbrz7bNyZBoiPEvLcGougciyk\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/4Wy2KQVTuAWQHw5jXcRAbrz7bNyZBoiPEvLcGougciyk\n''\n```\n\nYou can see that the event was properly logged!\n\n### Transferring {#transferring}\n\nYou can now test if your transfer log works as expected by sending `benjiman.testnet` your NFT.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $EVENTS_NFT_CONTRACT_ID nft_transfer '{\"receiver_id\": \"benjiman.testnet\", \"token_id\": \"events-token\", \"memo\": \"Go Team :)\",", "mimetype": "text/plain", "start_char_idx": 11529, "end_char_idx": 12903, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "15bb4f4c-a318-4e82-9bfb-0856a7d7636f": {"__data__": {"id_": "15bb4f4c-a318-4e82-9bfb-0856a7d7636f", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53872eb5-3ff1-4983-b04f-1a57ff89860a", "node_type": "1", "metadata": {}, "hash": "97b9810b63fa79ce3d02535b420eb48ac0e375784dd399ef59b01f62ac263f5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4b212db-888e-4085-ac1b-d36681b87cbd", "node_type": "1", "metadata": {}, "hash": "c6964e7141651e3d6940c700d0cdc1dda3587de68fbbd693b5faade8da0404c7", "class_name": "RelatedNodeInfo"}}, "text": "\"approval_id\": 0}' --accountId $EVENTS_NFT_CONTRACT_ID --depositYocto 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $EVENTS_NFT_CONTRACT_ID nft_transfer json-args '{\"receiver_id\": \"benjiman.testnet\", \"token_id\": \"events-token\", \"memo\": \"Go Team :)\", \"approval_id\": 0}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $EVENTS_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```bash\nDoing account.functionCall()\nReceipts: EoqBxrpv9Dgb8KqK4FdeREawVVLWepEUR15KPNuZ4fGD, HZ4xQpbgc8EfU3PiV72LvfXb2f3dVC1n9aVTbQds9zfR\n\tLog [events.goteam.examples.testnet]: Memo: Go Team :)\n\tLog [events.goteam.examples.testnet]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"1.0.0\",\"event\":\"nft_transfer\",\"data\":[{\"authorized_id\":\"events.goteam.examples.testnet\",\"old_owner_id\":\"events.goteam.examples.testnet\",\"new_owner_id\":\"benjiman.testnet\",\"token_ids\":[\"events-token\"],\"memo\":\"Go Team :)\"}]}\nTransaction Id 4S1VrepKzA6HxvPj3cK12vaT7Dt4vxJRWESA1ym1xdvH\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/4S1VrepKzA6HxvPj3cK12vaT7Dt4vxJRWESA1ym1xdvH\n''\n```\n\nHurray! At this point, your NFT contract is fully complete and the events standard has been implemented.", "mimetype": "text/plain", "start_char_idx": 12904, "end_char_idx": 14307, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4b212db-888e-4085-ac1b-d36681b87cbd": {"__data__": {"id_": "f4b212db-888e-4085-ac1b-d36681b87cbd", "embedding": null, "metadata": {"file_path": "./near_dist/7-events.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f", "node_type": "4", "metadata": {}, "hash": "4508b8e80dc0ceeb10690fa90d6f72f9bf395c03adc504a0b17a82de65e059ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15bb4f4c-a318-4e82-9bfb-0856a7d7636f", "node_type": "1", "metadata": {}, "hash": "b5f66ad54eff94b5566897fc343fdcec61e6afab8aeb154afa0e60d9748f4eb7", "class_name": "RelatedNodeInfo"}}, "text": "## Conclusion\n\nToday you went through the [events standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event) and implemented the necessary logic in your smart contract. You created events for [minting](#logging-minted-tokens) and [transferring](#logging-transfers) NFTs. You then deployed and [tested](#initialization-and-minting) your changes by minting and transferring NFTs.\n\nIn the next tutorial, you'll look at the basics of a marketplace contract and how it was built.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Events standard: [NEP297 extension](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 14309, "end_char_idx": 15151, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0bc58a76-d20d-4f06-90f0-d92556beafcf": {"__data__": {"id_": "0bc58a76-d20d-4f06-90f0-d92556beafcf", "embedding": null, "metadata": {"file_path": "./near_dist/balance.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48", "node_type": "4", "metadata": {}, "hash": "bbed62ecc8b1014330c76a279ff5827a64631b72c48ea94049ad87ac9f04e180", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3d8b43b8-c244-4e59-b7ba-25664c20e3bc", "node_type": "1", "metadata": {}, "hash": "4dddee86c73187d49cf58ea6d4ce6a110b268ec98a5087fbe935e09aefbe5fb2", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: balance-changes\ntitle: Balance changes\nsidebar_label: Balance Changes\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n## Prerequisites {#prerequisites}\n\n- [NEAR Account](https://testnet.mynearwallet.com/create)\n- [NEAR-CLI](/tools/near-cli)\n- Credentials for sender account stored locally by running [`near login`](/tools/near-cli#import)\n\n### Native NEAR (\u24c3) {#native-near}\n\n> Balance changes on accounts can be tracked by using our [changes RPC endpoint](/api/rpc/setup#view-account-changes). You can test this out by sending tokens to an account using [NEAR-CLI](/tools/near-cli#send-near) and then viewing the changes made.\n\n## Send Tokens {#send-tokens}\n\n- Send tokens using [`near send`](../4.tools/cli.md#send-near)\n\n<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near send sender.testnet receiver.testnet 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near tokens sender.testnet send-near receiver.testnet '1 NEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n- You should see a result in your terminal that looks something like this:\n\n```bash\nSending 1 NEAR to receiver.testnet from sender.testnet\nTransaction Id 4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy\n```\n\n## View Balance Changes {#view-balance-changes}\n\n- Open the transaction URL in [NearBlocks Explorer](https://testnet.nearblocks.io/) and copy the `BLOCK HASH`.\n- Using the `BLOCK HASH` and the accountId, query the [changes RPC endpoint](/api/rpc/setup#view-account-changes) to view changes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1756, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3d8b43b8-c244-4e59-b7ba-25664c20e3bc": {"__data__": {"id_": "3d8b43b8-c244-4e59-b7ba-25664c20e3bc", "embedding": null, "metadata": {"file_path": "./near_dist/balance.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48", "node_type": "4", "metadata": {}, "hash": "bbed62ecc8b1014330c76a279ff5827a64631b72c48ea94049ad87ac9f04e180", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0bc58a76-d20d-4f06-90f0-d92556beafcf", "node_type": "1", "metadata": {}, "hash": "b194b8a6e90b85fc7dcd4265c85fcdffeb5a3c88bb5322e8fd724ab4bba77f7d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "884dfe44-7b7c-4e52-80d0-f171db65a1ce", "node_type": "1", "metadata": {}, "hash": "b44b5579b5abacf73560034cc3fb207ef781517fb7e2bcd2546d9e76dcc1e310", "class_name": "RelatedNodeInfo"}}, "text": "**Example Query using HTTPie:**\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare \\\n    method=EXPERIMENTAL_changes \\\n    'params:={\n        \"block_id\": \"CJ24svU3C9FaULVjcNVnWuVZjK6mNaQ8p6AMyUDMqB37\",\n        \"changes_type\": \"account_changes\",\n        \"account_ids\": [\"sender.testnet\"]\n    }'\n```\n\n<details>\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"dontcare\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"BRgE4bjmUo33jmiVBcZaWGkSLVeL7TTi4ZxYTvJdPbB9\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"tx_hash\": \"4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy\",\n          \"type\": \"transaction_processing\"\n        },\n        \"change\": {\n          \"account_id\": \"sender.testnet\",\n          \"amount\": \"11767430014412510000000000\",\n          \"code_hash\": \"11111111111111111111111111111111\",\n          \"locked\": \"0\",\n          \"storage_paid_at\": 0,\n          \"storage_usage\": 806\n        },\n        \"type\": \"account_update\"\n      }\n    ]\n  }\n}\n```\n</details>\n\n---\n\nAlternatively, you can view account balances by [querying `view_account`](/api/rpc/setup#view-account) which only requires an accountId.", "mimetype": "text/plain", "start_char_idx": 1758, "end_char_idx": 2907, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "884dfe44-7b7c-4e52-80d0-f171db65a1ce": {"__data__": {"id_": "884dfe44-7b7c-4e52-80d0-f171db65a1ce", "embedding": null, "metadata": {"file_path": "./near_dist/balance.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48", "node_type": "4", "metadata": {}, "hash": "bbed62ecc8b1014330c76a279ff5827a64631b72c48ea94049ad87ac9f04e180", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3d8b43b8-c244-4e59-b7ba-25664c20e3bc", "node_type": "1", "metadata": {}, "hash": "4dddee86c73187d49cf58ea6d4ce6a110b268ec98a5087fbe935e09aefbe5fb2", "class_name": "RelatedNodeInfo"}}, "text": "**Example HTTPie Request:**\n\n  ```bash\n  http post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_account\",\n    \"finality\": \"final\",\n    \"account_id\": \"sender.testnet\"\n  }'\n  ```\n\n**Example Response:**\n\n```json\n{\n  \"id\": \"dontcare\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"amount\": \"11767430683960197500000000\",\n    \"block_hash\": \"HUiscpNyoyR5z1UdnZhAJLNz1G8UjBrFTecSYqCrvdfW\",\n    \"block_height\": 50754977,\n    \"code_hash\": \"11111111111111111111111111111111\",\n    \"locked\": \"0\",\n    \"storage_paid_at\": 0,\n    \"storage_usage\": 806\n  }\n}\n```\n\n**Note:** Gas prices can change between blocks. Even for transactions with deterministic gas cost the cost in NEAR could also be different. You can query the gas price for recent blocks using the [`gas_price` RPC endpoint](https://docs.near.org/api/rpc/setup#gas-price).\n\n---\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 2909, "end_char_idx": 3952, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9075a20d-3760-41a5-aff4-70fbdaa13a5c": {"__data__": {"id_": "9075a20d-3760-41a5-aff4-70fbdaa13a5c", "embedding": null, "metadata": {"file_path": "./near_dist/deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "084141dc-7c63-439d-baf0-f83b8f42a34f", "node_type": "4", "metadata": {}, "hash": "9716538eebe0314fa6949b0629149ca70f4eed0ee0b9d7eb50a872bffb398785", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f0214622-873e-4a00-bddb-b465478d9988", "node_type": "1", "metadata": {}, "hash": "ebabacfae44f4953a3977a42e81f2daca47108d4e214c29244d04cdd3ce11b4c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: deploy\ntitle: NEAR CLI - Basics\nsidebar_label: Deploying and Using\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nAfter your contract is ready you can deploy it in the NEAR network for everyone to use it.\n\nLet us guide you on how to use the [NEAR CLI](../../../4.tools/cli.md) to deploy your contract\nand call its methods.\n\n:::info\nOn this page, we will only cover the basics of NEAR CLI. For more information visit the\n[NEAR CLI documentation page](../../../4.tools/cli.md).\n:::\n\n---\n\n## Deploying the Contract\n\nThanks to the `NEAR CLI` deploying a contract is as simple as:\n\n1. Compiling the contract to wasm.\n2. [Create an account](../../../4.tools/cli.md#near-create-account) and [deploy the contract](../../../4.tools/cli.md#near-deploy) into it using `NEAR CLI`.\n\n### Compile the Contract\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  ```bash\n  yarn build\n  ```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n  ```bash\n  cargo near build\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n### Create an Account and Deploy\n\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  \n  # deploy the contract\n  near deploy <accountId> <route_to_wasm>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n\n  # deploy the contract\n  near contract deploy <my-new-dev-account>.testnet use-file <route_to_wasm> without-init-call network-config testnet sign-with-keychain\n  ```\n  </TabItem>\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1785, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f0214622-873e-4a00-bddb-b465478d9988": {"__data__": {"id_": "f0214622-873e-4a00-bddb-b465478d9988", "embedding": null, "metadata": {"file_path": "./near_dist/deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "084141dc-7c63-439d-baf0-f83b8f42a34f", "node_type": "4", "metadata": {}, "hash": "9716538eebe0314fa6949b0629149ca70f4eed0ee0b9d7eb50a872bffb398785", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9075a20d-3760-41a5-aff4-70fbdaa13a5c", "node_type": "1", "metadata": {}, "hash": "16e728b3a170a415bb1fa8ddd4b14adbb1798ddc232dae90b78f3bf30897dde3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70f4d31a-d218-4fcc-a7ba-a67404177909", "node_type": "1", "metadata": {}, "hash": "8755d090d646d0da29acfa14759efa1e7827dedae08dbf53d76e807fb01e984f", "class_name": "RelatedNodeInfo"}}, "text": "### Deploy in an Existing Account\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # login into your account\n  near login\n\n  # deploy the contract\n  near deploy <accountId> <route_to_wasm>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # login into your account\n  near account import-account using-web-wallet network-config testnet\n\n  # deploy the contract\n  near contract deploy <accountId> use-file <route_to_wasm> without-init-call network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n:::tip\nYou can overwrite a contract by deploying another on top of it. In this case, the account's logic\nwill change, but the state will persist\n:::\n\n:::info\nBy default `near-cli` uses the `testnet` network. Define `NEAR_ENV=mainnet` to deploy into `mainnet`.\n:::\n\n:::info Naming Convention for Public-Facing Methods \nOnce the contract is deployed to the network, anyone and any other contract (i.e., any other account on NEAR) can interact with it by calling its methods. Furthermore, any transactions involving the contract will also be included in the network's data stream, which means its activity can also be visible to any who listens to particular events. \n\nConsidering this, we advise to name methods using `snake_case` in all SDKs as this is compatible with the remainder of the NEAR ecosystem which is predominantly comprised of Rust contracts. \n:::\n\n---\n\n## Initializing the Contract\nIf your contract has an [initialization method](../anatomy/anatomy.md#initialization-functions) you can call it to\ninitialize the state. This is not necessary if your contract implements `default` values for the state.", "mimetype": "text/plain", "start_char_idx": 1788, "end_char_idx": 3467, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "70f4d31a-d218-4fcc-a7ba-a67404177909": {"__data__": {"id_": "70f4d31a-d218-4fcc-a7ba-a67404177909", "embedding": null, "metadata": {"file_path": "./near_dist/deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "084141dc-7c63-439d-baf0-f83b8f42a34f", "node_type": "4", "metadata": {}, "hash": "9716538eebe0314fa6949b0629149ca70f4eed0ee0b9d7eb50a872bffb398785", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f0214622-873e-4a00-bddb-b465478d9988", "node_type": "1", "metadata": {}, "hash": "ebabacfae44f4953a3977a42e81f2daca47108d4e214c29244d04cdd3ce11b4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c9e8474-9dde-4482-b943-d6a1ea1060ce", "node_type": "1", "metadata": {}, "hash": "8e7539ac170b77ba2cb536d854a9584b9b2d00a8cb6c5fa8e8392f752a70535b", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Call the initialization method (`init` in our examples)\n  near call <contractId> <initMethod> [<args>] --accountId <accountId>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Call the initialization method (`init` in our examples)\n  near contract call-function as-transaction <contractId> <initMethod> json-args [<args>] prepaid-gas '30 TeraGas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n:::info\nYou can initialize your contract [during deployment](#deploying-the-contract) using the `--initFunction` & `--initArgs` arguments.\n:::\n\n---\n\n## Calling the Contract\n\nOnce your contract is deployed you can interact with it right away using [NEAR CLI](../../../4.tools/cli.md).\n\n<hr className=\"subsection\" />\n\n### View methods\nView methods are those that perform **read-only** operations. Calling these methods is free, and do not require to specify which account is being used to make the call:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view <contractId> <methodName>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only <contractId> <methodName> text-args '' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n:::tip\nView methods have by default 200 TGAS for execution\n:::\n\n<hr className=\"subsection\" />\n\n### Change methods\n\nChange methods are those that perform both read and write operations. For these methods we do need to specify the account being used to make the call,\nsince that account will expend GAS in the call.", "mimetype": "text/plain", "start_char_idx": 3470, "end_char_idx": 5180, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c9e8474-9dde-4482-b943-d6a1ea1060ce": {"__data__": {"id_": "5c9e8474-9dde-4482-b943-d6a1ea1060ce", "embedding": null, "metadata": {"file_path": "./near_dist/deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "084141dc-7c63-439d-baf0-f83b8f42a34f", "node_type": "4", "metadata": {}, "hash": "9716538eebe0314fa6949b0629149ca70f4eed0ee0b9d7eb50a872bffb398785", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70f4d31a-d218-4fcc-a7ba-a67404177909", "node_type": "1", "metadata": {}, "hash": "8755d090d646d0da29acfa14759efa1e7827dedae08dbf53d76e807fb01e984f", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call <contractId> <methodName> <jsonArgs> --accountId <yourAccount> [--deposit <amount>] [--gas <GAS>]\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction <AccountId> <MethodName> json-args <JsonArgs> prepaid-gas <PrepaidGas> attached-deposit <AttachedDeposit> sign-as <AccountId>  network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 5182, "end_char_idx": 5683, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af9d1430-b59e-41be-bbf3-6aeb42e730f2": {"__data__": {"id_": "af9d1430-b59e-41be-bbf3-6aeb42e730f2", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake-state-changes-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6186ab01-59a8-452f-8e92-4c9a35053380", "node_type": "4", "metadata": {}, "hash": "3ee1f15e989c75e11930d9ac5bf32902b250b12409e2022281539af6ec3e97e0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: near-lake-state-changes-indexer\ntitle: NEAR Lake Indexer Tutorial\n---\n\n:::note Source code for the tutorial\n\n[`near-examples/near-lake-accounts-watcher`](https://github.com/near-examples/near-lake-accounts-watcher/tree/0.2.0): source code for a video tutorial on how to use the NEAR Lake Framework\n\n:::\n\n:::info Version 0.2.0\n\nThe video is based on the [`near-lake-framework`](/concepts/advanced/near-lake-framework) version 0.2.0\n\nAt the same time we're keeping the source code up to date with the latest version of the published crate.\n\n:::\n\nWe've created a video tutorial to empower the release announcement of [NEAR Lake Framework](/concepts/advanced/near-lake-framework).\n\nIn this tutorial you will build an indexer application to watch for any `StateChange`s affecting the account or a list of account provided.\n\n<iframe\n width=\"560\"\n height=\"315\"\n src=\"https://www.youtube.com/embed/GsF7I93K-EQ\"\n title=\"YouTube video player\"\n frameborder=\"0\"\n allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n allowfullscreen>\n</iframe>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1083, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a4fa06ef-3be3-4d0e-ae45-1be5fd950c72": {"__data__": {"id_": "a4fa06ef-3be3-4d0e-ae45-1be5fd950c72", "embedding": null, "metadata": {"file_path": "./near_dist/gas.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e", "node_type": "4", "metadata": {}, "hash": "ee87d59d079f78782d649e985673811d4129db2358e38e05226bb5ac99f4ca4e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d2fe7fb9-cdef-4716-9640-96e83d7eb883", "node_type": "1", "metadata": {}, "hash": "00b56b546b6f91060a89964b4157dd78c905dab0b08191b12d762d47c57d1f84", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: gas\ntitle: Gas \n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to query the gas price for a specific block or hash.\n\n---\n\n## Gas Price {#gas-price}\n\n> Returns gas price for a specific `block_height` or `block_hash`.\n>\n> - Using `[null]` will return the most recent block's gas price.\n\n- method: `gas_price`\n- params: `[block_height]`, `[\"block_hash\"]`, or `[null]`\n\n`[block_height]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"gas_price\",\n  \"params\": [17824600]\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.gasPrice(17824600);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=gas_price params:='[17824600]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n`[\"block_hash\"]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"gas_price\",\n  \"params\": [\"AXa8CHDQSA8RdFCt12rtpFraVq4fDUgJbLPxwbaZcZrj\"]\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.gasPrice(\n  \"AXa8CHDQSA8RdFCt12rtpFraVq4fDUgJbLPxwbaZcZrj\"\n);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1452, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d2fe7fb9-cdef-4716-9640-96e83d7eb883": {"__data__": {"id_": "d2fe7fb9-cdef-4716-9640-96e83d7eb883", "embedding": null, "metadata": {"file_path": "./near_dist/gas.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e", "node_type": "4", "metadata": {}, "hash": "ee87d59d079f78782d649e985673811d4129db2358e38e05226bb5ac99f4ca4e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4fa06ef-3be3-4d0e-ae45-1be5fd950c72", "node_type": "1", "metadata": {}, "hash": "7b02cc59752d6d76cbaf76738e130f80ea107260c93c823ab3d0dcbdea4b89d2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb01b592-ce04-4d0f-b915-3c877d5db335", "node_type": "1", "metadata": {}, "hash": "05559541f56cdce78980bced431e747a54bd9fef0dd00c7302bb99f087c9ac2e", "class_name": "RelatedNodeInfo"}}, "text": "0 method=gas_price params:='[\"AXa8CHDQSA8RdFCt12rtpFraVq4fDUgJbLPxwbaZcZrj\"]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n`[null]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"gas_price\",\n  \"params\": [null]\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.gasPrice(null);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=gas_price params:='[null]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"gas_price\": \"100000000\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future.", "mimetype": "text/plain", "start_char_idx": 1452, "end_char_idx": 3033, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb01b592-ce04-4d0f-b915-3c877d5db335": {"__data__": {"id_": "eb01b592-ce04-4d0f-b915-3c877d5db335", "embedding": null, "metadata": {"file_path": "./near_dist/gas.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e", "node_type": "4", "metadata": {}, "hash": "ee87d59d079f78782d649e985673811d4129db2358e38e05226bb5ac99f4ca4e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2fe7fb9-cdef-4716-9640-96e83d7eb883", "node_type": "1", "metadata": {}, "hash": "00b56b546b6f91060a89964b4157dd78c905dab0b08191b12d762d47c57d1f84", "class_name": "RelatedNodeInfo"}}, "text": "Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `gas_price` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to an archival node</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 3034, "end_char_idx": 4702, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e77f1f2d-05b3-43e3-b906-e064ce91dd7f": {"__data__": {"id_": "e77f1f2d-05b3-43e3-b906-e064ce91dd7f", "embedding": null, "metadata": {"file_path": "./near_dist/introduction.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c5210994-241a-4790-ad50-b5c51115f4e0", "node_type": "4", "metadata": {}, "hash": "fe5ec533001705191149b8ea6150a98bf695314cb5a42646cb646101708fc807", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: introduction\ntitle: Introduction\n---\n\nWhile developing your smart contract you will want to test that it works as it is supposed to, and moreover, does so securely. In NEAR we have developed tools to help you carry out such tests. Basically, there are two types of tests you can perform:\n\n1. **Unit Tests** to test methods individually. They are written in the contract's language and are executed locally.\n2. **Integration Tests** to test how your contract behaves in a realistic environment. You can write them in Rust or Typescript, and execute in a local Sandbox or the NEAR testnet.\n\nWe recommend all developers to implement both types of tests, since each is suitable to detect different types of errors and make your code intentional. Furthermore, we strongly recommend to first release all projects on testnet, and give users time to try them before releasing them on mainnet.\n\n---\n## Setting Up Testing\nTesting a smart contract involves using different pieces of software depending on which type of test you are performing. In order to save you from the trouble of setting them up, we recommend you copy the structure from one of our [example projects](https://github.com/near-examples).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1204, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc265aeb-2742-41de-b5dc-0751ed9fe6ed": {"__data__": {"id_": "bc265aeb-2742-41de-b5dc-0751ed9fe6ed", "embedding": null, "metadata": {"file_path": "./near_dist/push-notifications.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30086d84-e69b-4193-bf05-7de1c60412ad", "node_type": "4", "metadata": {}, "hash": "1fb9d066a3081fec7b27fc99efd6607cc9d3734e2b4e7ff1846e0d0cd44c9ebc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a98753a3-d515-4d53-b0eb-8a0a6d94f139", "node_type": "1", "metadata": {}, "hash": "6ace4bb5db2d9efa8690203fd0e1343ebc3c6c6a8e06a11db0f49fe0009ec594", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: push-notifications\ntitle: Push Notifications\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nPush messages enable your gateway to send notifications on desktop and mobile devices even when the users are not active.\n\nTo implement push notifications, you need to:\n\n1. Create a Service Worker\n2. Ask the user for permission to send push notifications\n2. Send the `client identifier` information to our notification server\n3. Add logic to display the notifications\n\n:::tip Example\nCheck our working example at https://github.com/near-examples/BOS-notifications\n:::\n\n---\n\n## Create the Service Worker\nPush notifications work by having a [service worker](https://codelabs.developers.google.com/codelabs/push-notifications#2) on the client side that listens for messages from the NEAR notifications server.\n\n<CodeTabs>\n    <Github fname=\"main.js\" language=\"js\" value=\"Create\"\n            url=\"https://github.com/near-examples/BOS-notifications/blob/main/app/scripts/main.js\"\n            start=\"16\" end=\"22\" />\n</CodeTabs>\n\nBrowsers readily provide native support for service workers, so you can easily check if a service worker exists, and create one if not.\n\n---\n\n## Subscribe to our Notifications\n\nIn order to have the `service worker` display notifications, you need to subscribe it to a notifications server.\n\nA notification server is identified by its `public key`, constraining that only the server holding the `private` counterpart can push notifications to the user.\n\n<CodeTabs>\n    <Github fname=\"main.js\" language=\"js\" value=\"Subscribe\"\n            url=\"https://github.com/near-examples/BOS-notifications/blob/main/app/scripts/main.js\"\n            start=\"44\" end=\"50\" />\n</CodeTabs>\n\n:::tip Permission\nWhen you subscribe to the service, the user will be asked for permission to be sent notifications.\n:::\n\n---\n\n## Create a Stream in our Server\n\nAfter you subscribe the user to a notifications server, share it with us so we can start sending you notifications!\n\nFor this, make a `post` request to our server, add which account you want to be notified for, and a URL identifying your gateway.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2132, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a98753a3-d515-4d53-b0eb-8a0a6d94f139": {"__data__": {"id_": "a98753a3-d515-4d53-b0eb-8a0a6d94f139", "embedding": null, "metadata": {"file_path": "./near_dist/push-notifications.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30086d84-e69b-4193-bf05-7de1c60412ad", "node_type": "4", "metadata": {}, "hash": "1fb9d066a3081fec7b27fc99efd6607cc9d3734e2b4e7ff1846e0d0cd44c9ebc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc265aeb-2742-41de-b5dc-0751ed9fe6ed", "node_type": "1", "metadata": {}, "hash": "519b2b98e7af4c82d204b4427bd206ffc0f321b47f1469e3e75f8a3ddae04ad1", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n    <Github fname=\"main.js\" language=\"js\" value=\"Stream\"\n            url=\"https://github.com/near-examples/BOS-notifications/blob/main/app/scripts/main.js\"\n            start=\"52\" end=\"64\" />\n</CodeTabs>\n\n:::tip\nThe `gateway` parameter is there just to help us keep track of who receives notifications.\n:::\n\n\n---\n\n## Handle Notifications\n\nWhen the user receives a notification, the `service worker` will be triggered, and you can add logic to display the notification.\n\n<CodeTabs>\n    <Github fname=\"sw.js\" language=\"js\" value=\"Notifications\"\n            url=\"https://github.com/near-examples/BOS-notifications/blob/main/app/scripts/sw.js\"\n            start=\"20\" end=\"37\" />\n</CodeTabs>\n\nFeel free to personalize the notification as you wish, and to add logic on what to do once the notification is clicked. In our example, we just open the Post page.\n\n<CodeTabs>\n    <Github fname=\"sw.js\" language=\"js\" value=\"Notifications\"\n            url=\"https://github.com/near-examples/BOS-notifications/blob/main/app/scripts/sw.js\"\n            start=\"39\" end=\"51\" />\n</CodeTabs>", "mimetype": "text/plain", "start_char_idx": 2134, "end_char_idx": 3213, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ba2f1f12-b4d0-4cb2-91f2-86d64dc917f5": {"__data__": {"id_": "ba2f1f12-b4d0-4cb2-91f2-86d64dc917f5", "embedding": null, "metadata": {"file_path": "./near_dist/meta-tx.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3", "node_type": "4", "metadata": {}, "hash": "39443cca43644eb163d9f5d9e3a6291b1812c4de0f9f42c1b52d65360508f2eb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98c51744-c2b6-4b49-abd1-3ca64beff32e", "node_type": "1", "metadata": {}, "hash": "d084edb14f5439621442c1d405ab57336cee3e402e72c6397190493a2def7345", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: meta-transactions\ntitle: Meta Transactions\nsidebar_label: NEP-366\n---\n\n[NEP-366](https://github.com/near/NEPs/pull/366) introduced the concept of meta\ntransactions to Near Protocol. This feature allows users to execute transactions\non NEAR without owning any gas or tokens. In order to enable this, users\nconstruct and sign transactions off-chain. A third party (the relayer) is used\nto cover the fees of submitting and executing the transaction.\n\n---\n\n## Overview\n\n![Flow chart of meta\ntransactions](https://raw.githubusercontent.com/near/NEPs/003e589e6aba24fc70dd91c9cf7ef0007ca50735/neps/assets/nep-0366/NEP-DelegateAction.png)\n_Credits for the diagram go to the NEP authors Alexander Fadeev and Egor\nUleyskiy._\n\nThe graphic shows an example use case for meta transactions. Alice owns an\namount of the fungible token `$FT`. She wants to transfer some to John. To do\nthat, she needs to call `ft_transfer(\"john\", 10)` on an account named `FT`.\n\nThe problem is, Alice has no NEAR tokens. She only has a NEAR account that\nsomeone else funded for her and she owns the private keys. She could create a\nsigned transaction that would make the `ft_transfer(\"john\", 10)` call. But\nvalidator nodes will not accept it, because she does not have the necessary Near\ntoken balance to purchase the gas.\n\nWith meta transactions, Alice can create a `DelegateAction`, which is very\nsimilar to a transaction. It also contains a list of actions to execute and a\nsingle receiver for those actions. She signs the `DelegateAction` and forwards\nit (off-chain) to a relayer. The relayer wraps it in a transaction, of which the\nrelayer is the signer and therefore pays the gas costs. If the inner actions\nhave an attached token balance, this is also paid for by the relayer.\n\nOn chain, the `SignedDelegateAction` inside the transaction is converted to an\naction receipt with the same `SignedDelegateAction` on the relayer's shard.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1914, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "98c51744-c2b6-4b49-abd1-3ca64beff32e": {"__data__": {"id_": "98c51744-c2b6-4b49-abd1-3ca64beff32e", "embedding": null, "metadata": {"file_path": "./near_dist/meta-tx.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3", "node_type": "4", "metadata": {}, "hash": "39443cca43644eb163d9f5d9e3a6291b1812c4de0f9f42c1b52d65360508f2eb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba2f1f12-b4d0-4cb2-91f2-86d64dc917f5", "node_type": "1", "metadata": {}, "hash": "e6a21c5cc45fd10ea8987057ae2f3f2c03088c304114ec0a278e03dfd3a58ef5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12", "node_type": "1", "metadata": {}, "hash": "a198baad06b9c68893faf6059b5bf5ae1130c6a225b4dd2656ca796dccd491f2", "class_name": "RelatedNodeInfo"}}, "text": "The\nreceipt is forwarded to the account from `Alice`, which will unpacked the\n`SignedDelegateAction` and verify that it is signed by Alice with a valid Nonce,\netc. If all checks are successful, a new action receipt with the inner actions\nas body is sent to `FT`. There, the `ft_transfer` call finally executes.\n\n---\n\n## Relayer\n\nMeta transactions only work with a [relayer](relayers.md), an off-chain service. Think of it as a server that accepts a `SignedDelegateAction`, does some checks on them and eventually forwards it inside a transaction to the network.\n\nA relayer may choose to offer their service for free but that's not going to be\nfinancially viable long-term. But they could easily have the user pay using\nother means, outside of Near blockchain. And with some tricks, it can even be\npaid using fungible tokens on Near.\n\nIn the example visualized above, the payment is done using $FT. Together with\nthe transfer to John, Alice also adds an action to pay 0.1 $FT to the relayer.\nThe relayer checks the content of the `SignedDelegateAction` and only processes\nit if this payment is included as the first action. In this way, the relayer\nwill be paid in the same transaction as John. \n\n:::warning Keep in mind\nThe payment to the relayer is still not guaranteed. It could be that\nAlice does not have sufficient `$FT` and the transfer fails. To mitigate, the\nrelayer should check the `$FT` balance of Alice first.\n:::\n\nUnfortunately, this still does not guarantee that the balance will be high\nenough once the meta transaction executes. The relayer could waste NEAR gas\nwithout compensation if Alice somehow reduces her $FT balance in just the right\nmoment. Some level of trust between the relayer and its user is therefore\nrequired.\n\n---\n\n## Limitations\n\n### Single receiver\n\nA meta transaction, like a normal transaction, can only have one receiver. It's\npossible to chain additional receipts afterwards. But crucially, there is no\natomicity guarantee and no roll-back mechanism.\n\n<hr class=\"subsection\" />\n\n### Accounts must be initialized \n\nAny transaction, including meta transactions, must use NONCEs to avoid replay\nattacks.", "mimetype": "text/plain", "start_char_idx": 1915, "end_char_idx": 4054, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12": {"__data__": {"id_": "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12", "embedding": null, "metadata": {"file_path": "./near_dist/meta-tx.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3", "node_type": "4", "metadata": {}, "hash": "39443cca43644eb163d9f5d9e3a6291b1812c4de0f9f42c1b52d65360508f2eb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "98c51744-c2b6-4b49-abd1-3ca64beff32e", "node_type": "1", "metadata": {}, "hash": "d084edb14f5439621442c1d405ab57336cee3e402e72c6397190493a2def7345", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "914ae2a2-e254-43b5-9bdf-fb4b8641fa9e", "node_type": "1", "metadata": {}, "hash": "16dd030a196d11befaa4545eabb72dba55e9f4c30f42e402f284287c7cc018dc", "class_name": "RelatedNodeInfo"}}, "text": "The NONCE must be chosen by Alice and compared to a NONCE stored on\nchain. This NONCE is stored on the access key information that gets initialized\nwhen creating an account. \n\n---\n\n## Constraints on the actions inside a meta transaction\n\nA transaction is only allowed to contain one single delegate action. Nested\ndelegate actions are disallowed and so are delegate actions next to each other\nin the same receipt.\n\n---\n\n## Gas costs for meta transactions\n\nMeta transactions challenge the traditional ways of charging gas for actions.\nLet's assume Alice uses a relayer to\nexecute actions with Bob as the receiver.\n\n1. The relayer purchases the gas for all inner actions, plus the gas for the\n   delegate action wrapping them.\n2. The cost of sending the inner actions and the delegate action from the\n   relayer to Alice's shard will be burned immediately. The condition `relayer\n   == Alice` determines which action `SEND` cost is taken (`sir` or `not_sir`).\n   Let's call this `SEND(1)`.\n3. On Alice's shard, the delegate action is executed, thus the `EXEC` gas cost\n   for it is burned. Alice sends the inner actions to Bob's shard. Therefore, we\n   burn the `SEND` fee again. This time based on `Alice == Bob` to figure out\n   `sir` or `not_sir`. Let's call this `SEND(2)`.\n4. On Bob's shard, we execute all inner actions and burn their `EXEC` cost.\n\nEach of these steps should make sense and not be too surprising. But the\nconsequence is that the implicit costs paid at the relayer's shard are\n`SEND(1)` + `SEND(2)` + `EXEC` for all inner actions plus `SEND(1)` + `EXEC` for\nthe delegate action. This might be surprising but hopefully with this\nexplanation it makes sense now!\n\n---\n\n## Gas refunds in meta transactions\n\nGas refund receipts work exactly like for normal transaction. At every step, the\ndifference between the pessimistic gas price and the actual gas price at that\nheight is computed and refunded. At the end of the last step, additionally all\nremaining gas is also refunded at the original purchasing price.", "mimetype": "text/plain", "start_char_idx": 4055, "end_char_idx": 6080, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "914ae2a2-e254-43b5-9bdf-fb4b8641fa9e": {"__data__": {"id_": "914ae2a2-e254-43b5-9bdf-fb4b8641fa9e", "embedding": null, "metadata": {"file_path": "./near_dist/meta-tx.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3", "node_type": "4", "metadata": {}, "hash": "39443cca43644eb163d9f5d9e3a6291b1812c4de0f9f42c1b52d65360508f2eb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12", "node_type": "1", "metadata": {}, "hash": "a198baad06b9c68893faf6059b5bf5ae1130c6a225b4dd2656ca796dccd491f2", "class_name": "RelatedNodeInfo"}}, "text": "The gas refunds\ngo to the signer of the original transaction, in this case the relayer. This is\nonly fair, since the relayer also paid for it.\n\n---\n\n## Balance refunds in meta transactions\n\nUnlike gas refunds, the protocol sends balance refunds to the predecessor\n(a.k.a. sender) of the receipt. This makes sense, as we deposit the attached\nbalance to the receiver, who has to explicitly reattach a new balance to new\nreceipts they might spawn.\n\nIn the world of meta transactions, this assumption is also challenged. If an\ninner action requires an attached balance (for example a transfer action) then\nthis balance is taken from the relayer.\n\nThe relayer can see what the cost will be before submitting the meta transaction\nand agrees to pay for it, so nothing wrong so far. But what if the transaction\nfails execution on Bob's shard? At this point, the predecessor is `Alice` and\ntherefore she receives the token balance refunded, not the relayer. This is\nsomething relayer implementations must be aware of since there is a financial\nincentive for Alice to submit meta transactions that have high balances attached\nbut will fail on Bob's shard.\n\n---\n\n## Function access keys in meta transactions\n\nFunction access keys can limit the allowance, the receiving contract, and the\ncontract methods. The allowance limitation acts slightly strange with meta\ntransactions.\n\nBut first, both the methods and the receiver will be checked as expected. That\nis, when the delegate action is unwrapped on Alice's shard, the access key is\nloaded from the DB and compared to the function call. If the receiver or method\nis not allowed, the function call action fails.\n\nFor allowance, however, there is no check. All costs have been covered by the\nrelayer. Hence, even if the allowance of the key is insufficient to make the call\ndirectly, indirectly through meta transaction it will still work.\n\nThis behavior is in the spirit of allowance limiting how much financial\nresources the user can use from a given account. But if someone were to limit a\nfunction access key to one trivial action by setting a very small allowance,\nthat is circumventable by going through a relayer. An interesting twist that\ncomes with the addition of meta transactions.", "mimetype": "text/plain", "start_char_idx": 6081, "end_char_idx": 8311, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "caef8f08-9993-440e-bb86-b4a4cf05ffff": {"__data__": {"id_": "caef8f08-9993-440e-bb86-b4a4cf05ffff", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4f9bf414-25dd-4493-8120-679eac39f9ca", "node_type": "1", "metadata": {}, "hash": "3c2ae1f44cfae11a848c5516cf3981a24d3e3033fa52dca50305d0e86cf0d22a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: integration-test\ntitle: Integration Tests\n#sidebar_label: \ud83e\udd7c Integration Test\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIntegration tests enable to deploy your contract in the NEAR `testnet` or a local `sandbox`, and create test-users to interact with it. In this way, you can thoroughly test your contract in a realistic environment.\n\nMoreover, when using the local `sandbox` you gain complete control of the network:\n\n1. Create test `Accounts` and manipulate their `State` and `Balance`.\n2. Simulate errors on callbacks.\n3. Control the time-flow and fast-forward into the future (Rust ready, TS coming soon).\n\n:::tip NEAR Workspaces\n\nIn NEAR, integration tests are implemented using a framework called **Workspaces**. Workspaces comes in two flavors: [\ud83e\udd80 Rust](https://github.com/near/workspaces-rs) and [\ud83c\udf10 Typescript](https://github.com/near/workspaces-js).\n\nAll of our [examples](https://github.com/near-examples/docs-examples) come with integration testing.\n\n:::\n\n---\n\n## Snippet I: Testing Hello NEAR\n\nLets take a look at the test of our [Quickstart Project](../quickstart.md) [\ud83d\udc4b Hello NEAR](https://github.com/near-examples/hello-near-examples), where we deploy the contract on an account and test it correctly retrieves and sets the greeting.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"main.ava.ts\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-ts/sandbox-test/main.ava.js\" start=\"11\" end=\"45\"/>\n  </Language>\n</CodeTabs>\n\n---\n\n## Snippet II: Testing Donations\n\nIn most cases we will want to test complex methods involving multiple users and money transfers. A perfect example for this is our [Donation Example](https://github.com/near-examples/donation-examples), which enables users to `donate` money to a beneficiary.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1909, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4f9bf414-25dd-4493-8120-679eac39f9ca": {"__data__": {"id_": "4f9bf414-25dd-4493-8120-679eac39f9ca", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "caef8f08-9993-440e-bb86-b4a4cf05ffff", "node_type": "1", "metadata": {}, "hash": "0bdbc76ced5469900d55fd54f697cd3f27cb0030fdc2b1c2a105686b44242c69", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cff89d4f-9e41-4280-b656-f03fa32e15fb", "node_type": "1", "metadata": {}, "hash": "48615db1cd82a6032e0a21968c106d06359b2f8eab9b5d6bba6ce3ff44ad088e", "class_name": "RelatedNodeInfo"}}, "text": "Lets see its integration tests\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"main.ava.ts\"\n            url=\"https://github.com/near-examples/donation-examples/blob/main/contract-ts/sandbox-test/main.ava.js\"\n            start=\"51\" end=\"75\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## Sandbox Testing\n\nNEAR Workspaces allows you to write tests once, and run them either on `testnet` or a local `Sandbox`. By **default**, Workspaces will start a **sandbox** and run your tests **locally**. Lets dive into the features of our framework and see how they can help you.\n\n### Spooning Contracts\n\n[Spooning a blockchain](https://coinmarketcap.com/alexandria/glossary/spoon-blockchain) is copying the data from one network into a different network. NEAR Workspaces makes it easy to copy data from Mainnet or Testnet contracts into your local Sandbox environment:\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" default>\n\n```ts\nconst refFinance = await root.importContract({\n  mainnetContract: 'v2.ref-finance.near',\n  blockId: 50_000_000,\n  withData: true,\n});\n```\n\nThis would copy the Wasm bytes and contract state from [v2.ref-finance.near](https://nearblocks.io/address/v2.ref-finance.near) to your local blockchain as it existed at block `50_000_000`. This makes use of Sandbox's special [patch state](#patch-state-on-the-fly) feature to keep the contract name the same, even though the top level account might not exist locally (note that this means it only works in Sandbox testing mode). You can then interact with the contract in a deterministic way the same way you interact with all other accounts created with near-workspaces.\n\n:::note\n\n`withData` will only work out-of-the-box if the contract's data is 50kB or less. This is due to the default configuration of RPC servers; see [the \"Heads Up\" note here](../../../5.api/rpc/contracts.md#view-contract-state-view-contract-state).", "mimetype": "text/plain", "start_char_idx": 1910, "end_char_idx": 3827, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cff89d4f-9e41-4280-b656-f03fa32e15fb": {"__data__": {"id_": "cff89d4f-9e41-4280-b656-f03fa32e15fb", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4f9bf414-25dd-4493-8120-679eac39f9ca", "node_type": "1", "metadata": {}, "hash": "3c2ae1f44cfae11a848c5516cf3981a24d3e3033fa52dca50305d0e86cf0d22a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324", "node_type": "1", "metadata": {}, "hash": "92d833ea6bc67eba6c4fba78421bc3e9316ee67c3f0cf34a77a662286b55bdab", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nSee a [TypeScript example of spooning](https://github.com/near/workspaces-js/blob/main/__tests__/05.spoon-contract-to-sandbox.ava.ts) contracts.\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\nSpecify the contract name from `testnet` you want to be pulling, and a specific block ID referencing back to a specific time. (Just in case the contract you're referencing has been changed or updated)\n\n```rust\nconst CONTRACT_ACCOUNT: &str = \"contract_account_name_on_testnet.testnet\";\nconst BLOCK_HEIGHT: BlockHeight = 12345;\n```\n\nCreate a function called `pull_contract` which will pull the contract's `.wasm` file from the chain and deploy it onto your local sandbox. You'll have to re-initialize it with all the data to run tests.\n\n```rust\nasync fn pull_contract(owner: &Account, worker: &Worker<Sandbox>) -> anyhow::Result<Contract> {\n    let testnet = workspaces::testnet_archival();\n    let contract_id: AccountId = CONTRACT_ACCOUNT.parse()?;\n```\n\nThis next line will actually pull down the relevant contract from testnet and set an initial balance on it with 1000 NEAR.\n\n```rust\n    let contract = worker\n        .import_contract(&contract_id, &testnet)\n        .initial_balance(parse_near!(\"1000 N\"))\n        .block_height(BLOCK_HEIGHT)\n        .transact()\n        .await?;\n```\n\nFollowing that you'll have to init the contract again with your metadata.\nThis is because the contract's data is too big for the RPC service to pull down. (limits are set to 50Mb)\n\n```rust\n    owner\n        .call(&worker, contract.id(), \"init_method_name\")\n        .args_json(serde_json::json!({\n            \"arg1\": value1,\n            \"arg2\": value2,\n        }))?\n        .transact()\n        .await?;\n    Ok(contract)\n}\n```\n\n</TabItem>\n\n</Tabs>\n\n### Patch State on the Fly\n\nIn Sandbox-mode, you can add or modify any contract state, contract code, account or access key with `patchState`.", "mimetype": "text/plain", "start_char_idx": 3829, "end_char_idx": 5707, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324": {"__data__": {"id_": "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cff89d4f-9e41-4280-b656-f03fa32e15fb", "node_type": "1", "metadata": {}, "hash": "48615db1cd82a6032e0a21968c106d06359b2f8eab9b5d6bba6ce3ff44ad088e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b02accb2-27d0-453e-be03-bf35d0f2f2d5", "node_type": "1", "metadata": {}, "hash": "f8bf35f592671c50eded87c0a86942e9c71f7a720403dc84bb2fc386ed9af929", "class_name": "RelatedNodeInfo"}}, "text": ":::tip\n\nYou can alter contract code, accounts, and access keys using normal transactions via the `DeployContract`, `CreateAccount`, and `AddKey` [actions](https://nomicon.io/RuntimeSpec/Actions#addkeyaction). But this limits you to altering your own account or sub-account. `patchState` allows you to perform these operations on any account.\n\n:::\n\nKeep in mind that you cannot perform arbitrary mutation on contract state with transactions since transactions can only include contract calls that mutate state in a contract-programmed way. For example, with an NFT contract, you can perform some operation with NFTs you have ownership of, but you cannot manipulate NFTs that are owned by other accounts since the smart contract is coded with checks to reject that. This is the expected behavior of the NFT contract. However, you may want to change another person's NFT for a test setup. This is called \"arbitrary mutation on contract state\" and can be done with `patchState`:\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" >\n\n```js\n    const {contract, ali} = t.context.accounts;\n    // Contract must have some state for viewState & patchState to work\n    await ali.call(contract, 'set_status', {message: 'hello'});\n    // Get state\n    const state = await contract.viewState();\n    // Get raw value\n    const statusMessage = state.get('STATE', {schema, type: StatusMessage});\n    // Update contract state\n    statusMessage.records.push(\n      new BorshRecord({k: 'alice.near', v: 'hello world'}),\n    );\n    // Serialize and patch state back to runtime\n    await contract.patchState(\n      'STATE',\n      borsh.serialize(schema, statusMessage),\n    );\n    // Check again that the update worked\n    const result = await contract.view('get_status', {\n      account_id: 'alice.near',\n    });\n    t.is(result, 'hello world');\n```\n\nTo see a complete example of how to do this, see the [patch-state test](https://github.com/near/workspaces-js/blob/main/__tests__/02.patch-state.ava.ts).", "mimetype": "text/plain", "start_char_idx": 5709, "end_char_idx": 7711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b02accb2-27d0-453e-be03-bf35d0f2f2d5": {"__data__": {"id_": "b02accb2-27d0-453e-be03-bf35d0f2f2d5", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324", "node_type": "1", "metadata": {}, "hash": "92d833ea6bc67eba6c4fba78421bc3e9316ee67c3f0cf34a77a662286b55bdab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf428cce-f80c-4389-aa05-01e3d0af4546", "node_type": "1", "metadata": {}, "hash": "551b2cb099e78dc26a07170b9244833a04c34833eaf9243c326b842fb0c7cb82", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\" >\n\n```rust\n    // Grab STATE from the testnet status_message contract. This contract contains the following data:\n    //   get_status(dev-20211013002148-59466083160385) => \"hello from testnet\"\n    let (testnet_contract_id, status_msg) = {\n        let worker = workspaces::testnet().await?;\n        let contract_id: AccountId = TESTNET_PREDEPLOYED_CONTRACT_ID\n            .parse()\n            .map_err(anyhow::Error::msg)?;\n        let mut state_items = worker.view_state(&contract_id, None).await?;\n        let state = state_items.remove(b\"STATE\".as_slice()).unwrap();\n        let status_msg = StatusMessage::try_from_slice(&state)?;\n        (contract_id, status_msg)\n    };\n    info!(target: \"spooning\", \"Testnet: {:?}\", status_msg);\n    // Create our sandboxed environment and grab a worker to do stuff in it:\n    let worker = workspaces::sandbox().await?;\n    // Deploy with the following status_message state: sandbox_contract_id => \"hello from sandbox\"\n    let sandbox_contract = deploy_status_contract(&worker, \"hello from sandbox\").await?;\n    // Patch our testnet STATE into our local sandbox:\n    worker\n        .patch_state(\n            sandbox_contract.id(),\n            \"STATE\".as_bytes(),\n            &status_msg.try_to_vec()?,\n        )\n        .await?;\n    // Now grab the state to see that it has indeed been patched:\n    let status: String = sandbox_contract\n        .view(\n            &worker,\n            \"get_status\",\n            serde_json::json!({\n                \"account_id\": testnet_contract_id,\n            })\n            .to_string()\n            .into_bytes(),\n        )\n        .await?\n        .json()?;\n    info!(target: \"spooning\", \"New status patched: {:?}\", status);\n    assert_eq!(&status, \"hello from testnet\");\n```\n\n</TabItem>\n\n</Tabs>\n\nAs an alternative to `patchState`, you can stop the node, dump state at genesis, edit the genesis, and restart the node.\nThis approach is more complex to do and also cannot be performed without restarting the node.", "mimetype": "text/plain", "start_char_idx": 7713, "end_char_idx": 9748, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf428cce-f80c-4389-aa05-01e3d0af4546": {"__data__": {"id_": "cf428cce-f80c-4389-aa05-01e3d0af4546", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b02accb2-27d0-453e-be03-bf35d0f2f2d5", "node_type": "1", "metadata": {}, "hash": "f8bf35f592671c50eded87c0a86942e9c71f7a720403dc84bb2fc386ed9af929", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "df47ad8d-87cf-4371-8120-c90276dea7de", "node_type": "1", "metadata": {}, "hash": "c52e101840e6ca2d067e2e7e47b538dc4e546b33f17d824c05c0ec5af1b320f6", "class_name": "RelatedNodeInfo"}}, "text": "### Time Traveling\n\n`workspaces` offers support for forwarding the state of the blockchain to the future. This means contracts which require time sensitive data do not need to sit and wait the same amount of time for blocks on the sandbox to be produced. We can simply just call `worker.fast_forward` to get us further in time:\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" default>\n\n  <Github fname=\"fast-forward.ava.ts\" language=\"js\"\n          url=\"https://github.com/near/near-workspaces-js/blob/main/__tests__/08.fast-forward.ava.ts\"\n          start=\"34\" end=\"53\" />\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n#[tokio::test]\nasync fn test_contract() -> anyhow::Result<()> {\n    let worker = workspaces::sandbox().await?;\n    let contract = worker.dev_deploy(WASM_BYTES);\n    let blocks_to_advance = 10000;\n    worker.fast_forward(blocks_to_advance);\n    // Now, \"do_something_with_time\" will be in the future and can act on future time-related state.\n    contract.call(&worker, \"do_something_with_time\")\n        .transact()\n        .await?;\n}\n```\n\n_[See the full example on Github](https://github.com/near/workspaces-rs/blob/main/examples/src/fast_forward.rs)._\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Using Testnet\n\nNEAR Workspaces is set up so that you can write tests once and run them against a local Sandbox node (the default behavior) or against [NEAR TestNet](../../../1.concepts/basics/networks.md). Some reasons this might be helpful:\n\n* Gives higher confidence that your contracts work as expected\n* You can test against deployed testnet contracts\n* If something seems off in Sandbox mode, you can compare it to testnet\n\n:::tip\n\nIn order to use Workspaces in testnet mode you will need to have a `testnet` account.\nYou can create one [here](https://testnet.mynearwallet.com/).\n\n:::\n\nYou can switch to testnet mode in three ways.\n\n1.", "mimetype": "text/plain", "start_char_idx": 9750, "end_char_idx": 11626, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "df47ad8d-87cf-4371-8120-c90276dea7de": {"__data__": {"id_": "df47ad8d-87cf-4371-8120-c90276dea7de", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf428cce-f80c-4389-aa05-01e3d0af4546", "node_type": "1", "metadata": {}, "hash": "551b2cb099e78dc26a07170b9244833a04c34833eaf9243c326b842fb0c7cb82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6c7a7b3-06a9-49b3-8fa6-42f86e57b678", "node_type": "1", "metadata": {}, "hash": "591b86a8c934c478ae8a4baf405700545102e44dc800bc70ccfcc3ae1567a891", "class_name": "RelatedNodeInfo"}}, "text": "When creating Worker set network to `testnet` and pass your master account:\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\"  default>\n\n```ts\nconst worker = await Worker.init({\n network: 'testnet',\n testnetMasterAccountId: '<yourAccountName>',\n})\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\" >\n\n```rust\n#[tokio::main]  // or whatever runtime we want\nasync fn main() -> anyhow::Result<()> {\n// Create a sandboxed environment.\n// NOTE: Each call will create a new sandboxed environment\nlet worker = workspaces::sandbox().await?;\n// or for testnet:\nlet worker = workspaces::testnet().await?;\n}\n```\n\n</TabItem>\n\n</Tabs>\n\n2. Set the `NEAR_WORKSPACES_NETWORK` and `TESTNET_MASTER_ACCOUNT_ID` environment variables when running your tests:\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\"  default>\n\n```bash\nNEAR_WORKSPACES_NETWORK=testnet TESTNET_MASTER_ACCOUNT_ID=<your master account Id> node test.js\n```\n\nIf you set this environment variables and pass `{network: 'testnet', testnetMasterAccountId: <masterAccountId>}` to `Worker.init`, the config object takes precedence.\n\n</TabItem>\n\n</Tabs>\n\n3. If using `near-workspaces` with AVA, you can use a custom config file. Other test runners allow similar config files; adjust the following instructions for your situation.\n\n<Tabs groupId=\"code-tabs\">\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\"  default>\n\nCreate a file in the same directory as your `package.json` called `ava.testnet.config.cjs` with the following contents:\n\n```js\nmodule.exports = {\n ...require('near-workspaces/ava.testnet.config.cjs'),\n ...require('./ava.config.cjs'),\n};\nmodule.exports.environmentVariables = {\n    TESTNET_MASTER_ACCOUNT_ID: '<masterAccountId>',\n};\n```\n\nThe [near-workspaces/ava.testnet.config.cjs](https://github.com/near/workspaces-js/blob/main/ava.testnet.config.cjs) import sets the `NEAR_WORKSPACES_NETWORK` environment variable for you.", "mimetype": "text/plain", "start_char_idx": 11627, "end_char_idx": 13547, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d6c7a7b3-06a9-49b3-8fa6-42f86e57b678": {"__data__": {"id_": "d6c7a7b3-06a9-49b3-8fa6-42f86e57b678", "embedding": null, "metadata": {"file_path": "./near_dist/integration-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5", "node_type": "4", "metadata": {}, "hash": "4dee1b34a095ce3dfe758b92fb550f9e4a6c25189b3e1ba875ade66c1d563ce2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "df47ad8d-87cf-4371-8120-c90276dea7de", "node_type": "1", "metadata": {}, "hash": "c52e101840e6ca2d067e2e7e47b538dc4e546b33f17d824c05c0ec5af1b320f6", "class_name": "RelatedNodeInfo"}}, "text": "A benefit of this approach is that you can then easily ignore files that should only run in Sandbox mode.\n\nNow you'll also want to add a `test:testnet` script to your `package.json`'s `scripts` section:\n\n```diff\n\"scripts\": {\n  \"test\": \"ava\",\n+  \"test:testnet\": \"ava --config ./ava.testnet.config.cjs\"\n}\n```\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Additional Media\n\n#### Test Driven Design Using Workspaces and AVA {#test-driven-design}\n\nThe video below walks through how to apply TDD with Workspaces and AVA for a simple contract:\n\n<iframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube-nocookie.com/embed/LCu03IYwu1I\"\n  title=\"TDD Using Workspaces\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n  allowfullscreen>\n</iframe>", "mimetype": "text/plain", "start_char_idx": 13548, "end_char_idx": 14342, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bd8a9ae7-67a4-4c05-a714-675d9dde630d": {"__data__": {"id_": "bd8a9ae7-67a4-4c05-a714-675d9dde630d", "embedding": null, "metadata": {"file_path": "./near_dist/get-metadata.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2d8868-dec7-4dbc-ab3a-b5b263ba4032", "node_type": "4", "metadata": {}, "hash": "b86cb8a0ab143033fde073d420477bbf9eb520991989fb80bd1e0e27e9c23255", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view token.v2.ref-finance.near ft_metadata\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n{\n  spec: \"ft-1.0.0\",\n  name: \"Ref Finance Token\",\n  symbol: \"REF\",\n  icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='16 24 248 248' style='background: %23000'%3E%3Cpath d='M164,164v52h52Zm-45-45,20.4,20.4,20.6-20.6V81H119Zm0,18.39V216h41V137.19l-20.6,20.6ZM166.5,81H164v33.81l26.16-26.17A40.29,40.29,0,0,0,166.5,81ZM72,153.19V216h43V133.4l-11.6-11.61Zm0-18.38,31.4-31.4L115,115V81H72ZM207,121.5h0a40.29,40.29,0,0,0-7.64-23.66L164,133.19V162h2.5A40.5,40.5,0,0,0,207,121.5Z' fill='%23fff'/%3E%3Cpath d='M189 72l27 27V72h-27z' fill='%2300c08b'/%3E%3C/svg%3E%0A\",\n  reference: null,\n  reference_hash: null,\n  decimals: 18\n}\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 791, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "805cc46d-cb44-40e3-9fb2-ef283e04ac0f": {"__data__": {"id_": "805cc46d-cb44-40e3-9fb2-ef283e04ac0f", "embedding": null, "metadata": {"file_path": "./near_dist/big-query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850", "node_type": "4", "metadata": {}, "hash": "3daaf49f4fc5ab5b3eaf738cab8dd81f90839646db2abfbb3776cf9e0b8b54b9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2262f733-04df-4fd8-964b-b47cca0f50f7", "node_type": "1", "metadata": {}, "hash": "630c5fa2ca534afbc931a9c0fe68740b040c9c6d6b13138f2a6f9e5d05247281", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: big-query\ntitle: BigQuery Public Dataset\nsidebar_label: BigQuery\n---\n\nBlockchain data indexing in NEAR Public Lakehouse is for anyone wanting to understand blockchain data. This includes:\n\n- **Users**: create queries to track NEAR assets, monitor transactions, or analyze on-chain events at a massive scale.\n- **Researchers**: use indexed data for data science tasks, including on-chain activities, identifying trends, or feeding AI/ML pipelines for predictive analysis.\n- **Startups**: can use NEAR's indexed data for deep insights on user engagement, smart contract utilization, or insights across tokens and NFT adoption.\n\nBenefits:\n\n- **NEAR instant insights**: Historical on-chain data queried at scale.\n- **Cost-effective**: eliminate the need to store and process bulk NEAR protocol data; query as little or as much data as preferred.\n- **Easy to use**: no prior experience with blockchain technology is required; bring a general knowledge of SQL to unlock insights.\n\n## Getting started\n\n1. Login into your [Google Cloud Account](https://console.cloud.google.com/).\n2. Open the [NEAR Protocol BigQuery Public Dataset](https://console.cloud.google.com/marketplace/product/bigquery-public-data/crypto-near-mainnet).\n3. Click in the <kbd>[VIEW DATASET](https://console.cloud.google.com/bigquery?p=bigquery-public-data&d=crypto_near_mainnet_us&page=dataset)</kbd> button.\n4. Click in the <kbd>+</kbd> to create a new tab and write your query, click in the <kbd>RUN</kbd> button, and check the `Query results` below the query.\n5. Done :)\n\n:::info\n\nThe [NEAR Public Lakehouse repository](https://github.com/near/near-public-lakehouse) contains the source code for ingesting NEAR Protocol data stored as JSON files in AWS S3 by [NEAR Lake Indexer](https://github.com/near/near-lake-indexer).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1799, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2262f733-04df-4fd8-964b-b47cca0f50f7": {"__data__": {"id_": "2262f733-04df-4fd8-964b-b47cca0f50f7", "embedding": null, "metadata": {"file_path": "./near_dist/big-query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850", "node_type": "4", "metadata": {}, "hash": "3daaf49f4fc5ab5b3eaf738cab8dd81f90839646db2abfbb3776cf9e0b8b54b9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "805cc46d-cb44-40e3-9fb2-ef283e04ac0f", "node_type": "1", "metadata": {}, "hash": "ab111542f3eebdbe31b7c6fe8210c1c565890bc4c9ac1f748a3aca41d8e1d5d0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "35a63076-c94e-4486-be6b-f4840cfce825", "node_type": "1", "metadata": {}, "hash": "1b14e0a00667cf69c8b45a3ec36df0466e113b474342755adc27376becfbe027", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n### Example Queries\n\n- _How many unique signers and accounts have interacted with my smart contract per day?_\n\n```sql\nSELECT\n  ra.block_date collected_for_day,\n  COUNT(DISTINCT t.signer_account_id) as total_signers,\n  COUNT(DISTINCT ra.receipt_predecessor_account_id) as total_accounts\nFROM `bigquery-public-data.crypto_near_mainnet_us.receipt_actions` ra\n  JOIN `bigquery-public-data.crypto_near_mainnet_us.receipt_origin_transaction` ro ON ro.receipt_id = ra.receipt_id\n  JOIN `bigquery-public-data.crypto_near_mainnet_us.transactions` t ON ro.originated_from_transaction_hash = t.transaction_hash\nWHERE ra.action_kind = 'FUNCTION_CALL'\n  AND ra.receipt_receiver_account_id = 'social.near' -- change to your contract\nGROUP BY 1\nORDER BY 1 DESC;\n```\n\n## How much it costs?\n\n- NEAR pays for the storage and doesn't charge you to use the public dataset.\n  > To learn more about BigQuery public datasets [check this page](https://cloud.google.com/bigquery/public-data).\n- Google GCP charges for the queries that you perform on the data. For example, in today's price \"Sep 1st, 2023\" the On-demand (per TB) query pricing is $6.25 per TB where the first 1 TB per month is free.\n  > Check [Google's pricing page](https://cloud.google.com/bigquery/pricing#analysis_pricing_models) for detailed pricing info, options, and best practices.\n\n:::tip\nYou can check how much data it will query before running it in the BigQuery console UI. Again, since BigQuery uses a columnar data structure and partitions, it's recommended to select only the columns and partitions (`block_date`) needed to avoid unnecessary query costs.\n:::\n\n![Query Costs](/docs/BQ_Query_Cost.png \"BQ Query Costs\")\n\n## Architecture\n\nThe data is loaded in a streaming fashion using [Databricks Autoloader](https://docs.gcp.databricks.com/ingestion/auto-loader/index.html) into raw/bronze tables, and transformed with [Databricks Delta Live Tables](https://www.databricks.com/product/delta-live-tables) streaming jobs into cleaned/enriched/silver tables.", "mimetype": "text/plain", "start_char_idx": 1801, "end_char_idx": 3816, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "35a63076-c94e-4486-be6b-f4840cfce825": {"__data__": {"id_": "35a63076-c94e-4486-be6b-f4840cfce825", "embedding": null, "metadata": {"file_path": "./near_dist/big-query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850", "node_type": "4", "metadata": {}, "hash": "3daaf49f4fc5ab5b3eaf738cab8dd81f90839646db2abfbb3776cf9e0b8b54b9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2262f733-04df-4fd8-964b-b47cca0f50f7", "node_type": "1", "metadata": {}, "hash": "630c5fa2ca534afbc931a9c0fe68740b040c9c6d6b13138f2a6f9e5d05247281", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed3f5b90-c58a-4802-a644-eec5df1f2061", "node_type": "1", "metadata": {}, "hash": "fc63b19831bc36dfbaba54360a0055c6d517eb74f6f44c7709149dd526607cb2", "class_name": "RelatedNodeInfo"}}, "text": "The silver tables are also copied into the [GCP BigQuery Public Dataset](https://cloud.google.com/bigquery/public-data).\n\n![Architecture](/docs/Architecture.png \"Architecture\")\n\n:::info\n\n[Databricks Medallion Architecture](https://www.databricks.com/glossary/medallion-architecture).\n\n:::\n\n## Available Data\n\nThe current data that NEAR is providing was inspired by [NEAR Indexer for Explorer](https://github.com/near/near-indexer-for-explorer/).\n\n:::info\nNEAR plans to improve the data available in the NEAR Public Lakehouse making it easier to consume by denormalizing some tables.\n:::\n\nThe tables available in the NEAR Public Lakehouse are:\n\n- **blocks**: A structure that represents an entire block in the NEAR blockchain. `Block` is the main entity in NEAR Protocol blockchain. Blocks are produced in NEAR Protocol every second.\n- **chunks**: A structure that represents a chunk in the NEAR blockchain. `Chunk` of a `Block` is a part of a `Block` from a `Shard`. The collection of `Chunks` of the `Block` forms the NEAR Protocol Block. `Chunk` contains all the structures that make the `Block`: `Transactions`, [`Receipts`](https://nomicon.io/RuntimeSpec/Receipts), and `Chunk Header`.\n- **transactions**: [`Transaction`](../../2.build/6.data-infrastructure/lake-data-structures/transaction.mdx#definition) is the main way of interaction between a user and a blockchain. Transaction contains: Signer account ID, Receiver account ID, and Actions.\n- **execution_outcomes**: Execution outcome is the result of execution of `Transaction` or `Receipt`. In the result of the Transaction execution will always be a Receipt.\n- **receipt_details**: All cross-contract (we assume that each account lives in its own shard) communication in Near happens through Receipts. Receipts are stateful in a sense that they serve not only as messages between accounts but also can be stored in the account storage to await `DataReceipts`. Each receipt has a `predecessor_id` (who sent it) and `receiver_id` the current account.\n- **receipt_origin**: Tracks the transaction that originated the receipt.", "mimetype": "text/plain", "start_char_idx": 3818, "end_char_idx": 5902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ed3f5b90-c58a-4802-a644-eec5df1f2061": {"__data__": {"id_": "ed3f5b90-c58a-4802-a644-eec5df1f2061", "embedding": null, "metadata": {"file_path": "./near_dist/big-query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850", "node_type": "4", "metadata": {}, "hash": "3daaf49f4fc5ab5b3eaf738cab8dd81f90839646db2abfbb3776cf9e0b8b54b9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "35a63076-c94e-4486-be6b-f4840cfce825", "node_type": "1", "metadata": {}, "hash": "1b14e0a00667cf69c8b45a3ec36df0466e113b474342755adc27376becfbe027", "class_name": "RelatedNodeInfo"}}, "text": "- **receipt_actions**: Action Receipt represents a request to apply actions on the `receiver_id` side. It could be derived as a result of a `Transaction` execution or another `ACTION` Receipt processing. Action kind can be: `ADD_KEY`, `CREATE_ACCOUNT`, `DELEGATE_ACTION`, `DELETE_ACCOUNT`, `DELETE_KEY`, `DEPLOY_CONTRACT`, `FUNCTION_CALL`, `STAKE`, `TRANSFER`.\n- **receipts (view)**: It's recommended to select only the columns and partitions (`block_date`) needed to avoid unnecessary query costs. This view join the receipt details, the transaction that originated the receipt and the receipt execution outcome.\n- **account_changes**: Each account has an associated state where it stores its metadata and all the contract-related data (contract's code + storage).\n\n:::info Additional information about the data\n\n- Skipped Blocks: NEAR Blockchain can contain skipped blocks, e.g. block `57730443`. For these cases we can find the block for the chunk data using the `prev_block_hash` column, e.g. `SELECT * FROM chunks c JOIN blocks b ON c.chunk.header.prev_block_hash = b.header.prev_hash`.\n\n:::\n\n:::note References\n\n- [Protocol documentation](../../1.concepts/basics/protocol.md)\n- [Near Data flow](../../1.concepts/data-flow/near-data-flow.md)\n- [Lake Data structures](./lake-data-structures/toc.mdx)\n- [Protocol specification](https://nomicon.io/)\n\n:::", "mimetype": "text/plain", "start_char_idx": 5903, "end_char_idx": 7259, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2717868-492b-486c-b3af-4ce4118ad6a2": {"__data__": {"id_": "e2717868-492b-486c-b3af-4ce4118ad6a2", "embedding": null, "metadata": {"file_path": "./near_dist/naj-contract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f", "node_type": "4", "metadata": {}, "hash": "89094ba36b3790b0efbb28f8e80eb4d52fb74fa8ca621f01b7d98c7b089b3cb1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7ed584f0-5395-4516-99b3-2a758411f9ff", "node_type": "1", "metadata": {}, "hash": "5d03a43ac2e0871af041ca5a06fdf490a62b3a08987810a84846d4f969b4084a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: contract\ntitle: Contract\nsidebar_label: Contract\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nWhen you instantiate an instance of `Contract` you need to specify the names of the functions you have on your smart contract.\nThen the new instance of `Contract` will have methods with the same names as your smart contract functions.\nFor example if you deployed a contract with `my_smart_contract_function` function on it, then this will work:\n\n```js\nconst contract = new Contract(account, \"example-contract.testnet\", {\n  changeMethods: [\"my_smart_contract_function\"], // your smart-contract has a function `my_smart_contract_function`\n});\n// `contract` object has `my_smart_contract_function` function on it:\ncontract.my_smart_contract_function();\n```\n\n### Load Contract {#load-contract}\n\n<Tabs>\n<TabItem value=\"Standard\" label=\"Standard\" default>\n\n```js\nconst { Contract } = nearAPI;\n\nconst contract = new Contract(\n  account, // the account object that is connecting\n  \"example-contract.testnet\",\n  {\n    // name of contract you're connecting to\n    viewMethods: [\"getMessages\"], // view methods do not change state but usually return a value\n    changeMethods: [\"addMessage\"], // change methods modify state\n  }\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `Contract`](https://near.github.io/near-api-js/classes/_near_js_accounts.contract.Contract.html)\n\n</TabItem>\n<TabItem value=\"wallet\" label=\"Using Wallet\">\n\n```js\nconst { Contract } = nearAPI;\n\nconst contract = new Contract(\n  wallet.account(), // the account object that is connecting\n  \"example-contract.testnet\",\n  {\n    // name of contract you're connecting to\n    viewMethods: [\"getMessages\"], // view methods do not change state but usually return a value\n    changeMethods: [\"addMessage\"], // change methods modify state\n  }\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `Contract`](https://near.github.io/near-api-js/classes/_near_js_accounts.contract.Contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2018, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7ed584f0-5395-4516-99b3-2a758411f9ff": {"__data__": {"id_": "7ed584f0-5395-4516-99b3-2a758411f9ff", "embedding": null, "metadata": {"file_path": "./near_dist/naj-contract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f", "node_type": "4", "metadata": {}, "hash": "89094ba36b3790b0efbb28f8e80eb4d52fb74fa8ca621f01b7d98c7b089b3cb1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2717868-492b-486c-b3af-4ce4118ad6a2", "node_type": "1", "metadata": {}, "hash": "a2ddd46354af25ba75598f86d4b64aa57fd864d24bb4145674ef0a43887a8d94", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46eb94c9-9984-4409-ba1a-3c8ff155ff09", "node_type": "1", "metadata": {}, "hash": "7efe7cf1eced64a87be162c2420fb361937c47d29f8dfe91eade5a8dd4cbead7", "class_name": "RelatedNodeInfo"}}, "text": "html)\n\n</TabItem>\n</Tabs>\n\n### Call Contract {#call-contract}\n\n<Tabs>\n<TabItem value=\"method\" label=\"Change Method\" default>\n\n```js\nconst contract = new Contract(account, \"example-contract.testnet\", {\n  changeMethods: [\"method_name\"],\n});\nawait contract.method_name(\n  {\n    arg_name: \"value\", // argument name and value - pass empty object if no args required\n  },\n  \"300000000000000\", // attached GAS (optional)\n  \"1000000000000000000000000\" // attached deposit in yoctoNEAR (optional)\n);\n```\n\n</TabItem>\n<TabItem value=\"callback\" label=\"Change Method w/ callbackUrl and meta\">\n\n```js\nconst contract = new Contract(account, \"example-contract.testnet\", {\n  changeMethods: [\"method_name\"],\n});\nawait contract.method_name({\n  callbackUrl: \"https://example.com/callback\", // callbackUrl after the transaction approved (optional)\n  meta: \"some info\", // meta information NEAR Wallet will send back to the application.", "mimetype": "text/plain", "start_char_idx": 2018, "end_char_idx": 2932, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46eb94c9-9984-4409-ba1a-3c8ff155ff09": {"__data__": {"id_": "46eb94c9-9984-4409-ba1a-3c8ff155ff09", "embedding": null, "metadata": {"file_path": "./near_dist/naj-contract.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f", "node_type": "4", "metadata": {}, "hash": "89094ba36b3790b0efbb28f8e80eb4d52fb74fa8ca621f01b7d98c7b089b3cb1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7ed584f0-5395-4516-99b3-2a758411f9ff", "node_type": "1", "metadata": {}, "hash": "5d03a43ac2e0871af041ca5a06fdf490a62b3a08987810a84846d4f969b4084a", "class_name": "RelatedNodeInfo"}}, "text": "`meta` will be attached to the `callbackUrl` as a url param\n  args: {\n    arg_name: \"value\", // argument name and value - pass empty object if no args required\n  },\n  gas: 300000000000000, // attached GAS (optional)\n  amount: 1000000000000000000000000, // attached deposit in yoctoNEAR (optional)\n});\n```\n\n</TabItem>\n<TabItem value=\"view\" label=\"View Method\">\n\n```js\nconst contract = new Contract(account, \"example-contract.testnet\", {\n  viewMethods: [\"view_method_name\"],\n});\nconst response = await contract.view_method_name();\n```\n\n</TabItem>\n<TabItem value=\"args\" label=\"View Method w/ args\">\n\n```js\nconst contract = new Contract(account, \"example-contract.testnet\", {\n  viewMethods: [\"view_method_name\"],\n});\nconst response = await contract.view_method_name({ arg_name: \"arg_value\" });\n```\n\n</TabItem>\n</Tabs>\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `Contract`](https://near.github.io/near-api-js/classes/_near_js_accounts.contract.Contract.html)\n\n[//]: # \"## Transactions {#transactions}\"\n[//]: # \"A [Transaction](/concepts/protocol/transactions) is a collection of Actions, and there are few types of Actions.\"\n[//]: # \"For every type of Action there is a function on Account that you can use to invoke the Action, but Account also exposes `signAndSendTransaction` function which you can use to build and invoke a batch transaction.\"", "mimetype": "text/plain", "start_char_idx": 2933, "end_char_idx": 4298, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9c5f1e4d-e34d-42de-98ad-b55cd93ae655": {"__data__": {"id_": "9c5f1e4d-e34d-42de-98ad-b55cd93ae655", "embedding": null, "metadata": {"file_path": "./near_dist/query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d", "node_type": "4", "metadata": {}, "hash": "04e1fa00a629791e66216fdef7ff4d6cfc4b9b29a212d2f797c3697ec1afe75d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d11c53a-f05c-4b52-8b3e-22170edef0c7", "node_type": "1", "metadata": {}, "hash": "84232a2d686ce6e327638a2a33c2bd481b6363635fed9b0259ac2d524a341521", "class_name": "RelatedNodeInfo"}}, "text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"nft-contract-tabs\" className=\"file-tabs\">\n<TabItem value=\"NFT Primitive\" label=\"Reference\" default>\n\n```bash\nnear view nft.primitives.near nft_token '{\"token_id\": \"1\"}'\n```\n\n<details>\n\n<summary> Example response </summary>\n\n```json\n{\n  \"token_id\": \"1\",\n  \"owner_id\": \"bob.near\",\n  \"metadata\": {\n    \"title\": \"string\", // ex. \"Arch Nemesis: Mail Carrier\" or \"Parcel #5055\"\n    \"description\": \"string\", // free-form description\n    \"media\": \"string\", // URL to associated media, preferably to decentralized, content-addressed storage\n    \"media_hash\": \"string\", // Base64-encoded sha256 hash of content referenced by the `media` field. Required if `media` is included.\n    \"copies\": 1, // number of copies of this set of metadata in existence when token was minted.\n    \"issued_at\": 1642053411068358156, // When token was issued or minted, Unix epoch in milliseconds\n    \"expires_at\": 1642053411168358156, // When token expires, Unix epoch in milliseconds\n    \"starts_at\": 1642053411068358156, // When token starts being valid, Unix epoch in milliseconds\n    \"updated_at\": 1642053411068358156, // When token was last updated, Unix epoch in milliseconds\n    \"extra\": \"string\", // anything extra the NFT wants to store on-chain. Can be stringified JSON.\n    \"reference\": \"string\", // URL to an off-chain JSON file with more info.\n    \"reference_hash\": \"string\" // Base64-encoded sha256 hash of JSON from reference field. Required if `reference` is included.\n  }\n}\n```\n</details>\n\n</TabItem>\n\n<TabItem value=\"Paras\" label=\"Paras\">\n\n```bash\nnear view x.paras.near nft_token '{\"token_id\": \"84686:1154\"}'\n```\n\n<details>\n\n<summary> Example response </summary>\n\n```json\n{\n  \"token_id\": \"84686:1154\",\n  \"owner_id\": \"bob.near\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1801, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d11c53a-f05c-4b52-8b3e-22170edef0c7": {"__data__": {"id_": "9d11c53a-f05c-4b52-8b3e-22170edef0c7", "embedding": null, "metadata": {"file_path": "./near_dist/query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d", "node_type": "4", "metadata": {}, "hash": "04e1fa00a629791e66216fdef7ff4d6cfc4b9b29a212d2f797c3697ec1afe75d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9c5f1e4d-e34d-42de-98ad-b55cd93ae655", "node_type": "1", "metadata": {}, "hash": "2b2a096d10f3fcb6ea841d5452c82487a6a81fff64a5147b1a04245b3c178d28", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a30cb8ec-ad14-4d5d-93b6-0a8488ecc22f", "node_type": "1", "metadata": {}, "hash": "2f4bf3e98647b08e64affb2b0050eab50c6a834b19f70c7c52f3db629c005ee0", "class_name": "RelatedNodeInfo"}}, "text": "\"metadata\": {\n    \"title\": \"Tokenfox Silver Coin #1154\",\n    \"description\": null,\n    \"media\": \"bafkreihpapfu7rzsmejjgl2twllge6pbrfmqaahj2wkz6nq55c6trhhtrq\",\n    \"media_hash\": null,\n    \"copies\": 4063,\n    \"issued_at\": \"1642053411068358156\",\n    \"expires_at\": null,\n    \"starts_at\": null,\n    \"updated_at\": null,\n    \"extra\": null,\n    \"reference\": \"bafkreib6uj5kxbadfvf6qes5flema7jx6u5dj5zyqcneaoyqqzlm6kpu5a\",\n    \"reference_hash\": null\n  },\n  \"approved_account_ids\": {}\n}\n```\n\n</details>\n\n</TabItem>\n\n<TabItem value=\"Mintbase\" label=\"Mintbase\">\n\n```bash\nnear view anthropocene.mintbase1.near nft_token '{\"token_id\": \"17960\"}'\n```\n\n<details>\n\n<summary> Example response </summary>\n\n```json\n{\n  \"token_id\": \"17960\",\n  \"owner_id\": \"876f40299dd919f39252863e2136c4e1922cd5f78759215474cbc8f1fc361e14\",\n  \"approved_account_ids\": {},\n  \"metadata\": {\n    \"title\": null,\n    \"description\": null,\n    \"media\": null,\n    \"media_hash\": null,\n    \"copies\": 1,\n    \"issued_at\": null,\n    \"expires_at\": null,\n    \"starts_at\": null,\n    \"updated_at\": null,\n    \"extra\": null,\n    \"reference\": \"F-30s_uQ3ZdAHZClY4DYatDPapaIRNLju41RxfMXC24\",\n    \"reference_hash\": null\n  },\n  \"royalty\": {\n    \"split_between\": {\n      \"seventhage.near\": {\n        \"numerator\": 10000\n      }\n    },\n    \"percentage\": {\n      \"numerator\": 100\n    }\n  },", "mimetype": "text/plain", "start_char_idx": 1804, "end_char_idx": 3122, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a30cb8ec-ad14-4d5d-93b6-0a8488ecc22f": {"__data__": {"id_": "a30cb8ec-ad14-4d5d-93b6-0a8488ecc22f", "embedding": null, "metadata": {"file_path": "./near_dist/query.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d", "node_type": "4", "metadata": {}, "hash": "04e1fa00a629791e66216fdef7ff4d6cfc4b9b29a212d2f797c3697ec1afe75d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d11c53a-f05c-4b52-8b3e-22170edef0c7", "node_type": "1", "metadata": {}, "hash": "84232a2d686ce6e327638a2a33c2bd481b6363635fed9b0259ac2d524a341521", "class_name": "RelatedNodeInfo"}}, "text": "\"split_owners\": null,\n  \"minter\": \"anthropocene.seventhage.near\",\n  \"loan\": null,\n  \"composeable_stats\": { \"local_depth\": 0, \"cross_contract_children\": 0 },\n  \"origin_key\": null\n}\n```\n\n</details>\n\n:::note\nWhen someone creates a NFT on Mintbase they need to deploy their own NFT contract using Mintbase factory. Those smart contract are subaccounts of mintbase1.near, e.g. `anthropocene.mintbase1.near`.\n:::\n\n</TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 3125, "end_char_idx": 3552, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "450c4288-39c1-4b13-b3ef-f58b8c065aa2": {"__data__": {"id_": "450c4288-39c1-4b13-b3ef-f58b8c065aa2", "embedding": null, "metadata": {"file_path": "./near_dist/data-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef", "node_type": "4", "metadata": {}, "hash": "157a47010025b19af1b1609c926071fc99b2a3e9eb83ead87b40ee5869fcd664", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "66ec05ac-10d2-4d9f-8499-2dde48ddafac", "node_type": "1", "metadata": {}, "hash": "d0c38beb4670c9deaed8a37cb3e1a7cd8a554ae5d86dfb33f5d528e78cd42d56", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: data-storage\nsidebar_label: \"Data on the Blockchain\"\n---\n\n# Data on the Blockchain\n\nThis article will cover a high-level overview of Blockchain concepts and tools which facilitate reading and writing Blockchain data. \n\n## Writing data\n\nBy design, a Blockchain is a distributed database, and blockchain data is optimized to be stored in serialized blocks, writing one block at a time as the chain is being created. These serialized blocks store information about primitive components like transactions, accounts, and contracts. \n\n\nBlockchain\u2019s writing process provides a great way to apply the requested changes to the state in a decentralized manner. However, to observe the changes, you need to actively pull the information from the network. As a result, traversing several blocks and aggregating data is necessary when trying to get data across multiple contracts or a longer time range.\n\n\n## Reading data\n\n\nQuerying the Blockchain for data about a specific block or account is fairly straightforward and can be considered a \"narrow\" query. However, querying data across many blocks can be cumbersome because you must aggregate results from multiple single-block queries. Therefore, these can be considered \"wide\" queries.\n\n\n:::info\n\nThe nature of a blockchain is that it must be deterministic. A critical feature of a blockchain is that it knows the state at a given block (or time unit). Think of them as snapshots \u2013  a blockchain does snapshots of its state on every block.\n\n:::\n\n\nFor example, a user can call a smart contract for a specific block, and the blockchain guarantees that the execution will always produce the same result for the same block any time you call it.\n\n\n:::note\n\nThe deterministic nature of a blockchain isolates it from off-chain (external) variables. It is impossible to call an external API to read data from within a smart contract. Therefore, blockchains and smart contracts are closed-off from the outer (off-chain) world.\n\n:::\n\n## Information Availability\n\n\nAs mentioned, the essential information you can acquire from the Blockchain\u2019s state is related to the transactions, accounts, and contracts taking place at a given block.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2172, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "66ec05ac-10d2-4d9f-8499-2dde48ddafac": {"__data__": {"id_": "66ec05ac-10d2-4d9f-8499-2dde48ddafac", "embedding": null, "metadata": {"file_path": "./near_dist/data-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef", "node_type": "4", "metadata": {}, "hash": "157a47010025b19af1b1609c926071fc99b2a3e9eb83ead87b40ee5869fcd664", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "450c4288-39c1-4b13-b3ef-f58b8c065aa2", "node_type": "1", "metadata": {}, "hash": "c9b5ef78aa0538b75c8163ec44bf5f4f900c3e0491dbb641d8b48b499befd496", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25", "node_type": "1", "metadata": {}, "hash": "1b73950120a6650e534e8a90a7a208a23182d361fa46c6a2bd6e1c53bab4ec74", "class_name": "RelatedNodeInfo"}}, "text": "A simple way to get such information from the blockchain is using RPC. NEAR implements a [JSON-RPC endpoint](/api/rpc/introduction) for everyone to interact with the blockchain. Through the JSON-RPC API, users can call smart contracts and view the data from the blockchain.\nKeep in mind that not all the data is available through the JSON-RPC. For example, local Receipts are unavailable through the JSON-RPC because they are not stored in the NEAR node's internal database.\n\n\n:::tip\n\nThe JSON-RPC endpoint  approach is the so-called pull model of getting the data. There is nothing wrong with this approach, but it is sometimes not the most comfortable or reliable alternative.\n\n:::\n\nAs you can imagine, this basic block information might not be enough for a complex project. For example, in an NFT marketplace, basic read operations via RPC calls could help get the status of a purchase or get the NEAR balance of an NFT creator account, but for information like getting the owner of a certain NFT, getting the metadata of an NFT based on its ID, or the total supply for a certain type of NFT, dApp developers would need to do additional parsing and processing after calling the RPC primitive methods. \n\n\nMore advanced real-world queries and operations like aggregation, search, relationships, and non-trivial filtering are simply not possible using RPC calls alone. An example of this is showing a leaderboard of the most popular NFT collections in the last 7 days. It would not be possible to get that information by interacting directly with the contract itself or via RPC. Getting this data would require processing every single transaction that ever happened, aggregating them in terms of collection, filtering them by timestamps calculation, and ordering them in terms of total transacted value. \n\n\nOne option to solve these complex data requirements is to build a server using an indexing framework. A blockchain indexer is an implementation of the push model of getting the data. Instead of actively pulling the data from the source, indexers listen to the stream of data from the blockchain, and the data can be immediately filtered and processed according to defined requirements. Indexers can also be used to simplify the \"wide\" query execution. For example, a data stream can be written to a permanent database for later data analysis using a convenient query language like SQL.\n\n\n## Data tools", "mimetype": "text/plain", "start_char_idx": 2176, "end_char_idx": 4584, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25": {"__data__": {"id_": "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25", "embedding": null, "metadata": {"file_path": "./near_dist/data-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef", "node_type": "4", "metadata": {}, "hash": "157a47010025b19af1b1609c926071fc99b2a3e9eb83ead87b40ee5869fcd664", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "66ec05ac-10d2-4d9f-8499-2dde48ddafac", "node_type": "1", "metadata": {}, "hash": "d0c38beb4670c9deaed8a37cb3e1a7cd8a554ae5d86dfb33f5d528e78cd42d56", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f", "node_type": "1", "metadata": {}, "hash": "db25c9c9a1a2ef9495b1da7718a78a0e7abac61f53587b3ee65b19b1b29c085b", "class_name": "RelatedNodeInfo"}}, "text": "Building a server and indexing blockchain data on your own is not an easy task. The index server will be responsible for processing all the transactions and saving them to a database. Then you\u2019ll need to build a set of APIs to get the data for your dApp. This option is resource intensive, requires maintenance, presents a single point of failure, and breaks important security properties required for decentralization.\nAlso, specific Blockchain properties like finality, chain reorganizations, or empty blocks complicate this process further and make it not just time-consuming but conceptually hard to retrieve correct query results from blockchain data.\n\n\nAs an alternative, you can try one of the many available indexing services on the NEAR blockchain, and here is a [suggestive decision tree](https://docs.pagoda.co/decision-tree-lt) of which tool to use for your data needs presented by Pagoda:\n\n<details>\n<summary><b>Data Platform Decision Tree</b></summary>\n<a href=\"/docs/assets/data-decision-tree.png\" target=\"_blank\">\n<img src=\"/docs/assets/data-decision-tree.png\" />\n</a>\n</details>\n\n\n* [NEAR Indexer Framework](/concepts/advanced/near-indexer-framework): a micro-framework providing you with a \"live\" stream of blocks. Useful to handle on-chain real-time \"events\".\n* [NEAR Indexer for Explorer](https://github.com/near/near-indexer-for-explorer): leverages the indexer micro-framework to watch and store all of the blockchain's events/data into a transactional PostgreSQL database. You can clone the [GitHub repository](https://github.com/near/near-indexer-for-explorer) and customize your own indexer solution.\n* [NEAR Lake Framework](/concepts/advanced/near-lake-framework): a companion library to NEAR Lake. It allows you to build your own indexer that watches a stream of blocks from a NEAR Lake data source and allows you to create your own logic to process that data. Keep in mind this is probably the one you want to use for future projects, instead of the Indexer Framework. Read [why it is better](/concepts/advanced/near-indexer-framework#why-is-it-better-than-near-indexer-framework).", "mimetype": "text/plain", "start_char_idx": 4587, "end_char_idx": 6696, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f": {"__data__": {"id_": "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f", "embedding": null, "metadata": {"file_path": "./near_dist/data-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef", "node_type": "4", "metadata": {}, "hash": "157a47010025b19af1b1609c926071fc99b2a3e9eb83ead87b40ee5869fcd664", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25", "node_type": "1", "metadata": {}, "hash": "1b73950120a6650e534e8a90a7a208a23182d361fa46c6a2bd6e1c53bab4ec74", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb2b75e5-06df-4e9a-bb60-d9614a9a7daa", "node_type": "1", "metadata": {}, "hash": "b747f4acb9d948b2dcc984aa302acc917eedb3220f32f83abc75ab4f637f326c", "class_name": "RelatedNodeInfo"}}, "text": "* [NEAR Lake Indexer](/concepts/advanced/near-lake-framework): leverages the indexer micro-framework to watch and store all of the blockchain's events/data as JSON files on a user-specified AWS S3 or S3-compatible storage.\n* [Near Query API](https://dev.near.org/dataplatform.near/widget/QueryApi.App): Query API allows you to seamlessly create, manage, and discover indexers on NEAR. Developers can deploy their indexers to aggregate historical data in a matter of minutes, while accessing the data via custom GraphQL queries.\n* [The Graph](https://thegraph.com/docs/en/cookbook/near/): The Graph gives developers tools to process blockchain events and make the resulting data easily available via a GraphQL API, known individually as a subgraph. [Graph Node](https://github.com/graphprotocol/graph-node) is now able to process NEAR events, which means that NEAR developers can now build subgraphs to index their smart contracts.\n* [Pagoda API](https://pagoda.co) is a hosted service managed by Pagoda that solves the complex data problem by indexing the blockchain into datamarts and is accessible via standard RESTful APIs for you to directly use in any part of your application. The API enables performant and efficient querying of blockchain data without having to build and manage your own indexer infrastructure. Pagoda also offers the Indexer framework as a decentralized solution to indexing on-chain data, and a centralized Data Lake source that can be used to build your own indexers and servers for such data query needs.\n* [PIKESPEAK API](https://pikespeak.ai): an enterprise-grade API where you can fetch blockchain events and aggregated analytics on wallets, validators, delegators, money transfers, dapps activity and more. [Documentation](https://doc.pikespeak.ai/)\n* [Mintbase Indexer](https://mintbase.xyz/) A highly efficient and adaptable indexing solution developed to capture, process, and store NFT events throughout the NEAR ecosystem. This indexer provides developers with a streamlined and well-structured data stream, making it an optimal choice for constructing data-centric applications in the NFT space. By systematically monitoring and indexing a wide array of NFT-related events across various platforms and projects on NEAR, the Mintbase Indexer offers developers the necessary tools and data access to build innovative and practical applications.", "mimetype": "text/plain", "start_char_idx": 6697, "end_char_idx": 9078, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb2b75e5-06df-4e9a-bb60-d9614a9a7daa": {"__data__": {"id_": "eb2b75e5-06df-4e9a-bb60-d9614a9a7daa", "embedding": null, "metadata": {"file_path": "./near_dist/data-storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef", "node_type": "4", "metadata": {}, "hash": "157a47010025b19af1b1609c926071fc99b2a3e9eb83ead87b40ee5869fcd664", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f", "node_type": "1", "metadata": {}, "hash": "db25c9c9a1a2ef9495b1da7718a78a0e7abac61f53587b3ee65b19b1b29c085b", "class_name": "RelatedNodeInfo"}}, "text": "Furthermore, the indexed data can be conveniently queried using GraphQL, allowing for flexible and efficient data retrieval tailored to specific developer needs. [Documentation](https://docs.mintbase.xyz/dev/mintbase-graph)\n* [SubQuery](https://academy.subquery.network/quickstart/quickstart_chains/near.html): SubQuery is a fast, flexible, and reliable open-source data indexer that provides you with custom APIs for your web3 project across NEAR and many other chains. NEAR developers will benefit from the superior SubQuery experience, including the open-source SDK, tools, [documentation](https://academy.subquery.network), and developer support that the SubQuery ecosystem provides. Additionally, NEAR is accommodated by [SubQuery\u2019s Managed Service](http://managedservice.subquery.network/), which provides enterprise-level infrastructure hosting.", "mimetype": "text/plain", "start_char_idx": 9079, "end_char_idx": 9931, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "29d03f58-db09-4217-a1f6-b62c4f6188dd": {"__data__": {"id_": "29d03f58-db09-4217-a1f6-b62c4f6188dd", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe0506b0-8423-46fd-9186-8e96e16582ef", "node_type": "4", "metadata": {}, "hash": "5460de67f9d013904e67d81bd688326103cdbce464f75069615e6311e7b2c4a0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07414d54-8ce1-4901-9085-cc5077350296", "node_type": "1", "metadata": {}, "hash": "7cd3ca98c7d6e8155931d562613d550eb668742038f664e68b71d1c3e0a6ad59", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: chain-hosted-ui\ntitle: Chain Hosted UI\nsidebar_label: Chain Hosted UI\n---\n\n[Chain Hosted UI](https://github.com/near/chain-deployed-ui) is a [decentralized frontend solution](frontend.md#decentralized-frontend-solutions) that lets you to deploy dApp frontends directly on the NEAR blockchain. A frontend can be built with typical Web2 tooling (e.g. React + Vite + node.js dependencies), and the resulting compressed bundle can be stored in the state of a smart contract.\n\n:::warning\n\nThis experiment reached the MVP stage of functionality but no longer has a maintainer due to [Pagoda winding down](https://docs.near.org/blog/2024-08-13-pagoda-services).\nWe encourage interested parties to fork the project and carry it forward. The smart contract has not yet been audited.\n\n:::\n\n## Overview\n\nThanks to the fact that storage on NEAR is cheap, it's feasible to host lightweight applications with optimized bundles on chain. This offers a straightforward path to decentralized hosting as an alternative to static deployment platforms such as Vercel, GitHub Pages, Render, and others.\n\nThe Chain Deployed UI tooling provides the boilerplate app code (React, Vue, TypeScript), along with the `FileStore` smart contract and basic CDN tools so you can build a dApp, pack it, and store it on chain.\n\nThis `FileStore` smart contract deployed by NEAR is designed to store and serve dApp bundles for any user, so you don't need to have an understanding of smart contract development. You only need to understand how to sign a transaction (with help from our tooling) and to have enough NEAR tokens to pay for storage.\n\n:::tip\n\nYou can still deploy your own file storage smart contract if you want to have additional customization or if you want total control over your data.\n\n:::\n\n### Pros\n\n- By decentralizing the hosting of your front-end, you minimize the risk of censoring or blocking content by centralized authorities.\n- Users might trust a decentralized application more, knowing that it operates on a transparent and immutable blockchain.\n- Data displayed on the front-end is more likely to be accurate and tamper-proof since it's typically fetched directly from the blockchain.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2184, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07414d54-8ce1-4901-9085-cc5077350296": {"__data__": {"id_": "07414d54-8ce1-4901-9085-cc5077350296", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe0506b0-8423-46fd-9186-8e96e16582ef", "node_type": "4", "metadata": {}, "hash": "5460de67f9d013904e67d81bd688326103cdbce464f75069615e6311e7b2c4a0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29d03f58-db09-4217-a1f6-b62c4f6188dd", "node_type": "1", "metadata": {}, "hash": "58922213c4cf158af589fb7eca498ae31d4cff779ba954d00d0ff8e649ebbc81", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "40f0287c-4f32-4fda-a542-f960775dd199", "node_type": "1", "metadata": {}, "hash": "e85e21b5a69c8a002223e140d7e68805f5e0e9b302aad19316dfdc18c3179ace", "class_name": "RelatedNodeInfo"}}, "text": "### Cons\n\n- Implementing a decentralized front-end can be more complex than traditional web development, requiring knowledge of additional technologies like [IPFS](https://ipfs.tech), [Arweave](https://arweave.org), or blockchain interactions.\n- Decentralized networks can face issues such as latency or lower speeds compared to traditional centralized servers, potentially affecting user experience.\nThe ecosystem for developing decentralized frontends is still maturing, which means there might be fewer tools and libraries available than for traditional web development.\n- While decentralized storage costs have been decreasing, they can still be higher than traditional hosting, especially if the dApp generates a lot of data transactions.\n\n## How it works\n\nA standard workflow of the chain deployed solution would be:\n- Building, packing, and compressing the web app frontend\n- Uploading the web app bundle files using the `FileStore` smart contract\n- Serving the web app using a CDN gateway\n\nOnce the web app has been uploaded to the blockchain, a web [Gateway](#gateway) converts browser requests to blockchain [RPC](#rpc) calls, so users can access your decentralized application.\n\n### Gateway\n\nA gateway server is required to convert browser resource requests to RPC calls. For convenience, gateways may be deployed to cloud hosts, but this causes some centralization. It can be mitigated by having multiple gateways run by different parties. It is important that a user trust the gateway provider however, since the gateway is ultimately what is in control of the experience being served to the user's browser.\n\n### RPC\n\nAn [RPC provider](../../5.api/rpc/providers.md) services requests for chain data. For resilience, gateways should ideally be capable of falling back to a different provider in the event the primary provider is experiencing degraded service.\n\n## Considerations\n\nCompared to classic Web2 hosting solutions, the cost structure of a chain-deployed dApp is very different.\n\nWhen deploying on chain, you pay a one-time fee for the storage space of your compressed bundles. This means that it's critical to pay attention to the size of dependencies you include in your application, as packages that are bloated or do not support proper tree-shaking will directly affect your cost.", "mimetype": "text/plain", "start_char_idx": 2186, "end_char_idx": 4490, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "40f0287c-4f32-4fda-a542-f960775dd199": {"__data__": {"id_": "40f0287c-4f32-4fda-a542-f960775dd199", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe0506b0-8423-46fd-9186-8e96e16582ef", "node_type": "4", "metadata": {}, "hash": "5460de67f9d013904e67d81bd688326103cdbce464f75069615e6311e7b2c4a0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07414d54-8ce1-4901-9085-cc5077350296", "node_type": "1", "metadata": {}, "hash": "7cd3ca98c7d6e8155931d562613d550eb668742038f664e68b71d1c3e0a6ad59", "class_name": "RelatedNodeInfo"}}, "text": ":::info\n\nNEAR uses [storage staking](../../1.concepts/storage/storage-staking.md), where NEAR tokens are locked while storage is being used and refundable in the event of deleting that data from smart contract state. The cost of storage is `1 NEAR` per `100 Kb`.\n\n:::\n\n### Storage Optimization\n\nAdditional storage optimization can be achieved by building your dApp from a provided template with preconfigured code splitting. This allows you to yield separate bundles for the template boilerplate and the custom dApp code:\n- The template boilerplate can be uploaded once, and then served for every dApp built using that template.\n- This decreases the deployment cost, since you only need to deploy the custom dApp code and specific dependencies.\n\n### Asset Hosting\n\nFor hosting large assets (such as images and videos) that your web app may require, you could leverage a [decentralized storage service](../../1.concepts/storage/decentralized-storage.md) to maintain a fully decentralized deployment. Some of these solutions are:\n- [Arweave](https://arweave.org)\n- [Crust](https://crust.network)\n- [IPFS](https://ipfs.tech)", "mimetype": "text/plain", "start_char_idx": 4492, "end_char_idx": 5613, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ac22d21-152d-4b0a-8999-af2b19dd00b0": {"__data__": {"id_": "6ac22d21-152d-4b0a-8999-af2b19dd00b0", "embedding": null, "metadata": {"file_path": "./near_dist/naj-account.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc817d77-a312-4669-8b31-18b183ba2e25", "node_type": "4", "metadata": {}, "hash": "8c21861768e017726d5391d85d36f512b3d36eb794325d2de7dfc4f25588188c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ce1f956b-290d-45a9-9e82-24f6088c07cd", "node_type": "1", "metadata": {}, "hash": "2f00dc76085104fb41a138fd04b7e26d831c8a35e68435d1f9a945a1def5dc6d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: account\ntitle: Account\nsidebar_label: Account\n---\n\nYou can interact with, create or delete NEAR accounts.\n\n### Load Account {#load-account}\n\nThis will return an Account object for you to interact with.\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `Account`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html)\n\n### Create Account {#create-account}\n\nCreate a sub-account.\n\n```js\n// creates a sub-account using funds from the account used to create it.\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.createAccount(\n  \"sub.example-account.testnet\", // sub-account name\n  \"8hSHprDq2StXwMtNd43wDTXQYsjXcD4MJTXQYsjXcc\", // public key for sub account\n  \"10000000000000000000\" // initial balance for new account in yoctoNEAR\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.createAccount`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#createAccount)\n\nFor creating .near or .testnet accounts please refer to the [cookbook](https://github.com/near/near-api-js/tree/master/packages/cookbook/accounts).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1234, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ce1f956b-290d-45a9-9e82-24f6088c07cd": {"__data__": {"id_": "ce1f956b-290d-45a9-9e82-24f6088c07cd", "embedding": null, "metadata": {"file_path": "./near_dist/naj-account.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc817d77-a312-4669-8b31-18b183ba2e25", "node_type": "4", "metadata": {}, "hash": "8c21861768e017726d5391d85d36f512b3d36eb794325d2de7dfc4f25588188c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ac22d21-152d-4b0a-8999-af2b19dd00b0", "node_type": "1", "metadata": {}, "hash": "5f3bfe8730de3aaa29e5902391197fc4f02db603aaf732720b9c13f555645a9f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3081f535-90eb-4c5a-b9e5-324ae3b2a8de", "node_type": "1", "metadata": {}, "hash": "c53e5b219075ef4d93487322ab4514a1c0e6c446019053888e17392d87a233a6", "class_name": "RelatedNodeInfo"}}, "text": "### Delete Account {#delete-account}\n\n```js\n// deletes account found in the `account` object\n// transfers remaining account balance to the accountId passed as an argument\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.deleteAccount(\"beneficiary-account.testnet\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.deleteAccount`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#deleteAccount)\n\n### Get Account Balance {#get-account-balance}\n\n```js\n// gets account balance\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.getAccountBalance();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.getAccountBalance`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#getAccountBalance)\n\n### Get Account details {#get-account-details}\n\nReturns information about an account, such as authorized apps.\n\n```js\n// gets account details in terms of authorized apps and transactions\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.getAccountDetails();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.getAccountDetails`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#getAccountDetails)\n\n### Deploy a Contract {#deploy-a-contract}\n\nYou can deploy a contract from a compiled WASM file. This returns an object with transaction and receipts outcomes and status.\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\nconst transactionOutcome = await account.deployContract(\n  fs.readFileSync(\"example-file.wasm\")\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.deployContract`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#deployContract)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-interface\"></span> Interface `FinalExecutionOutcome`](https://near.github.io/near-api-js/interfaces/_near_js_types.provider_response.FinalExecutionOutcome.html)\n\n### Send Tokens {#send-tokens}\n\nTransfer NEAR tokens between accounts. This returns an object with transaction and receipts outcomes and status.", "mimetype": "text/plain", "start_char_idx": 1236, "end_char_idx": 3513, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3081f535-90eb-4c5a-b9e5-324ae3b2a8de": {"__data__": {"id_": "3081f535-90eb-4c5a-b9e5-324ae3b2a8de", "embedding": null, "metadata": {"file_path": "./near_dist/naj-account.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc817d77-a312-4669-8b31-18b183ba2e25", "node_type": "4", "metadata": {}, "hash": "8c21861768e017726d5391d85d36f512b3d36eb794325d2de7dfc4f25588188c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ce1f956b-290d-45a9-9e82-24f6088c07cd", "node_type": "1", "metadata": {}, "hash": "2f00dc76085104fb41a138fd04b7e26d831c8a35e68435d1f9a945a1def5dc6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "56acd484-534a-4a1d-a0c6-68d9ca9a5005", "node_type": "1", "metadata": {}, "hash": "df02b681360056fc04379a70d99a354cbce500ed76cb95d163b5c71e5101da64", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst account = await nearConnection.account(\"sender-account.testnet\");\nawait account.sendMoney(\n  \"receiver-account.testnet\", // receiver account\n  \"1000000000000000000000000\" // amount in yoctoNEAR\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.sendMoney`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#sendMoney)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-interface\"></span> Interface `FinalExecutionOutcome`](https://near.github.io/near-api-js/interfaces/_near_js_types.provider_response.FinalExecutionOutcome.html)\n\n### State {#state}\n\nGet basic account information, such as amount of tokens the account has or the amount of storage it uses.\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\nconst accountState = await account.state();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.state`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#state)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-interface\"></span> Interface `AccountView`](https://near.github.io/near-api-js/interfaces/near_api_js.providers_provider.AccountView.html)\n\n### Access Keys {#access-keys}\n\nYou can get and manage keys for an account.\n\n#### Add Full Access Key {#add-full-access-key}\n\n```js\n// takes public key as string for argument\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.addKey(\"8hSHprDq2StXwMtNd43wDTXQYsjXcD4MJTXQYsjXcc\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.addKey`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#addKey)\n\n#### Add Function Access Key {#add-function-access-key}\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.", "mimetype": "text/plain", "start_char_idx": 3515, "end_char_idx": 5395, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "56acd484-534a-4a1d-a0c6-68d9ca9a5005": {"__data__": {"id_": "56acd484-534a-4a1d-a0c6-68d9ca9a5005", "embedding": null, "metadata": {"file_path": "./near_dist/naj-account.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc817d77-a312-4669-8b31-18b183ba2e25", "node_type": "4", "metadata": {}, "hash": "8c21861768e017726d5391d85d36f512b3d36eb794325d2de7dfc4f25588188c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3081f535-90eb-4c5a-b9e5-324ae3b2a8de", "node_type": "1", "metadata": {}, "hash": "c53e5b219075ef4d93487322ab4514a1c0e6c446019053888e17392d87a233a6", "class_name": "RelatedNodeInfo"}}, "text": "addKey(\n  \"8hSHprDq2StXwMtNd43wDTXQYsjXcD4MJTXQYsjXcc\", // public key for new account\n  \"example-account.testnet\", // contract this key is allowed to call (optional)\n  \"example_method\", // methods this key is allowed to call (optional)\n  \"2500000000000\" // allowance key can use to call methods (optional)\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.addKey`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#addKey)\n\n#### Get All Access Keys {#get-all-access-keys}\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.getAccessKeys();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.getAccessKeys`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#getAccessKeys)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-interface\"></span> Interface `AccessKeyInfoView`](https://near.github.io/near-api-js/interfaces/near_api_js.providers_provider.AccessKeyInfoView.html)\n\n#### Delete Access Key {#delete-access-key}\n\n```js\nconst account = await nearConnection.account(\"example-account.testnet\");\nawait account.deleteKey(\"8hSHprDq2StXwMtNd43wDTXQYsjXcD4MJTXQYsjXcc\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `Account.deleteKey`](https://near.github.io/near-api-js/classes/near_api_js.account.Account.html#deleteKey)", "mimetype": "text/plain", "start_char_idx": 5395, "end_char_idx": 6815, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "54977e5c-5281-493d-8c02-9739e51c04ac": {"__data__": {"id_": "54977e5c-5281-493d-8c02-9739e51c04ac", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6d5908e7-f088-4566-8098-1e3b2bdfd4c5", "node_type": "1", "metadata": {}, "hash": "bb087d114ea2591ca5750b6ada93ba6b84aedf750a1afe2eff3ed684d8726213", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: kurtosis-localnet\ntitle: Creating a Local Development Environment\nsidebar_label: Local Development\ndescription: Using Kurtosis NEAR Package to develop locally\n---\n\n> [Kurtosis](https://www.kurtosis.com/) has created an easy way to spin up a local NEAR testing environment using a [Docker container](https://www.docker.com/).\n\nThis Kurtosis NEAR Package contains the following components:\n\n- [Indexer for Explorer](https://github.com/near/near-indexer-for-explorer)\n- [NEAR Explorer](https://github.com/near/near-explorer)\n- [NEAR Wallet](https://github.com/near/near-wallet)\n- Local RPC Endpoint\n\n[Visit here](https://www.loom.com/share/8a1b8e2138334a81a380f5d523fba27e) to see a short demo of the package in action.\n\n---\n\n## Prerequisites {#prerequisites}\n\n- [Docker](https://docs.docker.com/get-docker/)\n- [Yarn](https://classic.yarnpkg.com/lang/en/docs/install)\n- [NEAR-CLI](/tools/near-cli#installation)\n- [Kurtosis CLI](https://docs.kurtosis.com/install)\n  - Start Kurtosis engine after installation using: `kurtosis engine start`\n\n---\n\n## Setup\n\n### Launch Kurtosis NEAR Package {#launching-cluster}\n\nLaunch your Kurtosis NEAR Package in four easy steps!\n\n1. Launch [Docker](https://docs.docker.com/get-docker/)\n\n2. Copy the [Kurtosis NEAR Package launch script](https://github.com/kurtosis-tech/near-package/blob/master/launch-local-near-cluster.sh) by running the following:\n\n```bash\ncurl -o ~/launch-local-near-cluster.sh https://raw.githubusercontent.com/kurtosis-tech/near-package/master/launch-local-near-cluster.sh -L\n```\n\n3. Grant write permission to the script file you just downloaded:\n\n```bash\nchmod u+x ~/launch-local-near-cluster.sh\n```\n\n4.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1667, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6d5908e7-f088-4566-8098-1e3b2bdfd4c5": {"__data__": {"id_": "6d5908e7-f088-4566-8098-1e3b2bdfd4c5", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "54977e5c-5281-493d-8c02-9739e51c04ac", "node_type": "1", "metadata": {}, "hash": "9847a5af26b3b074348a24cd92c0d42b79337a18372272028f20bd1cbdf9af6f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "216875ec-a94b-4b42-b9c7-468f61e9d718", "node_type": "1", "metadata": {}, "hash": "e06cbedc347d33e95a6dfdc48046fbbdb74fc5ca879f2789e2c1a7458392dcbd", "class_name": "RelatedNodeInfo"}}, "text": "Launch the Kurtosis NEAR Package:\n\nIf you're running the NEAR-in-Kurtosis cluster on your local machine:\n\n```bash\n~/launch-local-near-cluster.sh\n```\n\nIf you're running your NEAR-in-Kurtosis cluster on a machine you intend to access remotely, replace `1.2.3.4` with the IP address of the machine you're running the cluster on:\n\n```bash\n~/launch-local-near-cluster.sh '{\"backend_ip_address\":\"1.2.3.4\"}'\n```\n\n<details>\n<summary>Example response: </summary>\n\n```bash\nCreated directory '/Users/zerix/.neartosis' for storing all NEAR-in-Kurtosis output\nINFO[2022-12-06T12:59:04+05:30] Creating a new enclave for Starlark to run inside...\nINFO[2022-12-06T12:59:14+05:30] Enclave 'near' created successfully\nINFO[2022-12-06T12:59:14+05:30] Kurtosis CLI is running in a non interactive terminal. Everything will work but progress information and the progress bar will not be displayed.\n\n> print \"Starting the near-package with input struct(backend_ip_address = \\\"127.0.0.1\\\")\"\nStarting the near-package with input struct(backend_ip_address = \"127.0.0.1\")\n\n> print \"Launching contract helper postgresql\"\nLaunching contract helper postgresql\n\n> print \"Adding contract helper Posgresql DB running on port '5432'\"\nAdding contract helper Posgresql DB running on port '5432'\n\n> add_service service_id=\"contract-helper-db\"\nService 'contract-helper-db' added with service GUID 'contract-helper-db-1670311755'\n\n> exec service_id=\"contract-helper-db\" command=[\"sleep\", \"10\"]\nCommand returned with exit code '0' with no output\n\n> exec service_id=\"contract-helper-db\" command=[\"psql\", \"-U\", \"near\", \"-c\", \"\\\\l\"]\nCommand returned with exit code '0' and the following output:\nList of databases\n   Name    | Owner | Encoding |  Collate   |   Ctype    | Access privileges\n-----------+-------+----------+------------+------------+-------------------\n near      | near  | UTF8     | en_US.utf8 | en_US.", "mimetype": "text/plain", "start_char_idx": 1668, "end_char_idx": 3543, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "216875ec-a94b-4b42-b9c7-468f61e9d718": {"__data__": {"id_": "216875ec-a94b-4b42-b9c7-468f61e9d718", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d5908e7-f088-4566-8098-1e3b2bdfd4c5", "node_type": "1", "metadata": {}, "hash": "bb087d114ea2591ca5750b6ada93ba6b84aedf750a1afe2eff3ed684d8726213", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96b74184-702b-495d-ac8e-86f725525dd9", "node_type": "1", "metadata": {}, "hash": "90e5ac45761922f81b45ee51968f6a2ee0b76438c1d4fc1cef5335b18eeac4a4", "class_name": "RelatedNodeInfo"}}, "text": "utf8 |\n postgres  | near  | UTF8     | en_US.utf8 | en_US.utf8 |\n template0 | near  | UTF8     | en_US.utf8 | en_US.utf8 | =c/near          +\n           |       |          |            |            | near=CTc/near\n template1 | near  | UTF8     | en_US.utf8 | en_US.utf8 | =c/near          +\n           |       |          |            |            | near=CTc/near\n(4 rows)\n\n> exec service_id=\"contract-helper-db\" command=[\"psql\", \"-U\", \"near\", \"-c\", \"create database indexer with owner=near\"]\nCommand returned with exit code '0' and the following output: 'CREATE DATABASE'\n\n> exec service_id=\"contract-helper-db\" command=[\"psql\", \"-U\", \"near\", \"-c\", \"create database analytics with owner=near\"]\nCommand returned with exit code '0' and the following output: 'CREATE DATABASE'\n\n> exec service_id=\"contract-helper-db\" command=[\"psql\", \"-U\", \"near\", \"-c\", \"create database telemetry with owner=near\"]\nCommand returned with exit code '0' and the following output: 'CREATE DATABASE'\n\n> print \"Contract helper postgresql db info struct(analytics_db = \\\"analytics\\\", db_user_password = \\\"near\\\", db_username = \\\"near\\\", indexer_db = \\\"indexer\\\", private_url = struct(ip_address = \\\"contract-helper-db\\\", path = \\\"\\\", port_number = 5432, protocol = \\\"postgres\\\"), telemetry_db = \\\"telemetry\\\")\"\nContract helper postgresql db info struct(analytics_db = \"analytics\", db_user_password = \"near\", db_username = \"near\", indexer_db = \"indexer\", private_url = struct(ip_address = \"contract-helper-db\", path = \"\", port_number = 5432, protocol = \"postgres\"),", "mimetype": "text/plain", "start_char_idx": 3543, "end_char_idx": 5081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96b74184-702b-495d-ac8e-86f725525dd9": {"__data__": {"id_": "96b74184-702b-495d-ac8e-86f725525dd9", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "216875ec-a94b-4b42-b9c7-468f61e9d718", "node_type": "1", "metadata": {}, "hash": "e06cbedc347d33e95a6dfdc48046fbbdb74fc5ca879f2789e2c1a7458392dcbd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fa720032-72d6-41c8-bab0-3b759e74aae7", "node_type": "1", "metadata": {}, "hash": "8162aa235e50f90c5312603c03de4fc575fe69ab63e4421b65b7d4a31cc9bfd6", "class_name": "RelatedNodeInfo"}}, "text": "telemetry_db = \"telemetry\")\n\n> print \"Launching contract helper dynamo db\"\nLaunching contract helper dynamo db\n\n> print \"Adding contract helper DynamoDB running on default port '8000'\"\nAdding contract helper DynamoDB running on default port '8000'\n\n> add_service service_id=\"contract-helper-dynamo-db\"\nService 'contract-helper-dynamo-db' added with service GUID 'contract-helper-dynamo-db-1670311770'\n\n> print \"Contract helper dynamodb info struct(private_url = struct(ip_address = \\\"contract-helper-dynamo-db\\\", path = \\\"\\\", port_number = 8000, protocol = \\\"TCP\\\"))\"\nContract helper dynamodb info struct(private_url = struct(ip_address = \"contract-helper-dynamo-db\", path = \"\", port_number = 8000, protocol = \"TCP\"))\n\n> print \"Launching indexer\"\nLaunching indexer\n\n> print \"Adding indexer service.\"\nAdding indexer service.\n\n> upload_files src=\"github.com/kurtosis-tech/near-package/static_files/near-configs/localnet\" artifact_id=\"8f5279c5-d012-4543-88e7-e9829b6d6040\"\nFiles uploaded with artifact ID '8f5279c5-d012-4543-88e7-e9829b6d6040'\n\n> add_service service_id=\"indexer-node\"\nService 'indexer-node' added with service GUID 'indexer-node-1670311774'\n\n> exec service_id=\"indexer-node\" command=[\"sleep\", \"10\"]\nCommand returned with exit code '0' with no output\n\n> exec service_id=\"indexer-node\" command=[\"cat\", \"/root/.near/validator_key.json\"]\nCommand returned with exit code '0' and the following output:\n{\n  \"account_id\": \"test.near\",\n  \"public_key\": \"ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\",", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fa720032-72d6-41c8-bab0-3b759e74aae7": {"__data__": {"id_": "fa720032-72d6-41c8-bab0-3b759e74aae7", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96b74184-702b-495d-ac8e-86f725525dd9", "node_type": "1", "metadata": {}, "hash": "90e5ac45761922f81b45ee51968f6a2ee0b76438c1d4fc1cef5335b18eeac4a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c", "node_type": "1", "metadata": {}, "hash": "b845d56f7f15e9f17e4133e3d30eb2725898f23df61d3c680d638f91c4130117", "class_name": "RelatedNodeInfo"}}, "text": "\"secret_key\": \"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\"\n}\n\n> print \"Indexer launched with struct(private_rpc_url = struct(ip_address = \\\"indexer-node\\\", path = \\\"\\\", port_number = 3030, protocol = \\\"http\\\"), public_rpc_url = struct(ip_address = \\\"127.0.0.1\\\", path = \\\"\\\", port_number = 8332, protocol = \\\"http\\\"), validator_key = {\\\"account_id\\\": \\\"test.near\\\", \\\"public_key\\\": \\\"ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\\\", \\\"secret_key\\\": \\\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\\"})\"\nIndexer launched with struct(private_rpc_url = struct(ip_address = \"indexer-node\", path = \"\", port_number = 3030, protocol = \"http\"), public_rpc_url = struct(ip_address = \"127.0.0.1\", path = \"\", port_number = 8332, protocol = \"http\"), validator_key = {\"account_id\": \"test.near\", \"public_key\": \"ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\",", "mimetype": "text/plain", "start_char_idx": 6601, "end_char_idx": 7563, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c": {"__data__": {"id_": "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fa720032-72d6-41c8-bab0-3b759e74aae7", "node_type": "1", "metadata": {}, "hash": "8162aa235e50f90c5312603c03de4fc575fe69ab63e4421b65b7d4a31cc9bfd6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b670d600-ef42-439d-b151-c637377bdc4d", "node_type": "1", "metadata": {}, "hash": "a07d74d01b02148c5d1816b7167308c260aeed8ecdf021764138ab09d8573511", "class_name": "RelatedNodeInfo"}}, "text": "\"secret_key\": \"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\"})\n\n> print \"Launching contract helper\"\nLaunching contract helper\n\n> print \"Adding contract helper service running on port '3000'\"\nAdding contract helper service running on port '3000'\n\n> add_service service_id=\"contract-helper-service\"\nService 'contract-helper-service' added with service GUID 'contract-helper-service-1670311796'\n\n> print \"Contract helper launchded with struct(private_url = struct(ip_address = \\\"contract-helper-service\\\", path = \\\"\\\", port_number = 3000, protocol = \\\"http\\\"), public_url = struct(ip_address = \\\"127.0.0.1\\\", path = \\\"\\\", port_number = 8330, protocol = \\\"http\\\"))\"\nContract helper launchded with struct(private_url = struct(ip_address = \"contract-helper-service\", path = \"\", port_number = 3000, protocol = \"http\"), public_url = struct(ip_address = \"127.0.0.1\", path = \"\", port_number = 8330, protocol = \"http\"))\n\n> print \"Launching explorer backend\"\nLaunching explorer backend\n\n> print \"Adding explorer backend service\"\nAdding explorer backend service\n\n> add_service service_id=\"explorer-backend\"\nService 'explorer-backend' added with service GUID 'explorer-backend-1670311799'\n\n> print \"Explorer backend launchded with struct(private_url = struct(ip_address = \\\"explorer-backend\\\", path = \\\"\\\", port_number = 8080, protocol = \\\"http\\\"), public_url = struct(ip_address = \\\"127.0.0.1\\\", path = \\\"\\\", port_number = 18080, protocol = \\\"http\\\"))\"\nExplorer backend launchded with struct(private_url = struct(ip_address = \"explorer-backend\", path = \"\", port_number = 8080, protocol = \"http\"), public_url = struct(ip_address = \"127.0.0.1\", path = \"\", port_number = 18080,", "mimetype": "text/plain", "start_char_idx": 7564, "end_char_idx": 9277, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b670d600-ef42-439d-b151-c637377bdc4d": {"__data__": {"id_": "b670d600-ef42-439d-b151-c637377bdc4d", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c", "node_type": "1", "metadata": {}, "hash": "b845d56f7f15e9f17e4133e3d30eb2725898f23df61d3c680d638f91c4130117", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91", "node_type": "1", "metadata": {}, "hash": "fe5b74bde8f25528f92d7f24a70542fde2ea4d23678455fe2b11cdf972f4e128", "class_name": "RelatedNodeInfo"}}, "text": "protocol = \"http\"))\n\n> print \"Launching explorer frontend\"\nLaunching explorer frontend\n\n> print \"Adding explorer frontend service running on port '3000'\"\nAdding explorer frontend service running on port '3000'\n\n> add_service service_id=\"explorer-frontend\"\nService 'explorer-frontend' added with service GUID 'explorer-frontend-1670311803'\n\n> print \"Explorer frontend launchded with struct(public_url = struct(ip_address = \\\"127.0.0.1\\\", path = \\\"\\\", port_number = 8331, protocol = \\\"http\\\"))\"\nExplorer frontend launchded with struct(public_url = struct(ip_address = \"127.0.0.1\", path = \"\", port_number = 8331, protocol = \"http\"))\n\n> print \"Launching wallet\"\nLaunching wallet\n\n> print \"Adding wallet service running on port '3004\"\nAdding wallet service running on port '3004\n\n> print \"Replacing variable 'NODE_URL' to 'http://127.0.0.1:8332' using regexp: '([,{])NODE_URL:[^,]*([,}])'\"\nReplacing variable 'NODE_URL' to 'http://127.0.0.1:8332' using regexp: '([,{])NODE_URL:[^,]*([,}])'\n\n> print \"Replacing variable 'ACCOUNT_HELPER_URL' to 'http://127.0.0.1:8330' using regexp: '([,{])ACCOUNT_HELPER_URL:[^,]*([,}])'\"\nReplacing variable 'ACCOUNT_HELPER_URL' to 'http://127.0.0.1:8330' using regexp: '([,{])ACCOUNT_HELPER_URL:[^,]*([,}])'\n\n> print \"Replacing variable 'EXPLORER_URL' to 'http://127.0.0.1:8331' using regexp: '([,{])EXPLORER_URL:[^,]*([,}])'\"\nReplacing variable 'EXPLORER_URL' to 'http://127.0.0.1:8331' using regexp: '([,{])EXPLORER_URL:[^,]*([,}])'\n\n> print \"Replacing variable 'NETWORK_ID' to 'localnet' using regexp: '([,{])NETWORK_ID:[^,]*([,}])'\"\nReplacing variable 'NETWORK_ID' to 'localnet' using regexp: '([,", "mimetype": "text/plain", "start_char_idx": 9278, "end_char_idx": 10907, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91": {"__data__": {"id_": "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b670d600-ef42-439d-b151-c637377bdc4d", "node_type": "1", "metadata": {}, "hash": "a07d74d01b02148c5d1816b7167308c260aeed8ecdf021764138ab09d8573511", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "94627349-70f3-4cd9-9608-a87a682bd0da", "node_type": "1", "metadata": {}, "hash": "c32ddf8463738dd62bed12c93fab68d706c44c6d253f872ece58dba004e1e2c0", "class_name": "RelatedNodeInfo"}}, "text": "{])NETWORK_ID:[^,]*([,}])'\n\n> print \"Replacing variable 'ACCOUNT_ID_SUFFIX' to 'test.near' using regexp: '([,{])ACCOUNT_ID_SUFFIX:[^,]*([,}])'\"\nReplacing variable 'ACCOUNT_ID_SUFFIX' to 'test.near' using regexp: '([,{])ACCOUNT_ID_SUFFIX:[^,]*([,}])'\n\n> print \"Replacing variable 'ACCESS_KEY_FUNDING_AMOUNT' to '3000000000000000000000000' using regexp: '([,{])ACCESS_KEY_FUNDING_AMOUNT:[^,]*([,}])'\"\nReplacing variable 'ACCESS_KEY_FUNDING_AMOUNT' to '3000000000000000000000000' using regexp: '([,{])ACCESS_KEY_FUNDING_AMOUNT:[^,]*([,}])'\n\n> add_service service_id=\"wallet\"\nService 'wallet' added with service GUID 'wallet-1670311807'\n\n> print \"Explorer wallet struct(public_url = struct(ip_address = \\\"127.0.0.1\\\", path = \\\"\\\", port_number = 8334, protocol = \\\"http\\\"))\"\nExplorer wallet struct(public_url = struct(ip_address = \"127.0.0.1\", path = \"\", port_number = 8334, protocol = \"http\"))\n\nStarlark code successfully run. Output was:\n{\n \"contract_helper_service_url\": \"http://127.0.0.1:8330\",\n \"explorer_url\": \"http://127.0.0.1:8331\",\n \"near_node_rpc_url\": \"http://127.0.0.1:8332\",\n \"network_name\": \"localnet\",\n \"root_validator_key\": {\n  \"account_id\": \"test.near\",\n  \"public_key\": \"ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\",\n  \"secret_key\": \"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\"\n },", "mimetype": "text/plain", "start_char_idx": 10907, "end_char_idx": 12263, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94627349-70f3-4cd9-9608-a87a682bd0da": {"__data__": {"id_": "94627349-70f3-4cd9-9608-a87a682bd0da", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91", "node_type": "1", "metadata": {}, "hash": "fe5b74bde8f25528f92d7f24a70542fde2ea4d23678455fe2b11cdf972f4e128", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3029912c-b1fd-444c-88f5-b987dc10908a", "node_type": "1", "metadata": {}, "hash": "ac9d69457c1ba1420f960d8cf44d4c3730eacb8a130d26c9a1052dd947bdf7be", "class_name": "RelatedNodeInfo"}}, "text": "\"wallet_url\": \"http://127.0.0.1:8334\"\n}\nINFO[2022-12-06T13:00:10+05:30] =============================================\nINFO[2022-12-06T13:00:10+05:30] ||          Created enclave: near          ||\nINFO[2022-12-06T13:00:10+05:30] =============================================\n============================================================ SUCCESS ================================================================================\n  ACTION Paste the following in your terminal to declare the following variables so you can use them:\n\n         export NEAR_ENV=\"local\"\n         export NEAR_CLI_LOCALNET_NETWORK_ID=\"localnet\"\n         export NEAR_NODE_URL=\"http://127.0.0.1:8332\"\n         export NEAR_CLI_LOCALNET_KEY_PATH=\"/Users/zerix/.neartosis/2022-12-06T12.59.04/validator-key.json\"\n         export NEAR_WALLET_URL=\"http://127.0.0.1:8334\"\n         export NEAR_HELPER_URL=\"http://127.0.0.1:8330\"\n         export NEAR_HELPER_ACCOUNT=\"test.near\n\\\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\\"})\ned25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\"})\ntest.near\"\n         export NEAR_EXPLORER_URL=\"http://127.0.0.1:8331\"\n\n  ACTION Paste the following into your terminal now to use the 'local_near' command as a replacement for the NEAR CLI for connecting to your\n         local cluster (e.g.", "mimetype": "text/plain", "start_char_idx": 12265, "end_char_idx": 13644, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3029912c-b1fd-444c-88f5-b987dc10908a": {"__data__": {"id_": "3029912c-b1fd-444c-88f5-b987dc10908a", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "94627349-70f3-4cd9-9608-a87a682bd0da", "node_type": "1", "metadata": {}, "hash": "c32ddf8463738dd62bed12c93fab68d706c44c6d253f872ece58dba004e1e2c0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f5a643d-9896-4768-8640-f47ba5f9a0b0", "node_type": "1", "metadata": {}, "hash": "17e33da0f2937951f52f83d4f017dccc5c25df48688f46c1e55cb929dbad9bb9", "class_name": "RelatedNodeInfo"}}, "text": "'local_near login'):\n\n         alias local_near='NEAR_ENV=\"local\" NEAR_CLI_LOCALNET_NETWORK_ID=\"localnet\" NEAR_NODE_URL=\"http://127.0.0.1:8332\" NEAR_CLI_LOCALNET_KEY_PATH=\"/Users/zerix/.neartosis/2022-12-06T12.59.04/validator-key.json\" NEAR_WALLET_URL=\"http://127.0.0.1:8334\" NEAR_HELPER_URL=\"http://127.0.0.1:8330\" NEAR_HELPER_ACCOUNT=\"test.near\n\\\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\\"})\ned25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\"})\ntest.near\" NEAR_EXPLORER_URL=\"http://127.0.0.1:8331\" near'\n\n  ACTION If you want the 'local_near' command available in all your new terminal windows, add the above alias into your .bash_profile/.bashrc/.zshrc\n         file and open a new terminal window.\n\n  ACTION To stop your cluster, run the following:\n\n         kurtosis enclave stop near\n\n  ACTION To remove your cluster, run:\n\n         kurtosis clean -a\n\n============================================================ SUCCESS ================================================================================\n```\n\n:::tip\n\nThe URLs and validator key value above will be the same for each run of Kurtosis, so you can safely use these values in your config files.", "mimetype": "text/plain", "start_char_idx": 13645, "end_char_idx": 14907, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7f5a643d-9896-4768-8640-f47ba5f9a0b0": {"__data__": {"id_": "7f5a643d-9896-4768-8640-f47ba5f9a0b0", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3029912c-b1fd-444c-88f5-b987dc10908a", "node_type": "1", "metadata": {}, "hash": "ac9d69457c1ba1420f960d8cf44d4c3730eacb8a130d26c9a1052dd947bdf7be", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "14ff7ff7-4504-4972-94d2-b53bb29f5d79", "node_type": "1", "metadata": {}, "hash": "05c7291ebac7b1a73e4b843576bf31be060b6c8bb916b79a22a47a3e74f9cee9", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n:::tip\n\nIf you're running Kurtosis on a remote machine, you'll also need to:\n\n- Replace the `127.0.0.1` IP addresses in the environment variables with the IP address of your remote machine\n- Copy the validator key from where it lives on the machine running Kurtosis (in `NEAR_CLI_LOCALNET_KEY_PATH`) to somewhere on your local machine\n- Adjust the value of the `NEAR_CLI_LOCALNET_KEY_PATH` on your local machine to match the location you stored the key at\n\n:::\n\n</details>\n\nIf you ever forget the above URLs, you can inspect the cluster:\n\n```\nkurtosis enclave inspect near\n```\n\n### Setup Environment Variables\n\nAfter deploying your Kurtosis NEAR Package, you will need to setup some environment variables to make life a lot easier. Notice the **ACTION** sections in your terminal log from the package deployment. You will be using these exact values to setup these variables.\n\n1. Follow the first ACTION item from the deployment log by copying all of the export commands and running them in your terminal.\n\n**Example exports: (DO NOT COPY ~ yours will be slightly different)**\n\n```bash\nexport NEAR_ENV=\"local\"\nexport NEAR_CLI_LOCALNET_NETWORK_ID=\"localnet\"\nexport NEAR_NODE_URL=\"http://127.0.0.1:8332\"\nexport NEAR_CLI_LOCALNET_KEY_PATH=\"/Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json\"\nexport NEAR_WALLET_URL=\"http://127.0.0.1:8334\"\nexport NEAR_HELPER_URL=\"http://127.0.0.1:8330\"\nexport NEAR_HELPER_ACCOUNT=\"test.near\"\nexport NEAR_EXPLORER_URL=\"http://127.0.0.1:8331\"\n```\n\n2. Proceed to the second ACTION item which asks you to create an alias for `local_near`. This is what we will use when running [`near-cli`](/tools/near-cli) commands with our test environment.", "mimetype": "text/plain", "start_char_idx": 14909, "end_char_idx": 16594, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "14ff7ff7-4504-4972-94d2-b53bb29f5d79": {"__data__": {"id_": "14ff7ff7-4504-4972-94d2-b53bb29f5d79", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f5a643d-9896-4768-8640-f47ba5f9a0b0", "node_type": "1", "metadata": {}, "hash": "17e33da0f2937951f52f83d4f017dccc5c25df48688f46c1e55cb929dbad9bb9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d", "node_type": "1", "metadata": {}, "hash": "e9e7cd019273d11b7b9f5f4f1d667f87475c22f4067e1cba2fb0d2de0a1978e2", "class_name": "RelatedNodeInfo"}}, "text": "**Example alias: (DO NOT COPY ~ yours will be slightly different)**\n\n```bash\nalias local_near='NEAR_ENV=\"local\" NEAR_CLI_LOCALNET_NETWORK_ID=\"localnet\" NEAR_NODE_URL=\"http://127.0.0.1:8332\" NEAR_CLI_LOCALNET_KEY_PATH=\"/Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json\" NEAR_WALLET_URL=\"http://127.0.0.1:8334\" NEAR_HELPER_URL=\"http://127.0.0.1:8330\" NEAR_HELPER_ACCOUNT=\"test.near\" NEAR_EXPLORER_URL=\"http://127.0.0.1:8331\" near'\n```\n\nNow replacing `near` with `local_near` when running [`near-cli`](/tools/near-cli) commands will perform these actions in your local test environment.\n\n### Testing\n\nEnsure that your alias is working correctly by checking the state of the root account `test.near`.\n\nRun the following in your terminal:\n\n```bash\nlocal_near state test.near\n```\n\nThis should return something similar to the following output:\n\n```bash\nLoaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nAccount test.near\n{\n  amount: '1000000000000000000000000000000000',\n  block_hash: 'G8jx4pYgqFSFSCDyM9MvVYj3HAdgRuxhkAHGweNhUNrY',\n  block_height: 224,\n  code_hash: '11111111111111111111111111111111',\n  locked: '50000000000000000000000000000000',\n  storage_paid_at: 0,\n  storage_usage: 182,\n  formattedAmount: '1,000,000,000'\n}\n```\n\n**Congratulations! Setup is complete and you are ready to start exploring your local NEAR blockchain!", "mimetype": "text/plain", "start_char_idx": 16596, "end_char_idx": 18063, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d": {"__data__": {"id_": "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "14ff7ff7-4504-4972-94d2-b53bb29f5d79", "node_type": "1", "metadata": {}, "hash": "05c7291ebac7b1a73e4b843576bf31be060b6c8bb916b79a22a47a3e74f9cee9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41f9d009-7905-4f00-b3bf-ffcefc7b6043", "node_type": "1", "metadata": {}, "hash": "5b1adbf63e3628f733fdb4328ee0ebd875fd85b3a5de7f86bc8f166f6ca5f871", "class_name": "RelatedNodeInfo"}}, "text": "** \ud83c\udf89\n\n:::tip\n\nThe Kurtosis Team has created a great [video presentation](https://www.loom.com/share/8a1b8e2138334a81a380f5d523fba27e) that covers the above steps as well as demoing the functionality of this local network setup.\n\n:::\n\n---\n\n## Using Wallet and Explorer\n\n### Local NEAR Wallet\n\nNow that you have [everything setup](#setup), create an account using your local NEAR Wallet at 127.0.0.1:8334.\n\n![Local wallet landing page](/docs/assets/kurtosis/local-wallet-landing-page.png)\n\nThe account creation is exactly the same as on mainnet or testnet but **only the passphrase recovery mode** will work here. Also note that the root account is `test.near` instead of `testnet` or `mainnet`. This means that all the accounts you create will be [subaccounts](/concepts/protocol/account-model#subaccounts) of `test.near`. (ex. `benji.test.near`)\n\n:::tip\n\nBecause the Wallet will start on the same host and port, and the Wallet stores your account information in your browser's local storage, if you've created an account with a previous Kurtosis network then the Wallet will be storing the old account's information (which won't work with your new network). If this is the case for you, you'll need to clear the Wallet's storage by visiting [your Chrome's local storage](chrome://settings/siteData?searchSubpage=127.0.0.1), removing the `127.0.0.1` entry, and refreshing the Wallet.\n\n:::\n\nNow that you've created an account, try interacting with it using the local CLI. In order to use this account you will need to \"login\" with it via CLI which will save a full access key locally for that account. [`near login`](/tools/near-cli#import) is the command to perform this action but as you are on `localnet` you will need to replace `near` with `local_near`.\n\n```bash\nlocal_near login\n```\n\nThis launches the local wallet site and will ask for confirmation for this action.", "mimetype": "text/plain", "start_char_idx": 18063, "end_char_idx": 19933, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "41f9d009-7905-4f00-b3bf-ffcefc7b6043": {"__data__": {"id_": "41f9d009-7905-4f00-b3bf-ffcefc7b6043", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d", "node_type": "1", "metadata": {}, "hash": "e9e7cd019273d11b7b9f5f4f1d667f87475c22f4067e1cba2fb0d2de0a1978e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90f0d7f3-0696-4c64-8fd3-2183e12cd205", "node_type": "1", "metadata": {}, "hash": "9580d06935c2efa2b3e27f7c5ed5ba87c2d9e76a01641cefe390ac5b32ba2209", "class_name": "RelatedNodeInfo"}}, "text": "Once you authorize you should see confirmation in your terminal similar to this:\n\n```bash\nLogged in as [ kevin.test.near ] with public key [ ed25519:8EaALn... ] successfully\n```\n\n- Export your account ID to an environment variable by running the following: (replacing YOUR_ACCOUNT_ID)\n\n```bash\nexport ACCOUNT_ID=YOUR_ACCOUNT_ID\n```\n\n- Now create a test transaction by sending 1 $NEAR to the root account `test.near`:\n\n```bash\nlocal_near send $ACCOUNT_ID test.near 1\n```\n\n<details>\n<summary>Example response: </summary>\n\n```bash\nSending 1 NEAR to test.near from kevin.test.near\nLoaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nTransaction Id 3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:8331/transactions/3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\n```\n\n</details>\n\n### Local NEAR Explorer\n\nAgain, now that you have [everything setup](#setup) you can view the transaction details of the command you just performed at the end of [the last section](#local-near-wallet). Notice that the last line of the terminal log displays a link to the transaction details in your local NEAR Explorer.", "mimetype": "text/plain", "start_char_idx": 19934, "end_char_idx": 21251, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90f0d7f3-0696-4c64-8fd3-2183e12cd205": {"__data__": {"id_": "90f0d7f3-0696-4c64-8fd3-2183e12cd205", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41f9d009-7905-4f00-b3bf-ffcefc7b6043", "node_type": "1", "metadata": {}, "hash": "5b1adbf63e3628f733fdb4328ee0ebd875fd85b3a5de7f86bc8f166f6ca5f871", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5e504a5c-91f4-4673-baca-4f7c90c4ddc6", "node_type": "1", "metadata": {}, "hash": "097c234b5cd11bea2f4e3db1eb11911f9ab35dcb262e80c482b834a4361b2912", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nSending 1 NEAR to test.near from kevin.test.near\nLoaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nTransaction Id 3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:8331/transactions/3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\n```\n\n- Click on this link or copy/paste it into your browser:\n\n![Local explorer sending 1 NEAR](/docs/assets/kurtosis/local-explorer-send-funds.png)\n\nHere everything behaves exactly like the `testnet` or `mainnet` NEAR Explorer except it is retrieving data from your local NEAR blockchain!\n\n- If you ever need to open your local NEAR Explorer, you can always visit 127.0.0.1:8331 or run:\n\n```bash\necho $NEAR_EXPLORER_URL\n```\n\n**Example Response:**\n\n```bash\nhttp://127.0.0.1:8331\n```\n\n![Localnet explorer](/docs/assets/kurtosis/localnet-explorer.png)\n\n---\n\n## Deploy a Smart Contract\n\nWith everything setup and your `test.near` account created, it's time to deploy a smart contract on `localnet`. For this example you will deploy an NFT use a pre-compiled WASM smart contract from [this NFT example](https://github.com/near-examples/nft-tutorial.git).", "mimetype": "text/plain", "start_char_idx": 21253, "end_char_idx": 22564, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5e504a5c-91f4-4673-baca-4f7c90c4ddc6": {"__data__": {"id_": "5e504a5c-91f4-4673-baca-4f7c90c4ddc6", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90f0d7f3-0696-4c64-8fd3-2183e12cd205", "node_type": "1", "metadata": {}, "hash": "9580d06935c2efa2b3e27f7c5ed5ba87c2d9e76a01641cefe390ac5b32ba2209", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "45074c6b-2153-4bc1-9687-c896568418f4", "node_type": "1", "metadata": {}, "hash": "4e5b2bdea827cb596fa02fd4a088efa931e7a8dfeb9116c7053c8006c1834e6b", "class_name": "RelatedNodeInfo"}}, "text": "- Download the smart contract:\n\n```\ncurl -o ~/main.wasm https://github.com/near-examples/nft-tutorial/raw/main/out/main.wasm -L\n```\n\n- Deploy the smart contract:\n\n```\nlocal_near deploy --wasmFile ~/main.wasm --accountId $ACCOUNT_ID\n```\n\n<details>\n<summary>Example response: </summary>\n\n```\nLoaded master account test.near key from /Users/benjaminkurrek/.neartosis/2021-12-02T13.37.41/validator-key.json with public key = ed25519:AnLHi4ZAxfxFAQSXniycyZS6dpBqxhmVZH3zBCZbqAS6\nStarting deployment. Account id: goteam.test.near, node: http://127.0.0.1:62285, helper: http://127.0.0.1:62286, file: /Users/benjaminkurrek/main.wasm\nTransaction Id 7atHm2piVehEitYeMF2FxWuRJVd6ZdRQEo3K83P98GuR\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:62290/transactions/7atHm2piVehEitYeMF2FxWuRJVd6ZdRQEo3K83P98GuR\nDone deploying to goteam.test.near\n```\n\n</details>\n\n- Click on the clink to the Explorer and verify that the contract was deployed:\n\n![Local explorer contract deployed](/docs/assets/kurtosis/local-explorer-contract-deployed.png)\n\nNow, let's interact with the deployed contract.\n\n- First, initialize the contract by running the following command:\n\n```bash\nlocal_near call $ACCOUNT_ID new_default_meta '{\"owner_id\": \"'$ACCOUNT_ID'\"}' --accountId $ACCOUNT_ID\n```\n\nThis will initialize the contract with some default metadata and set our account ID as the owner of the contract.\n\n- Now mint your first NFT!\n\n```bash\nlocal_near call $ACCOUNT_ID nft_mint '{\"token_id\": \"team_token\", \"metadata\": { \"title\": \"Go Team!\", \"description\": \"Go Team!", "mimetype": "text/plain", "start_char_idx": 22566, "end_char_idx": 24157, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "45074c6b-2153-4bc1-9687-c896568418f4": {"__data__": {"id_": "45074c6b-2153-4bc1-9687-c896568418f4", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5e504a5c-91f4-4673-baca-4f7c90c4ddc6", "node_type": "1", "metadata": {}, "hash": "097c234b5cd11bea2f4e3db1eb11911f9ab35dcb262e80c482b834a4361b2912", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e3422660-6cfe-4606-aec4-3d64fcef0707", "node_type": "1", "metadata": {}, "hash": "7d9c3667c4eee642787476a63e1fb5c17191ac476d0f540147d01261501bf005", "class_name": "RelatedNodeInfo"}}, "text": "\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\", \"copies\": 1}, \"receiver_id\": \"'$ACCOUNT_ID'\"}' --accountId $ACCOUNT_ID --amount 0.1\n```\n\nOnce the NFT has been minted, you can view the token on the local wallet's collectibles tab. If you already had the wallet site open, simply refresh. Otherwise open your local NEAR Wallet instance and view your collectible.\n\n![Local wallet collectibles tab](/docs/assets/kurtosis/local-wallet-collectibles-tab.png)\n\nWe won't spoil what the NFT is, but once you switch over to the collectibles tab your beautiful token should be there!\n\n---\n\n## Connecting a dApp to `localnet`\n\nThe ability to develop decentralized applications locally is a dream come true for dApp developers and the Kurtosis NEAR Package really simplifies this process. Here you'll integrate `localnet` into one of the examples from [`near-examples`](https://github.com/near-examples/).\n\n### Clone Example dApp\n\n- Clone the [NEAR Guestbook](https://github.com/near-examples/guest-book-examples) repository:\n\n```bash\ngit clone https://github.com/near-examples/guest-book-examples.git\n```\n\n### Configure Network\n\n- Open the `src/config.js` file inside the guestbook repo and scroll down to the `local` config:\n\n```javascript\ncase 'local':\n      return {\n        networkId: 'local',\n        nodeUrl: 'http://localhost:3030',\n        keyPath: `${process.env.HOME}/.near/validator_key.json`,\n        walletUrl: 'http://localhost:4000/wallet',\n        contractName: CONTRACT_NAME\n      };\n```\n\nHere you will need to update all of the values **except** the `contractName`. Copy the following into your `local` case. This will automatically assign the config to your environment variables if you've specified them. This way, you don't need to change anything when running new enclaves.", "mimetype": "text/plain", "start_char_idx": 24157, "end_char_idx": 26004, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3422660-6cfe-4606-aec4-3d64fcef0707": {"__data__": {"id_": "e3422660-6cfe-4606-aec4-3d64fcef0707", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "45074c6b-2153-4bc1-9687-c896568418f4", "node_type": "1", "metadata": {}, "hash": "4e5b2bdea827cb596fa02fd4a088efa931e7a8dfeb9116c7053c8006c1834e6b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58efc3e5-a5e1-4201-b990-73dc14aed8ed", "node_type": "1", "metadata": {}, "hash": "2544dbc37b8c1dada4522e2e686fedc737e96ba9c77c132c7fd3f822646d2f01", "class_name": "RelatedNodeInfo"}}, "text": "```javascript\ncase 'local':\n      return {\n            networkId: process.env.NEAR_CLI_LOCALNET_NETWORK_ID || 'local',\n            nodeUrl: process.env.NEAR_NODE_URL || 'http://localhost:3030',\n            keyPath: process.env.NEAR_CLI_LOCALNET_KEY_PATH || `${process.env.HOME}/.near/validator_key.json`,\n            walletUrl: process.env.NEAR_WALLET_URL || 'http://localhost:4000/wallet',\n            contractName: CONTRACT_NAME,\n        };\n```\n\nThe last thing you will need to do is set your `NODE_ENV` in your terminal to `local` so your dApp will use the values we configured above.\n\n- Run:\n\n```bash\nexport NODE_ENV=local\n```\n\n**Your dApp is now fully configured to use `localnet`!** \ud83c\udf89\n\n### Create Contract Account\n\nAs mentioned earlier, you do not need to change the `contractName` in the `config.js` file you updated earlier. This is an environment variable you will configure now. Let's quickly create a subaccount from [the account you created earlier](#local-near-wallet) to deploy the guest-book contract to.\n\n- Using the `local_near CLI`, run the following command:\n\n```bash\nlocal_near create-account guest-book.$ACCOUNT_ID --masterAccount $ACCOUNT_ID --initialBalance 5\n```\n\n**Example Response:**\n\n```bash\nLoaded master account test.near key from /Users/benjaminkurrek/.neartosis/2021-12-02T13.37.41/validator-key.json with public key = ed25519:AnLHi4ZAxfxFAQSXniycyZS6dpBqxhmVZH3zBCZbqAS6\nSaving key to 'undefined/localnet/guest-book.goteam.test.near.json'\nAccount guest-book.goteam.test.near for network \"localnet\" was created.\n```\n\n- Export the `CONTRACT_NAME` environment variable as the account you just created:\n\n```bash\nexport CONTRACT_NAME=guest-book.$ACCOUNT_ID\n```\n\n### Deploy Contract to `localnet`\n\nWith the network setup and contract account created you are now ready to launch your dApp!\n\n- Run the following command in the root directory of the guest book repo:\n\n```bash\nyarn && yarn start\n```\n\n**Example Response:**\n\n!", "mimetype": "text/plain", "start_char_idx": 26006, "end_char_idx": 27953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58efc3e5-a5e1-4201-b990-73dc14aed8ed": {"__data__": {"id_": "58efc3e5-a5e1-4201-b990-73dc14aed8ed", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3422660-6cfe-4606-aec4-3d64fcef0707", "node_type": "1", "metadata": {}, "hash": "7d9c3667c4eee642787476a63e1fb5c17191ac476d0f540147d01261501bf005", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "650f0dbe-3df0-4d77-bf06-cd6789c45df1", "node_type": "1", "metadata": {}, "hash": "7497869d0615ab2a0bb1bc5b7351c7addd5f4e2d934d3dcd7421293fb6d3ab86", "class_name": "RelatedNodeInfo"}}, "text": "[Local dApp build](/docs/assets/kurtosis/local-dapp-build.png)\n\n- Open the dApp by clicking on the server address in the terminal:\n\n```bash\nServer running at http://localhost:1234\n\u2728  Built in 1.20s.\n```\n\nYou should see the Guest Book landing page:\n\n![Local Guest Book Landing Page](/docs/assets/kurtosis/local-guest-book-landing.png)\n\n:::tip\n\nIf you run into any problems signing into try clearing your browser's local storage. If you've used the guest-book before your browser might think you're still logged in with your `testnet` account and it will throw an error saying it can't find that account on `localnet`.\n\n:::\n\nOnce you've logged in, you can sign a message with an optional donation.\n\n![Local Guest Book Signed Message](/docs/assets/kurtosis/local-guest-book-signed-message.png)\n\n- Sign the Guest Book which will create a transaction on `localnet`.\n\n- Once complete, open your local NEAR explorer and you can view the transaction you just created!\n\n![Local Explorer Signed Transaction](/docs/assets/kurtosis/local-explorer-signed-transaction.png)\n\n**Congratulations! You've successfully deployed and interacted with a dApp on a local NEAR blockchain!** \ud83c\udf89\n\n---\n\n## Managing NEAR Packages\n\nThe Kurtosis NEAR Packages you create will continue to run on your local machine for as long as your Docker engine is running. This package runs inside of a Kurtosis \"enclave\" which is an environment isolated from both your computer and other enclaves. In practice, this means that you can have multiple independent local NEAR clusters running on your machine simply by rerunning the script we executed from the [setup instructions](#setup).\n\n### View Package Status\n\n- To see the status of your existing enclaves, run:\n\n```bash\nkurtosis enclave ls\n```\n\n### View Package Details\n\n- To see detailed information about an enclave, copy an enclave ID and run:\n\n```bash\nkurtosis enclave inspect near\n```\n\n### Terminate Package\n\n- To shut down your NEAR Package and free up resources on your machine, run the following:\n\n```bash\nkurtosis enclave stop near\n```\n\n:::note\n\nYou will not be able to restart the cluster!", "mimetype": "text/plain", "start_char_idx": 27953, "end_char_idx": 30061, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "650f0dbe-3df0-4d77-bf06-cd6789c45df1": {"__data__": {"id_": "650f0dbe-3df0-4d77-bf06-cd6789c45df1", "embedding": null, "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d15be2bd-e256-4583-b355-58ff5c2082c6", "node_type": "4", "metadata": {}, "hash": "fb557b25aa8eefb1c60879495da486fb85dd5185d318cb64bd2cc624419c38c4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "58efc3e5-a5e1-4201-b990-73dc14aed8ed", "node_type": "1", "metadata": {}, "hash": "2544dbc37b8c1dada4522e2e686fedc737e96ba9c77c132c7fd3f822646d2f01", "class_name": "RelatedNodeInfo"}}, "text": "If this is something you need, please [file an issue here](https://github.com/kurtosis-tech/kurtosis-cli-release-artifacts) so we can prioritize it.\n\n:::\n\n### Delete Package\n\n- Stopping an enclave leaves its resources intact so that you can examine them if need be. To destroy a stopped enclave and free its resources, run:\n\n```\nkurtosis clean\n```\n\n### Delete All Package\n\nIf you would like to destroy _all_ enclaves, regardless of if they're running, pass the `-a` flag to `clean` like so:\n\n```\nkurtosis clean -a\n```\n\nThis can be a handy way to clear all your Kurtosis data.", "mimetype": "text/plain", "start_char_idx": 30062, "end_char_idx": 30637, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "81af084d-5f6e-4f2e-be09-9e24413e5fa0": {"__data__": {"id_": "81af084d-5f6e-4f2e-be09-9e24413e5fa0", "embedding": null, "metadata": {"file_path": "./near_dist/02-use-seed-phrase.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "66c857d3-48ae-4a5c-adce-1277a61f70e5", "node_type": "4", "metadata": {}, "hash": "3f30ef978cae949497077287d2ad6a598f5e0329880470f3d227e65c2592152e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1f50409c-20c3-4e64-ac5c-366bc7eb463f", "node_type": "1", "metadata": {}, "hash": "ad5a9894d3764b8a71f2a37592e323878aba454ab0905a3ff3054cbd789ed478", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: \"Seed phrase logic\"\ntitle: \"Implementing the seed phrase logic from the necessary libraries\"\n---\n\n# Seed phrase and key derivation\n\nThere are two separate things we'll want to do:\n\n1. **Create a random seed phrase** for the user when they visit the crossword puzzle. This will be used if they win and don't have a NEAR account and wish to create one. They can then paste this seed phrase into NEAR Wallet afterward to import their account (which is basically like \"logging in\" and is currently possible at https://testnet.mynearwallet.com/recover-seed-phrase).\n2. **Turn the crossword solution into a key pair**, instead of just hashing it.\n\n## near-seed-phrase library\n\nWe can add the `near-seed-phrase` package to our project with:\n\n```bash\nnpm install near-seed-phrase --save\n```\n\n:::note Code snippets for this chapter\nAt this point in the tutorial, it's more difficult to share code snippets that are both meaningful and meant to be copy/pasted into a project.\n\nThe snippets provided might differ slightly from the implementation of the [completed code for chapter 3](https://github.com/near-examples/crossword-tutorial-chapter-3), which might be the best place to look for the functioning code.\n:::\n\n## Generate random seed phrase for new account creation (if the winner doesn't already have an account)\n\n```js\nimport { generateSeedPhrase } from 'near-seed-phrase';\n\n// Create a random key in here\nlet seedPhrase = generateSeedPhrase(); // generateSeedPhrase() returns an object {seedPhrase, publicKey, secretKey}\nlocalStorage.setItem('playerKeyPair', JSON.stringify(seedPhrase));\n```\n\n## Parse solution as seed phrase\n\n(This security measure prevents front-running.)\n\n```js\nimport { parseSeedPhrase } from 'near-seed-phrase';\n// Get the seed phrase from the completed puzzle.\n// The original puzzle creator would have already called this same function with the same inputs and would have\n// already called `AddKey` on this contract to add the key related to this seed phrase. Here, using this deterministic\n// function, the front-end will automatically generate that same key based on the inputs from the winner.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1f50409c-20c3-4e64-ac5c-366bc7eb463f": {"__data__": {"id_": "1f50409c-20c3-4e64-ac5c-366bc7eb463f", "embedding": null, "metadata": {"file_path": "./near_dist/02-use-seed-phrase.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "66c857d3-48ae-4a5c-adce-1277a61f70e5", "node_type": "4", "metadata": {}, "hash": "3f30ef978cae949497077287d2ad6a598f5e0329880470f3d227e65c2592152e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "81af084d-5f6e-4f2e-be09-9e24413e5fa0", "node_type": "1", "metadata": {}, "hash": "d7a780a8fd0722c9472cd0e3890e2e888e6b85202457f77ef5988facc3fbc106", "class_name": "RelatedNodeInfo"}}, "text": "const seedPhrase = parseSolutionSeedPhrase(data, gridData); // returns a string of space-separated words\n// Get the public and private key derived from the seed phrase\nconst {secretKey, publicKey} = parseSeedPhrase(seedPhrase);\n\n// Set up the account and connection, acting on behalf of the crossword account\nconst keyStore = new nearAPI.keyStores.InMemoryKeyStore(); // Another type of key\nconst keyPair = nearAPI.utils.key_pair.KeyPair.fromString(secretKey);\nawait keyStore.setKey(nearConfig.networkId, nearConfig.contractName, keyPair);\nnearConfig.keyStore = keyStore;\nconst near = await nearAPI.connect(nearConfig);\nconst crosswordAccount = await near.account(nearConfig.contractName);\n\n// Call the submit_solution method using the discovered function-call access key\nlet transaction = await crosswordAccount.functionCall(\u2026);\n```\n\nThe last line should look familiar. We did something similar in the last chapter, except we used the `WalletConnection`'s account to do the function call.\n\nThis time we're using an `InMemoryKeyStore` instead of the browser, as you can see toward the middle of the snippet.\n\n### Key stores\n\nWe have now used almost all the key stores available in `near-api-js`:\n\n1. `UnencryptedFileSystemKeyStore` \u2014 early on, when we used the NEAR CLI command `near login`, this created a file in our operating system's home directory containing a private, full-access key to our account.\n2. `BrowserLocalStorageKeyStore` \u2014 in the last chapter, when the user first logs in, the function-call access key is saved in the browser's local storage.\n3. `InMemoryKeyStore` \u2014 for this chapter, we'll simply use the computer's memory to store the private key derived from the crossword solution.\n\n:::tip You can have multiple key stores\nTechnically, there's another type of key store called the `MergeKeyStore`.\n\nSay you want to look for private keys in various directories. You can essentially have a list of `UnencryptedFileSystemKeyStore` key stores that look in different places.\n\nUse the `MergeKeyStore` when you might want to look for a private key in more than one place.\n:::", "mimetype": "text/plain", "start_char_idx": 2159, "end_char_idx": 4250, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "85a17421-de01-4757-8215-63db41f0f4af": {"__data__": {"id_": "85a17421-de01-4757-8215-63db41f0f4af", "embedding": null, "metadata": {"file_path": "./near_dist/lock.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d83edd7c-054f-4c11-839a-7ec062a4c796", "node_type": "4", "metadata": {}, "hash": "20311f41e513d7d9933a1a7afca6a058b924ed48d410aee71b0f05e001f11bb0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: lock\ntitle: Locking Accounts\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nRemoving all [full access keys](../../../4.tools/cli.md#near-delete-key-near-delete-key) from an account will effectively **lock it**.\n\nWhen an account is locked nobody can perform transactions in the account's name (e.g. update the code or transfer money).\n\n#### How to Lock an Account\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near keys <dev-account>\n  # result: [access_key: {\"nonce\": ..., \"public_key\": '<key>'}]\n\n  near delete-key <dev-account> '<key>'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account list-keys <dev-account> network-config testnet now\n  # result:\n\n  +---+------------+-------+-------------+\n  | # | Public Key | Nonce | Permissions |\n  +---+------------+-------+-------------+\n  ..    '<key>'      ...        ...\n  +---+------------+-------+-------------+\n\n  near account delete-key <dev-account> '<key>' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n#### Why Locking an Account\n\nLocking an account brings more reassurance to end-users, since they know no external actor will be able to manipulate the account's\ncontract or balance.\n\n:::tip Upgrading Locked Contracts\n\nPlease do note that, while no external actor can update the contract, the contract **can still upgrade itself**. See [this article](upgrade.md#programmatic-update) for details.\n\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1487, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dab55d69-014b-4d52-8716-963dec432e4a": {"__data__": {"id_": "dab55d69-014b-4d52-8716-963dec432e4a", "embedding": null, "metadata": {"file_path": "./near_dist/bos-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "68dcd623-6fbc-4ff8-8cea-dae528a53e8d", "node_type": "4", "metadata": {}, "hash": "2687c644c75e6c39ce82890c10f42c56890e860f8af8ac169b646613e850801c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e938f88-2e2f-4804-878c-87602638d550", "node_type": "1", "metadata": {}, "hash": "b16fa6063a9afd843c63fd0e756e5d889a6230ebb82090138cffecf6f504726d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: bos-components\ntitle: Historical data\nsidebar_label: Handling Historical data\n---\n\nBuilding components that handle historical blockchain data require dedicated solutions that manage the data and reduce the latency of requests, as it's not possible to scan the whole blockchain when a user makes a request.\n\nA simple solution for developers building on NEAR is using [QueryAPI](../environment.md), a fully managed solution to build indexer functions, extract on-chain data, store it in a database, and be able to query it using GraphQL endpoints.\n\n:::tip\nLearn more about QueryAPI in this [QueryAPI Overview](../environment.md) article.\n:::\n\n---\n\n## Tutorials\n\nFor a technical implementation deep-dive, check these QueryAPI tutorials:\n\n  - [Posts Indexer tutorial](../../../3.tutorials/near-components/indexer-tutorials/posts-indexer.md): this indexer creates a new row in a pre-defined database for every new Social post found on the blockchain.\n  - [Hype Indexer tutorial](../../../3.tutorials/near-components/indexer-tutorials/hype-indexer.md): this indexer creates a new row in a pre-defined database for every new Social post or comment found on the blockchain that contains either `PEPE` or `DOGE` in the contents.\n  - [Social Feed Indexer tutorial](../../../3.tutorials/near-components/indexer-tutorials/feed-indexer.md): this indexer keeps track of new posts, comments, and likes on Social, so a social feed can be rendered quickly.\n\n---\n\n## GraphQL queries \n\nUsing [QueryAPI's GraphiQL](../../6.data-infrastructure/query-api/index-function.md#mutations-in-graphql) tab, you can access the GraphiQL Explorer that provides a user friendly GraphQL playground, where you can view and create queries and mutations based on the DB schema that you defined for the indexer.\n\n![QueryAPI Indexer Dashboard](/docs/assets/QAPIgraphiql.png)\n\nYou can easily set some fields and select the returning data\nthat you want, and the tool will build a query on the mutation panel on the right.\nThen you can copy the resulting query, either in your JavaScript code so that you pass actual\ndata manually, or you pass in the mutation data object as a second parameter.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2160, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e938f88-2e2f-4804-878c-87602638d550": {"__data__": {"id_": "3e938f88-2e2f-4804-878c-87602638d550", "embedding": null, "metadata": {"file_path": "./near_dist/bos-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "68dcd623-6fbc-4ff8-8cea-dae528a53e8d", "node_type": "4", "metadata": {}, "hash": "2687c644c75e6c39ce82890c10f42c56890e860f8af8ac169b646613e850801c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dab55d69-014b-4d52-8716-963dec432e4a", "node_type": "1", "metadata": {}, "hash": "0c24cba2d01e71fd31d379c7d5d5c758738a41f725ef1b75a135115fede1d8e1", "class_name": "RelatedNodeInfo"}}, "text": "For example, if you go and add a new mutation, click <kbd>+</kbd>, then you can do a bunch of actions here, such as creating, deleting, or inserting posts into your table.\n\n![Playground](/docs/assets/QAPIScreen.gif)\n\nIf you want to test your mutation, using [Debug Mode](../../6.data-infrastructure/query-api/index-function.md#local-debug-mode) you can add a specific\nblock to the list, and then play it to see how it works. \nBased on the indexer logic you defined, you'll get a call to the GraphQL mutation with the object\nand data passed into it.\n\n:::tip Video Walkthrough\n\n**Tip:** watch the video on how to [create mutations in GraphQL](https://www.youtube.com/watch?v=VwO6spk8D58&t=781s).\n\n:::\n\n---\n\n## Generate a NEAR component using Playground\n\nCreating a NEAR component from a GraphQL query is simple when using QueryAPI's GraphQL Playground. Just follow these steps:\n\n- go to the GraphiQL tab\n- select the query that you want to use\n- click on the <kbd>Show GraphiQL Code Exporter</kbd> button\n- get some default code here, copy it,\n- go to the NEAR sandbox, paste it.\n\nThis will set up some boilerplate code to execute the GraphQL query, add the query that you had\nin your playground and then call that query, extract the data and render it using the\nrender data function.\n\nOnce you have the NEAR component code, you can test it out by going to [Jutsu](https://app.jutsu.ai/),\npasting the generated code, and enabling <kbd>Live Preview</kbd>.\nNext, you can create a nice UI over this boilerplate code, and publish your new NEAR component.\n\n#### Component Examples\n\n- [Activity Feed widget](https://near.org/near/widget/ComponentDetailsPage?src=roshaan.near/widget/user-activity-feed&tab=source) running on [dev.near.org](https://dev.near.org)", "mimetype": "text/plain", "start_char_idx": 2162, "end_char_idx": 3914, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8d73c0f8-e403-447c-82d0-7b687ba7317a": {"__data__": {"id_": "8d73c0f8-e403-447c-82d0-7b687ba7317a", "embedding": null, "metadata": {"file_path": "./near_dist/factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "db861bc6-431a-4bd7-8064-ed51384bf951", "node_type": "4", "metadata": {}, "hash": "23a0c3db12f8b94130208cbe3040a396d9b6effb31d6b0beb3c443504be27fbd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "89977740-9a21-4386-ae80-b15d9e340e45", "node_type": "1", "metadata": {}, "hash": "7b20f1eea2f1a0f9d3f8da077cbf4bdc98f20c8ebbbc970c6f4fa7bea48f9209", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: factory\ntitle: Factory\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nA factory is a smart contract that stores a compiled contract on itself, and automatizes deploying it into\nsub-accounts.\n\nWe have two factory examples:\n\n1. [**Token Factory**](https://github.com/near-examples/token-factory): A factory that creates [fungible tokens](../fts/0-intro.md) contracts.\n2. [**A Generic Factory**](https://github.com/near-examples/factory-rust): A factory that creates [donation contracts](./donation.md), but allows to change the contract it deploys.\n\n:::info\nIn this page we will focus on the Donation factory, to learn more about the token factory visit its repository.\n:::\n\n---\n\n## Generic Factory\n\nThe [Generic Factory](https://github.com/near-examples/factory-rust/) presents a contract factory that:\n\n1. Creates sub-accounts of itself and deploys its contract on them (`create_factory_subaccount_and_deploy`).\n2. Can change the stored contract using the `update_stored_contract` method.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"deploy.rs\"\n            url=\"https://github.com/near-examples/factory-rust/blob/main/src/deploy.rs\"\n            start=\"14\" end=\"66\" />\n    <Github fname=\"manager.rs\"\n            url=\"https://github.com/near-examples/factory-rust/blob/main/src/manager.rs\"\n            start=\"5\" end=\"19\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## Quickstart\n\n1. Make sure you have installed [rust](https://www.rust-lang.org/).\n2. Install the [`NEAR CLI`](https://github.com/near/near-cli#setup)\n\n<hr className=\"subsection\" />\n\n### Build and Deploy the Factory\n\nYou can automatically compile and deploy the contract in the NEAR testnet by running:\n\n```bash\n./deploy.sh\n```\n\nOnce finished, check the `neardev/dev-account` file to find the address in which the contract was deployed:\n\n```bash\ncat ./neardev/dev-account\n# e.g.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1970, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "89977740-9a21-4386-ae80-b15d9e340e45": {"__data__": {"id_": "89977740-9a21-4386-ae80-b15d9e340e45", "embedding": null, "metadata": {"file_path": "./near_dist/factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "db861bc6-431a-4bd7-8064-ed51384bf951", "node_type": "4", "metadata": {}, "hash": "23a0c3db12f8b94130208cbe3040a396d9b6effb31d6b0beb3c443504be27fbd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d73c0f8-e403-447c-82d0-7b687ba7317a", "node_type": "1", "metadata": {}, "hash": "251b9bda073b46ab4a665734dc7133fae64741cea9fd2a59988bf463a2ed37a2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d3273564-5f8f-4aa5-8023-c5b4144460ab", "node_type": "1", "metadata": {}, "hash": "d4984604b1c63d8797b7e9fd1c22fd9ede668701ef846886ace8836561349f03", "class_name": "RelatedNodeInfo"}}, "text": "dev-1659899566943-21539992274727\n```\n\n<hr className=\"subsection\" />\n\n### Deploy the Stored Contract Into a Sub-Account\n\n`create_factory_subaccount_and_deploy` will create a sub-account of the factory and deploy the\nstored contract on it.\n\n```bash\nnear call <factory-account> create_factory_subaccount_and_deploy '{ \"name\": \"sub\", \"beneficiary\": \"<account-to-be-beneficiary>\"}' --deposit 1.24 --accountId <account-id> --gas 300000000000000\n```\n\nThis will create the `sub.<factory-account>`, which will have a `donation` contract deployed on it:\n\n```bash\nnear view sub.<factory-account> get_beneficiary\n# expected response is: <account-to-be-beneficiary>\n```\n\n<hr className=\"subsection\" />\n\n### Update the Stored Contract\n\n`update_stored_contract` enables to change the compiled contract that the factory stores.\n\nThe method is interesting because it has no declared parameters, and yet it takes\nan input: the new contract to store as a stream of bytes.\n\nTo use it, we need to transform the contract we want to store into its `base64`\nrepresentation, and pass the result as input to the method:\n\n```bash\n# Use near-cli to update stored contract\nexport BYTES=`cat ./src/to/new-contract/contract.wasm | base64`\nnear call <factory-account> update_stored_contract \"$BYTES\" --base64 --accountId <factory-account> --gas 30000000000000\n```\n\n> This works because the arguments of a call can be either a `JSON` object or a `String Buffer`\n\n---\n\n## Factories - Concepts & Limitations\n\nFactories are an interesting concept, here we further explain some of their implementation aspects,\nas well as their limitations.\n\n<hr className=\"subsection\" />\n\n### Automatically Creating Accounts\n\nNEAR accounts can only create sub-accounts of itself, therefore, the `factory` can only create and\ndeploy contracts on its own sub-accounts.\n\nThis means that the factory:\n\n1. **Can** create `sub.factory.testnet` and deploy a contract on it.\n2. **Cannot** create sub-accounts of the `predecessor`.\n3. **Can** create new accounts (e.g. `account.testnet`), but **cannot** deploy contracts on them.", "mimetype": "text/plain", "start_char_idx": 1971, "end_char_idx": 4037, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d3273564-5f8f-4aa5-8023-c5b4144460ab": {"__data__": {"id_": "d3273564-5f8f-4aa5-8023-c5b4144460ab", "embedding": null, "metadata": {"file_path": "./near_dist/factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "db861bc6-431a-4bd7-8064-ed51384bf951", "node_type": "4", "metadata": {}, "hash": "23a0c3db12f8b94130208cbe3040a396d9b6effb31d6b0beb3c443504be27fbd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "89977740-9a21-4386-ae80-b15d9e340e45", "node_type": "1", "metadata": {}, "hash": "7b20f1eea2f1a0f9d3f8da077cbf4bdc98f20c8ebbbc970c6f4fa7bea48f9209", "class_name": "RelatedNodeInfo"}}, "text": "It is important to remember that, while `factory.testnet` can create `sub.factory.testnet`, it has\nno control over it after its creation.\n\n<hr className=\"subsection\" />\n\n### The Update Method\n\nThe `update_stored_contracts` has a very short implementation:\n\n```rust\n#[private]\npub fn update_stored_contract(&mut self) {\n  self.code = env::input().expect(\"Error: No input\").to_vec();\n}\n```\n\nOn first sight it looks like the method takes no input parameters, but we can see that its only\nline of code reads from `env::input()`. What is happening here is that `update_stored_contract`\n**bypasses** the step of **deserializing the input**.\n\nYou could implement `update_stored_contract(&mut self, new_code: Vec<u8>)`,\nwhich takes the compiled code to store as a `Vec<u8>`, but that would trigger the contract to:\n\n1. Deserialize the `new_code` variable from the input.\n2. Sanitize it, making sure it is correctly built.\n\nWhen dealing with big streams of input data (as is the compiled `wasm` file to be stored), this process\nof deserializing/checking the input ends up **consuming the whole GAS** for the transaction.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 4039, "end_char_idx": 5328, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f386311d-3951-41b0-a300-74998c138f0b": {"__data__": {"id_": "f386311d-3951-41b0-a300-74998c138f0b", "embedding": null, "metadata": {"file_path": "./near_dist/reentrancy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d64f6eae-c289-4b6c-a775-83b9f3b9973f", "node_type": "4", "metadata": {}, "hash": "cc0d94053b86e78001c1a3a58ca4cf61064bd310c096e439665a347904e1dbdb", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: reentrancy\ntitle: Reentrancy Attacks\n---\n\nBetween a cross-contract call and its callback **any method of your contract can be executed**. Not taking this into account is one of the main sources of exploits. It is so common that it has its own name: **reentrancy attacks**.\n\nAlways make sure to keep your state in a consistent state after a method finishes executing. Assume that:\n\n- Any method could be executed between a method execution and its callback.\n- The same method could be executed again before the callback kicks in.\n\n---\n\n### Example\nImagine that we develop a `deposit_and_stake` with the following **wrong logic**: (1) The user sends us money, (2) we add it to its balance, (3) we try to stake it in a validator, (4) if the staking fails, we remove the balance in the callback. Then, a user could schedule a call to withdraw between (2) and (4), and, if the staking failed, we would send money twice to the user.\n\n![img](https://miro.medium.com/max/1400/1*VweWHQYGLBa70uceiWHLQA.png)\n*Between a cross-contract call and the callback anything could happen*\n\nLuckily for us the solution is rather simple. Instead of immediately adding the money to our user\u2019s balance, we wait until the callback. There we check, and if the staking went well, then we add it to their balance.\n\n![img](https://miro.medium.com/max/1400/1*o0YVDCp_7l-L3njJMGhU4w.png)\n*Correct way to handle deposits in a cross-contract call*", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1422, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9199096d-cbcf-46be-b917-b58795e1e85d": {"__data__": {"id_": "9199096d-cbcf-46be-b917-b58795e1e85d", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "250697d7-e9ec-4568-9800-9a690301876a", "node_type": "1", "metadata": {}, "hash": "1a3110befbb6c02bcd219f7fe387b7395340be14ce9f4e2950e1263a7006bcdf", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: hype-indexer\ntitle: Hype Indexer\nsidebar_label: Hype Indexer\n---\n\n:::tip\n\nThis tutorial creates a blockchain indexer using [NEAR QueryAPI](../../../2.build/6.data-infrastructure/query-api/intro.md).\n\n:::\n\n## Overview\n\nThis indexer creates a new row in a pre-defined `posts` or `comments` table created by the user in the GraphQL database for every new post or comment found on the blockchain that contains either \"PEPE\" or \"DOGE\" in the contents. This is a simple example that shows how to specify two tables, filter blockchain transaction data for a specific type of transaction and its contents, and save the data to the database.\n\n:::tip\n\nThis indexer can be found by [following this link](https://dev.near.org/#/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=bucanero.near/hype-indexer).\n\n:::\n\n## Defining the Database Schema\n\nThe first step to creating an indexer is to define the database schema. This is done by editing the `schema.sql` file in the code editor. The schema for this indexer looks like this:\n\n```sql\nCREATE TABLE\n  \"posts\" (\n    \"id\" TEXT NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    \"content\" TEXT NOT NULL,\n    CONSTRAINT \"posts_pkey\" PRIMARY KEY (\"id\")\n  );\n\nCREATE TABLE\n  \"comments\" (\n    \"id\" SERIAL NOT NULL,\n    \"post_id\" TEXT NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    \"content\" TEXT NOT NULL,\n    CONSTRAINT \"comments_pkey\" PRIMARY KEY (\"id\")\n  );\n```\n\nThis schema defines two tables: `posts` and `comments`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1721, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "250697d7-e9ec-4568-9800-9a690301876a": {"__data__": {"id_": "250697d7-e9ec-4568-9800-9a690301876a", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9199096d-cbcf-46be-b917-b58795e1e85d", "node_type": "1", "metadata": {}, "hash": "71b200ba3bf8343a36199c6989bffff7e80ad60cda284a63937afdcc0e17c4cb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac99f50d-b317-4cea-a65f-5a8e08aafc07", "node_type": "1", "metadata": {}, "hash": "5b34081883bbee0a3d715e80b15790e2da0fbd4a9aa58caaf39eff0de2eff4c0", "class_name": "RelatedNodeInfo"}}, "text": "The `posts` table has columns:\n\n- `id`: a unique identifier for each row in the table\n- `account_id`: the account ID of the user who created the post\n- `block_height`: the height of the block in which the post was created\n- `block_timestamp`: the timestamp of the block in which the post was created\n- `receipt_id`: the receipt ID of the transaction that created the post\n- `content`: the content of the post\n\nThe `comments` table has columns:\n\n- `id`: a unique identifier for each row in the table\n- `post_id`: the ID of the post that the comment was made on\n- `account_id`: the account ID of the user who created the comment\n- `block_height`: the height of the block in which the comment was created\n- `block_timestamp`: the timestamp of the block in which the comment was created\n- `receipt_id`: the receipt ID of the transaction that created the comment\n- `content`: the content of the comment\n\n## Defining the indexing logic\n\nThe next step is to define the indexing logic. This is done by editing the `indexingLogic.js` file in the code editor. The logic for this indexer can be divided into two parts:\n\n1. Filtering blockchain transactions for a specific type of transaction\n2. Saving the data from the filtered transactions to the database\n\n### Filtering Blockchain transactions\n\nThe first part of the logic is to filter blockchain transactions for a specific type of transaction. This is done by using the `getBlock` function. This function takes in a block and a context and returns a promise. The block is a Near Protocol block, and the context is a set of helper methods to retrieve and commit state. The `getBlock` function is called for every block on the blockchain.", "mimetype": "text/plain", "start_char_idx": 1722, "end_char_idx": 3402, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac99f50d-b317-4cea-a65f-5a8e08aafc07": {"__data__": {"id_": "ac99f50d-b317-4cea-a65f-5a8e08aafc07", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "250697d7-e9ec-4568-9800-9a690301876a", "node_type": "1", "metadata": {}, "hash": "1a3110befbb6c02bcd219f7fe387b7395340be14ce9f4e2950e1263a7006bcdf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "425d282c-28ff-4966-99d3-6d2da3576941", "node_type": "1", "metadata": {}, "hash": "78bf37d348baa5b895e2ac0175879a296b6e0c7b8b04cfcfc14b65953feeeb5b", "class_name": "RelatedNodeInfo"}}, "text": "The `getBlock` function for this indexer looks like this:\n\n```js\nimport { Block } from \"@near-lake/primitives\";\n\nasync function getBlock(block: Block, context) {\n  const SOCIAL_DB = \"social.near\";\n\n  function base64decode(encodedValue) {\n    let buff = Buffer.from(encodedValue, \"base64\");\n    return JSON.parse(buff.toString(\"utf-8\"));\n  }\n\n  function get_near_social_posts_comments(\n    block_type = block,\n    DB = SOCIAL_DB,\n    decodeFunction = base64decode\n  ) {\n    const nearSocialPostsComments = block_type\n      .actions()\n      .filter((action) => action.receiverId === DB)\n      .flatMap((action) =>\n        action.operations\n          .map((operation) => operation[\"FunctionCall\"])\n          .filter((operation) => operation?.methodName === \"set\")\n          .map((functionCallOperation) => ({\n            ...functionCallOperation,\n            args: decodeFunction(functionCallOperation.args),\n            receiptId: action.receiptId, // providing receiptId as we need it\n          }))\n          .filter((functionCall) => {\n            const accountId = Object.keys(functionCall.args.data)[0];\n            return (\n              Object.keys(functionCall.args.data[accountId]).includes(\"post\") ||\n              Object.keys(functionCall.args.data[accountId]).includes(\"index\")\n            );\n          })\n      );\n    return nearSocialPostsComments;\n  }\n\n  const nearSocialPostsComments = get_near_social_posts_comments();\n\n  ... // Further filtering for posts/comments that contain \"PEPE\" or \"DOGE\" in the contents and saving the data to the database is done in the next section\n}\n```\n\nAgain, like with the [`posts-indexer`](./posts-indexer.md) or the [`feed-indexer`](./feed-indexer.md), this filter selects transactions that are of type `FunctionCall` to the `set` method on the contract `social.near` on the network. In addition, it searches for `post` or `index` string in the data for the call.\n\n### Saving the data to the Database\n\nThe second part of the logic is to save the data from the filtered transactions to the database. This section also performs the filtering of transactions for posts and comments that contain \"PEPE\" or \"DOGE\" in the contents.\n\nThe logic for this looks like:\n\n```js\n  .", "mimetype": "text/plain", "start_char_idx": 3404, "end_char_idx": 5619, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "425d282c-28ff-4966-99d3-6d2da3576941": {"__data__": {"id_": "425d282c-28ff-4966-99d3-6d2da3576941", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ac99f50d-b317-4cea-a65f-5a8e08aafc07", "node_type": "1", "metadata": {}, "hash": "5b34081883bbee0a3d715e80b15790e2da0fbd4a9aa58caaf39eff0de2eff4c0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "acccfbb4-16be-4705-bd79-580fcbb19192", "node_type": "1", "metadata": {}, "hash": "f80f713af37008fcfb615593d8a7e0e96e02fea86bd9d1d240557198ac34d807", "class_name": "RelatedNodeInfo"}}, "text": "// Logic for filtering blockchain transactions is above\n\n  if (nearSocialPostsComments.length > 0) {\n    const blockHeight = block.blockHeight;\n    const blockTimestamp = Number(block.header().timestampNanosec);\n    await Promise.all(\n      nearSocialPostsComments.map(async (postAction) => {\n        const accountId = Object.keys(postAction.args.data)[0];\n        console.log(`ACCOUNT_ID: ${accountId}`);\n\n        const isPost =\n          postAction.args.data[accountId].post &&\n          Object.keys(postAction.args.data[accountId].post).includes(\"main\");\n        const isComment =\n          postAction.args.data[accountId].post &&\n          Object.keys(postAction.args.data[accountId].post).includes(\"comment\");\n\n        if (isPost) {\n          const isHypePost =\n            postAction.args.data[accountId].post.main.includes(\"PEPE\") ||\n            postAction.args.data[accountId].post.main.includes(\"DOGE\");\n          if (!isHypePost) {\n            return;\n          }\n          console.log(\"Creating a post.\");\n          const postId = `${accountId}:${blockHeight}`;\n          await createPost(\n            postId,\n            accountId,\n            blockHeight,\n            blockTimestamp,\n            postAction.receiptId,\n            postAction.args.data[accountId].post.main\n          );\n        }\n        if (isComment) {\n          const commentString = JSON.parse(\n            postAction.args.data[accountId].post.comment\n          );\n          const isHypeComment =\n            commentString.includes(\"PEPE\") || commentString.includes(\"DOGE\");\n          if (!isHypeComment) {\n            return;\n          }\n          console.log(\"Creating a comment.\");\n          const postBlockHeight =\n            postAction.args.data[accountId].post.blockHeight;\n          const postId = `${accountId}:${postBlockHeight}`;\n          await createComment(\n            accountId,\n            postId,\n            blockHeight,\n            blockTimestamp,\n            postAction.receiptId,\n            commentString\n          );\n        }\n      })\n    );\n  }\n\n  .", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "acccfbb4-16be-4705-bd79-580fcbb19192": {"__data__": {"id_": "acccfbb4-16be-4705-bd79-580fcbb19192", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "425d282c-28ff-4966-99d3-6d2da3576941", "node_type": "1", "metadata": {}, "hash": "78bf37d348baa5b895e2ac0175879a296b6e0c7b8b04cfcfc14b65953feeeb5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "63af897d-9342-4104-a574-d3ba98078a71", "node_type": "1", "metadata": {}, "hash": "ce296a3960065cd8dd5e97508b8780c0c039516a2138d9aef51c13863972f3ff", "class_name": "RelatedNodeInfo"}}, "text": "// Definitions for createPost and createComment are below\n```\n\n#### `createPost`\nCreating a post is done by using the [`context.db.Posts.insert()`](./././2.build/6.data-infrastructure/query-api/context.md#insert) function:\n\n```js\n  async function createPost(\n    postId,\n    accountId,\n    blockHeight,\n    blockTimestamp,\n    receiptId,\n    postContent\n  ) {\n    try {\n      const postObject = {\n          id: postId,\n          account_id: accountId,\n          block_height: blockHeight,\n          block_timestamp: blockTimestamp,\n          receipt_id: receiptId,\n          content: postContent,\n      };\n      await context.db.Posts.insert(postObject);\n      console.log(\"Post created!\");\n    } catch (error) {\n      console.error(error);\n    }\n  }\n```\n\n#### `createComment`\n\nCreating a comment is done by using the [`context.db.Comments.insert()`](../../../2.build/6.data-infrastructure/query-api/context.md#insert) function:\n\n```js\n  async function createComment(\n    accountId,\n    postId,\n    blockHeight,\n    blockTimestamp,\n    receiptId,\n    commentContent\n  ) {\n    try {\n      const commentObject = {\n          account_id: accountId,\n          post_id: postId,\n          block_height: blockHeight,\n          block_timestamp: blockTimestamp,\n          receipt_id: receiptId,\n          content: commentContent,\n      };\n      await context.db.Comments.insert(commentObject);\n      console.log(\"Comment created!\");\n    } catch (error) {\n      console.error(error);\n    }\n  }\n```\n\n## Querying data from the indexer\n\nThe final step is querying the indexer using the public GraphQL API. This can be done by writing a GraphQL query using the GraphiQL tab in the code editor.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "63af897d-9342-4104-a574-d3ba98078a71": {"__data__": {"id_": "63af897d-9342-4104-a574-d3ba98078a71", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "acccfbb4-16be-4705-bd79-580fcbb19192", "node_type": "1", "metadata": {}, "hash": "f80f713af37008fcfb615593d8a7e0e96e02fea86bd9d1d240557198ac34d807", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fb7d6c46-4116-4922-9e2a-9fa5320d7d43", "node_type": "1", "metadata": {}, "hash": "74fb4048e3f1c13297eaf0bec1d2389eba53ab6b753c858f27942c09b5810936", "class_name": "RelatedNodeInfo"}}, "text": "For example, here's a query that fetches `posts` and `comments` from the _Hype Indexer_, ordered by `block_height`:\n\n```graphql\nquery MyQuery {\n  <user-name>_near_hype_indexer_posts(order_by: {block_height: desc}) {\n    account_id\n    block_height\n    content\n  }\n  <user-name>_near_hype_indexer_comments(order_by: {block_height: desc}) {\n    account_id\n    block_height\n    content\n  }\n}\n```\n\nOnce you have defined your query, you can use the GraphiQL Code Exporter to auto-generate a JavaScript or NEAR Widget code snippet. The exporter will create a helper method `fetchGraphQL` which will allow you to fetch data from the indexer's GraphQL API. It takes three parameters:\n\n- `operationsDoc`: A string containing the queries you would like to execute.\n- `operationName`: The specific query you want to run.\n- `variables`: Any variables to pass in that your query supports, such as `offset` and `limit` for pagination.\n\nNext, you can call the `fetchGraphQL` function with the appropriate parameters and process the results.", "mimetype": "text/plain", "start_char_idx": 9369, "end_char_idx": 10394, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fb7d6c46-4116-4922-9e2a-9fa5320d7d43": {"__data__": {"id_": "fb7d6c46-4116-4922-9e2a-9fa5320d7d43", "embedding": null, "metadata": {"file_path": "./near_dist/hype-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8", "node_type": "4", "metadata": {}, "hash": "1bc10036147ed85c84bb251d0bc7435e11e1ab410430dc9bf32e21e1e3359b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "63af897d-9342-4104-a574-d3ba98078a71", "node_type": "1", "metadata": {}, "hash": "ce296a3960065cd8dd5e97508b8780c0c039516a2138d9aef51c13863972f3ff", "class_name": "RelatedNodeInfo"}}, "text": "Here's the complete code snippet for a NEAR component using the _Hype Indexer_:\n\n```js\nconst QUERYAPI_ENDPOINT = `https://near-queryapi.api.pagoda.co/v1/graphql/`;\n\nState.init({\ndata: []\n});\n\nconst query = `query MyHypeQuery {\n    <user-name>_near_hype_indexer_posts(order_by: {block_height: desc}) {\n      account_id\n      block_height\n      content\n    }\n    <user-name>_near_hype_indexer_comments(order_by: {block_height: desc}) {\n      account_id\n      block_height\n      content\n    }\n  }`\n\nfunction fetchGraphQL(operationsDoc, operationName, variables) {\n      return asyncFetch(\n        QUERYAPI_ENDPOINT,\n        {\n          method: \"POST\",\n          headers: { \"x-hasura-role\": `<user-name>_near` },\n          body: JSON.stringify({\n            query: operationsDoc,\n            variables: variables,\n            operationName: operationName,\n          }),\n        }\n      );\n    }\n\nfetchGraphQL(query, \"MyHypeQuery\", {}).then((result) => {\n  if (result.status === 200) {\n    if (result.body.data) {\n      const data = result.body.data.<user-name>_near_hype_indexer_posts;\n      State.update({ data })\n      console.log(data);\n    }\n  }\n});\n\nconst renderData = (a) => {\n  return (\n    <div key={JSON.stringify(a)}>\n        {JSON.stringify(a)}\n    </div>\n  );\n};\n\nconst renderedData = state.data.map(renderData);\nreturn (\n  {renderedData}\n);\n```\n\n\n:::tip\n\nTo view a more complex example, see this widget which fetches posts with proper pagination: [Posts Widget powered By QueryAPI](https://dev.near.org/edit/roshaan.near/widget/query-api-feed-infinite).\n\n:::", "mimetype": "text/plain", "start_char_idx": 10396, "end_char_idx": 11963, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5ca9028-7a3e-4e74-ae2d-d83526a129b2": {"__data__": {"id_": "c5ca9028-7a3e-4e74-ae2d-d83526a129b2", "embedding": null, "metadata": {"file_path": "./near_dist/economics.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c1472672-5c01-4a27-89af-170648f3c5c2", "node_type": "4", "metadata": {}, "hash": "b613bb5cbbb69dc55779b482a2f9d2c2e7c5ff5bf7cd5aa7e882ee8ad7765259", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a93416e9-7634-41a6-822a-bff4ec4c0aad", "node_type": "1", "metadata": {}, "hash": "d3bb1acab5dfc5bc3c88ecd07a9557dba37207485ba3bd7d9fb76f2759718eba", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: economics\ntitle: Web 3.0 Economics\nsidebar_label: Economics\n---\n\nWith technological decentralization also came economical decentralization. It stands on 3 pillars - Non-Fungible tokens (NFTs), Fungible tokens (FTs) and Decentralized Finance (DeFi).\n\n## Non-Fungible Tokens\nAt the heart of the new Web 3 economy lies [Non-Fungible token](https://en.wikipedia.org/wiki/Non-fungible_token) (NFT). In a nutshell, it\u2019s a way to  represent digital ownership in a decentralized way. From a technical perspective, it\u2019s just a piece of data on a blockchain. The simplest case of such data is just a `(token_id, account_id)` tuple, where `token_id` uniquely identifies an asset, and `account_id` identifies an owner. A smart contract that owns this data defines a set of allowed operations - like creation of a new token (minting) or transfer of a token to another account. An exact set of allowed operations is defined in an NFT standard. Different blockchains have different standards, NEAR NFT Standard is available [here](https://nomicon.io/Standards/NonFungibleToken/). \n\nBecause NFTs are tied to a specific contract, they mostly make sense only in scope of this contract, and subsequently they are tied to a specific dApp. It\u2019s possible to implement transfer of NFTs between contracts, but there\u2019s no standard way to do this.\n\nWhat digital asset is hiding behind a `token_id` is up to the smart contract to decide. There are few common ways how to handle this:\n\n-  Store an asset itself in a smart contract alongside the ownership information. This is the most straightforward way, but often is not feasible since storage cost is quite high and many types of digital assets, especially media, are quite big.\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/web3-20.png\" alt=\"image\" width=\"400\" />\n</div>\n\n- Store token data off-chain. Such an approach solves storage cost problems, but requires some level of trust to guarantee that data in the off-chain storage won\u2019t be changed or removed. \n\n![image](/docs/assets/web3/web3-21.png)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2038, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a93416e9-7634-41a6-822a-bff4ec4c0aad": {"__data__": {"id_": "a93416e9-7634-41a6-822a-bff4ec4c0aad", "embedding": null, "metadata": {"file_path": "./near_dist/economics.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c1472672-5c01-4a27-89af-170648f3c5c2", "node_type": "4", "metadata": {}, "hash": "b613bb5cbbb69dc55779b482a2f9d2c2e7c5ff5bf7cd5aa7e882ee8ad7765259", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5ca9028-7a3e-4e74-ae2d-d83526a129b2", "node_type": "1", "metadata": {}, "hash": "61460eb54a112530574835e39830fdc12ce6d164bf604513342f9d6245f86583", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "39b91072-dadd-465e-86d5-a4bc900500fc", "node_type": "1", "metadata": {}, "hash": "54ea88c85c3a63896a60b07efe2d041e6ea6c356a9ceccc1e04ded535c1b7c9d", "class_name": "RelatedNodeInfo"}}, "text": "- Store asset\u2019s metadata and hash on chain, and an asset itself on some off-chain storage. Storing an asset\u2019s hash on a chain guarantees data integrity and immutability. On-chain metadata usually includes basic token information, like title, description and media url. It\u2019s required to quickly identify an asset without downloading it from the storage. This is the most popular approach to handle NFT\u2019s since it combines the best of 2 previous approaches - token is immutable and storage cost is cheap (exact cost depends on the storage solution, but it usually several orders of magnitude cheaper than an on-chain storage)\n\n![image](/docs/assets/web3/web3-22.png)\n\n\nChoosing the right off-chain storage also can be a challenge, in general they can be divided into 2 buckets:\n- Centralized storages - traditional Web 2 storage solutions, like relational databases or blob storages. While suitable for some applications, this means NFTs can be destroyed if a central server goes offline, so they aren\u2019t the most popular in the Web 3 world.\n- Decentralized storages. As we already mentioned, BitTorrent protocol is one of the first examples of such decentralized storage solutions, but in recent years more advanced solutions have appeared - like [IPFS](https://ipfs.io/), [FileCoin](https://filecoin.io/) and [Arweawe](https://www.arweave.org/). Such solutions are a preferred method to store digital assets, since they are cheap and decentralized, so no-one can destroy or alter NFT assets.\n\nIn addition to the NFT standard, NEAR also provides [its implementation](https://docs.rs/near-contract-standards/latest/near_contract_standards/non_fungible_token/index.html), which can be used by Smart Contract developers to implement NFTs in their smart contract. Implementation itself doesn\u2019t dictate assets storage model, so it\u2019s up to a developer to decide how and where it will be stored.\n\n## Fungible Tokens\nNFTs changed digital assets ownership model, but by itself they are not enough to build a full digital economy. In the simplest model, NFTs can be sold and bought using main blockchain currency (e.g. NEAR tokens), but this is quite limiting since circulation and price of such tokens is dictated by the blockchain itself.", "mimetype": "text/plain", "start_char_idx": 2041, "end_char_idx": 4269, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "39b91072-dadd-465e-86d5-a4bc900500fc": {"__data__": {"id_": "39b91072-dadd-465e-86d5-a4bc900500fc", "embedding": null, "metadata": {"file_path": "./near_dist/economics.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c1472672-5c01-4a27-89af-170648f3c5c2", "node_type": "4", "metadata": {}, "hash": "b613bb5cbbb69dc55779b482a2f9d2c2e7c5ff5bf7cd5aa7e882ee8ad7765259", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a93416e9-7634-41a6-822a-bff4ec4c0aad", "node_type": "1", "metadata": {}, "hash": "d3bb1acab5dfc5bc3c88ecd07a9557dba37207485ba3bd7d9fb76f2759718eba", "class_name": "RelatedNodeInfo"}}, "text": "What if, instead of relying on blockchain currency, applications could create their own? For exactly this reason, Fungible Tokens (FT) have been created.\n\nSimilarly to NFTs, fungible tokens are also just a piece of data stored in a smart contract, but instead of storing unique token ids, an amount of tokens held by an account is stored.\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/web3-23.png\" alt=\"image\" width=\"400\" />\n</div>\n\nSmart Contracts can define allowed operations - like transfer or payment using this token. [NEAR defines a standard](https://nomicon.io/Standards/FungibleToken/Core) for fungible tokens and provides a [default implementation](https://docs.rs/near-contract-standards/latest/near_contract_standards/fungible_token/index.html).\n\nSince an application is fully in control over emission and circulation of such tokens, a full fledged application economy can be created. For example, users can earn FTs for performing actions, and spend them to buy or mint new NFTs. \nAnother exciting option is creation of [Decentralized Autonomous Organizations](https://near.org/use-cases/dao/) (DAOs), in which FTs can be used as a membership (or governance) tool. In such scenarios, tokens are awarded to members and can be used to vote on decisions or participate in community events. \n\nBut we can push our tokens even further, by tying them to other cryptocurrencies and giving them a real-life monetary value. That\u2019s where [Decentralized Finance](https://www.investopedia.com/decentralized-finance-defi-5113835) (DeFi), and especially [Decentralized Exchanges](https://en.wikipedia.org/wiki/Decentralized_exchange) (DEX) come into play. We won\u2019t go into details here, but at the core a [liquidity pool](https://academy.binance.com/en/articles/what-are-liquidity-pools-in-defi) for a Fungible Token can be created on DEX, which allows trades of this token for other tokens or [stablecoins](https://en.wikipedia.org/wiki/Stablecoin). This opens the door for a new gaming model - [Play-to-Earn](https://en.wikipedia.org/wiki/Blockchain_game), where players can earn real-life money just by playing a game.", "mimetype": "text/plain", "start_char_idx": 4270, "end_char_idx": 6393, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d68b2794-7e74-4a77-8fa9-3ea9ee0bdb20": {"__data__": {"id_": "d68b2794-7e74-4a77-8fa9-3ea9ee0bdb20", "embedding": null, "metadata": {"file_path": "./near_dist/sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446", "node_type": "4", "metadata": {}, "hash": "397481f15bca8e94a7586195e9a4972e8b08605b28f669769f498d1e74f03c69", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f43b9185-74ca-4929-b69e-1d6519f98bbf", "node_type": "1", "metadata": {}, "hash": "da84aab0dfb3dadd7e970bf0aba20f52e3ec2fe3d3c44c8c9fe3adeacf7ebca0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: sdk\ntitle: \"NEAR SDK\"\nhide_table_of_contents: false\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github} from \"@site/src/components/codetabs\"\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\";\n\nThe NEAR SDK is a library that allow to develop smart contracts. Currently, there exist two versions of NEAR SDK: one for Rust and one for JavaScript.\n\n:::tip Want to build a smart contract?\n\nThe best place to start learning is our [QuickStart Guide](../2.build/2.smart-contracts/quickstart.md)\n\n:::\n\n<FeatureList>\n  <Column title=\"\" size=\"6\">\n    <Feature url=\"https://docs.rs/near-sdk/latest/near_sdk/\" title=\"Rust SDK\" subtitle=\"Rust SDK Reference docs\" image=\"smartcontract-rust.png\" />\n  </Column>\n  <Column title=\"\" size=\"6\">\n    <Feature url=\"https://near.github.io/near-sdk-js/\" title=\"JavaScript SDK\" subtitle=\"Javascript SDK Reference docs\" image=\"smartcontract-js.png\" />\n  </Column>\n</FeatureList>\n\n---\n\n## Smart Contracts on NEAR", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1010, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f43b9185-74ca-4929-b69e-1d6519f98bbf": {"__data__": {"id_": "f43b9185-74ca-4929-b69e-1d6519f98bbf", "embedding": null, "metadata": {"file_path": "./near_dist/sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446", "node_type": "4", "metadata": {}, "hash": "397481f15bca8e94a7586195e9a4972e8b08605b28f669769f498d1e74f03c69", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d68b2794-7e74-4a77-8fa9-3ea9ee0bdb20", "node_type": "1", "metadata": {}, "hash": "a7d908c451058b2ed61266e7c7a486273bfc0905be5a6c219e59c75a3385e5f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d0a29dde-dc6d-4485-bd45-28b09dfb45c9", "node_type": "1", "metadata": {}, "hash": "0d32c2641838100564045db52045c6c6e3d13b045c8638ca771e53f69b984ab4", "class_name": "RelatedNodeInfo"}}, "text": "This is how a smart contract written in Rust and JavaScript using the NEAR SDK looks like:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    ```js\n    @NearBindgen({})\n    class HelloNear {\n      greeting: string = 'Hello';\n\n      @view({}) // This method is read-only and can be called for free\n      get_greeting(): string {\n        return this.greeting;\n      }\n\n      @call({}) // This method changes the state, for which it cost gas\n      set_greeting({ greeting }: { greeting: string }): void {\n        near.log(`Saving greeting ${greeting}`);\n        this.greeting = greeting;\n      }\n    }\n    \n    ```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n    ```rust\n    #[near(contract_state)]\n    pub struct Contract {\n        greeting: String,\n    }\n\n    impl Default for Contract {\n        fn default() -> Self {\n            Self { greeting: \"Hello\".to_string(), }\n        }\n    }\n\n    #[near]\n    impl Contract {\n        pub fn get_greeting(&self) -> String {\n            self.greeting.clone()\n        }\n\n        pub fn set_greeting(&mut self, greeting: String) {\n            self.greeting = greeting;\n        }\n    }\n    ```\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\n\nWant to build a smart contract? Check our [QuickStart Guide](../2.build/2.smart-contracts/quickstart.md)\n\n:::\n\n---\n\n## \ud83c\udf89 Ready to start developing?\n\nStart from our [Smart Contract QuickStart Guide](../2.build/2.smart-contracts/quickstart.md), and let it guide you through all our documentation on building smart contracts\n\n---\n\n## Want to See Examples?", "mimetype": "text/plain", "start_char_idx": 1013, "end_char_idx": 2567, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d0a29dde-dc6d-4485-bd45-28b09dfb45c9": {"__data__": {"id_": "d0a29dde-dc6d-4485-bd45-28b09dfb45c9", "embedding": null, "metadata": {"file_path": "./near_dist/sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446", "node_type": "4", "metadata": {}, "hash": "397481f15bca8e94a7586195e9a4972e8b08605b28f669769f498d1e74f03c69", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f43b9185-74ca-4929-b69e-1d6519f98bbf", "node_type": "1", "metadata": {}, "hash": "da84aab0dfb3dadd7e970bf0aba20f52e3ec2fe3d3c44c8c9fe3adeacf7ebca0", "class_name": "RelatedNodeInfo"}}, "text": "We have a section dedicated to [tutorials and examples](../3.tutorials/examples/guest-book.md) that will help you understand diverse use cases and how to implement them\n\n:::tip\n\nIf you are new to smart contracts, we recommend you start with our [Smart Contract QuickStart Guide](../2.build/2.smart-contracts/quickstart.md) before moving to the examples\n\n:::\n\n---\n\n## Searching for the Reference Docs\n\nIf you need to find a specific function signature, or understand the SDK struct/classes, please visit the SDK specific pages:\n\n- [Rust SDK](https://docs.rs/near-sdk/latest/near_sdk/)\n- [JavaScript SDK](https://near.github.io/near-sdk-js/)\n\n:::tip\n\nIf you are new to smart contracts, we recommend you start with our [Smart Contract QuickStart Guide](../2.build/2.smart-contracts/quickstart.md) before moving to the reference documentation\n\n:::", "mimetype": "text/plain", "start_char_idx": 2569, "end_char_idx": 3412, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1ae7e92-afad-4b51-b241-c8c01f0a065f": {"__data__": {"id_": "b1ae7e92-afad-4b51-b241-c8c01f0a065f", "embedding": null, "metadata": {"file_path": "./near_dist/2024-06-05.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80", "node_type": "4", "metadata": {}, "hash": "0d3b0efc9714613a0b377b71b0097e9e97c21f9929835570c36d6aa5b4f9e1d1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7803a822-e47a-4f52-8048-7665d3ba1a8a", "node_type": "1", "metadata": {}, "hash": "14c4688f04d2b4b81da9bfa9ea67b38418aec2a723f50bcbdaee7ce085ffb66c", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: Getting Started on NEAR Using Windows\nauthors: [flmel]\nslug: getting-started-on-windows\ntags: [windows, tutorial, getting-started]\nhide_table_of_contents: true\n---\nIn this article, we will cover how to install WSL and setup a NEAR development environment on Windows.\n\n<!-- truncate -->\n\n### WSL\n\nWSL, or Windows Subsystem for Linux, is a compatibility layer for running Linux binary executables natively on Windows. It allows us to run a GNU/Linux environment directly on Windows without the overhead of a traditional virtual machine or dual-boot setup.\n\n#### Enable WSL from `Windows Features`\nFirst of all, make sure that WSL is enabled, for this go to:\n`Control Panel > Programs > Turn Windows Features on or off`\nScrolling down will reveal the option `Windows Subsystem for Linux`. Make sure it is enabled and press OK to confirm (you will be asked to reboot your computer).\n\n![Windows Features WSL Enabled](/docs/blog/windows-features-wsl-enabled.jpg)\n\n#### Start WSL and Install Ubuntu\n\nNow we will spend some time in either `PowerShell` or [Windows Terminal](https://apps.microsoft.com/detail/9n0dx20hk701), which is a modern terminal application that supports various command-line tools and shells.\n\n```bash\n# may be desirable for seamless integration between WSL2 distros of linux and docker with WSL backend \nwsl --set-default-version 2\n```\n\n```\nwsl --install --d Ubuntu\n```\n\n**Read more on WSL:**\nhttps://learn.microsoft.com/en-us/windows/wsl/install\nhttps://learn.microsoft.com/en-us/windows/wsl/setup/environment\nhttps://learn.microsoft.com/en-us/windows/wsl/\n\n### Install Required Packages\nOnce the installation is completed you will have Ubuntu installed as any other application on Windows. Open it from the start menu and you will be dropped into the [Ubuntu bash shell](https://ubuntu.com/tutorials/command-line-for-beginners#1-overview)\n\nEnter the following commands to install all the packages that Rust and Node might need later:\n\n```bash\napt-get update\napt-get install gcc make libudev-dev openssl pkg-config unzip -y\n```\n\n:::tip Permission Denied?\nDepending on your setup, you might need to run the commands with `sudo`. This temporarily grants your user elevated privileges to perform tasks that require higher permissions.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2258, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7803a822-e47a-4f52-8048-7665d3ba1a8a": {"__data__": {"id_": "7803a822-e47a-4f52-8048-7665d3ba1a8a", "embedding": null, "metadata": {"file_path": "./near_dist/2024-06-05.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80", "node_type": "4", "metadata": {}, "hash": "0d3b0efc9714613a0b377b71b0097e9e97c21f9929835570c36d6aa5b4f9e1d1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1ae7e92-afad-4b51-b241-c8c01f0a065f", "node_type": "1", "metadata": {}, "hash": "6cb2bcb1b56cfe5343bec8457b4647207d8e5c6dcadbb9e988b8743935cca8b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0f4a85a3-d5ba-45a7-bd2c-65694b9e5a7d", "node_type": "1", "metadata": {}, "hash": "09776f96532cedb5d8725ad11360d6f9e723e233f511cbb69ad7b8267adae7e1", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n### Setup Developer Environment\n\nNow that we have WSL enabled and running Ubuntu, it is time to setup our developer environment. At NEAR we currently support using JS/TS and Rust to develop smart contracts, and JS/TS to develop web applications.\n\nBellow we will explain how to install both `Node.js` and `Rust`. If you want, you can install only one of them (e.g. if you are only planning to create a Rust contract, you don't need Node.js). However, we do recommend to install both so your environment is ready if you want to try something different later.\n\n#### Node (JS/TS)\n\nNode.js is a JavaScript runtime environment that executes code outside a web browser, enabling the development of server-side applications. In NEAR development, it can be used to write smart contracts in [TypeScript](https://www.typescriptlang.org/), as well as to create Web applications that interact with NEAR.\n\n```\n# installs nvm (Node Version Manager)\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n# download and install Node.js\nnvm install 20\n# verifies the right Node.js version is in the environment\nnode -v # should print `v20.14.0`\n# verifies the right NPM version is in the environment\nnpm -v # should print `10.7.0`\n```\n\n**Read more:**\n[NodeJS Website](https://nodejs.org/)\n\n#### Rust\n\n[Rust](https://www.rust-lang.org/) is a programming language known for its safety and performance. It's used in NEAR development to write secure and efficient smart contracts.\n\nNext, we need to add the `wasm32-unknown-unknown` toolchain. This toolchain is required because the contracts we build will be compiled to [WASM](https://webassembly.org/) to run on the NEAR blockchain.\n\n```bash\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n# When prompted, press enter for default install options\n.", "mimetype": "text/plain", "start_char_idx": 2259, "end_char_idx": 4083, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0f4a85a3-d5ba-45a7-bd2c-65694b9e5a7d": {"__data__": {"id_": "0f4a85a3-d5ba-45a7-bd2c-65694b9e5a7d", "embedding": null, "metadata": {"file_path": "./near_dist/2024-06-05.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80", "node_type": "4", "metadata": {}, "hash": "0d3b0efc9714613a0b377b71b0097e9e97c21f9929835570c36d6aa5b4f9e1d1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7803a822-e47a-4f52-8048-7665d3ba1a8a", "node_type": "1", "metadata": {}, "hash": "14c4688f04d2b4b81da9bfa9ea67b38418aec2a723f50bcbdaee7ce085ffb66c", "class_name": "RelatedNodeInfo"}}, "text": "source $HOME/.cargo/env\nrustup target add wasm32-unknown-unknown\n```\n\n**Read more:**\n[Getting Started with Rust](https://www.rust-lang.org/learn/get-started)\n\n### That's It\n\nAt this point, we are ready to install the relevant tooling and start building on NEAR. Head over to the [Quickstart](http://docs.near.org/build/smart-contracts/quickstart) section of the docs for more information or jump right into the [examples](https://github.com/near-examples).", "mimetype": "text/plain", "start_char_idx": 4084, "end_char_idx": 4540, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "75e275db-7bb9-4a89-89a6-e7f32f1947a1": {"__data__": {"id_": "75e275db-7bb9-4a89-89a6-e7f32f1947a1", "embedding": null, "metadata": {"file_path": "./near_dist/CONTRIBUTING.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3a12aec9-7bf4-439e-a185-db44c06694aa", "node_type": "4", "metadata": {}, "hash": "420cba40073c62f12aeb144ea4c8e9adb2441583a9cd0fe63163aa5993e1c88e", "class_name": "RelatedNodeInfo"}}, "text": "# Contributing to NEAR\n\nNEAR welcomes help in many forms, including development, code review, documentation improvements, and outreach.\nPlease visit [the contribution overview](https://wiki.near.org/contribute/near-contributing) for more information.\n\n## Using GitHub issues and pull requests\n\nSome repositories (including this one) have specific issue templates that will be helpful for maintainers and community contributors. Please use the templates whenever available.\n\nPlease include steps to reproduce if you are reporting an error. Information on all applicable versions is quite helpful. Some versions can be found using the command line. (For example: `node --version` or `rustc --version`.) Other version information may be packaged as dependencies. (For example: in `package.json` or `Cargo.toml`.)\n\nIf verbosity flags are available, please include those to offer as much information as possible.\n\nWhen opening a pull request, please use the typical open-source flow of forking the desired repository and opening a pull request from your forked repository. (More information on [technical contributions here](https://wiki.near.org/development/how-to-contribute).)\n\n## Testing\n\nPlease note that for technical contributions, NEAR runs a battery of continuous integration tools and tests for each pull request.\n\nIt's encouraged to write unit tests on new features. Many NEAR repositories have built-in scripts that run tests locally. Tests may check linting and must be addressed.\n\nFor example, a repository might have `yarn test` available. It's a good idea to run tests locally before submitting a pull request, as these will be caught during the CI process.\n\n### Thank you\n\nNEAR values all contributors to the projects in the ecosystem and invites public discussion on the tech and vision. Please feel free to join the conversation using the links offered at [near.help](https://near.help).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1901, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6b65a88a-ba31-46fd-a6a8-a4e5cd767f5a": {"__data__": {"id_": "6b65a88a-ba31-46fd-a6a8-a4e5cd767f5a", "embedding": null, "metadata": {"file_path": "./near_dist/naj-utils.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eac256b1-0666-475a-9e54-846e169aca4e", "node_type": "4", "metadata": {}, "hash": "9e7cb96d0848cc38b6db14dcac9d53c26a5fbf4646ba68a65e90d9a490a068f0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: utils\ntitle: Utilities\nsidebar_label: Utilities\n---\n\n### NEAR => yoctoNEAR {#near--yoctonear}\n\n```js\n// converts NEAR amount into yoctoNEAR (10^-24)\n\nconst { utils } = nearAPI;\nconst amountInYocto = utils.format.parseNearAmount(\"1\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-function\"></span> Function `parseNearAmount`](https://near.github.io/near-api-js/functions/_near_js_utils.format.parseNearAmount.html)\n\n### YoctoNEAR => NEAR {#yoctonear--near}\n\n```js\n// converts yoctoNEAR (10^-24) amount into NEAR\n\nconst { utils } = nearAPI;\nconst amountInNEAR = utils.format.formatNearAmount(\"1000000000000000000000000\");\n```\n\n[<span className=\"typedoc-icon typedoc-icon-function\"></span> Function `formatNearAmount`](https://near.github.io/near-api-js/functions/_near_js_utils.format.formatNearAmount.html)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 817, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "15e6fb12-d0b6-4272-98a2-fa30a1e89bbf": {"__data__": {"id_": "15e6fb12-d0b6-4272-98a2-fa30a1e89bbf", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "885dcf33-a62f-46f3-b89d-f5b45fc2da58", "node_type": "1", "metadata": {}, "hash": "6c724b0c61c10d516e8d2d3426430cbceb33b2064a4ddc7b0f0c8c9998a5db9e", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: nfts\ntitle: NFTs for Web 2 Applications\nsidebar_label: NFTs for Web 2.0 Apps\n---\n\n# NFTs for Web 2 Applications\n\nAt the first stage of our Web 3 transformation, let\u2019s decentralize ownership of our digital assets using blockchain technology. By doing this, we can create a user-owned economy, where digital assets are exchanged and traded without any participation or control from the developers. Later, we\u2019ll discuss how to bring it to the next level by adding Fungible Tokens into the mix.\n\nAs we discussed previously, in the Web 3 world, NFTs are used to represent ownership of an asset. This can be anything a user owns, e.g. in case of a game this can be a character, upgrade, crafting material, skin, etc. However, since NFTs are living on the blockchain, and the rest of the application resides on traditional servers, we need to find a way to connect these different worlds together.\n\n## Blockchain-Enabled Application Architecture\n\nFirst of all, let\u2019s outline a typical architecture of a Web 2 application. In most cases, a classic client-server model is used:\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-1.png\" alt=\"image\" width=\"150\" />\n</div>\n\nIn such architecture, we usually have 3 layers:\n- Database - stores application\u2019s data. This can be a single database, or several databases of different types, but this is mostly an implementation detail - for our purposes we can view it as a single logical database.\n- Server - a centralized web-server. It may be implemented using different architecture patterns (monolithic, microservices, serverless) and technologies, but again, we can consider it as a single logical server.\n- Client - client side application user directly interacts with. Different client types are possible: web, mobile or desktop. There is a difference between these clients in regards to blockchain integration, which we\u2019ll discuss later.\n\nNow, let\u2019s compare it to a dApp architecture:\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-2.png\" alt=\"image\" width=\"400\" />\n</div>\n\nWe can notice that there is a common component in these architectures - the client application. This means we can use it as a junction point to connect them together.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2200, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "885dcf33-a62f-46f3-b89d-f5b45fc2da58": {"__data__": {"id_": "885dcf33-a62f-46f3-b89d-f5b45fc2da58", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15e6fb12-d0b6-4272-98a2-fa30a1e89bbf", "node_type": "1", "metadata": {}, "hash": "4b1e011950ef273b8aad3dda32f109269d3deca1a7e8607df5e2296726136da3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2acecfe1-9531-4b15-8dc1-d58354a97307", "node_type": "1", "metadata": {}, "hash": "7487667611238d807564f46658070dc68f8db6237ee30f44dd6fad6c910f207b", "class_name": "RelatedNodeInfo"}}, "text": "<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-3.png\" alt=\"image\" width=\"400\" />\n</div>\n\nA keen reader may notice an additional connection between the Server and RPC Node. This is required because in a client-server architecture clients cannot be trusted. That\u2019s why every action performed from the client should be validated by a backend server. But in our case everything is complicated by the fact that we essentially have two backends: Web 2 server and a smart contract, so two possible validation flows are possible:\n- Client performs an action on a server, which involves blockchain data. In this case the server should talk to the blockchain and verify that valid data is provided.\n- Client performs an action on a smart contract, which involves server-owned data. Since the smart contract can\u2019t talk to the server directly to verify it, we should use a different way to verify the authenticity of the data. In blockchain terminology, such a server is called an [Oracle](https://en.wikipedia.org/wiki/Blockchain_oracle).\nWe\u2019ll explore how to implement both of these approaches later.\n\nBy now, we've reached the point where the type of our client begins to matter. Specifically, problems arise from the dApps payment model - user\u2019s pay for the blockchain infrastructure using gas, so money goes directly to infrastructure providers. Also, users make payments directly on the blockchain, without using any intermediaries, like banks or payment services. This approach is at odds with mobile app stores (Google Play Store and Apple App Store) - they don\u2019t allow any payments on their respective mobile platforms without their cut. Although some shifts in policy are starting to happen (e.g. [Apple vs Epic Games duel](https://en.wikipedia.org/wiki/Epic_Games_v._Apple)), at the time of this writing getting blockchain-enabled applications into the stores will probably get vetoed by reviewers. There are some ways to bypass these limitations, e.g. by not using Play Store on Android, but all of these ways are either sub-par in terms of usability or involve some risk of getting banned by stores. That\u2019s why for mobile applications an alternative approach is needed. \n\nSometimes, to move forward we need to take a step back.", "mimetype": "text/plain", "start_char_idx": 2202, "end_char_idx": 4437, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2acecfe1-9531-4b15-8dc1-d58354a97307": {"__data__": {"id_": "2acecfe1-9531-4b15-8dc1-d58354a97307", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "885dcf33-a62f-46f3-b89d-f5b45fc2da58", "node_type": "1", "metadata": {}, "hash": "6c724b0c61c10d516e8d2d3426430cbceb33b2064a4ddc7b0f0c8c9998a5db9e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d", "node_type": "1", "metadata": {}, "hash": "090fde7d20811a74d92df75bc05f3d5f1d6a805ccfb413c5000c4ac04f12bfa9", "class_name": "RelatedNodeInfo"}}, "text": "In our case, to solve a problem with mobile clients we can return to our initial concept of having two clients - one for blockchain integration, and another one for Web 2 server. Blockchain client can be a usual web application, which isn\u2019t subject to any constraints from stores. It can also serve as a connection point between blockchain and our existing application.\n\n![image](/docs/assets/web3/nfts-4.png)\n\n\nIn this architecture the mobile client is still allowed to talk to the blockchain, but only in a read-only way, which doesn\u2019t require wallet connection or any payments. All actions on the blockchain happen on the Web Client instead.\nFurther in this guide we\u2019ll use such dual-client architecture, since simpler architecture with a single client can be directly derived from it by merging two clients together.\n\nAt this point, our architecture covers almost everything we need to start building our application. However, since we want to build a user-owned economy, we need a marketplace where it\u2019ll happen. An obvious choice is to put this marketplace into the web client, but there\u2019s one gotcha. If we recall the smart contract\u2019s storage model, it\u2019s not suitable to serve complex data queries, so an indexer should be used to aggregate data from blockchain into a proper database.\n\n\n![image](/docs/assets/web3/nfts-5.png)\n\n\n\nBy now, every building-block is in place and we can start exploring how to implement this architecture in practice.\n\n\n## NFTs in Web 2 Applications\n\nIn order to implement a fully functional application using a hybrid Web 2 - Web 3 architecture, a lot of technological challenges have to be addressed, like authentication and authorization, seamless NFTs usage in client and server, and proper NFT storage model. In the following sections we\u2019ll take a closer look at this and describe common patterns and approaches.\n\n\n### Authentication and Authorization \n\nSince our digital assets are represented as NFTs on blockchain, in order to use them in our Web 2 application, a server needs a way to authorize their usage. The basic idea is pretty simple - it can just read data from blockchain by calling a smart contract method and check an owner\u2019s account id. For such flow, we have 3 actors:", "mimetype": "text/plain", "start_char_idx": 4438, "end_char_idx": 6662, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d": {"__data__": {"id_": "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2acecfe1-9531-4b15-8dc1-d58354a97307", "node_type": "1", "metadata": {}, "hash": "7487667611238d807564f46658070dc68f8db6237ee30f44dd6fad6c910f207b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9", "node_type": "1", "metadata": {}, "hash": "31a58ba699cc23d597f49c1cb8b632cae1a6c5916c86fc1ef953473eb72fa8da", "class_name": "RelatedNodeInfo"}}, "text": "* Client that wants to use some digital asset (NFT). \n* Smart Contract for NFTs. Should be implemented according to [NEAR NFT standards](https://nomicon.io/Standards/NonFungibleToken/).\n* Server that verifies ownership of NFT and uses it in its internal logic. \n\nA general flow looks like this:\n\n\n\n![image](/docs/assets/web3/nfts-6.png)\n\n\n\n\n\nHowever, such an authorization process cannot be performed without authentication, so the server also needs a way to authenticate a user.\n\nRecall that the user's identity on a blockchain is represented by a key pair. However, since in NEAR a user may have multiple key pairs and an account is a separate entity, the authentication procedure is a bit more complicated. \n\nTo authenticate our requests, we can use public-key cryptography - a client can sign a request using a user\u2019s private key, and then a server can verify the signature and key ownership. A typical request with authentication may look like this:\n\n\n```javascript\n{\n\t\"payload\": { /* request-specific payload */ },\n\t\"accountId\": \"account.near\",\n\t\"publicKey\": \"...\",\n\t\"timestamp\": 1647091283342,\n\t\"signature\": \"...\"\n}\n```\n\n\nwhere:\n\n\n\n* `accountId` \u2013 user\u2019s account id on NEAR.\n* `publicKey` - public key of the key pair used for signature, must be either Functional or Full access key for the provided account.\n* `timestamp` - current datetime, must be verified on server. It\u2019s needed to prevent [replay attacks](https://en.wikipedia.org/wiki/Replay_attack). Alternative to timestamps is usage of [nonce](https://en.wikipedia.org/wiki/Cryptographic_nonce), but it\u2019s more complicated.\n* `signature` - signature of the request payload and other fields. Usually, a payload is hashed beforehand.\n\nDepending on the implementation, request body, headers, or other side channels can be used to transfer authentication data - exact implementation depends on used technologies and protocols.\n\nServer can use this data to authenticate a request using the following approach:\n\n\n![image](/docs/assets/web3/nfts-7.png)\n\n\n\n\n3 authentication steps are performed on the server:", "mimetype": "text/plain", "start_char_idx": 6666, "end_char_idx": 8732, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9": {"__data__": {"id_": "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d", "node_type": "1", "metadata": {}, "hash": "090fde7d20811a74d92df75bc05f3d5f1d6a805ccfb413c5000c4ac04f12bfa9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51", "node_type": "1", "metadata": {}, "hash": "4924ef2343266a0d9be409d9ddf5a7e791ac8c1a40359a32e48c02a63ad9ccd5", "class_name": "RelatedNodeInfo"}}, "text": "1. Signature verification - if the signature is correct, we are sure that the client really has the private key for the provided public key. Also, this proves that request data hasn't been modified in transit.\n2. Timestamp verification - prevents replay attacks. Server can verify that the request\u2019s timestamp is not too old (e.g. has been created no more than 10 seconds ago).\n3. Public key ownership verification - by calling [view_access_key method](../../5.api/rpc/access-keys.md), we can make sure that the provided public key is really associated with the provided account.\n\nSuch authentication approach is the simplest one, but has a few major drawbacks:\n\n\n\n* Performing a REST API call to RPC Node is quite expensive to do each time from the performance perspective.\n* We can\u2019t sign requests from the mobile client, since it usually should be disconnected from the blockchain due to store policies, and hence doesn\u2019t have a key pair.\n* A NEAR account is required in order to start using the application, which complicates the onboarding process.\n\nTo solve the first problem, we can simply issue a JWT token or authenticate connection in some other way after a successful NEAR account authentication, so the it will serve as \u201clogin\u201d of sorts:\n\n\n\n![image](/docs/assets/web3/nfts-8.png)\n\n\n\n\nWhile this may be enough for some applications, it doesn\u2019t address the last 2 problems. In order to solve all of them, we can use a hybrid authentication approach with 2 accounts:", "mimetype": "text/plain", "start_char_idx": 8736, "end_char_idx": 10211, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51": {"__data__": {"id_": "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9", "node_type": "1", "metadata": {}, "hash": "31a58ba699cc23d597f49c1cb8b632cae1a6c5916c86fc1ef953473eb72fa8da", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "49d89676-6ab1-4925-bbdf-9810dd300d16", "node_type": "1", "metadata": {}, "hash": "c0deb530e283ffd598a464c0f2dec0763865bcdbed6d0b574a44c2f57f856f77", "class_name": "RelatedNodeInfo"}}, "text": "1. \u201cClassic\u201d Web 2 account - all clients can use this account to call a server. For example, this can be a simple username/password or OAuth 2 login with a JWT token.\n2. NEAR account - can be used from non-mobile clients only. Instead of performing NEAR account auth each time we need to use it, we can do it a single time in order to \u201cconnect\u201d this account to our primary Web 2 account and store Classic-NEAR account connection in our server database. In this way we solve all problems - server doesn\u2019t need to authenticate NEAR account each time it wants to perform an authorization, instead it can read an associated NEAR account from its own database.\n\nWith such hybrid approach, different authentication methods are used for blockchain and server:\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-9.png\" alt=\"image\" width=\"400\" />\n</div>\n\nNEAR account connection sequence can be implemented in a very similar way to the already described NEAR authentication method, where at the end we store an authenticated account in our database:\n\n\n\n![image](/docs/assets/web3/nfts-10.png)\n\n\n\n\nThere\u2019s one more improvement we can make to this flow. Since a Web Client uses both accounts, a user is forced to login using both Web 2 login method (e.g. login/password) and NEAR Wallet. This is not ideal from the UX perspective, so we can simplify it by introducing a \u201cLogin with Wallet\u201d method to our server, which would work when a user already has a wallet connected. We can do this in a similar way to the account connection flow:\n\n\n\n![image](/docs/assets/web3/nfts-11.png)\n\n\n\n\n\nNow, as we\u2019ve discussed possible approaches for authentication, let\u2019s summarize it as an overall login flow for our clients:\n\n\n\n![image](/docs/assets/web3/nfts-12.png)\n\n\n\n\n\nOf course, this is just one possible flow, and a different solution can be assembled from described building blocks. The most important considerations for choosing right authentication flow are following:", "mimetype": "text/plain", "start_char_idx": 10215, "end_char_idx": 12170, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "49d89676-6ab1-4925-bbdf-9810dd300d16": {"__data__": {"id_": "49d89676-6ab1-4925-bbdf-9810dd300d16", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51", "node_type": "1", "metadata": {}, "hash": "4924ef2343266a0d9be409d9ddf5a7e791ac8c1a40359a32e48c02a63ad9ccd5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1c9d929-ceaa-495b-90ec-2be598d7eeac", "node_type": "1", "metadata": {}, "hash": "3eeb2203ce98c611f4c0f4a484b2d34092c4eff3cbb0372756282800a49152ae", "class_name": "RelatedNodeInfo"}}, "text": "* Type of your client - for web/desktop clients, or sideloaded Android clients, it\u2019s possible to use Wallet as a single authentication method. For mobile clients installed from a store, a hybrid approach with multiple auth methods should be used.\n* Target audience - if you target regular users that are not familiar with blockchain technologies, having a hybrid auth method to simplify onboarding might be better than forcing users to learn blockchain before trying your application.\n\n\n#### Blockchain Auth & Auth\n\nSo far, we\u2019ve discussed authentication and authorization on the Web 2 server\u2019s side. But what about Web 3 smart contracts? Everything is much more straightforward in this case.\n\nSince everything is public data on the blockchain, we don\u2019t need any authentication for read calls. For transactions, each is signed by an account\u2019s private key, and authentication is performed by the network. More details on transaction signing can be found [in the docs](../protocol/transactions.md).\n\nAuthorization, on the other hand, must be performed on a smart contract itself, the simplest way is just to check whether caller is allowed to perform an action:\n\n\n```rust\nassert_eq!(\n            env::predecessor_account_id(),\n            self.tokens.owner_id,\n            \"Unauthorized\"\n        );\n```\n\n\n\n### NFT usage\n\nAfter we\u2019ve learned how to authenticate users and how to authorize NFTs usage, let\u2019s find out how we can actually use them in our application.\n\nSince we essentially have two backends in our application - server and smart contract(s), they both can use NFTs for different purposes:\n\n\n\n* Server usually uses NFTs for actual functional purposes, e.g. by treating NFT as an in-game character, it can read its properties and stats and apply them using some logic.\n* Smart contract is responsible for NFTs ownership, as well as NFTs creation, modification and burning (destruction).\n\nThis is the point where the NFT data storage model comes into place. Let\u2019s recall, that there are 3 possible options:", "mimetype": "text/plain", "start_char_idx": 12174, "end_char_idx": 14188, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e1c9d929-ceaa-495b-90ec-2be598d7eeac": {"__data__": {"id_": "e1c9d929-ceaa-495b-90ec-2be598d7eeac", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "49d89676-6ab1-4925-bbdf-9810dd300d16", "node_type": "1", "metadata": {}, "hash": "c0deb530e283ffd598a464c0f2dec0763865bcdbed6d0b574a44c2f57f856f77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3a57f66e-2d2a-47d7-8815-5b2886a21765", "node_type": "1", "metadata": {}, "hash": "7242d0f1498b6b82b70ea4a412db569d44f4d1cb8307d06b1a200ab7aa02b8c4", "class_name": "RelatedNodeInfo"}}, "text": "1. Store data in a smart-contract (on-chain).\n2. Store data in an [off-chain decentralized storage](../../1.concepts/storage/decentralized-storage.md), like IPFS (off-chain).\n3. Store data in an application itself (in-application).\n\nFirst 2 approaches provide good decentralization, but make NFT harder to work with, especially if we need to modify its properties. Let\u2019s consider usage options depending on a storage model used:\n\n\n\n1. On-chain storage: \n    * Server can read data from the blockchain by making an API call. Server can\u2019t directly modify data, it should make a smart contract call instead (by issuing a transaction).\n    * Smart contract can directly read/modify NFT data.\n    * Clients can read all data directly from the blockchain.\n2. Off-chain storage:\n    * Server can read data from storage by making an API call. Data on the off-chain storage is usually immutable, so no modifications are possible.\n    * Smart contract cannot read data directly, an Oracle should be used. Data cannot be modified from it.\n    * Clients should read data from both blockchain and off-chain storage.\n3. In-application storage:\n    * Server can read/modify data from its own database.\n    * Smart contract cannot read data directly, an Oracle should be used. Data cannot be modified from it.\n    * Clients should read data from both blockchain and server.\n\nDepending on a particular use case, any approach, or combination of them, can be used. The simplest case is when we don\u2019t have any dynamic NFT data, and we can easily divide data by domains:\n\n\n\n* Data that is used by smart contracts is stored on-chain.\n* Other data is stored either off-chain or in-application.\n\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-13.png\" alt=\"image\" width=\"400\" />\n</div>", "mimetype": "text/plain", "start_char_idx": 14192, "end_char_idx": 15960, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3a57f66e-2d2a-47d7-8815-5b2886a21765": {"__data__": {"id_": "3a57f66e-2d2a-47d7-8815-5b2886a21765", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1c9d929-ceaa-495b-90ec-2be598d7eeac", "node_type": "1", "metadata": {}, "hash": "3eeb2203ce98c611f4c0f4a484b2d34092c4eff3cbb0372756282800a49152ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "47bc126f-c443-47c4-8594-4b0dfbd6218a", "node_type": "1", "metadata": {}, "hash": "b5d9bd30bb0f06d053c9f6c142b9e6047fe9a9b87f4c77d9f1632b2fc489a349", "class_name": "RelatedNodeInfo"}}, "text": "In this approach the server needs to read data from the smart contract, and, optionally, from an off-chain storage (like IPFS or Database). \n\nThis will work well for simple use cases, but everything becomes more complicated if we need to have some dynamic data associated with NFTs. E.g we may want to have experience points associated with our game character. Such data can be stored either on-chain or in-application (off-chain storage is also possible, but it\u2019s more involved, so we won\u2019t discuss it here).\n\nIn case of in-application storage, data can be modified by a server without any problems, but there are few drawbacks:\n\n\n\n* In order to read this data, clients should make an API call to the server. This adds a centralized point for our NFT, and may not be suitable for all applications.\n* If a smart contract requires this data, a server should serve as a [Blockchain Oracle](https://en.wikipedia.org/wiki/Blockchain_oracle), which complicates things.\n\nIf we want our server to serve as an oracle for our smart contract, the easiest way is to cryptographically sign server\u2019s data and verify it on the contract\u2019s side (server\u2019s public key that was used for signing should be stored in a contract in this case). \n\nIn order to prevent replay attacks, signed data should include a timestamp, which should also be verified. However, there\u2019s one trick to this - smart contracts can\u2019t access current time, since it would make them non-deterministic. Instead, transaction signature time can be used - it can be accessed using `env::block_timestamp()` function.\n\n\n\n![image](/docs/assets/web3/nfts-14.png)\n\n\n\n\n\nIn order to avoid all these complications, we can instead store dynamic data on-chain, and use smart contract calls to update it.\n\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-15.png\" alt=\"image\" width=\"500\" />\n</div>", "mimetype": "text/plain", "start_char_idx": 15963, "end_char_idx": 17803, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "47bc126f-c443-47c4-8594-4b0dfbd6218a": {"__data__": {"id_": "47bc126f-c443-47c4-8594-4b0dfbd6218a", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3a57f66e-2d2a-47d7-8815-5b2886a21765", "node_type": "1", "metadata": {}, "hash": "7242d0f1498b6b82b70ea4a412db569d44f4d1cb8307d06b1a200ab7aa02b8c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d", "node_type": "1", "metadata": {}, "hash": "75d54a8aa29a4a1b014ad02e082358227ee4724bcd4e5118887c4cc9c139d3ea", "class_name": "RelatedNodeInfo"}}, "text": "Such an approach has one drawback - in order to call a smart contract\u2019s method, a transaction should be created by the server, and in order to create a transaction it must be signed using an account\u2019s key. That\u2019s why a separate NEAR account should be created to be used by the server. Actions on the smart contract can be configured to authorize only this account, so regular users will be disallowed from modifying such data. \n\nYet another option is to store data on the server-side, but a smart contract can authorize only a server account for calls that rely on this data. As with the previous scenario, the server must have its own NEAR account.\n\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-16.png\" alt=\"image\" width=\"500\" />\n</div>\n\n\nIn general, the approach of storing dynamic data on the Smart Contract side is much easier, but an important constraint should be considered - storing data on the blockchain is not cheap, so an appropriate method can be chosen depending on a scenario.\n\nBy now, we\u2019ve covered methods to store and interact with NFTs from our application, an exact strategy should be chosen depending on use cases and constraints. A few things to remember:\n\n\n\n* Storing NFTs data in a centralized storage (like an application's database) goes against Web 3 philosophy, and should be used sparingly and with care.\n* Storage on the blockchain is not cheap, so decentralized off-chain storages can be used to store large data.\n* Storing and using dynamic NFT data is quite tricky, and should be carefully designed. If such dynamic data is needed by smart contracts, it\u2019s better to store it inside this contract if possible.\n\n\n### NFT minting\n\nSo far, we\u2019ve discussed only how to use NFTs in the application, but how do they get created?\n\nIn the blockchain world, creation of new NFTs is usually called minting. And as with traditional digital assets, there are few ways how to create them:", "mimetype": "text/plain", "start_char_idx": 17806, "end_char_idx": 19723, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d": {"__data__": {"id_": "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "47bc126f-c443-47c4-8594-4b0dfbd6218a", "node_type": "1", "metadata": {}, "hash": "b5d9bd30bb0f06d053c9f6c142b9e6047fe9a9b87f4c77d9f1632b2fc489a349", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3746cf64-c9a8-4295-bdf2-5f0963f0f314", "node_type": "1", "metadata": {}, "hash": "48ae925ae47859ba44f8a92dfd4bafa56809442ea7ccb6bd43892f4eeb3f5e30", "class_name": "RelatedNodeInfo"}}, "text": "* Users can mint them directly. This can be done by either allowing creation of NFTs from scratch, or by using more complex processes, like breeding or upgrading. The most famous example of such process is breeding in [CryptoKitties](https://www.cryptokitties.co/) game - new NFTs are created by combining existing ones. With this approach users usually have to pay to cover the storage and gas cost of NFTs creation.\n* NFTs can be distributed by the developer to a set of users - it is usually called [NFTs airdrop](https://www.investopedia.com/terms/a/airdrop-cryptocurrency.asp). Most often this is used as a marketing strategy to kickstart NFTs usage in applications. Storage and gas costs in this case are covered by developers.\n* NFTs can be bought on a market or obtained from the lootbox. Depending on an exact strategy, costs can either be paid by a user or by developer. Also, in this case NFTs sometimes can be minted on-demand, to avoid paying upfront costs.\n\nAn exact strategy used for NFTs minting depends on application use cases. However, almost always there\u2019ll be an `nft_mint _function` defined in a smart contract, which will handle creation of new tokens. This function itself isn't defined [in the standard](https://nomicon.io/Standards/NonFungibleToken/) and is up to the application to implement, but the standard library provides a core implementation for it - [mint_internal](https://docs.rs/near-contract-standards/latest/near_contract_standards/non_fungible_token/core/struct.NonFungibleToken.html#method.internal_mint). On top of this function an additional logic, e.g. for authorization, can be added:\n\n\n```rust\n#[payable]\npub fn nft_mint(\n    &mut self,\n    token_id: TokenId,\n    receiver_id: AccountId,\n    token_metadata: TokenMetadata,\n) -> Token {\n    assert_eq!(\n        env::predecessor_account_id(),\n        self.tokens.owner_id,\n        \"Unauthorized\"\n    );\n\n    let token = self\n        .tokens\n        .internal_mint(token_id, receiver_id, Some(token_metadata));\n\n    return token;\n}\n```", "mimetype": "text/plain", "start_char_idx": 19727, "end_char_idx": 21756, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3746cf64-c9a8-4295-bdf2-5f0963f0f314": {"__data__": {"id_": "3746cf64-c9a8-4295-bdf2-5f0963f0f314", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d", "node_type": "1", "metadata": {}, "hash": "75d54a8aa29a4a1b014ad02e082358227ee4724bcd4e5118887c4cc9c139d3ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1412e3db-bcdf-4986-8cdb-28936981f352", "node_type": "1", "metadata": {}, "hash": "050d923ce581943e3f62ae20bb35ca4eac7418c2678a68044e1a703a9797d5b5", "class_name": "RelatedNodeInfo"}}, "text": "This approach is quite simple, but everything becomes a bit complicated if we want to provide some on-demand minting functionality to avoid paying upfront costs. For example, we may want to create a lootbox with a set of predefined items appearing with some probability. \n\nOne approach is to handle this logic on a server side, in this case the server will call `nft_mint` function with computed parameters. However, in this case developers will have to pay the cost of minting. If we want to avoid this, loot box logic can be moved into the smart contract itself. If users want to open a loot box, he can call a smart contract function and pay for this action (e.g. by using NEAR or Fungible Tokens). Developers would only need to pay for a lootbox configuration costs, like possible items and their probabilities.\n\n\n## Blockchain Onboarding\n\nBefore designing an onboarding strategy, the target audience should be carefully analyzed. As we briefly mentioned before, users can be divided into two broad buckets:\n\n\n\n1. Users that are already familiar with blockchain, have their own wallets and understand cryptocurrency basics.\n2. \u201cCasual\u201d users that aren\u2019t familiar with blockchain and don\u2019t know much about it.\n\nIf only the first category is targeted, then everything is quite simple - users are already familiar with main concepts, and will have no problem connecting their own wallet or creating a new one. However, if we want to target the second category of users as well, a strategy has to be developed to make onboarding into the blockchain world as smooth as possible. While a lot relies on proper UX and is very application-specific, a few architectural patterns and technologies exist to simplify this process: custodial wallets, NEAR drops, Prepaid Gas and Implicit Accounts.\n\n[Custodial Wallet](https://www.coindesk.com/learn/custodial-wallets-vs-non-custodial-crypto-wallets/) is a wallet which is managed by a third party. In our case, a wallet can be created and stored on a server side, and all blockchain operations could be done using the server as a proxy.\n\n\n\n![image](/docs/assets/web3/nfts-17.png)", "mimetype": "text/plain", "start_char_idx": 21759, "end_char_idx": 23878, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1412e3db-bcdf-4986-8cdb-28936981f352": {"__data__": {"id_": "1412e3db-bcdf-4986-8cdb-28936981f352", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3746cf64-c9a8-4295-bdf2-5f0963f0f314", "node_type": "1", "metadata": {}, "hash": "48ae925ae47859ba44f8a92dfd4bafa56809442ea7ccb6bd43892f4eeb3f5e30", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed076df8-c981-43a7-be8c-09f5279d7ff3", "node_type": "1", "metadata": {}, "hash": "40122418d99705c7ffa7533018ee1e6272be5687027b3c1f1b8351e8588fe0fe", "class_name": "RelatedNodeInfo"}}, "text": "In this way, users can remain unaware about the intricacies of blockchain until they are comfortable enough to claim ownership of this account. Once they are ready, the server can transfer the account's ownership and remove it from the server. However, despite simplifying UX for the users, such approach has a few significant drawbacks:\n\n\n\n* Users should trust our application to manage their accounts. \n* Accounts creation is not free, so unless developers want to pay for it, funds should be transferred from a user to cover this cost. Traditional payment methods can be used, like PayPal or Apple/Google Pay. However, such an approach should be used with care for mobile applications due to app stores policies. Alternatively, NEAR Implicit Accounts can be used to avoid paying for account creation.\n* Unless we want to leave a custodial wallet as the only supported wallet type, we need to support both types of wallets (custodial and non-custodial) in our application. This will increase implementations complexity, since we need to support 2 transaction types:\n    * Server-signed transactions in case of custodial wallet.\n    * Client-signed transactions in case of non-custodial wallet.\n\nAs we mentioned above, [Implicit Accounts](../protocol/account-id.md#implicit-accounts-implicit-accounts) can be used to avoid paying account creation costs. This is especially useful for custodial wallets, since it allows us to create a NEAR Account free of charge. Basically, they work like an Ethereum/Bitcoin-style account by using a public key as an account id, and later can be converted to a full NEAR account. However, they have drawbacks as well. First of all, human-readable account names cannot be used. Also, if we want to convert it to a proper NEAR account, which can support Functional Call keys, the account creation fee still has to be paid.\n\nWhile being very powerful, custodial accounts are quite complex and tricky to implement. An alternative approach to ease users onboarding is to simplify creation of a wallet itself. In NEAR, we can do this using [NEAR Drops](https://near.org/blog/send-near-to-anyone-with-near-drops/). It allows us to generate a link that guides users through a quick wallet creation process. However, the same problem as for the custodial accounts applies - creation of an account is not free.", "mimetype": "text/plain", "start_char_idx": 23884, "end_char_idx": 26219, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ed076df8-c981-43a7-be8c-09f5279d7ff3": {"__data__": {"id_": "ed076df8-c981-43a7-be8c-09f5279d7ff3", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1412e3db-bcdf-4986-8cdb-28936981f352", "node_type": "1", "metadata": {}, "hash": "050d923ce581943e3f62ae20bb35ca4eac7418c2678a68044e1a703a9797d5b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "826aaf50-d313-4f4e-9025-02193253e6be", "node_type": "1", "metadata": {}, "hash": "cece1190225688b0e4cd3fd377e35048f3648cb2368cafff102a02c45b244c0f", "class_name": "RelatedNodeInfo"}}, "text": "That\u2019s why, such a link has NEAR tokens attached to it to cover account creation cost and to serve as an initial balance for a newly created wallet. And as with custodial accounts, funds should be transferred from a user to cover this cost using traditional payment channels.\n\nAnother option to simplify onboarding is usage of the [Prepaid Gas](../protocol/gas.md#what-about-prepaid-gas-what-about-prepaid-gas) concept. For example, we can issue a Functional Call key that allows users to interact with blockchain without having an account created. In this case funds will be drawn from the developer's account. This can be used for demo purposes, or to allow users without a NEAR account to perform some smart contract actions.\n\n\n## NFT Marketplace\n\nAt this point, we\u2019ve covered in detail how to integrate NFTs into our Web 2 application, but we\u2019ve stayed away from the economy part. The essential part for having a functioning economy is a marketplace where users can freely trade and exchange their NFTs. Such a marketplace usually consists of a smart contract and a client application. This smart contract is closely integrated with a NFT\u2019s smart contract using the cross-contract calls. The reason for having a separate smart contract is two-fold:\n\n\n\n* This provides a better separation of concerns - we can modify and upgrade our marketplace independently from the NFT contract.\n* Multiple marketplaces can be used - e.g. we can have an internal marketplace, and in addition to it users can list their NFTs on external marketplaces. This is possible because a common NFT standard exists that all marketplaces can rely on.\n\nGeneral flow of a simple marketplace integration can look like this:\n\n\n\n![image](/docs/assets/web3/nfts-18.png)", "mimetype": "text/plain", "start_char_idx": 26220, "end_char_idx": 27960, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "826aaf50-d313-4f4e-9025-02193253e6be": {"__data__": {"id_": "826aaf50-d313-4f4e-9025-02193253e6be", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ed076df8-c981-43a7-be8c-09f5279d7ff3", "node_type": "1", "metadata": {}, "hash": "40122418d99705c7ffa7533018ee1e6272be5687027b3c1f1b8351e8588fe0fe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01e22922-8b70-478d-a788-16ab17e8ecef", "node_type": "1", "metadata": {}, "hash": "59a5989d8aa261326ec555577621ab855765b65c25c37b7fbbb32cb8a513809f", "class_name": "RelatedNodeInfo"}}, "text": "1. Client calls the [nft_approve](https://nomicon.io/Standards/NonFungibleToken/ApprovalManagement#2-approval-with-cross-contract-call) method on the NFT smart contract. This will approve Marketplace Smart Contract to sell this NFT.\n2. After approving an account, NFT smart contract issues a cross-contract call to the Marketplace to create a sale object. Arguments for this call are provided as part of the `nft_approve` call.\n3. Another user wants to buy the NFT on sale, so he issues a call to the marketplace contract offering to buy it. An exact call signature for such action is not standardized and depends on marketplace implementation.\n4. If an offer to buy a NFT is valid, Marketplace issues an [nft_transfer_payout](https://nomicon.io/Standards/NonFungibleToken/Payout) call to transfer the NFT and return payout information. This information is used by the Marketplace to distribute profits from the sale between recipients. In the simplest case, all profits go to a seller.\n\nSuch flow looks relatively simple, but a few important details are missing. \n\nFirst of all, in order to create a sale, storage needs to be paid for. Usually, the seller is the one who needs to pay for it, but other models are possible - e.g. marketplace or application developers could cover the cost. If we want users to pay for a sale, an approach with storage reservation can be used:\n\n\n\n* Before approving NFT for sale, a user should reserve storage on the Marketplace contract to cover sale storage requirements.\n* After the NFT is bought or delisted, the user can withdraw storage reservation (remember, that in NEAR storage staking model is used, so data can be deleted and locked tokens refunded).\n\nWhile this model is relatively straightforward, it\u2019s not ideal from the UX perspective - users must make a separate action to reserve storage if they want to sell their NFTs. To improve this, we can combine `nft_approve` call with storage reservation, and automatically refund back the storage cost after the sale is removed. \n\n\n\n![image](/docs/assets/web3/nfts-19.png)", "mimetype": "text/plain", "start_char_idx": 27967, "end_char_idx": 30031, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01e22922-8b70-478d-a788-16ab17e8ecef": {"__data__": {"id_": "01e22922-8b70-478d-a788-16ab17e8ecef", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "826aaf50-d313-4f4e-9025-02193253e6be", "node_type": "1", "metadata": {}, "hash": "cece1190225688b0e4cd3fd377e35048f3648cb2368cafff102a02c45b244c0f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0023e383-909b-4ee4-85aa-7599958d7527", "node_type": "1", "metadata": {}, "hash": "aefb743f27833b2952634d542ea0a1b5b430d0ad23c6f77633ea672ef23a3560", "class_name": "RelatedNodeInfo"}}, "text": "Another missing thing is how a client can read data about available sales. Of course, sales information can be read directly from a smart contract, but available data structures are not optimized for searching or filtering. Also, we would have to join data from the NFT and Marketplace contracts on the client side, which isn\u2019t efficient. In order to solve these problems, an indexer can be used to aggregate data into a suitable database, where data can be stored in a way optimal for retrieval (e.g. a relational database or an ElasticSearch index can be used).\n\n\n\n![image](/docs/assets/web3/nfts-20.png)\n\n\n\n\nThis is just one example of how a marketplace can be designed, but with it we\u2019ve covered all basic concepts and problems. Most important points to remember:\n\n\n\n* It\u2019s better to implement a marketplace as a separate contract.\n* Storage management should be carefully designed, with UX in mind.\n* In order to implement a proper searching/filtering functionality, a separate indexing service is needed.\n\nAn example of a simple marketplace [can be found here](../../3.tutorials/nfts/8-marketplace.md). A more sophisticated marketplace may allow purchases with Fungible Tokens as payment.\n\n\n## Implementing Components\n\nNow, let\u2019s explore our choice of libraries, frameworks and third-party solutions that can be used to implement our architecture.\n\n\n#### Client & Server\n\nFirst of all, how can we interact with blockchain from our clients? \n\nIf we need read-level access only, we can simply use the [REST API](https://docs.near.org/api/rpc/setup), so it can be integrated into any language and technology without any problems. But everything becomes more complicated if we need to post transactions from a client. Remember, that transaction should be signed with a private key which is stored in a wallet:\n\n\n\n* In case of a Functional Call key, it can be obtained from the wallet and used directly by the client.\n* In case of a Full Access key, the user should be redirected to the wallet to approve a transaction.\n\nA [JavaScript API](/tools/near-api-js/quick-reference) exists to cover all of these scenarios. It has all of the necessary functionality to integrate Web/Node.JS applications with blockchain. This SDK is a perfect choice for the Web-based clients, but it\u2019s not suitable for desktop or mobile based clients. Other libraries can be used for them:", "mimetype": "text/plain", "start_char_idx": 30037, "end_char_idx": 32403, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0023e383-909b-4ee4-85aa-7599958d7527": {"__data__": {"id_": "0023e383-909b-4ee4-85aa-7599958d7527", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01e22922-8b70-478d-a788-16ab17e8ecef", "node_type": "1", "metadata": {}, "hash": "59a5989d8aa261326ec555577621ab855765b65c25c37b7fbbb32cb8a513809f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c0eee531-8db4-457f-9843-2c7e09ac7214", "node_type": "1", "metadata": {}, "hash": "f5d2d8267785a936e18fa43a75b68f4151f8532f33e40c4914b559bce482852d", "class_name": "RelatedNodeInfo"}}, "text": "* [.NET Client](https://github.com/good1101/NearClientApi/tree/master/NearClient) - suitable for Unity or Xamarin.\n* [Swift](https://github.com/near/near-api-swift)\n* [Python](https://github.com/near/near-api-py)\n* [Unity](https://github.com/near/near-api-unity)\n\n\nSame SDKs and libraries can be used for servers. The only difference is that a server cannot interact with a Wallet, so it must have access to a Full Access key, which should be stored and accessed in a secure way. \n\nAlso, another solution is available if a server uses a technology that doesn\u2019t have NEAR SDK available for - we can create a separate (micro)service using the Node.js, which would handle all blockchain interactions:\n\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-21.png\" alt=\"image\" width=\"450\" />\n</div>\n\n\nAn example of such a proxy server [can be found here](https://github.com/near-examples/near-api-rest-server).\n\n\n#### Contracts\n\nAs we discovered in a previous section, for our application we need two smart contracts: for NFT and for Marketplace. There are two options on how to get them - use in-house implementation or some third-party/SAAS solution. Both options are viable and have different pros/cons. \n\nIf we want to create our own contract, we are fully in control and can implement anything we want. An obvious drawback, of course, is that it will take time and money to build it. Third-party solutions, on the other hand, are limited in their functionality and often cannot be easily extended. Also, they usually have some upfront costs and/or usage fees.\n\nFor an in-house NFT contract implementation a few resources can be used as a starting point. First of all, a [Rust library](https://docs.rs/near-contract-standards/latest/near_contract_standards/index.html) is available which implements most of the standard. Another option is to build an entire contract from scratch, a good guide on how to do this is available by [this link](../../3.tutorials/nfts/0-intro.md).\n\nImplementing an own Marketplace contract is more involved since there is no standard implementation. A few examples:", "mimetype": "text/plain", "start_char_idx": 32407, "end_char_idx": 34501, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0eee531-8db4-457f-9843-2c7e09ac7214": {"__data__": {"id_": "c0eee531-8db4-457f-9843-2c7e09ac7214", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0023e383-909b-4ee4-85aa-7599958d7527", "node_type": "1", "metadata": {}, "hash": "aefb743f27833b2952634d542ea0a1b5b430d0ad23c6f77633ea672ef23a3560", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24", "node_type": "1", "metadata": {}, "hash": "f92d3af0a591ee5792c259bc65cd70a964b8d76811a36c40f0e1a9dd89fab2cc", "class_name": "RelatedNodeInfo"}}, "text": "* [Basic marketplace example](../../3.tutorials/nfts/8-marketplace.md)\n* [Paras ](https://paras.id/)marketplace contract - [source](https://github.com/ParasHQ/paras-marketplace-contract/tree/master/paras-marketplace-contract/src). \n\nAs for third-party solutions, the most complete one is [Mintbase](https://www.mintbase.io/), which provides a full suite of components for NFTs integration - including contracts, indexer, API and a web client:\n\n\n\n![image](/docs/assets/web3/nfts-22.png)\n\n\n\n\nAnother option is to roll-out an own NFT contract and integrate with one of the third-party marketplaces, e.g. with [Paras](https://paras.id/) ([integration docs](https://docs.paras.id/nft-smart-contract-integration)).\n\n\n\n\n![image](/docs/assets/web3/nfts-23.png)\n\n\n\n\n\nThe major advantage of an external marketplace is the fact that they usually run their own indexer and expose collected data via an API, so we don\u2019t have to implement these components. However, they usually have their fee for providing them, so a cost-benefit analysis should be conducted before using them.\n\n\n#### Off-chain storages\n\nPreviously, we\u2019ve discussed that storage on the blockchain is not cheap, so in most cases some decentralized storage solution should be used. A few options are available:\n\n\n\n* [IPFS ](https://ipfs.io/)- one of the first decentralized storage solutions, which is widely used in the blockchain world. However, in order to make sure that data is preserved on the network, an IPFS node(s) should be maintained. \n* [Arweawe](https://www.arweave.org/) - blockchain-based decentralized storage.  \n* [Filecoin](https://filecoin.io/) - another blockchain-based storage.\n* [nft.storage](https://nft.storage/) - a free service built on top of the IPFS and Filecoin. \n\nA more in-depth overview of such solutions is available [in the docs](../storage/decentralized-storage.md). In general, there's no \u201csilver bullet\u201d, so different solutions should be evaluated and the most suitable chosen. The main concerns while choosing a solution are availability guarantees, and cost.", "mimetype": "text/plain", "start_char_idx": 34505, "end_char_idx": 36558, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24": {"__data__": {"id_": "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c0eee531-8db4-457f-9843-2c7e09ac7214", "node_type": "1", "metadata": {}, "hash": "f5d2d8267785a936e18fa43a75b68f4151f8532f33e40c4914b559bce482852d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f64e649e-1d29-4712-ac0d-91e1d1ee87a9", "node_type": "1", "metadata": {}, "hash": "3b8b3fe100df9a38d1a32ef57286275fb04e4c12066755a10cba62b3e08d4919", "class_name": "RelatedNodeInfo"}}, "text": "#### Indexer\n\nAs we already determined, an indexing service is needed in order to support marketplace functionality. It usually consists of 3 components:\n\n\n\n* Indexer - processes transactions from a NEAR network and puts extracted data into a database.\n* Database - database of choice to store extracted data.\n* Indexer API - an API layer on top of the database.\n\n    \n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-24.png\" alt=\"image\" width=\"150\" />\n</div>\n\n\nWhile any technology of choice can be used to implement Database and API, an indexer itself is can be implemented using both [Rust](https://github.com/near/near-lake-framework-rs) and [JavaScript](https://github.com/near/near-lake-framework-js). See [this example](https://github.com/near-examples/near-lake-nft-indexer) written in Rust.\n\nUsually, an indexer works by extracting data from [Events](https://nomicon.io/Standards/EventsFormat), which are basically just structured log messages written during contract execution.\n\n[The Graph](https://thegraph.com/en/) is an alternative to building an indexer from scratch. This is an Indexer-as-a-Service solution, which simplifies their creation and deployment. Guide on how to create a NEAR indexer is available [by this link](https://thegraph.com/docs/en/supported-networks/near/).", "mimetype": "text/plain", "start_char_idx": 36561, "end_char_idx": 37859, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f64e649e-1d29-4712-ac0d-91e1d1ee87a9": {"__data__": {"id_": "f64e649e-1d29-4712-ac0d-91e1d1ee87a9", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24", "node_type": "1", "metadata": {}, "hash": "f92d3af0a591ee5792c259bc65cd70a964b8d76811a36c40f0e1a9dd89fab2cc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c49f596e-8e81-4313-85af-a9acf14e9f6d", "node_type": "1", "metadata": {}, "hash": "2b21a848328c4aa58e6ad55f4bb4d0a0eb6b3cadbc113bc62f675c1c1b72c422", "class_name": "RelatedNodeInfo"}}, "text": "#### Automated Testing\n\nAutomated testing of the code is one of the pillars of modern software development. But how do we test our dApp?\n\nRecall that a smart contract is a pure function, which can be easily tested using Unit Tests. Guide on how to write them is available [here](../../2.build/2.smart-contracts/testing/unit-test.md), and some examples can be found here. Another important kind of tests that is supported by NEAR are E2E tests, they can be executed either deploying contract code to either the local network environment (more info [here](../../2.build/2.smart-contracts/testing/introduction.md)), or directly to `testnet`, more info [here](../../2.build/2.smart-contracts/testing/integration-test.md)).\n\nHaving both types of tests is equally important to ensure continuous quality of smart contracts, especially since contract upgrades usually aren\u2019t easy to perform (remember, that in DAOs upgrade itself might be governed by a community vote).\n\n\n## Non-Functional Concerns\n\nLast, but not least, let\u2019s cover important non-functional concerns for our architecture.\n\n\n### Security\n\nThe most important thing to remember during the entire development is security, and especially the security of smart contracts. Since their code is public and an upgrade procedure is not trivial, it should be carefully audited for security issues and logical exploits. \n\nAnother important thing that should be kept secure is a user's private key. In most cases, only Functional Call keys should be directly accessed from a client, and Full Access keys should be kept in a wallet. However, in some cases a Full Access key might have to be used directly (e.g. in case of server transaction signing scenarios). In such a case, it must be kept in a secure location and treated as a most sensitive secret, since its compromise might lead to a full account takeover.\n\nIn general, before deploying an application to the NEAR mainnet, it\u2019s a good idea to conduct a full security audit.", "mimetype": "text/plain", "start_char_idx": 37862, "end_char_idx": 39836, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c49f596e-8e81-4313-85af-a9acf14e9f6d": {"__data__": {"id_": "c49f596e-8e81-4313-85af-a9acf14e9f6d", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f64e649e-1d29-4712-ac0d-91e1d1ee87a9", "node_type": "1", "metadata": {}, "hash": "3b8b3fe100df9a38d1a32ef57286275fb04e4c12066755a10cba62b3e08d4919", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1279adf7-b2d8-422f-8847-527e98322dcc", "node_type": "1", "metadata": {}, "hash": "6c77ec828035eaf8df988ffa5684bc7fc3d6d5c1d3cbe89f886d2ba41ba384aa", "class_name": "RelatedNodeInfo"}}, "text": "### Scalability and Availability\n\nAnother concern is scalability and availability of a solution. There are a lot of ways to scale traditional servers, but how do we scale our blockchain and make sure it\u2019s always available? \n\nSince blockchain is decentralized, it provides us with high-availability by design, and NEAR provides a great scalability by employing Proof-of-Stake consensus and sharding. However, in order to interact with a network, we need an RPC Node. NEAR maintains publicly available nodes for its networks (listed [here](https://rpc.mainnet.near.org/status)), but it doesn't provide any performance or availability guarantees for them. So, in order to make sure our architecture is scalable and fault tolerant, we need to maintain our own cluster of RPC nodes, typically behind a load balancer.\n\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/nfts-25.png\" alt=\"image\" width=\"150\" />\n</div>\n\n\nInformation on how to set up an RPC node is available [here](https://near-nodes.io/rpc). \n\nAlso, to guarantee availability and scalability of a whole system, all used third-party services should be reviewed as well. For example, if IPFS is used as a storage for NFTs, pinning nodes and IPFS gateway should be scalable and fault tolerant.\n\n\n### Costs\n\nWhen building a Web 3 application, it\u2019s important to remember that cost calculation is somewhat different from Web 2 applications. Additional costs can be broken down into several categories:", "mimetype": "text/plain", "start_char_idx": 39839, "end_char_idx": 41293, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1279adf7-b2d8-422f-8847-527e98322dcc": {"__data__": {"id_": "1279adf7-b2d8-422f-8847-527e98322dcc", "embedding": null, "metadata": {"file_path": "./near_dist/nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d", "node_type": "4", "metadata": {}, "hash": "07a2077e882cba04b2c45a855b340ee199f054a53b4c06ca05cc0983c00f1c7f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c49f596e-8e81-4313-85af-a9acf14e9f6d", "node_type": "1", "metadata": {}, "hash": "2b21a848328c4aa58e6ad55f4bb4d0a0eb6b3cadbc113bc62f675c1c1b72c422", "class_name": "RelatedNodeInfo"}}, "text": "1. Smart Contracts deployment costs. While deploying on NEAR testnet or local environment, it\u2019s essentially free of charge. However, when deploying into the mainnet, developers will be charged for storage and gas cost. Gas cost for a contract deployment transaction is relatively small (around 0.04$ at the time of writing). On the other hand, storage costs can be quite substantial, e.g. a 150KB contract (compiled) will cost around 20$.\n2. Smart Contracts usage cost. In Web 3, users pay for smart contract calls, so in order to make sure users aren\u2019t discouraged to interact with a contract due to a high cost, it should be optimized to incur the lowest cost possible. This is especially important for storage costs, since gas is relatively cheap.\n3. If we want to use a privately hosted RPC node for better availability, its operational costs should be taken into account as well. Cost breakdown can be found [here](https://near-nodes.io/rpc/hardware-rpc), a rough estimation is about 290$ per node per month (and remember that we need at least 2 nodes for redundancy).\n4. Cost of a privately hosted indexer (if it\u2019s used). More information can be found [here](/concepts/advanced/near-indexer-framework), a rough estimation for the costs is about 100$ per month.\n5. Third party services costs.", "mimetype": "text/plain", "start_char_idx": 41297, "end_char_idx": 42594, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1273289c-fc9b-4033-b448-cdeab5fbc2bc": {"__data__": {"id_": "1273289c-fc9b-4033-b448-cdeab5fbc2bc", "embedding": null, "metadata": {"file_path": "./near_dist/builtin-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "499459c0-1eae-4c14-8407-a3c06a2a995e", "node_type": "4", "metadata": {}, "hash": "9e182c0cde36edf57a92b5b02718e0895d2d13ed2d026187c93c789008845819", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c868e82-8168-4125-b12c-ad86e132e347", "node_type": "1", "metadata": {}, "hash": "8f10d9a520c603e84662430ac3852cca6ea3e46ce2964105e92616217800bf84", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: builtin-components\ntitle: List of Native Components\n---\n\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nA list of all the built-in components to be used on Near Components.\n\n---\n\n## Widget\n\nThe predefined component `Widget` allows you to include an existing component into your code, thus enabling to create complex applications by composing components.\n\n<WidgetEditor id='1' height=\"100px\">\n\n```ts\nconst props = { name: \"Anna\", amount: 3 };\n\nreturn <Widget src=\"influencer.testnet/widget/Greeter\" props={props} />;\n```\n\n</WidgetEditor>\n\n---\n\n## IpfsImageUpload\n\nA built-in component that enables users to directly upload an image to the InterPlanetary File System (IPFS).\n\n<WidgetEditor id='2' height=\"200px\">\n\n```js\nState.init({image: {}})\n\nreturn <>\n  <p> Raw State: {JSON.stringify(state.image)} </p>\n  <IpfsImageUpload image={state.image} />\n</>\n```\n\n</WidgetEditor>\n\n---\n\n## Files\n\nA built-in component that enables to input files with drag and drop support. Read more about the `Files` component [here](https://www.npmjs.com/package/react-files).\n\n<WidgetEditor id='3' height=\"220px\">\n\n```js\nconst [img, setImg] = useState(null);\nconst [msg, setMsg] = useState('Upload an Image')\n\nconst uploadFile = (files) => {\n  setMsg('Uploading...')\n\n  const file = fetch(\n    \"https://ipfs.near.social/add\",\n    {\n      method: \"POST\",\n      headers: { Accept: \"application/json\" },\n      body: files[0]\n    }\n  )\n\n  setImg(file.body.cid)\n  setMsg('Upload an Image')\n}\n\nreturn <>\n  <Files\n    multiple={false}\n    accepts={[\"image/*\"]}\n    clickable\n    className=\"btn btn-outline-primary\"\n    onChange={uploadFile}\n  >\n    {msg}\n  </Files>\n  {img ? <div><img src={`https://ipfs.near.social/ipfs/${img}`} /></div> : ''}\n</>;\n```\n\n</WidgetEditor>\n\n---\n\n## Markdown\n\nA component that enables to render Markdown.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1831, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c868e82-8168-4125-b12c-ad86e132e347": {"__data__": {"id_": "2c868e82-8168-4125-b12c-ad86e132e347", "embedding": null, "metadata": {"file_path": "./near_dist/builtin-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "499459c0-1eae-4c14-8407-a3c06a2a995e", "node_type": "4", "metadata": {}, "hash": "9e182c0cde36edf57a92b5b02718e0895d2d13ed2d026187c93c789008845819", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1273289c-fc9b-4033-b448-cdeab5fbc2bc", "node_type": "1", "metadata": {}, "hash": "9214b1e7bbb5dd2d120dde98296b17287a24f9d8761362ba20717b1dc9c4f530", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ad77afb-da28-44a6-8a83-354de0a6378b", "node_type": "1", "metadata": {}, "hash": "f703481126ba2b3ff590d1a92e5f682fd9d5236ab5d43c72db7d3083b9e42dfb", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor id='4' height=\"60px\">\n\n```jsx\nconst markdown = (`\n## A title\n\nThis is some example **markdown** content, with _styled_ text\n`)\n\nreturn <Markdown text={markdown} />;\n```\n\n</WidgetEditor>\n\n:::tip Markdown Editor\n\nCheckout this [Markdown Editor](https://near.social/#/mob.near/widget/MarkdownEditorIframeExample), and [its source code](https://near.social/mob.near/widget/WidgetSource?src=mob.near/widget/MarkdownEditorIframeExample).\n:::\n\n---\n\n## OverlayTrigger\n\nUsed to display a message or icon when the mouse is over a DOM element.\n\n<WidgetEditor id='5' height=\"200px\">\n\n```javascript\nconst [show, setShow] = useState(false);\n\nconst overlay = (\n  <div className='border m-3 p-3'>\n    This is the overlay Message\n  </div>\n);\n\nreturn (\n  <OverlayTrigger\n    show={show}\n    delay={{ show: 250, hide: 300 }}\n    placement='auto'\n    overlay={overlay}\n  >\n    <button\n      className=\"btn btn-outline-primary\"\n      onMouseEnter={() => setShow(true)}\n      onMouseLeave={() => setShow(false)}\n    >\n      Place Mouse Over Me\n    </button>\n  </OverlayTrigger>\n);\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n\n<summary> Component props </summary>\n\nThe OverlayTrigger component has several props that allow you to customize its behavior:\n\n| Prop        | Description                                                                                                                                                                                                                                                                  |\n|-------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `show`      | A boolean value that determines whether the overlay is currently visible or not.                                                                                                                                                                                             |\n| `trigger`   | An array of events that trigger the display of the overlay. In this example, the `trigger` prop is set to `[\"hover\", \"focus\"]`, which means that the overlay will be displayed when the user hovers over or focuses on the element.                                          |\n| `delay`     | An object that specifies the delay before the overlay is displayed or hidden. In this example, the `delay` prop is set to `{ show: 250, hide: 300 }`, which means that the overlay will be displayed after a 250-millisecond delay and hidden after a 300-millisecond delay.", "mimetype": "text/plain", "start_char_idx": 1833, "end_char_idx": 4512, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ad77afb-da28-44a6-8a83-354de0a6378b": {"__data__": {"id_": "0ad77afb-da28-44a6-8a83-354de0a6378b", "embedding": null, "metadata": {"file_path": "./near_dist/builtin-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "499459c0-1eae-4c14-8407-a3c06a2a995e", "node_type": "4", "metadata": {}, "hash": "9e182c0cde36edf57a92b5b02718e0895d2d13ed2d026187c93c789008845819", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c868e82-8168-4125-b12c-ad86e132e347", "node_type": "1", "metadata": {}, "hash": "8f10d9a520c603e84662430ac3852cca6ea3e46ce2964105e92616217800bf84", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "87a6aa77-44f7-452d-a549-743f90968e7c", "node_type": "1", "metadata": {}, "hash": "9e54b6a98ef1040eae2a5706d78a5fc61124f546e4df9156a67853a121985f04", "class_name": "RelatedNodeInfo"}}, "text": "|\n| `placement` | A string that specifies the position of the overlay relative to the trigger element. In this example, the `placement` prop is set to `\"auto\"`, which means that the position will be automatically determined based on available space.                                      |\n| `overlay`   | The content that will be displayed in the overlay. In this example, the `overlay` prop is set to a `<div>` element containing the message \"This is the overlay message.                                                                                                      |\n</details>\n\n---\n\n## InfiniteScroll\n\nInfinitely load a grid or list of items. This component allows you to create a simple, lightweight infinite scrolling page or element by supporting both window and scrollable elements.\n\nRead more about the [react-infinite-scroller](https://www.npmjs.com/package/react-infinite-scroller) package.\n\n<WidgetEditor id='6' height=\"200px\">\n\n```js\nconst allNumbers = Array.from(Array(100).keys())\nconst [lastNumber, setLastNumber] = useState(0);\nconst [display, setDisplay] = useState([]);\n\nconst loadNumbers = (page) => {\n  const toDisplay = allNumbers\n    .slice(0, lastNumber + page*10)\n    .map(n => <p>{n}</p>)\n\n  console.log(lastNumber + page*10)\n  setDisplay(toDisplay);\n  setLastNumber(lastNumber + page*10);\n};\n\nreturn (\n  <InfiniteScroll\n    loadMore={loadNumbers}\n    hasMore={lastNumber < allNumbers.length}\n    useWindow={false}\n  >\n    {display}\n  </InfiniteScroll>\n);\n```\n\n</WidgetEditor>\n\n---\n\n## TypeAhead\n\nProvides a type-ahead input field for selecting an option from a list of choices. More information about the component can be found [here](https://github.com/ericgio/react-bootstrap-typeahead).", "mimetype": "text/plain", "start_char_idx": 4513, "end_char_idx": 6235, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "87a6aa77-44f7-452d-a549-743f90968e7c": {"__data__": {"id_": "87a6aa77-44f7-452d-a549-743f90968e7c", "embedding": null, "metadata": {"file_path": "./near_dist/builtin-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "499459c0-1eae-4c14-8407-a3c06a2a995e", "node_type": "4", "metadata": {}, "hash": "9e182c0cde36edf57a92b5b02718e0895d2d13ed2d026187c93c789008845819", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ad77afb-da28-44a6-8a83-354de0a6378b", "node_type": "1", "metadata": {}, "hash": "f703481126ba2b3ff590d1a92e5f682fd9d5236ab5d43c72db7d3083b9e42dfb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2be26acd-231a-43f8-9141-3d15a72b5ba7", "node_type": "1", "metadata": {}, "hash": "c3fc973efe4b3dd24e48d41b9ee380b297bdade26b3f1e5fe64b8d36da87ada6", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor id='7' height=\"300px\">\n\n```jsx\nconst [selected, setSelected] = useState([]);\nconst options = [\"Apple\", \"Banana\", \"Cherry\", \"Durian\", \"Elderberry\"];\n\nreturn <>\n  <Typeahead\n    options={options}\n    multiple\n    onChange={v => setSelected(v)}\n    placeholder='Choose a fruit...'\n  />\n  <hr />\n  <p> Selected: {selected.join(', ')} </p>\n</>;\n```\n\n</WidgetEditor>\n\n---\n\n## Styled Components\n\n[Styled Components](https://styled-components.com/) is a popular library for styling React components using CSS-in-JS.\n\n<WidgetEditor id='8' height=\"80px\">\n\n```jsx\nconst Button = styled.button`\n  /* Adapt the colors based on primary prop */\n  background: ${(props) => (props.primary ? \"palevioletred\" : \"white\")};\n  color: ${(props) => (props.primary ? \"white\" : \"palevioletred\")};\n\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 10px;\n`;\n\nreturn (\n  <div>\n    <Button>Normal</Button>\n    <Button primary>Primary</Button>\n  </div>\n);\n```\n\n</WidgetEditor>\n\n---\n\n## Tooltip\n\nDisplays a message once the mouse hovers over a particular item. This component was imported from [`React-Bootstrap`](https://react-bootstrap-v3.netlify.app/components/tooltips/).\n\n<WidgetEditor id='9' height=\"120px\">\n\n```js\nconst tooltip = (\n  <Tooltip id=\"tooltip\">\n    <strong>Holy guacamole!</strong> Check this info.", "mimetype": "text/plain", "start_char_idx": 6237, "end_char_idx": 7595, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2be26acd-231a-43f8-9141-3d15a72b5ba7": {"__data__": {"id_": "2be26acd-231a-43f8-9141-3d15a72b5ba7", "embedding": null, "metadata": {"file_path": "./near_dist/builtin-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "499459c0-1eae-4c14-8407-a3c06a2a995e", "node_type": "4", "metadata": {}, "hash": "9e182c0cde36edf57a92b5b02718e0895d2d13ed2d026187c93c789008845819", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "87a6aa77-44f7-452d-a549-743f90968e7c", "node_type": "1", "metadata": {}, "hash": "9e54b6a98ef1040eae2a5706d78a5fc61124f546e4df9156a67853a121985f04", "class_name": "RelatedNodeInfo"}}, "text": "</Tooltip>\n);\n\nreturn <>\n  <OverlayTrigger placement=\"left\" overlay={tooltip}>\n    <button>Holy guacamole!</button>\n  </OverlayTrigger>\n\n  <OverlayTrigger placement=\"top\" overlay={tooltip}>\n    <button>Holy guacamole!</button>\n  </OverlayTrigger>\n\n  <OverlayTrigger placement=\"bottom\" overlay={tooltip}>\n    <button>Holy guacamole!</button>\n  </OverlayTrigger>\n\n  <OverlayTrigger placement=\"right\" overlay={tooltip}>\n    <button>Holy guacamole!</button>\n  </OverlayTrigger>\n</>\n```\n\n</WidgetEditor>", "mimetype": "text/plain", "start_char_idx": 7598, "end_char_idx": 8096, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8aa8b977-d60a-404a-a8f6-5fff30c719a6": {"__data__": {"id_": "8aa8b977-d60a-404a-a8f6-5fff30c719a6", "embedding": null, "metadata": {"file_path": "./near_dist/dex.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dab82f69-404e-4103-b889-0b5aa1e20fee", "node_type": "4", "metadata": {}, "hash": "373d40e68067374c53a0b92c02fd58b70fe0c21dcaf0bf45ca71ec632fa8d38c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "719512e8-e973-4bf2-be8e-d88ac2670c58", "node_type": "1", "metadata": {}, "hash": "2a8edef959c67c2809f05766130ca007537088e80304fb3f8ed0039d215bd79b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: dex\ntitle: Decentralized Exchanges (DEX)\nhide_table_of_contents: false\n---\n\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\"\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport BOSGetPrice from \"./dex/bos/get-price.md\"\nimport BOSSwap from \"./dex/bos/swap.md\"\nimport BOSGetPools from \"./dex/bos/get-pools.md\"\nimport BOSGetDepositBalances from \"./dex/bos/get-deposit-balances.md\"\n\nimport WebAppGetPrice from \"./dex/web-app/get-price.md\"\nimport WebAppSwap from \"./dex/web-app/swap.md\"\nimport WebAppGetPools from \"./dex/web-app/get-pools.md\"\nimport WebAppGetDepositBalances from \"./dex/web-app/get-deposit-balances.md\"\n\nimport CLISwap from \"./dex/near-cli/swap.md\"\nimport CLIGetPools from \"./dex/near-cli/get-pools.md\"\nimport CLIGetDepositBalances from \"./dex/near-cli/get-deposit-balances.md\"\n\nimport SmartContractSwap from \"./dex/smart-contract/swap.md\"\nimport SmartContractGetPools from \"./dex/smart-contract/get-pools.md\"\nimport SmartContractGetDepositBalances from \"./dex/smart-contract/get-deposit-balances.md\"\n\nA Decentralized Exchange (DEX) is an application that allows users to trade tokens (native & fungible tokens) through smart contracts.\n\n![dex](/docs/primitives/dex.png)\n\nIn brief, DEXs work by having [pools of token pairs](https://guide.ref.finance/products/overview/pooling) (e.g. NEAR-USDC) that users can deposit tokens into.\n\nThe ratio of the tokens in the pool determines the exchange rate for a swap. Indeed, swapping is adding tokens to one side of the pool while removing tokens from the other side of the pool.\n\n:::info\n\nThis docs refer to [Ref Finance](https://www.ref.finance/), a community built DEX in NEAR.\n\nPlease check their [docs](https://guide.ref.finance/developers-1/cli-trading) for more information.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1799, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "719512e8-e973-4bf2-be8e-d88ac2670c58": {"__data__": {"id_": "719512e8-e973-4bf2-be8e-d88ac2670c58", "embedding": null, "metadata": {"file_path": "./near_dist/dex.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dab82f69-404e-4103-b889-0b5aa1e20fee", "node_type": "4", "metadata": {}, "hash": "373d40e68067374c53a0b92c02fd58b70fe0c21dcaf0bf45ca71ec632fa8d38c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8aa8b977-d60a-404a-a8f6-5fff30c719a6", "node_type": "1", "metadata": {}, "hash": "1d6323835ef081ebf909ec67eec2cc1c2bf49c6cf821d44dfa7bec7d63b1e675", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "13aefc31-91e0-49dd-9b83-438307a3ae63", "node_type": "1", "metadata": {}, "hash": "1679f879b08876cdd0339f064798fe34de526d4d0aa701518d44638147113719", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Query Token Exchange Rate\nOne can query the exchange rate of a token pair by calling the `get-token-price` method on the DEX contract.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetPrice />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetPrice />\n  </TabItem>\n</Tabs>\n\n---\n\n## Query Whitelisted Tokens\nAnyone list tokens for sale in the DEX. This is why, in order to protect users, the DEX contract has a list of whitelisted tokens that can be traded.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    \n```bash\nnear view v2.ref-finance.near get_whitelisted_tokens\n```\n\n</TabItem>\n\n</Tabs>\n\n<details>\n\n<summary> Examples Response </summary>\n\n```bash\n  'wrap.near',\n  'usdt.tether-token.near',\n  'berryclub.ek.near',\n  'farm.berryclub.ek.near',\n  'token.v2.ref-finance.near',\n  'token.paras.near',\n  'marmaj.tkn.near',\n  'meta-pool.near',\n  ...\n```\n\n</details>\n\n---\n\n## Register in the DEX\nIn order to use the contract, make sure to register your account in the DEX by paying for the storage you will use in order to keep track of your balances.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    \n```bash\nnear call v2.ref-finance.near storage_deposit '' --accountId <account> --amount 0.1\n```\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Deposit funds\n\nIn order to swap tokens, one must first deposit tokens into the DEX. For this, you will need to transfer the FT you want to swap to the DEX contract.", "mimetype": "text/plain", "start_char_idx": 1801, "end_char_idx": 3327, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "13aefc31-91e0-49dd-9b83-438307a3ae63": {"__data__": {"id_": "13aefc31-91e0-49dd-9b83-438307a3ae63", "embedding": null, "metadata": {"file_path": "./near_dist/dex.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dab82f69-404e-4103-b889-0b5aa1e20fee", "node_type": "4", "metadata": {}, "hash": "373d40e68067374c53a0b92c02fd58b70fe0c21dcaf0bf45ca71ec632fa8d38c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "719512e8-e973-4bf2-be8e-d88ac2670c58", "node_type": "1", "metadata": {}, "hash": "2a8edef959c67c2809f05766130ca007537088e80304fb3f8ed0039d215bd79b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f98f4b3a-0032-4e35-a2ca-b20652e148ca", "node_type": "1", "metadata": {}, "hash": "939f19aa01c02870a6c7e8292b05ad2a57bee4a5ffcb05c6c141b108113cdb5a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    \n```bash\nnear call token.v2.ref-finance.near ft_transfer_call {\"receiver_id\": \"v2.ref-finance.near\", \"amount\": \"1000000000000\", \"msg\": \"\"} --gas 300000000000000 --depositYocto 1 --accountId <account>\n```\n\n</TabItem>\n\n</Tabs>\n\n:::danger\n\nDo **NOT** transfer **NEAR** tokens to Ref Finance. Instead, call `near_deposit` in the [`wrap.near`](https://nearblocks.io/address/wrap.near) contract, attaching the amount of NEAR you want to swap.\n\nThis will mint `wrap.near` for you, which you can then transfer to Ref Finance.\n\n:::\n\n---\n\n## Get Deposit Balances\n\nQuery your deposit balances by calling the `get_deposits` method:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetDepositBalances />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetDepositBalances />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIGetDepositBalances />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractGetDepositBalances />\n  </TabItem>\n</Tabs>\n\n---\n\n### Query Pools\n\nDEXs work by having multiple pools of token pairs (e.g. NEAR-USDC) that users can deposit tokens into.", "mimetype": "text/plain", "start_char_idx": 3329, "end_char_idx": 4568, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f98f4b3a-0032-4e35-a2ca-b20652e148ca": {"__data__": {"id_": "f98f4b3a-0032-4e35-a2ca-b20652e148ca", "embedding": null, "metadata": {"file_path": "./near_dist/dex.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dab82f69-404e-4103-b889-0b5aa1e20fee", "node_type": "4", "metadata": {}, "hash": "373d40e68067374c53a0b92c02fd58b70fe0c21dcaf0bf45ca71ec632fa8d38c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "13aefc31-91e0-49dd-9b83-438307a3ae63", "node_type": "1", "metadata": {}, "hash": "1679f879b08876cdd0339f064798fe34de526d4d0aa701518d44638147113719", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetPools />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetPools />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIGetPools />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractGetPools />\n  </TabItem>\n</Tabs>\n\n---\n\n## Swap tokens\nIn order to swap a token for another, you need to [have funds](#deposit-funds), and there needs to [**exist a pool**](#query-pools) that has **both tokens** on it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSSwap />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppSwap />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLISwap />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractSwap />\n  </TabItem>\n</Tabs>\n\n---\n\n## Additional Resources\n\n1. [Claim Fungible Tokens from Lockup](https://near.org/near/widget/ComponentDetailsPage?src=whtt.near/widget/Draft-0) - the example how to claim locked tokens from the `lockup.burrow.near` contract.\n2. [BSC Dex Collection](https://near.org/near/widget/ComponentDetailsPage?src=bluebiu.near/widget/Bsc.Swap.Dex) - the example of how to build simple swap page for a DEX.", "mimetype": "text/plain", "start_char_idx": 4570, "end_char_idx": 5900, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "56f04cb1-0605-46d6-8302-f1fc76859eda": {"__data__": {"id_": "56f04cb1-0605-46d6-8302-f1fc76859eda", "embedding": null, "metadata": {"file_path": "./near_dist/marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e", "node_type": "4", "metadata": {}, "hash": "c3d11d467739eb9e55266774d1682148707526b71ea56974a263181c65d38f04", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f6665a4-a446-457e-bf7c-98eaa134b705", "node_type": "1", "metadata": {}, "hash": "1e3ce5641de00a1989ba716422174f39fc080c548a88952b90294de6e201654e", "class_name": "RelatedNodeInfo"}}, "text": "# Marketplace Frontend\n\n[![Demo](https://img.shields.io/badge/Demo-Visit%20Demo-brightgreen)](https://marketplace-template.mintbase.xyz/)\n[![Deploy](https://img.shields.io/badge/Deploy-on%20Vercel-blue)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FMintbase%2Ftemplates%2Ftree%2Fmain%2Fmarketplace)\n\nUnlock Your NFT Storefront: Clone & Customize Your Path to Blockchain Success with this whitelabel marketplace template!\n\n![img](https://i.imgur.com/FjcUss9.png)\n\n:::tip Mintbase Templates\nThis is part of the [Mintbase Templates](https://templates.mintbase.xyz/), a collection of templates that you can use to scaffold your own project\n:::\n\n---\n\n## Project Walkthrough\n\nThis guide will take you step by step through the process of creating a basic marketplace frontend where you can purchase tokens and filter your selection by store. It uses [mintbase-js/data](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/data) for retrieving data and [mintbase-js/sdk](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/sdk) for executing marketplace methods on the [mintbase marketplace contract](https://github.com/Mintbase/mb-contracts/tree/main/mb-interop-market).\n\nThe mintbase-js/data package provides convenient functions for retrieving nft data from the mintbase indexer. In this example, you will be able to view and purchase NFTs from a specific nft contract.\n\nYou can find more information on Github: [GitHub link](https://github.com/Mintbase/mintbase-js/tree/beta/packages/data)\n\nA live demo of the marketplace can be found here: [Live demo link](https://marketplace-template.mintbase.xyz/)\n\n\n### Setup\n\n```bash\n# install dependencies\npnpm install\n\n#run the project\npnpm dev\n```\n\n<hr class=\"subsection\" />\n\n### Step 1: Connect Wallet\n\nBefore proceeding, it is important to have a wallet connection feature implemented in your application in order to interact with the contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1899, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9f6665a4-a446-457e-bf7c-98eaa134b705": {"__data__": {"id_": "9f6665a4-a446-457e-bf7c-98eaa134b705", "embedding": null, "metadata": {"file_path": "./near_dist/marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e", "node_type": "4", "metadata": {}, "hash": "c3d11d467739eb9e55266774d1682148707526b71ea56974a263181c65d38f04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "56f04cb1-0605-46d6-8302-f1fc76859eda", "node_type": "1", "metadata": {}, "hash": "dfbc22f8f896ce74c153ab1d301814ee08a5dc1369bec1c8064bc68bac0c81d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a906b09a-c555-4c7f-bde6-cd9d3405fc39", "node_type": "1", "metadata": {}, "hash": "2825a7f75b0742ad4790368e18bf1ad77a962a9d1915bad9bed9b29fed3bd2b7", "class_name": "RelatedNodeInfo"}}, "text": "To do this, you can check our guide [Wallet Connection Guide](https://docs.mintbase.xyz/dev/getting-started/add-wallet-connection-to-your-react-app).\n\n<hr class=\"subsection\" />\n\n### Step 2: Get NFTs from Store\n\nIn this example, we utilized react-query to manage the loading state when retrieving NFTs from the contract via the storeNfts method. This method returns all listed NFTs from the specified contract, allowing you to display them in the user interface.\n\n```ts\n// src/hooks/useStoreNfts.ts\nimport { useQuery } from 'react-query';\nimport { storeNfts } from '@mintbase-js/data';\n\nconst useStoreNfts = (store?: string) => {\n  const defaultStores = process.env.NEXT_PUBLIC_STORES || MAINNET_CONFIG.stores;\n  const formattedStores = defaultStores.split(/[ ,]+/);\n\n  const { isLoading, error, data } = useQuery(['storeNfts', store], () => storeNfts(store || formattedStores, true), {\n    retry: false,\n    refetchOnWindowFocus: false,\n    select: mapStoreNfts,\n  });\n\n  return { ...data, error, loading: isLoading };\n};\n\nexport { useStoreNfts };\n```\n\n<hr class=\"subsection\" />\n\n### Step 3: Get Store Data\n\nTo control the tabs, we need to retrieve store data using the storeData method. This method returns the data from the specified contract, enabling you to display it in the user interface.", "mimetype": "text/plain", "start_char_idx": 1900, "end_char_idx": 3195, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a906b09a-c555-4c7f-bde6-cd9d3405fc39": {"__data__": {"id_": "a906b09a-c555-4c7f-bde6-cd9d3405fc39", "embedding": null, "metadata": {"file_path": "./near_dist/marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e", "node_type": "4", "metadata": {}, "hash": "c3d11d467739eb9e55266774d1682148707526b71ea56974a263181c65d38f04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9f6665a4-a446-457e-bf7c-98eaa134b705", "node_type": "1", "metadata": {}, "hash": "1e3ce5641de00a1989ba716422174f39fc080c548a88952b90294de6e201654e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "03cd6271-0521-4214-8497-31c035e350f7", "node_type": "1", "metadata": {}, "hash": "d43d69da562c406820150defa3c988782bcfef441e96eb2c4ddf46249d89bfd2", "class_name": "RelatedNodeInfo"}}, "text": "```ts\n// src/hooks/useStoreData.ts\nimport { useQuery } from 'react-query';\nimport { storeData } from '@mintbase-js/data';\n\nconst useStoreData = () => {\n  const defaultStores = process.env.NEXT_PUBLIC_STORES || MAINNET_CONFIG.stores;\n  const formattedStores = defaultStores.split(/[ ,]+/);\n\n  const { isLoading, error, data } = useQuery('storeData', () => storeData(formattedStores), {\n    retry: false,\n    refetchOnWindowFocus: false,\n    select: mapStoreData,\n  });\n\n  return { ...data, error, loading: isLoading };\n};\n\nexport { useStoreData };\n\n```\n\n<hr class=\"subsection\" />\n\n### Step 4: Get Metadata from an NFT\n\nTo display NFT pricing information, available quantities, and other details in the user interface, it is necessary to access the NFT metadata using the metadataByMetadataId method.\n\n```ts\n// src/hooks/useMetadataByMetadataId.ts\nimport { useQuery } from 'react-query';\nimport { metadataByMetadataId } from '@mintbase-js/data';\n\nconst useMetadataByMetadataId = ({ metadataId }) => {\n  const { isLoading, data: metadata } = useQuery('metadataByMetadataId', () => metadataByMetadataId(metadataId), {\n    retry: false,\n    refetchOnWindowFocus: false,\n    select: mapMetadata,\n  });\n\n  return { ...metadata, isTokenListLoading: isLoading };\n};\n\nexport { useMetadataByMetadataId };\n```\n\n<hr class=\"subsection\" />\n\n### Step 5: Get Current NEAR Price\n\nTo obtain the current price of the NFT in USD, it is necessary to retrieve the current Near price. We accomplish this by using the nearPrice method.\n\n```ts\n// src/hooks/useNearPrice.ts\nimport { useEffect, useState } from 'react';\nimport { nearPrice } from '@mintbase-js/data';\n\nconst useNearPrice = () => {\n  const [nearPriceData, setNearPriceData] = useState('0');\n\n  useEffect(() => {\n    const getNearPrice = async () => {\n      const { data: priceData, error } = await nearPrice();\n      setNearPriceData(error ?", "mimetype": "text/plain", "start_char_idx": 3197, "end_char_idx": 5075, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "03cd6271-0521-4214-8497-31c035e350f7": {"__data__": {"id_": "03cd6271-0521-4214-8497-31c035e350f7", "embedding": null, "metadata": {"file_path": "./near_dist/marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e", "node_type": "4", "metadata": {}, "hash": "c3d11d467739eb9e55266774d1682148707526b71ea56974a263181c65d38f04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a906b09a-c555-4c7f-bde6-cd9d3405fc39", "node_type": "1", "metadata": {}, "hash": "2825a7f75b0742ad4790368e18bf1ad77a962a9d1915bad9bed9b29fed3bd2b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bdafcb12-d145-4dca-aa90-e8c17fe91e69", "node_type": "1", "metadata": {}, "hash": "6b2b810c7db8c6e58467553c9ac702a7a61bfd8b4668b630dbd6ec2a17d191d0", "class_name": "RelatedNodeInfo"}}, "text": "'0' : priceData);\n    };\n\n    getNearPrice();\n  }, []);\n\n  return nearPriceData;\n};\n\nexport { useNearPrice };\n```\n\n<hr class=\"subsection\" />\n\n### Step 6: Execute the Contract Call - Buy\n\nThe execute method accepts one or more contract call objects and executes them using a specified wallet instance. In this example, we need to use the execute method to execute the \"buy\" call, allowing the user to purchase the desired NFT.", "mimetype": "text/plain", "start_char_idx": 5076, "end_char_idx": 5501, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bdafcb12-d145-4dca-aa90-e8c17fe91e69": {"__data__": {"id_": "bdafcb12-d145-4dca-aa90-e8c17fe91e69", "embedding": null, "metadata": {"file_path": "./near_dist/marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e", "node_type": "4", "metadata": {}, "hash": "c3d11d467739eb9e55266774d1682148707526b71ea56974a263181c65d38f04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "03cd6271-0521-4214-8497-31c035e350f7", "node_type": "1", "metadata": {}, "hash": "d43d69da562c406820150defa3c988782bcfef441e96eb2c4ddf46249d89bfd2", "class_name": "RelatedNodeInfo"}}, "text": "```ts\nconst singleBuy = async () => {\n    const wallet = await selector.wallet();\n\n    if (tokenId) {\n      (await execute(\n        { wallet, callbackArgs: callback },\n        {\n          ...buy({\n            contractAddress: nftContractId,\n            tokenId,\n            affiliateAccount:\n              process.env.NEXT_PUBLIC_AFFILIATE_ACCOUNT ||\n              MAINNET_CONFIG.affiliate,\n            marketId,\n            price: nearToYocto(currentPrice?.toString()) || \"0\",\n          }),\n        }\n      )) as FinalExecutionOutcome;\n    }\n  };\n```\n\n---\n\n## Set ENV variables\n\nOnce that's done, copy the `.env.example` file in this directory to `.env.local` (which will be ignored by Git):\n\n```bash\ncp .env.example .env.local\n```\n\nif you use windows without powershell or cygwin:\n\n```bash\ncopy .env.example .env.local\n```\n\nTo get your `api key` visit :\n\n[Mintbase Developers Page for Mainnet](https://www.mintbase.xyz/developer):\n[Mintbase Developers Page for testnet](https://testnet.mintbase.xyz/developer):\n\n```\nNEXT_PUBLIC_DEVELOPER_KEY=your_mintbase_api_key\n```\n\n`NEXT_PUBLIC_NETWORK` could be `testnet` or `mainnet`\n\n```\nNEXT_PUBLIC_NETWORK=testnet\n```\n\n`NEXT_PUBLIC_STORES` is your store's ids\n\n```\nNEXT_PUBLIC_STORES=latium.mintspace2.testnet,mufasa.mintspace2.testnet\n```\n\n`NEXT_PUBLIC_AFFILIATE_ACCOUNT` is your near account where your should get your market fee\n\n```\nNEXT_PUBLIC_AFFILIATE_ACCOUNT=your_near_account.near\n```\n\n## Extending\n\nThis project is setup using Next.js + @mintbase/js\nYou can use this project as a reference to build your own, and use or remove any library you think it would suit your needs.\n\n:::info Get in touch\nYou can get in touch with the mintbase team using the following channels:\n\n- Support: [Join the Telegram](https://t.me/mintdev)\n- Twitter: [@mintbase](https://twitter.com/mintbase)\n:::", "mimetype": "text/plain", "start_char_idx": 5503, "end_char_idx": 7338, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5d70d0c5-6741-4ee3-be97-d7addad176a9": {"__data__": {"id_": "5d70d0c5-6741-4ee3-be97-d7addad176a9", "embedding": null, "metadata": {"file_path": "./near_dist/2024-06-28.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3606c75d-ab6b-4cdc-b888-b83b69f20226", "node_type": "4", "metadata": {}, "hash": "aa08085eb9af1091e7f14e9690b15bcadc6a90522715bdd39259ac4f0029cbf4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "281d4178-333a-4f7a-9530-2446cffd87af", "node_type": "1", "metadata": {}, "hash": "501dc3994ac3841f6f167d99754ff314e7f8cfe906b3f0eb4a37a9d6d1dc61aa", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: One place for all Smart Contracts Docs\nauthors: [gagdiez]\nslug: sdks-unified\ntags: [updates]\n---\n\n*We have consolidated all our documentation in a single section, so you don't need to go searching around for it*\n\n<p><img src=\"/assets/images/contracts-landing-5a9c76a78e71b0e5f9a96033f1f23d23.png\" /></p>\n\n<!-- truncate -->\n\nSmart contracts are small pieces of logic that can live on every NEAR account. To build a contract you use the NEAR SDKs, which comes in two flavours: Rust and JavaScript.\n\nUntil today, we had multiple docs explaining how to build smart contracts:\n- `/sdk/rust` dedicated to explain how to use the Rust SDK\n- `/sdk/js` dedicated to explain how to use the JS SDK\n- [`/build/smart-contracts/what-is`](/build/smart-contracts/what-is) - that explains general concepts, and how to implement them using both SDKs\n\nToday, this is over, as all the information on how to build smart contracts is located in a single area: [`/build/smart-contracts/what-is`](/build/smart-contracts/what-is).\n\nMeanwhile, we have transformed the [SDK page](/tools/sdk) to be a simple landing page with links to:\n- The [Rust SDK reference docs](https://docs.rs/near-sdk/latest/near_sdk/)\n- The [JS SDK reference docs](https://near.github.io/near-api-js/)\n- The [Smart Contract Section](/build/smart-contracts/what-is)\n\n## Why did we have 3 sections explaining the same topic?\n\nThe reason we had 3 different sections was that, historically, the engineers of each SDK were working on their own docs in isolation. To help mitigate this, we created a section on NEAR docs, meant to consolidate all the external documentation.\n\nOne day, the individual SDK pages were deleted - if I remember correctly, it was because we wanted to have fewer domains - and we had to migrate everything in a rush.\n\nThis left us in a very weird situation: we already had a section explaining how to build a smart contract... and now we had 3.\n\n## A single source of truth\n\nLuckily, this is now fixed!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1980, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "281d4178-333a-4f7a-9530-2446cffd87af": {"__data__": {"id_": "281d4178-333a-4f7a-9530-2446cffd87af", "embedding": null, "metadata": {"file_path": "./near_dist/2024-06-28.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3606c75d-ab6b-4cdc-b888-b83b69f20226", "node_type": "4", "metadata": {}, "hash": "aa08085eb9af1091e7f14e9690b15bcadc6a90522715bdd39259ac4f0029cbf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5d70d0c5-6741-4ee3-be97-d7addad176a9", "node_type": "1", "metadata": {}, "hash": "468ff14632748cbe4ed2cd6afa0529a933942cc511ae27ab60873dbeffa419b0", "class_name": "RelatedNodeInfo"}}, "text": "We have finally conquered the original dream of having a single section for [Smart Contracts](/build/smart-contracts/what-is), with all the information consolidated in there. \n\nNow, we can focus on maintaining a single section, thus making it easier to keep it updated and relevant.\n\n## What's next?\n\nWe are currently undergoing a process of **consolidating** all the documentation. This means that we are looking at all the sections that have overlapping information, and trying to merge them into a single place.\n\nThis will not only improve the quality of our docs, but also make it easier for you to find the information you need. In fact, improving search is one of the main motors of this change, since we noticed that our search tool ([Algolia](https://www.algolia.com/)) gets confused when the same concept is spread all over the place.\n\nMoreover, having consistent and coherent documentation will allow us to further expand our search capabilities using AI! This is something we are very excited about, as it will allow us to provide you with even more relevant information.\n\n## If you don't like this change, please let us know!\n\nAs always, we are more than open to feedback. If you think that this change is not good, or that we are missing something, please let us know! You can reach out to us through the blue feedback button you see at the side of the screen.\n\nWe are looking forward to hearing your thoughts and feedback, and hope you enjoy the content we'll be sharing.\n\nHappy coding, and see you in the next post! \ud83d\ude80", "mimetype": "text/plain", "start_char_idx": 1981, "end_char_idx": 3513, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7a8b4973-f29d-49c2-9640-756ba01cfcea": {"__data__": {"id_": "7a8b4973-f29d-49c2-9640-756ba01cfcea", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e5d5e03e-d97b-40b2-b87f-9487762d74fa", "node_type": "1", "metadata": {}, "hash": "424f0344b088bcb6649ba5f4800ed238aef41cdd92350f414b1fbcfb97346d9f", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: basics\ntitle: Blockchain basics\nsidebar_label: Blockchain basics\n---\n\nBefore diving deeper into the intricacies of Web 3 development, let\u2019s explore what it is and why it exists.\nFirst of all - what does number 3 mean? The World Wide Web, or Internet in general, has evolved through the years and can be loosely divided into the 3 \u201cgenerations\u201d:\n\n- Web 1.0 - the first generation, roughly from 1991 to 2004. At this time, the Internet was slow, expensive, and dominated by static web pages. Most people were content consumers, with only a handful of content creators who created and hosted sites. JavaScript was at its infancy, media was rarely seen (due to speed and cost), and social media hadn't been invented yet. The Internet was highly decentralized and open to anyone. Everyone ran their own server or used one of the numerous hosting providers. Open protocols and standards were used for everything - HTTP, HTML, FTP, SMTP.\n- Web 2.0 - the current generation, from around 2004 till now. A massive paradigm shift started to happen in the early 2000s. The Internet became faster and cheaper, and slowly but steadily spread into the lives of ordinary people. And as people trickled in, businesses followed. More and more services were offered through the web, like payments, shopping, and deliveries. Pages became more interactive and rich with media, but most importantly - users transitioned from just consuming content, to actively creating one. Social media boomed, smartphones were invented, and the web began its explosive growth we are still seeing to this day. \nAt present day, the Internet touches almost every aspect of modern life, but with all of its usefulness comes a darker side. As it grew, it became more and more centralized. While this centralization brought a number of benefits, there are a number of problems as well. Digital ownership is one of them. As digital assets became ubiquitous, it became apparent that users don't really own them. Instead, ownership remained with centralized companies.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2031, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e5d5e03e-d97b-40b2-b87f-9487762d74fa": {"__data__": {"id_": "e5d5e03e-d97b-40b2-b87f-9487762d74fa", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7a8b4973-f29d-49c2-9640-756ba01cfcea", "node_type": "1", "metadata": {}, "hash": "2bf7e22ef9fe542540afaaf40be87b8b2d243eac6611eb2242b76cd5bf8ac3bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b0cd85f-a162-4705-96a1-6a037788b466", "node_type": "1", "metadata": {}, "hash": "fdb24faef873049409be1661aefc18a2821f1f0bc7120993b9ed219c8011c250", "class_name": "RelatedNodeInfo"}}, "text": "Google can block access to your emails on Gmail any time it wants ([one example](https://www.businessinsider.com/terraria-google-youtube-gmail-play-2021-2)), or a game company can shut down a game server and destroy forever a game you once bought. \nAnother major problem is a loss of privacy. A new business model has emerged, where users \u201cpay\u201d for the services with their personal data. Social platforms ask us to share our personal information so they can feed us information we want to see. Once they have our attention they sell it to anyone who will buy it, effectively [harming society for financial gain](https://mitsloan.mit.edu/ideas-made-to-matter/social-media-broken-a-new-report-offers-25-ways-to-fix-it). \n- Web 3.0 - the next generation. It\u2019s still in its early stages, and no one knows for sure how it will evolve, but several key aspects can already be outlined:\n    - Focus on decentralization and privacy. Shift digital ownership from companies to users.\n    - Trustless and permissionless.\n    - Driven by the community through tokenomics and governance.\n\nIn this guide we\u2019ll demonstrate some of these Web3 principles in practice and show how to build an application, in which digital assets are decentralized and owned by users.\n\n## Building blocks of Web decentralization\n\nAs we already briefly discussed, the current Web is highly centralized, and mostly built using [client-server architecture](https://en.wikipedia.org/wiki/Client%E2%80%93server_model) on centralized servers hosted on one of the clouds (AWS, Azure, GCP, etc). According to one [report](https://www.statista.com/statistics/292840/distribution-global-cloud-and-non-cloud-traffic/), 90% of mobile traffic goes to the clouds, which means a significant portion of the Internet is basically controlled by a handful of companies. This consolidation of power has a number of downsides and this article on \"[Why Decentralization Matters](https://onezero.medium.com/why-decentralization-matters-5e3f79f7638e)\" does a good job explaining some of those problems.\n\nThe first decentralization revolution happened in file sharing, with the arrival of the (in)famous BitTorrent protocol.", "mimetype": "text/plain", "start_char_idx": 2032, "end_char_idx": 4195, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b0cd85f-a162-4705-96a1-6a037788b466": {"__data__": {"id_": "3b0cd85f-a162-4705-96a1-6a037788b466", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e5d5e03e-d97b-40b2-b87f-9487762d74fa", "node_type": "1", "metadata": {}, "hash": "424f0344b088bcb6649ba5f4800ed238aef41cdd92350f414b1fbcfb97346d9f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a83114f8-c47b-442c-99e0-f3b7eeaa0446", "node_type": "1", "metadata": {}, "hash": "e88a715fc23e039dd13b8c1be45876e7b2b24a81a54d295a0d8cfd03f879bee9", "class_name": "RelatedNodeInfo"}}, "text": "By being a p2p protocol, it\u2019s truly decentralized, and allows data to be stored distributedly without any central authority (and sometimes without consent of a central authority, which caused a lot of drama, but that\u2019s a story for another time). Ideas behind this protocol have been used in modern decentralized file storages like IPFS and FileCoin, we\u2019ll come back to this later and explore it in more details.\n\nThe next revolution happened in the world of finance. For a long time transferring money required a central authority (banks), which would monitor, approve and execute these transfers. This has changed when the first cryptocurrency - Bitcoin - appeared. As already mentioned BitTorrent protocol, it also uses p2p communication, but instead of files it operates a transaction ledger, which is stored as a blockchain. Blockchain structure is needed to ensure that stored ledger cannot be altered, and at the same time to incentivize storage of this data. Unlike BitTorrent, Bitcoin network participants are rewarded for their services using a process called \u201cmining\u201d. This created a foundation for a new form of currency - digital currency (or cryptocurrency), with a unique property that it doesn\u2019t need a central authority to function. Instead, users themselves maintain and operate it. And as with the previous decentralized system, BitTorrent, central authorities have issues with this.\n\nFollowing the success of Bitcoin, other cryptocurrencies started to appear. The most important one is Ethereum, which took the concept of blockchain one step further and adapted it to store not just a transactions leger, but any kind of data, and, most importantly code (which is just another form of data). Basically, it turned out we can use it as a decentralized database transaction log. And if we have data and code living in the decentralized database, the only thing we lack to build a decentralized application is an ability to execute this code. So Ethereum did just that, and a Smart Contract was born. Now, let's dive deeper into the world of blockchains, smart contracts, and explore how we can build decentralized applications with them.\n\n## Blockchain basics\n\nLet's start with a brief overview of what blockchain and smart contracts are.\n\nIn classical Web 2.0 applications, you need 2 things to build an application backend: a database to store data and a server to execute your code.", "mimetype": "text/plain", "start_char_idx": 4196, "end_char_idx": 6597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a83114f8-c47b-442c-99e0-f3b7eeaa0446": {"__data__": {"id_": "a83114f8-c47b-442c-99e0-f3b7eeaa0446", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b0cd85f-a162-4705-96a1-6a037788b466", "node_type": "1", "metadata": {}, "hash": "fdb24faef873049409be1661aefc18a2821f1f0bc7120993b9ed219c8011c250", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b232ab3f-ac45-4584-b068-8b2ebcefb319", "node_type": "1", "metadata": {}, "hash": "b23663141b0b7f964437549bd86f0bc9db8ba943f14ef324da5179132a19c449", "class_name": "RelatedNodeInfo"}}, "text": "The same is true for the Web 3.0, but instead of a database we have a blockchain, and instead of a server we have smart contracts.\n\nBlockchain itself is just a linked list (chain) of transactions. As a performance optimization, instead of linking individual transactions, they are grouped into blocks. Linking happens using hashes - each block contains the cryptographic hash of a previous block. Such a structure grants us an important property - we cannot modify an individual transaction inside a chain, since it would change its hash and invalidate all transactions after it. This makes it an ideal structure to store in a decentralized fashion, since everyone can quickly verify the integrity of a transaction on a chain (and of the entire chain).\n\n![image](/docs/assets/web3/web3-1.png)\n\nSince we can only add new transactions to the chain, it serves as a decentralized transaction log. And if we have a [transaction log](https://en.wikipedia.org/wiki/Transaction_log), we basically have our database. Another good mental model is to think about this as a decentralized [event sourcing pattern](https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing), where each transaction represents a separate event. \n\nDue to the distributed nature of a blockchain, that has no single server which would manage a blockchain, a [consensus mechanism](https://www.investopedia.com/terms/c/consensus-mechanism-cryptocurrency.asp) is used to add new blocks, synchronize data between machines, and incentivize network participation. Several consensus mechanisms exist, we\u2019ll discuss them in more detail later.\n\nIt\u2019s important to remember that every transaction on blockchain is publicly visible, so sensitive data should be encrypted beforehand.\n\nBut how do we put transactions into a blockchain? That\u2019s the purpose of a Blockchain Node. Everyone can set up their own node, connect to the p2p blockchain network, and post new transactions. Also, this node provides access to the current blockchain data.\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/web3--2.png\" alt=\"image\" width=\"440\" />\n</div>\n\nBlockchain transactions themselves can be of a different type; exact supported types depend on a specific blockchain network. In the first Blockchain network, the Bitcoin, which stored only a financial ledger, transactions were quite simple - mostly just transfers of funds between accounts.", "mimetype": "text/plain", "start_char_idx": 6598, "end_char_idx": 8999, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b232ab3f-ac45-4584-b068-8b2ebcefb319": {"__data__": {"id_": "b232ab3f-ac45-4584-b068-8b2ebcefb319", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a83114f8-c47b-442c-99e0-f3b7eeaa0446", "node_type": "1", "metadata": {}, "hash": "e88a715fc23e039dd13b8c1be45876e7b2b24a81a54d295a0d8cfd03f879bee9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495", "node_type": "1", "metadata": {}, "hash": "803935a77581e48b50137ebb71135aee50060e509489af75791c38d34c37197c", "class_name": "RelatedNodeInfo"}}, "text": "This works very well for decentralized financing (Bitcoin is still the most popular cryptocurrency), but if we want to build general-purpose decentralized applications (or dApps for short), we need something better. That's where smart contracts come into the stage.\n\nFor Web 2.0 developers, a good way to think about a smart contract is as a serverless function which runs on blockchain nodes, instead of a traditional cloud. However, It has a few important properties:\n\n- It is a pure function, which accepts the current state (which is stored on the blockchain) and caller-supplied arguments, and returns a modified state: _F(state, args)_ -> _state_. In practical terms, it means that we can\u2019t do any external (off-blockchain) calls from it - no API or DB server calls are allowed. The reason behind this is decentralization - different nodes on the network should be able to execute it and get the same result.\n- It\u2019s fully open-source. Everyone is able to view your code and check what it\u2019s doing.\n- It cannot be changed. Once deployed, code remains on the chain forever and cannot be altered. Different upgrade mechanisms are possible, but are chain-specific.\n\nSuch properties allow us to make analogies with real-world legal contracts - they cannot be changed (usually), they're predictable and they're publicly accessible for participants. Smart contracts are basically such contracts, or agreements, but instead of a human performing actions, they are represented as code.\n\nBut how do we deploy and execute them, if everything we can do is to create a transaction?  All we need are 2 specific types of transactions:\n\n- Deploy smart contract code, so it will be persisted in the blockchain, together with other data.\n- Call a smart contract with given arguments. As an outcome, a modified state will be returned.\n\nWhen a call transaction arrives on a node, it will read the contract's code and state from the blockchain, execute it, and put a modified state back on a chain (as a transaction).\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/web3-2.png\" alt=\"image\" width=\"440\" />\n</div>", "mimetype": "text/plain", "start_char_idx": 9000, "end_char_idx": 11097, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495": {"__data__": {"id_": "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b232ab3f-ac45-4584-b068-8b2ebcefb319", "node_type": "1", "metadata": {}, "hash": "b23663141b0b7f964437549bd86f0bc9db8ba943f14ef324da5179132a19c449", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b26440e4-151e-4be8-a3fb-d962dfa07735", "node_type": "1", "metadata": {}, "hash": "14ef370d3bf417ff48224d5e461c518099a13768b3c8328a065bf16ebba09164", "class_name": "RelatedNodeInfo"}}, "text": "So far we\u2019ve explored how the backend layer of a dApp looks like, but what about the client side? Since we are using an API to communicate, we can use any kind of a client we use in the Web 2.0 - web, mobile, desktop, and even other servers. However, an important distinction lies with users. \n\nIn a traditional Web 2.0 application, each server owns the identities of its users, and fully in control over who can and can\u2019t use its services. In blockchain, however, there are no such restrictions, and anyone can interact with it (there are [private blockchains](https://www.investopedia.com/terms/p/permissioned-blockchains.asp), but we\u2019ll leave them out of scope). \n\nBut how do we perform authentication if there is no standard login/registration process? Instead, we use public key cryptography, where a public key serves as a username, and a private key is a loose equivalent of a password. The major distinction is that instead of a login procedure, in which the server verifies the credentials and grants some form of an access token, here the users sign transactions with a private key. This means there's no classical Web 2 identity (like username, email, or an ID) available. This should be considered if you are building applications that require [KYC](https://en.wikipedia.org/wiki/Know_your_customer).\n\nAnother important implication of using private/public key pairs for auth, is that they cannot be easily memorized, like username/password pair. For this purpose, special applications called wallets are used. They store user\u2019s key pairs and can sign transactions or provide them for other applications.\n\n<div align=\"center\">\n<img src=\"/docs/assets/web3/web3-3.png\" alt=\"image\" width=\"440\" />\n</div>\n\n\nThe one aspect we haven\u2019t considered yet is infrastructure cost. In WEB 2.0, users pay for the provided service (directly with money or indirectly with their data, or both), and service providers pay for the infrastructure. \n\n\n    \n![image](/docs/assets/web3/web3-4.png)\n     \n\n\nIn a Web 3.0 model, users pay directly to the infrastructure provider (nodes running in the blockchain), bypassing the service provider.\n\n\n![image](/docs/assets/web3/web3-5.png)", "mimetype": "text/plain", "start_char_idx": 11100, "end_char_idx": 13270, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b26440e4-151e-4be8-a3fb-d962dfa07735": {"__data__": {"id_": "b26440e4-151e-4be8-a3fb-d962dfa07735", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495", "node_type": "1", "metadata": {}, "hash": "803935a77581e48b50137ebb71135aee50060e509489af75791c38d34c37197c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "134d560b-534b-4cf8-9aa4-db2ff51783fc", "node_type": "1", "metadata": {}, "hash": "18e5994c804bf129b29d7540a3ab8f4971f780a734bddc03756db6c55e42f3fd", "class_name": "RelatedNodeInfo"}}, "text": "This has huge implications:\n- Service providers can\u2019t shut down services or restrict their usage, since they are deployed on blockchain and can\u2019t be removed. This means the application will live forever (or at least while the blockchain network is alive).\n- A new monetization model should be used for such services, since users don\u2019t pay directly to service providers. For example, a fee can be coded into a smart contract for performing certain actions.\n- Since users should pay for the infrastructure, there\u2019s no free lunch (this is usually true for Web 2.0 as well, but it\u2019s often not obvious for ordinary users). Service providers can cover some cost or provide a credit to simplify onboarding, but ultimately users would have to pay.\n\nBut how do users pay? Since it\u2019s a blockchain, they can\u2019t pay directly with a credit card - in this way it will be tied to a central authority and not really decentralized. A solution is to use a decentralized currency - cryptocurrency. Each blockchain has its own currency, which is used for payments inside of it.\n \nWhenever a user wants to perform an action on a blockchain by calling a smart contract, it should always pay an infrastructure cost, and optionally a service cost to the service provider.\n\n\n![image](/docs/assets/web3/web3-6.png)\n    \n\n\nThis infrastructure cost, often called \u201cgas\u201d, usually consists of 2 parts:\n- Computational cost - to cover computational power needed to add a transaction into a blockchain.\n- Storage cost  - to cover additional storage requirements necessary for each transaction.\n\nHowever, the question still remains how users can obtain cryptocurrency tokens in the first place. One option is to buy it from other users who already own it by using traditional money or another cryptocurrency. There are exchanges which provide such kind of functionality, e.g. [Binance](https://www.binance.com/en). But this will work only if there is already an existing supply of tokens already in circulation. \n\nIn order to create and grow this supply the blockchain consensus mechanism is used. Earlier, we mentioned that it is used to incentivize blockchain network participation, but how exactly does it happen? Each node that processes transactions receives a reward for its work:\n\n\n```\nreward = infrastructureCostReward + coinbaseReward\n```", "mimetype": "text/plain", "start_char_idx": 13287, "end_char_idx": 15599, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "134d560b-534b-4cf8-9aa4-db2ff51783fc": {"__data__": {"id_": "134d560b-534b-4cf8-9aa4-db2ff51783fc", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b26440e4-151e-4be8-a3fb-d962dfa07735", "node_type": "1", "metadata": {}, "hash": "14ef370d3bf417ff48224d5e461c518099a13768b3c8328a065bf16ebba09164", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "79c62728-d909-47c3-93af-ac42a342421a", "node_type": "1", "metadata": {}, "hash": "338b81a5dd2f6b2d56a1f00405ecb6e7c7389ab68392cad3600460195bae8c8d", "class_name": "RelatedNodeInfo"}}, "text": "where:\n\n- `infrastructureCostReward` - share of infrastructure cost paid for the transactions by the users\n- `coinbaseReward` - new cryptocurrency token created specifically to reward processing nodes\n\nThis means each time a transaction is processed a small amount of cryptocurrency is created, so the amount of cryptocurrency in circulation grows over time (of course some amount of tokens should be created to bootstrap the network, e. g. by using [ICO](https://www.investopedia.com/terms/i/initial-coin-offering-ico.asp)).\n\nAt a present day, two consensus mechanisms are commonly used:\n- [Proof-of-work](https://www.investopedia.com/terms/p/proof-work.asp) - original consensus mechanism, which is currently used by Bitcoin and was used by Ethereum. It\u2019s highly criticized for its inefficiency -  processing of new transactions requires \u201cmining\u201d, which is a highly computationally intensive process. Because of this, graphic cards became an endangered species. Another disadvantage - cost of transactions is very high and processing speed is also quite slow.\n- [Proof-of-stake](https://www.investopedia.com/terms/p/proof-stake-pos.asp) - newer consensus mechanism, which doesn\u2019t require significant processing power (and graphic cards). Processing of transactions is usually called \u201cvalidation\u201d. Newer chains, like NEAR, use it. Ethereum switched to Proof-of-stake (PoS) mechanism in September 2022. Transactions are usually much cheaper and processing speed is faster.\n\nAt this point, we should have enough knowledge to proceed to the next chapter - choosing the best blockchain to build dApps.\n\n## Choosing the right blockchain\n\nThere are a lot of blockchains out there and it might be hard to choose the most suitable one for your needs. First of all, we should define the most important characteristics for a chain:\n\n- Consensus algorithm - by now Proof-of-work proved to be too inefficient and not suitable for high-scale applications. Proof-of-stake seems like a much better choice for now. Other alternatives exist, but they are less explored and tried in practice.\n- Transaction/Storage cost - cheaper cost directly benefits users (recall, that users will pay for it).\n- Transaction speed - faster transactions processing time means better user experience.\n- Scalability - whether a network is designed to support a large number of transactions.", "mimetype": "text/plain", "start_char_idx": 15602, "end_char_idx": 17958, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "79c62728-d909-47c3-93af-ac42a342421a": {"__data__": {"id_": "79c62728-d909-47c3-93af-ac42a342421a", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "134d560b-534b-4cf8-9aa4-db2ff51783fc", "node_type": "1", "metadata": {}, "hash": "18e5994c804bf129b29d7540a3ab8f4971f780a734bddc03756db6c55e42f3fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ef2019ac-2c5e-4dc4-8c57-03fbc2ab2717", "node_type": "1", "metadata": {}, "hash": "bbfa872bdf43349a1f2138a1540b2421098cd6f3bec71a8c7395eef0b25d9ff0", "class_name": "RelatedNodeInfo"}}, "text": "If not, transaction speed/cost may grow out of control over time. \n- Development experience - most importantly, what language we\u2019ll use to write our smart contracts. Ethereum popularized [Solidity](https://docs.soliditylang.org/en/v0.8.12/) as a programming language of choice for contracts. Several newer chains, like NEAR, chose Rust, which is a more mature general-purpose programming language.\n\nHistorically, the first blockchain to introduce smart contracts was Ethereum. However, as the number of users grew, transaction speed and cost skyrocketed, and it became apparent that it couldn't handle the demand. So, a number of [scaling solutions](https://ethereum.org/en/developers/docs/scaling/) appeared - [layer 2 chains](https://ethereum.org/en/developers/docs/scaling/#layer-2-scaling), [sidechains](https://ethereum.org/en/developers/docs/scaling/sidechains/), and [plasma chains](https://ethereum.org/en/developers/docs/scaling/plasma/). However, they all use some kind of workarounds with their own unique drawbacks. Ethereum tries to fix the core problem and redesign its network - like switching to a Proof-of-stake consensus, which is ongoing for quite a long time, but exact timeline when all of the problems will be fixed is very unclear.\n\nMeanwhile, a new generation of blockchains started to appear. They learned from the Ethereum mistakes, and designed them from ground-up to be fast, cheap and scalable. \nChoosing the right one is by no means an easy task, but for us we found the [NEAR](https://near.org/) blockchain to be an ideal solution, because of the following properties:\n- Transactions are cheap and very fast.\n- Designed to be extremely scalable from the beginning. This means we can count that transaction cost and speed will remain stable in the future.\n- Uses Proof-of-stake consensus mechanism - so no hated \u201cmining\u201d is needed.\n- Rust is used as a primary programming language.", "mimetype": "text/plain", "start_char_idx": 17959, "end_char_idx": 19870, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ef2019ac-2c5e-4dc4-8c57-03fbc2ab2717": {"__data__": {"id_": "ef2019ac-2c5e-4dc4-8c57-03fbc2ab2717", "embedding": null, "metadata": {"file_path": "./near_dist/blockchain.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618", "node_type": "4", "metadata": {}, "hash": "fecbdf49412ad9e251f313bcb43185448b1d94b11209d0d3bbb3a2d9178c1f5f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79c62728-d909-47c3-93af-ac42a342421a", "node_type": "1", "metadata": {}, "hash": "338b81a5dd2f6b2d56a1f00405ecb6e7c7389ab68392cad3600460195bae8c8d", "class_name": "RelatedNodeInfo"}}, "text": "Since it\u2019s [a popular language](https://insights.stackoverflow.com/survey/2021#most-popular-technologies-language-prof) (and [one of the most loved](https://insights.stackoverflow.com/survey/2021#most-loved-dreaded-and-wanted-language-love-dread)), it\u2019s much easier to learn and find developers on the market.\n\nAll of the further sections will use NEAR as an underlying blockchain, so before we jump into the intricacies of the Web 3.0 migration, we should take a closer look at it first.", "mimetype": "text/plain", "start_char_idx": 19871, "end_char_idx": 20359, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46ea7945-a51a-4df4-801c-e5472947879b": {"__data__": {"id_": "46ea7945-a51a-4df4-801c-e5472947879b", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "482b6b38-50a0-4051-9aa6-c4e19e849731", "node_type": "1", "metadata": {}, "hash": "39fead30c539d5b86f92541a8271be67ae7afd43867c8e3f2960974e0eea6574", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: minting\ntitle: Minting\nsidebar_label: Minting\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThis is the first of many tutorials in a series where you'll be creating a complete NFT smart contract from scratch that conforms with all the NEAR [NFT standards](https://nomicon.io/Standards/NonFungibleToken/). Today you'll learn how to create the logic needed to mint NFTs and have them show up in your NEAR wallet. You will be modifying a bare-bones [skeleton smart contract](/tutorials/nfts/js/skeleton) by filling in the necessary code snippets needed to add minting functionalities.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 672, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "482b6b38-50a0-4051-9aa6-c4e19e849731": {"__data__": {"id_": "482b6b38-50a0-4051-9aa6-c4e19e849731", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46ea7945-a51a-4df4-801c-e5472947879b", "node_type": "1", "metadata": {}, "hash": "c8adae7bc69a4ade9f197bc57722d09424501de1de71e4d312a9dd6283b1f20f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6af8334d-5c10-47eb-b958-01245c642045", "node_type": "1", "metadata": {}, "hash": "cc7404f3c559d3d76fd1035c5090cb69388516d61560ad49d8f69113c4de7085", "class_name": "RelatedNodeInfo"}}, "text": "## Introduction\n\nTo get started, switch to the `1.skeleton` branch in our repo. If you haven't cloned the repository, refer to the [Contract Architecture](/tutorials/nfts/js/skeleton) to get started.\n\n```\ngit checkout 1.skeleton\n```\n\nIf you wish to see the finished code for the minting portion of the tutorial, that can be found on the `2.minting` branch.\n\n## Modifications to the skeleton contract {#what-does-minting-mean}\n\nIn order to implement the logic needed for minting, we should break it up into smaller tasks and handle those one-by-one. Let's step back and think about the best way to do this by asking ourselves a simple question: what does it mean to mint an NFT?\n\nTo mint a non-fungible token, in the most simple way possible, a contract needs to be able to associate a token with an owner on the blockchain. This means you'll need:\n\n- A way to keep track of tokens and other information on the contract.\n- A way to store information for each token such as `metadata` (more on that later).\n- A way to link a token with an owner.\n\nThat's it! We've now broken down the larger problem into some smaller, less daunting, subtasks. Let's start by tackling the first and work our way through the rest.\n\n### Storing information on the contract {#storing-information}\n\nStart by navigating to `nft-contract/src/index.ts` and filling in some of the code blocks.\nYou need to be able to store important information on the contract such as the list of tokens that an account has.\n\n\nThe first thing to do is add the information to the contract class.\n\n<Github language=\"js\" start=\"16\" end=\"22\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/index.ts\" />\n\nThis allows you to get the information stored in these data structures from anywhere in the contract. The code above has created 3 token specific storages:\n\n- **tokensPerOwner**: allows you to keep track of the tokens owned by any account. It will map the account address to a set of token ID strings owned by that account.\n- **tokensById**: returns all the information about a specific token.", "mimetype": "text/plain", "start_char_idx": 677, "end_char_idx": 2764, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6af8334d-5c10-47eb-b958-01245c642045": {"__data__": {"id_": "6af8334d-5c10-47eb-b958-01245c642045", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "482b6b38-50a0-4051-9aa6-c4e19e849731", "node_type": "1", "metadata": {}, "hash": "39fead30c539d5b86f92541a8271be67ae7afd43867c8e3f2960974e0eea6574", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "95388119-7e42-4422-b586-42508c229656", "node_type": "1", "metadata": {}, "hash": "cd6641b89f94778fa75262c7a18b613065095f727f6dbcad9e010f946b3830a5", "class_name": "RelatedNodeInfo"}}, "text": "It will map a token ID string to a `Token` object. \n- **tokenMetadataById**: returns just the metadata for a specific token. It wil map a token ID string to a `TokenMetadata` object.\n\nIn addition, you'll keep track of the owner of the contract as well as the metadata for the contract.\n\n#### Constructor Function\n\nNext, you'll add the logic to the constructor function. This function needs to be invoked when you first deploy the contract. It will initialize all the contract's fields that you've defined above with default values.\nWe've added the `ownerId` and `metadata` fields as parameters to the function because those are the only ones that can be customized.\n\nThis function will default all the collections to be empty and set the `owner` and `metadata` equal to what you pass in.\n\n<Github language=\"js\" start=\"24\" end=\"43\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/index.ts\" />\n\nMore often than not when doing development, you'll need to deploy contracts several times. You can imagine that it might get tedious to have to pass in metadata every single time you want to initialize the contract. For this reason, the metadata has been defaulted with some initial data if it wasn't passed in by the user.\n\n### Metadata and token information {#metadata-and-token-info}\n\nNow that you've defined what information to store on the contract itself and you've defined some ways to initialize the contract, you need to define what information should go in the `Token`, `TokenMetadata`, and `NFTContractMetadata` data types.\n\nLet's switch over to the `nft-contract/src/metadata.ts` file as this is where that information will go. If you look at the [standards for metadata](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata), you'll find all the necessary information that you need to store for both `TokenMetadata` and `NFTContractMetadata`. Simply fill in the following code.\n\n<Github language=\"js\" start=\"12\" end=\"104\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/metadata.ts\" />\n\nThis now leaves you with the `Token` struct and something called a `JsonToken`.", "mimetype": "text/plain", "start_char_idx": 2765, "end_char_idx": 4922, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "95388119-7e42-4422-b586-42508c229656": {"__data__": {"id_": "95388119-7e42-4422-b586-42508c229656", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6af8334d-5c10-47eb-b958-01245c642045", "node_type": "1", "metadata": {}, "hash": "cc7404f3c559d3d76fd1035c5090cb69388516d61560ad49d8f69113c4de7085", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "76dd3788-7d2a-4673-b311-5db7ff85af10", "node_type": "1", "metadata": {}, "hash": "0fa4387cf3319d8b865108090440aa1c13bbebf143d0ddf606f45c6f7f2673ad", "class_name": "RelatedNodeInfo"}}, "text": "The `Token` struct will hold all the information directly related to the token excluding the metadata. The metadata, if you remember, is stored in a map on the contract in a data structured called `tokenMetadataById`. This allows you to quickly get the metadata for any token by simply passing in the token's ID.\n\nFor the `Token` struct, you'll just keep track of the owner for now.\n\n<Github language=\"js\" start=\"106\" end=\"117\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/metadata.ts\" />\n\nThe purpose of the `JsonToken` is to hold all the information for an NFT that you want to send back as JSON whenever someone does a view call. This means you'll want to store the owner, token ID, and metadata.\n\n<Github language=\"js\" start=\"119\" end=\"141\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/metadata.ts\" />\n\n:::tip\nSome of you might be thinking _\"how come we don't just store all the information in the `Token` struct?\"_.\nThe reason behind this is that it's actually more efficient to construct the JSON token on the fly only when you need it rather than storing all the information in the token struct.\nIn addition, some operations might only need the metadata for a token and so having the metadata in a separate data structure is more optimal.\n:::\n\n#### Function for querying contract metadata\n\nNow that you've defined some of the types that were used in the previous section, let's move on and create the first view function `internalNftMetadata`. This will allow users to query for the contract's metadata as per the [metadata standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata).\n\n<Github language=\"js\" start=\"143\" end=\"150\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/metadata.ts\" />\n\nThis function will get the `metadata` object from the contract which is of type `NFTContractMetadata` and will return it.\n\nJust like that, you've completed the first two tasks and are ready to move onto last part of the tutorial.", "mimetype": "text/plain", "start_char_idx": 4923, "end_char_idx": 6987, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "76dd3788-7d2a-4673-b311-5db7ff85af10": {"__data__": {"id_": "76dd3788-7d2a-4673-b311-5db7ff85af10", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "95388119-7e42-4422-b586-42508c229656", "node_type": "1", "metadata": {}, "hash": "cd6641b89f94778fa75262c7a18b613065095f727f6dbcad9e010f946b3830a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86d51033-008e-4449-ac1b-48243989061f", "node_type": "1", "metadata": {}, "hash": "bf770f11231279901a2aec8073eeb80cc93e03ca27c939bddd9133d74d23f00e", "class_name": "RelatedNodeInfo"}}, "text": "### Minting Logic {#minting-logic}\n\nNow that all the information and types are defined, let's start brainstorming how the minting logic will play out. In the end, you need to link a `Token` and `TokenId` to a specific owner. Let's look back at a couple data structures that might be useful:\n\n```ts\n//keeps track of all the token IDs for a given account\ntokensPerOwner: LookupMap<AccountId, UnorderedSet<TokenId>>;\n\n//keeps track of the token struct for a given token ID\ntokensById: LookupMap<TokenId, Token>;\n\n//keeps track of the token metadata for a given token ID\ntokenMetadataById: UnorderedMap<TokenId, TokenMetadata>;\n```\n\nLooking at these data structures, you could do the following:\n\n- Add the token ID into the set of tokens that the receiver owns. This will be done on the `tokensPerOwner` field.\n- Create a token object and map the token ID to that token object in the `tokensById` field.\n- Map the token ID to it's metadata using the `tokenMetadataById`.\n\nWith those steps outlined, it's important to take into consideration the storage costs of minting NFTs. Since you're adding bytes to the contract by creating entries in the data structures, the contract needs to cover the storage costs. If you just made it so any user could go and mint an NFT for free, that system could easily be abused and users could essentially \"drain\" the contract of all it's funds by minting thousands of NFTs. For this reason, you'll make it so that users need to attach a deposit to the call to cover the cost of storage. You'll measure the initial storage usage before anything was added and you'll measure the final storage usage after all the logic is finished. Then you'll make sure that the user has attached enough $NEAR to cover that cost and refund them if they've attached too much.\n\nNow that you've got a good understanding of how everything should play out, let's fill in the necessary code.", "mimetype": "text/plain", "start_char_idx": 6989, "end_char_idx": 8886, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86d51033-008e-4449-ac1b-48243989061f": {"__data__": {"id_": "86d51033-008e-4449-ac1b-48243989061f", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "76dd3788-7d2a-4673-b311-5db7ff85af10", "node_type": "1", "metadata": {}, "hash": "0fa4387cf3319d8b865108090440aa1c13bbebf143d0ddf606f45c6f7f2673ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee6121cb-9f6e-4e07-91c6-eb8c188d828c", "node_type": "1", "metadata": {}, "hash": "cf8d31bb9bbad0e8ef085c0ff1030b6e157d00b33492a5cc4ff2e7d329d375fa", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"7\" end=\"44\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/mint.ts\" />\n\nYou'll notice that we're using some internal methods such as `refundDeposit` and `internalAddTokenToOwner`. We've described the function of `refundDeposit` and as for `internalAddTokenToOwner`, this will add a token to the set of tokens an account owns for the contract's `tokensPerOwner` data structure. You can create these functions in a file called `internal.ts`. Go ahead and create the file. Your new contract architecture should look as follows:\n\n```\nnft-contract\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 approval.ts\n    \u251c\u2500\u2500 enumeration.ts\n    \u251c\u2500\u2500 internal.ts\n    \u251c\u2500\u2500 lib.ts\n    \u251c\u2500\u2500 metadata.ts\n    \u251c\u2500\u2500 mint.ts\n    \u251c\u2500\u2500 nft_core.ts\n    \u2514\u2500\u2500 royalty.ts\n```\n\nAdd the following to your newly created `internal.ts` file.\n\n<Github language=\"js\" start=\"1\" end=\"54\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/internal.ts\" />\n\nAt this point, the core logic is all in place so that you can mint NFTs. You can use the function `nft_mint` which takes the following parameters:\n\n- **token_id**: the ID of the token you're minting (as a string).\n- **metadata**: the metadata for the token that you're minting (of type `TokenMetadata` which is found in the `metadata.ts` file).\n- **receiver_id**: specifies who the owner of the token will be.\n\nBehind the scenes, the function will:\n\n1. Call the internal mint function.\n2. Calculate the initial storage before adding anything to the contract\n3. Create a `Token` object with the owner ID\n4. Link the token ID to the newly created token object by inserting them into the `tokensById` field.\n5. Link the token ID to the passed in metadata by inserting them into the `tokenMetadataById` field.\n6. Add the token ID to the list of tokens that the owner owns by calling the `internalAddTokenToOwner` function.\n7.", "mimetype": "text/plain", "start_char_idx": 8888, "end_char_idx": 10791, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ee6121cb-9f6e-4e07-91c6-eb8c188d828c": {"__data__": {"id_": "ee6121cb-9f6e-4e07-91c6-eb8c188d828c", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "86d51033-008e-4449-ac1b-48243989061f", "node_type": "1", "metadata": {}, "hash": "bf770f11231279901a2aec8073eeb80cc93e03ca27c939bddd9133d74d23f00e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf", "node_type": "1", "metadata": {}, "hash": "24fd5decce2fa700dbc968328c5ac4f27fbea72e55c6874bb6bb8bf3ae0fba6d", "class_name": "RelatedNodeInfo"}}, "text": "Calculate the final and net storage to make sure that the user has attached enough NEAR to the call in order to cover those costs.\n\n### Querying for token information\n\nIf you were to go ahead and deploy this contract, initialize it, and mint an NFT, you would have no way of knowing or querying for the information about the token you just minted. Let's quickly add a way to query for the information of a specific NFT. You'll move to the `nft-contract/src/nft_core.ts` file and edit the `internalNftToken` function.\n\nIt will take a token ID as a parameter and return the information for that token. The `JsonToken` contains the token ID, the owner ID, and the token's metadata.\n\n<Github language=\"js\" start=\"10\" end=\"35\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/nft_core.ts\" />\n\nWith that finished, it's finally time to build and deploy the contract so you can mint your first NFT.\n\n## Interacting with the contract on-chain\n\nNow that the logic for minting is complete and you've added a way to query for information about specific tokens, it's time to build and deploy your contract to the blockchain.\n\n### Deploying the contract {#deploy-the-contract}\n\nWe've included a very simple way to build the smart contracts throughout this tutorial using `yarn`. The following command will build the contract and copy over the `.wasm` file to a folder `build/nft.wasm`.\n\n```bash\nyarn build:nft\n```\n\nFor deployment, you will need a NEAR account with the keys stored on your local machine. Navigate to the [NEAR wallet](https://testnet.mynearwallet.com//) site and create an account.\n\n:::info\nPlease ensure that you deploy the contract to an account with no pre-existing contracts. It's easiest to simply create a new account or create a sub-account for this tutorial.\n:::\n\nLog in to your newly created account with `near-cli` by running the following command in your terminal.", "mimetype": "text/plain", "start_char_idx": 10792, "end_char_idx": 12706, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf": {"__data__": {"id_": "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee6121cb-9f6e-4e07-91c6-eb8c188d828c", "node_type": "1", "metadata": {}, "hash": "cf8d31bb9bbad0e8ef085c0ff1030b6e157d00b33492a5cc4ff2e7d329d375fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c33f9b9e-c68d-4e74-9889-f7d72abb18cf", "node_type": "1", "metadata": {}, "hash": "e888b16739cada7e8254f71395243773e0eaf6eeea38ee67298d9210ae87f078", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near login --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account import-account using-web-wallet network-config testnet\n  ```\n  </TabItem>\n</Tabs>\n\nTo make this tutorial easier to copy/paste, we're going to set an environment variable for your account ID. In the command below, replace `YOUR_ACCOUNT_NAME` with the account name you just logged in with including the `.testnet` portion:\n\n```bash\nexport NFT_CONTRACT_ID=\"YOUR_ACCOUNT_NAME\"\n```\n\nTest that the environment variable is set correctly by running:\n\n```bash\necho $NFT_CONTRACT_ID\n```\n\nVerify that the correct account ID is printed in the terminal. If everything looks correct you can now deploy your contract.\nIn the root of your NFT project run the following command to deploy your smart contract.\n\n```bash\ncargo near deploy $NFT_CONTRACT_ID\n```\n\nAt this point, the contract should have been deployed to your account and you're ready to move onto testing and minting NFTs.\n\n### Initializing the contract {#initialize-contract}\n\nThe very first thing you need to do once the contract has been deployed is to initialize it. For simplicity, let's call the default metadata initialization function you wrote earlier so that you don't have to type the metadata manually in the CLI.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID init '{\"owner_id\": \"'$NFT_CONTRACT_ID'\"}' --accountId $NFT_CONTRACT_ID\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT_ID init json-args '{\"owner_id\": \"'$NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou've just initialized the contract with some default metadata and set your account ID as the owner.", "mimetype": "text/plain", "start_char_idx": 12708, "end_char_idx": 14692, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c33f9b9e-c68d-4e74-9889-f7d72abb18cf": {"__data__": {"id_": "c33f9b9e-c68d-4e74-9889-f7d72abb18cf", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf", "node_type": "1", "metadata": {}, "hash": "24fd5decce2fa700dbc968328c5ac4f27fbea72e55c6874bb6bb8bf3ae0fba6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c6db6af-a0fd-48cc-9238-22aedc44f448", "node_type": "1", "metadata": {}, "hash": "c6028ca0a2572b4cc063bc860fa8d6ab626f76fe988efa38bf05780514eef5c2", "class_name": "RelatedNodeInfo"}}, "text": "At this point, you're ready to call your first view function.\n\n### Viewing the contract's metadata\n\nNow that the contract has been initialized, you can call some of the functions you wrote earlier. More specifically, let's test out the function that returns the contract's metadata:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $NFT_CONTRACT_ID nft_metadata\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $NFT_CONTRACT_ID nft_metadata json-args '{}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```bash\n{ spec: 'nft-1.0.0', name: 'NFT Tutorial Contract', symbol: 'GOTEAM' }\n```\n\nAt this point, you're ready to move on and mint your first NFT.\n\n### Minting our first NFT {#minting-our-first-nft}\n\nLet's now call the minting function that you've created. This requires a `token_id` and `metadata`. If you look back at the `TokenMetadata` struct you created earlier, there are many fields that could potentially be stored on-chain:\n\n<Github language=\"js\" start=\"91\" end=\"102\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/metadata.ts\" />\n\nLet's mint an NFT with a title, description, and media to start. The media field can be any URL pointing to a media file. We've got an excellent GIF to mint but if you'd like to mint a custom NFT, simply replace our media link with one of your choosing. If you run the following command, it will mint an NFT with the following parameters:\n\n- **token_id**: \"token-1\"\n- **metadata**:\n  - _title_: \"My Non Fungible Team Token\"\n  - _description_: \"The Team Most Certainly Goes :)\"\n  - _media_: `https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.", "mimetype": "text/plain", "start_char_idx": 14693, "end_char_idx": 16510, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8c6db6af-a0fd-48cc-9238-22aedc44f448": {"__data__": {"id_": "8c6db6af-a0fd-48cc-9238-22aedc44f448", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c33f9b9e-c68d-4e74-9889-f7d72abb18cf", "node_type": "1", "metadata": {}, "hash": "e888b16739cada7e8254f71395243773e0eaf6eeea38ee67298d9210ae87f078", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4b871c72-e07d-4798-8ed8-523619e4ce35", "node_type": "1", "metadata": {}, "hash": "98f1c903a9cf83e5ca7f1605fcf1f6e4fea45c3a7068201110d84353d7c8488b", "class_name": "RelatedNodeInfo"}}, "text": "ipfs.dweb.link/goteam-gif.gif`\n- **receiver_id**: \"'$NFT_CONTRACT_ID'\"\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"token_id\": \"token-1\", \"metadata\": {\"title\": \"My Non Fungible Team Token\", \"description\": \"The Team Most Certainly Goes :)\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$NFT_CONTRACT_ID'\"}' --accountId $NFT_CONTRACT_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"token_id\": \"token-1\", \"metadata\": {\"title\": \"My Non Fungible Team Token\", \"description\": \"The Team Most Certainly Goes :)\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n:::info\nThe `amount` flag is specifying how much NEAR to attach to the call. Since you need to pay for storage, 0.1 NEAR is attached and you'll get refunded any excess that is unused at the end.\n:::\n\n### Viewing information about the NFT\n\nNow that the NFT has been minted, you can check and see if everything went correctly by calling the `nft_token` function.", "mimetype": "text/plain", "start_char_idx": 16510, "end_char_idx": 17960, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4b871c72-e07d-4798-8ed8-523619e4ce35": {"__data__": {"id_": "4b871c72-e07d-4798-8ed8-523619e4ce35", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8c6db6af-a0fd-48cc-9238-22aedc44f448", "node_type": "1", "metadata": {}, "hash": "c6028ca0a2572b4cc063bc860fa8d6ab626f76fe988efa38bf05780514eef5c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "367574ac-7dac-49af-a258-9e6f714bc7f4", "node_type": "1", "metadata": {}, "hash": "a0175fda38df2a7eb6659d977c16c275420717831b0f1c464aff1c7df374dfa0", "class_name": "RelatedNodeInfo"}}, "text": "This should return a `JsonToken` which should contain the `token_id`, `owner_id`, and `metadata`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $NFT_CONTRACT_ID nft_token '{\"token_id\": \"token-1\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $NFT_CONTRACT_ID nft_tokens_for_owner json-args '{\"token_id\": \"token-1\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```bash\n{\n  token_id: 'token-1',\n  owner_id: 'goteam.examples.testnet',\n  metadata: {\n    title: 'My Non Fungible Team Token',\n    description: 'The Team Most Certainly Goes :)',\n    media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif'\n  }\n}\n```\n\n</p>\n</details>\n\n**Go team!** You've now verified that everything works correctly and it's time to view your freshly minted NFT in the NEAR wallet's collectibles tab!\n\n## Viewing your NFTs in the wallet\n\nIf you navigate to the [collectibles tab](https://testnet.mynearwallet.com//?tab=collectibles) in the NEAR wallet, this should list all the NFTs that you own. Currently, It should be empty.\n\nWe've got a problem. The wallet correctly picked up that you minted an NFT, however, the contract doesn't implement the specific view function that is being called. Behind the scenes, the wallet is trying to call `nft_tokens_for_owner` to get a list of all the NFTs owned by your account on the contract. The only function you've created, however, is the `nft_token` function.", "mimetype": "text/plain", "start_char_idx": 17961, "end_char_idx": 19574, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "367574ac-7dac-49af-a258-9e6f714bc7f4": {"__data__": {"id_": "367574ac-7dac-49af-a258-9e6f714bc7f4", "embedding": null, "metadata": {"file_path": "./near_dist/2-minting.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff1f269-d283-4ab6-9e89-452993dee542", "node_type": "4", "metadata": {}, "hash": "4e7316e6d5290f1c8c1a459d8baab7fbfb0de5ace33d03241cacff3e3746892d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4b871c72-e07d-4798-8ed8-523619e4ce35", "node_type": "1", "metadata": {}, "hash": "98f1c903a9cf83e5ca7f1605fcf1f6e4fea45c3a7068201110d84353d7c8488b", "class_name": "RelatedNodeInfo"}}, "text": "It wouldn't be very efficient for the wallet to call `nft_token` for every single NFT that a user has to get information and so they try to call the `nft_tokens_for_owner` function instead.\n\nIn the next tutorial, you'll learn about how to deploy a patch fix to a pre-existing contract so that you can view the NFT in the wallet.\n\n## Conclusion\n\nIn this tutorial, you went through the basics of setting up and understand the logic behind minting NFTs on the blockchain using a skeleton contract.\n\nYou first looked at [what it means](#what-does-minting-mean) to mint NFTs and how to break down the problem into more feasible chunks. You then started modifying the skeleton contract chunk by chunk starting with solving the problem of [storing information / state](#storing-information) on the contract. You then looked at what to put in the [metadata and token information](#metadata-and-token-info). Finally, you looked at the logic necessary for [minting NFTs](#minting-logic).\n\nAfter the contract was written, it was time to deploy to the blockchain. You [deployed the contract](#deploy-the-contract) and [initialized it](#initialize-contract). Finally, you [minted your very first NFT](#minting-our-first-nft) and saw that some changes are needed before you can view it in the wallet.\n\n## Next Steps\n\nIn the [next tutorial](/tutorials/nfts/js/upgrade-contract), you'll find out how to deploy a patch fix and what that means so that you can view your NFTs in the wallet.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Metadata standard: [NEP177](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata), version `2.1.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 19575, "end_char_idx": 21398, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0fdb1951-753e-4363-bc09-c75013a8347d": {"__data__": {"id_": "0fdb1951-753e-4363-bc09-c75013a8347d", "embedding": null, "metadata": {"file_path": "./near_dist/README.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0e30745d-6a13-449f-b2ff-49111dd11593", "node_type": "4", "metadata": {}, "hash": "f42ba9614e527dc6b3cf2d1c0499b2cec474eeb51854f51f7da61afe33514711", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4da4460e-ba0d-4870-bfb6-d1189eb3e273", "node_type": "1", "metadata": {}, "hash": "dd7177dbf73559d59fd67262df9123596160d255ec40b2932d622365bc848669", "class_name": "RelatedNodeInfo"}}, "text": "<br />\n<br />\n\n<p align=\"center\">\n<img src=\"website/static/docs/assets/near_logo.png\" width=\"240\">\n</p>\n\n<br />\n<br />\n\n## NEAR Protocol - scalable and usable blockchain\n\n[![Discord](https://img.shields.io/discord/490367152054992913.svg)](http://near.chat)\n[![CI](https://github.com/near/docs/actions/workflows/build-docs.yml/badge.svg)](https://github.com/near/docs/actions/workflows/build-docs.yml)\n\nThis is the repository for the official documentation of NEAR Protocol, a user-friendly and carbon-neutral blockchain, built from the ground up to be performant, secure, and infinitely scalable.\n\n## Quick start\n\nCheck out the following links\n\n- Deployed, live documentation: https://docs.near.org\n- Example applications: https://github.com/near-examples\n- Community chat: https://near.chat\n\n## Contributing\n\nNEAR uses [Docusaurus](https://docusaurus.io) for documentation.  Please refer to their documentation for details on major structural contributions to the documentation.\n\nFor simple content changes you have 2 options\n\n- [Submit an issue](https://github.com/near/docs/issues)\n- [Submit a pull request](https://github.com/near/docs/pulls) *(we prefer PRs of course)*\n\n### The instant PR\n\nThis is the fastest way to submit content changes directly from the page where you notice a mistake.\n\n1. Open any page in the docs on https://docs.near.org\n2. Click the `[ Edit ]` button at the top right hand side of _every_ content page\n3. Make your edits to the document that opens in GitHub by clicking the \u270e (pencil) icon\n4. Submit a PR with your changes and comments for context\n\n### The typical PR\n\nThis is the standard fork-branch-commit workflow for submitting pull requests to open source repositories\n\n1. Fork this repo to your own GitHub account (or just clone it directly if you are currently a member of NEAR)\n\n2. Open your editor to the _top level repo folder_ to view the directory structure as seen below\n\n3.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1920, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4da4460e-ba0d-4870-bfb6-d1189eb3e273": {"__data__": {"id_": "4da4460e-ba0d-4870-bfb6-d1189eb3e273", "embedding": null, "metadata": {"file_path": "./near_dist/README.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0e30745d-6a13-449f-b2ff-49111dd11593", "node_type": "4", "metadata": {}, "hash": "f42ba9614e527dc6b3cf2d1c0499b2cec474eeb51854f51f7da61afe33514711", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0fdb1951-753e-4363-bc09-c75013a8347d", "node_type": "1", "metadata": {}, "hash": "8cab31f92b8f40a29cf9977e48fea3416c8f7ddc68ea99bb83c9af828640dc2a", "class_name": "RelatedNodeInfo"}}, "text": "Move into the `/website` folder where you will run the following commands:\n\n   - Make sure all the dependencies for the website are installed:\n\n     ```sh\n     # Install dependencies\n     yarn\n     ```\n\n   - Run the local docs development server\n\n      ```sh\n      # Start the site\n      yarn start\n      ```\n\n      _Expected Output_\n\n      ```sh\n      # Website with live reload is started\n      LiveReload server started on port 35729\n      Docusaurus server started on port 3000\n      ```\n\n      The website for docs will open your browser locally to port `3000`\n\n4. Make changes to the docs\n\n5. Observe those changes reflected in the local docs\n\n6. Submit a pull request with your changes - **[Please check for broken links before opening PR \ud83d\ude4f](#check-for-broken-links)**\n\n## Directory Structure\n\nYour project file structure should look something like this with a few key files and folders highlighted\n\n```\n\u251c\u2500\u2500 CODE_OF_CONDUCT.md\n\u251c\u2500\u2500 CONTRIBUTING.md\n\u251c\u2500\u2500 LICENSE-APACHE.txt\n\u251c\u2500\u2500 LICENSE-MIT.txt\n\u251c\u2500\u2500 README.md             <-- the document you are reading right now\n\u251c\u2500\u2500 docs                  <-- all the content for the site is in this folder as markdown files\n\u2514\u2500\u2500 website\n    \u251c\u2500\u2500 build\n    \u251c\u2500\u2500 core\n    \u251c\u2500\u2500 i18n\n    \u251c\u2500\u2500 package.json\n    \u251c\u2500\u2500 pages\n    \u251c\u2500\u2500 sidebars.js     <-- rarely used for changing left-hand-side page navigation\n    \u251c\u2500\u2500 docusaurus.config.js     <-- rarely used for general site configuration (including header links)\n    \u251c\u2500\u2500 static\n    \u2514\u2500\u2500 test-links.sh     <-- always used to test links before submitting changes\n```\n\n## Found a broken link?\n\nFor broken links internal to the docs, please submit an issue or PR request as per above.\n\nIf you found a broken link from a Google search, please request to remove it from their index here: https://www.google.com/webmasters/tools/removals\n\n## Check for broken links\n\nBefore opening a pull request, please check for broken links:\n\n```bash\nyarn test\n```\n\nor id you are in the `./website` directory:\n\n```bash\nyarn full-test\n```", "mimetype": "text/plain", "start_char_idx": 1921, "end_char_idx": 3910, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1a8d1f33-39e2-490d-a9dc-59d3d08606c7": {"__data__": {"id_": "1a8d1f33-39e2-490d-a9dc-59d3d08606c7", "embedding": null, "metadata": {"file_path": "./near_dist/maintenance-windows.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1abc05dc-1511-4dbd-942d-33d9743e447e", "node_type": "4", "metadata": {}, "hash": "fe6e32fb69cfa50f553f7e2ca4733f6bb93aef73cae002acebcb959d588f8531", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f1adcaba-78f7-470a-8120-b262d074c3d5", "node_type": "1", "metadata": {}, "hash": "a01435e151767c8bb23f2fadc9cde7d3e566650417b47b7904e2605dd5259e1b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: maintenance-windows\ntitle: Maintenance Windows\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to query future maintenance windows for a specific validator in current epoch\n\n---\n\n## Maintenance windows {#maintenance-windows}\n\n> The maintenance windows for a specific validator are future block height ranges in current epoch, in which the validator does not need produce block or chunk\n> If the provided account is not a validator, then it will return the range from now to the end of the epoch.\n\n\n- method: `EXPERIMENTAL_maintenance_windows`\n- params:\n  - `account_id`\n\n\nexample:\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_maintenance_windows\",\n  \"params\": {\n    \"account_id\": \"node0\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_maintenance_windows \\\n  params:='{\n    \"account_id\": \"node0\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response:</summary>\n<p>\nThe result will be a list of future maintenance windows in current epoch.\nFor example a window `[1028, 1031]` includes 1028, 1029 and 1030.\n\n```json\n{\n    \"jsonrpc\": \"2.0\",\n    \"result\": [\n        [\n            1028,\n            1031\n        ],\n        [\n            1034,\n            1038\n        ],\n    ],\n    \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1846, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f1adcaba-78f7-470a-8120-b262d074c3d5": {"__data__": {"id_": "f1adcaba-78f7-470a-8120-b262d074c3d5", "embedding": null, "metadata": {"file_path": "./near_dist/maintenance-windows.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1abc05dc-1511-4dbd-942d-33d9743e447e", "node_type": "4", "metadata": {}, "hash": "fe6e32fb69cfa50f553f7e2ca4733f6bb93aef73cae002acebcb959d588f8531", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a8d1f33-39e2-490d-a9dc-59d3d08606c7", "node_type": "1", "metadata": {}, "hash": "4d46e784dd646d12a5cf3c61824c53197e68075be02905c525620d7408da6963", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\nHere is the exhaustive list of the error variants that can be returned by `maintenance_windows` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>", "mimetype": "text/plain", "start_char_idx": 1849, "end_char_idx": 2937, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7ff7be06-871f-475f-9a7f-5f9365eb2035": {"__data__": {"id_": "7ff7be06-871f-475f-9a7f-5f9365eb2035", "embedding": null, "metadata": {"file_path": "./near_dist/near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d", "node_type": "4", "metadata": {}, "hash": "0efed51640886ff2ab78e09eb0d80cf96c1d777ae9905fba77cd24c2ea11a293", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3b055d1-74ff-4f68-a0d2-8ce623ca8882", "node_type": "1", "metadata": {}, "hash": "8a9c0ee9a59a1b8a308152f6caeef5ee78df312e07fbe3d9c6b17b6c0dabe201", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: near\ntitle: Interacting with Near\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nThe components can use the `Near` object to interact with smart contracts in the NEAR blockchain. There are three methods:\n\n- [`Near.view`](#nearview)\n- [`Near.block`](#nearblock)\n- [`Near.call`](#nearcall)\n\n---\n\n## Near.view\nQueries a read-only method from a NEAR smart contract, returning:\n- **`null`**: If the query is still being processed\n- **`undefined`**: If the query is complete and no value was returned by the contract\n- A **value**: If the query is complete and a value was returned by the contract\n\n<WidgetEditor>\n\n```js\nconst greeting = Near.view(\"hello.near-examples.testnet\", \"get_greeting\", {});\n\nif (greeting === null) return \"Loading...\";\n\nreturn `The contract says: ${greeting}`;\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param              | required     | type            | description                                                                                                                    |\n|--------------------|--------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------|\n| `contractName`     | **required** | string          | Name of the smart contract                                                                                                     |\n| `methodName`       | **required** | string          | Name of the method to call                                                                                                     |\n| `args`             | _optional_   | object instance | Arguments to pass to the method                                                                                                |\n| `blockId/finality` | _optional_   | string          | Block ID or finality of the transaction                                                                                        |\n| `subscribe`        | _optional_   | boolean         | This feature allows users to subscribe to a query, which automatically refreshes the data for all subscribers every 5 seconds. |\n\n</details>\n\n:::tip\nNotice that the optional parameter `subscribe` allows users to subscribe to a query, which automatically refreshes the data every 5 seconds.\n:::\n\n<hr className=\"subsection\" />\n\n#### Avoiding a Common Pitfall\n\nIf you want to initialize the state with the result of a `Near.view` call, be sure to check first that the value was obtained, to avoid initializing the state with `null`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2655, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3b055d1-74ff-4f68-a0d2-8ce623ca8882": {"__data__": {"id_": "b3b055d1-74ff-4f68-a0d2-8ce623ca8882", "embedding": null, "metadata": {"file_path": "./near_dist/near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d", "node_type": "4", "metadata": {}, "hash": "0efed51640886ff2ab78e09eb0d80cf96c1d777ae9905fba77cd24c2ea11a293", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7ff7be06-871f-475f-9a7f-5f9365eb2035", "node_type": "1", "metadata": {}, "hash": "71e00be95c6968f239cfce4a53b65655136727d95cfe5901ab36c2bd9f75337a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "086ecdcf-2a9c-4548-b7c6-95f66ede7470", "node_type": "1", "metadata": {}, "hash": "bd05dd41c190a7af62e929958dbac742cd6615d8145c79b4ef8a71ba37ddaabb", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor>\n\n```js\nconst contractGreet = Near.view(\"hello.near-examples.testnet\", \"get_greeting\", {});\n\n// you need to first check that the value was obtained\nif (contractGreet === null) return \"Loading...\";\n\nconst [greeting, setGreeting] = useState(contractGreet);\n\nreturn `The contract says: ${greeting}`;\n```\n\n</WidgetEditor>\n\nIf you don't want to delay the render of your component, you can also use the `useEffect` hook to control the value returned by `Near.view`\n\n<WidgetEditor>\n\n```js\nconst contractGreet = Near.view('hello.near-examples.testnet', 'get_greeting');\n\nconst [greeting, setGreeting] = useState('Loading ...');\n\nuseEffect(() => {\n  if (contractGreet !== null) setGreeting(contractGreet);\n}, [contractGreet]);\n\nreturn `The contract says: ${greeting}`;\n```\n\n</WidgetEditor>\n\n---\n\n## Near.call\n\nCalls a smart contract method from the blockchain. Since a transaction needs to be signed, the user must be logged in in order to make the call.\n\n<WidgetEditor>\n\n```js\nif (!context.accountId) return \"Please login...\";\n\nconst onClick = () => {\n  Near.call(\n    \"hello.near-examples.testnet\",\n    \"set_greeting\",\n    { greeting: \"Hello!\"", "mimetype": "text/plain", "start_char_idx": 2657, "end_char_idx": 3807, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "086ecdcf-2a9c-4548-b7c6-95f66ede7470": {"__data__": {"id_": "086ecdcf-2a9c-4548-b7c6-95f66ede7470", "embedding": null, "metadata": {"file_path": "./near_dist/near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d", "node_type": "4", "metadata": {}, "hash": "0efed51640886ff2ab78e09eb0d80cf96c1d777ae9905fba77cd24c2ea11a293", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3b055d1-74ff-4f68-a0d2-8ce623ca8882", "node_type": "1", "metadata": {}, "hash": "8a9c0ee9a59a1b8a308152f6caeef5ee78df312e07fbe3d9c6b17b6c0dabe201", "class_name": "RelatedNodeInfo"}}, "text": "}\n  );\n};\n\nreturn <>\n  <h5> Hello {context.accountId} </h5>\n  <button onClick={onClick}> Set Greeting </button>\n</>;\n```\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param          | required     | type            | description                                                                 |\n|----------------|--------------|-----------------|-----------------------------------------------------------------------------|\n| `contractName` | **required** | string          | Name of the smart contract to call                                          |\n| `methodName`   | **required** | string          | Name of the method to call on the smart contract                            |\n| `args`         | _optional_   | object instance | Arguments to pass to the smart contract method as an object instance        |\n| `gas`          | _optional_   | string / number | Maximum amount of gas to be used for the transaction (default 300Tg)        |\n| `deposit`      | _optional_   | string / number | Amount of NEAR tokens to attach to the call as deposit (in yoctoNEAR units) |\n\n</details>\n\n:::tip\nRemember that you can login using the `Login` button at the navigation bar.\n:::\n\n---\n\n## Near.block\n\nQueries a block from the blockchain.\n\n<WidgetEditor height=\"40px\">\n\n```js\nreturn Near.block(\"optimistic\");\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param                   | required   | type | description                                                                                                                                       |\n|-------------------------|------------|------|---------------------------------------------------------------------------------------------------------------------------------------------------|\n| `blockHeightOrFinality` | _optional_ | any  | The block height or finality level to use for the blockchain query (desired block height, or one of the following strings: `optimistic`, `final`) |\n\n- desired block height: The height of the specific block to query, expressed as a positive integer\n- `optimistic`: Uses the latest block recorded on the node that responded to your query (< 1 second delay)\n- `final`: a block that has been validated on at least 66% of the nodes in the network (approx. 2s)\n\n</details>", "mimetype": "text/plain", "start_char_idx": 3808, "end_char_idx": 6124, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1af3f33e-202a-4559-840d-0ceca2b7a76e": {"__data__": {"id_": "1af3f33e-202a-4559-840d-0ceca2b7a76e", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-18.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5", "node_type": "4", "metadata": {}, "hash": "3ae49cc41b39ba8bcbc2b5f48786857235ab39b225b37ca27ea7e158b2cf19b4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b816ffc8-ecd8-401e-abd4-60a17bb20c7a", "node_type": "1", "metadata": {}, "hash": "5a9c5cea837e0487ef1590096f6e5d43a372140eda4bd82981ef759fb28cef62", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: An update on the near.org / RPC outage on July 11, 2024\nauthors: [ewiner]\nslug: 2024-07-11-near-org-outage\ntags: [updates, postmortems]\nhide_table_of_contents: true\n---\n\nFrom Thursday, July 11 to Saturday, July 13, many visitors to [near.org](https://near.org) and its subdomains (like [dev.near.org](https://dev.near.org) and [docs.near.org](https://docs.near.org/)) were unable to reach those websites. Also, NEAR applications that rely on [RPC services](https://docs.near.org/api/rpc/providers) hosted on near.org were affected. This was due to a security incident followed by an outage from one of our vendors, Squarespace. During this period, the NEAR protocol & blockchain was unaffected by this incident, as it does not rely on any centralized services.\n\n<!-- truncate -->\n\n### Our Use of Squarespace DNS\n\nThe near.org domain is operated by [Pagoda](https://www.pagoda.co/), an engineering arm of the NEAR Foundation. An important part of operating a domain like near.org is choosing a DNS provider; to learn more about DNS and how it operates, please see [this introduction](https://www.cloudflare.com/learning/dns/what-is-dns/). For years, we happily used Google\u2019s domain name registration & DNS service to manage near.org, as part of our broad usage of Google Cloud services. In June 2023, Google announced it had [sold its Domains business to Squarespace](https://support.google.com/domains/answer/13689670?hl=en), and that our account would be transitioned to Squarespace \u201cin the next few months.\u201d We expected that the new service from Squarespace would closely match the feature set, reliability, and security we had enjoyed while using Google Domains, and if there were any problems then we could easily switch from Squarespace to another DNS provider after the transition.\n\nOur first domain, near.wiki, was automatically moved over to Squarespace in May 2024. As we explored the new offering, our Security & IT teams quickly had concerns about the feature set, security controls, and level of enterprise support we could get from Squarespace.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2068, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b816ffc8-ecd8-401e-abd4-60a17bb20c7a": {"__data__": {"id_": "b816ffc8-ecd8-401e-abd4-60a17bb20c7a", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-18.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5", "node_type": "4", "metadata": {}, "hash": "3ae49cc41b39ba8bcbc2b5f48786857235ab39b225b37ca27ea7e158b2cf19b4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1af3f33e-202a-4559-840d-0ceca2b7a76e", "node_type": "1", "metadata": {}, "hash": "b6da43e1976e426e3cea4636989a259c883a78cc3d1cbed84c8c26e832f13378", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5ca62ec5-9f02-43aa-8a56-193b27e98481", "node_type": "1", "metadata": {}, "hash": "a742d4ce2a4bf1a4d7f40fec28f07f217da1654e5693f2a4a17ea16138da583e", "class_name": "RelatedNodeInfo"}}, "text": "After some meetings with Squarespace sales and support failed to assuage our concerns, we decided to explore other DNS providers and to start migrating our domains off of Squarespace, starting with the \u2018simpler\u2019 ones and ending with near.org, our most complex and important domain name. As of last week, when this incident began, we had not yet begun migrating near.org to our new provider, Amazon Web Services, so it was still using Squarespace as its DNS provider.", "mimetype": "text/plain", "start_char_idx": 2069, "end_char_idx": 2535, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5ca62ec5-9f02-43aa-8a56-193b27e98481": {"__data__": {"id_": "5ca62ec5-9f02-43aa-8a56-193b27e98481", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-18.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5", "node_type": "4", "metadata": {}, "hash": "3ae49cc41b39ba8bcbc2b5f48786857235ab39b225b37ca27ea7e158b2cf19b4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b816ffc8-ecd8-401e-abd4-60a17bb20c7a", "node_type": "1", "metadata": {}, "hash": "5a9c5cea837e0487ef1590096f6e5d43a372140eda4bd82981ef759fb28cef62", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "16dc2907-662c-4f15-a7b0-9345fed61a86", "node_type": "1", "metadata": {}, "hash": "17ae73d5558b4464bb4951c74cdda359f0faccf46371432b96ddcd48b8ddb26c", "class_name": "RelatedNodeInfo"}}, "text": "### The Squarespace Security Incident\n\nUnbeknownst to us, Squarespace had a major security vulnerability. You can read about the problem in [this in-depth blog post from Security Alliance](https://securityalliance.notion.site/A-Squarespace-Retrospective-or-How-to-Coordinate-an-Industry-Wide-Incident-Response-fead693b66c14543a48283d85aec19ad). In short, when each domain was migrated from Google to Squarespace, all existing users on the Google Domains account were sent an email inviting them to create a new Squarespace account. But not everybody clicked on that email right away \u2013 some people, e.g. managers or our accounting team, only needed to log into the DNS service rarely or in emergencies. From what we can tell, all the attacker needed to do was identify one of those email addresses and sign up for a new Squarespace account using that email address, and they would be instantly granted full access to change or delete DNS entries for near.org. From our investigation, Squarespace did not require the attacker to verify ownership of the email address before letting them have full control on our account. In fact, we see no evidence that Squarespace even sent a \u201cwelcome\u201d email to that address upon account creation, which might have raised warning flags.\n\nOn July 11, an attacker gained access to our Squarespace account. They deleted the DNS entries for near.org and its subdomains, causing the outage described above. But unlike some other domains affected by this attack, the impact on near.org seems limited to an outage; we have seen no evidence that the attacker put in place an \u2018imposter\u2019 site to try and phish or scam users.\n\nThrough a combination of our actions and Squarespace\u2019s actions behind the scenes, we were able to quickly regain control of the account. However, due to other issues with Squarespace, it took another two days for near.org and its subdomains and services to get fully back online.", "mimetype": "text/plain", "start_char_idx": 2538, "end_char_idx": 4466, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "16dc2907-662c-4f15-a7b0-9345fed61a86": {"__data__": {"id_": "16dc2907-662c-4f15-a7b0-9345fed61a86", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-18.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5", "node_type": "4", "metadata": {}, "hash": "3ae49cc41b39ba8bcbc2b5f48786857235ab39b225b37ca27ea7e158b2cf19b4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5ca62ec5-9f02-43aa-8a56-193b27e98481", "node_type": "1", "metadata": {}, "hash": "a742d4ce2a4bf1a4d7f40fec28f07f217da1654e5693f2a4a17ea16138da583e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97e01569-cfba-4cf1-a30a-18208b13f294", "node_type": "1", "metadata": {}, "hash": "0d7803d258d1fb31c8522d6f9205c73e4c35d8a65b7b0af3daa84dbb3b40234b", "class_name": "RelatedNodeInfo"}}, "text": "### The Squarespace Outage\n\nEven with full and exclusive access to our Squarespace, we were unable to restore service on near.org. The attacker had deleted our DNS entries, and when we re-added them, Squarespace failed to propagate those new entries to other DNS providers around the world. We attempted to quickly execute a switch to Amazon Web Service\u2019s DNS provider, but the feature to switch to a different DNS service was also broken on the Squarespace site.\n\nThe next morning, on Friday July 12, on a hunch we deleted and re-added all of our DNS entries once again. This time, it did take effect and DNS providers around the world quickly saw the new information. That resolved the outage for many users, but not for everyone. near.org had been set up with an additional security feature, DNSSEC, in which Squarespace was supposed to digitally sign our DNS entries to prove that the entries had not been forged by another DNS provider. But Squarespace wasn\u2019t properly updating and signing new DNSSEC entries, so any other DNS provider that validates DNSSEC was detecting near.org\u2019s DNS entries as a forgery and refusing to allow access to near.org. This affected [approximately 34% of users](https://stats.labs.apnic.net/dnssec), especially in Europe. There is a button on the Squarespace site to turn off DNSSEC, but unsurprisingly, that button also just showed an error message.\n\nFinally, on Saturday July 13, we were able to make contact with a specialist on the Squarespace team, and later that day they were able to fix the DNSSEC issue. Once that change propagated to other DNS providers around the world over the next few hours, near.org and the RPC service was restored for everyone.\n\n\n### Reflections on this Incident\n\nYou may have noticed that we made a few assumptions in this blog post, saying \u201cfrom what we can tell\u201d and \u201cwe see no evidence of\u2026\u201d a few times. Ideally, almost a week after the incident began, we would have more hard truths and solid information about what happened.\n\nUnfortunately, we\u2019ve seen little to no communication from Squarespace throughout this period.", "mimetype": "text/plain", "start_char_idx": 4469, "end_char_idx": 6564, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97e01569-cfba-4cf1-a30a-18208b13f294": {"__data__": {"id_": "97e01569-cfba-4cf1-a30a-18208b13f294", "embedding": null, "metadata": {"file_path": "./near_dist/2024-07-18.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5", "node_type": "4", "metadata": {}, "hash": "3ae49cc41b39ba8bcbc2b5f48786857235ab39b225b37ca27ea7e158b2cf19b4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16dc2907-662c-4f15-a7b0-9345fed61a86", "node_type": "1", "metadata": {}, "hash": "17ae73d5558b4464bb4951c74cdda359f0faccf46371432b96ddcd48b8ddb26c", "class_name": "RelatedNodeInfo"}}, "text": "We tried multiple support tickets, chat, personal contacts, LinkedIn messages, and going through our Google support team, and still didn\u2019t hear anything back from Squarespace until late on Friday July 12, about 36 hours after the incident began. Other affected companies also reported total silence from the Squarespace team. As far as we know, Squarespace has still not acknowledged this incident publicly, let alone shared details of the issue and how they remediated it, and their [status page](https://status.squarespace.com/) showed no outages or issues during this time.\n\nI personally find this lack of support, communication, and forthrightness to be unacceptable for any service provider. I\u2019m also somewhat disappointed in Google for transitioning a security-critical service to a new provider without proper vetting. We are accelerating our plans to move near.org and other domains out of Squarespace to Amazon Web Services\u2019s domain registrar and DNS provider, which has a great track record of reliability and security.\n\nDNS is a core part of internet infrastructure, but it\u2019s far from a perfect system. Every domain name owner must rely on one centralized DNS provider to maintain their DNS entries, and every user and application must rely on one or more centralized DNS providers to look up entries as they navigate the internet. Various projects in the blockchain industry have created non-custodial on-chain alternatives to DNS, such as [Unstoppable Domains](https://unstoppabledomains.com/) and [3DNS](https://3dns.box/) (FYI: neither have sponsored or were made aware of this post), but the existing DNS system is so entrenched that adoption has been a challenge. Hopefully as an industry we can make headway on a more decentralized, trustless open web before further incidents like this happen.\n\nI\u2019m deeply sorry to anyone affected by this outage, especially people exploring NEAR for the first time during the EthCC conference and EthGlobal hackathon. We will be more vigilant about using high-quality vendor services going forward \u2013 and, where possible, moving to decentralized on-chain solutions.\n\n-Eric Winer<br />\nCTO & Managing Director, Pagoda", "mimetype": "text/plain", "start_char_idx": 6565, "end_char_idx": 8733, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ecf4fde2-de90-4022-9297-cb438c2aaea6": {"__data__": {"id_": "ecf4fde2-de90-4022-9297-cb438c2aaea6", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2765120f-652c-40f3-9b46-e6aac60cf7af", "node_type": "1", "metadata": {}, "hash": "20e1ea83c34d6968732e2a6af7d19feba72c85341c8b4561fc9133dfa9720143", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: network\ntitle: Network\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to query status information for nodes and validators.\n\n---\n\n## Node Status {#node-status}\n\n> Returns general status of a given node (sync status, nearcore node version, protocol version, etc), and the current set of validators.\n\n- method: `status`\n- params: `[]`\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"status\",\n  \"params\": []\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.status();\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=status params:='[]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"version\": {\n      \"version\": \"1.14.0-rc.1\",\n      \"build\": \"effa3b7a-modified\"\n    },\n    \"chain_id\": \"testnet\",\n    \"protocol_version\": 35,\n    \"latest_protocol_version\": 35,\n    \"rpc_addr\": \"0.0.0.0:3030\",\n    \"validators\": [\n      {\n        \"account_id\": \"node3\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"node0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"staked.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"01node.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"node2\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1572, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2765120f-652c-40f3-9b46-e6aac60cf7af": {"__data__": {"id_": "2765120f-652c-40f3-9b46-e6aac60cf7af", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ecf4fde2-de90-4022-9297-cb438c2aaea6", "node_type": "1", "metadata": {}, "hash": "e0823523534d708e11d075843271bca5abfe74f599a0a553a9e3e2483d2cdc4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d422d79c-94a8-4722-9d5f-f101c15c3f97", "node_type": "1", "metadata": {}, "hash": "33c003a04d3544b61a2e382af0da9c09c594e35dacae60715b095d1782971e1e", "class_name": "RelatedNodeInfo"}}, "text": "\"is_slashed\": false\n      },\n      {\n        \"account_id\": \"dokia.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"node1\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"lowfeevalidation.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"sl1sub.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"zainy.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"chorus-one.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"thepassivetrust.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"certusone.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"joe1.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"bisontrails.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"valeraverim.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"lunanova.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"bazilik.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"dsrvlabs.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"kronos.pool.f863973.m0\",\n        \"is_slashed\": false\n      },", "mimetype": "text/plain", "start_char_idx": 1581, "end_char_idx": 3024, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d422d79c-94a8-4722-9d5f-f101c15c3f97": {"__data__": {"id_": "d422d79c-94a8-4722-9d5f-f101c15c3f97", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2765120f-652c-40f3-9b46-e6aac60cf7af", "node_type": "1", "metadata": {}, "hash": "20e1ea83c34d6968732e2a6af7d19feba72c85341c8b4561fc9133dfa9720143", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe519d2f-6b22-4403-8d6a-9b6596554606", "node_type": "1", "metadata": {}, "hash": "70c13432e2224c3987fda5bf6493c0c046976280ed48334440a6e38486b9953b", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"account_id\": \"nodeasy.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"kytzu.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"bitcat.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"pool_easy2stake.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"fresh_lockup.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"staking-power.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"syncnode.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"inotel.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"zpool.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"aquarius.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"cloudpost.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"staked.pool.6fb1358\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"moonlet.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"jazza.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"orangeclub.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"blazenet.pool.", "mimetype": "text/plain", "start_char_idx": 3031, "end_char_idx": 4494, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe519d2f-6b22-4403-8d6a-9b6596554606": {"__data__": {"id_": "fe519d2f-6b22-4403-8d6a-9b6596554606", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d422d79c-94a8-4722-9d5f-f101c15c3f97", "node_type": "1", "metadata": {}, "hash": "33c003a04d3544b61a2e382af0da9c09c594e35dacae60715b095d1782971e1e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd", "node_type": "1", "metadata": {}, "hash": "05acccafbb62239f7784573b33e94ccd7c509b6a01d4f9925ed611a90bd7b0ce", "class_name": "RelatedNodeInfo"}}, "text": "f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"pathrock.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"stakin.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"northernlights.stakingpool\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"alexandruast.pool.f863973.m0\",\n        \"is_slashed\": false\n      },\n      {\n        \"account_id\": \"top.pool.f863973.m0\",\n        \"is_slashed\": false\n      }\n    ],\n    \"sync_info\": {\n      \"latest_block_hash\": \"44kieHwr7Gg5r72V3DgU7cpgV2aySkk5qbBCdvwens8T\",\n      \"latest_block_height\": 17774278,\n      \"latest_state_root\": \"3MD3fQqnm3JYa9UQgenEJsR6UHoWuHV4Tpr4hZY7QwfY\",\n      \"latest_block_time\": \"2020-09-27T23:59:38.008063088Z\",\n      \"syncing\": false\n    },\n    \"validator_account_id\": \"nearup-node8\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 4494, "end_char_idx": 5779, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd": {"__data__": {"id_": "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe519d2f-6b22-4403-8d6a-9b6596554606", "node_type": "1", "metadata": {}, "hash": "70c13432e2224c3987fda5bf6493c0c046976280ed48334440a6e38486b9953b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "237c4945-1d4e-4323-bb75-61855015b4ae", "node_type": "1", "metadata": {}, "hash": "5405881e2e2e6678972ed227b24435875fee08a41954068d3d67ff26d81e02b9", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `status` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Network Info {#network-info}\n\n> Returns the current state of node network connections (active peers, transmitted data, etc.)", "mimetype": "text/plain", "start_char_idx": 5782, "end_char_idx": 7143, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "237c4945-1d4e-4323-bb75-61855015b4ae": {"__data__": {"id_": "237c4945-1d4e-4323-bb75-61855015b4ae", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd", "node_type": "1", "metadata": {}, "hash": "05acccafbb62239f7784573b33e94ccd7c509b6a01d4f9925ed611a90bd7b0ce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01bf1161-e77c-409f-a69c-e7c4b525c736", "node_type": "1", "metadata": {}, "hash": "5647315a8ba2676ec04cf60df20419d7a8301e0b7a46e8da4ac4957412ee66fd", "class_name": "RelatedNodeInfo"}}, "text": "- method: `network_info`\n- params: _none_\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"network_info\",\n  \"params\": []\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=network_info params:='[]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response:</summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"active_peers\": [\n      {\n        \"id\": \"ed25519:GkDv7nSMS3xcqA45cpMvFmfV1o4fRF6zYo1JRR6mNqg5\",\n        \"addr\": \"35.193.24.121:24567\",\n        \"account_id\": null\n      }\n    ],\n    \"num_active_peers\": 34,\n    \"peer_max_count\": 40,\n    \"sent_bytes_per_sec\": 17754754,\n    \"received_bytes_per_sec\": 492116,\n    \"known_producers\": [\n      {\n        \"account_id\": \"node0\",\n        \"addr\": null,\n        \"peer_id\": \"ed25519:7PGseFbWxvYVgZ89K1uTJKYoKetWs7BJtbyXDzfbAcqX\"\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-1}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 7145, "end_char_idx": 8523, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01bf1161-e77c-409f-a69c-e7c4b525c736": {"__data__": {"id_": "01bf1161-e77c-409f-a69c-e7c4b525c736", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "237c4945-1d4e-4323-bb75-61855015b4ae", "node_type": "1", "metadata": {}, "hash": "5405881e2e2e6678972ed227b24435875fee08a41954068d3d67ff26d81e02b9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "749bdacf-9ffc-4c55-88f9-befd162b10f8", "node_type": "1", "metadata": {}, "hash": "a1f6293ada43f2bac0bdb3395078ee2ef65529b030586b4c27632dfed3875cc7", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `network_info` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Validation Status {#validation-status}\n\n> Queries active validators on the network returning details and the state of \nvalidation on the blockchain.\n\n- method: `validators`\n- params: `[\"block hash\"]`, `[block number]`, `{\"epoch_id\": \"epoch id\"}`, \n`{\"block_id\": block number}`, `{\"block_id\": \"block hash\"}`, or \n`[null]` for the latest block\n\n**Note:** If you want the latest `block hash`, `block number` and `epoch id`, \nyou will need to query from the last block in an epoch.", "mimetype": "text/plain", "start_char_idx": 8526, "end_char_idx": 10246, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "749bdacf-9ffc-4c55-88f9-befd162b10f8": {"__data__": {"id_": "749bdacf-9ffc-4c55-88f9-befd162b10f8", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01bf1161-e77c-409f-a69c-e7c4b525c736", "node_type": "1", "metadata": {}, "hash": "5647315a8ba2676ec04cf60df20419d7a8301e0b7a46e8da4ac4957412ee66fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e59f6bd7-6b2b-456b-b6da-d35e37685a08", "node_type": "1", "metadata": {}, "hash": "85ded367371ca44af5a8f56df386bba124707240c4dfdc4b09845afe49ebab5b", "class_name": "RelatedNodeInfo"}}, "text": "You can also query \nvalidators endpoint for past epochs if you input `block hash`, `block number` \nor `epoch id` of the past epoch that you want.\n\nExample:\n\ninput: `[block number]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": [17791098]\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=validators params:='[17791098]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n\ninput: `[\"block hash\"]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": [\"FiG2nMjjue3YdgYAyM3ZqWXSaG6RJj5Gk7hvY8vrEoGw\"]\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=validators params:='[\"FiG2nMjjue3YdgYAyM3ZqWXSaG6RJj5Gk7hvY8vrEoGw\"]' id=dontcare\n```\n\n</TabItem>\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 10247, "end_char_idx": 11288, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e59f6bd7-6b2b-456b-b6da-d35e37685a08": {"__data__": {"id_": "e59f6bd7-6b2b-456b-b6da-d35e37685a08", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "749bdacf-9ffc-4c55-88f9-befd162b10f8", "node_type": "1", "metadata": {}, "hash": "a1f6293ada43f2bac0bdb3395078ee2ef65529b030586b4c27632dfed3875cc7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d763b365-6dad-4856-98c3-12b870182d62", "node_type": "1", "metadata": {}, "hash": "4d4e57fb0536952b269f6b48c1043262494614e355f017c0b692f9e4e6dd6a12", "class_name": "RelatedNodeInfo"}}, "text": "input: `{\"block_id\": \"block hash\"}`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": {\n    \"block_id\": \"FiG2nMjjue3YdgYAyM3ZqWXSaG6RJj5Gk7hvY8vrEoGw\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=validators \\\n  params:='{\n    \"block_id\": \"FiG2nMjjue3YdgYAyM3ZqWXSaG6RJj5Gk7hvY8vrEoGw\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n\ninput: `{\"block_id\": block number}`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": {\n    \"block_id\": 17791098\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=validators \\\n  params:='{\n    \"block_id\": 17791098\n  }`\n```\n\n</TabItem>\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 11291, "end_char_idx": 12214, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d763b365-6dad-4856-98c3-12b870182d62": {"__data__": {"id_": "d763b365-6dad-4856-98c3-12b870182d62", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e59f6bd7-6b2b-456b-b6da-d35e37685a08", "node_type": "1", "metadata": {}, "hash": "85ded367371ca44af5a8f56df386bba124707240c4dfdc4b09845afe49ebab5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9fbc36a5-609a-4e69-9406-9a0f442af7b6", "node_type": "1", "metadata": {}, "hash": "48a711673c6152bcbc2917fc7094c2cf10f95d61d4dd4c94cdf2c8f6441b2920", "class_name": "RelatedNodeInfo"}}, "text": "input: `{\"epoch_id\": \"epoch id\"}`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": {\n    \"epoch_id\": \"8hJSZNNyimPvsCA1v3dMr3Hg5ucYeLUbTvEfhr6jaWJy\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=validators \\\n  params:='{\n    \"epoch_id\": \"8hJSZNNyimPvsCA1v3dMr3Hg5ucYeLUbTvEfhr6jaWJy\"\n  }`\n```\n\n</TabItem>\n</Tabs>\n\n\ninput: `[null]`\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"validators\",\n  \"params\": [null]\n}\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=validators params:='[null]' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"current_validators\": [\n      {\n        \"account_id\": \"01node.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3iNqnvBgxJPXCxu6hNdvJso1PEAc1miAD35KQMBCA3aL\",\n        \"is_slashed\": false,\n        \"stake\": \"176429739989396285019500901780\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },", "mimetype": "text/plain", "start_char_idx": 12217, "end_char_idx": 13509, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9fbc36a5-609a-4e69-9406-9a0f442af7b6": {"__data__": {"id_": "9fbc36a5-609a-4e69-9406-9a0f442af7b6", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d763b365-6dad-4856-98c3-12b870182d62", "node_type": "1", "metadata": {}, "hash": "4d4e57fb0536952b269f6b48c1043262494614e355f017c0b692f9e4e6dd6a12", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "780f5f3c-475b-4a0f-a711-19a4bb5e1adc", "node_type": "1", "metadata": {}, "hash": "9633bc936c5b3f2d077be6a40700d42563918caf99b6508f0ee97cc94b0de572", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"account_id\": \"alexandruast.pool.f863973.m0\",\n        \"public_key\": \"ed25519:A3XJ3uVGxSi9o2gnG2r8Ra3fqqodRpL4iuLTc6fNdGUj\",\n        \"is_slashed\": false,\n        \"stake\": \"151430394143736014372434860532\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"aquarius.pool.f863973.m0\",\n        \"public_key\": \"ed25519:8NfEarjStDYjJTwKUgQGy7Z7UTGsZaPhTUsExheQN3r1\",\n        \"is_slashed\": false,\n        \"stake\": \"130367563121508828296664196836\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"bazilik.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3pDJwDQ6Y5B9QeW1jz8KunhZH4D4GQG86reTmrRfdD7c\",\n        \"is_slashed\": false,\n        \"stake\": \"169013447850997135034919151338\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 211,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"bisontrails.pool.f863973.m0\",\n        \"public_key\": \"ed25519:8g4P5EXyp2b2pfVMHY1QLfkRcY59hjPfWrFCKUWX3RmR\",\n        \"is_slashed\": false,\n        \"stake\": \"184162578269044826045352223479\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,", "mimetype": "text/plain", "start_char_idx": 13516, "end_char_idx": 14747, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "780f5f3c-475b-4a0f-a711-19a4bb5e1adc": {"__data__": {"id_": "780f5f3c-475b-4a0f-a711-19a4bb5e1adc", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fbc36a5-609a-4e69-9406-9a0f442af7b6", "node_type": "1", "metadata": {}, "hash": "48a711673c6152bcbc2917fc7094c2cf10f95d61d4dd4c94cdf2c8f6441b2920", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36d68141-3888-4e8f-bb97-4685d9f95e20", "node_type": "1", "metadata": {}, "hash": "dfa3f8cb821d39e7b657e85eadcff594345d699b90d2009f4e988a992f337445", "class_name": "RelatedNodeInfo"}}, "text": "\"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"bitcat.pool.f863973.m0\",\n        \"public_key\": \"ed25519:9mtnwPQyyap1QNH9ag6r4the7Jkkpdyt9HUF5G1dWxKx\",\n        \"is_slashed\": false,\n        \"stake\": \"135215509376418353124295451543\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"blazenet.pool.f863973.m0\",\n        \"public_key\": \"ed25519:DiogP36wBXKFpFeqirrxN8G2Mq9vnakgBvgnHdL9CcN3\",\n        \"is_slashed\": false,\n        \"stake\": \"137364229255641651855065314186\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"certusone.pool.f863973.m0\",\n        \"public_key\": \"ed25519:CKW7f41Kn8YCDPzaGLs1MrPb9h3BjQmHhbei6Ff6nRRF\",\n        \"is_slashed\": false,\n        \"stake\": \"176644821310043228577017742667\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"chorus-one.pool.f863973.m0\",\n        \"public_key\": \"ed25519:6LFwyEEsqhuDxorWfsKcPPs324zLWTaoqk4o6RDXN7Qc\",\n        \"is_slashed\": false,\n        \"stake\": \"110397600457815316527526651811\",\n        \"shards\": [0],", "mimetype": "text/plain", "start_char_idx": 14756, "end_char_idx": 15988, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36d68141-3888-4e8f-bb97-4685d9f95e20": {"__data__": {"id_": "36d68141-3888-4e8f-bb97-4685d9f95e20", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "780f5f3c-475b-4a0f-a711-19a4bb5e1adc", "node_type": "1", "metadata": {}, "hash": "9633bc936c5b3f2d077be6a40700d42563918caf99b6508f0ee97cc94b0de572", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43", "node_type": "1", "metadata": {}, "hash": "1b5f7757ba247c7e2db5dfe086daf896d2448c747c4c232a4227a62b79eae4db", "class_name": "RelatedNodeInfo"}}, "text": "\"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"cloudpost.pool.f863973.m0\",\n        \"public_key\": \"ed25519:AVVLmJDG8z6UgmW9fmJGVFTdYxxfnqXH6c7FVQmhE6dp\",\n        \"is_slashed\": false,\n        \"stake\": \"136597929514591130855076834167\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"dokia.pool.f863973.m0\",\n        \"public_key\": \"ed25519:935JMz1vLcJxFApG3TY4MA4RHhvResvoGwCrQoJxHPn9\",\n        \"is_slashed\": false,\n        \"stake\": \"220445043066799898276306006919\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 426,\n        \"num_expected_blocks\": 426\n      },\n      {\n        \"account_id\": \"dsrvlabs.pool.f863973.m0\",\n        \"public_key\": \"ed25519:61ei2efmmLkeDR1CG6JDEC2U3oZCUuC2K1X16Vmxrud9\",\n        \"is_slashed\": false,\n        \"stake\": \"161508967845718247649113721019\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"fresh_lockup.pool.f863973.m0\",\n        \"public_key\": \"ed25519:7CMFLtEohojtxBkmj9Jb6AGgbphb1zvxymHzpzuyCjfG\",\n        \"is_slashed\": false,\n        \"stake\": \"193574159400241036715020269158\",\n        \"shards\": [0],", "mimetype": "text/plain", "start_char_idx": 15997, "end_char_idx": 17266, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43": {"__data__": {"id_": "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36d68141-3888-4e8f-bb97-4685d9f95e20", "node_type": "1", "metadata": {}, "hash": "dfa3f8cb821d39e7b657e85eadcff594345d699b90d2009f4e988a992f337445", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7a426faf-7984-419a-b214-fcbf342762d1", "node_type": "1", "metadata": {}, "hash": "858192945b3691488daf0aca123236af22bf20baaa4702213e7fb77547922d12", "class_name": "RelatedNodeInfo"}}, "text": "\"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"inotel.pool.f863973.m0\",\n        \"public_key\": \"ed25519:C55jH1MCHYGa3tzUyZZdGrJmmCLP22Aa4v88KYpn2xwZ\",\n        \"is_slashed\": false,\n        \"stake\": \"178598870951670469578754984993\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"jazza.pool.f863973.m0\",\n        \"public_key\": \"ed25519:85cPMNVrqUz8N7oWbbvWbUuamHcJNe49uRbaSzftLCz9\",\n        \"is_slashed\": false,\n        \"stake\": \"155762349362951827286303475797\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"joe1.pool.f863973.m0\",\n        \"public_key\": \"ed25519:G3SxwzmiEZSm3bHnTLtxJvm3NvT1TLQcWuV1iod6i6NJ\",\n        \"is_slashed\": false,\n        \"stake\": \"129230772267511696840933436174\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"kronos.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3i2pertqzF8xqkJ4BrE4t4r67YiYYrUKCktbqvDgjzuQ\",\n        \"is_slashed\": false,\n        \"stake\": \"144544279093485390569527924033\",\n        \"shards\": [0],", "mimetype": "text/plain", "start_char_idx": 17275, "end_char_idx": 18531, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7a426faf-7984-419a-b214-fcbf342762d1": {"__data__": {"id_": "7a426faf-7984-419a-b214-fcbf342762d1", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43", "node_type": "1", "metadata": {}, "hash": "1b5f7757ba247c7e2db5dfe086daf896d2448c747c4c232a4227a62b79eae4db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9df2521e-410a-42f0-b3d5-fa0a7d6e5633", "node_type": "1", "metadata": {}, "hash": "51461483ad641e8acbb9ad48c53248c5c7be24ccde26dbc6fcaa0e3dda580fde", "class_name": "RelatedNodeInfo"}}, "text": "\"num_produced_blocks\": 202,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"kytzu.pool.f863973.m0\",\n        \"public_key\": \"ed25519:61tgPZpy8tqFeAwG4vtf2ZKCRoENiP2A1TJVWEwnbxZU\",\n        \"is_slashed\": false,\n        \"stake\": \"113758432843198726378418342568\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"lowfeevalidation.pool.f863973.m0\",\n        \"public_key\": \"ed25519:EXyjSMGSnk5uGphF3gVV1jCudaAudbW8imoEccYEJg3V\",\n        \"is_slashed\": false,\n        \"stake\": \"113685537557977098595863252617\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"lunanova.pool.f863973.m0\",\n        \"public_key\": \"ed25519:2fZ59qfo9QHNLijoht9cwUb9enSNcnRmXbQn1gKZxvkw\",\n        \"is_slashed\": false,\n        \"stake\": \"172903039219549397267702571804\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"moonlet.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3e1nVCVGNS3yr6CcUvpDAs3BhiWtyM9uTBWkyVR5Xn3K\",\n        \"is_slashed\": false,\n        \"stake\": \"140599784944681716744261599779\",\n        \"shards\": [0],", "mimetype": "text/plain", "start_char_idx": 18540, "end_char_idx": 19811, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9df2521e-410a-42f0-b3d5-fa0a7d6e5633": {"__data__": {"id_": "9df2521e-410a-42f0-b3d5-fa0a7d6e5633", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7a426faf-7984-419a-b214-fcbf342762d1", "node_type": "1", "metadata": {}, "hash": "858192945b3691488daf0aca123236af22bf20baaa4702213e7fb77547922d12", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6d720654-e0a4-476a-8e0a-16a233d6a6fe", "node_type": "1", "metadata": {}, "hash": "be43ce2edf2633f3d9cf061d562b912634e9d1cc47bfde13bddd442436795d27", "class_name": "RelatedNodeInfo"}}, "text": "\"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"node0\",\n        \"public_key\": \"ed25519:7PGseFbWxvYVgZ89K1uTJKYoKetWs7BJtbyXDzfbAcqX\",\n        \"is_slashed\": false,\n        \"stake\": \"1907234923845608896091985071588\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 3614,\n        \"num_expected_blocks\": 3616\n      },\n      {\n        \"account_id\": \"node1\",\n        \"public_key\": \"ed25519:6DSjZ8mvsRZDvFqFxo8tCKePG96omXW7eVYVSySmDk8e\",\n        \"is_slashed\": false,\n        \"stake\": \"1906065501889463342906704128820\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 3613,\n        \"num_expected_blocks\": 3614\n      },\n      {\n        \"account_id\": \"node2\",\n        \"public_key\": \"ed25519:GkDv7nSMS3xcqA45cpMvFmfV1o4fRF6zYo1JRR6mNqg5\",\n        \"is_slashed\": false,\n        \"stake\": \"1840271519773089248112279578450\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 3615,\n        \"num_expected_blocks\": 3615\n      },\n      {\n        \"account_id\": \"node3\",\n        \"public_key\": \"ed25519:ydgzeXHJ5Xyt7M1gXLxqLBW1Ejx6scNV5Nx2pxFM8su\",\n        \"is_slashed\": false,\n        \"stake\": \"1247270566437910246525604113433\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 2335,\n        \"num_expected_blocks\": 2342\n      },", "mimetype": "text/plain", "start_char_idx": 19820, "end_char_idx": 21102, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6d720654-e0a4-476a-8e0a-16a233d6a6fe": {"__data__": {"id_": "6d720654-e0a4-476a-8e0a-16a233d6a6fe", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9df2521e-410a-42f0-b3d5-fa0a7d6e5633", "node_type": "1", "metadata": {}, "hash": "51461483ad641e8acbb9ad48c53248c5c7be24ccde26dbc6fcaa0e3dda580fde", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "915fa216-8245-40d1-b086-bf24b9643d6f", "node_type": "1", "metadata": {}, "hash": "8495bc061e54bf60d6c489c48578d035e592fa6f24a8f653d0884866ac157e82", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"account_id\": \"nodeasy.pool.f863973.m0\",\n        \"public_key\": \"ed25519:25Dhg8NBvQhsVTuugav3t1To1X1zKiomDmnh8yN9hHMb\",\n        \"is_slashed\": false,\n        \"stake\": \"131652957125263756523827257067\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"northernlights.stakingpool\",\n        \"public_key\": \"ed25519:CsMecqKCfagnebMB3ha1uRubay5Z4V85req23bNAJSG3\",\n        \"is_slashed\": false,\n        \"stake\": \"159669819380982417675619400525\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"orangeclub.pool.f863973.m0\",\n        \"public_key\": \"ed25519:HezFeSzcwuR5wvkqccgMCMnpf1eQkVCfk52tXZEdKZHz\",\n        \"is_slashed\": false,\n        \"stake\": \"143971234567521206686862639104\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"pathrock.pool.f863973.m0\",\n        \"public_key\": \"ed25519:G138GdQsU7PdFLD6X88NmTLAEDR7agPcq9HLZqGpegkm\",\n        \"is_slashed\": false,\n        \"stake\": \"125204431569306697735287326827\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"pool_easy2stake.", "mimetype": "text/plain", "start_char_idx": 21109, "end_char_idx": 22429, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "915fa216-8245-40d1-b086-bf24b9643d6f": {"__data__": {"id_": "915fa216-8245-40d1-b086-bf24b9643d6f", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d720654-e0a4-476a-8e0a-16a233d6a6fe", "node_type": "1", "metadata": {}, "hash": "be43ce2edf2633f3d9cf061d562b912634e9d1cc47bfde13bddd442436795d27", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "33c6d587-91be-44ce-8b01-8140720d1379", "node_type": "1", "metadata": {}, "hash": "3f00b5b19d488ab7bc47cc5f72bd4a5e0fe4cfeada6d80f994f4eda3945d8d80", "class_name": "RelatedNodeInfo"}}, "text": "pool.f863973.m0\",\n        \"public_key\": \"ed25519:8nzKxvmyeauQRehWkby8GfWNLgqPiF5FCRFSD75M1Rwh\",\n        \"is_slashed\": false,\n        \"stake\": \"176893731686620703671521068552\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"sl1sub.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3URBpNUjNAMzugQH1rdSKMtwFM8AwHaJgZk5Z6YtnfFL\",\n        \"is_slashed\": false,\n        \"stake\": \"155741680601335529540438949153\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"staked.pool.6fb1358\",\n        \"public_key\": \"ed25519:684rMbuVYYgL2CkmYgC1weLh3erd2bwrmtQtJJhWzPwj\",\n        \"is_slashed\": false,\n        \"stake\": \"126911347639167461321544980789\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"staked.pool.f863973.m0\",\n        \"public_key\": \"ed25519:D2afKYVaKQ1LGiWbMAZRfkKLgqimTR74wvtESvjx5Ft2\",\n        \"is_slashed\": false,\n        \"stake\": \"140558085958535444819294942478\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"stakin.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 22429, "end_char_idx": 23711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "33c6d587-91be-44ce-8b01-8140720d1379": {"__data__": {"id_": "33c6d587-91be-44ce-8b01-8140720d1379", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "915fa216-8245-40d1-b086-bf24b9643d6f", "node_type": "1", "metadata": {}, "hash": "8495bc061e54bf60d6c489c48578d035e592fa6f24a8f653d0884866ac157e82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2da13f2d-35a9-4822-b2c0-1038ffd7da0f", "node_type": "1", "metadata": {}, "hash": "6997aad0fc22b78bf85219685dba1077c1de0eb5387979697549274d84c368b7", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:GvddxjaxBCqGGB4kMNWNFtvozU1EEZ2jrnggKZW8LaU4\",\n        \"is_slashed\": false,\n        \"stake\": \"122221693837484004905170552626\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"staking-power.pool.f863973.m0\",\n        \"public_key\": \"ed25519:4s79F6Fdjgb3rHXPLwaXZG4Hq7Za8nogUu3vXEamRBQo\",\n        \"is_slashed\": false,\n        \"stake\": \"113293334165305165414435157738\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"syncnode.pool.f863973.m0\",\n        \"public_key\": \"ed25519:FUAVDkmLhuTbKYv4GWuWv9ogjKzRatLd5ZBMKXRy7WqE\",\n        \"is_slashed\": false,\n        \"stake\": \"133414422809248011010747790387\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 212,\n        \"num_expected_blocks\": 212\n      },\n      {\n        \"account_id\": \"thepassivetrust.pool.f863973.m0\",\n        \"public_key\": \"ed25519:4NccD2DNJpBkDmWeJ2GbqPoivQ93qcKiR4PHALJKCTod\",\n        \"is_slashed\": false,\n        \"stake\": \"162714097201953456968339272308\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"top.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 23720, "end_char_idx": 24994, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2da13f2d-35a9-4822-b2c0-1038ffd7da0f": {"__data__": {"id_": "2da13f2d-35a9-4822-b2c0-1038ffd7da0f", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "33c6d587-91be-44ce-8b01-8140720d1379", "node_type": "1", "metadata": {}, "hash": "3f00b5b19d488ab7bc47cc5f72bd4a5e0fe4cfeada6d80f994f4eda3945d8d80", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6fa380f8-d237-4cdb-a4b0-82228e87a2e6", "node_type": "1", "metadata": {}, "hash": "508fd0bbd473286fc79671a9dc97a080212864d159bd564e6bc0bacb331db67a", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:FR5qxAsP8GgXDN96pappLtWMywiqWsPVqT3HLE3YaUx\",\n        \"is_slashed\": false,\n        \"stake\": \"164760602493727447176131601464\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"valeraverim.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3686ABqNUZc1qhLWLHg5xZpBzrWPiUCMNZxcCNmg3e2s\",\n        \"is_slashed\": false,\n        \"stake\": \"191733144511459134091274432419\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"zainy.pool.f863973.m0\",\n        \"public_key\": \"ed25519:37KfhBNYjqpaUVh3ft5kPcFn3xK1eVvtDZJCQQVCGnzQ\",\n        \"is_slashed\": false,\n        \"stake\": \"113441017844444454951489924484\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 213,\n        \"num_expected_blocks\": 213\n      },\n      {\n        \"account_id\": \"zpool.pool.f863973.m0\",\n        \"public_key\": \"ed25519:ETFRFNHfvd6fpj74MGYYQp3diY8WB4bFmWMxjTB2yY4V\",\n        \"is_slashed\": false,\n        \"stake\": \"140932616764414290525265048028\",\n        \"shards\": [0],\n        \"num_produced_blocks\": 120,\n        \"num_expected_blocks\": 212\n      }\n    ],\n    \"next_validators\": [\n      {\n        \"account_id\": \"01node.pool.", "mimetype": "text/plain", "start_char_idx": 25003, "end_char_idx": 26283, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6fa380f8-d237-4cdb-a4b0-82228e87a2e6": {"__data__": {"id_": "6fa380f8-d237-4cdb-a4b0-82228e87a2e6", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2da13f2d-35a9-4822-b2c0-1038ffd7da0f", "node_type": "1", "metadata": {}, "hash": "6997aad0fc22b78bf85219685dba1077c1de0eb5387979697549274d84c368b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1241b2cf-ac6d-4664-a78d-4e73eb87adce", "node_type": "1", "metadata": {}, "hash": "cdc0713ebf32f42d61709f5b343e8cf6c4913dbaa30245c4a7bf7b399e8134b1", "class_name": "RelatedNodeInfo"}}, "text": "f863973.m0\",\n        \"public_key\": \"ed25519:3iNqnvBgxJPXCxu6hNdvJso1PEAc1miAD35KQMBCA3aL\",\n        \"stake\": \"177341160716540400974121040893\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"alexandruast.pool.f863973.m0\",\n        \"public_key\": \"ed25519:A3XJ3uVGxSi9o2gnG2r8Ra3fqqodRpL4iuLTc6fNdGUj\",\n        \"stake\": \"152212670433756011274558210225\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"aquarius.pool.f863973.m0\",\n        \"public_key\": \"ed25519:8NfEarjStDYjJTwKUgQGy7Z7UTGsZaPhTUsExheQN3r1\",\n        \"stake\": \"131041030638338742265060835987\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"bazilik.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3pDJwDQ6Y5B9QeW1jz8KunhZH4D4GQG86reTmrRfdD7c\",\n        \"stake\": \"169886556654364796730036727847\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"bisontrails.pool.f863973.m0\",\n        \"public_key\": \"ed25519:8g4P5EXyp2b2pfVMHY1QLfkRcY59hjPfWrFCKUWX3RmR\",\n        \"stake\": \"185113946165399113822995097304\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"bitcat.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 26283, "end_char_idx": 27389, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1241b2cf-ac6d-4664-a78d-4e73eb87adce": {"__data__": {"id_": "1241b2cf-ac6d-4664-a78d-4e73eb87adce", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6fa380f8-d237-4cdb-a4b0-82228e87a2e6", "node_type": "1", "metadata": {}, "hash": "508fd0bbd473286fc79671a9dc97a080212864d159bd564e6bc0bacb331db67a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "938c83f2-a91e-4863-a6af-b59e09e8a80a", "node_type": "1", "metadata": {}, "hash": "cca5817a61ec65b2d03964096389534492602b5b6147e838a9d6825f4eee37cb", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:9mtnwPQyyap1QNH9ag6r4the7Jkkpdyt9HUF5G1dWxKx\",\n        \"stake\": \"135914020962862866419944507506\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"blazenet.pool.f863973.m0\",\n        \"public_key\": \"ed25519:DiogP36wBXKFpFeqirrxN8G2Mq9vnakgBvgnHdL9CcN3\",\n        \"stake\": \"138073840925159254185212483041\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"certusone.pool.f863973.m0\",\n        \"public_key\": \"ed25519:CKW7f41Kn8YCDPzaGLs1MrPb9h3BjQmHhbei6Ff6nRRF\",\n        \"stake\": \"177557353126393581856047095474\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"chorus-one.pool.f863973.m0\",\n        \"public_key\": \"ed25519:6LFwyEEsqhuDxorWfsKcPPs324zLWTaoqk4o6RDXN7Qc\",\n        \"stake\": \"110967904880664326100649881128\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"cloudpost.pool.f863973.m0\",\n        \"public_key\": \"ed25519:AVVLmJDG8z6UgmW9fmJGVFTdYxxfnqXH6c7FVQmhE6dp\",\n        \"stake\": \"137303582563490110045159846741\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"dokia.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 27398, "end_char_idx": 28480, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "938c83f2-a91e-4863-a6af-b59e09e8a80a": {"__data__": {"id_": "938c83f2-a91e-4863-a6af-b59e09e8a80a", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1241b2cf-ac6d-4664-a78d-4e73eb87adce", "node_type": "1", "metadata": {}, "hash": "cdc0713ebf32f42d61709f5b343e8cf6c4913dbaa30245c4a7bf7b399e8134b1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "136f8e11-154e-4977-bc05-478e46a2cb74", "node_type": "1", "metadata": {}, "hash": "c069f8d9c5fb6e9791402fdfc6e5235f48d3ea3ad13589fd451b660f2d41962d", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:935JMz1vLcJxFApG3TY4MA4RHhvResvoGwCrQoJxHPn9\",\n        \"stake\": \"221583843027440134728813179120\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"dsrvlabs.pool.f863973.m0\",\n        \"public_key\": \"ed25519:61ei2efmmLkeDR1CG6JDEC2U3oZCUuC2K1X16Vmxrud9\",\n        \"stake\": \"162343309156672629963246208215\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"fresh_lockup.pool.f863973.m0\",\n        \"public_key\": \"ed25519:7CMFLtEohojtxBkmj9Jb6AGgbphb1zvxymHzpzuyCjfG\",\n        \"stake\": \"194574146707912827852030100603\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"inotel.pool.f863973.m0\",\n        \"public_key\": \"ed25519:C55jH1MCHYGa3tzUyZZdGrJmmCLP22Aa4v88KYpn2xwZ\",\n        \"stake\": \"179521497218882663562358374377\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"jazza.pool.f863973.m0\",\n        \"public_key\": \"ed25519:85cPMNVrqUz8N7oWbbvWbUuamHcJNe49uRbaSzftLCz9\",\n        \"stake\": \"156567004141558073310769195719\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"joe1.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 28489, "end_char_idx": 29565, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "136f8e11-154e-4977-bc05-478e46a2cb74": {"__data__": {"id_": "136f8e11-154e-4977-bc05-478e46a2cb74", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "938c83f2-a91e-4863-a6af-b59e09e8a80a", "node_type": "1", "metadata": {}, "hash": "cca5817a61ec65b2d03964096389534492602b5b6147e838a9d6825f4eee37cb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "039ad860-c36e-413b-b1b8-ca552c7887a9", "node_type": "1", "metadata": {}, "hash": "adc9e88836f292ffa8878c0495bf73da6d4483de6d1ef138ace861f0c75b5982", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:G3SxwzmiEZSm3bHnTLtxJvm3NvT1TLQcWuV1iod6i6NJ\",\n        \"stake\": \"129898367221448376460128575495\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"kronos.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3i2pertqzF8xqkJ4BrE4t4r67YiYYrUKCktbqvDgjzuQ\",\n        \"stake\": \"145291600307308103830278523851\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"kytzu.pool.f863973.m0\",\n        \"public_key\": \"ed25519:61tgPZpy8tqFeAwG4vtf2ZKCRoENiP2A1TJVWEwnbxZU\",\n        \"stake\": \"114346099616381729581424582943\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"lowfeevalidation.pool.f863973.m0\",\n        \"public_key\": \"ed25519:EXyjSMGSnk5uGphF3gVV1jCudaAudbW8imoEccYEJg3V\",\n        \"stake\": \"114272827178534171015566175242\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"lunanova.pool.f863973.m0\",\n        \"public_key\": \"ed25519:2fZ59qfo9QHNLijoht9cwUb9enSNcnRmXbQn1gKZxvkw\",\n        \"stake\": \"173796241314359640924313305613\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"moonlet.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 29574, "end_char_idx": 30657, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "039ad860-c36e-413b-b1b8-ca552c7887a9": {"__data__": {"id_": "039ad860-c36e-413b-b1b8-ca552c7887a9", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "136f8e11-154e-4977-bc05-478e46a2cb74", "node_type": "1", "metadata": {}, "hash": "c069f8d9c5fb6e9791402fdfc6e5235f48d3ea3ad13589fd451b660f2d41962d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f83d2470-5a28-49a1-9c00-396980c40374", "node_type": "1", "metadata": {}, "hash": "d762f2c92341627715500727d0e50d445b831be344ad5fdb004a19d4401f7623", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:3e1nVCVGNS3yr6CcUvpDAs3BhiWtyM9uTBWkyVR5Xn3K\",\n        \"stake\": \"141326111231422084384405939935\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"node0\",\n        \"public_key\": \"ed25519:7PGseFbWxvYVgZ89K1uTJKYoKetWs7BJtbyXDzfbAcqX\",\n        \"stake\": \"1917087533938315356792420553580\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"node1\",\n        \"public_key\": \"ed25519:6DSjZ8mvsRZDvFqFxo8tCKePG96omXW7eVYVSySmDk8e\",\n        \"stake\": \"1915912070849706566898523265362\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"node2\",\n        \"public_key\": \"ed25519:GkDv7nSMS3xcqA45cpMvFmfV1o4fRF6zYo1JRR6mNqg5\",\n        \"stake\": \"1849778202731933988446605407109\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"node3\",\n        \"public_key\": \"ed25519:ydgzeXHJ5Xyt7M1gXLxqLBW1Ejx6scNV5Nx2pxFM8su\",\n        \"stake\": \"1253713857932062021626652303305\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"nodeasy.pool.f863973.m0\",\n        \"public_key\": \"ed25519:25Dhg8NBvQhsVTuugav3t1To1X1zKiomDmnh8yN9hHMb\",", "mimetype": "text/plain", "start_char_idx": 30666, "end_char_idx": 31751, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f83d2470-5a28-49a1-9c00-396980c40374": {"__data__": {"id_": "f83d2470-5a28-49a1-9c00-396980c40374", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "039ad860-c36e-413b-b1b8-ca552c7887a9", "node_type": "1", "metadata": {}, "hash": "adc9e88836f292ffa8878c0495bf73da6d4483de6d1ef138ace861f0c75b5982", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "10b4bf52-6f46-4db7-b918-f700ebf374de", "node_type": "1", "metadata": {}, "hash": "9310f2bfdcb12311ff632b8445c84db8187db74a060ba0fe835e9297df36566b", "class_name": "RelatedNodeInfo"}}, "text": "\"stake\": \"132333065508677559475570461579\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"northernlights.stakingpool\",\n        \"public_key\": \"ed25519:CsMecqKCfagnebMB3ha1uRubay5Z4V85req23bNAJSG3\",\n        \"stake\": \"160494659810582810750858869593\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"orangeclub.pool.f863973.m0\",\n        \"public_key\": \"ed25519:HezFeSzcwuR5wvkqccgMCMnpf1eQkVCfk52tXZEdKZHz\",\n        \"stake\": \"144714977470413958038055754809\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"pathrock.pool.f863973.m0\",\n        \"public_key\": \"ed25519:G138GdQsU7PdFLD6X88NmTLAEDR7agPcq9HLZqGpegkm\",\n        \"stake\": \"125851226796631921571804668732\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"pool_easy2stake.pool.f863973.m0\",\n        \"public_key\": \"ed25519:8nzKxvmyeauQRehWkby8GfWNLgqPiF5FCRFSD75M1Rwh\",\n        \"stake\": \"177807549352374182247265978294\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"sl1sub.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3URBpNUjNAMzugQH1rdSKMtwFM8AwHaJgZk5Z6YtnfFL\",\n        \"stake\": \"156546228606913052982706314599\",\n        \"shards\": [0]\n      },", "mimetype": "text/plain", "start_char_idx": 31760, "end_char_idx": 32932, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "10b4bf52-6f46-4db7-b918-f700ebf374de": {"__data__": {"id_": "10b4bf52-6f46-4db7-b918-f700ebf374de", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f83d2470-5a28-49a1-9c00-396980c40374", "node_type": "1", "metadata": {}, "hash": "d762f2c92341627715500727d0e50d445b831be344ad5fdb004a19d4401f7623", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "68d433c7-8c45-4b9c-95d4-52f31661b22a", "node_type": "1", "metadata": {}, "hash": "e931113840f911db192be3d28c976e156c158e9d24a4ff4ccc6b7fe2e21c3eb8", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"account_id\": \"staked.pool.6fb1358\",\n        \"public_key\": \"ed25519:684rMbuVYYgL2CkmYgC1weLh3erd2bwrmtQtJJhWzPwj\",\n        \"stake\": \"127566960646771620637977634520\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"staked.pool.f863973.m0\",\n        \"public_key\": \"ed25519:D2afKYVaKQ1LGiWbMAZRfkKLgqimTR74wvtESvjx5Ft2\",\n        \"stake\": \"141284196855966747583242721111\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"stakin.pool.f863973.m0\",\n        \"public_key\": \"ed25519:GvddxjaxBCqGGB4kMNWNFtvozU1EEZ2jrnggKZW8LaU4\",\n        \"stake\": \"122853080560791799567241762038\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"staking-power.pool.f863973.m0\",\n        \"public_key\": \"ed25519:4s79F6Fdjgb3rHXPLwaXZG4Hq7Za8nogUu3vXEamRBQo\",\n        \"stake\": \"113878597697173990840757447344\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"syncnode.pool.f863973.m0\",\n        \"public_key\": \"ed25519:FUAVDkmLhuTbKYv4GWuWv9ogjKzRatLd5ZBMKXRy7WqE\",\n        \"stake\": \"134103630138795323490241660174\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"thepassivetrust.pool.f863973.m0\",", "mimetype": "text/plain", "start_char_idx": 32939, "end_char_idx": 34083, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68d433c7-8c45-4b9c-95d4-52f31661b22a": {"__data__": {"id_": "68d433c7-8c45-4b9c-95d4-52f31661b22a", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "10b4bf52-6f46-4db7-b918-f700ebf374de", "node_type": "1", "metadata": {}, "hash": "9310f2bfdcb12311ff632b8445c84db8187db74a060ba0fe835e9297df36566b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1326a1eb-ec5f-4fa6-85b4-8f381d386aff", "node_type": "1", "metadata": {}, "hash": "4e13682c39985a5a526eb88984de65cc52ce00d3f9b389b91bf20ecc8e3ea112", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:4NccD2DNJpBkDmWeJ2GbqPoivQ93qcKiR4PHALJKCTod\",\n        \"stake\": \"163554668234785516757420218799\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"top.pool.f863973.m0\",\n        \"public_key\": \"ed25519:FR5qxAsP8GgXDN96pappLtWMywiqWsPVqT3HLE3YaUx\",\n        \"stake\": \"165611741467072665024638629174\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"valeraverim.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3686ABqNUZc1qhLWLHg5xZpBzrWPiUCMNZxcCNmg3e2s\",\n        \"stake\": \"192723621295992295990275575014\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"zainy.pool.f863973.m0\",\n        \"public_key\": \"ed25519:37KfhBNYjqpaUVh3ft5kPcFn3xK1eVvtDZJCQQVCGnzQ\",\n        \"stake\": \"114027175849273464802110072969\",\n        \"shards\": [0]\n      },\n      {\n        \"account_id\": \"zpool.pool.f863973.m0\",\n        \"public_key\": \"ed25519:ETFRFNHfvd6fpj74MGYYQp3diY8WB4bFmWMxjTB2yY4V\",\n        \"stake\": \"141660662431449802378487016195\",\n        \"shards\": [0]\n      }\n    ],\n    \"current_fishermen\": [\n      {\n        \"account_id\": \"staked.stakingpool\",", "mimetype": "text/plain", "start_char_idx": 34092, "end_char_idx": 35191, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1326a1eb-ec5f-4fa6-85b4-8f381d386aff": {"__data__": {"id_": "1326a1eb-ec5f-4fa6-85b4-8f381d386aff", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68d433c7-8c45-4b9c-95d4-52f31661b22a", "node_type": "1", "metadata": {}, "hash": "e931113840f911db192be3d28c976e156c158e9d24a4ff4ccc6b7fe2e21c3eb8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "846178f0-a9b9-44cc-a381-c151c9154979", "node_type": "1", "metadata": {}, "hash": "97eca2c89d9e019be8b5c8da5b479a25a10ffb8ec6aa39c785d3f4746e960646", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:5VmCXxWepj22uFoKmrxk6DTiFa3fuTzDcwGxM8uUErpr\",\n        \"stake\": \"5957256918881889179239884296\"\n      },\n      {\n        \"account_id\": \"bisontrails.stakingpool\",\n        \"public_key\": \"ed25519:ED2v5KtScbk6aNjGcTn1YMDUu3EXfD5HPt1x6RiYBypk\",\n        \"stake\": \"7679439354334034871130713908\"\n      },\n      {\n        \"account_id\": \"cryptium.stakingpool\",\n        \"public_key\": \"ed25519:2usUkjmKWxQw7QUeFfELHCEqS2UxjwsRqnCkA5oQ6A2B\",\n        \"stake\": \"6484546971716985483357166277\"\n      },\n      {\n        \"account_id\": \"buildlinks3.pool.f863973.m0\",\n        \"public_key\": \"ed25519:Cfy8xjSsvVquSqo7W4A2bRX1vkLPycLgyCvFNs3Rz6bb\",\n        \"stake\": \"81221864655530313350540629757\"\n      },\n      {\n        \"account_id\": \"mmm.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3jEqDDKaJEg1r8UGu2x2dC55BXE7i26yNFQzvfJkkHkf\",\n        \"stake\": \"80030001196381772535600000000\"\n      }\n    ],\n    \"next_fishermen\": [\n      {\n        \"account_id\": \"staked.stakingpool\",\n        \"public_key\": \"ed25519:5VmCXxWepj22uFoKmrxk6DTiFa3fuTzDcwGxM8uUErpr\",\n        \"stake\": \"5957256918881889179239884296\"\n      },", "mimetype": "text/plain", "start_char_idx": 35200, "end_char_idx": 36310, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "846178f0-a9b9-44cc-a381-c151c9154979": {"__data__": {"id_": "846178f0-a9b9-44cc-a381-c151c9154979", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1326a1eb-ec5f-4fa6-85b4-8f381d386aff", "node_type": "1", "metadata": {}, "hash": "4e13682c39985a5a526eb88984de65cc52ce00d3f9b389b91bf20ecc8e3ea112", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed4819df-3646-4dd0-9d82-e782c330c257", "node_type": "1", "metadata": {}, "hash": "cf4df3376a03f42b6294e6990abf5cb4265c0e54227376b0ab491fbffb333c39", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"account_id\": \"bisontrails.stakingpool\",\n        \"public_key\": \"ed25519:ED2v5KtScbk6aNjGcTn1YMDUu3EXfD5HPt1x6RiYBypk\",\n        \"stake\": \"7679439354334034871130713908\"\n      },\n      {\n        \"account_id\": \"cryptium.stakingpool\",\n        \"public_key\": \"ed25519:2usUkjmKWxQw7QUeFfELHCEqS2UxjwsRqnCkA5oQ6A2B\",\n        \"stake\": \"6484546971716985483357166277\"\n      },\n      {\n        \"account_id\": \"buildlinks3.pool.f863973.m0\",\n        \"public_key\": \"ed25519:Cfy8xjSsvVquSqo7W4A2bRX1vkLPycLgyCvFNs3Rz6bb\",\n        \"stake\": \"81221864655530313350540629757\"\n      },\n      {\n        \"account_id\": \"mmm.pool.f863973.m0\",\n        \"public_key\": \"ed25519:3jEqDDKaJEg1r8UGu2x2dC55BXE7i26yNFQzvfJkkHkf\",\n        \"stake\": \"80030001196381772535600000000\"\n      }\n    ],\n    \"current_proposals\": [\n      {\n        \"account_id\": \"kytzu.pool.f863973.m0\",\n        \"public_key\": \"ed25519:61tgPZpy8tqFeAwG4vtf2ZKCRoENiP2A1TJVWEwnbxZU\",\n        \"stake\": \"114346100195275968419224582943\"\n      },\n      {\n        \"account_id\": \"nodeasy.pool.f863973.m0\",\n        \"public_key\": \"ed25519:25Dhg8NBvQhsVTuugav3t1To1X1zKiomDmnh8yN9hHMb\",", "mimetype": "text/plain", "start_char_idx": 36317, "end_char_idx": 37437, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ed4819df-3646-4dd0-9d82-e782c330c257": {"__data__": {"id_": "ed4819df-3646-4dd0-9d82-e782c330c257", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "846178f0-a9b9-44cc-a381-c151c9154979", "node_type": "1", "metadata": {}, "hash": "97eca2c89d9e019be8b5c8da5b479a25a10ffb8ec6aa39c785d3f4746e960646", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d8c12cbb-6c3c-4902-8337-6102533c5fcc", "node_type": "1", "metadata": {}, "hash": "11d9dd63b70e0dcd99013eed42ccf5e79c252d43d5ebf3f5fd3316e88b974438", "class_name": "RelatedNodeInfo"}}, "text": "\"stake\": \"132333066144809013154670461579\"\n      },\n      {\n        \"account_id\": \"thepassivetrust.pool.f863973.m0\",\n        \"public_key\": \"ed25519:4NccD2DNJpBkDmWeJ2GbqPoivQ93qcKiR4PHALJKCTod\",\n        \"stake\": \"163554672455685458970920218837\"\n      }\n    ],\n    \"prev_epoch_kickout\": [],\n    \"epoch_start_height\": 17754191,\n    \"epoch_height\": 321\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What could go wrong? {#what-could-go-wrong-2}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 37446, "end_char_idx": 38674, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8c12cbb-6c3c-4902-8337-6102533c5fcc": {"__data__": {"id_": "d8c12cbb-6c3c-4902-8337-6102533c5fcc", "embedding": null, "metadata": {"file_path": "./near_dist/network.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a", "node_type": "4", "metadata": {}, "hash": "302fc479c473d7e2e44695b081ce15a84d0bace4d0896abaabca1888ab49edb4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ed4819df-3646-4dd0-9d82-e782c330c257", "node_type": "1", "metadata": {}, "hash": "cf4df3376a03f42b6294e6990abf5cb4265c0e54227376b0ab491fbffb333c39", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `validators` method:\n\n<table>\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>HANDLER_ERROR</td>\n      <td>UNKNOWN_EPOCH</td>\n      <td>200</td>\n      <td>An epoch for the provided block can't be found in a database</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to an archival node</li>\n          <li>Check that the requested block is the last block of some epoch</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 38676, "end_char_idx": 40337, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "59291610-b716-4408-acbd-fa89dcfc5b33": {"__data__": {"id_": "59291610-b716-4408-acbd-fa89dcfc5b33", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb", "node_type": "1", "metadata": {}, "hash": "80c2df99231597ff170beb6a2e9ee08dd28127a75a64224f4be2c3bbac3f58e5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: ethers-js-best-practices\ntitle: Best Practices for Ethereum developers on NEAR\n---\n\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nIn this example, we will create an Ethereum dApp on NEAR that functions as a portfolio manager, displaying the current balances for a list of tokens. Additionally, we will display current market value of each asset in the portfolio.\n\nWe will be using several technologies:\n- NEAR Components for the user interface (UI).\n- [Ethers.js](bos-ethersjs.md) for retrieving balance data from the blockchain.\n- CoinGecko API for fetching static content with information about tokens and their current prices.\n- [Social-DB](https://github.com/NearSocial/social-db) for storing the list of tokens to be tracked.\n- GitHub Actions for caching static content, speeding up loading, and circumventing rate limits.\n\n## Step 1: Load balances from chain\n\nLet's start with a simple example and consider an application where we want to display a user's balances for multiple tokens.\n\n### Source code\n\n```js\n// Load current sender address if it was not loaded yet\nif (state.sender == undefined && Ethers.provider()) {\n  Ethers.provider()\n    .send(\"eth_requestAccounts\", [])\n    .then((accounts) => {\n      if (accounts.length) {\n        // save sender address to the state\n        State.update({ sender: accounts[0] });\n      }\n    });\n}\n\n// Load ERC20 ABI JSON\nconst erc20Abi = fetch(\n  \"https://ipfs.near.social/ipfs/bafkreifgw34kutqcnusv4yyv7gjscshc5jhrzw7up7pdabsuoxfhlnckrq\"\n);\nif (!erc20Abi.ok) {\n  return \"Loading\";\n}\n\n// Create contract interface\nconst iface = new ethers.utils.Interface(erc20Abi.body);\n\n// specify list of tokens\nconst tokens = [\n  \"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599\", // WBTC\n  \"0x6b175474e89094c44da98b954eedeac495271d0f\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1795, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb": {"__data__": {"id_": "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59291610-b716-4408-acbd-fa89dcfc5b33", "node_type": "1", "metadata": {}, "hash": "34625c0009db09b54082088e1fec681d50dff0a0446d5dbea1db68a9f84fb1d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "541703bd-2703-433e-9609-cbd3dbe24db7", "node_type": "1", "metadata": {}, "hash": "d77047662ca46f9084641246ab8d37609ef5655b1c243b68165b6d3517373fd3", "class_name": "RelatedNodeInfo"}}, "text": "// DAI\n  \"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\", // UNI\n];\n\n// load receiver's balance for a giver token\nconst getTokenBalance = (receiver, tokenId) => {\n  // encode `balanceOf` request\n  const encodedData = iface.encodeFunctionData(\"balanceOf\", [receiver]);\n\n  // send request to the network\n  return Ethers.provider()\n    .call({\n      to: tokenId,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      // decode response\n      const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      return Big(receiverBalanceHex).toFixed(0);\n    });\n};\n\nconst loadTokensData = () => {\n  // load balances of all tokens\n  tokens.map((tokenId) => {\n    getTokenBalance(state.sender, tokenId).then((value) => {\n      // save balance of every token to the state\n      State.update({ [tokenId]: { balance: value, .state[tokenId] } });\n    });\n  });\n};\n\nconst renderToken = (tokenId) => (\n  <li>\n    {tokenId}: {state[tokenId].balance}\n  </li>\n);\n\nif (state.sender) {\n  loadTokensData();\n\n  return (\n    <>\n      <ul>{tokens.map((tokenId) => renderToken(tokenId))}</ul>\n      <p>Your account: {state.sender} </p>\n    </>\n  );\n} else {\n  // output connect button for anon user\n  return <Web3Connect />;\n}\n```\n\nYou can see how it works here: [step_1](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/token-balances-step-1&tab=source).", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "541703bd-2703-433e-9609-cbd3dbe24db7": {"__data__": {"id_": "541703bd-2703-433e-9609-cbd3dbe24db7", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb", "node_type": "1", "metadata": {}, "hash": "80c2df99231597ff170beb6a2e9ee08dd28127a75a64224f4be2c3bbac3f58e5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "76f948a9-ea5f-419f-b978-859f0033722b", "node_type": "1", "metadata": {}, "hash": "629b1902259b899b604a9f6ca058918c89dfa9fa927bc422470bdfa0bad519c7", "class_name": "RelatedNodeInfo"}}, "text": "Once the web3 connection is enabled, the output will appear as follows:\n\n```\n0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599: 726220\n0x6b175474e89094c44da98b954eedeac495271d0f: 140325040242585301886\n0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984: 127732731780832810\n```\n\n:::tip\nWhen developing NEAR components, it's recommended to always present some content even if the user hasn't connected their wallet yet. In this example, the component uses the `<Web3Connect>` button to prompt the user to connect their wallet if they haven't already.\n:::\n\n## Step 2: Load static data\n\n\nTo format the list, we must determine the decimal precision for each asset. While it's possible to retrieve this information from the ERC-20 contract for each token, it's important to note that the ERC-20 contract lacks certain valuable data such as the token icon and description. As a solution, we can leverage the CoinGecko API to retrieve token details, including the current market price.\n\nLet's add a function to load token data for a given token from the Coingecko:\n\n```js\nconst loadCoingeckData = (tokenId) => {\n    let dataUrl = `https://api.coingecko.com/api/v3/coins/ethereum/contract/${tokenId}`;\n\n    const data = fetch(dataUrl);\n    if (data.ok) {\n        return {\n            name: data.body.name,\n            icon: data.body.image.small,\n            decimals: data.body.detail_platforms[\"ethereum\"].decimal_place,\n            price: Number(data.body.market_data.current_price.usd),\n        };\n    }\n};\n```\n\nOther available API methods are listed in the [Coingecko API documentation](https://www.coingecko.com/en/api).", "mimetype": "text/plain", "start_char_idx": 3210, "end_char_idx": 4811, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "76f948a9-ea5f-419f-b978-859f0033722b": {"__data__": {"id_": "76f948a9-ea5f-419f-b978-859f0033722b", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "541703bd-2703-433e-9609-cbd3dbe24db7", "node_type": "1", "metadata": {}, "hash": "d77047662ca46f9084641246ab8d37609ef5655b1c243b68165b6d3517373fd3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "92c62278-2f80-4202-b386-37aeb3a4de1e", "node_type": "1", "metadata": {}, "hash": "dcd72ffefe5f67ff29c45100c5a28a53cb9bf04de8e5308e10b8b0ee8770ba7b", "class_name": "RelatedNodeInfo"}}, "text": "Now that we have the data, let's modify the loadTokensData function to save the token information in the state:\n\n```js\nconst loadTokensData = () => {\n  // load balances of all tokens\n  tokens.map((tokenId) => {\n    getTokenBalance(state.sender, tokenId).then((value) => {\n      // save balance of every token to the state\n      State.update({ [tokenId]: { balance: value, ...state[tokenId] } });\n    });\n  });\n\n  tokens.map((tokenId) => {\n    const tokenData = loadCoingeckData(tokenId);\n    // save balance of every token to the state\n    State.update({ [tokenId]: { ...tokenData, ...state[tokenId] } });\n  });\n};\n```\n\nAnd lets update the `renderToken` function to display data we just got:\n\n```js \nconst renderToken = (tokenId) => {\n  const tokenBalance = Big(state[tokenId].balance ?? 0)\n    .div(new Big(10).pow(state[tokenId].decimals ?? 1))\n    .toFixed(4);\n  const tokenBalanceUSD = (tokenBalance * state[tokenId].price).toFixed(2);\n  return (\n    <li>\n      {state[tokenId].name}: {tokenBalance}{\" \"}\n      <img src={state[tokenId].icon} width=\"16\" alt={state[tokenId].symbol} />\n      {`(${tokenBalanceUSD} USD)`}\n    </li>\n  );\n};\n```\n\nYou can see how it works here: [step_2](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/token-balances-step-2&tab=source).\n\nOutput will be like this:\n```\nWrapped Bitcoin: 0.0073 wbtc (247.64 USD)\nDai: 140.3250 dai (140.21 USD)\nUniswap: 0.1277 uni (0.54 USD)\n```\n\n:::info\nPlease note that the `fetch` function caches data and will be executed only once during loading.\n:::\n\n:::tip\nUtilize any available web-services to provide data for your application on NEAR, ensuring that the user experience is on par with traditional web 2.0 applications.\n:::\n\n## Step 3.", "mimetype": "text/plain", "start_char_idx": 4813, "end_char_idx": 6544, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "92c62278-2f80-4202-b386-37aeb3a4de1e": {"__data__": {"id_": "92c62278-2f80-4202-b386-37aeb3a4de1e", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "76f948a9-ea5f-419f-b978-859f0033722b", "node_type": "1", "metadata": {}, "hash": "629b1902259b899b604a9f6ca058918c89dfa9fa927bc422470bdfa0bad519c7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9", "node_type": "1", "metadata": {}, "hash": "eccd2de072eabf6aea75413cab71acadd159e41da9899a2f4c55f1ce4ded0342", "class_name": "RelatedNodeInfo"}}, "text": "Save data in social-db\n\nNow, instead of hardcoding the list of tokens directly within the application code, let's transition them to an onchain data repository named social-db. This approach allows us to adjust the list of trackable tokens without having to modify the application's code. It also offers users the flexibility to select from pre-existing token lists or formulate their own.\n\nLearn more about how [key-value storage social-db works](https://github.com/NearSocial/social-db/blob/master/README.md).\n\nHere is an example of a simple application for [setting tokens list in social-db](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/tokens-db&tab=source). \n\nIn this format, the data from the example will be stored in social-db.\n\n```\n{\n\"0x6b175474e89094c44da98b954eedeac495271d0f\": \"\",\n\"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599\": \"\",\n\"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\": \"\"\n}\n```\n\n\nViewing this data from the blockchain is accessible for every NEAR app or, for example, through an [Explorer app](https://dev.near.org/zavodil.near/widget/Explorer?path=zavodil.near/tokens-db/**).\n\nLet's add a function to our application that will read the list of tokens.\n\n```js\n// set list of tokens\nif (!state.tokensLoaded) {\n    // load tokens list from the Social DB\n    const tokens = Social.get(`zavodil.near/tokens-db/*`, \"final\");\n\n    if (tokens) {\n        State.update({\n            tokensLoaded: true,\n            tokens,\n        });\n    }\n}\n\nconst tokens = Object.keys(state.tokens ?? {});\n```\n:::info\nIn this case, `zavodil.near` is the NEAR account of the user who created this list of tokens. Any other user can create their own list, and it will also be available in `social-db`.", "mimetype": "text/plain", "start_char_idx": 6545, "end_char_idx": 8270, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9": {"__data__": {"id_": "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "92c62278-2f80-4202-b386-37aeb3a4de1e", "node_type": "1", "metadata": {}, "hash": "dcd72ffefe5f67ff29c45100c5a28a53cb9bf04de8e5308e10b8b0ee8770ba7b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "38a3ca5a-e710-4cb1-9baa-656fe425d34f", "node_type": "1", "metadata": {}, "hash": "2e01dcafc0cb32810e76fbe826dae28770728156fa999b051671b2d8e8354fd9", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nYou can see how it works here: [step_3](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/token-balances-step-3&tab=source). The output of the data in the application remains unchanged, but now it no longer contains hardcoded values.\n\n:::tip\nUse social-db, an on-chain data storage, to decouple the data and the application. \n:::\n\n## Step 4. Caching Data Through GitHub Actions\n\nEthereum-based applications frequently depend on static content sources to present details about tokens or contracts. Often, frontends pull this data from platforms like CoinGecko or CoinMarketCap, leveraging API keys to enhance the data retrieval rate limit. Without these API keys, and given a significant volume of data, fetching from these platforms can be sluggish or even disrupted. We'll showcase a serverless approach utilizing GitHub Actions. This method preserves the decentralized nature of NEAR gateways (where securely storing API keys isn't feasible), all while ensuring user ease-of-use and swift data loading.\n\nLet's create a Node.js application that will iterate through a list of tokens from `social-db` and display the retrieved data along with a timestamp of the operation.", "mimetype": "text/plain", "start_char_idx": 8271, "end_char_idx": 9472, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "38a3ca5a-e710-4cb1-9baa-656fe425d34f": {"__data__": {"id_": "38a3ca5a-e710-4cb1-9baa-656fe425d34f", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9", "node_type": "1", "metadata": {}, "hash": "eccd2de072eabf6aea75413cab71acadd159e41da9899a2f4c55f1ce4ded0342", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2a30947c-40a0-4510-8ec4-e170ecfbdcb3", "node_type": "1", "metadata": {}, "hash": "6b8657a8c6243af105f556ef1fbafa2458736277beee1d25fd2d0e11043aba52", "class_name": "RelatedNodeInfo"}}, "text": "```js\nimport * as nearAPI from \"near-api-js\";\nimport * as cg from \"coingecko-api-v3\";\n\nconst CONTRACT_ID = \"social.near\";\nconst ETHEREUM_NETWORK_ID = \"ethereum\";\nconst FETCH_TIMEOUT = 7000;\n\nasync function connect() {\n    const config = {\n        networkId: \"mainnet\",\n        keyStore: new nearAPI.keyStores.InMemoryKeyStore(),\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        walletUrl: \"https://wallet.mainnet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://nearblocks.io\",\n    };\n    const near = await nearAPI.connect(config);\n    const account = await near.account(CONTRACT_ID);\n\n    const contract = new nearAPI.Contract(\n        account, // the account object that is connecting\n        CONTRACT_ID, // name of contract you're connecting to\n        {\n            viewMethods: [\"get\"], // view methods do not change state but usually return a value\n            changeMethods: [], // change methods modify state\n            sender: account, // account object to initialize and sign transactions.\n        }\n    );\n\n    return contract;\n}\n\n// load data from the social-db\nconst contract = await connect();\nconst data = await contract.get({ keys: [\"zavodil.near/tokens-db/*\"] });\nconst tokens = data[\"zavodil.near\"][\"tokens-db\"];\n\n// init coingecko client\nconst client = new cg.CoinGeckoClient({\n    timeout: 5000,\n    autoRetry: false,\n});\n\nlet res = {};\nfor (let i = 0; i < Object.keys(tokens).length; i++) {\n    const tokenId = Object.keys(tokens)[i];\n\n    try {\n        // load data from coingecko\n        const data = await client.contract({\n            id: ETHEREUM_NETWORK_ID,\n            contract_address: tokenId,\n        });\n        // format output\n        const tokenData = {\n            name: data[\"name\"],\n            symbol: data[\"symbol\"],\n            icon: data[\"image\"]?.[\"thumb\"],\n            decimals: data[\"detail_platforms\"]?.[ETHEREUM_NETWORK_ID]?.[\"decimal_place\"],\n            price: data[\"market_data\"]?.[\"current_price\"]?.", "mimetype": "text/plain", "start_char_idx": 9474, "end_char_idx": 11481, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2a30947c-40a0-4510-8ec4-e170ecfbdcb3": {"__data__": {"id_": "2a30947c-40a0-4510-8ec4-e170ecfbdcb3", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "38a3ca5a-e710-4cb1-9baa-656fe425d34f", "node_type": "1", "metadata": {}, "hash": "2e01dcafc0cb32810e76fbe826dae28770728156fa999b051671b2d8e8354fd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97f769b0-c72d-4de8-aa7d-3ab813317daf", "node_type": "1", "metadata": {}, "hash": "569e403736f4593d2dabfd4cd211e56497ab7accf111e2e6c0290a4098628dbd", "class_name": "RelatedNodeInfo"}}, "text": "[\"usd\"],\n        };\n        // store output\n        res[tokenId] = tokenData;\n\n        // add timeout to avoid rate limits\n        await new Promise((resolve) => {\n            setTimeout(resolve, FETCH_TIMEOUT);\n        });\n    } catch (ex) {\n        console.error(tokenId, ex)\n    }\n}\n\n// output results\nconsole.log(\n    JSON.stringify({\n        timestamp: Date.now(),\n        data: res,\n    })\n);\n\n```\n\nExample [of this code on a github](https://github.com/zavodil/tokens-db/),  you can clone the repository and modify the data retrieval request as needed.\n\nNow, we can create a GitHub worker that will execute this script and save the data to a file named `tokens-db.json`. Here are the instructions for the worker:\n\n```yml\nname: Tokens Data Updater\non:\n  workflow_dispatch:\n  schedule:\n    - cron:  '*/15 * * * *'\n\njobs:\n  updateStats:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Prepare        \n        uses: actions/setup-node@v3\n        with:\n            node-version: 16\n      - run: npm i      \n      - name: Tokens Data\n        run: node load > tokens-db.json              \n        env:\n          EXPORT_MODE: CS\n      - uses: EndBug/add-and-commit@v9 \n        with: \n          author_name: \"Tokens Data Updater\"\n          add: 'tokens-db.json --force'\n          message: \"Tokens Data fetching\"\n```\n\nDon't forget to grant the worker the necessary permissions to add files to your repository (Open GitHub Repository: Settings->Actions->General)\n\nThe output of this worker will be the [tokens-db.json](https://raw.githubusercontent.com/zavodil/tokens-db/main/tokens-db.json) file which will be regularly updated with current data. You can easily add any private API keys required for bypassing rate limits in the worker.\n\nNow, let's get back to the NEAR application. We need to modify the code to read data from the cached file created by GitHub Actions instead of fetching it from CoinGecko every time.", "mimetype": "text/plain", "start_char_idx": 11481, "end_char_idx": 13434, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97f769b0-c72d-4de8-aa7d-3ab813317daf": {"__data__": {"id_": "97f769b0-c72d-4de8-aa7d-3ab813317daf", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a4096975-d77b-407c-9da9-30b956c031d4", "node_type": "4", "metadata": {}, "hash": "27a68ad00a48780200911846890f3ad74b9304115404901256228ac78ff9749b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a30947c-40a0-4510-8ec4-e170ecfbdcb3", "node_type": "1", "metadata": {}, "hash": "6b8657a8c6243af105f556ef1fbafa2458736277beee1d25fd2d0e11043aba52", "class_name": "RelatedNodeInfo"}}, "text": "To do this, we'll make changes to the `loadTokensData` function:\n\n```js\nconst loadTokensData = () => {\n    let cacheTokenData = {};\n    // load data generated by github action\n    const cachedData = fetch(\n        `https://raw.githubusercontent.com/zavodil/tokens-db/main/tokens-db.json`\n    );\n    if (cachedData.ok) {\n        const cache = JSON.parse(cachedData.body);\n        const cacheDate = new Date(cache.timestamp);\n        const timeDifference = Date.now() - cacheDate.getTime();\n        if (timeDifference <= 30 * 60 * 1000) {  // use cached data if it is not outdated (30 min)\n            cacheTokenData = cache.data;\n        }\n\n        tokens.map((tokenId) => {\n            const tokenData = cacheTokenData.hasOwnProperty(tokenId)\n                ? cacheTokenData?.[tokenId]\n                : // load data from coingecko if we don't have cached data only\n                loadCoingeckData(tokenId);\n            // save balance of every token to the state\n            State.update({ [tokenId]: { ...tokenData, ...state[tokenId] } });\n        });\n    }\n};\n\n```\n\nYou can see how it works here: [step_4](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/token-balances-step-4&tab=source). The output of the data in the application remains the same, but now it operates more efficiently.\n\n:::tip\nUse GitHub Actions as a serverless backend for securing API keys, caching data etc. \n:::", "mimetype": "text/plain", "start_char_idx": 13436, "end_char_idx": 14850, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9eb4e3a8-aa4d-4f80-8c65-0b127b33030f": {"__data__": {"id_": "9eb4e3a8-aa4d-4f80-8c65-0b127b33030f", "embedding": null, "metadata": {"file_path": "./near_dist/7-factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd", "node_type": "4", "metadata": {}, "hash": "33337406d9e1d341400d4a2248bec4ea9c92031f7e99f267daeb8e11b4e4ad43", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a", "node_type": "1", "metadata": {}, "hash": "ed2f021200ae23227e306c146a61681d3c09704cc7c72a38478119770baac3e9", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: auction-factory\ntitle: Auction factory\nsidebar_label: Auction factory\n---\n\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nSince an auction contract hosts a single auction, each time you would like to host a new auction you will need to deploy a new contract. Rather than finding the compiled WASM file, creating a new account, deploying the contract, and then initializing it each time, you can use a factory contract to do this for you.\n\nLuckily for us, there is already a [factory contract example](https://github.com/near-examples/factory-rust)! We will fork this example and slightly modify it to suit our use case. If you would like to learn more about how the factory contract works, you can take a look at the [associated documentation](https://docs.near.org/tutorials/examples/factory#generic-factory).\n\nThe factory example only comes in rust since, currently, the JavaScript SDK does not allow you to embed the WASM file in the contract. This is a limitation of the SDK and not the blockchain itself.\n\n---\n\n## Changing the default contract\n\nIn the current example, the factory contract deploys the donation contract example. We will change this to deploy our auction contract instead. \n\nFirstly, we'll need the compiled auction contract WASM file. You can get this by running the following command in [part four](4-ft.md) of `contract-rs`\n\n```\ncargo near build \n```\n\nYou will find the resulting WASM file in `target/near`; copy this file and use it to replace the WASM of the donation contract in the factory contract's source folder. Now edit the auction contract changing the path to the auction contract.\n\n<Language value=\"rust\" language=\"rust\">\n    <Github fname=\"Default init\" \n            url=\"https://github.com/near-examples/auctions-tutorial/blob/add-factory/factory/src/lib.rs#L9\"\n            start=\"25\" end=\"31\" />\n    <Github fname=\"Contract path\" \n            url=\"https://github.com/near-examples/auctions-tutorial/blob/add-factory/factory/src/lib.rs#L9\"\n            start=\"9\" end=\"9\" />\n</Language>\n\nOn initialization, the factory will add the auction contracts WASM, as bytes, to the factory's state.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2150, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a": {"__data__": {"id_": "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a", "embedding": null, "metadata": {"file_path": "./near_dist/7-factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd", "node_type": "4", "metadata": {}, "hash": "33337406d9e1d341400d4a2248bec4ea9c92031f7e99f267daeb8e11b4e4ad43", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9eb4e3a8-aa4d-4f80-8c65-0b127b33030f", "node_type": "1", "metadata": {}, "hash": "526bbb7bd4bc4080d805ebfd4b46b6d2c599106a35db084e52b53804730da75e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48455c8a-d570-4112-9504-bada8dc6e979", "node_type": "1", "metadata": {}, "hash": "2bcfe7c3a10b3b8051e87a77728941b58f80d18e73984d0ef0d8e0ef46140bb6", "class_name": "RelatedNodeInfo"}}, "text": "It is more efficient to not store the WASM in the factory's state, however, we may want to update the auction contract if we find a bug or want to add new features. The factory implements a method to update the auction contract - we'll change the name to `update_auction_contract` as this factory will only deploy auction contracts.\n\n<Github fname=\"Contract path\" language=\"rust\"\n        url=\"https://github.com/near-examples/auctions-tutorial/blob/add-factory/factory/src/manager.rs#L8-L13\"\n        start=\"8\" end=\"13\" />\n\n---\n\n## Modifying deploy method\n\nThe method to deploy a new contract is specific to the contract being deployed (in the case the contract has custom initialization parameters). We will modify the method to take in the auction contract's initialization parameters.\n\n<Github fname=\"Contract path\" language=\"rust\"\n        url=\"https://github.com/near-examples/auctions-tutorial/blob/add-factory/factory/src/deploy.rs#L9-L82\"\n        start=\"9\" end=\"82\" />\n\nIn this fork, we have also removed the option to add an access key to the contract account since, as discussed in [part 2](2-locking.md), we want auctions to be locked.\n\n---\n\n## Using the factory \n\nBuild and deploy the factory like you would any other contract, this time without any initialization parameters. \n\n```\ncargo near build\n```\n\nthen\n\n```\ncargo near deploy <accountId> without-init-call network-config testnet sign-with-legacy-keychain send\n```\n\nYou can now use the factory to deploy new auction contracts, here is an example command. \n\n```\nnear contract call-function as-transaction auction-factory.testnet deploy_new_auction json-args '{\"name\": \"new-auction\", \"end_time\": \"3000000000000000000\", \"auctioneer\": \"pivortex.testnet\", \"ft_contract\": \"dai.fakes.testnet\", \"nft_contract\": \"nft.examples.testnet\", \"token_id\": \"7777\", \"starting_price\": \"1000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '1.6 NEAR'\n```\n\n:::info Deposit and storage costs\nNote that we attach 1.6 $NEAR to the call to cover the storage costs of deploying the new auction.", "mimetype": "text/plain", "start_char_idx": 2151, "end_char_idx": 4196, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "48455c8a-d570-4112-9504-bada8dc6e979": {"__data__": {"id_": "48455c8a-d570-4112-9504-bada8dc6e979", "embedding": null, "metadata": {"file_path": "./near_dist/7-factory.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd", "node_type": "4", "metadata": {}, "hash": "33337406d9e1d341400d4a2248bec4ea9c92031f7e99f267daeb8e11b4e4ad43", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a", "node_type": "1", "metadata": {}, "hash": "ed2f021200ae23227e306c146a61681d3c09704cc7c72a38478119770baac3e9", "class_name": "RelatedNodeInfo"}}, "text": "The storage cost on NEAR is 1 $NEAR per 100 kb, and our auction contract is around 140 kb, but we'll add a little to cover the storage used on initialization.\n:::\n\nThe command results in a fresh auction contract being deployed and initialized at `new-auction.auction-factory.testnet`.\n\n---\n\n## Conclusion\n\nIn this part of the tutorial, you have learned how to fork and modify the factory contract example to deploy our auction contracts. You have also learned how to use the factory to deploy new auction contracts. If you're feeling adventurous you could create a frontend to interact with the factory contract to make it even easier to deploy new auctions. If you do so feel free to share it in our developer [Telegram](https://t.me/neardev) or [Discord](https://discord.gg/vMGH5QywTH) channels!\n\nAnd with that, this tutorial series is over, congratulations! Through this tutorial, we've built an auction contract and iterated on it adding improvements and extending its functionality, created a frontend to interact with the auction, used an API to index previous bids, and deployed a factory contract to make deploying new auctions easier. Along the way we've learned a great deal about NEAR, we learned about the anatomy of smart contracts, how to lock a contract to make it more secure, how to use primitives such as NFTs and FTs, how to perform cross-contract calls, how to use wallets from a frontend to interact with the blockchain and display data about a smart contract, how to pull historical data from the blockchain using an API, how to deploy contracts from other contracts and a lot of other little bits that will help you in the future. \n\nThat's a lot, so once again congratulations!", "mimetype": "text/plain", "start_char_idx": 4197, "end_char_idx": 5897, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ade28c11-b293-4a6d-a618-fd8abae8a70c": {"__data__": {"id_": "ade28c11-b293-4a6d-a618-fd8abae8a70c", "embedding": null, "metadata": {"file_path": "./near_dist/frontend-multiple-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79eabc9c-ea1b-4500-aaa7-cf6c07321848", "node_type": "4", "metadata": {}, "hash": "04e7023354c795f4c8e622123dfb2ae816a0935a0b8f6cb5037b9f846a5d3a52", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f2f163a-528f-4adf-8cf1-06cf86d8e9bb", "node_type": "1", "metadata": {}, "hash": "19828d6caeb20b730dd6f867b21e288cd7dc498f52c91651ea48dfbd371f9aef", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: frontend-multiple-contracts\ntitle: Frontend Interacting with Multiple Contracts\nsidebar_label: Frontend & Multiple Contracts\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThis example showcases how to interact with multiple contracts from a single frontend.\n\nParticularly, this example shows how to:\n\n1. Query data from multiple contracts.\n2. Call methods in multiple contracts simultaneously.\n\n---\n\n## Query Data from Multiple Contracts\n\nTo query multiple contracts simply perform multiple `view` calls:\n\n<Language value=\"js\" language=\"ts\">\n  <Github fname=\"index.js\"\n        url=\"https://github.com/near-examples/frontend-multiple-contracts/blob/main/frontend/index.js\"\n        start=\"70\" end=\"76\" />\n</Language>\n\n---\n\n## Dispatching Multiple Transactions\n\nThe `wallet` object enables to dispatch multiple transactions simultaneously. However, please notice that the transactions execute independently.\n\nDispatching multiple transactions at once is just a nice way to improve UX, because the user interacts with the wallet only once.\n\n<Language value=\"js\" language=\"ts\">\n  <Github fname=\"index.js\"\n          url=\"https://github.com/near-examples/frontend-multiple-contracts/blob/main/frontend/index.js\"\n          start=\"35\" end=\"62\" />\n</Language>\n\nIn this example, the user signs two independent transactions:\n\n1. A transaction to call `set_greeting` in our [Hello NEAR example](https://github.com/near-examples/hello-near-examples)\n2. A transaction to call `add_message` in our [GuestBook example](https://github.com/near-examples/guest-book-examples)\n\n:::caution\nEven when the user accepts signing the transactions at the same time, the\ntransactions remain **independent**. This is, if one fails, the other is **NOT** rolled back.\n:::\n\n---\n\n## Batch Actions\n\nYou can aggregate multiple [actions](../../2.build/2.smart-contracts/anatomy/actions.md) directed towards a same contract into a single transaction. Batched actions execute **sequentially**, with the added benefit that, if **one fails** then they **all** get reverted.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2142, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9f2f163a-528f-4adf-8cf1-06cf86d8e9bb": {"__data__": {"id_": "9f2f163a-528f-4adf-8cf1-06cf86d8e9bb", "embedding": null, "metadata": {"file_path": "./near_dist/frontend-multiple-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79eabc9c-ea1b-4500-aaa7-cf6c07321848", "node_type": "4", "metadata": {}, "hash": "04e7023354c795f4c8e622123dfb2ae816a0935a0b8f6cb5037b9f846a5d3a52", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ade28c11-b293-4a6d-a618-fd8abae8a70c", "node_type": "1", "metadata": {}, "hash": "543cfd8f0ddc5eabbf51ea8a81c7c62f3a2409b30e9b5563726082f485787a90", "class_name": "RelatedNodeInfo"}}, "text": "```js\n  // Register a user and transfer them FT on a single take\n  const REGISTER_DEPOSIT = \"1250000000000000000000\";\n\n  const ftTx = {\n    receiverId: FT_ADDRESS,\n    actions: [\n      {\n        type: 'FunctionCall',\n        params: {\n          methodName: 'storage_deposit',\n          args: { account_id: \"<receiver-account>\" },\n          gas: THIRTY_TGAS, deposit: REGISTER_DEPOSIT\n        }\n      },\n      {\n        type: 'FunctionCall',\n        params: {\n          methodName: 'ft_transfer',\n          args: { receiver_id: \"<receiver-account>\", amount: amount_in_yocto },\n          gas: THIRTY_TGAS, deposit: 1 }\n      }\n    ]\n  }\n\n  // Ask the wallet to sign and send the transaction\n  await wallet.signAndSendTransactions({ transactions: [ ftTx ] })\n```", "mimetype": "text/plain", "start_char_idx": 2144, "end_char_idx": 2903, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3aa17b31-23b9-4a99-9e2e-ca8cabac1d7b": {"__data__": {"id_": "3aa17b31-23b9-4a99-9e2e-ca8cabac1d7b", "embedding": null, "metadata": {"file_path": "./near_dist/best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "39827082-9c24-4681-acac-35b3790b5d93", "node_type": "4", "metadata": {}, "hash": "8b5229cf148224a3f1745fd0bdca6241e0bccc25d84c116709cd9cfa063fe4ac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f661a7b7-78d7-46bb-94c1-5d831b696916", "node_type": "1", "metadata": {}, "hash": "d6cd3cfa27efa86c460178620298ba57598603c968e1e64ff51464292242a950", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: best-practices\ntitle: \"Best Practices\"\n---\n\n# Best practices\n\n## Enable overflow checks\n\nIt's usually helpful to panic on integer overflow. To enable it, add the following into your `Cargo.toml` file:\n\n```toml\n[profile.release]\noverflow-checks = true\n```\n\n## Use `require!` early\n\nTry to validate the input, context, state and access using `require!` before taking any actions. The earlier you panic, the more [gas](https://docs.near.org/concepts/protocol/gas) you will save for the caller.\n\n```rust\n#[nearn]\nimpl Contract {\n    pub fn set_fee(&mut self, new_fee: Fee) {\n        require!(env::predecessor_account_id() == self.owner_id, \"Owner's method\");\n        new_fee.assert_valid();\n        self.internal_set_fee(new_fee);\n    }\n}\n```\n\n**Note**: If you want debug information in the panic message or if you are using an SDK version before `4.0.0-pre.2`, \nthe Rust `assert!` macro can be used instead of `require!`.\n\n```rust\n#[near]\nimpl Contract {\n    pub fn set_fee(&mut self, new_fee: Fee) {\n        assert_eq!(env::predecessor_account_id(), self.owner_id, \"Owner's method\");\n        new_fee.assert_valid();\n        self.internal_set_fee(new_fee);\n    }\n}\n```\n\n## Use `log!`\n\nUse logging for debugging and notifying user.\n\nWhen you need a formatted message, you can use the following macro:\n\n```rust\nlog!(\"Transferred {} tokens from {} to {}\", amount, sender_id, receiver_id);\n```\n\nIt's equivalent to the following message:\n\n```rust\nenv::log_str(format!(\"Transferred {} tokens from {} to {}\", amount, sender_id, receiver_id).as_ref());\n```\n\n## Return `Promise`\n\nIf your method makes a cross-contract call, you probably want to return the newly created `Promise`.\nThis allows the caller (such as a near-cli or near-api-js call) to wait for the result of the promise instead of returning immediately.\nAdditionally, if the promise fails for some reason, returning it will let the caller know about the failure, as well as enabling NEAR Explorer and other tools to mark the whole transaction chain as failing.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2019, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f661a7b7-78d7-46bb-94c1-5d831b696916": {"__data__": {"id_": "f661a7b7-78d7-46bb-94c1-5d831b696916", "embedding": null, "metadata": {"file_path": "./near_dist/best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "39827082-9c24-4681-acac-35b3790b5d93", "node_type": "4", "metadata": {}, "hash": "8b5229cf148224a3f1745fd0bdca6241e0bccc25d84c116709cd9cfa063fe4ac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3aa17b31-23b9-4a99-9e2e-ca8cabac1d7b", "node_type": "1", "metadata": {}, "hash": "456d852e714e5c36ac94164eeed866401e83aecebd1bd289eca67873c405289d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7508486d-969b-40fb-9686-5b1ee7ee8b67", "node_type": "1", "metadata": {}, "hash": "e031318550852680d7398548b44719b515d304781edd54f16d6c0ff763038dff", "class_name": "RelatedNodeInfo"}}, "text": "This can prevent false-positives when the first or first few transactions in a chain succeed but a subsequent transaction fails.\n\nE.g.\n\n```rust\n#[near]\nimpl Contract {\n    pub fn withdraw_100(&mut self, receiver_id: AccountId) -> Promise {\n        Promise::new(receiver_id).transfer(100)\n    }\n}\n```\n\n## Reuse crates from `near-sdk`\n\n`near-sdk` re-exports the following crates:\n\n- `borsh`\n- `base64`\n- `bs58`\n- `serde`\n- `serde_json`\n\nMost common crates include `borsh` which is needed for internal STATE serialization and\n`serde` for external JSON serialization.\n\nWhen marking structs with `serde::Serialize` you need to use `#[serde(crate = \"near_sdk::serde\")]`\nto point serde to the correct base crate.\n\n```rust\n/// Main contract structure serialized with Borsh\n#[near(contract_state)]\n#[derive(PanicOnDefault)]\npub struct Contract {\n    pub pair: Pair,\n}\n\n/// Implements both `serde` and `borsh` serialization.\n/// `serde` is typically useful when returning a struct in JSON format for a frontend.\n#[near(serializers = [json, borsh])]\npub struct Pair {\n    pub a: u32,\n    pub b: u32,\n}\n\n#[near]\nimpl Contract {\n    #[init]\n    pub fn new(pair: Pair) -> Self {\n        Self {\n            pair,\n        }\n    }\n\n    pub fn get_pair(self) -> Pair {\n        self.pair\n    }\n}\n```\n\n## `std::panic!` vs `env::panic`\n\n- `std::panic!` panics the current thread. It uses `format!` internally, so it can take arguments.\n  SDK sets up a panic hook, which converts the generated `PanicInfo` from `panic!` into a string and uses `env::panic` internally to report it to Runtime.\n  This may provide extra debugging information such as the line number of the source code where the panic happened.\n\n- `env::panic` directly calls the host method to panic the contract.\n  It doesn't provide any other extra debugging information except for the passed message.\n\n## Use workspaces\n\nWorkspaces allow you to automate workflows and run tests for multiple contracts and cross-contract calls in a sandbox or testnet environment.", "mimetype": "text/plain", "start_char_idx": 2020, "end_char_idx": 4027, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7508486d-969b-40fb-9686-5b1ee7ee8b67": {"__data__": {"id_": "7508486d-969b-40fb-9686-5b1ee7ee8b67", "embedding": null, "metadata": {"file_path": "./near_dist/best-practices.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "39827082-9c24-4681-acac-35b3790b5d93", "node_type": "4", "metadata": {}, "hash": "8b5229cf148224a3f1745fd0bdca6241e0bccc25d84c116709cd9cfa063fe4ac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f661a7b7-78d7-46bb-94c1-5d831b696916", "node_type": "1", "metadata": {}, "hash": "d6cd3cfa27efa86c460178620298ba57598603c968e1e64ff51464292242a950", "class_name": "RelatedNodeInfo"}}, "text": "Read more, [workspaces-rs](https://github.com/near/workspaces-rs) or [workspaces-js](https://github.com/near/workspaces-js).", "mimetype": "text/plain", "start_char_idx": 4028, "end_char_idx": 4152, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "45b1882c-8fc6-4bbf-94d6-6f608427c56e": {"__data__": {"id_": "45b1882c-8fc6-4bbf-94d6-6f608427c56e", "embedding": null, "metadata": {"file_path": "./near_dist/python-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb", "node_type": "4", "metadata": {}, "hash": "5a4593b6551dc057bde3ffc2880ea8be768fd09a3741bd4bef7924171cb51094", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "060df00c-f7ef-4320-a117-f0f965390e00", "node_type": "1", "metadata": {}, "hash": "f9f3dea69ea036ffa89f66667c7ea635277e98af597a77641051c3a1f24105f3", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"Python tutorial\"\n---\n\n# NEAR Lake indexer basic tutorial\n\n\n:::info Source code for the tutorial\n\n[`frolvanya/near-lake-raw-printer`](https://github.com/frolvanya/near-lake-raw-printer): source code for the tutorial on how to create an indexer that prints block height and number of shards\n\n:::\n\nRecently we have [published a Python version of the NEAR Lake Framework](https://pypi.org/project/near-lake-framework/) on pypi.org\n\nWe want to empower you with a basic tutorial on how to use the Python Package. Let's get started!\n\n\n## Create a project\n\nCreate an indexer project:\n\n```bash\nmkdir near-lake-raw-printer && cd near-lake-raw-printer\ntouch main.py\n```\n\n## Install dependencies\n\nInstall `near-lake-framework`\n\n```bash\npip3 install near-lake-framework\n```\n\n## Import `near-lake-framework`\n\nIn the `main.py` file let's import the necessary dependencies:\n\n```python title=main.py\nfrom near_lake_framework import near_primitives, LakeConfig, streamer\n```\n\nWe've imported the main function `streamer`, which will be called to actually run the indexer, `near_primitives`, and `LakeConfig` type we need to construct.\n\n## Create a config\n\nAdd the instantiation of `LakeConfig` below:\n\n```python title=main.py\nconfig = LakeConfig.mainnet()\nconfig.start_block_height = 69030747\nconfig.aws_access_key_id = os.getenv(\"AWS_ACCESS_KEY_ID\")\nconfig.aws_secret_key = os.getenv(\"AWS_SECRET_ACCESS_KEY\")\n```\n\nJust a few words on the config, function `mainnet()` has set `s3_bucket_name`, `s3_region_name` for mainnet.\nYou can go to [NEAR Explorer](https://nearblocks.io) and get **the most recent** block height to set `config.start_block_height`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1654, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "060df00c-f7ef-4320-a117-f0f965390e00": {"__data__": {"id_": "060df00c-f7ef-4320-a117-f0f965390e00", "embedding": null, "metadata": {"file_path": "./near_dist/python-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb", "node_type": "4", "metadata": {}, "hash": "5a4593b6551dc057bde3ffc2880ea8be768fd09a3741bd4bef7924171cb51094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "45b1882c-8fc6-4bbf-94d6-6f608427c56e", "node_type": "1", "metadata": {}, "hash": "9dae68cc39cafd1c166f710c898d79ba2d9cc83561b3be3102475185b1b16d5c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c67c31a1-0958-4daa-bbd1-a0006fe6062b", "node_type": "1", "metadata": {}, "hash": "097a7e6c2520692fe48bba032183c4de44b2fa9000fd1048bd61a7a07eb83ba0", "class_name": "RelatedNodeInfo"}}, "text": "## Starting the stream\n\nLet's call `streamer` function with the `config`:\n\n```python title=main.py\nstream_handle, streamer_messages_queue = streamer(config)\nwhile True:\n    streamer_message = await streamer_messages_queue.get()\n    print(f\"Block #{streamer_message.block.header.height} Shards: {len(streamer_message.shards)}\")\n```\n\nAnd an actual start of our indexer in the end of the `main.py`\n\n```python title=main.py\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n## All together\n\n```python title=main.py\nimport asyncio\nimport os\n\nfrom near_lake_framework import LakeConfig, streamer, near_primitives\n\nasync def main():    \n    config = LakeConfig.mainnet()\n    config.start_block_height = 69030747\n    config.aws_access_key_id = os.getenv(\"AWS_ACCESS_KEY_ID\")\n    config.aws_secret_key = os.getenv(\"AWS_SECRET_ACCESS_KEY\")\n\n    stream_handle, streamer_messages_queue = streamer(config)\n    while True:\n        streamer_message = await streamer_messages_queue.get()\n        print(f\"Block #{streamer_message.block.header.height} Shards: {len(streamer_message.shards)}\")\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\nThat's it. Now we run `main.py`\n\n```bash\npython3 main.py\n```\n\nYou should see something like the following:\n\n```bash\nReceived 400 blocks from S3\nBlock #69030747 Shards: 4\nBlock #69030748 Shards: 4\nBlock #69030749 Shards: 4\nBlock #69030750 Shards: 4\nBlock #69030751 Shards: 4\nBlock #69030752 Shards: 4\nBlock #69030753 Shards: 4\nBlock #69030754 Shards: 4\n```\n\nYou can stop the indexer by pressing CTRL+C\n\n:::danger Credentials\n\nTo be able to access the data from [NEAR Lake](/build/data-infrastructure/lake-framework/near-lake) you need to provide credentials.", "mimetype": "text/plain", "start_char_idx": 1656, "end_char_idx": 3377, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c67c31a1-0958-4daa-bbd1-a0006fe6062b": {"__data__": {"id_": "c67c31a1-0958-4daa-bbd1-a0006fe6062b", "embedding": null, "metadata": {"file_path": "./near_dist/python-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb", "node_type": "4", "metadata": {}, "hash": "5a4593b6551dc057bde3ffc2880ea8be768fd09a3741bd4bef7924171cb51094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "060df00c-f7ef-4320-a117-f0f965390e00", "node_type": "1", "metadata": {}, "hash": "f9f3dea69ea036ffa89f66667c7ea635277e98af597a77641051c3a1f24105f3", "class_name": "RelatedNodeInfo"}}, "text": "Please, see the [Credentials](../../lake-framework/running-near-lake/credentials.md) article\n\n:::\n\nYou can find the [source code for this tutorial on the GitHub](https://github.com/frolvanya/near-lake-raw-printer).", "mimetype": "text/plain", "start_char_idx": 3378, "end_char_idx": 3592, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "525668e7-fc3c-4f4b-ad48-a4de174bb430": {"__data__": {"id_": "525668e7-fc3c-4f4b-ad48-a4de174bb430", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dbd3b131-6a97-469f-9230-2bd61b8cd395", "node_type": "1", "metadata": {}, "hash": "32b1716fb83fb74618ced15f9c960c1f00737c4550d3f3a63d75abab7d022460", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: advanced-xcc\ntitle: Complex Cross Contract Call\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThis example presents 3 instances of complex cross-contract calls. Particularly, it shows:\n\n1. How to batch multiple function calls to a same contract.\n2. How to call multiple contracts in parallel, each returning a different type.\n3. Different ways of handling the responses in the callback.\n\n:::info Simple Cross-Contract Calls\n\nCheck the tutorial on how to use [simple cross-contract calls](xcc.md)\n\n:::\n\n---\n\n## Obtaining the Cross Contract Call Example\n\nYou have two options to start the Donation Example:\n\n1. You can use the app through `Github Codespaces`, which will open a web-based interactive environment.\n2. Clone the repository locally and use it from your computer.\n\n| Codespaces                                                                                                                      | Clone locally                                               |\n| ------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- |\n| [!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1277, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dbd3b131-6a97-469f-9230-2bd61b8cd395": {"__data__": {"id_": "dbd3b131-6a97-469f-9230-2bd61b8cd395", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "525668e7-fc3c-4f4b-ad48-a4de174bb430", "node_type": "1", "metadata": {}, "hash": "d9e23b5d70eafaca5f63cb82b8ccebced9f1971807e7ecad6015c14b57210702", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe242448-1536-4fff-afc7-60204a5a93ee", "node_type": "1", "metadata": {}, "hash": "c2eef3a0a90e7c42e3c195252ac0736c82750bc2a3c728bfeaa1b27b02ce0867", "class_name": "RelatedNodeInfo"}}, "text": "[Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/near-examples/cross-contract-calls?quickstart=1) | \ud83c\udf10 `https://github.com/near-examples/cross-contract-calls` |\n\n---\n\n## Structure of the Example\n\nThe smart contract is available in two flavors: Rust and JavaScript\n\n<Tabs groupId=\"code-tabs\">\n\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n\u250c\u2500\u2500 sandbox-ts # sandbox testing\n\u2502    \u251c\u2500\u2500 external-contracts\n\u2502    \u2502    \u251c\u2500\u2500 counter.wasm\n\u2502    \u2502    \u251c\u2500\u2500 guest-book.wasm\n\u2502    \u2502    \u2514\u2500\u2500 hello-near.wasm\n\u2502    \u2514\u2500\u2500 main.ava.ts\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 internal\n\u2502    \u2502    \u251c\u2500\u2500 batch_actions.ts\n\u2502    \u2502    \u251c\u2500\u2500 constants.ts\n\u2502    \u2502    \u251c\u2500\u2500 multiple_contracts.ts\n\u2502    \u2502    \u251c\u2500\u2500 similar_contracts.ts\n\u2502    \u2502    \u2514\u2500\u2500 utils.ts\n\u2502    \u2514\u2500\u2500 contract.ts\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tsconfig.json\n```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n\u250c\u2500\u2500 tests # sandbox testing\n\u2502    \u251c\u2500\u2500 external-contracts\n\u2502    \u2502    \u251c\u2500\u2500 counter.wasm\n\u2502    \u2502    \u251c\u2500\u2500 guest-book.wasm\n\u2502    \u2502    \u2514\u2500\u2500 hello-near.wasm\n\u2502    \u2514\u2500\u2500 main.ava.ts\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 batch_actions.rs\n\u2502    \u251c\u2500\u2500 lib.rs\n\u2502    \u251c\u2500\u2500 multiple_contracts.rs\n\u2502    \u2514\u2500\u2500 similar_contracts.rs\n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Smart Contract\n\n### Batch Actions\n\nYou can aggregate multiple actions directed towards one same contract into a batched transaction.\nMethods called this way are executed sequentially, with the added benefit that, if one fails then\nthey **all get reverted**.", "mimetype": "text/plain", "start_char_idx": 1277, "end_char_idx": 2826, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe242448-1536-4fff-afc7-60204a5a93ee": {"__data__": {"id_": "fe242448-1536-4fff-afc7-60204a5a93ee", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dbd3b131-6a97-469f-9230-2bd61b8cd395", "node_type": "1", "metadata": {}, "hash": "32b1716fb83fb74618ced15f9c960c1f00737c4550d3f3a63d75abab7d022460", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3506cadc-4268-43f9-be20-fbab5927af77", "node_type": "1", "metadata": {}, "hash": "d6989ca0894f1f07ecd6761de655ccc8c9f6e9798913da399a4b28af137400f5", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n          url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n          start=\"38\" end=\"41\" />\n    <Github fname=\"batch_actions.ts\"\n          url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/batch_actions.ts\"\n          start=\"5\" end=\"17\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"batch_actions.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/batch_actions.rs\"\n            start=\"8\" end=\"20\" />\n  </Language>\n</CodeTabs>\n\n#### Getting the Last Response\n\nIn this case, the callback has access to the value returned by the **last\naction** from the chain.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n      start=\"43\" end=\"46\" />\n    <Github fname=\"batch_actions.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/batch_actions.ts\"\n      start=\"19\" end=\"29\" />\n    <Github fname=\"utils.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/utils.ts\"\n      start=\"3\" end=\"20\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"batch_actions.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/batch_actions.rs\"\n            start=\"22\" end=\"35\" />\n  </Language>\n</CodeTabs>\n\n---\n\n### Calling Multiple Contracts\n\nA contract can call multiple other contracts. This creates multiple transactions that execute\nall in parallel. If one of them fails the rest **ARE NOT REVERTED**.", "mimetype": "text/plain", "start_char_idx": 2828, "end_char_idx": 4739, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3506cadc-4268-43f9-be20-fbab5927af77": {"__data__": {"id_": "3506cadc-4268-43f9-be20-fbab5927af77", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe242448-1536-4fff-afc7-60204a5a93ee", "node_type": "1", "metadata": {}, "hash": "c2eef3a0a90e7c42e3c195252ac0736c82750bc2a3c728bfeaa1b27b02ce0867", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "308687fe-612a-4817-951f-83bbcd7daf0f", "node_type": "1", "metadata": {}, "hash": "98ef93d62c911cf90a364ee0f3f5cc24b29443b14663c8374808f1f20fb8c9e9", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n      start=\"48\" end=\"51\" />\n    <Github fname=\"multiple_contracts.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/multiple_contracts.ts\"\n      start=\"6\" end=\"21\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"multiple_contracts.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/multiple_contracts.rs\"\n            start=\"16\" end=\"55\" />\n  </Language>\n</CodeTabs>\n\n#### Getting All Responses\n\nIn this case, the callback has access to an **array of responses**, which have either the\nvalue returned by each call, or an error message.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n      start=\"53\" end=\"58\" />\n    <Github fname=\"multiple_contracts.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/multiple_contracts.ts\"\n      start=\"24\" end=\"41\" />\n    <Github fname=\"utils.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/utils.ts\"\n      start=\"3\" end=\"20\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"multiple_contracts.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/multiple_contracts.rs\"\n            start=\"58\" end=\"92\" />\n  </Language>\n</CodeTabs>\n\n---\n\n### Multiple Calls - Same Result Type\n\nThis example is a particular case of the previous one ([Calling Multiple Contracts](#2-calling-multiple-contracts)).", "mimetype": "text/plain", "start_char_idx": 4741, "end_char_idx": 6675, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "308687fe-612a-4817-951f-83bbcd7daf0f": {"__data__": {"id_": "308687fe-612a-4817-951f-83bbcd7daf0f", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3506cadc-4268-43f9-be20-fbab5927af77", "node_type": "1", "metadata": {}, "hash": "d6989ca0894f1f07ecd6761de655ccc8c9f6e9798913da399a4b28af137400f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "254cb904-06c7-4ca3-b050-d77a2aad1850", "node_type": "1", "metadata": {}, "hash": "fb03fb05dc34cb6a8741a48549737336f684fabac7428ad778d1043992b9f5f3", "class_name": "RelatedNodeInfo"}}, "text": "It simply showcases a different way to check the results by directly accessing the `promise_result` array.\n\nIn this case, we call multiple contracts that will return the same type:\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n      start=\"65\" end=\"70\" />\n    <Github fname=\"similar_contracts.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/similar_contracts.ts\"\n      start=\"6\" end=\"35\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"similar_contracts.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/similar_contracts.rs\"\n            start=\"8\" end=\"31\" />\n  </Language>\n</CodeTabs>\n\n#### Getting All Responses\n\nIn this case, the callback again has access to an **array of responses**, which we can iterate checking the\nresults.", "mimetype": "text/plain", "start_char_idx": 6676, "end_char_idx": 7711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "254cb904-06c7-4ca3-b050-d77a2aad1850": {"__data__": {"id_": "254cb904-06c7-4ca3-b050-d77a2aad1850", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "308687fe-612a-4817-951f-83bbcd7daf0f", "node_type": "1", "metadata": {}, "hash": "98ef93d62c911cf90a364ee0f3f5cc24b29443b14663c8374808f1f20fb8c9e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622", "node_type": "1", "metadata": {}, "hash": "028a263af1ac7b655aec934c6b87b1bce26b7458207c15698409ade801c59be1", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"contract.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/contract.ts\"\n      start=\"62\" end=\"65\" />\n    <Github fname=\"similar_contracts.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/similar_contracts.ts\"\n      start=\"37\" end=\"54\" />\n    <Github fname=\"utils.ts\"\n      url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-ts/src/internal/utils.ts\"\n      start=\"3\" end=\"20\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"similar_contracts.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-advanced-rs/src/similar_contracts.rs\"\n            start=\"32\" end=\"57\" />\n  </Language>\n</CodeTabs>\n\n---\n\n### Testing the Contract\n\nThe contract readily includes a set of unit and sandbox testing to validate its functionality. To execute the tests, run the following commands:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  ```bash\n  cd contract-advanced-ts\n  yarn\n  yarn test\n  ```\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n  \n  ```bash\n  cd contract-advanced-rs\n  cargo test\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\nThe `integration tests` use a sandbox to create NEAR users and simulate interactions with the contract.\n:::\n\n<hr class=\"subsection\" />\n\n### Deploying the Contract to the NEAR network\n\nIn order to deploy the contract you will need to create a NEAR account.", "mimetype": "text/plain", "start_char_idx": 7713, "end_char_idx": 9308, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622": {"__data__": {"id_": "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "254cb904-06c7-4ca3-b050-d77a2aad1850", "node_type": "1", "metadata": {}, "hash": "fb03fb05dc34cb6a8741a48549737336f684fabac7428ad778d1043992b9f5f3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "181f60b2-0981-45b3-86f5-678ef51a4f6a", "node_type": "1", "metadata": {}, "hash": "d854a17dd04ee0386a6f340108f5c0655f3b285b9060f95118a86931037a5928", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nGo into the directory containing the smart contract (`cd contract-advanced-ts` or `cd contract-advanced-rs`), build and deploy it:\n\n```bash\ncargo near build\n\ncargo near deploy <accountId> with-init-call new json-args '{\"hello_account\":\"hello.near-example.testnet\",\"guestbook_account\":\"guestbook_account.near-example.testnet\",\"counter_account\":\"counter_account.near-example.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\n<hr class=\"subsection\" />\n\n### CLI: Interacting with the Contract\n\nTo interact with the contract through the console, you can use the following commands:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Execute contracts sequentially\n  # Replace <accountId> with your account ID\n  near call <accountId> batch_actions --accountId <accountId> --gas 300000000000000   \n\n  # Execute contracts in parallel\n  # Replace <accountId> with your account ID\n  near call <accountId>  multiple_contracts --accountId <accountId> --gas 300000000000000   \n\n  # Execute multiple instances of the same contract in parallel\n  # Replace <accountId> with your account ID\n  near call <accountId> similar_contracts --accountId <accountId> --gas 300000000000000\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Execute contracts sequentially\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction <accountId> batch_actions json-args '{}' prepaid-gas '300.", "mimetype": "text/plain", "start_char_idx": 9310, "end_char_idx": 11296, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "181f60b2-0981-45b3-86f5-678ef51a4f6a": {"__data__": {"id_": "181f60b2-0981-45b3-86f5-678ef51a4f6a", "embedding": null, "metadata": {"file_path": "./near_dist/advanced-xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "93327342-0e7d-40c9-93c4-61c235a929b5", "node_type": "4", "metadata": {}, "hash": "7f64af262da9791bc8d8744d6b558d5a2834f41e4433b42530cba4cc385501ee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622", "node_type": "1", "metadata": {}, "hash": "028a263af1ac7b655aec934c6b87b1bce26b7458207c15698409ade801c59be1", "class_name": "RelatedNodeInfo"}}, "text": "0 Tgas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n\n  # Execute contracts in parallel\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction <accountId> multiple_contracts json-args '{}' prepaid-gas '300.0 Tgas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n\n  # Execute multiple instances of the same contract in parallel\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction <accountId> similar_contracts json-args '{}' prepaid-gas '300.0 Tgas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n\n:::info\nIf at some point you get an \"Exceeded the prepaid gas\" error, try to increase the gas amount used within the functions when calling other contracts\n:::\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 11296, "end_char_idx": 12370, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97d09524-db42-4da9-97fe-828869c26ddf": {"__data__": {"id_": "97d09524-db42-4da9-97fe-828869c26ddf", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4fe749b4-e2e9-4283-a7d6-770472593d5e", "node_type": "1", "metadata": {}, "hash": "05e038ed1f787047066c67a60b935e1e88095bfc1e4fdfa2576a46b76051a5c1", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"Start options\"\n---\n\n# Extending Lake indexer with start options\n\n\n## The End\n\nThis tutorial ends with the example code of the simple indexer built on top of [NEAR Lake Framework](/concepts/advanced/near-lake-framework) that can start:\n- from specified block height (out of the box)\n  ```bash\n  ./target/release/indexer mainnet from-block 65359506\n  ```\n- from the latest final block from the network\n  ```bash\n  ./target/release/indexer mainnet from-latest\n  ```\n- from the block indexer has indexed the last before it was interrupted\n  ```bash\n  ./target/release/indexer mainnet from-interruption\n  ```\n\n## Motivation\n\nTo find out whether you need an indexer for you project and to create one means you're covering only one side of things - the development.\n\nThere is another important side - the maintenance. This involves:\n- indexer needs to be upgraded with a newer version of dependencies\n- indexer needs to be updates with a new features you've made\n- your server needs some maintenance\n- incident had happened\n- etc.\n\nAlmost in all of the above cases you might want to start or restart your indexer not only from the specific block you need to provide, but from the block it was stopped, or from the latest final block in the network.\n\n[NEAR Lake Framework](/concepts/advanced/near-lake-framework) doesn't provide such options. Actually, we didn't empower the library with these options to start indexer intentionally.\n\n:::info Intent\n\nWe want to keep [NEAR Lake Framework](/concepts/advanced/near-lake-framework) crate in the narrowest possible way. The goal for the library is to do a single job and allow it to be empowered with any features but outside of the crate itself\n\n:::\n\nThough, the possibility to start indexer from the latest block or from the block after the one it has indexed the last, might be very useful.\n\nAlso, during [the April Data Platform Community Meeting](https://github.com/near/indexers-docs/blob/main/blog/2022-05-11-community-meeting-record.mdx) we had a question whether we plan to add this feature to the library. We've promised to create a tutorial showing how to do it by your own. So here it is.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4fe749b4-e2e9-4283-a7d6-770472593d5e": {"__data__": {"id_": "4fe749b4-e2e9-4283-a7d6-770472593d5e", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97d09524-db42-4da9-97fe-828869c26ddf", "node_type": "1", "metadata": {}, "hash": "5f9fd4aeab29d8ae4c16026ec1082648b6608809a7dc820c59120cc4f87d20bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bf99e727-e285-4735-9092-430afa29045b", "node_type": "1", "metadata": {}, "hash": "3b9a0bca2e566e5f3366e67b324f0e547b071d73299443b920ee0f87047769c6", "class_name": "RelatedNodeInfo"}}, "text": "## Preparation\n\nIn this tutorial we're not going to focus our attention on the indexer itself, but on the start options instead.\n\n:::note\n\nTo simplify the code samples in the tutorial, we're writing entire application in a single file `src/main.rs`.\n\n**Please, do not take it as a design advice. We do it only for the simplicity**\n\n:::\n\nLet's prepare a project with a base dependencies, so we can focus on the main goal of this tutorial.\n\nCreate a new Rust project\n\n```bash\ncargo new --bin indexer && cd indexer\n```\n\nReplace the content of the `Cargo.toml` file with this:\n\n```toml title=Cargo.toml\n[package]\nname = \"indexer\"\nversion = \"0.1.0\"\nedition = \"2021\"\nrust-version = \"1.60.0\"\n\n[dependencies]\nclap = { version = \"3.1.6\", features = [\"derive\"] }\nfutures = \"0.3.5\"\nitertools = \"0.9.0\"\ntokio = { version = \"1.1\", features = [\"sync\", \"time\", \"macros\", \"rt-multi-thread\"] }\ntokio-stream = { version = \"0.1\" }\ntracing = \"0.1.13\"\ntracing-subscriber = \"0.2.4\"\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1.0.55\"\n\nnear-lake-framework = \"0.3.0\"\n\n```\n\nReplace the content of `src/main.rs` with this:\n\n```rust\nuse clap::{Parser, Subcommand};\nuse futures::StreamExt;\nuse tracing_subscriber::EnvFilter;\n\n// TODO: StartOptions\n\n#[tokio::main]\nasync fn main() -> Result<(), tokio::io::Error> {\n    init_tracing();\n\n    let opts = Opts::parse();\n\n    // TODO: Config\n\n    let stream = near_lake_framework::streamer(config);\n\n    let mut handlers = tokio_stream::wrappers::ReceiverStream::new(stream)\n        .map(handle_streamer_message)\n        .buffer_unordered(1usize);\n\n    while let Some(_handle_message) = handlers.next().await {}\n\n    Ok(())\n}\n\nasync fn handle_streamer_message(\n    streamer_message: near_lake_framework::near_indexer_primitives::StreamerMessage,\n) {\n    eprintln!", "mimetype": "text/plain", "start_char_idx": 2160, "end_char_idx": 3958, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf99e727-e285-4735-9092-430afa29045b": {"__data__": {"id_": "bf99e727-e285-4735-9092-430afa29045b", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4fe749b4-e2e9-4283-a7d6-770472593d5e", "node_type": "1", "metadata": {}, "hash": "05e038ed1f787047066c67a60b935e1e88095bfc1e4fdfa2576a46b76051a5c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "00dee452-91d2-4765-a4fd-698f75e2c078", "node_type": "1", "metadata": {}, "hash": "cd65143565ccb050b9ee84191932574511a162ea506010c26304ea12b7238af6", "class_name": "RelatedNodeInfo"}}, "text": "(\n        \"{} / shards {}\",\n        streamer_message.block.header.height,\n        streamer_message.shards.len()\n    );\n    std::fs::write(\"last_indexed_block\", streamer_message.block.header.height.to_string().as_bytes()).unwrap();\n}\n\nfn init_tracing() {\n    let mut env_filter = EnvFilter::new(\"near_lake_framework=info\");\n\n    if let Ok(rust_log) = std::env::var(\"RUST_LOG\") {\n        if !rust_log.is_empty() {\n            for directive in rust_log.split(',').filter_map(|s| match s.parse() {\n                Ok(directive) => Some(directive),\n                Err(err) => {\n                    eprintln!(\"Ignoring directive `{}`: {}\", s, err);\n                    None\n                }\n            }) {\n                env_filter = env_filter.add_directive(directive);\n            }\n        }\n    }\n\n    tracing_subscriber::fmt::Subscriber::builder()\n        .with_env_filter(env_filter)\n        .with_writer(std::io::stderr)\n        .init();\n}\n```\n\nThis code is not going to build yet. Meanwhile let's have a quick look of what we've copy/pasted for now:\n\n- We have imported [`clap`](https://docs.rs/clap/latest/clap/) to set up what command line arguments we're going to accept\n- Also, we've important necessary stuff like `futures` and `tracing_subscriber`\n- `init_tracing` in the end of the file is a helper function that subscribes our application to the logs from `near-lake-framework`\n- An asynchronous `main` function with the indexer boilerplate code, but missing the `LakeConfig` creation part we're going to cover in the tutorial.\n- You can find a few `// TODO: ...` sections we've marked for you to find places to write the code from this tutorial.\n\nOK, all the preparations are done. Let's move on.\n\n## Design the `StartOptions`\n\nSo we want to be able to pass a command that defines the way our indexer should start. In this tutorial we'll be using `clap`.\n\nWe need a structure that receives the chain id.", "mimetype": "text/plain", "start_char_idx": 3958, "end_char_idx": 5877, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00dee452-91d2-4765-a4fd-698f75e2c078": {"__data__": {"id_": "00dee452-91d2-4765-a4fd-698f75e2c078", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bf99e727-e285-4735-9092-430afa29045b", "node_type": "1", "metadata": {}, "hash": "3b9a0bca2e566e5f3366e67b324f0e547b071d73299443b920ee0f87047769c6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5", "node_type": "1", "metadata": {}, "hash": "00cdec05f6a10aa168422043f4db5d25b2a5a73aed4bc17f2e986948ac2e4995", "class_name": "RelatedNodeInfo"}}, "text": "This will allow us to use command:\n\n```bash\n./target/release/indexer mainnet ...\n```\n\nOR\n\n```bash\n./target/release/indexer testnet ...\n```\n\nLet's replace the `// TODO: StartOptions` in the `src/main.rs` with:\n\n```rust title=src/main.rs\n#[derive(Parser, Debug, Clone)]\n#[clap(version = \"0.1\", author = \"Near Inc. <hello@nearprotocol.com>\")]\nstruct Opts {\n    #[clap(subcommand)]\n    pub chain_id: ChainId,\n}\n\n#[derive(Subcommand, Debug, Clone)]\nenum ChainId {\n    #[clap(subcommand)]\n    Mainnet(StartOptions),\n    #[clap(subcommand)]\n    Testnet(StartOptions),\n}\n\n```\n\nNow we want to create a `StartOptions` structure that will allow us to tell our indexer where to start indexing from. The command should look like:\n\n```bash\n./target/release mainnet from-latest\n```\n\nOur variants are:\n\n- `from-block N`, where `N` is the block height to start from\n- `from-latest` to start from latest final block in the network\n- `from-interruption` to start from the block indexer was previously interrupted\n\nLet's replace the comment `// TODO: StartOptions` with the enum:\n\n```rust title=src/main.rs\n#[derive(Subcommand, Debug, Clone)]\npub(crate) enum StartOptions {\n    FromBlock { height: u64 },\n    FromLatest,\n    FromInterruption,\n}\n```\n\nPretty simple and straightforward, agree?\n\n## Creating a `LakeConfig`\n\nIn order to create `LakeConfig` we're going to use a config builder [`LakeConfigBuilder`](https://docs.rs/near-lake-framework/0.3.0/near_lake_framework/struct.LakeConfigBuilder.html). Fotunately, we've imported it already.\n\nLet's instantiate a builder in place of `// TODO: Config` comment:\n\n```rust title=src/main.src\n    let mut lake_config_builder = near_lake_framework::LakeConfigBuilder::default();\n```\n\nNotice that `lake_config_builder` is defined as mutable.", "mimetype": "text/plain", "start_char_idx": 5878, "end_char_idx": 7644, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5": {"__data__": {"id_": "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "00dee452-91d2-4765-a4fd-698f75e2c078", "node_type": "1", "metadata": {}, "hash": "cd65143565ccb050b9ee84191932574511a162ea506010c26304ea12b7238af6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30b6744e-2105-4ffc-a061-9c26f2b40993", "node_type": "1", "metadata": {}, "hash": "ca43540a710ac7bc46b67c8fc8a4049e6704442a45094b86376fbcd1222f2d9d", "class_name": "RelatedNodeInfo"}}, "text": "Now we need to set the chain we are going to index by matching `ChainId` provided:\n\n```rust title=src/main.src\n    let mut lake_config_builder = near_lake_framework::LakeConfigBuilder::default();\n\n    match &opts.chain_id {\n        ChainId::Mainnet(start_options) => {\n            lake_config_builder = lake_config_builder\n                .mainnet();\n        }\n        ChainId::Testnet(start_options) => {\n            lake_config_builder = lake_config_builder\n                .testnet();\n        }\n    }\n```\n\nAs you can see, depending on the variant of the `ChainId` enum we modify the `lake_config_builder` with one of the shortcuts `mainnet()` or `testnet()`.\n\nThe only parameter left to set is the most important for us in this tutorial `start_block_height`\n\nNormally, we just pass the block height number `u64` but we're implementing the start options here.\n\n## Start options logic\n\nLet's create a separate function that will hold the logic of identification the `start_block_height` and call it `get_start_block_height`.\n\n**Just read the code, don't copy, it's not final approach yet**\n\n### `FromBlock { height: u64 }`\n\nLet's start from implementation `from-block N` as the simplest one:\n\n```rust title=src/main.rs\nasync fn get_start_block_height(start_options: &StartOptions) -> u64 {\n    match start_options {\n        StartOptions::FromBlock { height } => height,\n\n    }\n}\n```\n\nOK, it's simple enough, what's about other match arms for `StartOptions`:\n\n```rust title=src/main.rs\nasync fn get_start_block_height(start_options: &StartOptions) -> u64 {\n    match start_options {\n        StartOptions::FromBlock { height } => height,\n        StartOptions::FromLatest =>\n    }\n}\n```\n\nEr, how should we get the latest block from the network? We should query the JSON RPC and get the final block, extract its height and call it a day.", "mimetype": "text/plain", "start_char_idx": 7646, "end_char_idx": 9480, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30b6744e-2105-4ffc-a061-9c26f2b40993": {"__data__": {"id_": "30b6744e-2105-4ffc-a061-9c26f2b40993", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5", "node_type": "1", "metadata": {}, "hash": "00cdec05f6a10aa168422043f4db5d25b2a5a73aed4bc17f2e986948ac2e4995", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af1aa2f9-d4f1-4f54-af44-33818d56cbf9", "node_type": "1", "metadata": {}, "hash": "971264c56180f9d9d9945a949df99531c632d0cb3194f7d914324b326d75a903", "class_name": "RelatedNodeInfo"}}, "text": "### `FromLatest`\n\nIn order to query the JSON RPC from within Rust code we need to use [`near-jsonrpc-client-rs` crate](https://github.com/near/near-jsonrpc-client-rs)\n\nYou can find a [bunch of useful examples](https://github.com/near/near-jsonrpc-client-rs/tree/master/examples) in the corresponding folder of the project's repository on GitHub.\n\nAdd it to `Cargo.toml` in the end:\n\n```toml title=Cargo.toml\nnear-jsonrpc-client = \"0.3.0\"\n```\n\nThe code for getting the final block height would look like the following:\n\n```rust\nuse near_jsonrpc_client::{methods, JsonRpcClient};\nuse near_lake_framework::near_indexer_primitives::types::{BlockReference, Finality};\n\nasync fn final_block_height() -> u64 {\n    let client = JsonRpcClient::connect(\"https://rpc.mainnet.near.org\");\n    let request = methods::block::RpcBlockRequest {\n        block_reference: BlockReference::Finality(Finality::Final),\n    };\n\n    let latest_block = client.call(request).await.unwrap();\n\n    latest_block.header.height\n}\n```\n\nNice and easy. Though, a hardcoded value of `\"https://rpc.mainnet.near.org\"` looks not so great. Especially when we want to support both networks.\n\nBut we can handle it by passing the JSON RPC URL to the `get_start_block_function` like this:\n\n```rust title=src/main.rs\n\nasync fn get_start_block_height(\n    start_options: &StartOptions,\n    rpc_url: &str,\n) -> u64 {\n    ...\n}\n\n    ...\n    match &opts.chain_id {\n        ChainId::Mainnet(start_options) => {\n            lake_config_builder = lake_config_builder\n                .mainnet()\n                .start_block_height(\n                    get_start_block_height(\n                        start_options,\n                        \"https://rpc.mainnet.near.org\",\n                    ).await\n                );\n        }\n        ChainId::Testnet(start_options) => {\n            lake_config_builder = lake_config_builder\n                .testnet()\n                .start_block_height(\n                    get_start_block_height(\n                        start_options,\n                        \"https://rpc.testnet.near.org\",\n                    ).await\n                )\n        }\n    }\n\n```\n\nMeh.", "mimetype": "text/plain", "start_char_idx": 9482, "end_char_idx": 11631, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af1aa2f9-d4f1-4f54-af44-33818d56cbf9": {"__data__": {"id_": "af1aa2f9-d4f1-4f54-af44-33818d56cbf9", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "30b6744e-2105-4ffc-a061-9c26f2b40993", "node_type": "1", "metadata": {}, "hash": "ca43540a710ac7bc46b67c8fc8a4049e6704442a45094b86376fbcd1222f2d9d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8368743f-c15f-402b-a1f5-395b2a5a3636", "node_type": "1", "metadata": {}, "hash": "6ee39cd3a929f2059e2bce4122f8dc631d7a6ca7592a7b75ef00eebf62b86d51", "class_name": "RelatedNodeInfo"}}, "text": "It's ugly and why should we pass it everytime if it is required in only one case from three possible?\n\nInstead we can pass to the `get_start_block_height` function the entire `Opts`.\n\n```rust title=src/main.rs\nasync fn get_start_block_height(opts: &Opts) -> u64 {\n    match opts.chain_id {\n        ChainId::Mainnet(start_options) => {\n            match start_options {\n                StartOptions::FromBlock { height } => height,\n                StartOptions::FromLatest =>\n            }\n        }\n    }\n}\n```\n\nAt least we have everything we need. Though, it still looks ugly and will definitely involve code duplication.\n\nWhat we propose instead to is create `impl Opts` with a few useful methods to get JSON RPC URL and to get `StartOptions` instance.", "mimetype": "text/plain", "start_char_idx": 11632, "end_char_idx": 12386, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8368743f-c15f-402b-a1f5-395b2a5a3636": {"__data__": {"id_": "8368743f-c15f-402b-a1f5-395b2a5a3636", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af1aa2f9-d4f1-4f54-af44-33818d56cbf9", "node_type": "1", "metadata": {}, "hash": "971264c56180f9d9d9945a949df99531c632d0cb3194f7d914324b326d75a903", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e20f1cde-5ce8-4fee-b464-a73263033971", "node_type": "1", "metadata": {}, "hash": "254afcdc2bfa25e8ad73e1b0e17bff0ff682c266365e8b9e429f02f5242d83ca", "class_name": "RelatedNodeInfo"}}, "text": "**Now you may proceed copying the code safely**\n\nSomewhere under the `StartOptions` definition add the following:\n\n```rust title=src/main.rs\nimpl Opts {\n    pub fn rpc_url(&self) -> &str {\n        match self.chain_id {\n            ChainId::Mainnet(_) => \"https://rpc.mainnet.near.org\",\n            ChainId::Testnet(_) => \"https://rpc.testnet.near.org\",\n        }\n    }\n\n    pub fn start_options(&self) -> &StartOptions {\n        match &self.chain_id {\n            ChainId::Mainnet(args) | ChainId::Testnet(args) => args\n        }\n    }\n}\n```\n\nAnd now we can create our `get_start_block_height` function with the helper function that will query the final block `final_block_height` (we're going to reuse it, watch for the hands):\n\n```rust title=src/main.rs\nasync fn get_start_block_height(opts: &Opts) -> u64 {\n    match opts.start_options() {\n        StartOptions::FromBlock { height } => *height,\n        StartOptions::FromLatest => final_block_height(opts.rpc_url()).await,\n        // a placeholder\n        StartOptions::FromInterruption => 0,\n    }\n}\n\nasync fn final_block_height(rpc_url: &str) -> u64 {\n    let client = JsonRpcClient::connect(rpc_url);\n    let request = methods::block::RpcBlockRequest {\n        block_reference: BlockReference::Finality(Finality::Final),\n    };\n\n    let latest_block = client.call(request).await.unwrap();\n\n    latest_block.header.height\n}\n```\n\nYou may have noticed the `FromInterruption` and a comment about the placeholder. The reason we've made is to be able to build the application right now to test out that `FromLatest` works as expected.\n\n### Testing `FromLatest`\n\n:::danger Credentials\n\nPlease, ensure you've the credentials set up as described on the [Credentials](credentials.md) page. Otherwise you won't be able to get the code working.", "mimetype": "text/plain", "start_char_idx": 12388, "end_char_idx": 14176, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e20f1cde-5ce8-4fee-b464-a73263033971": {"__data__": {"id_": "e20f1cde-5ce8-4fee-b464-a73263033971", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8368743f-c15f-402b-a1f5-395b2a5a3636", "node_type": "1", "metadata": {}, "hash": "6ee39cd3a929f2059e2bce4122f8dc631d7a6ca7592a7b75ef00eebf62b86d51", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "782d07b8-7798-4e33-8414-db34a1a73649", "node_type": "1", "metadata": {}, "hash": "5e71331ea12b6fc2086d57cd584923735187c55e4b87a3ffb86d41863d22dc80", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nLet's try to build and run our code\n\n```bash\ncargo build --release\n\n./target/release/indexer mainnet from-latest\n```\n\nOnce the code is built you should see something like that in your terminal:\n\n```\n65364116 / shards 4\n65364117 / shards 4\n65364118 / shards 4\n65364119 / shards 4\n65364120 / shards 4\n```\n\nYou can stop it by pressing `CTRL+C`\n\nAnd now we can move on to `FromInterruption`\n\n### `FromInterruption`\n\nIn order to let an indexer know at what block it was interrupted, the indexer needs to store the block height somewhere. And it should do it in the and of the `handle_message` function.\n\nIn the boilerplate code you've copy/pasted in the beginning of this tutorial you can notice a line of code:\n\n```rust\n    std::fs::write(\"last_indexed_block\", streamer_message.block.header.height.to_string().as_bytes()).unwrap();\n```\n\nIt saves the last indexed block height into a file `last_indexed_block` right near the indexer binary.\n\nIn the real world indexer you'd probably go with some other storage, depending on the toolset you're using.\n\nBut to show you the concept, we've decided to go with the easiest approach by saving it to the file.\n\nNow we need to implement the reading the value from the file.\n\n:::note\n\nIf it is a first start of your indexer and you ask it to start from interruption it wouldn't be able to find `last_indexed_block` and would just fail.\n\nIt's not the behavior we expect. That's why we assume you want it to start from interruption (if possible) or from the latest.", "mimetype": "text/plain", "start_char_idx": 14178, "end_char_idx": 15681, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "782d07b8-7798-4e33-8414-db34a1a73649": {"__data__": {"id_": "782d07b8-7798-4e33-8414-db34a1a73649", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e20f1cde-5ce8-4fee-b464-a73263033971", "node_type": "1", "metadata": {}, "hash": "254afcdc2bfa25e8ad73e1b0e17bff0ff682c266365e8b9e429f02f5242d83ca", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2cca49bf-aff3-44dd-86b3-c2ee6e545d88", "node_type": "1", "metadata": {}, "hash": "5a3d04d5dfe433a0422c00918dececb1add58c81e3924da30be70e2cc19eeb81", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nLet's finish up our `get_start_block_height`\n\n```rust title=src/main.rs\nasync fn get_start_block_height(opts: &Opts) -> u64 {\n    match opts.start_options() {\n        StartOptions::FromBlock { height } => *height,\n        StartOptions::FromLatest => final_block_height(opts.rpc_url()).await,\n        // a placeholder\n        StartOptions::FromInterruption => {\n            match &std::fs::read(\"last_indexed_block\") {\n                Ok(contents) => {\n                    String::from_utf8_lossy(contents).parse().unwrap()\n                }\n                Err(e) => {\n                    eprintln!(\"Cannot read last_indexed_block.\\n{}\\nStart indexer from latest final\", e);\n                    latest_block_height(opts.rpc_url()).await\n                }\n            }\n        },\n    }\n}\n```\n\nWhat we are doing here:\n\n- Trying to read the file `last_indexed_block`\n- If the `Result` is `Ok`, we are reading the `contents` and parsing it\n- If the `Result` is `Err` we print a message about the error and call `last_block_height` to get the final block from the network (the fallback we were talking earlier)\n\n### Testing `FromInterruption`\n\nIn order to ensure everything works as expected we will start index from the genesis to store the last indexed block. And then we will start it from interruption to ensure we're not starting from latest.\n\nLet's build and run from genesis.\n\n:::info Genesis Trick\n\nTo start NEAR Lake Framework based indexer from the genesis block, you need to just specify the `start_block_height` as `0`.", "mimetype": "text/plain", "start_char_idx": 15683, "end_char_idx": 17215, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2cca49bf-aff3-44dd-86b3-c2ee6e545d88": {"__data__": {"id_": "2cca49bf-aff3-44dd-86b3-c2ee6e545d88", "embedding": null, "metadata": {"file_path": "./near_dist/lake-start-options.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9cd958a-b304-4d71-b315-93ce645674f3", "node_type": "4", "metadata": {}, "hash": "588ded3c7eaf242f03227000f58a049b27d06a59202ef3bcf94e8fe737d2ddb6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "782d07b8-7798-4e33-8414-db34a1a73649", "node_type": "1", "metadata": {}, "hash": "5e71331ea12b6fc2086d57cd584923735187c55e4b87a3ffb86d41863d22dc80", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n```bash\ncargo build --release\n./target/release/indexer mainnet from-block 0\n```\n\nYou will see something like:\n\n```\n9820210 / shards 1\n9820214 / shards 1\n9820216 / shards 1\n9820219 / shards 1\n9820221 / shards 1\n9820226 / shards 1\n9820228 / shards 1\n9820230 / shards 1\n9820231 / shards 1\n9820232 / shards 1\n9820233 / shards 1\n9820235 / shards 1\n9820236 / shards 1\n9820237 / shards 1\n9820238 / shards 1\n```\n\nStop it by pressing `CTRL+C`\n\nMemorize the last block height you see. In our example it is `9820238`\n\nRestart the indexer from interruption\n\n```bash\n./target/release/indexer mainnet from-interruption\n```\n\nYou should see the indexer logs beginning from the block you've memorized.\n\nPerfect! It's all done. Now you can adjust the code you got in the result to your needs and use it in your indexers.\n\n## Summary\n\nYou've seen the way how you can empower your indexer with the starting options. As you can see there is nothing complex here.\n\n\nYou can find the source code in the [`near-examples/lake-indexer-start-options`](https://github.com/near-examples/lake-indexer-start-options)", "mimetype": "text/plain", "start_char_idx": 17217, "end_char_idx": 18307, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9ad9d8eb-2cc8-479a-97c0-1eaf9c0d3943": {"__data__": {"id_": "9ad9d8eb-2cc8-479a-97c0-1eaf9c0d3943", "embedding": null, "metadata": {"file_path": "./near_dist/cookbook.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7ead75bb-d3a8-445e-97ba-1cda4bc4902d", "node_type": "4", "metadata": {}, "hash": "7ad33362c83230243cde8daeb77b16f90dff5337fec1476a1294347e462c83ba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71632bc4-a81a-439f-ab1b-89eb3d45505d", "node_type": "1", "metadata": {}, "hash": "8209fa3368f1f921ff11efaf397011c71df9776c0e1a7b609fb26de5322e2813", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: cookbook\ntitle: Common Use Cases\nsidebar_label: Cookbook\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe repository contains [many recipes](https://github.com/near/near-api-js/blob/master/packages/cookbook) that you can readily use to solve common case scenarios.\n\n| Name                                                                                                                                                                                                   | Description                                                                                                 |\n|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| ----------------------------------------------------------------------------------------------------------- |\n| **ACCOUNTS**                                                                                                                                                                                           |                                                                                                             |\n| [Create Account](https://github.com/near/near-api-js/blob/master/packages/cookbook/accounts/create-testnet-account.js)                                                                                 | Create [NEAR accounts](/concepts/protocol/account-model) without using NEAR Wallet.                                 |\n| [Access Key Rotation](https://github.com/near/near-api-js/tree/master/packages/cookbook/accounts/access-keys)                                                                                         | Create and delete [access keys](/concepts/protocol/access-keys) for added security.                   |\n| **TRANSACTIONS**                                                                                                                                                                                       |                                                                                                             |\n| [Get Transaction Status](https://github.com/near/near-api-js/blob/master/packages/cookbook/transactions/get-tx-status.js)                                                                              | Gets transaction status using a tx hash and associated account/contract ID.                                 |\n| [Recent Transaction Details](https://github.com/near/near-api-js/blob/master/packages/cookbook/transactions/get-tx-detail.js)                                                                          | Get recent transaction details without using an [indexing](/concepts/advanced/near-indexer-framework) service. |\n| [Batch Transactions](https://github.com/near/near-api-js/blob/master/packages/cookbook/transactions/batch-transactions.js)                                                                             | Sign and send multiple [transactions](/concepts/protocol/transactions).                              |\n| **UTILS**                                                                                                                                                                                              |                                                                                                             |\n| [Deploy Contract](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/deploy-contract.js)                                                                                          | Deploys a smart contract using a pre-compiled WASM file.                                                    |\n| [Calculate Gas](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/calculate-gas.js)                                                                                              | Calculate [gas burnt](/concepts/protocol/gas) from any contract call.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4017, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "71632bc4-a81a-439f-ab1b-89eb3d45505d": {"__data__": {"id_": "71632bc4-a81a-439f-ab1b-89eb3d45505d", "embedding": null, "metadata": {"file_path": "./near_dist/cookbook.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7ead75bb-d3a8-445e-97ba-1cda4bc4902d", "node_type": "4", "metadata": {}, "hash": "7ad33362c83230243cde8daeb77b16f90dff5337fec1476a1294347e462c83ba", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9ad9d8eb-2cc8-479a-97c0-1eaf9c0d3943", "node_type": "1", "metadata": {}, "hash": "21fe6a5f045500ad001855b29ee16ebcb548358fe9705eb3308a9c660a3de583", "class_name": "RelatedNodeInfo"}}, "text": "|\n| [Read State w/o Account](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/get-state.js)                                                                                         | Read state of a contract without instantiating an account.                                                  |\n| [Wrap](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/wrap-near.js) & [Unwrap](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/unwrap-near.js)  NEAR  | Wrap and unwrap NEAR using the `wrap.near` smart contract.                                                  |\n| [Verify Signature](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/verify-signature.js)                                                                                        | Verify a key pair signature.                                                                                |", "mimetype": "text/plain", "start_char_idx": 4045, "end_char_idx": 4985, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c998f679-5fae-4df1-aad0-784628a87ae2": {"__data__": {"id_": "c998f679-5fae-4df1-aad0-784628a87ae2", "embedding": null, "metadata": {"file_path": "./near_dist/near-indexer-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9", "node_type": "4", "metadata": {}, "hash": "6a9dde084bc1b5d81a145e17d9e480cea74226532c947dcf39fcaecf279d61df", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d27617c5-881b-4120-90bc-dabdc6033e09", "node_type": "1", "metadata": {}, "hash": "2f4b185304dfebeb5b9e2522f2dfd4cee0c15779d950d379474ab3e44b2d0474", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"Indexer Framework\"\n---\n\n# NEAR Indexer Framework\n\n:::note GitHub repo\n\nhttps://github.com/near/nearcore/tree/master/chain/indexer\n\n:::\n\n\n:::caution You might be looking for NEAR Lake Framework\n\n[NEAR Lake Framework](near-lake-framework.md) is a lightweight alternative to NEAR Indexer Framework that is recommended for use when centralization can be tolerated.\n\n:::\n\n\n## Description\n\nNEAR Indexer Framework is a Rust package (crate) that embeds [nearcore](https://github.com/near/nearcore), and abstracts away all the complexities of collecting every bit of information related to each produced block in NEAR network. The crate name is [`near-indexer`](https://github.com/near/nearcore/tree/master/chain/indexer), and it is part of the [nearcore repository](https://github.com/near/nearcore).\n\n`near-indexer` is a micro-framework, which provides you with a stream of blocks that are recorded on NEAR network. It is useful to handle real-time \"events\" on the chain.\n\n## Rationale\n\nAs scaling dApps enter NEAR\u2019s mainnet, an issue may arise: how do they quickly and efficiently access state from our deployed smart contracts, and cut out the cruft? Contracts may grow to have complex data structures and querying the network RPC may not be the optimal way to access state data. The NEAR Indexer Framework allows for streams to be captured and indexed in a customized manner. The typical use-case is for this data to make its way to a relational database. Seeing as this is custom per project, there is engineering work involved in using this framework.\n\n## Limitations\n\nNEAR Indexer Framework embeds the full NEAR node and thus requires to sync with the peer-to-peer network and store all the network data locally thus it is subject to the storage requirements, which is hundreds of GBs on SSD if you only need to extract the data that is not older than ~2.5 days, and thousands of GBs on SSD if you want to be able to go over the whole history of the network.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1977, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d27617c5-881b-4120-90bc-dabdc6033e09": {"__data__": {"id_": "d27617c5-881b-4120-90bc-dabdc6033e09", "embedding": null, "metadata": {"file_path": "./near_dist/near-indexer-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9", "node_type": "4", "metadata": {}, "hash": "6a9dde084bc1b5d81a145e17d9e480cea74226532c947dcf39fcaecf279d61df", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c998f679-5fae-4df1-aad0-784628a87ae2", "node_type": "1", "metadata": {}, "hash": "cbf5bb0e1cef5bc25c9c0ab5a89389623f54cdc5f937c02121244383dc414150", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a1aca820-0a47-44d6-8304-2d03d42941db", "node_type": "1", "metadata": {}, "hash": "52fdf42a66caafe850fe30bfabf1db177baf20afdb94e5bba46c14b081f0553a", "class_name": "RelatedNodeInfo"}}, "text": "Also, the network sync process is known to be extremely slow (while the block production is 1 block per second, while the block sync usually reaches 2 blocks per second, which means that it is capable to catch up with the live network at a speed of 1 block per second, so if your node was offline for one hour, it will take one hour to catch up to the tip of the network that keeps getting freshly produced blocks).\n\nNEAR Indexer Framework only exposes the blocks that were finalized. In NEAR Protocol, it takes 3 consecutive blocks to get the block finalized which means that there is at least a 3-second delay between the time when some transaction hits the network, and the time it is finalized and streamed from NEAR Indexer Framework.", "mimetype": "text/plain", "start_char_idx": 1978, "end_char_idx": 2717, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a1aca820-0a47-44d6-8304-2d03d42941db": {"__data__": {"id_": "a1aca820-0a47-44d6-8304-2d03d42941db", "embedding": null, "metadata": {"file_path": "./near_dist/near-indexer-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9", "node_type": "4", "metadata": {}, "hash": "6a9dde084bc1b5d81a145e17d9e480cea74226532c947dcf39fcaecf279d61df", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d27617c5-881b-4120-90bc-dabdc6033e09", "node_type": "1", "metadata": {}, "hash": "2f4b185304dfebeb5b9e2522f2dfd4cee0c15779d950d379474ab3e44b2d0474", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "243d45e8-77d6-4656-9489-95a92f7d048a", "node_type": "1", "metadata": {}, "hash": "1d98aabb427686c4493865e6466dd679d0a2cb4fb6a1b9ee71797b825c24e5ce", "class_name": "RelatedNodeInfo"}}, "text": "If we measure the delay between the moment when a transaction gets submitted from the client device to the moment Indexer Framework-based indexers would receive it, we can see the following timings:\n\n* A serialized transaction being transferred over the Internet to NEAR node (most commonly, through [NEAR JSON RPC broadcast_tx_commit](https://docs.near.org/api/rpc/transactions#send-transaction-await)): around 50ms (it is not measured precisely as it is mostly network latency of TCP handshake + HTTPS handshake)\n* The transaction is routed to the [validation node](https://near-nodes.io/intro/what-is-a-node): around 50ms (again, mostly network latency between the peer nodes)\n* The transaction arrives in the mempool on the validation node and will be delayed at least until the next chunk/block is produced, so if the transaction was received right at the moment when transactions for the current block were selected, it would take 1.2 seconds on mainnet to get the next block produced\n* Once the transaction is included in a block, it will produce a receipt which often will be executed in the next block (another 1.2-second delay) - learn more about the NEAR Protocol data flow [here](../data-flow/near-data-flow.md)\n* Given that block finalization takes 3 blocks (1.2 seconds * 3), Indexer Framework will only get the opportunity to start collecting the information about the block where the transaction was included 3.6 seconds later, but we should also include at least a 50ms delay that is introduced by the network latency when produced blocks propagate back from the validation nodes back to the regular nodes\n* Indexer Framework then collects all the bits of information for the produced block and streams it: around 50-100ms\n* Custom indexer implementation receives the block and there could be additional delays down the line, but that is outside of our scope here\n\nUltimately, it takes at least 3.8 seconds from the moment one submits a transaction to the network, and Indexer Framework-based indexers pick it up, where the finalization time contributes the most of the delay.", "mimetype": "text/plain", "start_char_idx": 2718, "end_char_idx": 4811, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "243d45e8-77d6-4656-9489-95a92f7d048a": {"__data__": {"id_": "243d45e8-77d6-4656-9489-95a92f7d048a", "embedding": null, "metadata": {"file_path": "./near_dist/near-indexer-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9", "node_type": "4", "metadata": {}, "hash": "6a9dde084bc1b5d81a145e17d9e480cea74226532c947dcf39fcaecf279d61df", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1aca820-0a47-44d6-8304-2d03d42941db", "node_type": "1", "metadata": {}, "hash": "52fdf42a66caafe850fe30bfabf1db177baf20afdb94e5bba46c14b081f0553a", "class_name": "RelatedNodeInfo"}}, "text": "In real life scenario, dApps usually need to know the result of the execution, and so it will take a couple of blocks after the transaction is included to get all the receipts executed (read more about the data flow [here](../data-flow/near-data-flow.md)), so the delay between the transaction submission and the result being observed by an indexer could be 5-7 seconds.\n\n## Current Status\n\nIndexer Framework is a tool that provides a straightforward way of getting a stream of finalized NEAR Protocol blocks as soon as possible operating over a decentralized NEAR Protocol peer-to-peer network.\n\nHowever, in our experiments with the Indexer ecosystem, we realized that we need a lightweight foundation to build micro-indexers instead of maintaining a full [nearcore](https://github.com/near/nearcore) node. We considered various solutions to deliver events (Kafka, RabbitMQ, etc), but ultimately we decided to dump all the blocks as is to AWS S3 bucket. This is where NEAR Lake ecosystem was born, learn more about it [here](near-lake-framework.md).\n\nThese days, we use NEAR Indexer Framework to implement [NEAR Lake Indexer](https://github.com/near/near-lake-indexer) and from there we build micro-indexers based on [NEAR Lake Framework](near-lake-framework.md). Having said that, Indexer Framework plays a crucial role in the ecosystem even though most of the indexers these days are implemented without using it directly.\n\n## Applications\n\nSee the [example](https://github.com/nearprotocol/nearcore/tree/master/tools/indexer/example) for further technical details.\n\n- [`near-examples/indexer-tx-watcher-example`](https://github.com/near-examples/indexer-tx-watcher-example) NEAR Indexer example that watches for transaction for specified accounts/contracts", "mimetype": "text/plain", "start_char_idx": 4812, "end_char_idx": 6572, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "add37215-8019-4071-bd22-1de8bfde47a7": {"__data__": {"id_": "add37215-8019-4071-bd22-1de8bfde47a7", "embedding": null, "metadata": {"file_path": "./near_dist/functions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89740441-6750-4968-830c-d180480bfd8d", "node_type": "4", "metadata": {}, "hash": "74348d9438a71e1b462d8e8833259f4ddd9c97dde1b986357018921bc53355c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6327858c-5a8b-4931-8135-1ca9fc8ddf8c", "node_type": "1", "metadata": {}, "hash": "bfc968478f039f6d591d5123c277b8adf38ee47164e838b212d7a0f179a206e5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: functions\ntitle: External Interface\nhide_table_of_contents: true\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\nimport CodeBlock from '@theme/CodeBlock';\nimport {ExplainCode, Block, File} from '@site/src/components/CodeExplainer/code-explainer';\n\nSmart contracts expose functions so users can interact with them. There are different types of functions including `read-only`, `private` and `payable`.\n\n<ExplainCode languages=\"js,rust\">\n\n<Block highlights='{\"js\": \"14-17,20-39,42-44,47-49\", \"rust\": \"22-30,33-58,60-62,64-66\"}' fname=\"auction\">\n\n### Contract's Interface\n\nAll **public** functions in the contract are part of its **interface**. They can be called by anyone, and are the only way to interact with the contract.\n\n</Block>\n\n<Block highlights='{\"rust\": \"\"}' fname=\"auction\" type='details'>\n\n<details>\n<summary> Exposing trait implementations </summary>\n\nFunctions can also be exposed through trait implementations. This can be useful if implementing a shared interface or standard for a contract. This code generation is handled very similarly to basic `pub` functions, but the `#[near]` macro only needs to be attached to the trait implementation, not the trait itself:\n\n```rust\npub trait MyTrait {\n    fn trait_method(&mut self);\n}\n\n#[near]\nimpl MyTrait for MyContractStructure {\n    fn trait_method(&mut self) {\n        // .. method logic here\n    }\n}\n```\n</details>\n\n</Block>\n\n<Block highlights='{\"js\":\"13-17\", \"rust\": \"22-30\"}' fname=\"auction\">\n\n### Initialization Functions\nA contract can opt to have an initialization function. If present, this function must be called before any other to [initialize the contract](./storage.md).\n\n</Block>\n\n<Block highlights='{\"js\": \"13\"}' fname=\"auction\">\n\n#### `@initialize({ privateFunction: true })`\nThe initialization function is marked with the `@initialize` decorator.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1935, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6327858c-5a8b-4931-8135-1ca9fc8ddf8c": {"__data__": {"id_": "6327858c-5a8b-4931-8135-1ca9fc8ddf8c", "embedding": null, "metadata": {"file_path": "./near_dist/functions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89740441-6750-4968-830c-d180480bfd8d", "node_type": "4", "metadata": {}, "hash": "74348d9438a71e1b462d8e8833259f4ddd9c97dde1b986357018921bc53355c8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "add37215-8019-4071-bd22-1de8bfde47a7", "node_type": "1", "metadata": {}, "hash": "fc03910b335c832918077fce65d1a11c54f8d5a8abc8866ea547146331ffc7b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53c6b70d-6a48-4dce-bec6-afad9ec4ed33", "node_type": "1", "metadata": {}, "hash": "aec405a98c582e892595d1140ff2351f9bb203c3d593728497e45e57d3d2f798", "class_name": "RelatedNodeInfo"}}, "text": "</Block>\n\n<Block highlights='{\"rust\": \"20\"}' fname=\"auction\">\n\n#### `#[init]`\nRead-only functions are those that take an **immutable** reference to `self` in Rust.\n\n</Block>\n\n<Block highlights='{\"js\":\"14-17\", \"rust\": \"33-58\"}' fname=\"auction\">\n\n### State Changing Functions\nThe functions that modify the [state](./storage.md) or perform [actions](./actions.md) need to be called by a user with a NEAR account, since a transaction is required to execute them.\n\n</Block>\n\n<Block highlights='{\"js\": \"19\"}' fname=\"auction\">\n\n#### `@call`\nState changing functions are marked with the `@call` decorator.\n\n</Block>\n\n<Block highlights='{\"rust\": \"33\"}' fname=\"auction\">\n\n#### `mut &self`\nState changing functions are those that take a **mutable** reference to `self` in Rust.\n\n</Block>\n\n<Block highlights='{\"js\": \"22,26\", \"rust\": \"36,42\"}' fname=\"auction\" type='info'>\n\n:::tip\n\nThe SDK provides [contextual information](./environment.md), such as which account is calling the function, or what time it is.\n\n:::\n\n</Block>\n\n<Block highlights='{\"js\":\"42-44,47-49\", \"rust\": \"60-62,64-66\"}' fname=\"auction\">\n\n### Read-Only Functions\nContract's functions can be read-only, meaning they don't modify the state. Calling them is free for everyone, and does not require to have a NEAR account.\n\n</Block>\n\n<Block highlights='{\"js\": \"41,46\"}' fname=\"auction\">\n\n#### `@view`\nRead-only functions are marked with the `@view` decorator in TS/JS.\n\n</Block>\n\n<Block highlights='{\"rust\": \"60,64\"}' fname=\"auction\">\n\n#### `&self`\nRead-only functions are those that take an **immutable** reference to `self` in Rust.\n\n</Block>\n\n<Block highlights='{\"js\":\"13\", \"rust\": \"21\"}' fname=\"auction\">\n\n### Private Functions\nMany times you will want to have functions that **are exposed** as part of the contract's interface, but **should not be called directly** by users.\n\nBesides initialization functions, [callbacks from cross-contract calls](./crosscontract.md) should always be `private`.", "mimetype": "text/plain", "start_char_idx": 1937, "end_char_idx": 3890, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53c6b70d-6a48-4dce-bec6-afad9ec4ed33": {"__data__": {"id_": "53c6b70d-6a48-4dce-bec6-afad9ec4ed33", "embedding": null, "metadata": {"file_path": "./near_dist/functions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89740441-6750-4968-830c-d180480bfd8d", "node_type": "4", "metadata": {}, "hash": "74348d9438a71e1b462d8e8833259f4ddd9c97dde1b986357018921bc53355c8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6327858c-5a8b-4931-8135-1ca9fc8ddf8c", "node_type": "1", "metadata": {}, "hash": "bfc968478f039f6d591d5123c277b8adf38ee47164e838b212d7a0f179a206e5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "236b4b0a-6a1c-4646-88f0-8903296b45aa", "node_type": "1", "metadata": {}, "hash": "c37e1e66209c806b383511d5d21b9cd8a34dc9b28ea869acdea55aeffcaa4342", "class_name": "RelatedNodeInfo"}}, "text": "These functions are marked as `private` in the contract's code, and can only be called by the contract itself.\n\n</Block>\n\n<Block highlights='{\"js\": \"13\"}' fname=\"auction\">\n\n#### `decorator({privateFunction: true})`\nPrivate functions are marked by setting `privateFunction: true` in the `@call` or `@initialization` decorators.\n\n</Block>\n\n<Block highlights='{\"rust\": \"21\"}' fname=\"auction\">\n\n#### [#private]\nPrivate functions are marked using the `#[private]` macro in Rust.\n\n</Block>\n\n<Block highlights='{\"js\":\"19,25\", \"rust\": \"32,41\"}' fname=\"auction\">\n\n### Payable Functions\nBy default, functions will panic if the user attaches NEAR Tokens to the call. Functions that accept NEAR Tokens must be marked as `payable`.\n\nWithin the function, the user will have access to the [attached deposit](./environment.md).\n\n</Block>\n\n<Block highlights='{\"js\": \"19,25\"}' fname=\"auction\">\n\n#### `@call({payableFunction: true})`\nPayable functions are marked by setting `payableFunction: true` in the `@call` decorator.\n\n</Block>\n\n<Block highlights='{\"rust\": \"32,41\"}' fname=\"auction\">\n\n#### [#payable]\nPayable functions are marked using the `#[payable]` macro in Rust.\n\n</Block>\n\n<Block highlights='{\"js\":\"3-5\"}' fname=\"example\">\n\n### Internal Functions\nAll the functions we covered so far are part of the interface, meaning they can be called by an external actor.\n\nHowever, contracts can also have private internal functions - such as helper or utility functions - that are **not exposed** to the outside world.\n\nTo create internal private methods in a JS contract, simply omit the `@view` and `@call` decorators.\n\n</Block>\n\n<Block highlights='{\"rust\": \"5-7\"}' fname=\"example\">\n\n### Internal Functions\nAll the functions we covered so far are part of the interface, meaning they can be called by an external actor.\n\nHowever, contracts can also have private internal functions - such as helper or utility functions - that are **not exposed** to the outside world.\n\nTo create internal private methods in a Rust contract, do not declare them as public (`pub fn`).", "mimetype": "text/plain", "start_char_idx": 3892, "end_char_idx": 5939, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "236b4b0a-6a1c-4646-88f0-8903296b45aa": {"__data__": {"id_": "236b4b0a-6a1c-4646-88f0-8903296b45aa", "embedding": null, "metadata": {"file_path": "./near_dist/functions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89740441-6750-4968-830c-d180480bfd8d", "node_type": "4", "metadata": {}, "hash": "74348d9438a71e1b462d8e8833259f4ddd9c97dde1b986357018921bc53355c8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53c6b70d-6a48-4dce-bec6-afad9ec4ed33", "node_type": "1", "metadata": {}, "hash": "aec405a98c582e892595d1140ff2351f9bb203c3d593728497e45e57d3d2f798", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9da90069-240f-4c6a-b078-b828aa69b913", "node_type": "1", "metadata": {}, "hash": "47aab8523d6a7c63445977a899a66213551dad63fda2d523c2d8a2842f60c1b3", "class_name": "RelatedNodeInfo"}}, "text": "</Block>\n\n<Block highlights='{\"rust\": \"5-7\"}' fname=\"example\" type='details'>\n\n  <details>\n  <summary> Separate impl block </summary>\n\n  Another way of not exporting methods is by having a separate `impl Contract` section, that is not marked with `#[near]`.\n\n  ```rust\n  #[near]\n  impl Contract {\n      pub fn increment(&mut self) {\n          self.internal_increment();\n      }\n  }\n  impl Contract {\n      /// This methods is still not exported.\n      pub fn internal_increment(&mut self) {\n          self.counter += 1;\n      }\n  }\n  ```\n\n  </details>\n\n</Block>", "mimetype": "text/plain", "start_char_idx": 5941, "end_char_idx": 6502, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9da90069-240f-4c6a-b078-b828aa69b913": {"__data__": {"id_": "9da90069-240f-4c6a-b078-b828aa69b913", "embedding": null, "metadata": {"file_path": "./near_dist/functions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89740441-6750-4968-830c-d180480bfd8d", "node_type": "4", "metadata": {}, "hash": "74348d9438a71e1b462d8e8833259f4ddd9c97dde1b986357018921bc53355c8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "236b4b0a-6a1c-4646-88f0-8903296b45aa", "node_type": "1", "metadata": {}, "hash": "c37e1e66209c806b383511d5d21b9cd8a34dc9b28ea869acdea55aeffcaa4342", "class_name": "RelatedNodeInfo"}}, "text": "<Block highlights='{\"rust\": \"9-11,13-15\"}' fname=\"example\">\n\n### Pure Functions\nPure functions are a special kind of function that do not require to access data from the state.\n\nThey are useful to return hardcoded values on the contract.\n\n</Block>\n\n<File language=\"js\" fname=\"auction\" url=\"https://github.com/near-examples/auction-examples/blob/main/contract-ts/01-basic-auction/src/contract.ts\" start=\"2\" end=\"51\" />\n\n<File language=\"rust\" fname=\"auction\" url=\"https://github.com/near-examples/auction-examples/blob/main/contract-rs/01-basic-auction/src/lib.rs\" start=\"2\" end=\"72\" />\n\n<CodeBlock language=\"js\" fname=\"example\">\n\n```js\n@NearBindgen({})\nclass Contract {\n  helper_function(params... ){\n    // this function cannot be called from the outside\n  }\n\n  @view({})\n  interface_view(params...){\n    // this function can be called from outside\n  }\n\n  @call({privateFunction: true}){\n    // this function can be called from outside, but\n    // only by the contract's account\n  }\n}\n```\n\n</CodeBlock>\n\n<CodeBlock language=\"rust\" fname=\"example\">\n\n```rs\nconst SOME_VALUE: u64 = 8;\n\n#[near]\nimpl MyContractStructure {\n  fn internal_helper(mut &self, params... ){\n    // this function cannot be called from the outside\n  }\n\n  pub fn public_log(/* Parameters here */) {\n      near_sdk::log!(\"inside log message\");\n  }\n\n  pub fn return_static_u64() -> u64 {\n      SOME_VALUE\n  }\n}\n```\n\n</CodeBlock>\n\n</ExplainCode>", "mimetype": "text/plain", "start_char_idx": 6505, "end_char_idx": 7916, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "93dc479c-c731-4e36-9c6c-a8ab1b5cdc2d": {"__data__": {"id_": "93dc479c-c731-4e36-9c6c-a8ab1b5cdc2d", "embedding": null, "metadata": {"file_path": "./near_dist/attach-to-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "91afd822-25c5-4c84-8b37-1f72e5a2bff6", "node_type": "4", "metadata": {}, "hash": "2b8af2e023a17049d877a856321536efe0e9ef20636aa2952ed50abe53379fd1", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call token.v2.ref-finance.near ft_transfer_call '{\"receiver_id\": \"v2.ref-finance.near\", \"amount\": \"100000000000000000\", \"msg\": \"\"}' --gas 300000000000000 --depositYocto 1 --accountId bob.near\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n'100000000000000000'\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 311, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b572b660-7f76-4df9-b57e-d7908c59b62d": {"__data__": {"id_": "b572b660-7f76-4df9-b57e-d7908c59b62d", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6bc8d9e-4096-4176-803e-25a223ac39d4", "node_type": "1", "metadata": {}, "hash": "cbf33fd1d30ea21877b32c7c9a15c0e4374adec8ff83d2f28c6170522647dd73", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: context-object\ntitle: QueryAPI Context object\nsidebar_label: Context object\n---\n\n## Overview\n\nThe `context` object is a global object made available to developers building indexers with [QueryAPI](intro.md). It provides helper methods to interact with the resources spun up alongside the indexers, such as the GraphQL Endpoint and the database. There are also helper methods to allow specific API calls.\n\n:::caution Under development\n\nThe formatting and changes in this document are still in progress. These changes are not fully featured yet but will be by the time they hit production. Specifically, [auto-complete](#auto-complete) and the `context.db.TableName.methodName` format. \n\n:::\n\n## Main Methods\n\n:::tip\nAll methods are asynchronous, hence why all examples have the `await` keyword in front of the function call. \n:::\n\n### GraphQL\n\nWhen an indexer is published, the SQL DDL written under the `schema.sql` tab is used to spin up a Postgres database. This DB is integrated with Hasura to provide a GraphQL endpoint. This endpoint can be used to interact with your database. \nMaking calls to the Hasura GraphQL endpoint requires an API call, which is restricted in the environment. So, the GraphQL method allows calls to the endpoint related to the indexer. \n\n:::tip\n\nThe GraphQL method was previously the only way to interact with the database. Now, the [DB methods](#db) provide a more accessible functionality. The GraphQL method is better suited for more complex queries and mutations. Also, more information about GraphQL calls can be [found here](https://graphql.org/learn/queries/).\n\n:::\n\n#### Input\n\n```js\nawait context.graphql(operation, variables) \n```\n\nThe operation is a string formatted to match a GraphQL query. The variables are any data objects used in the query.\n \n#### Example\n\n```js\nconst mutationData = {\n  post: {\n    account_id: accountId,\n    block_height: blockHeight,\n    block_timestamp: blockTimestamp,\n    content: content,\n    receipt_id: receiptId,\n  },\n};\n\n\n// Call GraphQL mutation to insert a new post\nawait context.graphql(\n  `mutation createPost($post: dataplatform_near_social_feed_posts_insert_input!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2153, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6bc8d9e-4096-4176-803e-25a223ac39d4": {"__data__": {"id_": "c6bc8d9e-4096-4176-803e-25a223ac39d4", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b572b660-7f76-4df9-b57e-d7908c59b62d", "node_type": "1", "metadata": {}, "hash": "9e18c76556eaf9eba9042d34d4c6f41b0ed5cc4693804f6ecfb8db5796639bbf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "104aa9c4-3673-4f13-8ff1-59435853a8cd", "node_type": "1", "metadata": {}, "hash": "fd652a0fcec4c119400d834132de8504a256e4aea847f7663da55fca1e52655d", "class_name": "RelatedNodeInfo"}}, "text": "){\n    insert_dataplatform_near_social_feed_posts_one(\n    object: $post\n    ) {\n      account_id\n      block_height\n    }\n  }`,\n  mutationData\n);\n```\n\nThe above is a snippet from the social feed indexer. In this example, you have a mutation (which mutates or changes data in the database, instead of a query that merely reads) called `createPost`. The mutation name can be anything. You specify a variable `post` and execute a graphQL method, which inserts the `post` object and returns `account_id` and `block_height` from the newly inserted object. Finally, you pass in `mutationData` as the variable, which is automatically linked to `post` since it's the only field.\n\n:::tip\n\nYou can find other examples of `context.graphql` in the [social_feed indexers](../../../3.tutorials/near-components/indexer-tutorials/feed-indexer.md). \n\n:::\n\n### Set\n\nEach indexer, by default, has a table called `indexer_storage`. It has a field for `key` and `value`, functioning like a key-value store. This table can, of course, be removed from the DDL before publishing. However, it kept the `set` method as an easy way to set some value for a key in that table. This method is used in the default code to set the `height` on each invocation. \n\n#### Input\n\n```js\nawait context.set(key, value)\n```\n\n#### Example\n\n```js\nconst h = block.header().height;\nawait context.set(\"height\", h);\n```\n\n### Log\n\nYour indexing code is executed on a cloud compute instance. Therefore, things like `console.log` are surfaced to the machine itself. To surface `console.log` statements not only to the machine but also back to you under _Indexer Status_, QueryAPI needs to write these logs to the logging table, which is separate from the developer's schema. This [happens in the runner](how-works.md), and QueryAPI maps `console.log` statements in the developer's code to call this function instead, so you can simply use `console.log`, and QueryAPI takes care of the rest.\n\n## DB\n\nThe DB object is a sub-object under `context`. It is accessed through `context.db`.", "mimetype": "text/plain", "start_char_idx": 2153, "end_char_idx": 4185, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "104aa9c4-3673-4f13-8ff1-59435853a8cd": {"__data__": {"id_": "104aa9c4-3673-4f13-8ff1-59435853a8cd", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6bc8d9e-4096-4176-803e-25a223ac39d4", "node_type": "1", "metadata": {}, "hash": "cbf33fd1d30ea21877b32c7c9a15c0e4374adec8ff83d2f28c6170522647dd73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fd5198bb-aa2a-4873-83cf-a67209c8c144", "node_type": "1", "metadata": {}, "hash": "95cc48eff4d8b970ded653cc13f3583abf737a9f32bf304b2fb721c8e03a85b3", "class_name": "RelatedNodeInfo"}}, "text": "Previously, the GraphQL method was the only way to interact with the database. However, writing GraphQL queries and mutations is pretty complicated and overkill for simple interactions. So, simpler interactions are instead made available through the `db` sub-object. This object is built by reading your schema, parsing its information, and generating methods for each table. See below for what methods are generated for each table. The format to access the below methods is as follows: `context.db.[tableName].[methodName]`. Concrete examples are also given below. \n\n:::info Note\n\nOne thing to note is that the process where the code is read is not fully featured.\nIf an `ALTER TABLE ALTER COLUMN` statement is used in the SQL schema, for example, it will fail to parse.\nShould this failure occur, the context object will still be generated but `db` methods will be unavailable. An error will appear on the page saying `types could not be generated`. A more detailed error can be viewed in the browser's console. \n\n:::\n\n\n### DB Methods\n\nThese DB methods are generated when the schema is read. The tables in the schema are parsed, and methods are set under each table name. This makes using the object more intuitive and declarative. \n\nIf the schema is invalid for generating types, then an error will pop up both on screen and in the console. Here's an example:\n\n![auto complete](/docs/queryapi/autocomp-error.png)\n\n### Methods\n\n:::note\n\nExcept for [upsert](#upsert), all of the below methods are used in [social_feed_test indexer](https://dev.near.org/dev-queryapi.dataplatform.near/widget/QueryApi.App?selectedIndexerPath=darunrs.near/social_feed_test). However, keep in mind the current code uses the outdated call structure. An upcoming change will switch to the new method of `context.db.TableName.methodName` instead of `context.db.methodName_tableName`.\n\n:::\n\n### Insert\n\nThis method allows inserting one or more objects into the table preceding the function call. The inserted objects are then returned back with all of their information. Later on, we may implement returning specific fields but for now, we are returning them all. This goes for all methods.", "mimetype": "text/plain", "start_char_idx": 4186, "end_char_idx": 6353, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fd5198bb-aa2a-4873-83cf-a67209c8c144": {"__data__": {"id_": "fd5198bb-aa2a-4873-83cf-a67209c8c144", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "104aa9c4-3673-4f13-8ff1-59435853a8cd", "node_type": "1", "metadata": {}, "hash": "fd652a0fcec4c119400d834132de8504a256e4aea847f7663da55fca1e52655d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a8bcf118-3996-4b32-8eab-45bc88d7d512", "node_type": "1", "metadata": {}, "hash": "89d0787d7ef455915dc52e726e194d89aea90c4abfcd7f263049c083c02bb7a3", "class_name": "RelatedNodeInfo"}}, "text": "#### Input\n\n```js\nawait context.db.TableName.insert(objects)\n```\n\nObjects can be a single object or an array of them. \n\n#### Example\n\n```js\nconst insertPostData = {\n  account_id: accountId,\n  block_height: blockHeight,\n  block_timestamp: blockTimestamp,\n  content: content,\n  receipt_id: receiptId\n};\n// Insert new post to Posts table\nawait context.db.Posts.insert(insertPostData);\n```\n\nIn this example, you insert a single object. But, if you want to insert multiple objects, then you just pass in an array with multiple objects. Such as `[ insertPostDataA, insertPostDataB ]`. \n\n### Select\n\nThis method returns rows that match the criteria included in the call. For now, QueryAPI only supports explicit matches. For example, providing `{ colA: valueA, colB: valueB }` means that rows where `colA` and `colB` match those **EXACT** values will be returned.\n\nThere is also a `limit` parameter which specifies the maximum amount of objects to get. There are no guarantees on ordering. If there are 10 and the limit is 5, any of them might be returned. \n\n#### Input\n\n```js\nawait context.db.TableName.select(fieldsToMatch, limit = null)\n```\n\nThe `fieldsToMatch` is an object that contains `column names: value`, where the value will need to be an exact match for that column. The `limit` parameter defaults to `null`, which means no limit. If a value is provided, it overrides the `null` value and is set to whatever was passed in. All matching rows up to the limit are returned. \n\n#### Example\n\n```js\nconst posts = await context.db.Posts.select(\n  {\n    account_id: postAuthor,\n    block_height: postBlockHeight\n  },\n  1\n);\n```\n\nIn this example, any rows in the `posts` table where the `account_id` column value matches `postAuthor` **AND** `block_height` matches `postBlockheight` will be returned. \n\n### Update\n\nThis method updates all rows that match the `whereObj` values by setting the `updateObj` values. It then returns all impacted rows. The `whereObj` is subject to the same restrictions as the select\u2019s `whereObj`.", "mimetype": "text/plain", "start_char_idx": 6356, "end_char_idx": 8377, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a8bcf118-3996-4b32-8eab-45bc88d7d512": {"__data__": {"id_": "a8bcf118-3996-4b32-8eab-45bc88d7d512", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd5198bb-aa2a-4873-83cf-a67209c8c144", "node_type": "1", "metadata": {}, "hash": "95cc48eff4d8b970ded653cc13f3583abf737a9f32bf304b2fb721c8e03a85b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e013c01b-ab04-42d8-ba9b-e99592a2200d", "node_type": "1", "metadata": {}, "hash": "4659a674ca1d1c708af84669fec8ce4364087d749b389705418354d13787b6f7", "class_name": "RelatedNodeInfo"}}, "text": "#### Input\n\n```js\nawait context.db.TableName.update(whereObj, updateObj)\n```\n\n#### Example\n\n```js\nawait context.db.Posts.update(\n  {id: post.id}, \n  {last_comment_timestamp: currentTimestamp});\n```\n\nIn this example, any rows in the `posts` table where the `id` column matches the value `post.id` will have their `last_comment_timestamp` column value overwritten to the value of `currentTimestamp`. All impacted rows are then returned.\n\n### Upsert\n\nUpsert is a combination of insert and update. First, the insert operation is performed. However, if the object already exists, the update portion is called instead. As a result, the input to the function are objects to be inserted, a `conflictColumns` object, which specifies which column values must conflict for the update operation to occur, and an `updateColumns` which specifies which columns have their values overwritten by the incoming object\u2019s values. The `conflictColumns` and `updateColumns` parameters are both arrays. As usual, all impacted rows are returned. \n\n#### Input\n\n```js\nawait context.db.upsert(objects, conflictColumns, updateColumns)\n```\n\nThe Objects parameter is either one or an array of objects. The other two parameters are arrays of strings. The strings should correspond to column names for that table. \n\n#### Example\n\n```js\nconst insertPostDataA = {\n  id: postId\n  account_id: accountIdA,\n  block_height: blockHeightA,\n  block_timestamp: blockTimeStampA\n};", "mimetype": "text/plain", "start_char_idx": 8380, "end_char_idx": 9815, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e013c01b-ab04-42d8-ba9b-e99592a2200d": {"__data__": {"id_": "e013c01b-ab04-42d8-ba9b-e99592a2200d", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a8bcf118-3996-4b32-8eab-45bc88d7d512", "node_type": "1", "metadata": {}, "hash": "89d0787d7ef455915dc52e726e194d89aea90c4abfcd7f263049c083c02bb7a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4d30ff9-21fe-4f49-a435-8b4d3e6cbda0", "node_type": "1", "metadata": {}, "hash": "03a22a43deb05d3edbb8eb3943644b4f2528b7e133df28df668daa8a4c4a2b44", "class_name": "RelatedNodeInfo"}}, "text": "const insertPostDataB = {\n  id: postId\n  account_id: accountIdB,\n  block_height: blockHeightB,\n  block_timestamp: blockTimeStampB\n};\n// Insert new post to Posts table\nawait context.db.Posts.upsert(\n  [ insertPostDataA, insertPostDataB ], \n  [\u2018account_id\u2019, \u2018id\u2019], \n  [\u2018block_height\u2019, \u2018block_timestamp\u2019);\n```\n\nIn this example, two objects are being inserted. However, if a row already exists in the table where the `account_id` and `id` are the same, then `block_height` and `block_timestamp` would be overwritten in those rows to the value in the object in the call which is conflicting. \n\n### Delete\n\nThis method deletes all objects in the row that match the object passed in. Caution should be taken when using this method. It currently only supports **AND** and exact match, just like in the [select method](#select). That doubles as a safety measure against accidentally deleting a bunch of data. All deleted rows are returned so you can always insert them back if you get back more rows than expected. (Or reindex your indexer if needed) \n\n#### Input\n\n```js\nawait context.db.TableName.delete(whereObj)\n```\n\nAs stated, only a single object is allowed. \n\n#### Example\n\n```js\nawait context.db.delete_post_likes(\n  { \n    account_id: likeAuthorAccountId, \n    post_id: postId\n  }\n);\n```\n\nIn this example, any rows where `account_id` and `post_id` match the supplied value are deleted. All deleted rows are returned. \n\n### Auto Complete\n\n:::tip\nAutocomplete works while writing the schema and before publishing to the chain. In other words, you don't need to publish the indexer to get autocomplete.\n:::\n\nAs mentioned, the [DB methods](#db-methods) are generated when the schema is read. \nIn addition to that, TypeScript types are generated which represent the table itself. These types are set as the parameter types. This provides autocomplete and strong typing in the IDE. These restrictions are not enforced on the runner side and are instead mainly as a suggestion to help guide the developer to use the methods in a way that is deemed correct by QueryAPI.", "mimetype": "text/plain", "start_char_idx": 9818, "end_char_idx": 11878, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a4d30ff9-21fe-4f49-a435-8b4d3e6cbda0": {"__data__": {"id_": "a4d30ff9-21fe-4f49-a435-8b4d3e6cbda0", "embedding": null, "metadata": {"file_path": "./near_dist/context.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e62bf061-306c-4da4-823a-e3e5deae05c2", "node_type": "4", "metadata": {}, "hash": "0df47c20af4c635b0c747b300d64c4c4890414e8658df98f68a2e00a3f7927dc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e013c01b-ab04-42d8-ba9b-e99592a2200d", "node_type": "1", "metadata": {}, "hash": "4659a674ca1d1c708af84669fec8ce4364087d749b389705418354d13787b6f7", "class_name": "RelatedNodeInfo"}}, "text": ":::info Types\n\nYou can also generate types manually. Clicking the `<>` button generates the types. It can be useful for debugging and iterative development while writing the schema.\n\n![auto complete](/docs/queryapi/autocomp-types.png)\n\n:::\n\n#### Compatibility\n\nBy default, current indexers have a `context` object included as a parameter in the top-level `async function getBlock`. This prevents autocomplete, as the local `context` object shadows the global one, preventing access to it. Users need to manually remove the `context` parameter from their indexers to get the autocomplete feature. For example:\n\n```js\nasync function getBlock(block: Block, context) {\n```\n\nshould become\n\n```js\nasync function getBlock(block: Block) {\n```\n\n#### Examples\n\nHere are some screenshots that demonstrate autocomplete on methods, strong typing, and field names:\n\n![auto complete](/docs/queryapi/autocomp1.jpg)\n\n![auto complete](/docs/queryapi/autocomp2.jpg)\n\n![auto complete](/docs/queryapi/autocomp3.jpg)\n\n![auto complete](/docs/queryapi/autocomp4.jpg)\n\n![auto complete](/docs/queryapi/autocomp5.jpg)", "mimetype": "text/plain", "start_char_idx": 11881, "end_char_idx": 12971, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e18e8769-42dd-4b70-9f31-85170bbf6b90": {"__data__": {"id_": "e18e8769-42dd-4b70-9f31-85170bbf6b90", "embedding": null, "metadata": {"file_path": "./near_dist/yield-resume.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d", "node_type": "4", "metadata": {}, "hash": "913eb7f43289b6dae25bcd21f2485fa69fb121534ec330908d04d2e3294950c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b57fc01-32d6-4d78-8a17-e6d23c671b04", "node_type": "1", "metadata": {}, "hash": "f8197d08ece247baa8a46cfe11754e6ce95c191431647eced875c0682cf121d3", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: yield-resume\ntitle: Yield and Resume\n---\nimport {CodeTabs, Language, Github} from '@site/src/components/codetabs'\n\nNEAR smart contracts can **yield** execution, until an **external** service **resumes** them. In practice, the contract yields a **cross-contract call** to itself, until an external service executes a function and the contract decides to resume.\n\nThis is a powerful feature that allows contracts to wait for external events, such as a response from an oracle, before continuing execution (read our [blog post](/blog/yield-resume)!).\n\n:::info\n\nContract can wait for 200 blocks - around 4 minutes - after which the yielded function will execute, receiving a \"timeout error\" as input\n\n:::\n\n---\n\n## Yielding a Promise\n\nLet's look at an example that takes a prompt from a user (e.g. \"What is 2+2\"), and yields the execution until an external service provides a response.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/yield-resume/blob/main/contract/src/lib.rs\"\n            start=\"43\" end=\"70\" />\n  </Language>\n</CodeTabs>\n\n#### Creating a Yielded Promise\nIn the example above, we are creating a [`Promise`](./crosscontract.md#promises) to call the contract's function `return_external_response`.\n\nNotice that we create the `Promise` using `env::promise_yield_create`, which will create an **identifier** for the yielded promise in the `YIELD_REGISTER`.\n\n#### Retrieving the Yielded Promise ID\nWe read the `YIELD_REGISTER` to retrieve the `ID` of our yielded promise. We store the `yield_id` and the user's `prompt` so the external service query them (the contract exposes has a function to list all requests).\n\n#### Returning the Promise\nFinally, we return the `Promise`, which will **not execute immediately**, but will be **yielded** until the external service provides a response.\n\n<details>\n\n<summary> What is that `self.request_id` in the code? </summary>\n\nThe `self.request_id` is an internal unique identifier that we use to keep track of stored requests.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2065, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b57fc01-32d6-4d78-8a17-e6d23c671b04": {"__data__": {"id_": "9b57fc01-32d6-4d78-8a17-e6d23c671b04", "embedding": null, "metadata": {"file_path": "./near_dist/yield-resume.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d", "node_type": "4", "metadata": {}, "hash": "913eb7f43289b6dae25bcd21f2485fa69fb121534ec330908d04d2e3294950c2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e18e8769-42dd-4b70-9f31-85170bbf6b90", "node_type": "1", "metadata": {}, "hash": "26da19274d52767f4fa2aeb61c55f9ef610e421ca4da15a6b7f7d8bdcde8e032", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "405bdafe-92ef-4790-8b01-e68f21063a41", "node_type": "1", "metadata": {}, "hash": "a4149ad37df71886646c7a44d5e88728d907077670885d9965c2afc05f4f6981", "class_name": "RelatedNodeInfo"}}, "text": "This way, we can delete the request once the external service provides a response (or the waiting times out)\n\nSince we only use it to simplify the process of keeping track of the requests, you can remove it if you have a different way of tracking requests (e.g. an indexer)\n\n</details>\n\n---\n\n## Signaling the Resume\n\nThe `env::promise_yield_resume` function allows us to signal which yielded promise should execute, as well as which parameters to pass to the resumed function.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/yield-resume/blob/main/contract/src/lib.rs\"\n            start=\"72\" end=\"75\" />\n  </Language>\n</CodeTabs>\n\nIn the example above, the `respond` function would be called by an external service, passing which promise should be resume (`yield_id`), and the response to the prompt. \n\n:::warning Gatekeeping the Resume\n\nSince the function used to signal the resume is public, developers must make sure to guard it properly to avoid unwanted calls. This can be done by simply checking the caller of the function\n\n:::\n\n---\n\n## The Function that Resumes\n\nThe function being resumed will have access to all parameters passed to it, including those passed during the yield creation, or the external service response.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/yield-resume/blob/main/contract/src/lib.rs\"\n            start=\"77\" end=\"89\" />\n  </Language>\n</CodeTabs>\n\nIn the example above, the `return_external_response` receives two parameters:\n\n1. A `request_id` - passed on [creation](#creating-a-yielded-promise) - which is used to remove the request from the state\n2.", "mimetype": "text/plain", "start_char_idx": 2066, "end_char_idx": 3820, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "405bdafe-92ef-4790-8b01-e68f21063a41": {"__data__": {"id_": "405bdafe-92ef-4790-8b01-e68f21063a41", "embedding": null, "metadata": {"file_path": "./near_dist/yield-resume.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d", "node_type": "4", "metadata": {}, "hash": "913eb7f43289b6dae25bcd21f2485fa69fb121534ec330908d04d2e3294950c2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b57fc01-32d6-4d78-8a17-e6d23c671b04", "node_type": "1", "metadata": {}, "hash": "f8197d08ece247baa8a46cfe11754e6ce95c191431647eced875c0682cf121d3", "class_name": "RelatedNodeInfo"}}, "text": "A `response` - passed when [signaling to resume](#signaling-the-resume) - which contains the external response, or a `PromiseError` if the contract timed out while waiting\n\n:::tip There's plenty of time\n\nThe contract will be able to wait for 200 blocks - around 4 minutes - before timing out\n\n:::\n\n:::info\n\nNotice that, in this particular example, we choose to return a value both if there is a response or a time out\n\nThe reason to not raise an error, is because we are changing the state (removing the request in line `#7`), and raising an error would revert this state change\n\n:::", "mimetype": "text/plain", "start_char_idx": 3821, "end_char_idx": 4404, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "27f02c91-eab8-4a6f-85be-1ef5368101f4": {"__data__": {"id_": "27f02c91-eab8-4a6f-85be-1ef5368101f4", "embedding": null, "metadata": {"file_path": "./near_dist/migrate.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e", "node_type": "4", "metadata": {}, "hash": "3003b99a228d7aba245eda16c8558e1da47cab75671b46bfdee76bd49215d6de", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30cf3722-d06a-4bf9-a682-e8d3b0326e4b", "node_type": "1", "metadata": {}, "hash": "2ee684cccf364b597c0a4f840d7302117427f789824d050330d26edef113d1d8", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: migrate-from-near-lake\ntitle: Migrate from NEAR Lake framework\nsidebar_label: Migrate from Lake framework\n---\n\nIn this article you'll learn how to migrate your [NEAR Lake Framework](../../../1.concepts/3.advanced/near-lake-framework.md) JavaScript indexer to [Near QueryAPI](intro.md), a fully managed solution to build indexer functions,\nextract on-chain data, store it in a database, and be able to query it using GraphQL endpoints.\n\n:::info Supported languages\nCurrently QueryAPI only supports JavaScript, so if your indexer code uses TypeScript, Python, or Rust, you'll have to re-write your indexing logic in JS before you can migrate it.\n:::\n\n## Basic migration\nbuild/near-data-infrastructure/lake-framework/building-indexers/js-lake-indexer\nLet's take a [basic JS indexer](../lake-framework/building-indexers/js-lake-indexer.md) built with NEAR Lake Framework as an example.\nThis indexer simply logs the Block height and the number of shards for each indexed block, using an [indexer handler](../lake-framework/building-indexers/js-lake-indexer.md#create-indexer-handler) function `handleStreamerMessage`.\n\nMigrating this basic indexer to QueryAPI is simple. You only need to migrate the code from the `handleStreamerMessage` function:\n\n```js\nasync function handleStreamerMessage(streamerMessage: types.StreamerMessage): Promise<void> {\n    console.log(`\n        Block #${streamerMessage.block.header.height}\n        Shards: ${streamerMessage.shards.length}\n    `);\n}\n```\n\n### Migrating to QueryAPI\n\n1. To start the migration process, [create a new indexer](../query-api/indexers.md#creating-an-indexer) using [QueryAPI](https://dev.near.org/dataplatform.near/widget/QueryApi.App?view=create-new-indexer). You should see a similar interface like this:\n\n![QueryAPI Indexer Dashboard](/docs/assets/QAPIScreen2.png)\n\n2. Since QueryAPI keeps a compatibility layer with Lake Framework, you don't need to change any references to `streamerMessage` in your indexer function. Just change the function definition to:\n\n```js\nfunction handleStreamerMessage(streamerMessage) {\n    // ... Lake framework indexer code\n}\n```\n\n3.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2128, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30cf3722-d06a-4bf9-a682-e8d3b0326e4b": {"__data__": {"id_": "30cf3722-d06a-4bf9-a682-e8d3b0326e4b", "embedding": null, "metadata": {"file_path": "./near_dist/migrate.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e", "node_type": "4", "metadata": {}, "hash": "3003b99a228d7aba245eda16c8558e1da47cab75671b46bfdee76bd49215d6de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "27f02c91-eab8-4a6f-85be-1ef5368101f4", "node_type": "1", "metadata": {}, "hash": "3385c505f5180df7b2e5cc498e79a5a51a0afebc223b13489f14da9f65e37ca1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "471d4469-598a-4c24-a09e-a143cf27891b", "node_type": "1", "metadata": {}, "hash": "6b8492dc2cc3d04cf9d5654d12ced473e1ce3cc100c85bbaa0a4797cab805e69", "class_name": "RelatedNodeInfo"}}, "text": "Next, add your migrated indexer function to the `getBlock(...)` method, and simply call your function passing `block.streamerMessage` as parameter:\n\n```js\nasync function getBlock(block: Block) {\n  // Add your code here\n\n  function handleStreamerMessage(streamerMessage) {\n    console.log(`\n        Block #${streamerMessage.block.header.height}\n        Shards: ${streamerMessage.shards.length}\n    `);\n    }\n\n  handleStreamerMessage(block.streamerMessage);\n}\n```\n\nThat's all! The basic Lake Framework JS indexer has been migrated to QueryAPI, and you can test it out by using [Debug Mode](index-function.md#local-debug-mode). If you run the indexer using local debug mode, you should see an output like:\n\n```\n    Block #106812523\n    Shards: 4\n```\n\n### Database storage\n\nIf you want to take advantage of QueryAPI's database features, you can also store the indexer results in a Postgres DB. \n\n1. First, create the database schema:\n\n```sql\nCREATE TABLE\n  \"basic\" (\n    \"block_height\" BIGINT NOT NULL,\n    \"shards\" INTEGER NOT NULL,\n    PRIMARY KEY (\"block_height\")\n  );\n```\n\n2. In your indexer JavaScript code, use the [`context.db`](context.md#db) object  to store the results:\n\n\n```js\n    const basicData = {\n      block_height: streamerMessage.block.header.height,\n      shards: streamerMessage.shards.length,\n    };\n\n    context.db.Basic.insert(basicData);\n```\n\n## Advanced migration\n\nFor this example, let's take the TypeScript [NFT indexer](../lake-framework/building-indexers/nft-indexer.md) built with NEAR Lake Framework as reference. This indexer is watching for `nft_mint` [Events](https://nomicon.io/Standards/EventsFormat) and prints some relevant data about minted NFTs.\n\nAs with the previous example, moving this NFT indexer to QueryAPI requires to migrate the code from the [`handleStreamerMessage`](https://github.com/near-examples/near-lake-nft-indexer/blob/5acd543c54ce8025bdc9a88d111df43d8d4d05b8/index.ts#L32) function.", "mimetype": "text/plain", "start_char_idx": 2129, "end_char_idx": 4067, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "471d4469-598a-4c24-a09e-a143cf27891b": {"__data__": {"id_": "471d4469-598a-4c24-a09e-a143cf27891b", "embedding": null, "metadata": {"file_path": "./near_dist/migrate.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e", "node_type": "4", "metadata": {}, "hash": "3003b99a228d7aba245eda16c8558e1da47cab75671b46bfdee76bd49215d6de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "30cf3722-d06a-4bf9-a682-e8d3b0326e4b", "node_type": "1", "metadata": {}, "hash": "2ee684cccf364b597c0a4f840d7302117427f789824d050330d26edef113d1d8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aae1a903-e17d-44a3-bb82-194414bd014b", "node_type": "1", "metadata": {}, "hash": "3be3eff6138f10297cd53f164894a88fdaa7e3f1dd0759f1797d952f9c9ec210", "class_name": "RelatedNodeInfo"}}, "text": "But since it was done in TypeScript, it also needs some additional work as it needs to re-written in JavaScript.\n\n### Migrating to QueryAPI\n\nTo migrate the code, you can take advantage of the [`near-lake-primitives`](https://near.github.io/near-lake-framework-js/modules/_near_lake_primitives.html) provided by QueryAPI, and simplify the indexer logic. For example:\n\n- to get all [`Events`](https://near.github.io/near-lake-framework-js/classes/_near_lake_primitives.events.Event.html) in a `Block`, you can simply call `block.events()`.", "mimetype": "text/plain", "start_char_idx": 4068, "end_char_idx": 4605, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aae1a903-e17d-44a3-bb82-194414bd014b": {"__data__": {"id_": "aae1a903-e17d-44a3-bb82-194414bd014b", "embedding": null, "metadata": {"file_path": "./near_dist/migrate.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e", "node_type": "4", "metadata": {}, "hash": "3003b99a228d7aba245eda16c8558e1da47cab75671b46bfdee76bd49215d6de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "471d4469-598a-4c24-a09e-a143cf27891b", "node_type": "1", "metadata": {}, "hash": "6b8492dc2cc3d04cf9d5654d12ced473e1ce3cc100c85bbaa0a4797cab805e69", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4fe375be-1d59-4983-8820-b017b74baca5", "node_type": "1", "metadata": {}, "hash": "c4f73e100b6c3f08cbaa59e8d56e465f82053c4e7018e3a9c37792318e563d90", "class_name": "RelatedNodeInfo"}}, "text": "- you don't need to iterate through shards and execution outcomes, nor manually parse the `EVENT_JSON` logs to detect events (it's handled by QueryAPI)\n\nHere's a JavaScript implementation of the NFT indexer using QueryAPI features, that provides the same output as the original indexer:\n\n```js\nasync function getBlock(block: Block) {\n  let output = [];\n\n  for (let ev of block.events()) {\n    const r = block.actionByReceiptId(ev.relatedReceiptId);\n    const createdOn = new Date(block.streamerMessage.block.header.timestamp / 1000000);\n\n    try {\n      let event = ev.rawEvent;\n\n      if (event.standard === \"nep171\" && event.event === \"nft_mint\") {\n        let nfts = [];\n        let marketplace = \"unknown\";\n\n        if (r.receiverId.endsWith(\".paras.near\"))\n        {\n          marketplace = \"Paras\";\n          nfts = event.data.map(eventData => ({\n                owner: eventData.owner_id,\n                links: eventData.token_ids.map(\n                  tokenId => `https://paras.id/token/${r.receiverId}::${tokenId.split(\":\")[0]}/${tokenId}`)\n                })\n              );\n        }\n        else if (r.receiverId.match(/\\.mintbase\\d+\\.near$/))\n        {\n          marketplace = \"Mintbase\";\n          nfts = event.data.map(eventData => {\n            const memo = JSON.parse(eventData.memo)\n            return {\n              owner: eventData.owner_id,\n              links: [`https://mintbase.io/thing/${memo[\"meta_id\"]}:${r.receiverId}`]\n            }\n          });\n        }\n\n        output.push({\n          receiptId: ev.relatedReceiptId,\n          marketplace,\n          createdOn,\n          nfts,\n        });\n\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  if (output.length) {\n    console.log(`We caught freshly minted NFTs!`);\n    console.dir(output, { depth: 5 });\n  }\n}\n```\n\nThat's all! The NFT indexer has been migrated to QueryAPI, and you can test it out by using [Debug Mode](index-function.md#local-debug-mode). If you run the indexer using local debug mode, you should see an output like:\n\n```\nBlock Height #66264722\n\nWe caught freshly minted NFTs!", "mimetype": "text/plain", "start_char_idx": 4606, "end_char_idx": 6696, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4fe375be-1d59-4983-8820-b017b74baca5": {"__data__": {"id_": "4fe375be-1d59-4983-8820-b017b74baca5", "embedding": null, "metadata": {"file_path": "./near_dist/migrate.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e", "node_type": "4", "metadata": {}, "hash": "3003b99a228d7aba245eda16c8558e1da47cab75671b46bfdee76bd49215d6de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aae1a903-e17d-44a3-bb82-194414bd014b", "node_type": "1", "metadata": {}, "hash": "3be3eff6138f10297cd53f164894a88fdaa7e3f1dd0759f1797d952f9c9ec210", "class_name": "RelatedNodeInfo"}}, "text": "[\n  {\n    \"receiptId\": \"BAVZ92XdbkAPX4DkqW5gjCvrhLX6kGq8nD8HkhQFVt5q\",\n    \"marketplace\": \"Mintbase\",\n    \"createdOn\": \"2022-05-24T09:36:00.411Z\",\n    \"nfts\": [\n      {\n        \"owner\": \"chiming.near\",\n        \"links\": [\n          \"https://mintbase.io/thing/HOTcn6LTo3qTq8bUbB7VwA1GfSDYx2fYOqvP0L_N5Es:vnartistsdao.mintbase1.near\"\n        ]\n      }\n    ]\n  }\n]\n```\n\n### Database storage\n\nIf you want to take advantage of QueryAPI's database features, you can also store the indexer results in a Postgres DB. \n\n1. First, create the database schema:\n\n```sql\nCREATE TABLE\n  \"nfts\" (\n    \"id\" SERIAL NOT NULL,\n    \"marketplace\" TEXT,\n    \"block_height\" BIGINT,\n    \"timestamp\" DATETIME,\n    \"receipt_id\" TEXT,\n    \"nft_data\" TEXT,\n    PRIMARY KEY (\"id\", \"block_height\")\n  );\n```\n\n2. In your indexer JavaScript code, use the [`context.db`](context.md#db) object  to store the results:\n\n\n```js\n// ... previous code ...\n        output.push({\n          receiptId: ev.relatedReceiptId,\n          marketplace,\n          createdOn,\n          nfts,\n        });\n\n        const nftMintData = {\n          marketplace: marketplace,\n          block_height: block.header().height,\n          timestamp: createdOn,\n          receipt_id: r.receiptId,\n          nft_data: JSON.stringify(event.data),\n        };\n\n        context.db.Nfts.insert(nftMintData);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n// ... code continues ...\n```\n\n:::tip\nYou can find the migrated NFT indexer source code by [clicking here](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=bucanero.near/nft_migrated).\n:::", "mimetype": "text/plain", "start_char_idx": 6698, "end_char_idx": 8309, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2994dfe2-f08c-49ce-986a-f945c939f87e": {"__data__": {"id_": "2994dfe2-f08c-49ce-986a-f945c939f87e", "embedding": null, "metadata": {"file_path": "./near_dist/wallets.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d7e36004-ddff-41b9-a5ec-d7931c9f909a", "node_type": "4", "metadata": {}, "hash": "076386395675f60a6b67e0176e5418a99e1685cf779c22e422119d7e6085cae4", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: wallets\ntitle: Wallets\nsidebar_label: Wallets\n---\n\n# Supported Wallets\n\nHere's a range of user-friendly wallets that support the NEAR blockchain:\n\n- [HERE Wallet](https://www.herewallet.app/): Non-custodial mobile wallet with a friendly user interface and advanced features.\n\n- [Meteor Wallet](https://wallet.meteorwallet.app/): Both a browser and extension wallet, with advanced NFT features.\n\n- [Mintbase Wallet](https://wallet.mintbase.xyz/): A passkey meta-transaction, browser wallet, with advanced NFT and AI features. If you're looking to integrate Mintbase Wallet into your applications, [check this tutorial](https://docs.mintbase.xyz/wallet/integrating-mintbase-wallet) to get started.\n\n- [MyNearWallet](https://mynearwallet.com/): A browser based wallet that offers the same UI and features of `wallet.near.org`.\n\n- [NEAR Mobile](https://nearmobile.app/): A non-custodial wallet that is easy to use and well designed to manage your crypto wherever you go.\n\n- [Nightly Wallet](https://wallet.nightly.app/download): A mobile and extension wallet, with support for multiple ecosystems.\n\n- [Sender Wallet](https://sender.org/): Security-audited mobile & extension wallet with 1M+ users, supporting NEAR & Aurora.\n\n- [WELLDONE Wallet](https://welldonestudio.io/): A multi-chain extension wallet that gives you control over all your assets from a single platform.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1376, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c7131d4-7648-4201-bd9c-1c5de88bffad": {"__data__": {"id_": "2c7131d4-7648-4201-bd9c-1c5de88bffad", "embedding": null, "metadata": {"file_path": "./near_dist/webhooks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70", "node_type": "4", "metadata": {}, "hash": "1494d0f73607b7f858b0a5a02119aacefb40b3c3119dbaa51328303a11098297", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "449602dd-b3e5-4442-826e-3e689e6c37d6", "node_type": "1", "metadata": {}, "hash": "b8059b8de07062afb5919ff16b7801f36b125e9b1806f4b56d91685eefd95951", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 2\nsidebar_label: \"Webhooks Example\"\n---\n\n# Turn on the (Hue) lights with NEAR NFTs and Pagoda Alerts & Triggers\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\n## Overview \n\nHow cool would it be to have your lights turn on or your favorite song on spotify to play when someone bought your NFT on NEAR? \n\nWith the Pagoda Console and IFTTT you can do both in minutes with zero code!\n\n## What will we be doing? \n\nUsing a combination of the [Pagoda Console](https://console.pagoda.co) and [IFTTT](https://ifttt.com) we will turn on our lights when a successful transaction has been processed. \n\nWe will be using the webhook trigger to allow the pagoda console to call an endpoint on IFTTT which will then turn on our HUE Lights \n\n\n### What is IFTTT? \n\nIFTTT stands for \"If This Then That\". It's a platform (at ifttt.com) that provides a variety of services each with their own collection of applets within it that provide some unique functionality. \n\n<img width=\"60%\" src=\"/docs/pagoda/webhook1.png\" />\n\n\n#### If This\n\nIt starts with the \"If This\" Trigger. For example time could be your trigger, so if it's 10pm you can write your own script to turn off your lights. Or something more random like, liking a song on spotify could add the music video to a youtube playlist. \n\nThere are a lot of triggers on this service, but just to name some examples \n\n- Time\n- Temperature \n- Webhooks (what we'll be using)\n\n\n#### Then That \n\nNext comes the \"Then That\" action. An action is what happens when your trigger has been tripped. For example, turning out the lights at 10pm OR turning them on when you mint an NFT on NEAR.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1680, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "449602dd-b3e5-4442-826e-3e689e6c37d6": {"__data__": {"id_": "449602dd-b3e5-4442-826e-3e689e6c37d6", "embedding": null, "metadata": {"file_path": "./near_dist/webhooks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70", "node_type": "4", "metadata": {}, "hash": "1494d0f73607b7f858b0a5a02119aacefb40b3c3119dbaa51328303a11098297", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c7131d4-7648-4201-bd9c-1c5de88bffad", "node_type": "1", "metadata": {}, "hash": "41c6351c104712c1755301668d3e18926711a0fc8f5628ba59d55c6912c63ce4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3430f469-d382-447a-8e94-bd28cbc41a1a", "node_type": "1", "metadata": {}, "hash": "bfe6bce1848b461bccb369f70e9f948378202ed893d41d4af33d3d8a296bfec4", "class_name": "RelatedNodeInfo"}}, "text": "## Step 1: Getting the webhook address\n\nWe will be setting up a webhook trigger so after you make an account on ifttt.com You will see this page.... \n\n<img width=\"70%\" src=\"/docs/pagoda/webhook2.png\" />\n\nGo to the **Services** Tab and search for \"webhook\"\n\n<img width=\"20%\" src=\"/docs/pagoda/webhook3.png\" />\n\nClick on the webhooks icon and then you'll be sent to this page...\n\n<img width=\"50%\" src=\"/docs/pagoda/webhook4.png\" />\n\nClick on the \"Documentation Button\". This should open up a new tab....\n\n<img width=\"70%\" src=\"/docs/pagoda/webhook5.png\" />\n\nLeave that page alone for now we'll come back to it. This is essentially where we get the webhook address we will call for our \"IF\". \n\n## Step 2: Setting up your Trigger \n\nHit the **Create** Button on the upper right corner of the screen..\n\n<img width=\"20%\" src=\"/docs/pagoda/webhook6.png\" />\n\nNext click on the \"If This\" Button...\n\n<img width=\"40%\" src=\"/docs/pagoda/webhook7.png\" />\n\nAgain search for **webhooks** ...\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook8.png\" />\n\nSelect the **Receive a Web Request** trigger...\n\n<img width=\"30%\" src=\"/docs/pagoda/webhook9.png\" />\n\nlet's call this \"**on_transaction**\" then select create trigger \n\n<img width=\"50%\" src=\"/docs/pagoda/webhook10.png\" />\n\n## Step 3: Select your Action \nYou for this tutorial you will need to have:\n- Hue Account\n- Hue Lights\n\nNext click on **Then That** ...\n\n<img width=\"50%\" src=\"/docs/pagoda/webhook11.png\" />\n\nSearch for **Hue**\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook12.png\" />\n\nSelect Turn On Lights \n\n<img width=\"30%\" src=\"/docs/pagoda/webhook13.png\" />\n\nSelect the lights of your choosing but I will simply do all lights.", "mimetype": "text/plain", "start_char_idx": 1684, "end_char_idx": 3346, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3430f469-d382-447a-8e94-bd28cbc41a1a": {"__data__": {"id_": "3430f469-d382-447a-8e94-bd28cbc41a1a", "embedding": null, "metadata": {"file_path": "./near_dist/webhooks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70", "node_type": "4", "metadata": {}, "hash": "1494d0f73607b7f858b0a5a02119aacefb40b3c3119dbaa51328303a11098297", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "449602dd-b3e5-4442-826e-3e689e6c37d6", "node_type": "1", "metadata": {}, "hash": "b8059b8de07062afb5919ff16b7801f36b125e9b1806f4b56d91685eefd95951", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f90bcfc3-5914-4063-9100-c6f7f6d662b0", "node_type": "1", "metadata": {}, "hash": "46d27778ad3e7f83b51700f9c04df9d5d9da512c5a739c9a861193ef9a4fd3e4", "class_name": "RelatedNodeInfo"}}, "text": "If you haven't already create and connect your Hue Account\n\n<img width=\"40%\" src=\"/docs/pagoda/webhook14.png\" />\n\nAfter you do this simply hit **Create Action** Then you'll be redirected here... \n\n<img width=\"50%\" src=\"/docs/pagoda/webhook15.png\" />\n\nAs you can see you can add more than one trigger or action if you'd like. But for now we'll stick to the one. Hit **Continue**\n\n## Step 4: Setting up your endpoint\n\nOnce you hit **Continue** you'll be redirected here...\n\n<img width=\"40%\" src=\"/docs/pagoda/webhook16.png\" />\n\ntake note of the name \"on_transaction\" and copy it.. then hit the **Finish** button...\n\nNext go back to the documentation tab we opened up earlier\n\nWhere it says `{event}` replace everything even the curly braces with \"on_transaction\"\n\n<img width=\"90%\" src=\"/docs/pagoda/webhook17.png\" />\n\nto \n\n<img width=\"90%\" src=\"/docs/pagoda/webhook18.png\" />\n\ncopy that entire line and head on over to console.pagoda.co \n\n## Step 5: Integrating Webhook into Pagoda Console\n\nOnce at console.pagoda.co, you should be greeted by the log-in page. Select the Non-fungible Token (NFT) project to start exploring the NFT contract\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook19.png\" />\n\nHit the \"Deploy and Explore Contract\" Button. This will create a dev account for you and deploy the pre written NFT smart contract onto that account for you. \n\n\n<img width=\"40%\" src=\"/docs/pagoda/webhook20.png\" />\n\nHead to the <kbd>Alerts</kbd> section \n\n<img width=\"20%\" src=\"/docs/pagoda/webhook21.png\" />\n\nAnd select <kbd>+ New Alert</kbd>\n\n<img width=\"70%\" src=\"/docs/pagoda/webhook22.png\" />\n\nYou should see this page...", "mimetype": "text/plain", "start_char_idx": 3349, "end_char_idx": 4967, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f90bcfc3-5914-4063-9100-c6f7f6d662b0": {"__data__": {"id_": "f90bcfc3-5914-4063-9100-c6f7f6d662b0", "embedding": null, "metadata": {"file_path": "./near_dist/webhooks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70", "node_type": "4", "metadata": {}, "hash": "1494d0f73607b7f858b0a5a02119aacefb40b3c3119dbaa51328303a11098297", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3430f469-d382-447a-8e94-bd28cbc41a1a", "node_type": "1", "metadata": {}, "hash": "bfe6bce1848b461bccb369f70e9f948378202ed893d41d4af33d3d8a296bfec4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d26c956-bd9b-416f-80a8-333e6bca6242", "node_type": "1", "metadata": {}, "hash": "a55ddf08ca785b9d04580602fb2895c435fbbe6ac0de4fdbb9ec23a0ef274ef9", "class_name": "RelatedNodeInfo"}}, "text": "<img width=\"80%\" src=\"/docs/pagoda/webhook23.png\" />\n\nSelect the suggested contract which should be dev account that was created. \n\n<img width=\"80%\" src=\"/docs/pagoda/webhook24.png\" />\n\n:::info\nYou can use any contract running on mainnet or testnet for an alert. We'll just use this NFT testnet example for this guide.  \n:::\n\nUnder \"Select Condition\" hit \"Successful Transaction\". This means that for any successful transaction an alert will be sent. In this case for any successful method call the lights will turn on. If you want to, you can select \"function call\" for a specific method to be the trigger. \n\nBut for now, we'll keep it easy and select any Successful Action. \n\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook25.png\" />\n\n\nWe're almost done! Under destination select webhooks. Now that webhook we created earlier go ahead and copy and paste it into here. Then hit \"Create\"\n\n:::tip\nDon't forget to remove the `{}` around the name of your event! `ifttt.com/trigger/...`, not `ifttt.com/{trigger}/...`\n:::\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook26.png\" />\n\nRemember to hit the \"+ Create Alert\" button on this page...\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook27.png\" />\n\n\nNow head on over to the \"Contracts\" Section.\n\n<img width=\"60%\" src=\"/docs/pagoda/webhook28.png\" />\n\nSelect the contract we just created and navigate to the \"Interact\" tab to connect your wallet. \n\n<img width=\"60%\" src=\"/docs/pagoda/webhook29.png\" />", "mimetype": "text/plain", "start_char_idx": 4970, "end_char_idx": 6404, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d26c956-bd9b-416f-80a8-333e6bca6242": {"__data__": {"id_": "2d26c956-bd9b-416f-80a8-333e6bca6242", "embedding": null, "metadata": {"file_path": "./near_dist/webhooks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70", "node_type": "4", "metadata": {}, "hash": "1494d0f73607b7f858b0a5a02119aacefb40b3c3119dbaa51328303a11098297", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f90bcfc3-5914-4063-9100-c6f7f6d662b0", "node_type": "1", "metadata": {}, "hash": "46d27778ad3e7f83b51700f9c04df9d5d9da512c5a739c9a861193ef9a4fd3e4", "class_name": "RelatedNodeInfo"}}, "text": "Now here is the part we've all been waiting for... **Turn on the (hue) lights!** \n\nSelect the `new_default_metadata` function (we are choosing this one because we have to initialize our contract, this is still a transaction which will trigger our new webhook). Fill in the `owner_id` field with your wallet account name and hit send transaction \n\n<img width=\"60%\" src=\"/docs/pagoda/webhook30.png\" />\n\n## Wrapping up \n\nAnd that's it! You've just triggered something in the real world with an event that happened on the NEAR Blockchain. Hopefully this inspires you to create your own webhook using IFTTT and the Pagoda Console. \n\nWe'd love to see what you create! Tag [@PagodaPlatform](https://twitter.com/PagodaPlatform) on Twitter with a novel implementation of a webhook and trigger and we might retweet it. \n\nHappy hacking!", "mimetype": "text/plain", "start_char_idx": 6407, "end_char_idx": 7232, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "827aabb3-a19a-415b-9d50-c30cebf68ba8": {"__data__": {"id_": "827aabb3-a19a-415b-9d50-c30cebf68ba8", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "902a77d8-4572-4d56-aa8c-7578dcd943a6", "node_type": "1", "metadata": {}, "hash": "d9b561807286d11cf335bb83410d56858f776e353d4badb58293caa85ff90cd0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: serialization\ntitle: Notes on Serialization\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nSmart contracts need to be able to **communicate complex data** in a simple way, while\nalso **reading and storing** such data into their states efficiently.\n\nTo achieve such simple communication and efficient storage, smart contracts morph the data\nfrom their complex representation into simpler ones.\n\nThis process of translating **complex objects into simpler single-value** representations is called\n**serialization**. NEAR uses two serialization formats: [JSON](https://www.json.org/json-en.html) and\n[Borsh](https://borsh.io/).\n1. [JSON](https://www.json.org/json-en.html) is used to serialize the contract's input/output during a function call\n2. [Borsh](https://borsh.io/) is used to serialize the contract's state.\n\n---\n\n## Overview of Serialization Formats\n\nLet's give a quick overview of both serialization formats, including their pros and cons, as well as\nan example of what their serializations look like.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1046, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "902a77d8-4572-4d56-aa8c-7578dcd943a6": {"__data__": {"id_": "902a77d8-4572-4d56-aa8c-7578dcd943a6", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "827aabb3-a19a-415b-9d50-c30cebf68ba8", "node_type": "1", "metadata": {}, "hash": "a48b513a30b2c261cc98600499d8b07515ce963d1f94d92933a58521f4a66ea8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80add272-be7d-4460-9dde-4902234a1776", "node_type": "1", "metadata": {}, "hash": "96b92f7e28bfb0ea0016fd2c3c58e4188a22ab824866b2e85a7eb0e28639fb96", "class_name": "RelatedNodeInfo"}}, "text": "<hr className=\"subsection\" />\n\n### [JSON](https://www.json.org/json-en.html): Objects to Strings\n\n#### Features\n - Self-describing format\n - Easy interoperability with JavaScript\n - Multiple implementations readily available\n - But... it is not efficient both in computational times and resulting size\n\n#### Example\n```js\nExample{\n  number: i32 = 2;\n  arr: Vector<i32> = [0, 1];\n}\n\n// serializes to\n\"{\\\"number\\\": 2, \\\"arr\\\": [0, 1]}\"\n```\n\n<hr className=\"subsection\" />\n\n### [Borsh](https://borsh.io/): Objects to Bytes\n\n#### Features\n  - Compact, binary format built to be efficiently (de)serialized\n  - Strict and canonical binary representation\n  - Less overhead: it does not need to store attributes names\n  - But... it is necessary to know the schema to (de)serialize the data\n\n#### Example\n```js\nExample{\n  number: i32 = 2;\n  arr: Vector<i32> = [0, 1];\n}\n\n// serializes into\n[2, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0]\n```\n---\n\n## Serializing Input & Output\nNEAR contracts can implement methods that both take and return complex objects.\nIn order to handle this data in a simple way, JSON serialization is used.\n\nUsing JSON makes it easier for everyone to talk with the contracts, since most\nlanguages readily implement a JSON (de)serializer.\n\n#### Example\nLet's look at this example, written only for educational purposes:\n\n```rust\n#[derive(Serialize)]\n#[serde(crate = \"near_sdk::serde\")]\npub struct A {\n  pub a_number: i32,\n  pub b_number: u128\n}\n\n#[derive(Serialize)]\n#[serde(crate = \"near_sdk::serde\")]\npub struct B {\n  pub success: bool,\n  pub other_number: i32\n}\n\npub fn method(&self, struct_a: A): B {\n  return B{true, 0}\n}\n```", "mimetype": "text/plain", "start_char_idx": 1048, "end_char_idx": 2692, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80add272-be7d-4460-9dde-4902234a1776": {"__data__": {"id_": "80add272-be7d-4460-9dde-4902234a1776", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "902a77d8-4572-4d56-aa8c-7578dcd943a6", "node_type": "1", "metadata": {}, "hash": "d9b561807286d11cf335bb83410d56858f776e353d4badb58293caa85ff90cd0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bcf85e49-7baf-47cd-89c1-6d36584ecd13", "node_type": "1", "metadata": {}, "hash": "39e99f30272b9372ea76c20211c81c16513f028eff2c57462fb8ec54331d37b4", "class_name": "RelatedNodeInfo"}}, "text": "#### Receiving Data\nWhen a user calls the `method`, the contract receives the arguments encoded as a JSON string\n(e.g. `\"{\\\"a_number\\\":0, \\\"b_number\\\":\\\"100\\\"}\"`), and proceed to (de)serialize them into\nthe correct object (`A{0, 100}`) .\n\n\n#### Returning Data\nWhen returning the result, the contract will automatically encode the object `B{true, 0}`\ninto its JSON serialized value: `\"{\\\"success\\\":true, \\\"other_number\\\":0}\"` and return this\nstring.\n\n:::caution JSON Limitations\nSince JSON is limited to `52 bytes` numbers, you cannot use `u64`/`u128` as input\nor output. JSON simply cannot serialize them. Instead, you must use `Strings`.\n\nThe `NEAR SDK RS` currently implements the `near_sdk::json_types::{U64, I64, U128, I128}`\nthat you can use for input / output of data.\n:::\n\n\n---\n\n## Borsh: State Serialization\n\nUnder the hood smart contracts store data using simple **key/value pairs**. This means that\nthe contract needs to translate complex states into simple key-value pairs.\n\nFor this, NEAR contracts use [borsh](https://borsh.io) which is optimized for (de)serializing\ncomplex objects into smaller streams of bytes.\n\n:::tip SDK-JS still uses json\nThe JavaScript SDK uses JSON to serialize objects in the state, but the borsh implementation\nshould arrive soon\n:::\n\n#### Example\nLet's look at this example, written only for educational purposes:\n\n```rust\n#[near(serializers = [json, borsh])]\n#[derive(PanicOnDefault)]\npub struct Contract {\n  string: String,\n  vector: Vector<u8>\n}\n\n#[near]\nimpl Contract {\n  #[init]\n  pub fn init(string: String, first_u8: u8) -> Self {\n    let mut vector: Vector<u8> = Vector::new(\"prefix\".as_bytes());\n    vector.push(&first_u8);\n\n    Self { string, vector }\n  }\n\n  pub fn change_state(&mut self, string: String, number: u8) {\n    self.string = string;\n    self.vector.push(&number);", "mimetype": "text/plain", "start_char_idx": 2695, "end_char_idx": 4522, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bcf85e49-7baf-47cd-89c1-6d36584ecd13": {"__data__": {"id_": "bcf85e49-7baf-47cd-89c1-6d36584ecd13", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80add272-be7d-4460-9dde-4902234a1776", "node_type": "1", "metadata": {}, "hash": "96b92f7e28bfb0ea0016fd2c3c58e4188a22ab824866b2e85a7eb0e28639fb96", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1daf044-b36a-4442-8419-9dea31921364", "node_type": "1", "metadata": {}, "hash": "a20567907c0453fc433b2ec7eb21bac687c73619749c10d54bbf42cd370d49d8", "class_name": "RelatedNodeInfo"}}, "text": "}\n}\n```\n\n#### Empty State On Deploy\nIf we deploy the contract into a new account and immediately ask for the state we will see\nit is empty:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view-state $CONTRACT --finality optimistic\n\n  # Result is: []\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract view-storage $CONTRACT all as-json network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n#### Initializing the State\nIf we initialize the state we can see how Borsh is used to serialize the state\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # initialize with the string \"hi\" and 0\n  near call $CONTRACT init '{\"string\":\"hi\", \"first_u8\":0}' --accountId $CONTRACT\n\n  # check the state\n  near view-state $CONTRACT --utf8 --finality optimistic\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # initialize with the string \"hi\" and 0\n  near contract call-function as-transaction $CONTRACT init json-args '{\"string\":\"hi\", \"first_u8\":0}' prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as $CONTRACT network-config testnet sign-with-keychain send\n\n  # check the state\n  near contract view-storage $CONTRACT all as-json network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<details>\n\n<summary> Result </summary>\n\n```bash\n[\n  {\n    key: 'STATE',\n    value: '\\x02\\x00\\x00\\x00hi\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x06\\x00\\x00\\x00prefix'\n  },\n  { key: 'prefix\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00',", "mimetype": "text/plain", "start_char_idx": 4525, "end_char_idx": 6041, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e1daf044-b36a-4442-8419-9dea31921364": {"__data__": {"id_": "e1daf044-b36a-4442-8419-9dea31921364", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bcf85e49-7baf-47cd-89c1-6d36584ecd13", "node_type": "1", "metadata": {}, "hash": "39e99f30272b9372ea76c20211c81c16513f028eff2c57462fb8ec54331d37b4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fce4a91c-7868-4f8b-abb7-71e4ad524ada", "node_type": "1", "metadata": {}, "hash": "c603225f53a8c92a334dc218c485e182505870700f4895d4b6cd354dbebafb16", "class_name": "RelatedNodeInfo"}}, "text": "value: '\\x00' }\n]\n```\n</details>\n\nThe first key-value is:\n\n```js\nkey: 'STATE'\nvalue: '\\x02\\x00\\x00\\x00hi\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x06\\x00\\x00\\x00prefix'\n```\n\nSince the `Contract` has a structure `string, Vector<u8>` the value is interpreted as:\n\n```bash\n[2, 0, 0, 0, \"h\", \"i\"] -> The `string` has 2 elements: \"h\" and \"i\".", "mimetype": "text/plain", "start_char_idx": 6042, "end_char_idx": 6370, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fce4a91c-7868-4f8b-abb7-71e4ad524ada": {"__data__": {"id_": "fce4a91c-7868-4f8b-abb7-71e4ad524ada", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1daf044-b36a-4442-8419-9dea31921364", "node_type": "1", "metadata": {}, "hash": "a20567907c0453fc433b2ec7eb21bac687c73619749c10d54bbf42cd370d49d8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c8586d33-cedc-4e9a-888a-83f24f612f60", "node_type": "1", "metadata": {}, "hash": "0e24600da80401d57634051937c93379cf49bab16f8cef093bba6fd22604ee0a", "class_name": "RelatedNodeInfo"}}, "text": "[1, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 0, \"prefix\"] -> The Vector has 1 element, and to see the values search for keys that start with (the 6 bytes prefix): \"prefix\"\n```\n\nThen, the second key-value shows the entries of the `Vector` denoted by the `\"prefix\"` string:\n\n```js\nkey: 'prefix\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'\nvalue: '\\x00'\n```\n\n#### Modifying the State\nIf we modify the stored string and add a new number, the state changes accordingly:\n\n<Tabs>\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $CONTRACT change_state '{\"string\":\"bye\", \"number\":1}' --accountId $CONTRACT\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $CONTRACT change_state json-args '{\"string\":\"bye\", \"number\":1}' prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as $CONTRACT network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<details>\n\n<summary> Result </summary>\n\n```bash\n[\n  {\n    key: 'STATE',\n    value: '\\x03\\x00\\x00\\x00bye\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x06\\x00\\x00\\x00prefix'\n  },\n  { key: 'prefix\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00', value: '\\x00' },\n  { key: 'prefix\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00', value: '\\x01' }\n]\n```\n</details>\n\nWe can see that the `STATE` key changes to reflect the storage of the new string (`bye`), and that\nthe vector now has 2 elements.\n\nAt the same time, a new key-value was added adding the new vector entry: the `1u8` we just added.", "mimetype": "text/plain", "start_char_idx": 6371, "end_char_idx": 7826, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c8586d33-cedc-4e9a-888a-83f24f612f60": {"__data__": {"id_": "c8586d33-cedc-4e9a-888a-83f24f612f60", "embedding": null, "metadata": {"file_path": "./near_dist/serialization.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42", "node_type": "4", "metadata": {}, "hash": "fcf24607a797a08b7c9bd5b6423668b1e121c56dbc738f6898f583eae18fbc77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fce4a91c-7868-4f8b-abb7-71e4ad524ada", "node_type": "1", "metadata": {}, "hash": "c603225f53a8c92a334dc218c485e182505870700f4895d4b6cd354dbebafb16", "class_name": "RelatedNodeInfo"}}, "text": "<hr className=\"subsection\" />\n\n<!-- We should see where to move/replicate this -->\n\n### Deserialization Error\nWhen somebody invokes a smart contract method, the first step for the contract is to deserialize\nits own state.\n\nIn the example used above, the contract will start by reading the `STATE` key and\ntry to deserialize its value into an object `Contract{string: String, vector: Vector<u8>}`.\n\nIf you deploy a contract into the account with a different Contract structure, then the\ncontract will fail to deserialize the `STATE` key and panic `Cannot deserialize the contract state`.\n\nTo solve this, you can either:\n1. Rollback to the previous contract code\n2. Implement a method to [migrate the contract's state](../release/upgrade.md)", "mimetype": "text/plain", "start_char_idx": 7828, "end_char_idx": 8567, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "133c6b9d-bb43-4dd9-8923-66a5e89b69c8": {"__data__": {"id_": "133c6b9d-bb43-4dd9-8923-66a5e89b69c8", "embedding": null, "metadata": {"file_path": "./near_dist/03-actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5694c653-ac32-4732-b07b-47ed635523fc", "node_type": "4", "metadata": {}, "hash": "fefb8f5f98d56c1e11e5bfd53e7abaf2e3d056f311f493d5763e665d78fea649", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3574d7a2-c043-4025-8ae3-e38ac888a2b4", "node_type": "1", "metadata": {}, "hash": "2bd8c86729602e76bd89d5bc39ad4b251e9a1ba6c5238c37418ca107835d99e2", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 4\nsidebar_label: \"Actions and sending NEAR\"\ntitle: \"There are several Actions an account can do, including sending the winner of the crossword puzzle NEAR using the Transfer Action\"\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\nimport allActions from '/docs/assets/crosswords/crossword-actions.png';\nimport transferNEAR from '/docs/assets/crosswords/transfer-brand-blue--qiqi04.near--blankworl.png';\nimport yoctoNEAR from '/docs/assets/crosswords/yoctoNEAR-magnifying--jrbemint.near--JrbeMad.jpg';\nimport signerPredecessorCurrent from '/docs/assets/crosswords/predecessor-signer-current--yasuoarts.near--YasuoArt69.png';\n\n# Actions (including sending NEAR)\n\nWe're going to introduce a new Action: `Transfer`. In this chapter, we'd like the first person to solve the crossword puzzle to earn some prize money, sent in NEAR.\n\n<figure>\n    <img src={transferNEAR} alt=\"Two hands exchanging a coin emblazoned with the NEAR Protocol logo. Art created by qiqi04.near\" width=\"400\"/>\n    <figcaption className=\"small\">Art by <a href=\"https://twitter.com/blankworl\" target=\"_blank\" rel=\"noopener noreferrer\">qiqi04.near</a></figcaption>\n</figure>\n<br/>\n\nWe've already used Actions in the [previous chapter](../01-basics/03-hashing-and-unit-tests.md#using-batch-actions), when we deployed and initialized the contract, which used the `DeployContract` and `FunctionCall` Action, respectively.\n\nThe full list of Actions are available at the [NEAR specification site](https://nomicon.io/RuntimeSpec/Actions.html).\n\nBy the end of this entire tutorial we'll have used all the Actions highlighted below:\n\n<img src={allActions} alt=\"All Actions that will be used when the entire crossword puzzle tutorial is complete\" width=\"600\"/>\n\n## Actions from within a contract\n\nWhen we deployed and initialized the contract, we used NEAR CLI in our Terminal or Command Prompt app. At a high level, this might feel like we're lobbing a transaction into the blockchain, instructing it to do a couple actions.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2013, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3574d7a2-c043-4025-8ae3-e38ac888a2b4": {"__data__": {"id_": "3574d7a2-c043-4025-8ae3-e38ac888a2b4", "embedding": null, "metadata": {"file_path": "./near_dist/03-actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5694c653-ac32-4732-b07b-47ed635523fc", "node_type": "4", "metadata": {}, "hash": "fefb8f5f98d56c1e11e5bfd53e7abaf2e3d056f311f493d5763e665d78fea649", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "133c6b9d-bb43-4dd9-8923-66a5e89b69c8", "node_type": "1", "metadata": {}, "hash": "541fe21bff5cfb53659368086afbb75a52e03f1a02903622bb1412a92725128b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "de2284c6-3731-4bcb-b777-d46db4144906", "node_type": "1", "metadata": {}, "hash": "187fea31d092fd8a781e8f301dac1050925c89baee60e8fd53bbfc7570c8f194", "class_name": "RelatedNodeInfo"}}, "text": "It's important to note that you can also execute Actions inside a smart contract, which is what we'll be doing. In the sidebar on the left, you'll see a section called [**Promises**](../../../2.build/2.smart-contracts/anatomy/actions.md), which provides examples of this. Perhaps it's worth mentioning that for the Rust SDK, Promises and Actions are somewhat synonymous.\n\n:::note Actions only effect the current contract\nA contract cannot use the `AddKey` Action on another account, including the account that just called it. It can only add a key to *itself*, if that makes sense.\n\nThe same idea applies for the other actions as well. You cannot deploy a contract to someone else's account, or delete a different account. (Thankfully \ud83d\ude05)\n\nSimilarly, when we use the `Transfer` Action to send the crossword puzzle winner their prize, the amount is being subtracted from the account balance of the account where the crossword contract is deployed.\n\nThe only interesting wrinkle (and what may *seem like* an exception) is when a subaccount is created using the `CreateAccount` Action. During that transaction, you may use Batch Actions to do several things like deploy a contract, transfer NEAR, add a key, call a function, etc. This is common in smart contracts that use a factory pattern, and we'll get to this in future chapters of this tutorial.\n:::\n\n## Define the prize amount\n\nLet's make it simple and hardcode the prize amount. This is how much NEAR will be given to the first person who solves the crossword puzzle, and will apply to all the crossword puzzles we add. We'll make this amount adjustable in future chapters.\n\nAt the top of the `lib.rs` file we'll add this constant:\n\n<Github language=\"rust\" start=\"10\" end=\"11\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/master/contract/src/lib.rs\" />\n\nAs the code comment mentions, this is 5 NEAR, but look at all those zeroes in the code!\n\nThat's the value in yoctoNEAR. This concept is similar to other blockchains. Bitcoin's smallest unit is a satoshi and Ethereum's is a wei.", "mimetype": "text/plain", "start_char_idx": 2015, "end_char_idx": 4076, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "de2284c6-3731-4bcb-b777-d46db4144906": {"__data__": {"id_": "de2284c6-3731-4bcb-b777-d46db4144906", "embedding": null, "metadata": {"file_path": "./near_dist/03-actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5694c653-ac32-4732-b07b-47ed635523fc", "node_type": "4", "metadata": {}, "hash": "fefb8f5f98d56c1e11e5bfd53e7abaf2e3d056f311f493d5763e665d78fea649", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3574d7a2-c043-4025-8ae3-e38ac888a2b4", "node_type": "1", "metadata": {}, "hash": "2bd8c86729602e76bd89d5bc39ad4b251e9a1ba6c5238c37418ca107835d99e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5", "node_type": "1", "metadata": {}, "hash": "33a3a60441afbea603779999fc8a69de33116018989b6f047be0061b5503e6fd", "class_name": "RelatedNodeInfo"}}, "text": "<figure>\n    <img src={yoctoNEAR} alt=\"Depiction of bills of NEAR, coins for partial NEAR, and then a magnifying glass showing a tiny yoctoNEAR next to an ant. Art created by jrbemint.near\"/>\n    <figcaption className=\"full-width\">Art by <a href=\"https://twitter.com/JrbeMad\" target=\"_blank\" rel=\"noopener noreferrer\">jrbemint.near</a></figcaption>\n</figure>\n\n## Adding `Transfer`\n\nIn the last chapter we had a simple function called `guess_solution` that returned `true` if the solution was correct, and `false` otherwise. We'll be replacing that function with `submit_solution` as shown below:\n\n<Github language=\"rust\" start=\"85\" end=\"118\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-2/blob/master/contract/src/lib.rs\" />\n\nNote the last line in this function, which sends NEAR to the predecessor.\n\n:::info Returning a Promise\nThe last line of the function above ends with a semicolon. If the semicolon were removed, that would tell Rust that we'd like to return this Promise object.\n\nIt would be perfectly fine to write the function like this:\n\n```rust\npub fn submit_solution(&mut self, solution: String, memo: String) -> Promise {\n    // \u2026\n    // Transfer the prize money to the winner\n    Promise::new(env::predecessor_account_id()).transfer(PRIZE_AMOUNT)\n}\n```\n:::\n\n## Predecessor, signer, and current account\n\nWhen writing a smart contract you'll commonly want to use `env` and the details it provides. We used this in the last chapter for:\n\n- logging (ex: `env::log_str(\"hello friend\")`)\n- hashing using sha256 (ex: `env::sha256(solution.as_bytes())`)\n\nThere are more functions detailed in the [SDK reference docs](https://docs.rs/near-sdk/latest/near_sdk/env/index.html).\n\nLet's cover three commonly-used functions regarding accounts: predecessor, signer, and current account.\n\n<figure>\n    <img src={signerPredecessorCurrent} alt=\"Illustration of Alice sending a transaction to a smart contract named Banana, which does a cross-contract call to the smart contract Cucumber.", "mimetype": "text/plain", "start_char_idx": 4078, "end_char_idx": 6081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5": {"__data__": {"id_": "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5", "embedding": null, "metadata": {"file_path": "./near_dist/03-actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5694c653-ac32-4732-b07b-47ed635523fc", "node_type": "4", "metadata": {}, "hash": "fefb8f5f98d56c1e11e5bfd53e7abaf2e3d056f311f493d5763e665d78fea649", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "de2284c6-3731-4bcb-b777-d46db4144906", "node_type": "1", "metadata": {}, "hash": "187fea31d092fd8a781e8f301dac1050925c89baee60e8fd53bbfc7570c8f194", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58050f2f-d80d-43a0-9caa-b591e2e46721", "node_type": "1", "metadata": {}, "hash": "bf8d6eca93c636f7b39dc138fdb9712a03e5a68f929aef66770cb30149434be9", "class_name": "RelatedNodeInfo"}}, "text": "Art created by yasuoarts.near\"/>\n    <figcaption className=\"full-width\">Alice sends a transaction to the contract on banana.near, which does a cross-contract call to cucumber.near.<br/>From the perspective of a contract on cucumber.near, we see a list of the predecessor, signer, and current account.<br/>Art by <a href=\"https://twitter.com/YasuoArt69\" target=\"_blank\" rel=\"noopener noreferrer\">yasuoarts.near</a></figcaption>\n</figure><br/><br/>\n\n1. [predecessor account](https://docs.rs/near-sdk/latest/near_sdk/env/fn.predecessor_account_id.html) \u2014 `env::predecessor_account_id()`\n\n    This is the account that was the immediate caller to the smart contract. If this is a simple transaction (no cross-contract calls) from **alice.near** to **banana.near**, the smart contract at **banana.near** considers Alice the predecessor. In this case, Alice would *also* be the signer.\n\n    :::tip When in doubt, use predecessor\n    As we explore the differences between predecessor and signer, know that it's a more common **best practice to choose the predecessor**.\n\n    Using the predecessor guards against a potentially malicious contract trying to \"fool\" another contract that only checks the signer.\n    :::\n\n2. [signer account](https://docs.rs/near-sdk/latest/near_sdk/env/fn.signer_account_id.html) \u2014 `env::signer_account_id()`\n\n    The signer is the account that originally *signed* the transaction that began the blockchain activity, which may or may not include cross-contract calls. If a function calls results in several cross-contract calls, think of the signer as the account that pushed over the first domino in that chain reaction.\n\n    :::caution Beware of middlemen\n    If your smart contract is checking the ownership over some assets (fungible token, NFTs, etc.) it's probably a bad idea to use the signer account.\n\n    A confused or malicious contract might act as a middleman and cause unexpected behavior. If **alice.near** accidentally calls **evil.near**, the contract at that account might do a cross-contract call to **vulnerable-nft.near**, instructing it to transfer an NFT.", "mimetype": "text/plain", "start_char_idx": 6082, "end_char_idx": 8180, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58050f2f-d80d-43a0-9caa-b591e2e46721": {"__data__": {"id_": "58050f2f-d80d-43a0-9caa-b591e2e46721", "embedding": null, "metadata": {"file_path": "./near_dist/03-actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5694c653-ac32-4732-b07b-47ed635523fc", "node_type": "4", "metadata": {}, "hash": "fefb8f5f98d56c1e11e5bfd53e7abaf2e3d056f311f493d5763e665d78fea649", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5", "node_type": "1", "metadata": {}, "hash": "33a3a60441afbea603779999fc8a69de33116018989b6f047be0061b5503e6fd", "class_name": "RelatedNodeInfo"}}, "text": "If **vulnerable-nft.near** only checks the signer account to determine ownership of the NFT, it might unwittingly give away Alice's property. Checking the predecessor account eliminates this problem.\n    :::\n\n3. [current account](https://docs.rs/near-sdk/latest/near_sdk/env/fn.current_account_id.html) \u2014 `env::current_account_id()`\n\n    The current account is \"me\" from the perspective of a smart contract.\n\n    :::tip Why would I use that?\n    There might be various reasons to use the current account, but a common use case is checking ownership or handling callbacks to cross-contract calls.\n    \n    Many smart contracts will want to implement some sort of permission system. A common, rudimentary permission allows certain functions to only be called by the contract owner, AKA the person who owns a private key to the account for this contract.\n\n    The contract can check that the predecessor and current account are the same, and trust offer more permissions like changing contract settings, upgrading the contract, or other privileged modifications.\n    :::", "mimetype": "text/plain", "start_char_idx": 8186, "end_char_idx": 9253, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4da468b8-ab2d-4ac7-853f-55bc14ec90c9": {"__data__": {"id_": "4da468b8-ab2d-4ac7-853f-55bc14ec90c9", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9fbd99fb-54c0-45e3-b244-6d41f32054ec", "node_type": "1", "metadata": {}, "hash": "88fdff8c7c3ab1187ed76a1dc9493e6e05ed7128e959ae3c529ea01ef513cbb8", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: circulating-supply\ntitle: Creating a Circulating Supply\nsidebar_label: Circulating Supply\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn the previous tutorial, you looked at what a fungible token was and how you could define one in your smart contract. In this tutorial, you'll learn how to create a circulating supply belonging to the contract owner and view all the tokens, with their metadata, in the NEAR wallet.\n\nTo get started, either work off the code you wrote in the previous tutorial or switch to the `2.define-a-token` folder in our repo. If you haven't cloned the repository, refer to the [Contract Architecture](1-skeleton.md) to start.\n\nIf you wish to see the finished code for this tutorial, you can find it in the `3.initial-supply` folder.\n\n---\n\n## Introduction\n\nEvery fungible token contract on NEAR has what's known as a circulating supply. This is the number of tokens that exist on the contract and are actively available to trade.\n\nWhen creating your contract, there are many different ways you could implement this to start. A few examples could be:\n- Specify a starting total supply and distribute it based on a set of parameters (Benji gets 20%, Josh gets 2.5%, and the rest goes to Mike).\n- Have a first come first serve pool where everybody claims up to X amount of tokens.\n- Create tokens on demand resulting in a steady increase of the circulating supply overtime up to a specified cap.\n\nThe simplest approach, however, is to specify a total supply when initializing the contract. The entire circulating supply is then created and sent to the owner of the contract. The owner would then be able to transfer or sell the tokens as they wish. Once the initial supply is created, no more FTs could be minted. This means that the circulating supply will always be equal to the total supply.\n\n---\n\n## Modifications to contract\n\nIn order to implement this logic, you'll need to keep track of two things in your smart contract:\n- A mapping of an account to the number of tokens they own.\n- The total supply of tokens.\n\nThe mapping is so that you can easily check or modify the tokens owned by any given account at anytime within your contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9fbd99fb-54c0-45e3-b244-6d41f32054ec": {"__data__": {"id_": "9fbd99fb-54c0-45e3-b244-6d41f32054ec", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4da468b8-ab2d-4ac7-853f-55bc14ec90c9", "node_type": "1", "metadata": {}, "hash": "8255ed122ae109c5dc5a7c587b9acb52db2d55a4ff8d65cf4787865f3b97e357", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e13b7261-f7a4-4748-ad03-42de80d1a2ce", "node_type": "1", "metadata": {}, "hash": "8f980c0d4923463fa467a0114fff8b3449880f8352c9f054a21534f6268b8b00", "class_name": "RelatedNodeInfo"}}, "text": "You'll also need to keep track of the total supply since it's required by the standard that you have a function to query for the supply of tokens on the contract.\n\n<hr className=\"subsection\" />\n\n### Setting the supply\n\nHead over to the `src/lib.rs` file and add the following code to the `Contract` struct.\n\n<Github language=\"rust\" start=\"21\" end=\"33\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs\" />\n\nYou'll now want to add the functionality for depositing the tokens into the owner's account. Do this by creating a helper function that takes an amount and an account ID and performs the deposit logic for you. First create a new file `src/internal.rs` such that your file structure now looks as follows.\n\n```\nsrc\n  \u251c\u2500\u2500 ft_core.rs\n  \u251c\u2500\u2500 internal.rs\n  \u251c\u2500\u2500 lib.rs\n  \u251c\u2500\u2500 metadata.rs\n  \u2514\u2500\u2500 storage.rs\n```\n\nIn the `internal.rs` file, add the following code to create a function called `internal_deposit` which takes an `AccountId` and a `NearToken` as a balance and adds the amount to the account's current supply of FTs.\n\n<Github language=\"rust\" start=\"1\" end=\"18\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/internal.rs\" />\n\nNow that the functionality for depositing FTs is in place, switch back to the `src/lib.rs` file and add the `internal` module:\n\n<Github language=\"rust\" start=\"8\" end=\"10\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs\" />\n\nIn addition, add the following code to the `new` initialization function.\n\n```rust\n#[init]\npub fn new(\n    owner_id: AccountId,\n    total_supply: U128,\n    metadata: FungibleTokenMetadata,\n) -> Self {\n    let casted_total_supply = NearToken::from_yoctonear(total_supply.0);\n    // Create a variable of type Self with all the fields initialized.\n    let mut this = Self {\n        // Set the total supply\n        total_supply: casted_total_supply,\n        // Storage keys are simply the prefixes used for the collections.", "mimetype": "text/plain", "start_char_idx": 2258, "end_char_idx": 4244, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e13b7261-f7a4-4748-ad03-42de80d1a2ce": {"__data__": {"id_": "e13b7261-f7a4-4748-ad03-42de80d1a2ce", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fbd99fb-54c0-45e3-b244-6d41f32054ec", "node_type": "1", "metadata": {}, "hash": "88fdff8c7c3ab1187ed76a1dc9493e6e05ed7128e959ae3c529ea01ef513cbb8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a44d599e-2e39-434f-8e0c-fbd05fc52e44", "node_type": "1", "metadata": {}, "hash": "a60964b01ef3399e0abe35c5562443a6faedb69d1004edce346baf2cfed55d0e", "class_name": "RelatedNodeInfo"}}, "text": "This helps avoid data collision\n        accounts: LookupMap::new(StorageKey::Accounts),\n        metadata: LazyOption::new(\n            StorageKey::Metadata,\n            Some(&metadata),\n        ),\n    };\n\n    // Set the owner's balance to the total supply.\n    this.internal_deposit(&owner_id, casted_total_supply);\n\n    // Return the Contract object\n    this\n}\n```\n\nThis will initialize the total supply to what you passed in and will call the `internal_deposit` function to add the total supply to the owner's account.\n\n<hr className=\"subsection\" />\n\n### Getting the supply\n\nNow that you've created a way to set the total supply, you'll also want a way to query for it as well as the balance for a specific user. The [standard](https://nomicon.io/Standards/Tokens/FungibleToken/Core) dictates that you should have two methods on your smart contract for doing these operations:\n- **`ft_total_supply`**\n- **`ft_balance_of`**\n\nHead on over to the `src/ft_core.rs` file and add the following code to these functions.\n\n<Github language=\"rust\" start=\"83\" end=\"91\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/ft_core.rs\" />\n\nAt this point, you have everything you need to create an initial supply of tokens and query for the balance of a given account. There is, however, a problem that we need to solve. How will the wallet know that the total supply was created and is owned by the contract owner? How would it even know that our contract is a fungible token contract? If you were to deploy the contract and run through the setup process, you would be able to query for the information from the contract but you wouldn't see any FTs in the owner's NEAR wallet.\n\n---\n\n## Events\n\nHave you ever wondered how the wallet knows which FTs you own and how it can display them in the [balances tab](https://testnet.mynearwallet.com/)? Originally, an indexer used to listen for any function calls starting with `ft_` on your account. These contracts were then flagged on your account as likely FT contracts.", "mimetype": "text/plain", "start_char_idx": 4245, "end_char_idx": 6276, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a44d599e-2e39-434f-8e0c-fbd05fc52e44": {"__data__": {"id_": "a44d599e-2e39-434f-8e0c-fbd05fc52e44", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e13b7261-f7a4-4748-ad03-42de80d1a2ce", "node_type": "1", "metadata": {}, "hash": "8f980c0d4923463fa467a0114fff8b3449880f8352c9f054a21534f6268b8b00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07077548-b393-4c51-b95f-ca2e1f341622", "node_type": "1", "metadata": {}, "hash": "fcca5441e79e92eed964cdecd5922a0a1efc4382fef79f71673c8e40448dd2a1", "class_name": "RelatedNodeInfo"}}, "text": "When you navigated to your balances tab, the wallet would then query all those contracts for the number of FTs you owned using the `ft_balance_of` function you just wrote.\n\n<hr className=\"subsection\" />\n\n### The problem {#the-problem}\n\nThis method of flagging contracts was not reliable as each FT-driven application might have its own way of minting or transferring FTs. In addition, it's common for apps to transfer or mint many tokens at a time using batch functions.\n\n<hr className=\"subsection\" />\n\n### The solution {#the-solution}\n\nA standard was introduced so that smart contracts could emit an event anytime FTs were transferred, minted, or burnt. This event was in the form of a log. No matter how a contract implemented the functionality, an indexer could now listen for those standardized logs.\n\nAs per the standard, you need to implement a logging functionality that gets fired when FTs are transferred or minted. In this case, the contract doesn't support burning so you don't need to worry about that for now.\n\nIt's important to note the standard dictates that the log should begin with `\"EVENT_JSON:\"`. The structure of your log should, however, always contain the 3 following things:\n\n- **standard**: the current name of the standard (e.g. `nep141`)\n- **version**: the version of the standard you're using (e.g. `1.0.0`)\n- **event**: a list of events you're emitting.\n\nThe event interface differs based on whether you're recording transfers or mints. The interface for both events is outlined below.\n\n**Transfer events**:\n- **old_owner_id**: the old owner of the FTs.\n- **new_owner_id**: the new owner that the FTs are being transferred to.\n- **amount**: the number of tokens transferred.\n- *Optional* - **memo**: an optional message to include with the event.\n\n**Minting events**:\n- **owner_id**: the owner that the FTs are being minted to.\n- **amount**: the amount of FTs being minted.\n- *Optional* - **memo**: an optional message to include with the event.\n\n<hr className=\"subsection\" />\n\n### Examples {#examples}\n\nIn order to solidify your understanding of the standard, let's walk through two scenarios and see what the logs should look like.", "mimetype": "text/plain", "start_char_idx": 6278, "end_char_idx": 8440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07077548-b393-4c51-b95f-ca2e1f341622": {"__data__": {"id_": "07077548-b393-4c51-b95f-ca2e1f341622", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a44d599e-2e39-434f-8e0c-fbd05fc52e44", "node_type": "1", "metadata": {}, "hash": "a60964b01ef3399e0abe35c5562443a6faedb69d1004edce346baf2cfed55d0e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80820f19-3e00-47e0-9394-23dae5fa758e", "node_type": "1", "metadata": {}, "hash": "f80a02ae89d7c15c8f0afdccbf0e71be3237903fc21d8c11f84d8dd36f930f08", "class_name": "RelatedNodeInfo"}}, "text": "#### Scenario A - simple mint\n\nIn this scenario, the Benji mints 50 FTs to himself and doesn't include a message. The log should look as follows.\n\n```js\nEVENT_JSON:{\n  \"standard\": \"nep141\",\n  \"version\": \"1.0.0\",\n  \"event\": \"ft_mint\",\n  \"data\": [\n    {\"owner_id\": \"benji.testnet\", \"amount\": \"50\"}\n  ]\n}\n```\n\n<hr className=\"subsection\" />\n\n#### Scenario B - batch transfer\n\nIn this scenario, Benji wants to perform a batch transfer. He will send FTs to Jada, Mike, Josh, and Maria. The log is as follows.\n\n```js\nEVENT_JSON:{\n    \"standard\": \"nep141\",\n    \"version\": \"1.0.0\",\n    \"event\": \"ft_transfer\",\n    \"data\": [\n        {\"old_owner_id\": \"benji.near\", \"new_owner_id\": \"josh.near\", \"amount\": \"1\", \"memo\": \"go team\"},\n        {\"old_owner_id\": \"benji.near\", \"new_owner_id\": \"mike.near\", \"amount\": \"9000\"},\n        {\"old_owner_id\": \"benji.near\", \"new_owner_id\": \"jada.near\", \"amount\": \"500\"},\n        {\"old_owner_id\": \"benji.near\", \"new_owner_id\": \"maria.near\", \"amount\": \"500\"}\n    ]\n}\n```\n\n---\n\n## Modifications to the contract {#modifications-to-the-contract}\n\nAt this point, you should have a good understanding of what the end goal should be so let's get to work! Open the `src` directory and create a new file called `events.rs`. This is where your log structs will live.\n\n### Creating the events file {#events-rs}\n\nCopy the following into your file. This will outline the structs for your `EventLog`, `FtMintLog`, and `FtTransferLog`. In addition, we've added a way for `EVENT_JSON:` to be prefixed whenever you log the `EventLog`.", "mimetype": "text/plain", "start_char_idx": 8442, "end_char_idx": 9978, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80820f19-3e00-47e0-9394-23dae5fa758e": {"__data__": {"id_": "80820f19-3e00-47e0-9394-23dae5fa758e", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07077548-b393-4c51-b95f-ca2e1f341622", "node_type": "1", "metadata": {}, "hash": "fcca5441e79e92eed964cdecd5922a0a1efc4382fef79f71673c8e40448dd2a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "72b2b048-cc51-4c90-84c9-9f1b669335a7", "node_type": "1", "metadata": {}, "hash": "97c2afd77b35f424df8ea349e6fbe285daac82a0d97dc85b6ffa912a42f09072", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"16\" end=\"121\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/events.rs\" />\n\n<hr className=\"subsection\" />\n\n### Adding modules and constants {#lib-rs}\n\nNow that you've created a new file, you need to add the module to the `lib.rs` file.\n\n<Github language=\"rust\" start=\"1\" end=\"13\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs\" />\n\n<hr className=\"subsection\" />\n\n### Logging the total supply minted\n\nNow that all the tools are set in place, you can implement the actual logging functionality. Since the contract will only be minting tokens at the very start when it's initialized, it's trivial where you should place the log. Open the `src/lib.rs` file and navigate to the bottom of the `new` initialization function. This is where you'll construct the log for minting.\n\n<Github language=\"rust\" start=\"67\" end=\"98\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs\" />\n\nWith that finished, you've successfully implemented the backbone of the events standard and it's time to start testing.\n\n---\n\n## Deploying the contract {#redeploying-contract}\n\nSince the current contract you have is already initialized, let's create a sub-account and deploy to that instead.\n\n### Creating a sub-account\n\nRun the following command to create a sub-account `events` of your main account with an initial balance of 3 NEAR which will be transferred from the original to your new account.", "mimetype": "text/plain", "start_char_idx": 9980, "end_char_idx": 11493, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "72b2b048-cc51-4c90-84c9-9f1b669335a7": {"__data__": {"id_": "72b2b048-cc51-4c90-84c9-9f1b669335a7", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80820f19-3e00-47e0-9394-23dae5fa758e", "node_type": "1", "metadata": {}, "hash": "f80a02ae89d7c15c8f0afdccbf0e71be3237903fc21d8c11f84d8dd36f930f08", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42ed6ffe-3b59-46a4-8fe2-23651148763d", "node_type": "1", "metadata": {}, "hash": "7afdf2f13783b04ca4ae7b465688629936f98cfa428a3ceddb2054bd6188a113", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near create-account events.$FT_CONTRACT_ID --use-account $FT_CONTRACT_ID --initial-balance 3 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account create-account fund-myself events.$FT_CONTRACT_ID '3 NEAR' autogenerate-new-keypair save-to-keychain sign-as $FT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport EVENTS_FT_CONTRACT_ID=events.$FT_CONTRACT_ID\n```\n\nBuild the contract as you did in the previous tutorials:\n\n```bash\ncd 2.define-a-token\ncargo near build\n```\n\n<hr className=\"subsection\" />\n\n### Deploying and Initialization {#deploying-initialization}\n\nIt's time to deploy the contract, initialize it and mint the total supply. Let's create an initial supply of 1000 `gtNEAR`. Since it has 24 decimal places, you should put `1000` followed by 24 zeros in the total supply field.\n\n```bash\ncargo near deploy $EVENTS_FT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$EVENTS_FT_CONTRACT_ID'\", \"total_supply\": \"1000000000000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nYou can check to see if everything went through properly by looking at the output in your CLI:\n\n```bash\n...\nTransaction sent ...\n--- Logs ---------------------------\nLogs [events.aha_3.testnet]:\n  EVENT_JSON:{\"standard\":\"nep141\",\"version\":\"1.0.0\",\"event\":\"ft_mint\",\"data\":[{\"owner_id\":\"events.goteam.testnet\",\"amount\":\"1000000000000000000000000000\",\"memo\":\"Initial token supply is minted\"}]}\n--- Result -------------------------\nEmpty result\n------------------------------------\n\nContract code has been successfully deployed.\nThe \"new_default_meta\" call to <events.goteam.testnet> on behalf of <events.goteam.testnet> succeeded.", "mimetype": "text/plain", "start_char_idx": 11495, "end_char_idx": 13460, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42ed6ffe-3b59-46a4-8fe2-23651148763d": {"__data__": {"id_": "42ed6ffe-3b59-46a4-8fe2-23651148763d", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "72b2b048-cc51-4c90-84c9-9f1b669335a7", "node_type": "1", "metadata": {}, "hash": "97c2afd77b35f424df8ea349e6fbe285daac82a0d97dc85b6ffa912a42f09072", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "562a468e-34ec-4cb8-af2d-79d603094be6", "node_type": "1", "metadata": {}, "hash": "ae7ea236cf6aae460111bf0b95f7df0d0778162bab028e43a9e7fd16267a054c", "class_name": "RelatedNodeInfo"}}, "text": "...\n```\n\nYou can see that the event was properly logged!\n\n<hr className=\"subsection\" />\n\n### Querying Supply Information {#testing}\n\nYou can now test if your view functions work properly. First, try to query for the total supply.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $EVENTS_FT_CONTRACT_ID ft_total_supply '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $EVENTS_FT_CONTRACT_ID ft_total_supply json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```bash\n'1000000000000000000000000000'\n```\n\nHurray! Now you can check if the balance of the owner account works properly. If you call the following function, it should return the same number as the total supply.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $EVENTS_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"'$EVENTS_FT_CONTRACT_ID'\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $EVENTS_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"'$EVENTS_FT_CONTRACT_ID'\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 13461, "end_char_idx": 14789, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "562a468e-34ec-4cb8-af2d-79d603094be6": {"__data__": {"id_": "562a468e-34ec-4cb8-af2d-79d603094be6", "embedding": null, "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737", "node_type": "4", "metadata": {}, "hash": "97211166cdaa3b5550b984f3dd32da29f7e2a8770a462a5f1c5869da650bee38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "42ed6ffe-3b59-46a4-8fe2-23651148763d", "node_type": "1", "metadata": {}, "hash": "7afdf2f13783b04ca4ae7b465688629936f98cfa428a3ceddb2054bd6188a113", "class_name": "RelatedNodeInfo"}}, "text": "Returns:\n\n```bash\n'1000000000000000000000000000'\n```\n\nIf you query for the balance of some other account, it should return `0`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $EVENTS_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"benjiman.testnet\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $EVENTS_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"benjiman.testnet\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Viewing FTs in the wallet {#viewing-fts-in-wallet}\n\nNow that your contract implements the necessary functions that the wallet uses to pickup your contract and display the FTs, you should be able to see your tokens on display in the [balances tab](https://testnet.mynearwallet.com/).\n\n<img width=\"65%\" src=\"/docs/assets/fts/filled-fts-in-wallet.png\" />\n\n\ud83c\udf89\ud83c\udf89\ud83c\udf89 **This is awesome! Go team!** \ud83c\udf89\ud83c\udf89\ud83c\udf89 You can now see your very first fungible tokens in the wallet!\n\n---\n\n## Conclusion\n\nToday you went through and created the logic for minting a total supply. You then implemented some of the core standard logic and the [events standard](https://nomicon.io/Standards/Tokens/FungibleToken/Event). You created events for [minting](#modifications-to-the-contract) FTs on initialization. You then deployed and [tested](#testing) your changes and saw your very first FTs in the wallet!\n\nIn the next tutorial, you'll look at the basics of registering accounts so that they can transfer and receive FTs.\n\n---\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-sdk-rs: `5.1.0` (with enabled `legacy` feature)\n- cargo-near: `0.6.1`\n- near-cli-rs: `0.11.0`\n:::", "mimetype": "text/plain", "start_char_idx": 14792, "end_char_idx": 16595, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5198dd01-b745-49b7-b2a9-73f4f156ab70": {"__data__": {"id_": "5198dd01-b745-49b7-b2a9-73f4f156ab70", "embedding": null, "metadata": {"file_path": "./near_dist/backend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42", "node_type": "4", "metadata": {}, "hash": "c9b49f397805f6e3ce68c37256422f6ae7d1cf93aa3b450328ba49539339e312", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a54f56ec-f3bb-45d8-a229-618cd29f032b", "node_type": "1", "metadata": {}, "hash": "6bbe000defbc4786f82ecf93658ad3d2aaec03733eef567c50cce3baa13c00d6", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: backend-login\ntitle: Authenticate NEAR Users \n---\nRecently NEAR has approved a new standard that, among other things, enables users to authenticate into a backend service.\n\nThe basic idea is that the user will sign a challenge with their NEAR wallet, and the backend will verify the signature. If the signature is valid, then the user is authenticated.\n\n---\n\n## Backend Auth with a NEAR Wallet\nAuthenticating users is a common use-case for backends and web applications. This enables services to provide a personalized experience to users, and to protect sensitive data.\n\nTo authenticate a user, the backend must verify that the user is who they say they are. To do so, the backend must verify that the user has access to a full-access key that is associated with their account.\n\nFor this three basic steps are needed:\n\n1. Create a challenge for the user to sign.\n2. Ask the user to sign the challenge with the wallet.\n3. Verify the signature corresponds to the user.\n\n### 1.  Create a Challenge\nAssume we want to login the user into our application named `application-name`.\n\nWe first need to create a challenge that the user will sign with their wallet. For this, it is recommended to use a cryptographically secure random number generator to create the challenge.\n\n```js\nimport { randomBytes } from 'crypto'\nconst challenge = randomBytes(32)\nconst message = 'Login with NEAR'\n```\n\n:::note\nHere we use [crypto.randomBytes](https://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback) to generate a 32 byte random buffer.\n:::\n\n### 2. Ask the User to Sign the Challenge\nThe `signMessage` method needed to sign the challenge is supported by these wallets:\n- Meteor Wallet\n- Here Wallet\n- Near Snap\n- Nightly Wallet\n- WELLDONE Wallet\n- NearMobileWallet\n- MyNearWallet\n- Sender\n\n\nThe message that the user needs to sign contains 4 fields:\n- Message: The message that the user is signing.\n- Recipient: The recipient of the message.\n- Nonce: The challenge that the user is signing.\n- Callback URL: The URL that the wallet will call with the signature.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2069, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a54f56ec-f3bb-45d8-a229-618cd29f032b": {"__data__": {"id_": "a54f56ec-f3bb-45d8-a229-618cd29f032b", "embedding": null, "metadata": {"file_path": "./near_dist/backend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42", "node_type": "4", "metadata": {}, "hash": "c9b49f397805f6e3ce68c37256422f6ae7d1cf93aa3b450328ba49539339e312", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5198dd01-b745-49b7-b2a9-73f4f156ab70", "node_type": "1", "metadata": {}, "hash": "351ac92c09560219d96d136bcc1e5686bd92f8ec6ae6e2f0722fa8fdac1407a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e5c60dcc-6aa4-41d8-b37a-464f2f2c7499", "node_type": "1", "metadata": {}, "hash": "c1c2b030ec22022877b2a4a435a9127bc8da58ba73997a190744057687ea1e99", "class_name": "RelatedNodeInfo"}}, "text": "```js\n// Assuming you setup a wallet selector so far\nconst signature = wallet.signMessage({ message, recipient, nonce: challenge, callbackUrl: <server-auth-url> })\n```\n\n### 3. Verify the Signature\nOnce the user has signed the challenge, the wallet will call the `callbackUrl` with the signature. The backend can then verify the signature.\n\n```js\nconst naj = require('near-api-js')\nconst js_sha256 = require(\"js-sha256\")\n\nexport async function authenticate({ accountId, publicKey, signature }) {\n  // A user is correctly authenticated if:\n  // - The key used to sign belongs to the user and is a Full Access Key\n  // - The object signed contains the right message and domain\n  const full_key_of_user = await verifyFullKeyBelongsToUser({ accountId, publicKey })\n  const valid_signature = verifySignature({ publicKey, signature })\n  return valid_signature && full_key_of_user\n}\n\nexport function verifySignature({ publicKey, signature }) {\n  // Reconstruct the payload that was **actually signed**\n  const payload = new Payload({ message: MESSAGE, nonce: CHALLENGE, recipient: APP, callbackUrl: cURL });\n  const borsh_payload = borsh.serialize(payloadSchema, payload);\n  const to_sign = Uint8Array.from(js_sha256.sha256.array(borsh_payload))\n\n  // Reconstruct the signature from the parameter given in the URL\n  let real_signature = Buffer.from(signature, 'base64')\n\n  // Use the public Key to verify that the private-counterpart signed the message\n  const myPK = naj.utils.PublicKey.from(publicKey)\n  return myPK.verify(to_sign, real_signature)\n}\n\nexport async function verifyFullKeyBelongsToUser({ publicKey, accountId }) {\n  // Call the public RPC asking for all the users' keys\n  let data = await fetch_all_user_keys({ accountId })\n\n  // if there are no keys, then the user could not sign it!", "mimetype": "text/plain", "start_char_idx": 2071, "end_char_idx": 3863, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e5c60dcc-6aa4-41d8-b37a-464f2f2c7499": {"__data__": {"id_": "e5c60dcc-6aa4-41d8-b37a-464f2f2c7499", "embedding": null, "metadata": {"file_path": "./near_dist/backend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42", "node_type": "4", "metadata": {}, "hash": "c9b49f397805f6e3ce68c37256422f6ae7d1cf93aa3b450328ba49539339e312", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a54f56ec-f3bb-45d8-a229-618cd29f032b", "node_type": "1", "metadata": {}, "hash": "6bbe000defbc4786f82ecf93658ad3d2aaec03733eef567c50cce3baa13c00d6", "class_name": "RelatedNodeInfo"}}, "text": "if (!data || !data.result || !data.result.keys) return false\n\n  // check all the keys to see if we find the used_key there\n  for (const k in data.result.keys) {\n    if (data.result.keys[k].public_key === publicKey) {\n      // Ensure the key is full access, meaning the user had to sign\n      // the transaction through the wallet\n      return data.result.keys[k].access_key.permission == \"FullAccess\"\n    }\n  }\n\n  return false // didn't find it\n}\n\n// Aux method\nasync function fetch_all_user_keys({ accountId }) {\n  const keys = await fetch(\n    \"https://rpc.testnet.near.org\",\n    {\n      method: 'post',\n      headers: { 'Content-Type': 'application/json; charset=utf-8' },\n      body: `{\"jsonrpc\":\"2.0\", \"method\":\"query\", \"params\":[\"access_key/${accountId}\", \"\"], \"id\":1}`\n    }).then(data => data.json()).then(result => result)\n  return keys\n}\n\nmodule.exports = { authenticate, verifyFullKeyBelongsToUser, verifySignature };\n```", "mimetype": "text/plain", "start_char_idx": 3866, "end_char_idx": 4798, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b3d97e0-86b2-493f-be52-05a6da7b674d": {"__data__": {"id_": "1b3d97e0-86b2-493f-be52-05a6da7b674d", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b516ae5e-5a59-48d7-854f-9ada8c905474", "node_type": "1", "metadata": {}, "hash": "74547dbdb8b67de9d12ecb2725375adfaf0d04870e12d3b2a72eee3edbb1ed44", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: fastauth-sdk\ntitle: FastAuth SDK\nsidebar_label: FastAuth (Email Login)\n---\n\nFastAuth is a key management system that allows users to **recover or sign-up for** a NEAR account using their **email address**. Furthermore, it allows to subsidize gas for a certain smart contract, so users can interact with it without having to fund their account. \n\n---\n\n## FastAuth Components\n\nFastAuth is comprised of 3 main elements:\n\n1. **FastAuth Signer App**: A module that allow FastAuth users to sign transactions.\n2. **MPC Recovery Service**: A service to create and restore user accounts, as well as signing transactions on behalf of the user.\n3. **Transaction Relayer**: A server that relays transactions to the NEAR network on behalf of the user.\n\n---\n\n### Setting up Firebase\n\n#### Create a project\n\n- Go to [Firebase](https://firebase.com)\n- Create or sign in to an account\n- Go to \"Get started\", then \"Add project\"\n- Call this project `my-fastauth-issuer`\n- Disable Google Analytics (recommended)\n- Click on \"Create project\"\n\n#### Set up passwordless authentication\n\n- Go to \"Authentication\", then \"Get started\", and \"Add new provider\"\n- Enable \"Email/Password\" and \"Email link (passwordless sign-in)\"\n- Hit \"Save\"\n\n#### Add user device information to Firestore\n\n- Return to \"Project Overview\"\n- Go to \"Cloud Firestore\", then \"Create database\"\n- Select \"Start in production mode\", then \"Next\"\n- Select your preferred location, then \"Enable\"\n- Go to the \"Rules\" tab\n- Change the rules to the following:\n\n```\nrules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n  \tmatch /users/{userId}/{document=**} {\n      allow create, read, update, delete: if request.auth != null && request.auth.uid == userId;\n    }\n    match /publicKeys/{publicKey} {\n      allow create, delete: if request.auth != null;\n      allow read : if true;\n      allow update: if false;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1890, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b516ae5e-5a59-48d7-854f-9ada8c905474": {"__data__": {"id_": "b516ae5e-5a59-48d7-854f-9ada8c905474", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b3d97e0-86b2-493f-be52-05a6da7b674d", "node_type": "1", "metadata": {}, "hash": "aeaebd38123310728fa5663130b51293862d494fcd8ec82372851629935a1579", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e743d462-0298-4921-a3fc-e8d7c3747187", "node_type": "1", "metadata": {}, "hash": "b1903b0343e478544a41005c36462d8c003c4ada8dc89a9e511d4e10c93b796e", "class_name": "RelatedNodeInfo"}}, "text": "}\n  }\n}\n```\n\n- Hit \"Publish\"\n- Go to the \"Data\" tab\n- Click on \"Start collection\"\n- Set the Collection ID to `users` and hit \"Next\"\n- Add a Document ID of `root` and press \"Save\"\n- Click on \"Start collection\"\n- Set the Collection ID to `publicKeys` and hit \"Next\"\n- Add a Document ID of `root` and press \"Save\"\n\n#### Get the application credentials\n\n- Press the gear button next to \"Project Overview\", and go to \"Project settings\"\n- Under \"Your apps\", click on the `</>` button\n- Set the app nickname as `issuer-gcp` and hit \"Register app\"\n- You should see the code needed for initialization and authentication of Firestore, such as:\n```js\n// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n\nconst firebaseConfig = {\n  apiKey: \"apikey\",\n  authDomain: \"my-fastauth-issuer-123.firebaseapp.com\",\n  projectId: \"my-fastauth-issuer-123\",\n  storageBucket: \"my-fastauth-issuer-123.appspot.com\",\n  messagingSenderId: \"12345678910\",\n  appId: \"1:12345678910:web:12345678910\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n```\n\n### Setting up your relayer\n\n#### Setting up a NEAR account\n\nFirst ensure that `cargo` is installed on your local machine. Try [rustup](https://rustup.rs/) if you haven't already installed it.\n\n```bash\ncargo install near-cli-rs\nNEAR_ENV=mainnet\nnear account create-account fund-later use-auto-generation save-to-folder ~/.near-credentials/implicit\n```\n\nThis should output something like:\n\n```bash\nThe file \"~/.near-credentials/implicit/275f14eecb0afcb1f46f2b71b7933afd2de6d4ae8b08e9b11fc538a5a81406b7.json\" was saved successfully\n```\n\nIn this example.", "mimetype": "text/plain", "start_char_idx": 1895, "end_char_idx": 3705, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e743d462-0298-4921-a3fc-e8d7c3747187": {"__data__": {"id_": "e743d462-0298-4921-a3fc-e8d7c3747187", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b516ae5e-5a59-48d7-854f-9ada8c905474", "node_type": "1", "metadata": {}, "hash": "74547dbdb8b67de9d12ecb2725375adfaf0d04870e12d3b2a72eee3edbb1ed44", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c", "node_type": "1", "metadata": {}, "hash": "ec7e3d0f2ba9d1412c0af7b2c5ad736e0171bf26a79dee74f27ce63a4d164c6b", "class_name": "RelatedNodeInfo"}}, "text": "`275f14eecb0afcb1f46f2b71b7933afd2de6d4ae8b08e9b11fc538a5a81406b7` is your funded account. We'll refer to this as `$FUNDED_ACCOUNT` from now on.\n\nSend some NEAR to this address.\n\n#### Adding multiple keys (Recommended)\n\nThis account has been created with one key. However, due to [this](https://near.zulipchat.com/#narrow/stream/295302-general/topic/.E2.9C.94.20The.20trouble.20with.20nonces/near/389649443), you should create an account with `N` keys where `N` is the number of requests you expect to get in a second, at peak load.\n\nTo generate an additional key, run the following command:\n\n```bash\nnear account add-key $FUNDED_ACCOUNT grant-full-access autogenerate-new-keypair save-to-keychain network-config mainnet sign-with-access-key-file ~/.near-credentials/implicit/$FUNDED_ACCOUNT.json send\n```\n\n\n#### Deploying the relayer\n\nRun the following command:\n\n```bash\ngit clone https://github.com/near/pagoda-relayer-rs\n```\n\nGo to `config.toml` and change:\n\n```toml\nnetwork = \"mainnet\"\nnum_keys = 3  # correlates to the number of keys in `keys_filenames`. Will be optional in the future.\nrelayer_account_id = \"$FUNDED_ACCOUNT\"\nkeys_filenames = [\n    # The original account\n    \"~/.near-credentials/mainnet/$FUNDED_ACCOUNT.json\",\n\n    # Other keys you've optionally created. This will allow rotating through each key as to avoid nonce races.", "mimetype": "text/plain", "start_char_idx": 3706, "end_char_idx": 5050, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c": {"__data__": {"id_": "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e743d462-0298-4921-a3fc-e8d7c3747187", "node_type": "1", "metadata": {}, "hash": "b1903b0343e478544a41005c36462d8c003c4ada8dc89a9e511d4e10c93b796e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c", "node_type": "1", "metadata": {}, "hash": "2bde87b7506d558941512ab2a501e93e1fb131bd91da12b1f042886aeecb408d", "class_name": "RelatedNodeInfo"}}, "text": "\"~/.near-credentials/mainnet/$FUNDED_ACCOUNT/ed25519_4ryLkp4AuzBD8yuyRJKb91hvHZ4zgqouWcJzu1gNEvLv.json\",\n    \"~/.near-credentials/mainnet/$FUNDED_ACCOUNT/ed25519_7K3jF8Ft5dKFEPYRH1T4mncvsZGgSoGKsvsnnKEmqubT.json\"\n]\n```\n\nOptionally, if you need to generate additional access keys for the `$FUNDED_ACCOUNT`, run the following command N times. Note that this will create keys for implicit accounts, but we'll then tie them to `$FUNDED_ACCOUNT`.\n\n```bash\nnear generate-key\nnear add-key $FUNDED_ACCOUNT exampleImplicitPublicKeyCxg2wgFYrdLTEkMu6j5D6aEZqTb3kXbmJygS48ZKbo1S\n```\n\nThen run:\n\n```bash\ndocker compose up\n```\n\nYou should do this on a VM server of your choice. We will refer to the URL of this VM as `$RELAYER_URL` from now on.\n\n### Setting up the frontend\n\n#### Deploying the signer app\n\n- Go to GCP's Cloud Run console and press \"Create Service\".\n- In the field \"Container image URL\", paste `nearprotocol/fast-auth-sdk-frontend:latest`.\n- Under **Container(s), Volumes, Networking, Security** set **Container port** to `80`\n- Go to the \"Container, Networking, Security\" fold out and then \"Environment Variables\"\n- Click on \"Add Variable\"\n- Set the following environment variables from the `firebaseConfig` you generated earlier.", "mimetype": "text/plain", "start_char_idx": 5055, "end_char_idx": 6288, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c": {"__data__": {"id_": "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c", "node_type": "1", "metadata": {}, "hash": "ec7e3d0f2ba9d1412c0af7b2c5ad736e0171bf26a79dee74f27ce63a4d164c6b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "508b5492-9f88-4338-8d30-c2110ffe5e00", "node_type": "1", "metadata": {}, "hash": "fa79e6d92511cff159bf936c337e19efbb903cf772154f973ba343c9065f3801", "class_name": "RelatedNodeInfo"}}, "text": "```yaml\nNETWORK_ID:                           'mainnet',\nRELAYER_URL:                          '$RELAYER_URL',\nFIREBASE_API_KEY:                     'apikey',\nFIREBASE_AUTH_DOMAIN:                 'my-fastauth-issuer-123.firebaseapp.com',\nFIREBASE_PROJECT_ID:                  'my-fastauth-issuer-123',\nFIREBASE_STORAGE_BUCKET:              'my-fastauth-issuer-123.appspot.com',\nFIREBASE_MESSAGING_SENDER_ID:         '12345678910',\nFIREBASE_APP_ID:                      '1:12345678910:web:12345678910',\n```\n\nAlternatively if you're doing a `testnet` deployment, do:\n\n```yaml\nNETWORK_ID:                           'testnet',\nRELAYER_URL_TESTNET:                  '$RELAYER_URL',\nFIREBASE_API_KEY_TESTNET:             'apikey',\nFIREBASE_AUTH_DOMAIN_TESTNET:         'my-fastauth-issuer-123.firebaseapp.com',\nFIREBASE_PROJECT_ID_TESTNET:          'my-fastauth-issuer-123',\nFIREBASE_STORAGE_BUCKET_TESTNET:      'my-fastauth-issuer-123.appspot.com',\nFIREBASE_MESSAGING_SENDER_ID_TESTNET: '12345678910',\nFIREBASE_APP_ID_TESTNET:              '1:12345678910:web:12345678910',\n```\n\n- Click on \"Create Application\"\n- Then, inside your app's control panel copy the app's URL, such as `https://signer-app-123456-ab.a.run.app`. We will refer to the deploy URL as `$WALLET_URL`.\n\n#### Authorizing a domain on Firebase\n\n- Go back to the Firebase Console\n- Go to \"Authentication\" in the sidebar, and then the \"Settings\" tab\n- Click on the \"Authorized domains\" menu item\n- Add `$WALLET_URL` to the list\n\n#### Deploying your application frontend\n\nFirst, install the `@near-js/iframe-rpc` package from the NPM registry.", "mimetype": "text/plain", "start_char_idx": 6290, "end_char_idx": 7892, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "508b5492-9f88-4338-8d30-c2110ffe5e00": {"__data__": {"id_": "508b5492-9f88-4338-8d30-c2110ffe5e00", "embedding": null, "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa", "node_type": "4", "metadata": {}, "hash": "04eeff5edc0b7de43a4747eea7fe550266a83297c0048ca02d9466b5500c3658", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c", "node_type": "1", "metadata": {}, "hash": "2bde87b7506d558941512ab2a501e93e1fb131bd91da12b1f042886aeecb408d", "class_name": "RelatedNodeInfo"}}, "text": "```js\nimport { setupFastAuthWallet } from 'near-fastauth-wallet';\nimport { setupWalletSelector } from '@near-wallet-selector/core';\n\n// Initialize wallet selector\nconst selector = setupWalletSelector({\n          network: networkId,\n          modules: [\n            setupFastAuthWallet({\n              relayerUrl: \"$RELAYER_URL\",\n              walletUrl: \"$WALLET_URL\"\n            })\n          ]\n      })\n\n// EITHER setup onClick function for login\nconst onCLick = () => selector.then((selector: any) => selector.wallet('fast-auth-wallet'))\n      .then((fastAuthWallet: any) =>\n        fastAuthWallet.signIn({\n          contractId: \"$CONTRACT_ID\",\n          email: \"<USERS_EMAIL_ADDRESS>\",\n          isRecovery: true,\n        }),);\n\n// OR setup onClick function for login\nconst onCLick = () => selector.then((selector: any) => selector.wallet('fast-auth-wallet'))\n      .then((fastAuthWallet: any) =>\n        fastAuthWallet.signIn({\n          contractId: \"$CONTRACT_ID\",\n          email: \"<USERS_EMAIL_ADDRESS>\",\n          accountId: \"<USERS_DESIRED_NEAR_ADDRESS>.near\"\n          isRecovery: false,\n        }),);\n```\n\nWhenever the user tries to login, call `onClick`.\n\n### Getting added to the MPC recovery service\n\nAs a last step, we'll need to add your app to our MPC recovery service.\nTo get added, please send us your `$FIREBASE_PROJECT_ID`, `$RELAYER_API_KEY` and `$RELAYER_URL` through this [form](https://forms.gle/cDfXj2D5bm9sohBx6).", "mimetype": "text/plain", "start_char_idx": 7894, "end_char_idx": 9334, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "717f7fb0-062c-4370-8323-e5639a99dea8": {"__data__": {"id_": "717f7fb0-062c-4370-8323-e5639a99dea8", "embedding": null, "metadata": {"file_path": "./near_dist/register.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b40d8343-6dfc-4719-946b-75552f85f7f0", "node_type": "4", "metadata": {}, "hash": "46adb75020ee01d87a0f5784cafa628249ee14e0c55b00eb998b5b7ee275afe5", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call token.v2.ref-finance.near storage_deposit '{\"account_id\": \"alice.near\"}' --depositYocto 1250000000000000000000 --accountId bob.near\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 153, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b4153abe-a5a7-4e58-b589-4133240d453f": {"__data__": {"id_": "b4153abe-a5a7-4e58-b589-4133240d453f", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-30.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04cf4060-a672-4797-85f2-97fe71e4df1b", "node_type": "4", "metadata": {}, "hash": "4f40040fbf67f34c80b77ad2fdbaea516b78fe71f56fd5074a2f364417be6c7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b516b0cc-1a4e-4424-87f4-d3574b1420f9", "node_type": "1", "metadata": {}, "hash": "f9df90c069fa03d800d1bf91a943d37ed0a3a426a70dd69f48767a818eeb7d01", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: It's gonna be Legen... wait for it...\nauthors: [gagdiez]\nslug: yield-resume\ntags: [protocol, updates]\nhide_table_of_contents: true\n---\n\n*dary! Legendary! NEAR protocol is getting updated with the ability to yield and resume computations*\n\n![waiting on a loop](/docs/blog/legendary.jpg)\n\n<!-- truncate -->\n\n:::tip \ud83c\udf89 September Update \ud83c\udf89\n\nWe now have an [example of how to use `yield` and `resume`](https://github.com/near-examples/yield-resume) in your contracts. Check it out!\n\nThere is also a new documentation page on [Yield and Resume](/build/smart-contracts/anatomy/yield-resume) that explains how to use this feature\n\n:::\n\n## The problem of waiting\nCurrently, smart contracts have no way to wait for an external event to happen. This can be a problem when the contract relies on an external service to provide a result.\n\nWe encountered this issue while implementing [Chain Signatures](/concepts/abstraction/chain-signatures), which work by requiring an external service to provide a signature.\n\nUntil now, the only workaround has been to make the contract call itself in a loop, checking on each iteration if the result is ready. Each call delays the result by one block (~1 second), allowing the contract to wait almost a minute before running out of gas.\n\n![waiting on a loop](/docs/blog/contract-wait-loop.png)\n*Until now, contracts had to wait by calling themselves until a external service replies... more often than not the contract will run out of gas waiting*\n\nWhile this method works, it's far from ideal. It wastes a lot of gas on looping and - more often than not - runs out of gas, forcing the user to retry the transaction.\n\n## Yield and Resume\nStarting from version `1.40` of the protocol, developers can **delay the execution** of a function until certain conditions are met (e.g. an external service provides a result).\n\nThis way, instead of the contract calling itself on a loop waiting, the contract can simply **yield** calling the function that gives the result. When an external response is provided, the contract will **resume** and return the result.\n\n!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2090, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b516b0cc-1a4e-4424-87f4-d3574b1420f9": {"__data__": {"id_": "b516b0cc-1a4e-4424-87f4-d3574b1420f9", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-30.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04cf4060-a672-4797-85f2-97fe71e4df1b", "node_type": "4", "metadata": {}, "hash": "4f40040fbf67f34c80b77ad2fdbaea516b78fe71f56fd5074a2f364417be6c7a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b4153abe-a5a7-4e58-b589-4133240d453f", "node_type": "1", "metadata": {}, "hash": "5ebfbabeea8c8d7626febffe29988b0bdb17bd8315d0b980ca1f8d8fff103b66", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3822a9e8-014c-47f3-ac0c-b85dce7b82cd", "node_type": "1", "metadata": {}, "hash": "25fb5fa8fe6678fcc6b8468a43f418c6f9249f613e4b198ddd6ac4d2e2cc9713", "class_name": "RelatedNodeInfo"}}, "text": "[waiting on a yield](/docs/blog/contract-wait-yield.png)\n*Contracts can now yield the execution of a function until an external service signals that the result is ready*\n\n### What is exactly being yielded?\nIt is important to notice that the contract is not **halting** or **blocking** its ability to execute, nor **halting in the middle of a function** to later resume it.\n\nIn the same way that a function can return a promise to call another contract, now a function can return a **yield** to call another function.\n\nIndeed, the contract is not halting, but simply **delaying the execution of a callback** until an external agent signals that it is ok to resume.\n\nIf the contract does not trigger a resume after 200 blocks - around 4 minutes - the yielded function will resume receiving a \"timeout error\" as input.\n\n:::warning State Changes\nPeople can keep calling functions on the contract between a `yield`/`resume`, and the function that creates the `yield` can be called multiple times.\n\nThe state **can change** between the `yield` and the `resume`, since people can keep interacting with the contract.\n\nMoreover, since the function used to signal is public, developers must make sure to guard it properly to avoid unwanted calls. This can be done by simply checking the caller of the function.\n:::\n\n### How does it change for the user?\nBetween the `yield` and `resume` the user will simply be waiting to receive the result. But, in contrast with waiting on a loop, the user will not pay GAS just for having the contract waiting!\n\n## How I can use yield/resume in my contract?\nWhile we have not created any official `yield/resume` example, you can refer to [Saketh Are's example](https://github.com/near/near-sdk-rs/pull/1133/files), who has been working on the `yield/resume` implementation.", "mimetype": "text/plain", "start_char_idx": 2090, "end_char_idx": 3888, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3822a9e8-014c-47f3-ac0c-b85dce7b82cd": {"__data__": {"id_": "3822a9e8-014c-47f3-ac0c-b85dce7b82cd", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-30.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04cf4060-a672-4797-85f2-97fe71e4df1b", "node_type": "4", "metadata": {}, "hash": "4f40040fbf67f34c80b77ad2fdbaea516b78fe71f56fd5074a2f364417be6c7a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b516b0cc-1a4e-4424-87f4-d3574b1420f9", "node_type": "1", "metadata": {}, "hash": "f9df90c069fa03d800d1bf91a943d37ed0a3a426a70dd69f48767a818eeb7d01", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2f17dcfb-8c4d-4b7d-be6e-c05e4a0bf5ee", "node_type": "1", "metadata": {}, "hash": "78263940ec0578c91609bbf6c42b1f449ca04afb6df66e2dd66882bc60959af3", "class_name": "RelatedNodeInfo"}}, "text": "The basic idea is that the SDK now exposes two functions:\n- A `yield(function_to_yield)` that returns a `yield_ID` which identifies the yield\n- A `resume(yield_ID)` that signals which instance of `function_to_yield` can now execute\n\n#### Simplified Example\n\n```rust\n// const DATA_ID_REGISTER: u64 = 0;\n\npub fn request_weather(&mut self, city: String) {\n    let index = self.next_available_request_index;\n    self.next_available_request_index += 1;\n\n    let yield_promise = env::promise_yield_create(\n        \"callback_return_result\",\n        &serde_json::to_vec(&(index,)).unwrap(),\n        SIGN_ON_FINISH_CALL_GAS,\n        GasWeight(0),\n        DATA_ID_REGISTER,\n    );\n\n    // Store the request, so an external service can easily fetch it\n    // This is optional, as an indexer could simply observe it in the receipts\n    let data_id: CryptoHash =\n        env::read_register(DATA_ID_REGISTER).expect(\"\").try_into().expect(\"\");\n    self.requests.insert(&index, WeatherRequest{&data_id, &city});\n\n    // The return will be the result of \"callback_return_result\" (defined below)\n    env::promise_return(yield_promise);\n}\n\n/// Called by external participants to submit a response\npub fn respond(&mut self, data_id: String, weather: String) {\n    let mut data_id_buf = [0u8; 32];\n    hex::decode_to_slice(data_id, &mut data_id_buf).expect(\"\");\n    let data_id = data_id_buf;\n\n    // check that caller is allowed to respond, weather is valid, etc.\n    // ...\n\n    log!(\"submitting response {} for data id {:?", "mimetype": "text/plain", "start_char_idx": 3890, "end_char_idx": 5394, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2f17dcfb-8c4d-4b7d-be6e-c05e4a0bf5ee": {"__data__": {"id_": "2f17dcfb-8c4d-4b7d-be6e-c05e4a0bf5ee", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-30.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04cf4060-a672-4797-85f2-97fe71e4df1b", "node_type": "4", "metadata": {}, "hash": "4f40040fbf67f34c80b77ad2fdbaea516b78fe71f56fd5074a2f364417be6c7a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3822a9e8-014c-47f3-ac0c-b85dce7b82cd", "node_type": "1", "metadata": {}, "hash": "25fb5fa8fe6678fcc6b8468a43f418c6f9249f613e4b198ddd6ac4d2e2cc9713", "class_name": "RelatedNodeInfo"}}, "text": "}\", &weather, &data_id);\n    env::promise_yield_resume(&data_id, &serde_json::to_vec(&weather).unwrap());\n}\n\n/// Callback receiving the external data (or a PromiseError in case of timeout)\npub fn callback_return_result(\n    &mut self,\n    request_index: u64,\n    #[callback_result] weather: Result<String, PromiseError>,\n) -> String {\n    // Clean up the local state\n    self.requests.remove(&request_index);\n\n    match weather {\n        Ok(weather) => \"weather received: \".to_owned() + &weather,\n        Err(_) => \"request timed out\".to_string(),\n    }\n}\n```\n\n## Conclusion\nThe ability to `yield` and `resume` computations is a big step forward for the NEAR protocol, as it enables developers to create contracts that rely on external services.\n\nCurrently, the feature is only **available on testnet**, and we are looking for feedback on how to improve it.\n\nWe expect to have a more user-friendly way to use `yield` and `resume` in the future, so stay tuned!", "mimetype": "text/plain", "start_char_idx": 5394, "end_char_idx": 6353, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eafed134-2542-4b2d-853c-89e3dd3b8427": {"__data__": {"id_": "eafed134-2542-4b2d-853c-89e3dd3b8427", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "122d00a9-187b-4100-bf43-d1052f9a789f", "node_type": "1", "metadata": {}, "hash": "1ec8452bb8924204ec7f247a7022cfc2eb7d918cc9852b9085690c72cde4569d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: minting-nfts\ntitle: Minting NFTs\nsidebar_label: Minting NFTs\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial you'll learn how to easily create your own NFTs without doing any software development by using a readily-available smart contract and a decentralized storage solution like [IPFS](https://ipfs.io/).\n\n## Overview {#overview}\n\nThis article will guide you in setting up an [NFT smart contract](#non-fungible-token-contract), and show you [how to build](#building-the-contract), [test](#testing-the-contract) and [deploy](#deploying-the-contract) your NFT contract on NEAR.\nOnce the contract is deployed, you'll learn [how to mint](#minting-your-nfts) non-fungible tokens from media files [stored on IPFS](#uploading-the-image) and view them in your Wallet.\n\n## Prerequisites {#prerequisites}\n\nTo complete this tutorial successfully, you'll need:\n\n- [Rust toolchain](/build/smart-contracts/quickstart#prerequisites)\n- [A NEAR account](#wallet)\n- [NEAR command-line interface](/tools/near-cli#installation) (`near-cli`)\n\n## Wallet {#wallet}\n\nTo store your non-fungible tokens you'll need a [NEAR Wallet](https://testnet.mynearwallet.com//).\nIf you don't have one yet, you can create one easily by following [these instructions](https://testnet.mynearwallet.com/create).\n\n> **Tip:** for this tutorial we'll use a `testnet` wallet account. The `testnet` network is free and there's no need to deposit funds.\n\nOnce you have your Wallet account, you can click on the [Collectibles](https://testnet.mynearwallet.com//?tab=collectibles) tab where all your NFTs will be listed:\n\n![Wallet](/docs/assets/nfts/nft-wallet.png)\n\n<!--\nBriefly talks about how the wallet listens for methods that start with `nft_` and then flags the contracts.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1786, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "122d00a9-187b-4100-bf43-d1052f9a789f": {"__data__": {"id_": "122d00a9-187b-4100-bf43-d1052f9a789f", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eafed134-2542-4b2d-853c-89e3dd3b8427", "node_type": "1", "metadata": {}, "hash": "b1aa74625cee982b8ece3e6827c127ef7899473fdeb09fc2c49ce8cb61687f04", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cd6e162d-75b4-459c-9422-271625d83dd1", "node_type": "1", "metadata": {}, "hash": "d952c3f2b2e70bc4924fb3c65ad72c133b564e175fc4f93d4771812661027772", "class_name": "RelatedNodeInfo"}}, "text": "-->\n\n## IPFS {#ipfs}\n\nThe [InterPlanetary File System](https://ipfs.io/) (IPFS) is a protocol and peer-to-peer network for storing and sharing data in a distributed file system. IPFS uses content-addressing to uniquely identify each file in a global namespace connecting all computing devices.\n\n### Uploading the image {#uploading-the-image}\n\nTo upload the NFT image, you should use a [decentralized storage](/concepts/storage/storage-solutions) provider such as IPFS.\n\n:::note\nThis example uses IPFS, but you could use a different solution like Filecoin, Arweave, or a regular centralized Web2 hosting.\n:::\n\nOnce you have uploaded your file to IPFS, you'll get a unique `CID` for your content, and a URL like:\n\n```\nhttps://bafyreiabag3ztnhe5pg7js4bj6sxuvkz3sdf76cjvcuqjoidvnfjz7vwrq.ipfs.dweb.link/\n```\n\n## Non-fungible Token contract {#non-fungible-token-contract}\n\n[This repository](https://github.com/near-examples/NFT) includes an example implementation of a [non-fungible token] contract which uses [near-contract-standards] and simulation tests.\n\n[non-fungible token]: https://nomicon.io/Standards/NonFungibleToken\n[near-contract-standards]: https://github.com/near/near-sdk-rs/tree/master/near-contract-standards\n\n### Clone the NFT repository {#clone-the-nft-repository}\n\nIn your terminal run the following command to clone the NFT repo:\n\n```\ngit clone https://github.com/near-examples/NFT\n```\n\n### Explore the smart contract {#explore-the-smart-contract}\n\nThe source code for this contract can be found in `nft/src/lib.rs`. This contract contains logic which follows the [NEP-171 standard][non-fungible token] (NEAR Enhancement Proposal) and the implementation of this standard which can be found [here](https://github.com/near/near-sdk-rs/blob/master/near-contract-standards/src/non_fungible_token/core/core_impl.rs).", "mimetype": "text/plain", "start_char_idx": 1787, "end_char_idx": 3614, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cd6e162d-75b4-459c-9422-271625d83dd1": {"__data__": {"id_": "cd6e162d-75b4-459c-9422-271625d83dd1", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "122d00a9-187b-4100-bf43-d1052f9a789f", "node_type": "1", "metadata": {}, "hash": "1ec8452bb8924204ec7f247a7022cfc2eb7d918cc9852b9085690c72cde4569d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08907ce6-9205-4aed-9c1a-046d22f407e1", "node_type": "1", "metadata": {}, "hash": "846f818d88a6187e11144849c97f657e473bf24c695360159044435bb820c8ea", "class_name": "RelatedNodeInfo"}}, "text": "At first, the code can be a bit overwhelming, but if we only consider the aspects involved with minting, we can break it down into 2 main categories - the contract struct and the minting process.\n\n#### Contract Struct {#contract-struct}\n\nThe contract keeps track of two pieces of information - `tokens` and `metadata`. For the purpose of this tutorial we will only deal with the `tokens` field.\n\n```rust\n#[near(contract_state)]\n#[derive(PanicOnDefault)]\npub struct Contract {\n    tokens: NonFungibleToken,\n    metadata: LazyOption<NFTContractMetadata>,\n}\n```\n\nThe tokens are of type `NonFungibleToken` which come from the [core standards](https://github.com/near/near-sdk-rs/blob/master/near-contract-standards/src/non_fungible_token/core/core_impl.rs). There are several fields that make up the struct but for the purpose of this tutorial, we'll only be concerned with the `owner_by_id` field. This keeps track of the owner for any given token.\n\n```rust\npub struct NonFungibleToken {\n    // owner of contract\n    pub owner_id: AccountId,\n\n    // keeps track of the owner for any given token ID.\n    pub owner_by_id: TreeMap<TokenId, AccountId>,\n\n    ...\n}\n```\n\nNow that we've explored behind the scenes and where the data is being kept, let's move to the minting functionality.\n\n#### Minting {#minting}\n\nIn order for a token to be minted you will need to call the `nft_mint` function. There are three arguments that are passed to this function:\n\n- `token_id`\n- `receiver_id`\n- `token_metadata`\n\nThis function executes `self.tokens.mint` which calls the mint function in the [core standards](https://github.com/near/near-sdk-rs/blob/master/near-contract-standards/src/non_fungible_token/core/core_impl.rs) creating a record of the token with the owner being `receiver_id`.", "mimetype": "text/plain", "start_char_idx": 3616, "end_char_idx": 5388, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08907ce6-9205-4aed-9c1a-046d22f407e1": {"__data__": {"id_": "08907ce6-9205-4aed-9c1a-046d22f407e1", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd6e162d-75b4-459c-9422-271625d83dd1", "node_type": "1", "metadata": {}, "hash": "d952c3f2b2e70bc4924fb3c65ad72c133b564e175fc4f93d4771812661027772", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5144eb67-23b1-4e20-83c2-443bb7f84f8f", "node_type": "1", "metadata": {}, "hash": "af4abcf861ca36e6181d65951992ef7fc858746f1083ac18be8ebc05fa26da97", "class_name": "RelatedNodeInfo"}}, "text": "```rust\n#[payable]\npub fn nft_mint(\n    &mut self,\n    token_id: TokenId,\n    receiver_id: ValidAccountId,\n    token_metadata: TokenMetadata,\n) -> Token {\n    self.tokens.mint(token_id, receiver_id, Some(token_metadata))\n}\n```\n\nThis creates that record by inserting the token into the `owner_by_id` data structure that we mentioned in the previous section.\n\n```rust\nself.owner_by_id.insert(&token_id, &owner_id);\n```\n\n### Building the contract {#building-the-contract}\n\nTo build your contract run the following command in your terminal which builds your contract using Rust's `cargo`.\n\n```bash\n./scripts/build.sh\n```\n\nThis will generate WASM binaries into your `res/` directory. This WASM file is the smart contract we'll be deploying onto the NEAR blockchain.\n\n> **Tip:** If you run into errors make sure you have [Rust installed](/build/smart-contracts/quickstart#prerequisites) and are in the root directory of the NFT example.\n\n### Testing the contract {#testing-the-contract}\n\nWritten in the smart contract there are pre-written tests that you can run. Run the following command in your terminal to perform these simple tests to verify that your contract code is working.\n\n```bash\ncargo test -- --nocapture\n```\n\n> **Note:** the more complex simulation tests aren't performed with this command but you can find them in `tests/sim`.\n\n## Using the NFT contract {#using-the-nft-contract}\n\nNow that you have successfully built and tested the NFT smart contract, you're ready to [deploy it](#deploying-the-contract)\nand start using it [mint your NFTs](#minting-your-nfts).\n\n### Deploying the contract {#deploying-the-contract}\n\nThis smart contract will be deployed to your NEAR account. Because NEAR allows the ability to upgrade contracts on the same account, initialization functions must be cleared.\n\n> **Note:** If you'd like to run this example on a NEAR account that has had prior contracts deployed, please use the `near-cli` command `near delete` and then recreate it in Wallet.", "mimetype": "text/plain", "start_char_idx": 5390, "end_char_idx": 7375, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5144eb67-23b1-4e20-83c2-443bb7f84f8f": {"__data__": {"id_": "5144eb67-23b1-4e20-83c2-443bb7f84f8f", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08907ce6-9205-4aed-9c1a-046d22f407e1", "node_type": "1", "metadata": {}, "hash": "846f818d88a6187e11144849c97f657e473bf24c695360159044435bb820c8ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29b0ce69-0dd4-4455-8a8b-925dea6de988", "node_type": "1", "metadata": {}, "hash": "ec24895198883ed3803858b38ee9b5aaa7322665cc6acc4788bb6e5781357201", "class_name": "RelatedNodeInfo"}}, "text": "To create (or recreate) an account, please follow the directions in [Test Wallet](https://testnet.mynearwallet.com/) or ([NEAR Wallet](https://wallet.near.org/) if we're using `mainnet`).\n\nLog in to your newly created account with `near-cli` by running the following command in your terminal.\n\n<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near login --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account import-account using-web-wallet network-config testnet\n  ```\n  </TabItem>\n</Tabs>\n\nTo make this tutorial easier to copy/paste, we're going to set an environment variable for your account ID. In the command below, replace `YOUR_ACCOUNT_NAME` with the account name you just logged in with including the `.testnet` (or `.near` for `mainnet`):\n\n```bash\nexport ID=YOUR_ACCOUNT_NAME\n```\n\nTest that the environment variable is set correctly by running:\n\n```bash\necho $ID\n```\n\nVerify that the correct account ID is printed in the terminal. If everything looks correct you can now deploy your contract.\nIn the root of your NFT project run the following command to deploy your smart contract.\n\n```bash\nnear deploy $ID res/non_fungible_token.wasm\n```\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```bash\nStarting deployment. Account id: ex-1.testnet, node: https://rpc.testnet.near.org, file: res/non_fungible_token.wasm\nTransaction Id E1AoeTjvuNbDDdNS9SqKfoWiZT95keFrRUmsB65fVZ52\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/E1AoeTjvuNbDDdNS9SqKfoWiZT95keFrRUmsB65fVZ52\nDone deploying to ex-1.testnet\n```\n\n</p>\n</details>\n\n> **Note:** For `mainnet` you will need to prepend your command with `NEAR_ENV=mainnet`.", "mimetype": "text/plain", "start_char_idx": 7376, "end_char_idx": 9154, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "29b0ce69-0dd4-4455-8a8b-925dea6de988": {"__data__": {"id_": "29b0ce69-0dd4-4455-8a8b-925dea6de988", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5144eb67-23b1-4e20-83c2-443bb7f84f8f", "node_type": "1", "metadata": {}, "hash": "af4abcf861ca36e6181d65951992ef7fc858746f1083ac18be8ebc05fa26da97", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0db5d367-a180-41b6-b7f4-8ee2a93fdca3", "node_type": "1", "metadata": {}, "hash": "f04108f1893cd008ed2a13df0f97f609f9c4096643a2fc4352aa836e14a550f4", "class_name": "RelatedNodeInfo"}}, "text": "[See here](/tools/near-cli#network-selection) for more information.\n\n### Minting your NFTs {#minting-your-nfts}\n\nA smart contract can define an initialization method that can be used to set the contract's initial state.\nIn our case, we need to initialize the NFT contract before usage. For now, we'll initialize it with the default metadata.\n\n> **Note:** each account has a data area called `storage`, which is persistent between function calls and transactions.\n> For example, when you initialize a contract, the initial state is saved in the persistent storage.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $ID new_default_meta '{\"owner_id\": \"'$ID'\"}' --accountId $ID\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $ID new_default_meta json-args '{\"owner_id\": \"'$ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n> **Tip:** you can find more info about the NFT metadata at [nomicon.io](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata).\n\nYou can then view the metadata by running the following `view` call:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $ID nft_metadata\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $ID nft_metadata json-args '{}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"spec\": \"nft-1.0.0\",\n  \"name\": \"Example NEAR non-fungible token\",\n  \"symbol\": \"EXAMPLE\",\n  \"icon\": \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.", "mimetype": "text/plain", "start_char_idx": 9155, "end_char_idx": 10914, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0db5d367-a180-41b6-b7f4-8ee2a93fdca3": {"__data__": {"id_": "0db5d367-a180-41b6-b7f4-8ee2a93fdca3", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29b0ce69-0dd4-4455-8a8b-925dea6de988", "node_type": "1", "metadata": {}, "hash": "ec24895198883ed3803858b38ee9b5aaa7322665cc6acc4788bb6e5781357201", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07554ef4-cc62-4f46-ab67-3c16928180e2", "node_type": "1", "metadata": {}, "hash": "1d0d0274b9c8e5bcd9bc82058255dea610837fd708ebfda3c0abb58c428da819", "class_name": "RelatedNodeInfo"}}, "text": "org/2000/svg' viewBox='0 0 288 288'%3E%3Cg id='l' data-name='l'%3E%3Cpath d='M187.58,79.81l-30.1,44.69a3.2,3.2,0,0,0,4.75,4.2L191.86,103a1.2,1.2,0,0,1,2,91v80.46a1.2,1.2,0,0,1-2.12.77L102.18,77.93A15.35,15.35,0,0,0,90.47,72.5H87.34A15.34,15.34,0,0,0,72,87.84V201.16A15.34,15.34,0,0,0,87.34,216.5h0a15.35,15.35,0,0,0,13.08-7.31l30.1-44.69a3.2,3.2,0,0,0-4.75-4.2L96.14,186a1.2,1.2,0,0,1-2-.91V104.61a1.2,1.2,0,0,1,2.12-.77l89.55,107.23a15.35,15.35,0,0,0,11.71,5.43h3.13A15.34,15.34,0,0,0,216,201.16V87.84A15.34,15.34,0,0,0,200.66,72.5h0A15.35,15.35,0,0,0,187.58,79.81Z'/%3E%3C/g%3E%3C/svg%3E\",\n  \"base_uri\": null,\n  \"reference\": null,\n  \"reference_hash\": null\n}\n```\n\n</p>\n</details>\n\nNow let's mint our first token! The following command will mint one copy of your NFT.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07554ef4-cc62-4f46-ab67-3c16928180e2": {"__data__": {"id_": "07554ef4-cc62-4f46-ab67-3c16928180e2", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0db5d367-a180-41b6-b7f4-8ee2a93fdca3", "node_type": "1", "metadata": {}, "hash": "f04108f1893cd008ed2a13df0f97f609f9c4096643a2fc4352aa836e14a550f4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "31162e95-bd63-4597-a788-c9d43e2cc818", "node_type": "1", "metadata": {}, "hash": "222aa6a10919525bcdc45d134cc36f437e2c4cf675fe29c61122a47b3308ba02", "class_name": "RelatedNodeInfo"}}, "text": "Replace the `media` url with the one you [uploaded to IPFS](#uploading-the-image) earlier:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $ID nft_mint '{\"token_id\": \"0\", \"receiver_id\": \"'$ID'\", \"token_metadata\": { \"title\": \"Some Art\", \"description\": \"My NFT media\", \"media\": \"https://bafkreiabag3ztnhe5pg7js4bj6sxuvkz3sdf76cjvcuqjoidvnfjz7vwrq.ipfs.dweb.link/\", \"copies\": 1}}' --accountId $ID --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $ID nft_mint json-args '{\"token_id\": \"0\", \"receiver_id\": \"'$ID'\", \"token_metadata\": { \"title\": \"Some Art\", \"description\": \"My NFT media\", \"media\": \"https://bafkreiabag3ztnhe5pg7js4bj6sxuvkz3sdf76cjvcuqjoidvnfjz7vwrq.ipfs.dweb.link/\", \"copies\": 1}}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"token_id\": \"0\",\n  \"owner_id\": \"dev-xxxxxx-xxxxxxx\",\n  \"metadata\": {\n    \"title\": \"Some Art\",\n    \"description\": \"My NFT media\",\n    \"media\": \"https://bafkreiabag3ztnhe5pg7js4bj6sxuvkz3sdf76cjvcuqjoidvnfjz7vwrq.ipfs.dweb.link/\",\n    \"media_hash\": null,\n    \"copies\": 1,\n    \"issued_at\": null,\n    \"expires_at\": null,", "mimetype": "text/plain", "start_char_idx": 11683, "end_char_idx": 13023, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31162e95-bd63-4597-a788-c9d43e2cc818": {"__data__": {"id_": "31162e95-bd63-4597-a788-c9d43e2cc818", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07554ef4-cc62-4f46-ab67-3c16928180e2", "node_type": "1", "metadata": {}, "hash": "1d0d0274b9c8e5bcd9bc82058255dea610837fd708ebfda3c0abb58c428da819", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6b7c1c87-d457-4fea-a445-6f77b48e17cc", "node_type": "1", "metadata": {}, "hash": "29a725cf0980890e79dae16f24600207d71c4469a71e5e81b3781c7308eb6189", "class_name": "RelatedNodeInfo"}}, "text": "\"starts_at\": null,\n    \"updated_at\": null,\n    \"extra\": null,\n    \"reference\": null,\n    \"reference_hash\": null\n  },\n  \"approved_account_ids\": {}\n}\n```\n\n</p>\n</details>\n\nTo view tokens owned by an account you can call the NFT contract with the following `near-cli` command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $ID nft_tokens_for_owner '{\"account_id\": \"'$ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $ID nft_tokens_for_owner json-args '{\"account_id\": \"'$ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n[\n  {\n    \"token_id\": \"0\",\n    \"owner_id\": \"dev-xxxxxx-xxxxxxx\",\n    \"metadata\": {\n      \"title\": \"Some Art\",\n      \"description\": \"My NFT media\",\n      \"media\": \"https://bafkreiabag3ztnhe5pg7js4bj6sxuvkz3sdf76cjvcuqjoidvnfjz7vwrq.ipfs.dweb.link/\",\n      \"media_hash\": null,\n      \"copies\": 1,\n      \"issued_at\": null,\n      \"expires_at\": null,\n      \"starts_at\": null,\n      \"updated_at\": null,\n      \"extra\": null,\n      \"reference\": null,\n      \"reference_hash\": null\n    },\n    \"approved_account_ids\": {}\n  }\n]\n```\n\n</p>\n</details>\n\n> <br/>\n>\n> **Tip:** after you mint your first non-fungible token, you can [view it in your Wallet](https://testnet.mynearwallet.com//?tab=collectibles):\n>\n> ![Wallet with token](/docs/assets/nfts/nft-wallet-token.png)\n>\n> <br/>\n\n**_Congratulations!", "mimetype": "text/plain", "start_char_idx": 13028, "end_char_idx": 14524, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6b7c1c87-d457-4fea-a445-6f77b48e17cc": {"__data__": {"id_": "6b7c1c87-d457-4fea-a445-6f77b48e17cc", "embedding": null, "metadata": {"file_path": "./near_dist/minting-nfts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843", "node_type": "4", "metadata": {}, "hash": "a44fb184ee7900b50c764268844981d465406c20fb25225729337b2d5eec5094", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31162e95-bd63-4597-a788-c9d43e2cc818", "node_type": "1", "metadata": {}, "hash": "222aa6a10919525bcdc45d134cc36f437e2c4cf675fe29c61122a47b3308ba02", "class_name": "RelatedNodeInfo"}}, "text": "You just minted your first NFT token on the NEAR blockchain!_** \ud83c\udf89\n\n## Final remarks {#final-remarks}\n\nThis basic example illustrates all the required steps to deploy an NFT smart contract, store media files on IPFS,\nand start minting your own non-fungible tokens.\n\nNow that you're familiar with the process, you can check out our [NFT Example](https://examples.near.org/NFT) and learn more about the smart contract code and how you can transfer minted tokens to other accounts.\nFinally, if you are new to Rust and want to dive into smart contract development, our [Quick-start guide](../../2.build/2.smart-contracts/quickstart.md) is a great place to start.\n\n**_Happy minting!_** \ud83e\ude99\n\n## Blockcraft - a Practical Extension\n\nIf you'd like to learn how to use Minecraft to mint NFTs and copy/paste builds across different worlds while storing all your data on-chain, be sure to check out our [Minecraft tutorial](/tutorials/nfts/minecraft-nfts)\n\n## Versioning for this article {#versioning-for-this-article}\n\nAt the time of this writing, this example works with the following versions:\n\n- cargo: `cargo 1.54.0 (5ae8d74b3 2021-06-22)`\n- rustc: `rustc 1.54.0 (a178d0322 2021-07-26)`\n- near-cli: `2.1.1`", "mimetype": "text/plain", "start_char_idx": 14525, "end_char_idx": 15721, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2dd4d1be-593b-4d43-b029-69ca0917f9a5": {"__data__": {"id_": "2dd4d1be-593b-4d43-b029-69ca0917f9a5", "embedding": null, "metadata": {"file_path": "./near_dist/stats.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a2cf181a-fa3b-472f-9a23-595b9240f106", "node_type": "4", "metadata": {}, "hash": "4b2e6c2df7d7059858df1f61eb1504d7538bd88b74b4801105f8d67e519930c7", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: Statistics Dashboard \ntitle: RPC Statistics\n---\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\nInspect your RPC Usage in the [Statistics Tab](https://console.pagoda.co/apis?tab=statistics):\n\n![](/docs/pagoda/stats1.png)\n\n:::info\nData defaults to the last 30 days.\nCurrently the statistics page show the usage data across all projects and API keys within an organization set on Pagoda Console.\n:::\n\nAggregated key metrics available at the top of the dashboard are\n\n-    Total Request Volume\n-    Request Success Rate\n-    Total failed request\n-    Average Latency\n\n## Set a Time Period\n\nData is sent with UTC time to the browser and the browser adjusts to the user\u2019s timezone.\n\n-    Last 15 Minutes is the last complete 15 minutes. This updates every few seconds.\n-    Last 1 Hour is the last fully completed hour; from 00 to 59 minutes and 59 seconds.\n-    Last 24 Hours is the last fully completed 24 consecutive hours.\n-    Last 7 Days is the previous 7 days from the current time. Each data point groups one hour\u2019s worth of data. The most recent hour is partial data for the current hour and updates every few seconds.\n-    Last 30 Days is the previous 30 days from the current time. Each data point groups one hour\u2019s worth of data. The most recent hour is partial data for the current hour and updates every few seconds.\n\n## Requests breakdowns\n\nMultiple breakdowns are available in the statistics page\n\n![](/docs/pagoda/stats2.png)\n\nRequests can be broken down by\n\n-    Requests Methods\n-    Requests Status\n-    Aggregated status display breakdown by requests methods\n\nWe are working to include more detailed breakdown by each requests and more interactive dashboard that enable clickthrough from the charts\n\n## Network Status\n\nCheck the [Pagoda Status page](https://status.pagoda.co/) for the latest service information across all networks and subscribe to updates based on your service choice and needs.\n\n![](/docs/pagoda/stats3.png)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2027, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31d5579b-03ff-47ef-bb01-abbec08d09b3": {"__data__": {"id_": "31d5579b-03ff-47ef-bb01-abbec08d09b3", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2fe88262-f362-4b56-b764-b111a5b71e94", "node_type": "1", "metadata": {}, "hash": "8f0a167d5734060234d212a6780369129426e7cd4c715498d46b1cfe91a97462", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"NFT indexer for Python\"\n---\n\n# Building an NFT indexer for Python\n\n\n:::note Source code for the tutorial\n\n[`frolvanya/near-lake-nft-indexer`](https://github.com/frolvanya/near-lake-nft-indexer): source code for this tutorial\n\n:::\n\n## The Goal\n\nThis tutorial ends with a working NFT indexer built on top [NEAR Lake Framework for Python](/concepts/advanced/near-lake-framework). The indexer is watching for `nft_mint` [Events](https://nomicon.io/Standards/EventsFormat) and prints some relevant data:\n- `receipt_id` of the [Receipt](/build/data-infrastructure/lake-data-structures/receipt) where the mint has happened\n- Marketplace\n- NFT owner account name\n- Links to the NFTs on the marketplaces\n\nThe final source code is available on the GitHub [`frolvanya/near-lake-nft-indexer`](https://github.com/frolvanya/near-lake-nft-indexer)\n\n## Motivation\n\nNEAR Protocol had introduced a nice feature [Events](https://nomicon.io/Standards/EventsFormat). The Events allow a contract developer to add standardized logs to the [`ExecutionOutcomes`](/build/data-infrastructure/lake-data-structures/execution-outcome) thus allowing themselves or other developers to read those logs in more convenient manner via API or indexers.\n\nThe Events have a field `standard` which aligns with NEPs. In this tutorial we'll be talking about [NEP-171 Non-Fungible Token standard](https://github.com/near/NEPs/discussions/171).\n\nIn this tutorial our goal is to show you how you can \"listen\" to the Events contracts emit and how you can benefit from them.\n\nAs the example we will be building an indexer that watches all the NFTs minted following the [NEP-171 Events](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event) standard, assuming we're collectors who don't want to miss a thing.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1786, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2fe88262-f362-4b56-b764-b111a5b71e94": {"__data__": {"id_": "2fe88262-f362-4b56-b764-b111a5b71e94", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31d5579b-03ff-47ef-bb01-abbec08d09b3", "node_type": "1", "metadata": {}, "hash": "55e6b92b76902a329e966f5d5a726fbedd1ba51af85b90d024faea28b2bec9cc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "214dd4b5-775f-4640-8b01-08255f4f4322", "node_type": "1", "metadata": {}, "hash": "33932cf25abda4109517096f17935ee6d10a85e0646c16c2fdc7bd741e83fc24", "class_name": "RelatedNodeInfo"}}, "text": "Our indexer should notice every single NFT minted and give us a basic set of data like: in what Receipt it was minted, and show us the link to a marketplace (we'll cover [Paras](https://paras.id) and [Mintbase](https://mintbase.io) in our example).\n\nWe will use Python version of [NEAR Lake Framework](/concepts/advanced/near-lake-framework) in this tutorial. Though the concept is the same for Rust, but we want to show more people that it's not that complex to build your own indexer.\n\n## Preparation\n\n:::danger Credentials\n\nPlease, ensure you've the credentials set up as described on the [Credentials](../running-near-lake/credentials.md) page. Otherwise you won't be able to get the code working.\n\n:::\n\nLet's create our project folder\n\n```bash\nmkdir lake-nft-indexer && cd lake-nft-indexer\ntouch main.py\n```\n\n## Set up NEAR Lake Framework\n\nIn the `main.py` let's import `stream` function and `near_primitives` from `near-lake-framework`:\n\n```python title=main.py\nfrom near_lake_framework import near_primitives, LakeConfig, streamer\n```\n\nAdd the main function\n\n```python title=main.py\nasync def main():\n    print(\"Starting NFT indexer\")\n```\n\nAdd the instantiation of `LakeConfig` below:\n\n```python title=main.py\nconfig = LakeConfig.mainnet()\nconfig.start_block_height = 69030747\nconfig.aws_access_key_id = os.getenv(\"AWS_ACCESS_KEY_ID\")\nconfig.aws_secret_key = os.getenv(\"AWS_SECRET_ACCESS_KEY\")\n```\n\nJust a few words on the config, function `mainnet()` has set `s3_bucket_name`, `s3_region_name` for mainnet.\nYou can go to [NEAR Explorer](https://nearblocks.io) and get **the most recent** block height to set `config.start_block_height`.\n\nLet's call `streamer` function with the `config`\n\n```python title=main.py\nstream_handle, streamer_messages_queue = streamer(config)\nwhile True:\n    streamer_message = await streamer_messages_queue.get()\n```", "mimetype": "text/plain", "start_char_idx": 1787, "end_char_idx": 3639, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "214dd4b5-775f-4640-8b01-08255f4f4322": {"__data__": {"id_": "214dd4b5-775f-4640-8b01-08255f4f4322", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2fe88262-f362-4b56-b764-b111a5b71e94", "node_type": "1", "metadata": {}, "hash": "8f0a167d5734060234d212a6780369129426e7cd4c715498d46b1cfe91a97462", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1c429120-a926-4a8d-b292-fd7bfd2f7c39", "node_type": "1", "metadata": {}, "hash": "d0c915168df3902e661e9f0f8c86639232ce78f54ab51dba088966edd7b63886", "class_name": "RelatedNodeInfo"}}, "text": "And an actual start of our indexer in the end of the `main.py`\n\n```python title=main.py\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\nThe final `main.py` at this moment should look like the following:\n\n```python title=main.py\nfrom near_lake_framework import LakeConfig, streamer, near_primitives\nasync def main():\n    print(\"Starting NFT indexer\")\n    \n    config = LakeConfig.mainnet()\n    config.start_block_height = 69030747\n    config.aws_access_key_id = os.getenv(\"AWS_ACCESS_KEY_ID\")\n    config.aws_secret_key = os.getenv(\"AWS_SECRET_ACCESS_KEY\")\n\n    stream_handle, streamer_messages_queue = streamer(config)\n    while True:\n        streamer_message = await streamer_messages_queue.get()\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\nNow we need to create a callback function that we'll be called to handle [`StreamerMessage`](/build/data-infrastructure/lake-data-structures/toc) our indexer receives.\n\n```python title=main.py\nasync def handle_streamer_message(streamer_message: near_primitives.StreamerMessage):\n    pass\n```\n\n## Events and where to catch them\n\nFirst of all let's find out where we can catch the Events. We hope you are familiar with how the [Data Flow in NEAR Blockchain](/concepts/data-flow/near-data-flow), but let's revise our knowledge:\n- Mint an NFT is an action in an NFT contract (doesn't matter which one)\n- Actions are located in a [Receipt](/build/data-infrastructure/lake-data-structures/receipt)\n- A result of the Receipt execution is [ExecutionOutcome](/build/data-infrastructure/lake-data-structures/execution-outcome)\n- `ExecutionOutcome` in turn, catches the logs a contract \"prints\"\n- [Events](https://nomicon.io/Standards/EventsFormat) built on top of the logs\n\nThis leads us to the realization that we can watch only for ExecutionOutcomes and ignore everything else `StreamerMessage` brings us.", "mimetype": "text/plain", "start_char_idx": 3642, "end_char_idx": 5527, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1c429120-a926-4a8d-b292-fd7bfd2f7c39": {"__data__": {"id_": "1c429120-a926-4a8d-b292-fd7bfd2f7c39", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "214dd4b5-775f-4640-8b01-08255f4f4322", "node_type": "1", "metadata": {}, "hash": "33932cf25abda4109517096f17935ee6d10a85e0646c16c2fdc7bd741e83fc24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a1f64ac1-43f9-4dd2-a352-39aad06812e6", "node_type": "1", "metadata": {}, "hash": "bdc3c297f16c7b7184f01310fb5ac831c09ef03358f9095f61075feb7bf0dd6a", "class_name": "RelatedNodeInfo"}}, "text": "## Catching only the data we need\n\nInside the callback function `handle_streamer_message` we've prepared in the [Preparation](#preparation) section let's start filtering the data we need:\n\n```python title=main.py\nasync def handle_streamer_message(streamer_message: near_primitives.StreamerMessage):\n    for shard in streamer_message.shards:\n        for receipt_execution_outcome in shard.receipt_execution_outcomes:\n            for log in receipt_execution_outcome.execution_outcome.outcome.logs:\n                pass\n```\n\nWe have iterated through the logs of all ExecutionOutcomes of [Shards](/build/data-infrastructure/lake-data-structures/shard) (in our case we don't care on which Shard did the mint happen)\n\nNow we want to deal only with those ExecutionOutcomes that contain logs of Events format. Such logs start with `EVENT_JSON:` according to the [Events docs](https://nomicon.io/Standards/EventsFormat#events).\n\n```python title=main.py\nasync def handle_streamer_message(streamer_message: near_primitives.StreamerMessage):\n    for shard in streamer_message.shards:\n        for receipt_execution_outcome in shard.receipt_execution_outcomes:\n            for log in receipt_execution_outcome.execution_outcome.outcome.logs:\n                if not log.startswith(\"EVENT_JSON:\"):\n                    continue\n                try:\n                    parsed_log = json.loads(log[len(\"EVENT_JSON:\") :])\n                except json.JSONDecodeError:\n                    print(\n                        f\"Receipt ID: `{receipt_execution_outcome.receipt.receipt_id}`\\nError during parsing logs from JSON string to dict\"\n                    )\n                    continue\n```\n\nLet us explain what we are doing here:\n\n1. We are walking through the logs in ExecutionOutcomes\n2. We are filtering ExecutionOutcomes that contain logs of Events format\n3. In order to collect the Events we are iterating through the ExecutionOutcome's logs trying to parse Event using `json.loads`\n\nThe goal for our indexer is to return the useful data about a minted NFT that follows NEP-171 standard.", "mimetype": "text/plain", "start_char_idx": 5530, "end_char_idx": 7603, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a1f64ac1-43f9-4dd2-a352-39aad06812e6": {"__data__": {"id_": "a1f64ac1-43f9-4dd2-a352-39aad06812e6", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1c429120-a926-4a8d-b292-fd7bfd2f7c39", "node_type": "1", "metadata": {}, "hash": "d0c915168df3902e661e9f0f8c86639232ce78f54ab51dba088966edd7b63886", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7", "node_type": "1", "metadata": {}, "hash": "786767554ee5b8835bbf60fe7357f0aa40fa271551e9f1ca1f4ddec1481e7e5d", "class_name": "RelatedNodeInfo"}}, "text": "We need to drop irrelevant standard Events:\n\n```python title=main.py\n    if (\n        parsed_log.get(\"standard\") != \"nep171\"\n        or parsed_log.get(\"event\") != \"nft_mint\"\n    ):\n        continue\n```\n\n## Almost done\n\nSo far we have collected everything we need corresponding to our requirements.\n\nThe final look of the `handle_streamer_message` function:\n\n```python title=main.py\nasync def handle_streamer_message(streamer_message: near_primitives.StreamerMessage):\n    for shard in streamer_message.shards:\n        for receipt_execution_outcome in shard.receipt_execution_outcomes:\n            for log in receipt_execution_outcome.execution_outcome.outcome.logs:\n                if not log.startswith(\"EVENT_JSON:\"):\n                    continue\n                try:\n                    parsed_log = json.loads(log[len(\"EVENT_JSON:\") :])\n                except json.JSONDecodeError:\n                    print(\n                        f\"Receipt ID: `{receipt_execution_outcome.receipt.receipt_id}`\\nError during parsing logs from JSON string to dict\"\n                    )\n                    continue\n\n                if (\n                    parsed_log.get(\"standard\") != \"nep171\"\n                    or parsed_log.get(\"event\") != \"nft_mint\"\n                ):\n                    continue\n\n                print(parsed_log)\n```\n\nNow let's call `handle_streamer_message` inside the loop in `main` function\n\n```python title=main.py\nawait handle_streamer_message(streamer_message)\n```\n\nAnd if we run our indexer we will be catching `nft_mint` event and print logs in the terminal.\n\n```bash\npython3 main.py\n```\n\n:::note\n\nHaving troubles running the indexer? Please, check you haven't skipped the [Credentials](../running-near-lake/credentials.md) part :)\n\n:::\n\nNot so fast! Remember we were talking about having the links to the marketplaces to see the minted tokens? We're gonna extend our data with links whenever possible. At least we're gonna show you how to deal with the NFTs minted on [Paras](https://paras.id) and [Mintbase](https://mintbase.io).\n\n## Crafting links to Paras and Mintbase for NFTs minted there\n\nAt this moment we have an access to logs that follows NEP-171 standard.", "mimetype": "text/plain", "start_char_idx": 7604, "end_char_idx": 9795, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7": {"__data__": {"id_": "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1f64ac1-43f9-4dd2-a352-39aad06812e6", "node_type": "1", "metadata": {}, "hash": "bdc3c297f16c7b7184f01310fb5ac831c09ef03358f9095f61075feb7bf0dd6a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99", "node_type": "1", "metadata": {}, "hash": "8c17d9c3488643880828763802050e1bf50e322b09d34b6882957109e5797c63", "class_name": "RelatedNodeInfo"}}, "text": "We definitely know that all the data we have at this moment are relevant for us, and we want to extend it with the links to that minted NFTs at least for those marketplaces we know.\n\nWe know and love Paras and Mintbase.\n\n### Paras token URL\n\nWe did the research for you and here's how the URL to token on Paras is crafting:\n\n```\nhttps://paras.id/token/[1]::[2]/[3]\n```\n\nWhere:\n\n- [1] - Paras contract address (`x.paras.near`)\n- [2] - First part of the `token_id` (`parsed_log[\"data\"]` for Paras is an array of objects with `token_ids` key in it. Those IDs represented by numbers with column `:` between them)\n- [3] - `token_id` itself\n\nExample:\n\n```\nhttps://paras.id/token/x.paras.near::387427/387427:373\n```\n\n### Mintbase token URL\n\nAnd again we did the research for you:\n\n```\nhttps://www.mintbase.io/thing/[1]:[2]\n```\n\nWhere:\n\n- [1] - `meta_id` (`parsed_log[\"data\"]` for Mintbase is an array of stringified JSON that contains `meta_id`)\n- [2] - Store contract account address (basically Receipt's receiver ID)\n\nExample:\n\n```\nhttps://www.mintbase.io/thing/70eES-icwSw9iPIkUluMHOV055pKTTgQgTiXtwy3Xus:vnartistsdao.mintbase1.near\n```\n\nLet's start crafting the links:\n\n```python title=main.py\ndef format_paras_nfts(data, receipt_execution_outcome):\n    links = []\n\n    for data_element in data:\n        for token_id in data_element.get(\"token_ids\", []):\n            first_part_of_token_id = token_id.split(\":\")[0]\n            links.append(\n                f\"https://paras.id/token/{receipt_execution_outcome.receipt.receiver_id}::{first_part_of_token_id}/{token_id}\"\n            )\n\n    return {\"owner\": data[0].get(\"owner_id\"), \"links\": links}\n\ndef format_mintbase_nfts(data,", "mimetype": "text/plain", "start_char_idx": 9796, "end_char_idx": 11469, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99": {"__data__": {"id_": "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7", "node_type": "1", "metadata": {}, "hash": "786767554ee5b8835bbf60fe7357f0aa40fa271551e9f1ca1f4ddec1481e7e5d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3101ca8b-7952-4954-9246-a5bc95811dd0", "node_type": "1", "metadata": {}, "hash": "91573941d82b89f90d0a9c1a5f71d0670eb6d6d87a9618783a0a9086945567df", "class_name": "RelatedNodeInfo"}}, "text": "receipt_execution_outcome):\n    links = []\n    for data_block in data:\n        try:\n            memo = json.loads(data_block.get(\"memo\"))\n        except json.JSONDecodeError:\n            print(\n                f\"Receipt ID: `{receipt_execution_outcome.receipt.receipt_id}`\\nMemo: `{memo}`\\nError during parsing Mintbase memo from JSON string to dict\"\n            )\n            return\n\n        meta_id = memo.get(\"meta_id\")\n        links.append(\n            f\"https://www.mintbase.io/thing/{meta_id}:{receipt_execution_outcome.receipt.receiver_id}\"\n        )\n\n    return {\"owner\": data[0].get(\"owner_id\"), \"links\": links}\n```\n\nWe're going to print the receipt_id, so you would be able to search for it on [NEAR Explorer](https://nearblocks.io), marketplace name and the list of links to the NFTs along with the owner account name.\n\n```python title=main.py\nif receipt_execution_outcome.receipt.receiver_id.endswith(\n    \".paras.near\"\n):\n    output = {\n        \"receipt_id\": receipt_execution_outcome.receipt.receipt_id,\n        \"marketplace\": \"Paras\",\n        \"nfts\": format_paras_nfts(\n            parsed_log[\"data\"], receipt_execution_outcome\n        ),\n    }\n```\n\nA few words about what is going on here. If the Receipt's receiver account name ends with `.paras.near` (e.g. `x.paras.near`) we assume it's from Paras marketplace, so we are changing the corresponding variable.\n\nMintbase turn, we hope [Nate](https://twitter.com/nategeier) and his team have [migrated to NEAR Lake Framework](../migrating-to-near-lake-framework.md) already, saying \"Hi!\"", "mimetype": "text/plain", "start_char_idx": 11470, "end_char_idx": 13022, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3101ca8b-7952-4954-9246-a5bc95811dd0": {"__data__": {"id_": "3101ca8b-7952-4954-9246-a5bc95811dd0", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99", "node_type": "1", "metadata": {}, "hash": "8c17d9c3488643880828763802050e1bf50e322b09d34b6882957109e5797c63", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "644f950a-a273-4087-954e-51866510b605", "node_type": "1", "metadata": {}, "hash": "35aa2a23af33d2bed9d19b0796559d539a1f85f783909f92483d719e97bcacb9", "class_name": "RelatedNodeInfo"}}, "text": "and crafting the link:\n\n```python title=main.py\n    elif re.search(\n        \".mintbase\\d+.near\", receipt_execution_outcome.receipt.receiver_id\n    ):\n        output = {\n            \"receipt_id\": receipt_execution_outcome.receipt.receipt_id,\n            \"marketplace\": \"Mintbase\",\n            \"nfts\": format_mintbase_nfts(\n                parsed_log[\"data\"], receipt_execution_outcome\n            ),\n        }\n    else:\n        continue\n```\n\nAlmost the same story as with Paras, but a little bit more complex. The nature of Mintbase marketplace is that it's not a single marketplace! Every Mintbase user has their own store and a separate contract. And it looks like those contract addresses follow the same principle they end with `.mintbaseN.near` where `N` is number (e.g. `nate.mintbase1.near`).\n\nAfter we have defined that the ExecutionOutcome receiver is from Mintbase we are doing the same stuff as with Paras:\n\n1. Setting the `marketplace` variable to Mintbase\n2. Collecting the list of NFTs with owner and crafted links\n\nAnd make it print the output to the terminal:\n\n```python title=main.py\nprint(json.dumps(output, indent=4))\n```\n\nAll together:\n\n```python title=main.py\ndef format_paras_nfts(data, receipt_execution_outcome):\n    links = []\n\n    for data_element in data:\n        for token_id in data_element.get(\"token_ids\", []):\n            first_part_of_token_id = token_id.split(\":\")[0]\n            links.append(\n                f\"https://paras.id/token/{receipt_execution_outcome.receipt.receiver_id}::{first_part_of_token_id}/{token_id}\"\n            )\n\n    return {\"owner\": data[0].get(\"owner_id\"), \"links\": links}", "mimetype": "text/plain", "start_char_idx": 13023, "end_char_idx": 14653, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "644f950a-a273-4087-954e-51866510b605": {"__data__": {"id_": "644f950a-a273-4087-954e-51866510b605", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3101ca8b-7952-4954-9246-a5bc95811dd0", "node_type": "1", "metadata": {}, "hash": "91573941d82b89f90d0a9c1a5f71d0670eb6d6d87a9618783a0a9086945567df", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6cecd306-281f-496c-a787-4311b138de4f", "node_type": "1", "metadata": {}, "hash": "f22fc84746978dfb5f9179d926547507ce82c8535488a9a430f5c6cebfd8484f", "class_name": "RelatedNodeInfo"}}, "text": "def format_mintbase_nfts(data, receipt_execution_outcome):\n    links = []\n    for data_block in data:\n        try:\n            memo = json.loads(data_block.get(\"memo\"))\n        except json.JSONDecodeError:\n            print(\n                f\"Receipt ID: `{receipt_execution_outcome.receipt.receipt_id}`\\nMemo: `{memo}`\\nError during parsing Mintbase memo from JSON string to dict\"\n            )\n            return\n\n        meta_id = memo.get(\"meta_id\")\n        links.append(\n            f\"https://www.mintbase.io/thing/{meta_id}:{receipt_execution_outcome.receipt.receiver_id}\"\n        )\n\n    return {\"owner\": data[0].get(\"owner_id\"), \"links\": links}\n\n\nasync def handle_streamer_message(streamer_message: near_primitives.StreamerMessage):\n    for shard in streamer_message.shards:\n        for receipt_execution_outcome in shard.receipt_execution_outcomes:\n            for log in receipt_execution_outcome.execution_outcome.outcome.logs:\n                if not log.startswith(\"EVENT_JSON:\"):\n                    continue\n                try:\n                    parsed_log = json.loads(log[len(\"EVENT_JSON:\") :])\n                except json.JSONDecodeError:\n                    print(\n                        f\"Receipt ID: `{receipt_execution_outcome.receipt.receipt_id}`\\nError during parsing logs from JSON string to dict\"\n                    )\n                    continue\n\n                if (\n                    parsed_log.get(\"standard\") != \"nep171\"\n                    or parsed_log.get(\"event\") != \"nft_mint\"\n                ):\n                    continue\n\n                if receipt_execution_outcome.receipt.receiver_id.endswith(\n                    \".paras.near\"\n                ):\n                    output = {\n                        \"receipt_id\": receipt_execution_outcome.receipt.receipt_id,\n                        \"marketplace\": \"Paras\",\n                        \"nfts\": format_paras_nfts(\n                            parsed_log[\"data\"], receipt_execution_outcome\n                        ),\n                    }\n                elif re.search(\n                    \".mintbase\\d+.near\", receipt_execution_outcome.receipt.receiver_id\n                ):\n                    output = {\n                        \"receipt_id\": receipt_execution_outcome.receipt.receipt_id,\n                        \"marketplace\": \"Mintbase\",\n                        \"nfts\": format_mintbase_nfts(\n                            parsed_log[\"data\"], receipt_execution_outcome\n                        ),\n                    }\n                else:\n                    continue\n\n                print(json.dumps(output, indent=4))\n```\n\nAnd not that's it.", "mimetype": "text/plain", "start_char_idx": 14656, "end_char_idx": 17296, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6cecd306-281f-496c-a787-4311b138de4f": {"__data__": {"id_": "6cecd306-281f-496c-a787-4311b138de4f", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "644f950a-a273-4087-954e-51866510b605", "node_type": "1", "metadata": {}, "hash": "35aa2a23af33d2bed9d19b0796559d539a1f85f783909f92483d719e97bcacb9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fbe475df-ba7d-457d-9898-07300dea287b", "node_type": "1", "metadata": {}, "hash": "d3bca71d5a32a45b67d854ee24a4fd44cd27061d69ece0ac34a423b19345c767", "class_name": "RelatedNodeInfo"}}, "text": "Run the indexer to watch for NFT minting and never miss a thing.\n\n```bash\npython3 main.py\n```\n\n:::note\n\nHaving troubles running the indexer? Please, check you haven't skipped the [Credentials](../running-near-lake/credentials.md) part :)\n\n:::\n\nExample output:\n\n```\n{\n    \"receipt_id\": \"8rMK8rxb3WmFcSfM3ahFoeeoBF92pad3tpsqKoSWurr2\",\n    \"marketplace\": \"Mintbase\",\n    \"nfts\": {\n        \"owner\": \"vn-artists-dao.near\",\n        \"links\": [\n            \"https://www.mintbase.io/thing/aqdCBHB9_2XZY7pwXRRu5rGDeLQl7Q8KgNud1wKgnGo:vnartistsdao.mintbase1.near\"\n        ]\n    }\n}\n{\n    \"receipt_id\": \"ArRh94Fe1LKF9yPrAdzrMozWoxMVQbEW2Z2Zf4fsSsce\",\n    \"marketplace\": \"Paras\",\n    \"nfts\": {\n        \"owner\": \"eeaeb516e0945893ac01eaf547f499abdbd344831c5fcbefa1a5c0a9f303cc5c\",\n        \"links\": [\n            \"https://paras.id/token/x.paras.near::432714/432714:1\"\n        ]\n    }\n}\n```\n\n## Conclusion\n\nWhat a ride, yeah?", "mimetype": "text/plain", "start_char_idx": 17297, "end_char_idx": 18205, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fbe475df-ba7d-457d-9898-07300dea287b": {"__data__": {"id_": "fbe475df-ba7d-457d-9898-07300dea287b", "embedding": null, "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "163afcc5-954c-4706-a4f8-71841930e68b", "node_type": "4", "metadata": {}, "hash": "e17ccc4f872976eb8f462183b80bd13b6f1167bcd645ea0e36e9863d290bfbac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6cecd306-281f-496c-a787-4311b138de4f", "node_type": "1", "metadata": {}, "hash": "f22fc84746978dfb5f9179d926547507ce82c8535488a9a430f5c6cebfd8484f", "class_name": "RelatedNodeInfo"}}, "text": "Let's sum up what we have done:\n\n- You've learnt about [Events](https://nomicon.io/Standards/EventsFormat)\n- Now you understand how to follow for the Events\n- Knowing the fact that as a contract developer you can use Events and emit your own events, now you know how to create an indexer that follows those Events\n- We've had a closer look at NFT minting process, you can experiment further and find out how to follow `nft_transfer` Events\n\nThe material from this tutorial can be extrapolated for literally any event that follows the [Events format](https://nomicon.io/Standards/EventsFormat)\n\nNot mentioning you have a dedicated indexer to find out about the newest NFTs minted out there and to be the earliest bird to collect them.\n\nLet's go hunt doo, doo, doo \ud83e\udd88\n\n:::note Source code for the tutorial\n\n[`near-examples/near-lake-nft-indexer`](https://github.com/near-examples/near-lake-nft-indexer): source code for this tutorial\n\n:::", "mimetype": "text/plain", "start_char_idx": 18206, "end_char_idx": 19141, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b791093-3d37-42ff-8388-d5f8c0dbcf87": {"__data__": {"id_": "1b791093-3d37-42ff-8388-d5f8c0dbcf87", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "65b6d834-d63f-4387-8e86-7e58f9a982ad", "node_type": "1", "metadata": {}, "hash": "77d85a2889ca404cdd6f156b3985755f0c684d4e3e4fea87f26f305eb2ff868c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: lido\ntitle: Lido Example\n---\n\n# Hello Lido!\n\nIf you are ready to explore further, the [Lido component](https://dev.near.org/zavodil.near/widget/Lido) serves as an excellent fully-fledged example, as it demonstrates how to interact with a smart contract deployed on the Ethereum mainnet.\n\n:::info Ethers.js\n\nThis component uses the [Ethers JavaScript](https://ethers.org) library to interact with Ethereum smart contracts. Follow [this link](https://docs.ethers.org/v6/) for the official `ethers.js` documentation.\n\n:::\n\n:::info Web3 connect\n\nThe Lido example uses the [Web3Connect component](https://near.org/near/widget/ComponentDetailsPage?src=a_liutiev.near/widget/button_web3connect) to provide a [WalletConnect modal](https://github.com/WalletConnect/web3modal) so the user can connect with any Web3 Ethereum wallet like Ledger or MetaMask.\n\n:::\n\n\n### Fork the component\n\n1. Navigate to [the component](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/Lido)\n2. Select `Fork`\n3. Feel free to make any changes\n4. Click on <kbd>Save</kbd> to deploy the component\n\n:::note\nTo deploy the component, you'll need to sign in with a NEAR account and to make a deposit of a small amount of NEAR for the storage cost. This is because the components are stored in the NEAR network.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1307, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "65b6d834-d63f-4387-8e86-7e58f9a982ad": {"__data__": {"id_": "65b6d834-d63f-4387-8e86-7e58f9a982ad", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b791093-3d37-42ff-8388-d5f8c0dbcf87", "node_type": "1", "metadata": {}, "hash": "af6725ebf9d52a846efa9b43062df76155591ac219ff42983bb2a6759c67085b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5221cd65-946d-4eaa-98f2-8aa43cbf30db", "node_type": "1", "metadata": {}, "hash": "ead6d57b8179ca4b424147c976a41b5406adab504977c0e2ed7b79c5c9b0c857", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n### Source code\n\n```js\nif (\n  state.chainId === undefined &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\nif (state.chainId !== undefined && state.chainId !== 1) {\n  return <p>Switch to Ethereum Mainnet</p>;\n}\n\n// FETCH LIDO ABI\n\nconst lidoContract = \"0xae7ab96520de3a18e5e111b5eaab095312d7fe84\";\nconst tokenDecimals = 18;\n\nconst lidoAbi = fetch(\n  \"https://raw.githubusercontent.com/lidofinance/lido-subgraph/master/abis/Lido.json\"\n);\nif (!lidoAbi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(lidoAbi.body);\n\n// FETCH LIDO STAKING APR\n\nif (state.lidoArp === undefined) {\n  const apr = fetch(\n    \"https://api.allorigins.win/get?url=https://stake.lido.fi/api/sma-steth-apr\"\n  );\n  if (!apr) return;\n  State.update({ lidoArp: JSON.parse(apr?.body?.contents) ?? \"...\" });\n}\n\n// HELPER FUNCTIONS\n\nconst getStakedBalance = (receiver) => {\n  const encodedData = iface.encodeFunctionData(\"balanceOf\", [receiver]);\n\n  return Ethers.provider()\n    .call({\n      to: lidoContract,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      return Big(receiverBalanceHex.toString())\n        .div(Big(10).pow(tokenDecimals))\n        .toFixed(2)\n        .replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\");\n    });\n};\n\nconst submitEthers = (strEther, _referral) => {\n  if (!strEther) {\n    return console.log(\"Amount is missing\");\n  }\n  const erc20 = new ethers.Contract(\n    lidoContract,", "mimetype": "text/plain", "start_char_idx": 1308, "end_char_idx": 3022, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5221cd65-946d-4eaa-98f2-8aa43cbf30db": {"__data__": {"id_": "5221cd65-946d-4eaa-98f2-8aa43cbf30db", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "65b6d834-d63f-4387-8e86-7e58f9a982ad", "node_type": "1", "metadata": {}, "hash": "77d85a2889ca404cdd6f156b3985755f0c684d4e3e4fea87f26f305eb2ff868c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6dc3bad5-438d-422a-a292-f2231bc7b60b", "node_type": "1", "metadata": {}, "hash": "fbcce5b2e72b0251874a99c7c1f5bb612037e2492b630ae32fd328b5ef6568cd", "class_name": "RelatedNodeInfo"}}, "text": "lidoAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  let amount = ethers.utils.parseUnits(strEther, tokenDecimals).toHexString();\n\n  erc20.submit(lidoContract, { value: amount }).then((transactionHash) => {\n    console.log(\"transactionHash is \" + transactionHash);\n  });\n};\n\n// DETECT SENDER\n\nif (state.sender === undefined) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    State.update({ sender: accounts[0] });\n    console.log(\"set sender\", accounts[0]);\n  }\n}\n\n//if (!state.sender)  return \"Please login first\";\n\n// FETCH SENDER BALANCE\n\nif (state.balance === undefined && state.sender) {\n  Ethers.provider()\n    .getBalance(state.sender)\n    .then((balance) => {\n      State.update({ balance: Big(balance).div(Big(10).pow(18)).toFixed(2) });\n    });\n}\n\n// FETCH SENDER STETH BALANCE\n\nif (state.stakedBalance === undefined && state.sender) {\n  getStakedBalance(state.sender).then((stakedBalance) => {\n    State.update({ stakedBalance });\n  });\n}\n\n// FETCH TX COST\n\nif (state.txCost === undefined) {\n  const gasEstimate = ethers.BigNumber.from(1875000);\n  const gasPrice = ethers.BigNumber.from(1500000000);\n\n  const gasCostInWei = gasEstimate.mul(gasPrice);\n  const gasCostInEth = ethers.utils.formatEther(gasCostInWei);\n\n  let responseGql = fetch(\n    \"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2\",\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        query: `{\n          bundle(id: \"1\" ) {\n            ethPrice\n          }\n        }`,\n      }),\n    }\n  );\n\n  if (!responseGql) return \"\";\n\n  const ethPriceInUsd = responseGql.", "mimetype": "text/plain", "start_char_idx": 3027, "end_char_idx": 4683, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6dc3bad5-438d-422a-a292-f2231bc7b60b": {"__data__": {"id_": "6dc3bad5-438d-422a-a292-f2231bc7b60b", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5221cd65-946d-4eaa-98f2-8aa43cbf30db", "node_type": "1", "metadata": {}, "hash": "ead6d57b8179ca4b424147c976a41b5406adab504977c0e2ed7b79c5c9b0c857", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc5be5cb-5a3e-4dd5-938a-4030a533e319", "node_type": "1", "metadata": {}, "hash": "19f523e1916fd2afa7284b87d7349bc8a50bc4094c9bedb5709207c8cdcbce7c", "class_name": "RelatedNodeInfo"}}, "text": "body.data.bundle.ethPrice;\n\n  const txCost = Number(gasCostInEth) * Number(ethPriceInUsd);\n\n  State.update({ txCost: `$${txCost.toFixed(2)}` });\n}\n\n// FETCH CSS\n\nconst cssFont = fetch(\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\n).body;\nconst css = fetch(\n  \"https://pluminite.mypinata.cloud/ipfs/Qmboz8aoSvVXLeP5pZbRtNKtDD3kX5D9DEnfMn2ZGSJWtP\"\n).body;\n\nif (!cssFont || !css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n    ${cssFont}\n    ${css}\n`,\n  });\n}\nconst Theme = state.theme;\n\n// OUTPUT UI\n\nconst getSender = () => {\n  return !state.sender\n    ? \"\"\n    : state.sender.substring(0, 6) +\n        \"...\" +\n        state.sender.substring(state.sender.length - 4, state.sender.length);\n};\n\nreturn (\n  <Theme>\n    <div className=\"LidoContainer\">\n      <div className=\"Header\">Stake Ether</div>\n      <div className=\"SubHeader\">Stake ETH and receive stETH while staking.</div>\n\n      <div className=\"LidoForm\">\n        {state.sender && (\n          <>\n            <div className=\"LidoFormTopContainer\">\n              <div className=\"LidoFormTopContainerLeft\">\n                <div className=\"LidoFormTopContainerLeftContent1\">\n                  <div className=\"LidoFormTopContainerLeftContent1Container\">\n                    <span>Available to stake</span>\n                    <div className=\"LidoFormTopContainerLeftContent1Circle\" />\n                  </div>\n                </div>\n                <div className=\"LidoFormTopContainerLeftContent2\">\n                  <span>\n                    {state.balance ?? (!state.sender ?", "mimetype": "text/plain", "start_char_idx": 4683, "end_char_idx": 6439, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc5be5cb-5a3e-4dd5-938a-4030a533e319": {"__data__": {"id_": "fc5be5cb-5a3e-4dd5-938a-4030a533e319", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6dc3bad5-438d-422a-a292-f2231bc7b60b", "node_type": "1", "metadata": {}, "hash": "fbcce5b2e72b0251874a99c7c1f5bb612037e2492b630ae32fd328b5ef6568cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e23a600-7614-4181-8bcb-de5d0e97b663", "node_type": "1", "metadata": {}, "hash": "8b83588e5cd2bcf1f1cd8cf53da211249850e04196c72fccebbf1b6b39e72957", "class_name": "RelatedNodeInfo"}}, "text": "\"0\" : \"...\")}&nbsp;ETH\n                  </span>\n                </div>\n              </div>\n              <div className=\"LidoFormTopContainerRight\">\n                <div className=\"LidoFormTopContainerRightContent1\">\n                  <div className=\"LidoFormTopContainerRightContent1Text\">\n                    <span>{getSender()}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"LidoSplitter\" />\n          </>\n        )}\n        <div\n          className={\n            state.sender ? \"LidoFormBottomContainer\" : \"LidoFormTopContainer\"\n          }\n        >\n          <div className=\"LidoFormTopContainerLeft\">\n            <div className=\"LidoFormTopContainerLeftContent1\">\n              <div className=\"LidoFormTopContainerLeftContent1Container\">\n                <span>Staked amount</span>\n              </div>\n            </div>\n            <div className=\"LidoFormTopContainerLeftContent2\">\n              <span>\n                {state.stakedBalance ?? (!state.sender ? \"0\" : \"...\")}\n                &nbsp;stETH\n              </span>\n            </div>\n          </div>\n          <div className=\"LidoFormTopContainerRight\">\n            <div className=\"LidoAprContainer\">\n              <div className=\"LidoAprTitle\">Lido APR</div>\n              <div className=\"LidoAprValue\">{state.lidoArp ??", "mimetype": "text/plain", "start_char_idx": 6440, "end_char_idx": 7808, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e23a600-7614-4181-8bcb-de5d0e97b663": {"__data__": {"id_": "3e23a600-7614-4181-8bcb-de5d0e97b663", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc5be5cb-5a3e-4dd5-938a-4030a533e319", "node_type": "1", "metadata": {}, "hash": "19f523e1916fd2afa7284b87d7349bc8a50bc4094c9bedb5709207c8cdcbce7c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29ec3513-a416-4cd6-a168-e99574b5b936", "node_type": "1", "metadata": {}, "hash": "65fbf755b890caa9301e4d7838e21cf74f84e69da724ddb053dfb307cf29508d", "class_name": "RelatedNodeInfo"}}, "text": "\"...\"}%</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"LidoStakeForm\">\n        <div className=\"LidoStakeFormInputContainer\">\n          <span className=\"LidoStakeFormInputContainerSpan1\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path\n                opacity=\"0.6\"\n                d=\"M11.999 3.75v6.098l5.248 2.303-5.248-8.401z\"\n              ></path>\n              <path d=\"M11.999 3.75L6.75 12.151l5.249-2.303V3.75z\"></path>\n              <path\n                opacity=\"0.6\"\n                d=\"M11.999 16.103v4.143l5.251-7.135L12 16.103z\"\n              ></path>\n              <path d=\"M11.999 20.246v-4.144L6.75 13.111l5.249 7.135z\"></path>\n              <path\n                opacity=\"0.2\"\n                d=\"M11.999 15.144l5.248-2.993-5.248-2.301v5.294z\"\n              ></path>\n              <path\n                opacity=\"0.6\"\n                d=\"M6.75 12.151l5.249 2.993V9.85l-5.249 2.3z\"\n              ></path>\n            </svg>\n          </span>\n          <span className=\"LidoStakeFormInputContainerSpan2\">\n            <input\n              disabled={!state.sender}\n              className=\"LidoStakeFormInputContainerSpan2Input\"\n              value={state.strEther}\n              onChange={(e) => State.update({ strEther: e.target.value })}\n              placeholder=\"Amount\"\n            />\n          </span>\n          <span\n            className=\"LidoStakeFormInputContainerSpan3\"\n            onClick={() => {\n              State.update({\n                strEther: (state.balance > 0.05\n                  ?", "mimetype": "text/plain", "start_char_idx": 7809, "end_char_idx": 9423, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "29ec3513-a416-4cd6-a168-e99574b5b936": {"__data__": {"id_": "29ec3513-a416-4cd6-a168-e99574b5b936", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3e23a600-7614-4181-8bcb-de5d0e97b663", "node_type": "1", "metadata": {}, "hash": "8b83588e5cd2bcf1f1cd8cf53da211249850e04196c72fccebbf1b6b39e72957", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "12e99050-9a77-4dea-bb11-25210bbdad94", "node_type": "1", "metadata": {}, "hash": "dba2b37d3e7901cc95ddad207eb32eae90808f63be6f6051b2f3ba00ae0a1730", "class_name": "RelatedNodeInfo"}}, "text": "parseFloat(state.balance) - 0.05\n                  : 0\n                ).toFixed(2),\n              });\n            }}\n          >\n            <button\n              className=\"LidoStakeFormInputContainerSpan3Content\"\n              disabled={!state.sender}\n            >\n              <span className=\"LidoStakeFormInputContainerSpan3Max\">MAX</span>\n            </button>\n          </span>\n        </div>\n        {!!state.sender ? (\n          <button\n            className=\"LidoStakeFormSubmitContainer\"\n            onClick={() => submitEthers(state.strEther, state.sender)}\n          >\n            <span>Submit</span>\n          </button>\n        ) : (\n          <Web3Connect\n            className=\"LidoStakeFormSubmitContainer\"\n            connectLabel=\"Connect with Web3\"\n          />\n        )}\n\n        <div className=\"LidoFooterContainer\">\n          {state.sender && (\n            <div className=\"LidoFooterRaw\">\n              <div className=\"LidoFooterRawLeft\">You will receive</div>\n              <div className=\"LidoFooterRawRight\">${state.strEther ?? 0} stETH</div>\n            </div>\n          )}\n          <div className=\"LidoFooterRaw\">\n            <div className=\"LidoFooterRawLeft\">Exchange rate</div>\n            <div className=\"LidoFooterRawRight\">1 ETH = 1 stETH</div>\n          </div>\n          {false && (\n            <div className=\"LidoFooterRaw\">\n              <div className=\"LidoFooterRawLeft\">Transaction cost</div>\n              <div className=\"LidoFooterRawRight\">{state.txCost}</div>\n            </div>\n          )}\n          <div className=\"LidoFooterRaw\">\n            <div className=\"LidoFooterRawLeft\">Reward fee</div>\n            <div className=\"LidoFooterRawRight\">10%</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Theme>\n);\n```\n\n#### Fork the component\n\n1. Navigate to [the component](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/Lido)\n2. Select `Fork`\n3. Feel free to make any changes\n4.", "mimetype": "text/plain", "start_char_idx": 9424, "end_char_idx": 11393, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "12e99050-9a77-4dea-bb11-25210bbdad94": {"__data__": {"id_": "12e99050-9a77-4dea-bb11-25210bbdad94", "embedding": null, "metadata": {"file_path": "./near_dist/hello-lido.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95", "node_type": "4", "metadata": {}, "hash": "d28355ad6322b82d9607df47667d8f056a3747361e3cf4afb554d2ff999089dd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29ec3513-a416-4cd6-a168-e99574b5b936", "node_type": "1", "metadata": {}, "hash": "65fbf755b890caa9301e4d7838e21cf74f84e69da724ddb053dfb307cf29508d", "class_name": "RelatedNodeInfo"}}, "text": "Click on <kbd>Save</kbd> to deploy the component\n\n:::note\nTo deploy the component, you'll need to sign in with a NEAR account and to make a deposit of a small amount of NEAR for the storage cost. This is because NEAR components are stored in the NEAR network.\n:::", "mimetype": "text/plain", "start_char_idx": 11394, "end_char_idx": 11657, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7849a40c-5ba9-46e0-b954-d2102ac1721f": {"__data__": {"id_": "7849a40c-5ba9-46e0-b954-d2102ac1721f", "embedding": null, "metadata": {"file_path": "./near_dist/getting-started.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "159bd272-a134-460a-a757-6a01103a85bd", "node_type": "4", "metadata": {}, "hash": "9fdaadb8b9a61cb843bc8cb209e9a9d02164c656dc92f4da44d490efeace5dbd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d70d6c86-c277-4c98-b0fd-afb559cd1cbd", "node_type": "1", "metadata": {}, "hash": "26b53ec41e523c5d15fa3714e631452ea2f12ecd755a2b373a493241ccf565a6", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: getting-started\ntitle: Getting Started with Chain Signatures\n---\n\nChain Signatures is a groundbreaking technology built on NEAR that enables all accounts, including smart contracts, to sign and execute transactions across multiple blockchains.  \n\n![img](https://pages.near.org/wp-content/uploads/2024/02/acct-abstraction-blog-1.png)\n\nThis innovation leverages Multi-Party Computation (MPC) and a distributed network of node operators to create joint signatures from arbitrary payloads, allowing NEAR users to control external blockchain accounts.\n\nChain Signatures enhances blockchain interoperability, giving ownership of diverse assets, cross-chain accounts, and data to a single NEAR account.\n\n---\n\n## How does it work?\n\nWhen a NEAR account - could be a user or a **smart contract** - wants to interact with a foreign blockchain, it just need to follow four simple steps.\n\n#### 1. Deriving Foreign Addresses\n\nChain Signatures uses [derivation paths](../../../1.concepts/abstraction/chain-signatures.md#derivation-paths-one-account-multiple-chains) to represent accounts on foreign blockchains\n\nThe NEAR account\u2019s name and the derivation path are used to mathematically derive a unique address for the user on the foreign blockchain\n\n<details>\n\n<summary> Derivation Paths </summary>\n\nA NEAR account will always derive the same address on the foreign blockchain using the same derivation path\n\nNotice that, since the foreign address is derived from the NEAR account name, it is not possible for another NEAR account to control the same address\n\n</details>\n\n\n#### 2. Creating the Transaction\n\nThe client constructs the foreign transaction to be signed, which varies depending on the target blockchain\n\n#### 3. Requesting the Signature\n\nA NEAR account or contract calls the sign method of the MPC smart contract ([v1.signer](https://nearblocks.io/address/v1.signer)) to sign the transaction and waits while our MPC service generates the signature\n\n#### 4. Relaying the Signature  \n\nOnce the signature is ready, the client reconstructs the signed transaction using the signature and broadcasts it to the destination blockchain\n\n:::tip\n\nUsing Chain Signatures, developers can build cross-chain DeFi applications with seamless user experiences, eliminating the need for traditional bridges. This process eliminates the need for traditional bridges and enables developers to build innovative cross-chain DeFi applications with seamless user experiences.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2456, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d70d6c86-c277-4c98-b0fd-afb559cd1cbd": {"__data__": {"id_": "d70d6c86-c277-4c98-b0fd-afb559cd1cbd", "embedding": null, "metadata": {"file_path": "./near_dist/getting-started.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "159bd272-a134-460a-a757-6a01103a85bd", "node_type": "4", "metadata": {}, "hash": "9fdaadb8b9a61cb843bc8cb209e9a9d02164c656dc92f4da44d490efeace5dbd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7849a40c-5ba9-46e0-b954-d2102ac1721f", "node_type": "1", "metadata": {}, "hash": "ddeaba50cdfc346971e9f2bf6de3ba18968b6d41b9a6b404af46af04a7bd9e93", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eae7da77-44f2-4c46-913c-4bd922b075f3", "node_type": "1", "metadata": {}, "hash": "fcdc1ca9b18c9c4812aacbc9531e0a8a08178c350f66e8fec7dc45fa691ea2e5", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Use Cases\n\nChain Signatures can be used to build a wide range of applications that leverage blockchain interoperability. Here are some examples:\n\n1. **DeFi on Bitcoin (and other chain without smart contracts)**  \n   * Chain signatures allow NEAR smart contract to program assets on Bitcoin  \n   * Build lending, swaps, runes launchpads, passkey-based Bitcoin wallets, and more  \n2. **Chain agnostic applications**  \n   * Since chain signatures can sign transactions for all blockchains, developers can support every single chain with just one smart contract  \n   * Multichain DEXs, lending protocols, oracles, derivatives, and more  \n3. **Multichain account abstraction**   \n   * Users can control assets on all chains with just their NEAR account, and can utilize account abstraction features on any chain including passkeys, key rotation, etc  \n   * Using the multichain gas relayer, users can pay for gas fees on any chain using USDC  \n4. **Privacy**  \n   * Chain signatures can be used to encrypt and decrypt information in a programmatic way  \n   * This enables privacy applications, and even decrypting information based on ownership of assets/NFTs\n\n---\n\n## How to Get Started?\n\n1. **Familiarize Yourself with Chain Signatures:**  \n   * Understand the [basics of Chain Signatures](https://docs.near.org/concepts/abstraction/chain-signatures) and how they simplify blockchain interactions.  \n   * Review the technical [explainer](https://near.org/blog/unlocking-web3-usability-with-account-aggregation).  \n2. **Explore the Use Cases:**  \n   * Review [examples of use cases for Chain Signatures](https://pages.near.org/blog/unlocking-multichain-web3-with-near-chain-signatures/), such as Multichain DAO, Multichain NFT Minter, and Bitcoin Runes Airdrop.  \n3. **Access Resources and Documentation:**  \n   * Visit the [Chain Signatures documentation](https://docs.near.org/build/chain-abstraction/chain-signatures) for detailed technical information and code snippets.  \n   * Check out the [Linktree for Chain Signatures](https://linktr.ee/chainsignatures) for various resources, including demos and tutorials.  \n4.", "mimetype": "text/plain", "start_char_idx": 2458, "end_char_idx": 4588, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eae7da77-44f2-4c46-913c-4bd922b075f3": {"__data__": {"id_": "eae7da77-44f2-4c46-913c-4bd922b075f3", "embedding": null, "metadata": {"file_path": "./near_dist/getting-started.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "159bd272-a134-460a-a757-6a01103a85bd", "node_type": "4", "metadata": {}, "hash": "9fdaadb8b9a61cb843bc8cb209e9a9d02164c656dc92f4da44d490efeace5dbd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d70d6c86-c277-4c98-b0fd-afb559cd1cbd", "node_type": "1", "metadata": {}, "hash": "26b53ec41e523c5d15fa3714e631452ea2f12ecd755a2b373a493241ccf565a6", "class_name": "RelatedNodeInfo"}}, "text": "**Try the Demos:**  \n   * Use the [command-line-based demo](https://github.com/near-examples/chainsig-script) to derive accounts and send transactions on Bitcoin, Ethereum, Doge, and Ripple.  \n   * Check out the [web app demo](https://github.com/near-examples/near-multichain/tree/main).  \n5. **Engage with the Community:**  \n   * Join the [Chain Abstraction developers\u2019 channel on Telegram](https://t.me/chain\\_abstraction) to connect with other developers and get support.\n\n---\n\n## Where to Learn More?\n\nTo dive deeper into Chain Signatures and its applications, you can explore the following resources:\n\n- **Technical Blogs and Deep Dives:** Read [high-level use cases](https://pages.near.org/blog/unlocking-multichain-web3-with-near-chain-signatures) and technical [explainer](https://near.org/blog/unlocking-web3-usability-with-account-aggregation) posts on the NEAR blog\n* **Community and Support:** Engage with the NEAR community on social media platforms like Twitter and participate in discussions to stay updated on the latest developments", "mimetype": "text/plain", "start_char_idx": 4589, "end_char_idx": 5638, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2fad36df-c3ca-49cd-8fa5-a952b2472f53": {"__data__": {"id_": "2fad36df-c3ca-49cd-8fa5-a952b2472f53", "embedding": null, "metadata": {"file_path": "./near_dist/indexers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5", "node_type": "4", "metadata": {}, "hash": "6516f29a392761ae6c07969a1430e13c809081a94ab38a4af41c9a40ec81bd74", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "20f7d0ed-51f5-4b28-8862-709b7cb1ca39", "node_type": "1", "metadata": {}, "hash": "8f1567e58923b2a8dde5f1cb0b6d0dc5465cd342c51aa4b3f7ae8c78ab9d1982", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: indexers\ntitle: QueryAPI Indexing Example\nsidebar_label: Getting Started\n---\n\nWith QueryAPI you can quickly create your own indexer by:\n\n* Writing your own custom indexer function;\n* Specifying the schema for your own custom hosted database and write to it with your indexer function;\n* Retrieving that data through a GraphQL API.\n\n:::tip\n\nYou can watch a complete video walkthrough of Query API [following this link](https://www.youtube.com/watch?v=VwO6spk8D58).\n\n:::\n\n## How it Works\n\nQueryAPI works by:\n\n1. Writing the indexer name to the blockchain, registering its creation;\n2. Creating the tables as specified in the schema to the GraphQL database, exposing a GraphQL endpoint to query the data;\n3. Spinning up a cloud process that runs your indexer function, writing to the GraphQL database;\n\nYou can access the [NEAR QueryAPI by following this link](https://dev.near.org/dataplatform.near/widget/QueryApi.App).\n\nThis should take you to a dashboard that looks like this:\n\n![QueryAPI Dashboard](/docs/assets/QAPIScreen.png)\n\n:::tip Video Walkthrough\n\n**Tip:** Watch the [QueryAPI widget introduction](https://www.youtube.com/watch?v=VwO6spk8D58&t=109s).\n\n:::\n\n## Creating an Indexer\n\nClicking on \"Create New Indexer\" will redirect you in-browser to a Component code editor that looks like this:\n\n![QueryAPI Indexer Dashboard](/docs/assets/QAPIScreen2.png)\n\nThis is the interface through which you can create a new Indexer. On here you can specify:\n\n* the filtering, transforming logic in `indexingLogic.js`\n* the database schema in `schema.sql`\n* the GraphQL queries in `GraphiQL`\n* the indexer name on Indexer Name\n* from which block to start indexing\n\n### Design Workflow\n\nTo design and create your indexer, you can follow this recommended workflow:\n\n1. Using [nearblocks.io](https://nearblocks.io), find transactions to smart contracts that you want to index\n2. Take the block `height` and put it into the [Debug Mode filter](../query-api/index-function.md#local-debug-mode), open your browser's _Developer Console_, and hit <kbd>Play</kbd>\n4.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2060, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "20f7d0ed-51f5-4b28-8862-709b7cb1ca39": {"__data__": {"id_": "20f7d0ed-51f5-4b28-8862-709b7cb1ca39", "embedding": null, "metadata": {"file_path": "./near_dist/indexers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5", "node_type": "4", "metadata": {}, "hash": "6516f29a392761ae6c07969a1430e13c809081a94ab38a4af41c9a40ec81bd74", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2fad36df-c3ca-49cd-8fa5-a952b2472f53", "node_type": "1", "metadata": {}, "hash": "72f110507f9cb9576a49320243da03a69d454cbd8d1f872ce8702cb83fd84e96", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0dc6a52d-f6c6-444c-8e05-c62442b8aa74", "node_type": "1", "metadata": {}, "hash": "2cbe0f49900d6c1ef7876e6c6d1fac2116803ef2f555f0f7380ccab1389b132f", "class_name": "RelatedNodeInfo"}}, "text": "Inspect the block and write JavaScript code using [NEAR Lake Primitives](../lake-framework/building-indexers/primitives.md) to extract data from a `block` object. (This JS code will be your [`IndexingLogic.js`](#indexinglogicjs))\n   > **Tip:** Use `context.log` for debugging to ensure you are getting the right results\n4. Add more blocks for debugging, or start following the blockchain to see how new blocks are handled\n5. Create tables that you need to store the data using Postgres [CREATE table syntax](https://www.postgresql.org/docs/current/sql-createtable.html). (This SQL code will be your [`schema.sql`](#schemasql))\n\n\n:::tip Video Walkthrough\n\n**Tip:** Watch the [introduction to indexing functions](https://www.youtube.com/watch?v=VwO6spk8D58&t=411s).\n\n:::\n\n### `IndexingLogic.js`\n\nThe indexer code editor is pre-populated with a template that looks like this:\n\n```js\nimport { Block } from \"@near-lake/primitives\";\n/**\n * Note: We only support javascript at the moment. We will support Rust, Typescript in a further release.\n */\n\n/**\n * getBlock(block, context) applies your custom logic to a Block on Near and commits the data to a database.\n *\n * Learn more about indexers here:  https://docs.near.org/concepts/advanced/indexers\n *\n * @param {block} Block - A Near Protocol Block\n * @param {context} - A set of helper methods to retrieve and commit state\n */\nasync function getBlock(block: Block, context) {\n  // Add your code here\n  const h = block.header().height;\n  await context.set(\"height\", h);\n}\n```\n\nThis editor with this code shows the `indexingLogic.js` file that is selected. This logic in particular will perform the filtering of blockchain transactions, transforming and saving the data you specify to a GraphQL database you define in `schema.sql`.\n\n:::info Saving data\n\nYou will likely want to save the data you capture from your indexer to your defined tables in the GraphQL database. You can do this easily by using the [`context.db`](../query-api/context.md#db) object [`insert`](../query-api/context.md#insert) method.", "mimetype": "text/plain", "start_char_idx": 2061, "end_char_idx": 4111, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0dc6a52d-f6c6-444c-8e05-c62442b8aa74": {"__data__": {"id_": "0dc6a52d-f6c6-444c-8e05-c62442b8aa74", "embedding": null, "metadata": {"file_path": "./near_dist/indexers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5", "node_type": "4", "metadata": {}, "hash": "6516f29a392761ae6c07969a1430e13c809081a94ab38a4af41c9a40ec81bd74", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "20f7d0ed-51f5-4b28-8862-709b7cb1ca39", "node_type": "1", "metadata": {}, "hash": "8f1567e58923b2a8dde5f1cb0b6d0dc5465cd342c51aa4b3f7ae8c78ab9d1982", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e16c6fe0-00c3-4079-b1cd-88da01f2dda2", "node_type": "1", "metadata": {}, "hash": "7b9108e5911aeef3a5bb8e454882565073dfcf71eed1d29f1dd37aa1436c733d", "class_name": "RelatedNodeInfo"}}, "text": "For example, if you have a table called `transactions` with columns `id`, `sender`, `receiver`, `amount`, `block_height`, you can insert a mutation query for one new element in the table like this:\n\n```js\nconst tx = {\n    block_height: h,\n    sender: \"senderId\",\n    receiver: \"receiverId\",\n    amount: 100,\n};\n\nawait context.db.Transactions.insert(tx);\n```\n\n:::\n\n:::info Using GraphQL mutations\n\nYou can also insert elements using GraphQL mutation queries in your `indexingLogic.js` file:\n\n```js\nawait context.graphql(`\n  mutation MyMutation($transaction: some_table_insert_input!) {\n    insert_<ACCOUNT_NAME>_near_transactions_one(\n      object: $transaction\n    ) {\n      affected_rows\n    }\n  }\n`);\n```\n\nCreating GraphQL queries within strings can be difficult, especially considering that the table names vary depending on your indexer name and account ID. An easier way to do this would be by visiting the GraphQL Playground site and creating the queries there.\n\n> **Tip:** watch the video on how to [create queries in Playground](https://www.youtube.com/watch?v=VwO6spk8D58&t=1207s).\n\n:::\n\n### `schema.sql`\n\nThis tab in the editor will be pre-populated with a template that looks like this:\n\n```sql\nCREATE TABLE \"indexer_storage\" (\n  \"function_name\" TEXT NOT NULL,\n  \"key_name\" TEXT NOT NULL,\n  \"value\" TEXT NOT NULL,\n  PRIMARY KEY (\"function_name\", \"key_name\")\n);\n```\n\nThis is the database schema that will be used to store the data you specify in `indexingLogic.js`. You can add more tables and columns to this schema as you see fit. They will be created as soon as you create the indexer.\n\nCreating this default table will allow you to use the [`context.set`](../query-api/context.md#set) helper method to write data. It takes two arguments: a key argument that accepts a string and a value argument,  which will be written to the `key_name` and `value` columns.\n\n:::caution Note on schema migration\nYou are able to update `indexingLogic.js` after you have registered/created your indexer, but you are only allowed to specify `schema.sql` once before you submit your indexer.", "mimetype": "text/plain", "start_char_idx": 4114, "end_char_idx": 6199, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e16c6fe0-00c3-4079-b1cd-88da01f2dda2": {"__data__": {"id_": "e16c6fe0-00c3-4079-b1cd-88da01f2dda2", "embedding": null, "metadata": {"file_path": "./near_dist/indexers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5", "node_type": "4", "metadata": {}, "hash": "6516f29a392761ae6c07969a1430e13c809081a94ab38a4af41c9a40ec81bd74", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0dc6a52d-f6c6-444c-8e05-c62442b8aa74", "node_type": "1", "metadata": {}, "hash": "2cbe0f49900d6c1ef7876e6c6d1fac2116803ef2f555f0f7380ccab1389b132f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3254f7be-faa9-4326-bf39-16b8b8b49e0e", "node_type": "1", "metadata": {}, "hash": "3ee7b0a32bc2bb3a52e6dd9371ba5ae3dae3b368acef31ebc089d9aad075be3a", "class_name": "RelatedNodeInfo"}}, "text": "If you want to update your schema, you will have to create a new indexer.\n:::\n\n### `GraphiQL`\n\nThe GraphiQL tab in the editor will allow you to view the returned data from your GraphQL endpoint. This is best verified after you have created the indexer.\n\n:::tip Video Walkthrough\n\n**Tip:** Watch how to [create mutations in GraphQL](https://www.youtube.com/watch?v=VwO6spk8D58&t=781s).\n\n:::\n\n### Publishing\n\nClicking the <kbd>Publish</kbd> button will open the following pop-up. From here, you can configure the Indexer name, start block, and contract filter.\n\n![Publishing QueryAPI Indexer](/docs/assets/QAPIPublish.png)\n\n#### Start Block Options\n- `Start from latest block`: Start indexing from the tip of the network. The exact block height is not guaranteed. Useful for testing indexing for events happening in real-time.\n- `Continue from last processed block`: Update the configuration of the Indexer, and resume indexing from the last processed block. The block at which the configuration is updated is not guaranteed. Useful for fixing bugs encountered on specific blocks, adding additional logs, etc.\n- `Start from block height`: Start indexing from the height specified, i.e., when the contract was deployed, or when a specific event occurs.\n\n:::info\n`Continue from last processed block` is only available for existing indexers. Updating the contract filter is disabled for this option, as it will create a backlog of blocks for two different contracts.\n:::\n\n:::warning\n`Start from latest block` and `Start from block height` supersede the existing process. All queued blocks at the time of update will be cleared.\n:::\n\n## Performing Queries on the Public GraphQL API\n\nIn this section, we will provide a brief overview of how to query from a component in NEAR.\n\nIt is helpful to create a helper method which will allow us to fetch from our GraphQL API. Let's call it`fetchGraphQL`. It takes three parameters:\n\n1. `queriesDoc`: A string containing the queries you would like to execute.\n2. `queryName`: The specific query you want to run.\n3. `variables`: Any variables to pass in that your query supports, such as `offset` and `limit` for pagination.", "mimetype": "text/plain", "start_char_idx": 6200, "end_char_idx": 8357, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3254f7be-faa9-4326-bf39-16b8b8b49e0e": {"__data__": {"id_": "3254f7be-faa9-4326-bf39-16b8b8b49e0e", "embedding": null, "metadata": {"file_path": "./near_dist/indexers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5", "node_type": "4", "metadata": {}, "hash": "6516f29a392761ae6c07969a1430e13c809081a94ab38a4af41c9a40ec81bd74", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e16c6fe0-00c3-4079-b1cd-88da01f2dda2", "node_type": "1", "metadata": {}, "hash": "7b9108e5911aeef3a5bb8e454882565073dfcf71eed1d29f1dd37aa1436c733d", "class_name": "RelatedNodeInfo"}}, "text": "```javascript\nfunction fetchGraphQL(queriesDoc, queryName, variables) {\n  return asyncFetch(\n    QUERY_API_ENDPOINT,\n    {\n      method: \"POST\",\n      headers: { \"x-hasura-role\": `<your_account_name>_near` },\n      body: JSON.stringify({\n        queries: queriesDoc,\n        variables: variables,\n        operationName: queryName,\n      }),\n    }\n  );\n}\n```\n\nTo use the `fetchGraphQL` function, first define a string of queries, e.g `transactionQueriesDoc` containing your desired queries:\n\n```javascript\nconst transactionQueriesDoc = `query TransactionsQuery {\n  root_near_transactions {\n    id\n    sender\n    receiver\n    amount\n    block_height\n  }\n}\n...\nquery AnotherQuery {\n  root_near_accounts {\n    id\n  }\n}`;\n```\n\nNext, call the `fetchGraphQL` function with the appropriate parameters and process the results. In this example, we fetch transaction data and update the application state:\n\n```javascript\nfetchGraphQL(transactionQueriesDoc, \"TransactionsQuery\", {})\n  .then((result) => {\n    if (result.status === 200) {\n      let data = result.body.data;\n      if (data) {\n        const transactions = data.root_near_transactions;\n        // Perform any necessary operations on the fetched data\n        ...\n        // Update state with the new transactions data\n        State.update({\n          transactions: transactions,\n        });\n      }\n    }\n  });\n```\n\nWe have just shown how to fetch data from the indexers that we have created from within NEAR. To view a more complex example, see this widget which fetches posts with proper pagination: [Posts Widget powered By QueryAPI](https://dev.near.org/dataplatform.near/widget/QueryApi.Examples.Feed.Posts).\n\n:::tip Video Walkthrough\n\n**Tip:** Watch an [end-to-end example](https://www.youtube.com/watch?v=VwO6spk8D58&t=943s).\n\n:::", "mimetype": "text/plain", "start_char_idx": 8359, "end_char_idx": 10146, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8bd6107-48c9-473d-9db1-5db9cdd7dff6": {"__data__": {"id_": "d8bd6107-48c9-473d-9db1-5db9cdd7dff6", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c2cd96e0-1316-47a0-bee3-1b571070e54b", "node_type": "1", "metadata": {}, "hash": "f1c1ee0559c9c2605936fdea94fc831d9b7734c7af1bf6e085fa2f111f76a55a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: help\ntitle: NEAR - Your Gateway to an Open Web\n---\n\n\n# Developer Help & Resources\n\n[![DEVHUB](https://img.shields.io/badge/DEV_HUB-03BE09)](https://neardevhub.org/)\n[![CALENDAR](https://img.shields.io/badge/CALENDAR-F9F502)](https://bit.ly/near-dev-calendar)\n[![DEV SUPPORT](https://img.shields.io/badge/DEV_SUPPORT-BE0303)](https://t.me/addlist/VyVjNaP190JlOGMx)\n[![NEWSLETTER](https://img.shields.io/badge/NEWSLETTER-0087E5)](https://newsletter.neardevhub.org/)\n[![FEEDBACK](https://img.shields.io/badge/FEEDBACK-purple)](https://github.com/orgs/near/discussions/new?category=dev-feedback)\n\nNEAR is dedicated to providing the best developer experience possible for building an open web. This mission is next to impossible to achieve without feedback and contributions from **people like you**. \ud83e\udef5\n\n**Get involved!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 822, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2cd96e0-1316-47a0-bee3-1b571070e54b": {"__data__": {"id_": "c2cd96e0-1316-47a0-bee3-1b571070e54b", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d8bd6107-48c9-473d-9db1-5db9cdd7dff6", "node_type": "1", "metadata": {}, "hash": "90ae30916272afeb931a1c0f740558935425c82453b840e0ef6afd2ecbc8d889", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70bf1072-8123-48d9-a817-7b2e63a31098", "node_type": "1", "metadata": {}, "hash": "316eb5e79f000cd2245318fea8badbc573aebf82df3ae469c91cf3738e3dd7a8", "class_name": "RelatedNodeInfo"}}, "text": "** \ud83d\udc49 please select one of the options above or contribute to one of the essential developer repositories listed below \ud83d\ude4f\n\n:::info Contact Us\n- [Developer Hub](https://neardevhub.org/)\n- [Telegram Support](https://t.me/neardev)\n- [Discord](https://near.chat)\n- [Zulip](https://near.zulipchat.com)\n:::\n\n---\n\n### \ud83d\udcdd Docs\n\n| Website      | Description | Repo |\n| ----------- | ----------- | --- |\n|[docs.near.org](https://docs.near.org) | NEAR Developer Documentation |[near/docs](https://github.com/near/docs)\n|[nomicon.io](https://nomicon.io)| NEAR Protocol Specification Documentation | [near/neps](https://github.com/near/neps)\n|[near-nodes.io](https://near-nodes.io)| NEAR Node Documentation _(Validator, RPC, Archival)_ |[near/node-docs](https://github.com/near/node-docs)\n\n---\n\n### \u26d3\ufe0f Protocol\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- | --- |\n| nearcore | Reference implementation of NEAR Protocol  |[near/nearcore](https://github.com/near/nearcore)|[![Latest Release](https://img.shields.io/github/v/release/near/nearcore?label=)](https://github.com/near/nearcore/releases)\n| NEPs | NEAR Protocol Specifications and Standards  |[near/neps](https://github.com/near/neps)| \u2796\n\n---\n\n### \ud83d\ude80 Decentralized Frontend Stack\n\n> Create decentralized frontend components by storing it's source code on the blockchain \ud83e\udd2f.\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- |--|\n|**\ud83d\udc49 GATEWAY**||||\n| near-discovery    | near.org Gateway  |[near/near-discovery](https://github.com/near/near-discovery)| [!", "mimetype": "text/plain", "start_char_idx": 822, "end_char_idx": 2394, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "70bf1072-8123-48d9-a817-7b2e63a31098": {"__data__": {"id_": "70bf1072-8123-48d9-a817-7b2e63a31098", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2cd96e0-1316-47a0-bee3-1b571070e54b", "node_type": "1", "metadata": {}, "hash": "f1c1ee0559c9c2605936fdea94fc831d9b7734c7af1bf6e085fa2f111f76a55a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a", "node_type": "1", "metadata": {}, "hash": "9c42e43b446b8b673aabd9dd3e1d626b0f770b7bc180585589b0b7782a10774f", "class_name": "RelatedNodeInfo"}}, "text": "[Latest Release](https://img.shields.io/github/v/release/near/near-discovery?label=)](https://github.com/near/near-discovery/releases)\n| near.social | near.social Gateway | [NearSocial/viewer](https://github.com/NearSocial/viewer) | \u2796\n| near-discovery-components | Core components / primitives for near.org | [near/near-discovery-components](https://github.com/near/near-discovery-components)| \u2796\n|**\ud83d\udc49 EXECUTION ENVIRONMENT**||||\n| VM   | B.O.S. Virtual Machine  | [nearsocial/VM](https://github.com/NearSocial/VM) |[![Latest Release](https://img.shields.io/github/v/release/nearsocial/vm?label=)](https://github.com/nearsocial/vm/releases)\n| BWE | B.O.S. Web Engine ***(WIP replacement for VM)*** | [near/bos-web-engine](https://github.com/near/bos-web-engine) |\u2796\n|**\ud83d\udc49 DATABASE**||||\n| B.O.S. Database | Smart contract hosting frontend source code & user data | [nearsocial/social-db](https://github.com/NearSocial/social-db)|\u2796\n\n---\n\n### \ud83d\udee0\ufe0f Dev Tools\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- |--|\n| create-near-app | Easy fullstack dApp deployment tool | [near/create-near-app](https://github.com/near/create-near-app) | [![Latest Release](https://img.shields.io/github/v/release/near/create-near-app?label=)](https://github.com/near/create-near-app/releases)\n| cargo-near | Cargo extension for building smart contracts and ABI schemas on NEAR | [near/cargo-near](https://github.com/near/cargo-near) | [![Latest Release](https://img.shields.io/github/v/release/near/cargo-near?label=)](https://github.com/near/cargo-near/releases)\n| BOS VSCode Ext. | VSCode extension for building B.O.S. components | [near/near-vscode](https://github.com/near/near-vscode) | [!", "mimetype": "text/plain", "start_char_idx": 2394, "end_char_idx": 4101, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a": {"__data__": {"id_": "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70bf1072-8123-48d9-a817-7b2e63a31098", "node_type": "1", "metadata": {}, "hash": "316eb5e79f000cd2245318fea8badbc573aebf82df3ae469c91cf3738e3dd7a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1", "node_type": "1", "metadata": {}, "hash": "bd8955988781fd62f03635b49a6af8a38037f4b6ca8053ff38f16dccdf52b857", "class_name": "RelatedNodeInfo"}}, "text": "[Latest Release](https://img.shields.io/github/v/release/near/near-vscode?label=)](https://github.com/near/near-vscode/releases)\n| BOS Loader | Simplifying multiple component local development | [near/bos-loader](https://github.com/near/bos-loader) | [![Latest Release](https://img.shields.io/github/v/release/near/bos-loader?label=)](https://github.com/near/bos-loader/releases)\n\n### \ud83d\udcbb CLI\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- |--|\n| near-cli-rs| Rust based CLI for interacting w/ NEAR | [near/near-cli-rs](https://github.com/near/near-cli-rs)| [![Latest Release](https://img.shields.io/github/v/release/near/near-cli-rs?label=)](https://github.com/near/near-cli-rs/releases)\n| BOS CLI | CLI for simplifying local development on BOS | [bos-cli-rs/bos-cli-rs](https://github.com/bos-cli-rs/bos-cli-rs) | [![Latest Release](https://img.shields.io/github/v/release/bos-cli-rs/bos-cli-rs?label=)](https://github.com/bos-cli-rs/bos-cli-rs/releases)\n\n### \ud83d\udd11 Wallet / Auth\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- | --- |\n| wallet-selector |Wallet integration tool for NEAR|[near/wallet-selector](https://github.com/near/wallet-selector)|[![Latest Release](https://img.shields.io/github/v/release/near/wallet-selector?label=)](https://github.com/near/wallet-selector/releases)\n| web3-onboard | Wallet integration tool for multichain |[blocknative/web3-onboard](https://github.com/blocknative/web3-onboard)|[!", "mimetype": "text/plain", "start_char_idx": 4101, "end_char_idx": 5598, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1": {"__data__": {"id_": "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a", "node_type": "1", "metadata": {}, "hash": "9c42e43b446b8b673aabd9dd3e1d626b0f770b7bc180585589b0b7782a10774f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5f853170-ac30-4441-bd6e-e001b1802c41", "node_type": "1", "metadata": {}, "hash": "8c92705ee4d9bb559ee3622b47aac0a20a08f11b97e39f9166f18d7d6ed8ab02", "class_name": "RelatedNodeInfo"}}, "text": "[Latest Release](https://img.shields.io/github/v/release/blocknative/web3-onboard?label=)](https://github.com/blocknative/web3-onboard/releases)\n| FastAuth Signer | Authenticate and sign transactions w/ FastAuth |[near/fast-auth-signer](https://github.com/near/fast-auth-signer)|\u2796\n| mpc-recovery | Create and restore accounts w/ OIDC protocol|[near/mpc-recovery](https://github.com/near/mpc-recovery)|\u2796\n| iDOS | Decentralized identity, storage, and verification | [idos-network/idos-sdk-js](https://github.com/idos-network/idos-sdk-js)|\u2796\n\n### \ud83d\udd0c API\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- | --- |\n| near-api-js | API tool for frontend & backend JS libraries |[near/near-api-js](https://github.com/near/near-api-js)|[![Latest Release](https://img.shields.io/github/v/release/near/near-api-js?label=)](https://github.com/near/near-api-js/releases)\n\n### \ud83d\udcdd Smart Contracts\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- |---|\n| near-sdk-js|Create smart contracts w/ JavaScript | [near/near-sdk-js](https://github.com/near/near-sdk-js) | [![Latest Release](https://img.shields.io/github/v/release/near/near-sdk-js?label=)](https://github.com/near/near-sdk-js/releases)\n| near-sdk-rs|Create smart contracts w/ Rust | [near/near-sdk-rs](https://github.com/near/near-sdk-rs)| [![Latest Release](https://img.shields.io/github/v/release/near/near-sdk-rs?label=)](https://github.com/near/near-sdk-rs/releases)\n| Keypom | Customizable key creation for NFT/FT drops  |[keypom/keypom](https://github.com/keypom/keypom)|[!", "mimetype": "text/plain", "start_char_idx": 5598, "end_char_idx": 7192, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5f853170-ac30-4441-bd6e-e001b1802c41": {"__data__": {"id_": "5f853170-ac30-4441-bd6e-e001b1802c41", "embedding": null, "metadata": {"file_path": "./near_dist/help.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e", "node_type": "4", "metadata": {}, "hash": "55f3defb30f9446ebede4be58ce897fa9f6bceed115c44a0a8cb4a1ac2a0688b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1", "node_type": "1", "metadata": {}, "hash": "bd8955988781fd62f03635b49a6af8a38037f4b6ca8053ff38f16dccdf52b857", "class_name": "RelatedNodeInfo"}}, "text": "[Latest Release](https://img.shields.io/github/v/release/keypom/keypom?label=)](https://github.com/keypom/keypom/releases)\n\n### \ud83e\uddea Testing\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- | --- |\n| workspaces-js| Testing sandbox written in JS  |[near/workspaces-js](https://github.com/near/workspaces-js)|[![Latest Release](https://img.shields.io/github/v/release/near/near-workspaces-js?label=)](https://github.com/near/near-workspaces-js/releases)\n| workspaces-rs| Testing sandbox written in Rust |[near/workspaces-rs](https://github.com/near/workspaces-rs)|[![Latest Release](https://img.shields.io/github/v/release/near/near-workspaces-rs?label=)](https://github.com/near/near-workspaces-rs/releases)\n\n### \ud83d\udd0e Blockchain Data Indexing\n\n| Name      | Description | Repo | Latest Release |\n| ----------- | ----------- | --- | --- |\n| QueryApi | Build custom indexers and query with GraphQL endpoints|[near/queryapi](https://github.com/near/queryapi)|\u2796\n| near-lake-indexer | Built on [NEAR Indexer](https://github.com/near/nearcore/tree/master/chain/indexer) that stores JSON in AWS S3 bucket  |[near/near-lake-indexer](https://github.com/near/near-lake-indexer)|[![Latest Release](https://img.shields.io/github/v/release/near/near-lake-indexer?label=)](https://github.com/near/near-lake-indexer/releases)\n| near-lake-framework-rs | Stream blocks from NEAR Lake into your server |[near/near-lake-framework-rs](https://github.com/near/near-lake-framework-rs)|[![Latest Release](https://img.shields.io/github/v/release/near/near-lake-framework-rs?label=)](https://github.com/near/near-lake-framework-rs/releases)\n| near-lake-framework-js | Stream blocks from NEAR Lake into your server |[near/near-lake-framework-js](https://github.com/near/near-lake-framework-js)| \u2796", "mimetype": "text/plain", "start_char_idx": 7192, "end_char_idx": 8993, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc487517-b2f6-4089-a9b3-63306b204f30": {"__data__": {"id_": "dc487517-b2f6-4089-a9b3-63306b204f30", "embedding": null, "metadata": {"file_path": "./near_dist/token-transfer-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6", "node_type": "4", "metadata": {}, "hash": "0ac47bc8373cefbffef2d619c6b1ecb1500870c178cfb787f24b37217e760c4b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ab1798d5-ce85-4731-8de8-39f059cbbcf4", "node_type": "1", "metadata": {}, "hash": "c4c80d93e9cbdfefbfe1359fa58bd8767a7d714ab4373a346f28bc1c1f931a94", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: Token Transfer\n---\n\n# Token Transfer flow\n\nIn the [previous article](near-data-flow.md) we saw an example of token transfer between accounts found in different shards. That example was simplified and missed a few steps in the process. That was intentional, to keep the article and the video short yet explanatory, in order to give you a bigger picture for understanding concepts.\n\nIn this article we're going to have a look at the same data flow, but in detail and we will consider two additional scenarios:\n\n- Token transfer between accounts found in different shards\n- Token transfer between accounts found in the same shard\n\nYou may be asking what was missing in the previous explanation. The short answer is: **Gas Refunds** or simply **Refunds**.\n\nIf you don't know what **Gas** is, please [first read the article about Gas](https://docs.near.org/concepts/protocol/gas) from our docs.\n\nAs for *Refunds*, here's a quote from the [Gas](https://docs.near.org/concepts/protocol/gas) article:\n\n> Attach extra gas; get refunded!\n>\n> ...\n>\n> - If you attach more gas than needed, you'll get refunded\n>\n> ...\n>\n> *From NEAR Protocol docs [Gas. Attach extra gas; get refunded!](https://docs.near.org/concepts/protocol/gas#attach-extra-gas-get-refunded)*\n\n\n:::note What refunds mean in terms of data flow\n\nIt means that literally every Transaction includes a refund.\n\n:::\n\nOK, this should be enough for introduction, now let's move on to examples.\n\n\n## Token transfer between accounts found in different shards\n\nBasically it is an extension of the example from the [NEAR Data Flow](near-data-flow.md) article.\n\nAssume we have two accounts **alice.near** and **bob.near**. They belong to different [Shards](/build/data-infrastructure/lake-data-structures/shard). **alice.near** sends a few tokens to **bob.near**.\n\nA [Transaction](/build/data-infrastructure/lake-data-structures/transaction) signed by **alice.near** is sent to the network.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ab1798d5-ce85-4731-8de8-39f059cbbcf4": {"__data__": {"id_": "ab1798d5-ce85-4731-8de8-39f059cbbcf4", "embedding": null, "metadata": {"file_path": "./near_dist/token-transfer-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6", "node_type": "4", "metadata": {}, "hash": "0ac47bc8373cefbffef2d619c6b1ecb1500870c178cfb787f24b37217e760c4b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc487517-b2f6-4089-a9b3-63306b204f30", "node_type": "1", "metadata": {}, "hash": "8aaa8bab1a567cac6599d6e5f567346aebc509706716b5a9157476636af65712", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c2b628d4-29a7-450d-9182-e6341692b5d1", "node_type": "1", "metadata": {}, "hash": "203d4483e85ad9c2cbcaabf0276f788ce4f8921e04100694f549609093fd5a70", "class_name": "RelatedNodeInfo"}}, "text": "It is immediately executed, [ExecutionOutcome](/build/data-infrastructure/lake-data-structures/execution-outcome) is the output or result from converting the transaction into a [Receipt](/build/data-infrastructure/lake-data-structures/receipt).\n\n![Transaction execution](/docs/flow/03-tx-outcome-receipt.png)\n\nDuring the above process **alice.near**, the sender, was charged a fee (gas). The [Receipt](/build/data-infrastructure/lake-data-structures/receipt) created as result of the [Transaction](/build/data-infrastructure/lake-data-structures/transaction) follows these rules:\n\n1. It will be executed not earlier than next [Block](/build/data-infrastructure/lake-data-structures/block)\n2. It **must** be executed on the receiver's [Shard](/build/data-infrastructure/lake-data-structures/shard)\n\nSo, in our case the receiver is **bob.near** and that account belongs to a different [Shard](/build/data-infrastructure/lake-data-structures/shard) that's why the [Receipt](/build/data-infrastructure/lake-data-structures/receipt) moves to the receiver's Shard and is put in the execution queue.\n\nIn our example the Receipt is executed in the very next Block.\n\n![The Receipt is executed in the next Block](/docs/flow/04-send-nears-flow.png)\n\nAlmost done. Remember the refund? So the [ExecutionOutcome](/build/data-infrastructure/lake-data-structures/execution-outcome) for the Receipt will be another Receipt that is refunding the Gas to the sender. **bob.near** has received tokens from **alice.near**. Now, **alice.near** becomes the receiver for a new (and last) Receipt (keep in mind the sender in this Receipt is always **system**).\n\nKeep in mind rule #2: the Receipt must be executed on the receiver's Shard. So this Receipt moves to the Shard where **alice.near** belongs to. And it is the last execution in this process.\n\n![Complete scheme of Token transfer between the accounts from different Shards](/docs/flow-token-transfer/01-diff-shards-complete.png)\n\nThis is it.", "mimetype": "text/plain", "start_char_idx": 1954, "end_char_idx": 3928, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2b628d4-29a7-450d-9182-e6341692b5d1": {"__data__": {"id_": "c2b628d4-29a7-450d-9182-e6341692b5d1", "embedding": null, "metadata": {"file_path": "./near_dist/token-transfer-flow.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6", "node_type": "4", "metadata": {}, "hash": "0ac47bc8373cefbffef2d619c6b1ecb1500870c178cfb787f24b37217e760c4b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ab1798d5-ce85-4731-8de8-39f059cbbcf4", "node_type": "1", "metadata": {}, "hash": "c4c80d93e9cbdfefbfe1359fa58bd8767a7d714ab4373a346f28bc1c1f931a94", "class_name": "RelatedNodeInfo"}}, "text": "Tokens have been transferred from the account on one Shard to the account on a different Shard, and the initial sender, **alice.near**, received a refund of Gas.\n\n\n## Token transfer between accounts found on the same shard\n\nLet's have a look at the example where both accounts are on the same [Shard](/build/data-infrastructure/lake-data-structures/shard). The process is the same as in the previous example, except there are no Receipts moving from one Shard to another.\n\nA [Transaction](/build/data-infrastructure/lake-data-structures/transaction) signed by **alice.near** is sent to the network. It is immediately executed, [ExecutionOutcome](/build/data-infrastructure/lake-data-structures/execution-outcome) is the result of converting the transaction into a [Receipt](/build/data-infrastructure/lake-data-structures/receipt).\n\n![Transaction execution](/docs/flow/03-tx-outcome-receipt.png)\n\nThe Receipt is already on the receiver's Shard, so it is put in the execution queue of the next [Block](/build/data-infrastructure/lake-data-structures/block). It is executed in the next Block, and the [ExecutionOutcome](/build/data-infrastructure/lake-data-structures/execution-outcome) result is a new Receipt with the refund to the initial sender, **alice.near**. \nThe Same rules apply to this Receipt, it is put into the execution queue and executed in the next Block.\n\n![Complete scheme of Token transfer between the account from the same Shards](/docs/flow-token-transfer/02-same-shard-complete.png)\n\nThis is it. You may wonder why the process is overcomplicated for the same Shard case. The answer is: **the same rules are always applied**. Also, this mechanism allows to build the NEAR Protocol data flow by only one set of rules, no matter how many Shards exist. Also, we avoid a lot of \"ifs\" and we don't have to keep in mind different corner cases because the process always follows the same rules.", "mimetype": "text/plain", "start_char_idx": 3929, "end_char_idx": 5835, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4f5d698-ed9d-4483-a75a-cef81a37cf68": {"__data__": {"id_": "f4f5d698-ed9d-4483-a75a-cef81a37cf68", "embedding": null, "metadata": {"file_path": "./near_dist/simple-nft-minting-example.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2dbd03d7-fdc7-4a55-a2b9-eecdc253f913", "node_type": "4", "metadata": {}, "hash": "838b345ec0be73435ac7bff787cf492d917ede6ee3fc628b8f4c6301d3b37e2f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fb6fdf49-2843-4368-bc32-4e1b6447cfb5", "node_type": "1", "metadata": {}, "hash": "4c8a7fb8b3e6d19e403169b00ae8aef24c14d6185bca4433a2eabc3c567f09c7", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: minting-nft-frontend\ntitle: Minting NFT Front-end\nsidebar_label: Minting Front-end\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\n# NFT Minting Front-end\n\n> In this tutorial you'll learn how to create a simple NFT front-end and mint a \"Go Team\" NFT on the NEAR blockchain straight from your web browser.\n\n## App Overview\n\nThe app is fairly simple: the user signs in and hits the <kbd>Mint NFT</kbd> button. Once the user hits the mint button, a \"Go Team\" NFT is minted and sent to their NEAR Wallet.\n\n![Front-end](/docs/assets/nfts/nft-mint-frontend.png)\n\n## Smart Contract code\n\nThe code for the NFT smart contract can be found in the [Zero to Hero NFT tutorial](/tutorials/nfts/introduction)'s  [GitHub repository](https://github.com/near-examples/nft-tutorial/tree/main/nft-contract/src), under the `main` branch.\n\nThe contract methods used in this application are as follows:\n\n- `nft_mint`: Function used to mint tokens.\n- `check_token`: Custom function created to check for the existence of a token. This helps to ensure one token per user.\n\n## Front-end\n\nThe front-end of the contract was implemented using `create-near-app`. [React Bootstrap](https://react-bootstrap.github.io/) was used for the styling of the application.\n\nTo bootstrap your React front-end, run the following command on your terminal:\n\n```sh\nnpx create-near-app --frontend react --contract rust\n```\n\nThen, simply import the contract files from the `main` branch, and you'll have the needed structure to run the application.\n\n### Start\n\nUpon mounting the application's components, the app checks for the existence of a non-fungible token.\n\n<Github language=\"js\" start=\"24\" end=\"46\" url=\"https://github.com/near-examples/nft-tutorial-frontend/blob/master/src/App.js\" />\n\nIf no prior NFT has been minted, the mint button will be available for use.\n\n### Mint button\n\nHere is the function behind the mint button.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fb6fdf49-2843-4368-bc32-4e1b6447cfb5": {"__data__": {"id_": "fb6fdf49-2843-4368-bc32-4e1b6447cfb5", "embedding": null, "metadata": {"file_path": "./near_dist/simple-nft-minting-example.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2dbd03d7-fdc7-4a55-a2b9-eecdc253f913", "node_type": "4", "metadata": {}, "hash": "838b345ec0be73435ac7bff787cf492d917ede6ee3fc628b8f4c6301d3b37e2f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4f5d698-ed9d-4483-a75a-cef81a37cf68", "node_type": "1", "metadata": {}, "hash": "dcb067af2743d7cbe5fb02bd9ce648a310e05fa763e90231af02fd6d0ca7494b", "class_name": "RelatedNodeInfo"}}, "text": "The meta data has been filled out for the user already:\n\n- `token_id` is set by the user's account id,\n- and the `media` link is hard-coded to a `goteam-gif.gif` hosted on IPFS.\n\n<Github language=\"js\" start=\"7\" end=\"23\" url=\"https://github.com/near-examples/nft-tutorial-frontend/blob/master/src/Components/MintingTool.js\" />\n\nAfter hitting the <kbd>Mint NFT</kbd> button the user will be able to check out the newly minted NFT at [wallet.testnet.near.org](https://testnet.mynearwallet.com//?tab=collectibles), under the Wallet's `Collectibles` tab.\n\n## Final remarks\n\nYou can find the complete application repository [on GitHub](https://github.com/near-examples/nft-tutorial-frontend) to clone and run.\nIn the configuration folder you can see that this smart contract has been deployed to `nft-frontend-simple-mint.blockhead.testnet`:\n\n<Github language=\"js\" start=\"1\" end=\"2\" url=\"https://github.com/near-examples/nft-tutorial-frontend/blob/master/src/config.js\" />\n\nYou can also check out the [explorer link here](https://testnet.nearblocks.io/address/nft-frontend-simple-mint.blockhead.testnet) to see how many individuals have been minting their own _Go Team_ NFTs. _**Happy Minting!**_\n\n:::tip\nClone and run this example from https://github.com/near-examples/nft-tutorial-frontend\n:::", "mimetype": "text/plain", "start_char_idx": 1903, "end_char_idx": 3192, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "538649db-1155-4853-be22-f708538430f7": {"__data__": {"id_": "538649db-1155-4853-be22-f708538430f7", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc02bbd8-8afa-41f8-9d1a-e1c83e199386", "node_type": "1", "metadata": {}, "hash": "fb4a20288479b858a6b6a394c774ab0d0a1c6e9297735bfbdde9bf24ffcd7660", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: NEAR Enhanced API\nlanguage_tabs:\n  - shell: Shell\n  - http: HTTP\n  - javascript: JavaScript\n  - ruby: Ruby\n  - python: Python\n  - php: PHP\n  - java: Java\n  - go: Go\ntoc_footers: []\nincludes: []\nsearch: true\nhighlight_theme: darkula\nheadingLevel: 2\n\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<!-- Generator: Widdershins v4.0.1 -->\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\n> Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.\n\nTry out our newly released Enhanced APIs - Balances (in Beta) and get what you need for all kinds of balances and token information at ease.\nCall Enhanced APIs using the endpoint in the API URL box, varies by Network.\n\n- https://near-testnet.api.pagoda.co/eapi/v1\n- https://near-mainnet.api.pagoda.co/eapi/v1\n\nGrab your API keys and give it a try! We will be adding more advanced Enhanced APIs in our offering, so stay tuned. Get the data you need without extra processing, NEAR Blockchain data query has never been easier!\n\nWe would love to hear from you on the data APIs you need, please leave feedback using the widget in the lower-right corner.\n\nBase URLs:\n\n* <a href=\"https://near-testnet.api.pagoda.co/eapi/v1\" target=\"_blank\" rel=\"noopener noreferrer\">https://near-testnet.api.pagoda.co/eapi/v1</a>\n\n## Authentication\n\n* API Key (apiKey)\n    - Parameter Name: **x-api-key**, in: header.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1512, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc02bbd8-8afa-41f8-9d1a-e1c83e199386": {"__data__": {"id_": "bc02bbd8-8afa-41f8-9d1a-e1c83e199386", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "538649db-1155-4853-be22-f708538430f7", "node_type": "1", "metadata": {}, "hash": "b0e3c47d8040aff9dfa9085a0c3b062097a630f4b462919dd361ef954b6a1736", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e480413a-dac9-4f17-9789-08d719897a5f", "node_type": "1", "metadata": {}, "hash": "29522338a9250032553677f9b628ab7b75dce7ad61e75dca5e50ef4174c3e073", "class_name": "RelatedNodeInfo"}}, "text": "Use Pagoda DevConsole API key here\n\n## Non Fungible Tokens\n\n### Get NFT\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id} \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id} HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.", "mimetype": "text/plain", "start_char_idx": 1513, "end_char_idx": 3231, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e480413a-dac9-4f17-9789-08d719897a5f": {"__data__": {"id_": "e480413a-dac9-4f17-9789-08d719897a5f", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc02bbd8-8afa-41f8-9d1a-e1c83e199386", "node_type": "1", "metadata": {}, "hash": "fb4a20288479b858a6b6a394c774ab0d0a1c6e9297735bfbdde9bf24ffcd7660", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8101703d-5712-4390-a3fa-725bab6a932e", "node_type": "1", "metadata": {}, "hash": "f0635bb77f9e12305c40dd371711a218822479dad5129671b335b275b08d21f6", "class_name": "RelatedNodeInfo"}}, "text": "$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /NFT/{contract_account_id}/{token_id}`\n\n*Get NFT*\n\nThis endpoint returns detailed information on the NFT\n for the given `token_id`, NFT `contract_id`, `timestamp`/`block_height`.", "mimetype": "text/plain", "start_char_idx": 3232, "end_char_idx": 4977, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8101703d-5712-4390-a3fa-725bab6a932e": {"__data__": {"id_": "8101703d-5712-4390-a3fa-725bab6a932e", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e480413a-dac9-4f17-9789-08d719897a5f", "node_type": "1", "metadata": {}, "hash": "29522338a9250032553677f9b628ab7b75dce7ad61e75dca5e50ef4174c3e073", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "22275b90-c71b-4224-a50a-019afaa71eed", "node_type": "1", "metadata": {}, "hash": "0c62e6eb827e7183e83721931918ce13a4ded797299fec1dcbc412f8fe5c7c3e", "class_name": "RelatedNodeInfo"}}, "text": "<h3 id=\"get__nft_{contract_account_id}_{token_id}-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|contract_account_id|path|string|true|none|\n|token_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"contract_metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  },\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",\n      \"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",\n    \"token_id\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__nft_{contract_account_id}_{token_id}-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[NftResponse](#schemanftresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get NFT history\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 4979, "end_char_idx": 6566, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "22275b90-c71b-4224-a50a-019afaa71eed": {"__data__": {"id_": "22275b90-c71b-4224-a50a-019afaa71eed", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8101703d-5712-4390-a3fa-725bab6a932e", "node_type": "1", "metadata": {}, "hash": "f0635bb77f9e12305c40dd371711a218822479dad5129671b335b275b08d21f6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "59b899c4-12da-47ef-b850-672b700f4f7b", "node_type": "1", "metadata": {}, "hash": "725f8ceac7e3b4be247860a0b48104def3b535cf5efa22385c88249c00917965", "class_name": "RelatedNodeInfo"}}, "text": "co/eapi/v1/NFT/{contract_account_id}/{token_id}/history \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.", "mimetype": "text/plain", "start_char_idx": 6566, "end_char_idx": 8126, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "59b899c4-12da-47ef-b850-672b700f4f7b": {"__data__": {"id_": "59b899c4-12da-47ef-b850-672b700f4f7b", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "22275b90-c71b-4224-a50a-019afaa71eed", "node_type": "1", "metadata": {}, "hash": "0c62e6eb827e7183e83721931918ce13a4ded797299fec1dcbc412f8fe5c7c3e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "49253671-5888-436e-aeec-9d350538c174", "node_type": "1", "metadata": {}, "hash": "408fcd5c2fa99fbd849da929b78fe518886fa0cf59f6b9a8ba46fe2e6c469091", "class_name": "RelatedNodeInfo"}}, "text": "$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/NFT/{contract_account_id}/{token_id}/history\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /NFT/{contract_account_id}/{token_id}/history`\n\n*Get NFT history*\n\nThis endpoint returns the transaction history for the given NFT and `timestamp`/`block_height`.\n **Note:** The result is centered around the history of the specific NFT and will return list of its passing owners and metadata.\n\n **Limitations**\n * For now, we only support NFT contracts that implement the Events NEP standard.\n * We currently provide the most recent 100 items.", "mimetype": "text/plain", "start_char_idx": 8127, "end_char_idx": 10161, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "49253671-5888-436e-aeec-9d350538c174": {"__data__": {"id_": "49253671-5888-436e-aeec-9d350538c174", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59b899c4-12da-47ef-b850-672b700f4f7b", "node_type": "1", "metadata": {}, "hash": "725f8ceac7e3b4be247860a0b48104def3b535cf5efa22385c88249c00917965", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7ccf003a-0b0f-44ff-8196-ac01ae7ee079", "node_type": "1", "metadata": {}, "hash": "5df7912cecb6eff1498d46f440e0a46cb43e1593c44c414400a74d33e2abe244", "class_name": "RelatedNodeInfo"}}, "text": "Full-featured pagination will be provided in later phases.\n\n<h3 id=\"get__nft_{contract_account_id}_{token_id}_history-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|contract_account_id|path|string|true|none|\n|token_id|path|string|true|none|\n|limit|query|integer(int32)|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"history\": [\n    {\n      \"block_height\": \"string\",\n      \"block_timestamp_nanos\": \"string\",\n      \"cause\": \"string\",\n      \"new_account_id\": \"string\",\n      \"old_account_id\": \"string\",\n      \"status\": \"string\"\n    }\n  ],\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",\n      \"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",\n    \"token_id\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__nft_{contract_account_id}_{token_id}_history-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[HistoryResponse](#schemahistoryresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get user's NFT collection overview\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 10165, "end_char_idx": 11827, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7ccf003a-0b0f-44ff-8196-ac01ae7ee079": {"__data__": {"id_": "7ccf003a-0b0f-44ff-8196-ac01ae7ee079", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "49253671-5888-436e-aeec-9d350538c174", "node_type": "1", "metadata": {}, "hash": "408fcd5c2fa99fbd849da929b78fe518886fa0cf59f6b9a8ba46fe2e6c469091", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ddc746b1-bdb2-45e5-8f48-a5f7531790e5", "node_type": "1", "metadata": {}, "hash": "ebec694e151e9916b3b3d6bd526dede3e87906e896082a520a672d86829d7fd8", "class_name": "RelatedNodeInfo"}}, "text": "co/eapi/v1/accounts/{account_id}/NFT \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.", "mimetype": "text/plain", "start_char_idx": 11827, "end_char_idx": 13292, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ddc746b1-bdb2-45e5-8f48-a5f7531790e5": {"__data__": {"id_": "ddc746b1-bdb2-45e5-8f48-a5f7531790e5", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7ccf003a-0b0f-44ff-8196-ac01ae7ee079", "node_type": "1", "metadata": {}, "hash": "5df7912cecb6eff1498d46f440e0a46cb43e1593c44c414400a74d33e2abe244", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4d02ec0-34d6-4593-9de5-6150e62d458f", "node_type": "1", "metadata": {}, "hash": "521c0e0161923d6d98a4d2438ab5802ef18d88922fab4eac9e4115860dca7097", "class_name": "RelatedNodeInfo"}}, "text": "$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/NFT`\n\n*Get user's NFT collection overview*\n\nFor the given `account_id` and `timestamp` or `block_height`, this endpoint returns\n the number of NFTs grouped by `contract_id`, together with the corresponding NFT contract metadata.\n The NFT contract will be present in the response if the `account_id` has at least one NFT there.\n\n **Note:** `block_timestamp_nanos` helps you choose a moment in time, fixing the blockchain state at that time.", "mimetype": "text/plain", "start_char_idx": 13293, "end_char_idx": 15289, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a4d02ec0-34d6-4593-9de5-6150e62d458f": {"__data__": {"id_": "a4d02ec0-34d6-4593-9de5-6150e62d458f", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ddc746b1-bdb2-45e5-8f48-a5f7531790e5", "node_type": "1", "metadata": {}, "hash": "ebec694e151e9916b3b3d6bd526dede3e87906e896082a520a672d86829d7fd8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41986966-7c5f-4d28-b4d9-290812f5a92a", "node_type": "1", "metadata": {}, "hash": "424d1bc11ab90b8c54f4ccd22fecee37aba7de1d1517e9236cd1d7d74db06f48", "class_name": "RelatedNodeInfo"}}, "text": "**Limitations**\n * We currently provide the most recent 100 items.\n   Full-featured pagination will be provided in later phases.\n\n<h3 id=\"get__accounts_{account_id}_nft-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n|limit|query|integer(int32)|false|Maximum available limit 100|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"nft_counts\": [\n    {\n      \"contract_account_id\": \"string\",\n      \"contract_metadata\": {\n        \"base_uri\": \"string\",\n        \"icon\": \"string\",\n        \"name\": \"string\",\n        \"reference\": \"string\",\n        \"reference_hash\": \"string\",\n        \"spec\": \"string\",\n        \"symbol\": \"string\"\n      },\n      \"last_updated_at_timestamp_nanos\": \"string\",\n      \"nft_count\": 0\n    }\n  ]\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_nft-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[NftCountsResponse](#schemanftcountsresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get user's NFT collection by contract\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 15292, "end_char_idx": 16907, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "41986966-7c5f-4d28-b4d9-290812f5a92a": {"__data__": {"id_": "41986966-7c5f-4d28-b4d9-290812f5a92a", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4d02ec0-34d6-4593-9de5-6150e62d458f", "node_type": "1", "metadata": {}, "hash": "521c0e0161923d6d98a4d2438ab5802ef18d88922fab4eac9e4115860dca7097", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f8f82ea4-e120-4118-b34d-93203f338d59", "node_type": "1", "metadata": {}, "hash": "36baaaeef1e3dbb369f57aa1f2213386fdd807a9b950b3537eb7b3f8141b5c70", "class_name": "RelatedNodeInfo"}}, "text": "co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id} \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id} HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.", "mimetype": "text/plain", "start_char_idx": 16907, "end_char_idx": 18482, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f8f82ea4-e120-4118-b34d-93203f338d59": {"__data__": {"id_": "f8f82ea4-e120-4118-b34d-93203f338d59", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41986966-7c5f-4d28-b4d9-290812f5a92a", "node_type": "1", "metadata": {}, "hash": "424d1bc11ab90b8c54f4ccd22fecee37aba7de1d1517e9236cd1d7d74db06f48", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cb693b3e-8030-46ff-a566-10f109b84205", "node_type": "1", "metadata": {}, "hash": "dd4e9c1c8cfa842726d63991ab87d3b5a23bab97d24f4a278c25f460cd33034a", "class_name": "RelatedNodeInfo"}}, "text": "$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/NFT/{contract_account_id}\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/NFT/{contract_account_id}`\n\n*Get user's NFT collection by contract*\n\nThis endpoint returns the list of NFTs with full details for the given `account_id`, NFT `contract_id`, `timestamp`/`block_height`.\n You can use the `token_id` from this response and then request the NFT history for that token.\n\n **Limitations**\n * We currently provide the most recent 100 items.\n   Full-featured pagination will be provided in later phases.", "mimetype": "text/plain", "start_char_idx": 18483, "end_char_idx": 20533, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cb693b3e-8030-46ff-a566-10f109b84205": {"__data__": {"id_": "cb693b3e-8030-46ff-a566-10f109b84205", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f8f82ea4-e120-4118-b34d-93203f338d59", "node_type": "1", "metadata": {}, "hash": "36baaaeef1e3dbb369f57aa1f2213386fdd807a9b950b3537eb7b3f8141b5c70", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9", "node_type": "1", "metadata": {}, "hash": "a28e829330ad6e52180ecbd4d17acfd92cdcfb917b0a2c0cde812f0571fce401", "class_name": "RelatedNodeInfo"}}, "text": "<h3 id=\"get__accounts_{account_id}_nft_{contract_account_id}-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|contract_account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n|limit|query|integer(int32)|false|Maximum available limit 100|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"contract_metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  },\n  \"nfts\": [\n    {\n      \"metadata\": {\n        \"copies\": 0,\n        \"description\": \"string\",\n        \"extra\": \"string\",\n        \"media\": \"string\",\n        \"media_hash\": \"string\",\n        \"reference\": \"string\",\n        \"reference_hash\": \"string\",\n        \"title\": \"string\"\n      },\n      \"owner_account_id\": \"string\",\n      \"token_id\": \"string\"\n    }\n  ]\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_nft_{contract_account_id}-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[NftsResponse](#schemanftsresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation,", "mimetype": "text/plain", "start_char_idx": 20535, "end_char_idx": 22016, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9": {"__data__": {"id_": "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cb693b3e-8030-46ff-a566-10f109b84205", "node_type": "1", "metadata": {}, "hash": "dd4e9c1c8cfa842726d63991ab87d3b5a23bab97d24f4a278c25f460cd33034a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "164ab1eb-2152-4acd-8589-d674227fa7a5", "node_type": "1", "metadata": {}, "hash": "b9646c13b594f9b699c313a92b5ee8171f376283b416e6ec6a121cb6381ec9ab", "class_name": "RelatedNodeInfo"}}, "text": "you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get NFT contract metadata\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id} \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id} HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',", "mimetype": "text/plain", "start_char_idx": 22017, "end_char_idx": 23679, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "164ab1eb-2152-4acd-8589-d674227fa7a5": {"__data__": {"id_": "164ab1eb-2152-4acd-8589-d674227fa7a5", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9", "node_type": "1", "metadata": {}, "hash": "a28e829330ad6e52180ecbd4d17acfd92cdcfb917b0a2c0cde812f0571fce401", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bccf2235-659a-4ab9-a60f-b22cb290ef60", "node_type": "1", "metadata": {}, "hash": "c2761887bce441eb69b6f8847825388c219e7c0518d82baf1eef13465eb87246", "class_name": "RelatedNodeInfo"}}, "text": "'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/nep171/metadata/{contract_account_id}\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /nep171/metadata/{contract_account_id}`\n\n*Get NFT contract metadata*\n\nThis endpoint returns the metadata for a given NFT contract and `timestamp`/`block_height`.\n **Note:** This is contract-wide metadata. Each NFT also has its own metadata.", "mimetype": "text/plain", "start_char_idx": 23684, "end_char_idx": 25594, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bccf2235-659a-4ab9-a60f-b22cb290ef60": {"__data__": {"id_": "bccf2235-659a-4ab9-a60f-b22cb290ef60", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "164ab1eb-2152-4acd-8589-d674227fa7a5", "node_type": "1", "metadata": {}, "hash": "b9646c13b594f9b699c313a92b5ee8171f376283b416e6ec6a121cb6381ec9ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58453927-5854-4108-95f0-af5d720195bd", "node_type": "1", "metadata": {}, "hash": "40b9e8ba0e59c9e898dbf989b37e5411addbdedf781a29eeee93eca5ee1ee0ce", "class_name": "RelatedNodeInfo"}}, "text": "<h3 id=\"get__nep171_metadata_{contract_account_id}-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|contract_account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__nep171_metadata_{contract_account_id}-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[MetadataResponse](#schemametadataresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n---\n\n## NEAR\n\n### Get user's NEAR balance\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR HTTP/1.1\nHost: near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 25596, "end_char_idx": 27133, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58453927-5854-4108-95f0-af5d720195bd": {"__data__": {"id_": "58453927-5854-4108-95f0-af5d720195bd", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bccf2235-659a-4ab9-a60f-b22cb290ef60", "node_type": "1", "metadata": {}, "hash": "c2761887bce441eb69b6f8847825388c219e7c0518d82baf1eef13465eb87246", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7", "node_type": "1", "metadata": {}, "hash": "458db80556fd314b22721d21ee57e9f482b38423c6803d3e7bc5958e70773ef6", "class_name": "RelatedNodeInfo"}}, "text": "co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.", "mimetype": "text/plain", "start_char_idx": 27133, "end_char_idx": 28744, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7": {"__data__": {"id_": "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "58453927-5854-4108-95f0-af5d720195bd", "node_type": "1", "metadata": {}, "hash": "40b9e8ba0e59c9e898dbf989b37e5411addbdedf781a29eeee93eca5ee1ee0ce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ffeb55a-f210-4c57-a2ff-32579fda66d3", "node_type": "1", "metadata": {}, "hash": "99ddd54fd0c93db4fce4fd9ab6d2e73f09986116df303f23371269a9c28719a6", "class_name": "RelatedNodeInfo"}}, "text": "print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">\n\n\n```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/coins/NEAR`\n\n*Get user's NEAR balance*\n\nThis endpoint returns the NEAR balance of the given `account_id`\n at the given `timestamp`/`block_height`.\n\n<h3 id=\"get__accounts_{account_id}_coins_near-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"balance\": \"string\",\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"decimals\": 0,\n    \"icon\": \"string\",\n    \"name\": \"string\",", "mimetype": "text/plain", "start_char_idx": 28749, "end_char_idx": 30554, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ffeb55a-f210-4c57-a2ff-32579fda66d3": {"__data__": {"id_": "6ffeb55a-f210-4c57-a2ff-32579fda66d3", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7", "node_type": "1", "metadata": {}, "hash": "458db80556fd314b22721d21ee57e9f482b38423c6803d3e7bc5958e70773ef6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d8033542-dc19-4284-b628-4bcc7fd68f13", "node_type": "1", "metadata": {}, "hash": "3cc403aaad9cd462bcd8655ae724275b43b1fe04ca37141737895762f96773fe", "class_name": "RelatedNodeInfo"}}, "text": "\"symbol\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_coins_near-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[NearBalanceResponse](#schemanearbalanceresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get user's NEAR history\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 30559, "end_char_idx": 32159, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8033542-dc19-4284-b628-4bcc7fd68f13": {"__data__": {"id_": "d8033542-dc19-4284-b628-4bcc7fd68f13", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ffeb55a-f210-4c57-a2ff-32579fda66d3", "node_type": "1", "metadata": {}, "hash": "99ddd54fd0c93db4fce4fd9ab6d2e73f09986116df303f23371269a9c28719a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "feba14a3-90ca-4a11-a56a-fa5ad845f767", "node_type": "1", "metadata": {}, "hash": "f508c15c041d0e5bdd9a4954a0e2430dad8dd3d175de537a251909b6b8f59816", "class_name": "RelatedNodeInfo"}}, "text": "co/eapi/v1/accounts/{account_id}/coins/NEAR/history',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">", "mimetype": "text/plain", "start_char_idx": 32159, "end_char_idx": 33849, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "feba14a3-90ca-4a11-a56a-fa5ad845f767": {"__data__": {"id_": "feba14a3-90ca-4a11-a56a-fa5ad845f767", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d8033542-dc19-4284-b628-4bcc7fd68f13", "node_type": "1", "metadata": {}, "hash": "3cc403aaad9cd462bcd8655ae724275b43b1fe04ca37141737895762f96773fe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "275e5590-2a57-4380-af34-04232ca38e81", "node_type": "1", "metadata": {}, "hash": "6c8d37a19e55cff18670c3a667803d4b5ef0b9d2506011439b8802bbcc110937", "class_name": "RelatedNodeInfo"}}, "text": "```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/NEAR/history\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/coins/NEAR/history`\n\n*Get user's NEAR history*\n\nThis endpoint returns the history of operations with NEAR coins\n for the given `account_id`, `timestamp`/`block_height`.\n\n **Limitations**\n * We currently provide the most recent 100 items.\n   Full-featured pagination will be provided in an upcoming update.\n\n<h3 id=\"get__accounts_{account_id}_coins_near_history-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|limit|query|integer(int32)|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"history\": [\n    {\n      \"block_height\": \"string\",\n      \"block_timestamp_nanos\": \"string\",\n      \"cause\": \"string\",\n      \"new_account_id\": \"string\",\n      \"old_account_id\": \"string\",\n      \"status\": \"string\"\n    }\n  ],\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",\n      \"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",", "mimetype": "text/plain", "start_char_idx": 33852, "end_char_idx": 35543, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "275e5590-2a57-4380-af34-04232ca38e81": {"__data__": {"id_": "275e5590-2a57-4380-af34-04232ca38e81", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "feba14a3-90ca-4a11-a56a-fa5ad845f767", "node_type": "1", "metadata": {}, "hash": "f508c15c041d0e5bdd9a4954a0e2430dad8dd3d175de537a251909b6b8f59816", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "94cced91-adca-4d24-9a6f-5d3f2bc20a62", "node_type": "1", "metadata": {}, "hash": "3de84853b5a541bdf56a5b0fd45fe58a5c94aebc26f1877deda212999362caab", "class_name": "RelatedNodeInfo"}}, "text": "\"token_id\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_coins_near_history-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[HistoryResponse](#schemahistoryresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n---\n\n## Fungible Tokens\n\n### Get user's coin balances\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins',", "mimetype": "text/plain", "start_char_idx": 35548, "end_char_idx": 37177, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94cced91-adca-4d24-9a6f-5d3f2bc20a62": {"__data__": {"id_": "94cced91-adca-4d24-9a6f-5d3f2bc20a62", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "275e5590-2a57-4380-af34-04232ca38e81", "node_type": "1", "metadata": {}, "hash": "6c8d37a19e55cff18670c3a667803d4b5ef0b9d2506011439b8802bbcc110937", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "75bfb15d-dae7-408f-9364-4c9f7a5e8c53", "node_type": "1", "metadata": {}, "hash": "2770bade94902488264c3ad58f7011e980ddf07329dcdad84ea9885c759ea057", "class_name": "RelatedNodeInfo"}}, "text": "params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">", "mimetype": "text/plain", "start_char_idx": 37180, "end_char_idx": 38775, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "75bfb15d-dae7-408f-9364-4c9f7a5e8c53": {"__data__": {"id_": "75bfb15d-dae7-408f-9364-4c9f7a5e8c53", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "94cced91-adca-4d24-9a6f-5d3f2bc20a62", "node_type": "1", "metadata": {}, "hash": "3de84853b5a541bdf56a5b0fd45fe58a5c94aebc26f1877deda212999362caab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fd1c2193-ea7b-492e-afaf-6040f9ff3801", "node_type": "1", "metadata": {}, "hash": "fac3bd6403b7982970b06fcd0980dc8a7e863886e03ade8213a258a06ec0a89d", "class_name": "RelatedNodeInfo"}}, "text": "```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/coins`\n\n*Get user's coin balances*\n\nThis endpoint returns all the countable coin balances (including NEAR, fungible tokens, and _multi-tokens_)\n of the given `account_id`, at the given `timestamp`/`block_height`.\n\n **Limitations**\n * For now, we only support the balance for NEAR and FT contracts that implement the Events NEP standard.\n   We are working on a solution to support other FT contracts, including `wrap.near` and bridged tokens.\n * We are in the process of supporting Multi Token balances.\n * We currently provide the most recent 100 items.\n   Full-featured pagination will be provided in an upcoming update.\n\n<h3 id=\"get__accounts_{account_id}_coins-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n|limit|query|integer(int32)|false|Maximum available limit 100|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"balances\": [\n    {\n      \"balance\": \"string\",\n      \"contract_account_id\": \"string\",\n      \"metadata\": {\n        \"decimals\": 0,\n        \"icon\": \"string\",\n        \"name\": \"string\",\n        \"symbol\": \"string\"\n      },\n      \"standard\": \"string\"\n    }\n  ],\n  \"block_height\": \"string\",", "mimetype": "text/plain", "start_char_idx": 38778, "end_char_idx": 40579, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fd1c2193-ea7b-492e-afaf-6040f9ff3801": {"__data__": {"id_": "fd1c2193-ea7b-492e-afaf-6040f9ff3801", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "75bfb15d-dae7-408f-9364-4c9f7a5e8c53", "node_type": "1", "metadata": {}, "hash": "2770bade94902488264c3ad58f7011e980ddf07329dcdad84ea9885c759ea057", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "43f4a833-18eb-465f-9341-7f189b67a50e", "node_type": "1", "metadata": {}, "hash": "4b03fd2cbb45a3b21b6facce18262a9112a8725f498d2dfd718ee8380ed9c884", "class_name": "RelatedNodeInfo"}}, "text": "\"block_timestamp_nanos\": \"string\"\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_coins-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[CoinBalancesResponse](#schemacoinbalancesresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get user's coin balances by contract\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id} \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id} HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.", "mimetype": "text/plain", "start_char_idx": 40582, "end_char_idx": 42230, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "43f4a833-18eb-465f-9341-7f189b67a50e": {"__data__": {"id_": "43f4a833-18eb-465f-9341-7f189b67a50e", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd1c2193-ea7b-492e-afaf-6040f9ff3801", "node_type": "1", "metadata": {}, "hash": "fac3bd6403b7982970b06fcd0980dc8a7e863886e03ade8213a258a06ec0a89d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d22e5cd-2d96-435a-86eb-af64884f2f47", "node_type": "1", "metadata": {}, "hash": "537be5b57ca59f0bf230a7af3f7a52254cbf129ba1cefff26a8576e39d01b3a1", "class_name": "RelatedNodeInfo"}}, "text": "co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">", "mimetype": "text/plain", "start_char_idx": 42230, "end_char_idx": 43956, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d22e5cd-2d96-435a-86eb-af64884f2f47": {"__data__": {"id_": "2d22e5cd-2d96-435a-86eb-af64884f2f47", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43f4a833-18eb-465f-9341-7f189b67a50e", "node_type": "1", "metadata": {}, "hash": "4b03fd2cbb45a3b21b6facce18262a9112a8725f498d2dfd718ee8380ed9c884", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0", "node_type": "1", "metadata": {}, "hash": "eb192b62cde047a8ed2adeb7f0e119f82f49d26666de79c76b33621321cdeaab", "class_name": "RelatedNodeInfo"}}, "text": "```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/coins/{contract_account_id}`\n\n*Get user's coin balances by contract*\n\nThis endpoint returns all the countable coin balances of the given `account_id`,\n for the given contract and `timestamp`/`block_height`.\n For FT contracts, the response has only 1 item in the list.\n For MT contracts, there could be several balances (MT support is still under development).\n\n **Limitations**\n * For now, we support only the balance for FT contracts that implement the Events NEP standard.\n   We are working on a solution to support other FT contracts, including `wrap.near` and bridged tokens.\n * We are in the process of supporting Multi Token balances.\n\n<h3 id=\"get__accounts_{account_id}_coins_{contract_account_id}-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|contract_account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"balances\": [\n    {\n      \"balance\": \"string\",\n      \"contract_account_id\": \"string\",\n      \"metadata\": {\n        \"decimals\": 0,\n        \"icon\": \"string\",\n        \"name\": \"string\",\n        \"symbol\": \"string\"\n      },\n      \"standard\": \"string\"\n    }\n  ],\n  \"block_height\": \"string\",", "mimetype": "text/plain", "start_char_idx": 43959, "end_char_idx": 45804, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0": {"__data__": {"id_": "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d22e5cd-2d96-435a-86eb-af64884f2f47", "node_type": "1", "metadata": {}, "hash": "537be5b57ca59f0bf230a7af3f7a52254cbf129ba1cefff26a8576e39d01b3a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "62a5798c-4653-4978-a1ae-dfcb65e542a0", "node_type": "1", "metadata": {}, "hash": "d3c8f7a559bfcc236a3a78c1d5e864cc16d3af309129b525f0d6e0855cd3b853", "class_name": "RelatedNodeInfo"}}, "text": "\"block_timestamp_nanos\": \"string\"\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_coins_{contract_account_id}-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[CoinBalancesResponse](#schemacoinbalancesresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get user's coin history by contract\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.", "mimetype": "text/plain", "start_char_idx": 45807, "end_char_idx": 47489, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "62a5798c-4653-4978-a1ae-dfcb65e542a0": {"__data__": {"id_": "62a5798c-4653-4978-a1ae-dfcb65e542a0", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0", "node_type": "1", "metadata": {}, "hash": "eb192b62cde047a8ed2adeb7f0e119f82f49d26666de79c76b33621321cdeaab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9267b605-c755-4fd0-8026-b6bd755e8f15", "node_type": "1", "metadata": {}, "hash": "81fdd3c1e8c1c69ac32dcb0d24e68d405915078f32c0c12d19c4a98d68ce5249", "class_name": "RelatedNodeInfo"}}, "text": "api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">", "mimetype": "text/plain", "start_char_idx": 47489, "end_char_idx": 49258, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9267b605-c755-4fd0-8026-b6bd755e8f15": {"__data__": {"id_": "9267b605-c755-4fd0-8026-b6bd755e8f15", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "62a5798c-4653-4978-a1ae-dfcb65e542a0", "node_type": "1", "metadata": {}, "hash": "d3c8f7a559bfcc236a3a78c1d5e864cc16d3af309129b525f0d6e0855cd3b853", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0f8e2101-da20-4caa-9aef-779628c2c119", "node_type": "1", "metadata": {}, "hash": "127bab35806561ce917470bbb8167bf644e0163085c5d965bd517fb2fe0c254c", "class_name": "RelatedNodeInfo"}}, "text": "```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/accounts/{account_id}/coins/{contract_account_id}/history\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /accounts/{account_id}/coins/{contract_account_id}/history`\n\n*Get user's coin history by contract*\n\nThis endpoint returns the history of coin operations (FT, other standards)\n for the given `account_id`, `contract_id`, `timestamp`/`block_height`.\n\n **Limitations**\n * For now, we support only FT contracts that implement the Events NEP standard.\n   We are working on a solution to support other FT contracts, including `wrap.near` and bridged tokens.\n * We are in the process of supporting Multi Token history.\n * We currently provide the most recent 100 items.\n   Full-featured pagination will be provided in an upcoming update.\n\n<h3 id=\"get__accounts_{account_id}_coins_{contract_account_id}_history-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|account_id|path|string|true|none|\n|contract_account_id|path|string|true|none|\n|limit|query|integer(int32)|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"history\": [\n    {\n      \"block_height\": \"string\",\n      \"block_timestamp_nanos\": \"string\",\n      \"cause\": \"string\",\n      \"new_account_id\": \"string\",\n      \"old_account_id\": \"string\",\n      \"status\": \"string\"\n    }\n  ],\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",", "mimetype": "text/plain", "start_char_idx": 49261, "end_char_idx": 51123, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0f8e2101-da20-4caa-9aef-779628c2c119": {"__data__": {"id_": "0f8e2101-da20-4caa-9aef-779628c2c119", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9267b605-c755-4fd0-8026-b6bd755e8f15", "node_type": "1", "metadata": {}, "hash": "81fdd3c1e8c1c69ac32dcb0d24e68d405915078f32c0c12d19c4a98d68ce5249", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d522e18-f04d-42f1-8f83-fb723b16e4eb", "node_type": "1", "metadata": {}, "hash": "3feb236ddb98ad251d7b80a983a8edce650cac2850ed6a508d7feb08938562c1", "class_name": "RelatedNodeInfo"}}, "text": "\"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",\n    \"token_id\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__accounts_{account_id}_coins_{contract_account_id}_history-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[HistoryResponse](#schemahistoryresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n### Get FT contract metadata\n\n> Code samples\n\n<Tabs>\n<TabItem value=\"Shell\">\n\n```shell\n# You can also use wget\ncurl -X GET https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id} \\\n  -H 'Accept: application/json' \\\n  -H 'x-api-key: API_KEY'\n\n```\n\n</TabItem>\n\n<TabItem value=\"HTTP\">\n\n```http\nGET https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id} HTTP/1.1\nHost: near-testnet.api.pagoda.co\nAccept: application/json\n\n```\n\n</TabItem>\n\n<TabItem value=\"JS\">\n\n```javascript\n\nconst headers = {\n  'Accept':'application/json',\n  'x-api-key':'API_KEY'\n};\n\nfetch('https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});", "mimetype": "text/plain", "start_char_idx": 51130, "end_char_idx": 52725, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d522e18-f04d-42f1-8f83-fb723b16e4eb": {"__data__": {"id_": "1d522e18-f04d-42f1-8f83-fb723b16e4eb", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0f8e2101-da20-4caa-9aef-779628c2c119", "node_type": "1", "metadata": {}, "hash": "127bab35806561ce917470bbb8167bf644e0163085c5d965bd517fb2fe0c254c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53651477-9b2c-4535-afad-302873627034", "node_type": "1", "metadata": {}, "hash": "5b33816271e2016b855cb9d17ed0014304f5432ef2563debb654b03c2efb5e6f", "class_name": "RelatedNodeInfo"}}, "text": "```\n\n</TabItem>\n\n<TabItem value=\"Ruby\">\n\n```ruby\nrequire 'rest-client'\nrequire 'json'\n\nheaders = {\n  'Accept' => 'application/json',\n  'x-api-key' => 'API_KEY'\n}\n\nresult = RestClient.get 'https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}',\n  params: {\n  }, headers: headers\n\np JSON.parse(result)\n\n```\n\n</TabItem>\n\n<TabItem value=\"Python\">\n\n```python\nimport requests\nheaders = {\n  'Accept': 'application/json',\n  'x-api-key': 'API_KEY'\n}\n\nr = requests.get('https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}', headers = headers)\n\nprint(r.json())\n\n```\n\n</TabItem>\n\n<TabItem value=\"PHP\">\n\n```php\n<?php\n\nrequire 'vendor/autoload.php';\n\n$headers = array(\n    'Accept' => 'application/json',\n    'x-api-key' => 'API_KEY',\n);\n\n$client = new \\GuzzleHttp\\Client();\n\n// Define array of request body.\n$request_body = array();\n\ntry {\n    $response = $client->request('GET','https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}', array(\n        'headers' => $headers,\n        'json' => $request_body,\n       )\n    );\n    print_r($response->getBody()->getContents());\n }\n catch (\\GuzzleHttp\\Exception\\BadResponseException $e) {\n    // handle exception or api errors.\n    print_r($e->getMessage());\n }\n\n // ...\n\n```\n\n</TabItem>\n\n<TabItem value=\"Java\">\n\n```java\nURL obj = new URL(\"https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}\");\nHttpURLConnection con = (HttpURLConnection) obj.openConnection();\ncon.setRequestMethod(\"GET\");\nint responseCode = con.getResponseCode();\nBufferedReader in = new BufferedReader(\n    new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n    response.append(inputLine);\n}\nin.close();\nSystem.out.println(response.toString());\n\n```\n\n</TabItem>\n\n<TabItem value=\"Go\">", "mimetype": "text/plain", "start_char_idx": 52727, "end_char_idx": 54625, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53651477-9b2c-4535-afad-302873627034": {"__data__": {"id_": "53651477-9b2c-4535-afad-302873627034", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d522e18-f04d-42f1-8f83-fb723b16e4eb", "node_type": "1", "metadata": {}, "hash": "3feb236ddb98ad251d7b80a983a8edce650cac2850ed6a508d7feb08938562c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30612fa1-1df8-48db-82e0-bf865870b902", "node_type": "1", "metadata": {}, "hash": "0e6c6356cf82f7b7fc31dac2b32458368f958ed873b0fb9abf6feeaa609edae5", "class_name": "RelatedNodeInfo"}}, "text": "```go\npackage main\n\nimport (\n       \"bytes\"\n       \"net/http\"\n)\n\nfunc main() {\n\n    headers := map[string][]string{\n        \"Accept\": []string{\"application/json\"},\n        \"x-api-key\": []string{\"API_KEY\"},\n    }\n\n    data := bytes.NewBuffer([]byte{jsonReq})\n    req, err := http.NewRequest(\"GET\", \"https://near-testnet.api.pagoda.co/eapi/v1/nep141/metadata/{contract_account_id}\", data)\n    req.Header = headers\n\n    client := &http.Client{}\n    resp, err := client.Do(req)\n    // ...\n}\n\n```\n\n</TabItem>\n\n</Tabs>\n\n\n`GET /nep141/metadata/{contract_account_id}`\n\n*Get FT contract metadata*\n\nThis endpoint returns the metadata for a given FT contract and `timestamp`/`block_height`.\n\n **Limitations**\n * For now, we support only FT contracts that implement the Events NEP standard.\n   We are working on a solution to support other FT contracts, including `wrap.near` and bridged tokens.", "mimetype": "text/plain", "start_char_idx": 54628, "end_char_idx": 55511, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30612fa1-1df8-48db-82e0-bf865870b902": {"__data__": {"id_": "30612fa1-1df8-48db-82e0-bf865870b902", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53651477-9b2c-4535-afad-302873627034", "node_type": "1", "metadata": {}, "hash": "5b33816271e2016b855cb9d17ed0014304f5432ef2563debb654b03c2efb5e6f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2", "node_type": "1", "metadata": {}, "hash": "9fc8624fbeb0cc025e19427e2730b2ec875f01182ff5194e999d809f3794cae4", "class_name": "RelatedNodeInfo"}}, "text": "<h3 id=\"get__nep141_metadata_{contract_account_id}-parameters\">Parameters</h3>\n\n|Name|In|Type|Required|Description|\n|---|---|---|---|---|\n|contract_account_id|path|string|true|none|\n|block_height|query|string|false|none|\n|block_timestamp_nanos|query|string|false|none|\n\n> Example responses\n\n> 200 Response\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"decimals\": 0,\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  }\n}\n```\n\n<h3 id=\"get__nep141_metadata_{contract_account_id}-responses\">Responses</h3>\n\n|Status|Meaning|Description|Schema|\n|---|---|---|---|\n|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|[FtContractMetadataResponse](#schemaftcontractmetadataresponse)|\n|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|See the inner `code` value to get more details|None|\n\n<aside class=\"warning\">\nTo perform this operation, you must be authenticated by means of one of the following methods:\napiKey\n</aside>\n\n---\n\n## Schemas\n\n### CoinBalancesResponse\n<!-- backwards compatibility -->\n<a id=\"schemacoinbalancesresponse\"></a>\n<a id=\"schema_CoinBalancesResponse\"></a>\n<a id=\"tocScoinbalancesresponse\"></a>\n<a id=\"tocscoinbalancesresponse\"></a>\n\n```json\n{\n  \"balances\": [\n    {\n      \"balance\": \"string\",\n      \"contract_account_id\": \"string\",\n      \"metadata\": {\n        \"decimals\": 0,\n        \"icon\": \"string\",\n        \"name\": \"string\",\n        \"symbol\": \"string\"\n      },\n      \"standard\": \"string\"\n    }\n  ],\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\"\n}\n\n```\n\nThis response gives the information about all the available balances for the user.", "mimetype": "text/plain", "start_char_idx": 55513, "end_char_idx": 57274, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2": {"__data__": {"id_": "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "30612fa1-1df8-48db-82e0-bf865870b902", "node_type": "1", "metadata": {}, "hash": "0e6c6356cf82f7b7fc31dac2b32458368f958ed873b0fb9abf6feeaa609edae5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2", "node_type": "1", "metadata": {}, "hash": "2a6f9c6ea665470cc25a0564284ecfdcfe1261f5c3850b3ed3992fc6656eb0a9", "class_name": "RelatedNodeInfo"}}, "text": "The answer gives the list of NEAR, FT balances, could be used for Multi Tokens.\n For MTs and other standards, balances could have multiple entries for one contract.\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|balances|[object]|true|none|none|\n|\u00bb balance|string|true|none|none|\n|\u00bb contract_account_id|string|false|none|null for NEAR, not null otherwise|\n|\u00bb metadata|object|true|none|This type describes general Metadata info, collecting the most important fields from different standards in the one format.<br /> `decimals` may contain `0` if it's not applicable (e.g. if it's general MT metadata)|\n|\u00bb\u00bb decimals|integer(int32)|true|none|none|\n|\u00bb\u00bb icon|string|false|none|none|\n|\u00bb\u00bb name|string|true|none|none|\n|\u00bb\u00bb symbol|string|true|none|none|\n|\u00bb standard|string|true|none|\"nearprotocol\" for NEAR, \"nep141\" for FT|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n\n### FtContractMetadataResponse\n<!-- backwards compatibility -->\n<a id=\"schemaftcontractmetadataresponse\"></a>\n<a id=\"schema_FtContractMetadataResponse\"></a>\n<a id=\"tocSftcontractmetadataresponse\"></a>\n<a id=\"tocsftcontractmetadataresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"decimals\": 0,\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  }\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|metadata|object|true|none|The type for FT Contract Metadata.", "mimetype": "text/plain", "start_char_idx": 57276, "end_char_idx": 58962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2": {"__data__": {"id_": "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2", "node_type": "1", "metadata": {}, "hash": "9fc8624fbeb0cc025e19427e2730b2ec875f01182ff5194e999d809f3794cae4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef", "node_type": "1", "metadata": {}, "hash": "664e18520cee2de6696972b4eacc0806d3636094442ba0f29fb50c21062eb790", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/FungibleToken/Metadata|\n|\u00bb decimals|integer(int32)|true|none|none|\n|\u00bb icon|string|false|none|none|\n|\u00bb name|string|true|none|none|\n|\u00bb reference|string|false|none|none|\n|\u00bb reference_hash|string|false|none|none|\n|\u00bb spec|string|true|none|none|\n|\u00bb symbol|string|true|none|none|\n\n### HistoryResponse\n<!-- backwards compatibility -->\n<a id=\"schemahistoryresponse\"></a>\n<a id=\"schema_HistoryResponse\"></a>\n<a id=\"tocShistoryresponse\"></a>\n<a id=\"tocshistoryresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"history\": [\n    {\n      \"block_height\": \"string\",\n      \"block_timestamp_nanos\": \"string\",\n      \"cause\": \"string\",\n      \"new_account_id\": \"string\",\n      \"old_account_id\": \"string\",\n      \"status\": \"string\"\n    }\n  ],\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",\n      \"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",\n    \"token_id\": \"string\"\n  }\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|history|[object]|true|none|none|\n|\u00bb block_height|string|true|none|none|\n|\u00bb block_timestamp_nanos|string|true|none|none|\n|\u00bb cause|string|true|none|none|\n|\u00bb new_account_id|string|false|none|none|\n|\u00bb old_account_id|string|false|none|none|\n|\u00bb status|string|true|none|none|\n|nft|object|true|none|The type for Non Fungible Token.", "mimetype": "text/plain", "start_char_idx": 58963, "end_char_idx": 60597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef": {"__data__": {"id_": "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2", "node_type": "1", "metadata": {}, "hash": "2a6f9c6ea665470cc25a0564284ecfdcfe1261f5c3850b3ed3992fc6656eb0a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e", "node_type": "1", "metadata": {}, "hash": "ba0fab4e35ea8ab8f830657affbcc205cc6465560d694f796a33e2e399975167", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb metadata|object|true|none|The type for Non Fungible Token Metadata. Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb\u00bb copies|integer(int64)|false|none|none|\n|\u00bb\u00bb description|string|false|none|none|\n|\u00bb\u00bb extra|string|false|none|none|\n|\u00bb\u00bb media|string|false|none|none|\n|\u00bb\u00bb media_hash|string|false|none|none|\n|\u00bb\u00bb reference|string|false|none|none|\n|\u00bb\u00bb reference_hash|string|false|none|none|\n|\u00bb\u00bb title|string|false|none|none|\n|\u00bb owner_account_id|string|true|none|none|\n|\u00bb token_id|string|true|none|none|\n\n### MetadataResponse\n<!-- backwards compatibility -->\n<a id=\"schemametadataresponse\"></a>\n<a id=\"schema_MetadataResponse\"></a>\n<a id=\"tocSmetadataresponse\"></a>\n<a id=\"tocsmetadataresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  }\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|metadata|object|true|none|The type for Non Fungible Token Contract Metadata.", "mimetype": "text/plain", "start_char_idx": 60598, "end_char_idx": 61934, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e": {"__data__": {"id_": "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef", "node_type": "1", "metadata": {}, "hash": "664e18520cee2de6696972b4eacc0806d3636094442ba0f29fb50c21062eb790", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6cc13986-5d8c-45ef-a796-266ab9c68ecd", "node_type": "1", "metadata": {}, "hash": "94b63ab27b1798b43d9a0cad6512963fea7f8939c20a86047d56dba00772f1ec", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb base_uri|string|false|none|none|\n|\u00bb icon|string|false|none|none|\n|\u00bb name|string|true|none|none|\n|\u00bb reference|string|false|none|none|\n|\u00bb reference_hash|string|false|none|none|\n|\u00bb spec|string|true|none|none|\n|\u00bb symbol|string|true|none|none|\n\n### NearBalanceResponse\n<!-- backwards compatibility -->\n<a id=\"schemanearbalanceresponse\"></a>\n<a id=\"schema_NearBalanceResponse\"></a>\n<a id=\"tocSnearbalanceresponse\"></a>\n<a id=\"tocsnearbalanceresponse\"></a>\n\n```json\n{\n  \"balance\": \"string\",\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"metadata\": {\n    \"decimals\": 0,\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"symbol\": \"string\"\n  }\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|balance|string|true|none|Sum of staked and nonstaked balances|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|metadata|object|true|none|This type describes general Metadata info, collecting the most important fields from different standards in the one format.<br /> `decimals` may contain `0` if it's not applicable (e.g.", "mimetype": "text/plain", "start_char_idx": 61935, "end_char_idx": 63127, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6cc13986-5d8c-45ef-a796-266ab9c68ecd": {"__data__": {"id_": "6cc13986-5d8c-45ef-a796-266ab9c68ecd", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e", "node_type": "1", "metadata": {}, "hash": "ba0fab4e35ea8ab8f830657affbcc205cc6465560d694f796a33e2e399975167", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b5fdfd2-9225-49e7-abf4-5b813409d753", "node_type": "1", "metadata": {}, "hash": "4a58b5c2fd601d618e5d207f595015d3d7c76d2144a1bc188f218ddf90daf310", "class_name": "RelatedNodeInfo"}}, "text": "if it's general MT metadata)|\n|\u00bb decimals|integer(int32)|true|none|none|\n|\u00bb icon|string|false|none|none|\n|\u00bb name|string|true|none|none|\n|\u00bb symbol|string|true|none|none|\n\n### NftCountsResponse\n<!-- backwards compatibility -->\n<a id=\"schemanftcountsresponse\"></a>\n<a id=\"schema_NftCountsResponse\"></a>\n<a id=\"tocSnftcountsresponse\"></a>\n<a id=\"tocsnftcountsresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"nft_counts\": [\n    {\n      \"contract_account_id\": \"string\",\n      \"contract_metadata\": {\n        \"base_uri\": \"string\",\n        \"icon\": \"string\",\n        \"name\": \"string\",\n        \"reference\": \"string\",\n        \"reference_hash\": \"string\",\n        \"spec\": \"string\",\n        \"symbol\": \"string\"\n      },\n      \"last_updated_at_timestamp_nanos\": \"string\",\n      \"nft_count\": 0\n    }\n  ]\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|nft_counts|[object]|true|none|none|\n|\u00bb contract_account_id|string|true|none|none|\n|\u00bb contract_metadata|object|true|none|The type for Non Fungible Token Contract Metadata.", "mimetype": "text/plain", "start_char_idx": 63128, "end_char_idx": 64307, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0b5fdfd2-9225-49e7-abf4-5b813409d753": {"__data__": {"id_": "0b5fdfd2-9225-49e7-abf4-5b813409d753", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6cc13986-5d8c-45ef-a796-266ab9c68ecd", "node_type": "1", "metadata": {}, "hash": "94b63ab27b1798b43d9a0cad6512963fea7f8939c20a86047d56dba00772f1ec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa", "node_type": "1", "metadata": {}, "hash": "d41fd7c7da0bbc044f73f60b3c0a01db730b31724e3e020bc0ae2e955408fab5", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb\u00bb base_uri|string|false|none|none|\n|\u00bb\u00bb icon|string|false|none|none|\n|\u00bb\u00bb name|string|true|none|none|\n|\u00bb\u00bb reference|string|false|none|none|\n|\u00bb\u00bb reference_hash|string|false|none|none|\n|\u00bb\u00bb spec|string|true|none|none|\n|\u00bb\u00bb symbol|string|true|none|none|\n|\u00bb last_updated_at_timestamp_nanos|string|true|none|none|\n|\u00bb nft_count|integer(int32)|true|none|none|\n\n### NftResponse\n<!-- backwards compatibility -->\n<a id=\"schemanftresponse\"></a>\n<a id=\"schema_NftResponse\"></a>\n<a id=\"tocSnftresponse\"></a>\n<a id=\"tocsnftresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"contract_metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  },\n  \"nft\": {\n    \"metadata\": {\n      \"copies\": 0,\n      \"description\": \"string\",\n      \"extra\": \"string\",\n      \"media\": \"string\",\n      \"media_hash\": \"string\",\n      \"reference\": \"string\",\n      \"reference_hash\": \"string\",\n      \"title\": \"string\"\n    },\n    \"owner_account_id\": \"string\",\n    \"token_id\": \"string\"\n  }\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|contract_metadata|object|true|none|The type for Non Fungible Token Contract Metadata.", "mimetype": "text/plain", "start_char_idx": 64308, "end_char_idx": 65770, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa": {"__data__": {"id_": "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b5fdfd2-9225-49e7-abf4-5b813409d753", "node_type": "1", "metadata": {}, "hash": "4a58b5c2fd601d618e5d207f595015d3d7c76d2144a1bc188f218ddf90daf310", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "812d9c19-4217-44c4-990d-e15f02b19b3c", "node_type": "1", "metadata": {}, "hash": "c6769ac94fa9b461a6498e7bce178559423cdaa2eec1cc565e44eb95c1c9a504", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb base_uri|string|false|none|none|\n|\u00bb icon|string|false|none|none|\n|\u00bb name|string|true|none|none|\n|\u00bb reference|string|false|none|none|\n|\u00bb reference_hash|string|false|none|none|\n|\u00bb spec|string|true|none|none|\n|\u00bb symbol|string|true|none|none|\n|nft|object|true|none|The type for Non Fungible Token. Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb metadata|object|true|none|The type for Non Fungible Token Metadata.", "mimetype": "text/plain", "start_char_idx": 65771, "end_char_idx": 66300, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "812d9c19-4217-44c4-990d-e15f02b19b3c": {"__data__": {"id_": "812d9c19-4217-44c4-990d-e15f02b19b3c", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa", "node_type": "1", "metadata": {}, "hash": "d41fd7c7da0bbc044f73f60b3c0a01db730b31724e3e020bc0ae2e955408fab5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "985f071b-c6d4-4283-8464-236e6853db3b", "node_type": "1", "metadata": {}, "hash": "9170caff5f260a7bbb13b90b7accc18b63848992ac89e5a8f0988e995822976b", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb\u00bb copies|integer(int64)|false|none|none|\n|\u00bb\u00bb description|string|false|none|none|\n|\u00bb\u00bb extra|string|false|none|none|\n|\u00bb\u00bb media|string|false|none|none|\n|\u00bb\u00bb media_hash|string|false|none|none|\n|\u00bb\u00bb reference|string|false|none|none|\n|\u00bb\u00bb reference_hash|string|false|none|none|\n|\u00bb\u00bb title|string|false|none|none|\n|\u00bb owner_account_id|string|true|none|none|\n|\u00bb token_id|string|true|none|none|\n\n### NftsResponse\n<!-- backwards compatibility -->\n<a id=\"schemanftsresponse\"></a>\n<a id=\"schema_NftsResponse\"></a>\n<a id=\"tocSnftsresponse\"></a>\n<a id=\"tocsnftsresponse\"></a>\n\n```json\n{\n  \"block_height\": \"string\",\n  \"block_timestamp_nanos\": \"string\",\n  \"contract_metadata\": {\n    \"base_uri\": \"string\",\n    \"icon\": \"string\",\n    \"name\": \"string\",\n    \"reference\": \"string\",\n    \"reference_hash\": \"string\",\n    \"spec\": \"string\",\n    \"symbol\": \"string\"\n  },\n  \"nfts\": [\n    {\n      \"metadata\": {\n        \"copies\": 0,\n        \"description\": \"string\",\n        \"extra\": \"string\",\n        \"media\": \"string\",\n        \"media_hash\": \"string\",\n        \"reference\": \"string\",\n        \"reference_hash\": \"string\",\n        \"title\": \"string\"\n      },\n      \"owner_account_id\": \"string\",\n      \"token_id\": \"string\"\n    }\n  ]\n}\n\n```\n\n##### Properties\n\n|Name|Type|Required|Restrictions|Description|\n|---|---|---|---|---|\n|block_height|string|true|none|none|\n|block_timestamp_nanos|string|true|none|none|\n|contract_metadata|object|true|none|The type for Non Fungible Token Contract Metadata.", "mimetype": "text/plain", "start_char_idx": 66301, "end_char_idx": 67837, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "985f071b-c6d4-4283-8464-236e6853db3b": {"__data__": {"id_": "985f071b-c6d4-4283-8464-236e6853db3b", "embedding": null, "metadata": {"file_path": "./near_dist/api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec30de8-8dad-486d-a34f-bff103ca1161", "node_type": "4", "metadata": {}, "hash": "727ed15516cea4744788e771827c4770e1a0b6e0a2348a249fb77a7344d5faf1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "812d9c19-4217-44c4-990d-e15f02b19b3c", "node_type": "1", "metadata": {}, "hash": "c6769ac94fa9b461a6498e7bce178559423cdaa2eec1cc565e44eb95c1c9a504", "class_name": "RelatedNodeInfo"}}, "text": "Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb base_uri|string|false|none|none|\n|\u00bb icon|string|false|none|none|\n|\u00bb name|string|true|none|none|\n|\u00bb reference|string|false|none|none|\n|\u00bb reference_hash|string|false|none|none|\n|\u00bb spec|string|true|none|none|\n|\u00bb symbol|string|true|none|none|\n|nfts|[object]|true|none|none|\n|\u00bb metadata|object|true|none|The type for Non Fungible Token Metadata. Inspired by<br /> https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata|\n|\u00bb\u00bb copies|integer(int64)|false|none|none|\n|\u00bb\u00bb description|string|false|none|none|\n|\u00bb\u00bb extra|string|false|none|none|\n|\u00bb\u00bb media|string|false|none|none|\n|\u00bb\u00bb media_hash|string|false|none|none|\n|\u00bb\u00bb reference|string|false|none|none|\n|\u00bb\u00bb reference_hash|string|false|none|none|\n|\u00bb\u00bb title|string|false|none|none|\n|\u00bb owner_account_id|string|true|none|none|\n|\u00bb token_id|string|true|none|none|", "mimetype": "text/plain", "start_char_idx": 67838, "end_char_idx": 68726, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c9a76086-b720-4df9-a0c4-f8e370820286": {"__data__": {"id_": "c9a76086-b720-4df9-a0c4-f8e370820286", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70f839e8-585c-4ce4-a67b-be39c4f33ace", "node_type": "1", "metadata": {}, "hash": "83d732a7e18b5cc27a191b60fe78d5649227d4293e264fea687f39355a1b98e2", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: nft\ntitle: Non-Fungible Tokens (NFT)\nhide_table_of_contents: false\n---\n\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\"\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport BOSMintNFT from \"./nft/bos/mint.md\"\nimport BOSBuyNFT from \"./nft/bos/buy.md\"\nimport BOSQueryNFT from \"./nft/bos/query.md\"\nimport BOSTransferNFT from \"./nft/bos/transfer.md\"\nimport BOSListNFTForSale from \"./nft/bos/list-for-sale.md\"\n\nimport WebAppMintNFT from \"./nft/web-app/mint.md\"\nimport WebAppBuyNFT from \"./nft/web-app/buy.md\"\nimport WebAppQueryNFT from \"./nft/web-app/query.md\"\nimport WebAppTransferNFT from \"./nft/web-app/transfer.md\"\nimport WebAppListNFTForSale from \"./nft/web-app/list-for-sale.md\"\n\nimport CLIMintNFT from \"./nft/near-cli/mint.md\"\nimport CLIBuyNFT from \"./nft/near-cli/buy.md\"\nimport CLIQueryNFT from \"./nft/near-cli/query.md\"\nimport CLITransferNFT from \"./nft/near-cli/transfer.md\"\nimport CLIListNFTForSale from \"./nft/near-cli/list-for-sale.md\"\n\nimport SmartContractMintNFT from \"./nft/smart-contract/mint.md\"\nimport SmartContractBuyNFT from \"./nft/smart-contract/buy.md\"\nimport SmartContractQueryNFT from \"./nft/smart-contract/query.md\"\nimport SmartContractTransferNFT from \"./nft/smart-contract/transfer.md\"\n\nIn contrast with fungible tokens, non-fungible tokens (NFT) are unitary and therefore unique. This makes NFTs ideal to represent ownership of assets such as a piece of digital content, or a ticket for an event.\n\nAs with fungible tokens, NFTs are **not stored** in the user's wallet, instead, each NFT lives in a **NFT contract**.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1604, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "70f839e8-585c-4ce4-a67b-be39c4f33ace": {"__data__": {"id_": "70f839e8-585c-4ce4-a67b-be39c4f33ace", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c9a76086-b720-4df9-a0c4-f8e370820286", "node_type": "1", "metadata": {}, "hash": "7a11a7bae62066ee643e833c6db330d5d257852c84362529c43e8c6d84d1f773", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fcead954-6ac5-40b0-a905-546281759da4", "node_type": "1", "metadata": {}, "hash": "b63c247455d2946992588ed188dade91253125b2ac68862663ad2cea7dc06ad6", "class_name": "RelatedNodeInfo"}}, "text": "The NFT contract works as a bookkeeper, this is: it is in charge of handling the creation, storage and transfers of NFTs.\n\nIn order for a contract to be considered a NFT-contract it has to follow the [**NEP-171 and NEP-177 standards**](https://nomicon.io/Standards/Tokens/NonFungibleToken). The **NEP-171** & **NEP-177** standards explain the **minimum interface** required to be implemented, as well as the expected functionality.\n\n:::info NFT & Marketplaces\n\nBe mindful of not confusing an NFT with an NFT-marketplace. NFT simply store information (metadata), while NFT-marketplaces are contracts where NFT can be listed and exchanged for a price.\n\n:::\n\n---\n\n## Community Projects\nThe easiest way to create and handle NFTs is by using one of the existing community projects.\n\n1. [Paras](https://paras.id/) - a classic NFT marketplace. Just login with your NEAR account, create a collection and share the link with your community.\n2. [Mintbase](https://www.mintbase.xyz/) - a marketplace that allows to create NFT collections, and buy NFTs using credit cards or stablecoins.\n3. [Enleap](https://enleap.app/) - a no-code launchpad for NFTs. Provides NFT minting, staking, whitelist managing, tracking functionality.\n\n---\n\n## Deploying a NFT Contract\nIf you want to deploy your own NFT contract, you can create one using our [reference implementation](https://github.com/near-examples/NFT) \n\nSimply personalize it and deploy it to your account.\n\n```bash\nnear deploy <account-id> --wasmFile contract.wasm --initFunction new\n```\n\n:::tip\n\nCheck the [Contract Wizard](https://dev.near.org/contractwizard.near/widget/ContractWizardUI) to create a personalized NFT contract!.\n\n:::\n\n---\n\n## Minting a NFT\nTo create a new NFT (a.k.a. minting it) you will call the `nft_mint` method passing as arguments the metadata that defines the NFT.", "mimetype": "text/plain", "start_char_idx": 1605, "end_char_idx": 3433, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fcead954-6ac5-40b0-a905-546281759da4": {"__data__": {"id_": "fcead954-6ac5-40b0-a905-546281759da4", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70f839e8-585c-4ce4-a67b-be39c4f33ace", "node_type": "1", "metadata": {}, "hash": "83d732a7e18b5cc27a191b60fe78d5649227d4293e264fea687f39355a1b98e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cdbac1c5-5ab3-4037-bc0a-7d030e334cff", "node_type": "1", "metadata": {}, "hash": "b3b647a22cca2eebfaca7cb8e10af82ff98a4e86735ffa982aa96da5fdcc8df6", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSMintNFT />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppMintNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIMintNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\" default>\n    <SmartContractMintNFT />\n  </TabItem>\n</Tabs>\n\n:::info\n\nSee the [metadata standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata) for the full list of `TokenMetadata` parameters.\n\n:::\n\n:::warning\n\nValues of gas and deposit might vary depending on which NFT contract you are calling.\n\n:::\n\n<hr className=\"subsection\" />\n\n### Minting Collections\n\nMany times people want to create multiple 100 copies of an NFT (this is called a collection). In such cases, what you actually need to do is to mint 100 different NFTs with the same metadata (but different `token-id`).\n\n:::tip\n\nNotice that [minting in Mintbase](#minting-a-nft) allows you to pass a `num_to_mint` parameter.\n\n:::\n\n<hr className=\"subsection\" />\n\n### Royalties\nYou might have noticed that one of the parameters is a structure called royalties. Royalties enable you to create a list of users that should get paid when the token is sell in a marketplace. For example, if `anna` has `5%` of royalties, each time the NFT is sell, `anna` should get a 5% of the selling price.", "mimetype": "text/plain", "start_char_idx": 3435, "end_char_idx": 4819, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cdbac1c5-5ab3-4037-bc0a-7d030e334cff": {"__data__": {"id_": "cdbac1c5-5ab3-4037-bc0a-7d030e334cff", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fcead954-6ac5-40b0-a905-546281759da4", "node_type": "1", "metadata": {}, "hash": "b63c247455d2946992588ed188dade91253125b2ac68862663ad2cea7dc06ad6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af114149-e6fe-435b-9ea2-09bde8ac0086", "node_type": "1", "metadata": {}, "hash": "528bbfb2ff965fdd137562ccc23610b360477326703cb04b9fdea4403f7acde7", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n## Querying NFT data\nYou can query the NFT's information and metadata by calling the `nft_token`.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSQueryNFT />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppQueryNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIQueryNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractQueryNFT />\n  </TabItem>\n</Tabs>\n\n---\n\n## Transferring a NFT\nTransferring an NFT can happen in two scenarios: (1) you ask to transfer an NFT, and (2) an [authorized account](#approving-users) asks to transfer the NFT.\n\nIn both cases, it is necessary to invoke the `nft_transfer` method, indicating the token id, the receiver, and an (optionally) an [approval_id](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement).\n\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSTransferNFT />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppTransferNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLITransferNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractTransferNFT />  \n  </TabItem>\n</Tabs>\n\n---\n\n## Attaching NFTs to a Call\nNatively, only NEAR tokens (\u24c3) can be attached to a function calls. However, the NFT standard enables to attach a non-fungible tokens in a call by using the NFT-contract as intermediary.", "mimetype": "text/plain", "start_char_idx": 4822, "end_char_idx": 6326, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af114149-e6fe-435b-9ea2-09bde8ac0086": {"__data__": {"id_": "af114149-e6fe-435b-9ea2-09bde8ac0086", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cdbac1c5-5ab3-4037-bc0a-7d030e334cff", "node_type": "1", "metadata": {}, "hash": "b3b647a22cca2eebfaca7cb8e10af82ff98a4e86735ffa982aa96da5fdcc8df6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15", "node_type": "1", "metadata": {}, "hash": "780babcb25f92211df3d8a835f747a7dd77146d51ed33b302882a29d707fdbfd", "class_name": "RelatedNodeInfo"}}, "text": "This means that, instead of you attaching tokens directly to the call, you ask the NFT-contract to do both a transfer and a function call in your name.\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call <nft-contract> nft_transfer_call '{\"receiver_id\": \"<receiver-contract>\", \"token_id\": \"<token_id>\", \"msg\": \"<a-string-message>\"}' --accountId <your-account> --depositYocto 1\n```\n\n</TabItem>\n\n</Tabs>\n\n:::info\n\nOptionally, a [`memo` parameter](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core#nft-interface) can be passed to provide more information to your contract.\n\n:::\n\n<hr className=\"subsection\" />\n\n### How Does it Work?\nAssume you want to attach an NFT (\ud83c\udfab) to a call on the receiver contract. The workflow is as follows:\n1. You call `nft_transfer_call` in the NFT-contract passing: the receiver, a message, and the token-id of \ud83c\udfab.\n2. The NFT contract transfers the NFT \ud83c\udfab to the receiver.\n3. The NFT contract calls **`receiver.nft_on_transfer(sender, token-owner, token-id, msg)`**.\n4. The NFT contract handles errors in the `nft_resolve_transfer` callback.\n5. The NFT contract returns `true` if it succeeded.\n\n#### The nft_on_transfer method\nFrom the workflow above it follows that the receiver we want to call needs to implement the `nft_on_transfer` method. When executed, such method will know:\n- Who is sending the NFT, since it is a parameter\n- Who is the current owner, since it is a parameter\n- Which NFT was transferred, since it is a parameter.\n- If there are any parameters encoded as a message\n\nThe `nft_on_transfer` **must return true** if the NFT has to be **returned to the sender**.\n\n\n---\n\n## Approving Users\n\nYou can authorize other users to transfer an NFT you own. This is useful, for example, to enable listing your NFT in a marketplace.", "mimetype": "text/plain", "start_char_idx": 6327, "end_char_idx": 8162, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15": {"__data__": {"id_": "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af114149-e6fe-435b-9ea2-09bde8ac0086", "node_type": "1", "metadata": {}, "hash": "528bbfb2ff965fdd137562ccc23610b360477326703cb04b9fdea4403f7acde7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ec126c0b-21be-4489-a8fd-cd93a50437b0", "node_type": "1", "metadata": {}, "hash": "1c38ccc305c5c24e9a0181b01080737ce93c7cb9a385f17848fa0d59cc2e8f02", "class_name": "RelatedNodeInfo"}}, "text": "In such scenario, you **trust** that the marketplace will only transfer the NFT upon receiving a certain amount of money in exchange.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call <nft-contract> nft_approve '{\n\"token_id\": \"<token-unique-id>\",\n\"account_id\": \"<authorized-account>\",\n\"msg\": \"<json-structure>\"\n}' --accountId <your-account> --depositYocto 1\n```\n\n</TabItem>\n\n</Tabs>\n\n:::info\n\nIf the `msg` parameter is included, then a cross-contract call will be made to `<authorized_account>.nft_on_approve(msg)`. Which in turn will make a callback to `nft_resolve_transfer` in your NFT contract.\n\n:::\n\n---\n\n## List a NFT for sale\n\nBasic NFT contracts following [the NEP-171 and NEP-177 standards](https://nomicon.io/Standards/Tokens/NonFungibleToken) do not implement marketplace functionality.\n\nFor this purpose, there are ecosystem apps such as [Paras](https://paras.id/) or [Mintbase](https://www.mintbase.xyz/), that use dedicated marketplace contracts.\n\nIn order to put a NFT for a sale on a marketplace you need to do two actions: \n\n1. Cover data storage costs in the marketplace contract. \n2. Approve the marketplace to sell the NFT in your NFT contract.\n\n<br />\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSListNFTForSale />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppListNFTForSale />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIListNFTForSale />\n  </TabItem>\n</Tabs>\n\n---\n\n## Buy a NFT\n\nBasic NFT contracts following [the NEP-171 and NEP-177 standards](https://nomicon.io/Standards/Tokens/NonFungibleToken) do not implement marketplace functionality.", "mimetype": "text/plain", "start_char_idx": 8163, "end_char_idx": 9864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ec126c0b-21be-4489-a8fd-cd93a50437b0": {"__data__": {"id_": "ec126c0b-21be-4489-a8fd-cd93a50437b0", "embedding": null, "metadata": {"file_path": "./near_dist/nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1", "node_type": "4", "metadata": {}, "hash": "c7f3971c6dbd8f77d05a299247117dcb1b5a5ccef17e298ef4184124598d88a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15", "node_type": "1", "metadata": {}, "hash": "780babcb25f92211df3d8a835f747a7dd77146d51ed33b302882a29d707fdbfd", "class_name": "RelatedNodeInfo"}}, "text": "For this purpose, there are ecosystem apps such as [Paras](https://paras.id/) or [Mintbase](https://www.mintbase.xyz/), that use dedicated marketplace contracts.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSBuyNFT />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppBuyNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIBuyNFT />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\" default>\n    <SmartContractBuyNFT />\n  </TabItem>\n</Tabs>\n\n---\n\n## Additional Resources\n\n1. [NFT Tutorial](/tutorials/nfts/js/introduction) (NEAR examples, JavaScript SDK) - a set of tutorials that cover how to create a NFT contract using JavaScript.\n2. [NFT Tutorial](/tutorials/nfts/introduction) (NEAR examples, Rust SDK) - a set of tutorials that cover how to create a NFT contract using Rust.\n3. [NFT Tutorial by Keypom](https://github.com/keypom/nft-tutorial-series) (a fork of the NEAR example tutorial).\n4. [Paras API documentation](https://parashq.github.io/).\n5. [Mintbase API documentation](https://docs.mintbase.xyz/dev/mintbase-graph).\n6. [Mintbase JS SDK](https://docs.mintbase.xyz/dev/mintbase-sdk-ref) - a set of methods to get data from blockchain, interact with Mintbase contracts, etc.", "mimetype": "text/plain", "start_char_idx": 9866, "end_char_idx": 11155, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d2ac0fad-61f3-413c-ae2a-29e9f16e9b88": {"__data__": {"id_": "d2ac0fad-61f3-413c-ae2a-29e9f16e9b88", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "74e6a02a-a5ce-4469-a2e6-83f4548a15f3", "node_type": "4", "metadata": {}, "hash": "2709680ff3f672dde4c350a3178d962adcf2e6740b8255194141d396e993c1e8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ef6d2574-a864-4d23-8ec7-c887699cd220", "node_type": "1", "metadata": {}, "hash": "706cb34ca5b5f8e7845e1d23d1cb78e55149dde7ac5e7a2389f0cef6b1cc030f", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: integrate-components\ntitle: Integrating Components\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nTo integrate [Components](../3.near-components/what-is.md) to your frontend, you will leverage two tools:\n1. `Wallet Selector`: Enables the user to select their preferred NEAR wallet in your dApp.\n2. `NEAR VM`: A package that can retrieve the component's code from the blockchain and execute it in the browser. \n\n<br/>\n\nUsing those tools you will implement the following flow:\n1. **Setup** the VM.\n2. Render components using the `Widget` component in the VM.\n3. **Setup** a wallet selector so users can interact with the Menu.\n\n---\n\n## Adding the VM & Wallet Selector\nTo use the `VM` and the `wallet-selector`, you must add them to your project first.\n\nThe wallet selector has multiple wallet packages to select from. [Check their website](https://github.com/near/wallet-selector#installation-and-usage) for more information.\n\n```bash\nnpm install \\\n  @near-wallet-selector/core \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/modal-ui\n```\n\nThen, manually add the `VM` to your `package.json`:\n\n```js\n\"dependencies\": {\n  ...\n  \"near-social-vm\": \"github:NearSocial/VM#2.5.5\"\n  ...\n}\n```\n\n:::tip\nCheck the latest released version for the VM [here](https://github.com/NearSocial/VM/releases)\n:::\n\n---\n\n## Setup the VM\nTo render components, you need to import the `useInitNear` hook from the `near-social-vm` package, as well as the `Widget` component.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1636, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ef6d2574-a864-4d23-8ec7-c887699cd220": {"__data__": {"id_": "ef6d2574-a864-4d23-8ec7-c887699cd220", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-components.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "74e6a02a-a5ce-4469-a2e6-83f4548a15f3", "node_type": "4", "metadata": {}, "hash": "2709680ff3f672dde4c350a3178d962adcf2e6740b8255194141d396e993c1e8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2ac0fad-61f3-413c-ae2a-29e9f16e9b88", "node_type": "1", "metadata": {}, "hash": "8dfa8b8d526c7ae0b4e63bf98bd09630d5d64ebb4e809bfb8780ab3e9a1a919f", "class_name": "RelatedNodeInfo"}}, "text": "```js\nimport { useInitNear, Widget } from 'near-social-vm';\nimport { useEffect } from 'react';\n\nexport default function Component({ src }) {\n  const { initNear } = useInitNear();\n\n  useEffect(() => {\n    initNear && initNear({ networkId: 'testnet', selector: null });\n  }, [initNear]);\n\n  return <Widget src={src} />;\n}\n\nreturn <Component src=\"influencer.testnet/widget/Greeter\" props={{name: \"Anna\", amount: 2}} />\n```\n\n:::tip\nNotice that the VM is inherently linked to `React`, so you will need to use a reactive framework to take full advantage of the VM.\n:::\n\n---\n\n## Setup the Wallet Selector\nWhile the VM allows you to render components, you need to set up a wallet selector to allow users to interact with the components.\n\nTo instantiate a `Wallet Selector`, simply import all the wallets you want your users to have access to, and the setup method from the `near-wallet-selector` package.\n\n```js\nimport '@near-wallet-selector/modal-ui/styles.css';\nimport { setupModal } from '@near-wallet-selector/modal-ui';\nimport { setupWalletSelector } from '@near-wallet-selector/core';\nimport { setupMyNearWallet } from '@near-wallet-selector/my-near-wallet';\n\nconst selector = setupWalletSelector({\n  network: 'testnet,\n  modules: [setupMyNearWallet()],\n});\n```\n\nThen use it during the call to `initNear`:\n\n```js\n  useEffect(() => {\n    initNear && initNear({ networkId: 'testnet', selector: selector });\n  }, [initNear]);\n```\n\n:::tip\nTo learn more about the wallet selector and how it can be used, please see the [integrating NEAR to your WebApp tutorial](./integrate-contracts.md)\n:::", "mimetype": "text/plain", "start_char_idx": 1638, "end_char_idx": 3222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f96383ac-1b5e-491e-84d7-f1bcf24be881": {"__data__": {"id_": "f96383ac-1b5e-491e-84d7-f1bcf24be881", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-15.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40", "node_type": "4", "metadata": {}, "hash": "9ca0533bf37ae8d02002fe9a4741cc1a81211794bf02b5e41f8df13f7c21783a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c106e74-a68b-4d84-90cf-df3bc68ac835", "node_type": "1", "metadata": {}, "hash": "91b4b74d677ccbb8cc87eabeb00c09bf2227c93f6de86f3c44144a6699a7f89f", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: Use cases for Chain Signatures\nauthors: [bucanero]\nslug: chain-signatures-use-cases\ntags: [docusaurus, updates]\nhide_table_of_contents: true\n---\n\n\n*Chain signatures enable you to implement multichain and cross-chain workflows in a simple way. Lets take a look at a few possible use cases*\n\n<!-- truncate -->\n\n\n## Trade Blockchain assets without transactions\n\nTrading assets across different blockchains usually require using a bridge that supports them, bringing longer settlement times as the trades are not atomic and require confirmation on both blockchains.\n\nUsing Chain signatures, you can trade assets across chains simply swapping the ownership of NEAR accounts that control funds on different blockchains. For example, you could trade a NEAR account that controls a Bitcoin account with `X BTC` for another NEAR account that controls an Ethereum account with `Y ETH`.\n\nThis way, you can keep native tokens on their native blockchain (e.g., `BTC` on Bitcoin, `ETH` on Ethereum, `ARB` on Arbitrum) and trade them without bridges.\nAs an added bonus, trades are atomic across chains, settlement takes just 2 seconds, and supports any token on any chain.\n\n:::tip Keep in mind\n\n There are transactions happening on different blockchains.\n The difference is that a [Multi-Party Computation service](/concepts/abstraction/chain-signatures#multi-party-computation-service) (MPC) signs a transaction for you, and that transaction is then broadcast to another blockchain RPC node or API.\n\n:::\n\nFor example, a basic trade flow could be:\n\n1. Users create an account controlled by NEAR chain signatures\n2. Users funds these accounts on the native blockchains (depositing)\n3. Place orders by funding a new account for the total amount of the order\n4. Another user accepts the order\n5. Users swap control of the keys to fulfill the order\n\n![docs](/docs/native-cross-chain.png)\n\n<details>\n- User A has `ETH` on the Ethereum blockchain, and wants to buy native Bitcoin\n- User B wants to sell Bitcoin for Ethereum\n\n**Steps**\n\n1. User B, using NEAR, creates and funds a new account on Bitcoin with 1 `BTC`\n2. User B, using the spot marketplace smart contract, signs a transaction to create a limit order.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2203, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c106e74-a68b-4d84-90cf-df3bc68ac835": {"__data__": {"id_": "5c106e74-a68b-4d84-90cf-df3bc68ac835", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-15.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40", "node_type": "4", "metadata": {}, "hash": "9ca0533bf37ae8d02002fe9a4741cc1a81211794bf02b5e41f8df13f7c21783a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f96383ac-1b5e-491e-84d7-f1bcf24be881", "node_type": "1", "metadata": {}, "hash": "06ab5e82b72541f9f33161a24b36dfcdaaa67a711ad4805d220e0cacdc554980", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b", "node_type": "1", "metadata": {}, "hash": "2fe6dccd34f9d57d1788012660576cf6745dc65984cc13e65039824f21367d02", "class_name": "RelatedNodeInfo"}}, "text": "This transfers control of the Bitcoin account to the smart contract\n3. User A creates a batch transaction with two steps\n    - Creating and funding a new Ethereum account with 10 `ETH`\n    - Accepting the order and atomically swapping control of the accounts\n4. User A takes ownership of the Bitcoin account with 1 `BTC`, and User B takes ownership of the Ethereum account with 10 `ETH`\n5. User A and B can _\"withdraw\"_ their asset from the order by transferring the assets to their respective _\"main\"_ accounts\n</details>\n\n---\n\n## Oauth-controlled Blockchain accounts\n\nOn-boarding is a huge problem for decentralized applications. If you want widespread adoption you can't expect people to keep seed phrases safe in order to use an application.\n\nAn attractive way of managing Web3 accounts is to use existing Web2 accounts to on-board users. This can be done in the following way:\n\n1. Deploy a NEAR contract that allows the bearer of a user's [JWT token](https://jwt.io/) to sign a blockchain transaction (Ethereum, Polygon, Avalanche, and others)\n2. The user validates their identity with a third-party receiving a JWT Token\n3. The user holding that token can interact with blockchain applications on Ethereum/Polygon/+++ via the NEAR contract for the duration of it's validity\n\nAny method of controlling a NEAR account can also be used to control a cross-chain account.\n\n:::info About JWT tokens\nJSON Web Tokens are a standard RFC 7519 method for representing claims securely between two parties. They are used in this example to represent the claim that someone is the owner of an Oauth account.\n:::\n\n---\n\n## Cross-chain Zero-friction onboarding\n\nUsing unique features of the NEAR account model, [Keypom](https://docs.keypom.xyz/) provides zero-friction onboarding and transactions on NEAR. They are generally used for NFT drops, FT drops, and ticketing.\n\nA generic Keypom user-flow could be:\n\n1. The developer creates a restricted NEAR account\n2. The account is funded with `NEAR`\n3. The user receives a key with limited control of the account\n4. The user uses the funded account to call controlled endpoints on NEAR\n5.", "mimetype": "text/plain", "start_char_idx": 2204, "end_char_idx": 4328, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b": {"__data__": {"id_": "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-15.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40", "node_type": "4", "metadata": {}, "hash": "9ca0533bf37ae8d02002fe9a4741cc1a81211794bf02b5e41f8df13f7c21783a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c106e74-a68b-4d84-90cf-df3bc68ac835", "node_type": "1", "metadata": {}, "hash": "91b4b74d677ccbb8cc87eabeb00c09bf2227c93f6de86f3c44144a6699a7f89f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "490128b8-c2b8-460d-aa16-4fdbf4a1c512", "node_type": "1", "metadata": {}, "hash": "ab8924e7c157136d4d512a9c23b38e8b17d257e254a8999d751e84aea19032de", "class_name": "RelatedNodeInfo"}}, "text": "The user returns the remaining funds to the developer and their account is unlocked\n\n:::tip\nThis allows easy on-boarding to decentralized apps. The accounts are initially restricted to prevent the user being able to simply withdraw the `NEAR` from the account.\n:::\n\n## DeFi on Bitcoin (and other non-smart contract chains).\n\nUsing chain signatures, smart contracts on NEAR can control externally-owned accounts on non-smart contract chains like Bitcoin, Dogecoin, XRP Ledger, Bittensor, Cosmos Hub, etc. This enables developers to use NEAR as a smart contract \u201clayer\u201d for chains that do not support this functionality natively.\n\nFor example, a developer can build a decentralized exchange for Bitcoin Ordinals, using a smart contract on NEAR to manage deposits (into Bitcoin addresses controlled by the contract) and to verify and execute swaps when two users agree to trade BTC for an Ordinal or BRC20 token.\n\nExample:\n1. Seller generates a deposit address on Bitcoin that is controlled by the marketplace smart contract on NEAR via chain signatures\n2. Seller deposits a Bitcoin Ordinal to the deposit address\n3. The Ordinal is listed for sale with a price and a pre-commitment signature from the seller\n4. Buyer accepts the order, deposits USDC\n5. The control of the Bitcoin Ordinal address is given to the buyer, USDC on NEAR is transferred to the seller\n\n#### Using Chain Signatures\n\nWith Chain Signatures you can do the same but across many chains, for example Polygon:\n\n1. The developer creates a restricted NEAR account with a key\n2. The account is funded with `NEAR` and `MATIC`\n3. The user receives a key with limited control of the account\n4. The user uses the funded account to sign payloads calling controlled endpoints on Polygon\n5. The user returns the remaining funds to the developer and their account is unlocked\n\nThis allows developers to pay for users to use arbitrary contracts on arbitrary chains.\n\n---\n\n## Decentralized Clients\n\nA big problem in decentralized applications is that while the smart contracts are tamper-proof, the clients that access them generally are not. This allows practically complete control over any user account provided they are using the frontend assets that you serve. This has security, trust, and regulatory implications.", "mimetype": "text/plain", "start_char_idx": 4329, "end_char_idx": 6601, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "490128b8-c2b8-460d-aa16-4fdbf4a1c512": {"__data__": {"id_": "490128b8-c2b8-460d-aa16-4fdbf4a1c512", "embedding": null, "metadata": {"file_path": "./near_dist/2024-05-15.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40", "node_type": "4", "metadata": {}, "hash": "9ca0533bf37ae8d02002fe9a4741cc1a81211794bf02b5e41f8df13f7c21783a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b", "node_type": "1", "metadata": {}, "hash": "2fe6dccd34f9d57d1788012660576cf6745dc65984cc13e65039824f21367d02", "class_name": "RelatedNodeInfo"}}, "text": "When smart contracts can sign payloads you can start using [signed exchanges](https://wicg.github.io/webpackage/draft-yasskin-http-origin-signed-responses.html#name-introduction) (or polyfills) to require HTTP exchanges to be signed by a certain key. If it is not signed with this key the SSL certificate is considered invalid. This means that individual users cannot be served invalid frontends without it being generally observable and non repudiable.\n\n---\n\n## Communication with private NEAR Shards\n\nCompanies like [Calimero](https://www.calimero.network/) offer private NEAR shards. Currently, sending messages to and from these NEAR shards is troublesome. If each shard had the ability to sign their message queues, they could be securely sent from one shard to another. Thus you could communicate bidirectionally with any shard as easily as you can with a contract on your own shard.\n\n:::tip\nThis could also simplify NEAR's sharding model, by treating each NEAR shard like one would a private shard.\n:::", "mimetype": "text/plain", "start_char_idx": 6603, "end_char_idx": 7612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c7a0c5d-9a10-4841-aa89-6508cf77e616": {"__data__": {"id_": "2c7a0c5d-9a10-4841-aa89-6508cf77e616", "embedding": null, "metadata": {"file_path": "./near_dist/implicit-accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4889eb72-a647-41e3-992e-8480d36ac81f", "node_type": "4", "metadata": {}, "hash": "76e574f78f9103ad88b5cfb9dc3675e330a46f77db7b3b3c5935c3cebf53ec5c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "523e2bd0-d33a-449b-bd22-4844d831e580", "node_type": "1", "metadata": {}, "hash": "c7d1bcb50109d4bd0c79b9dd343448274bb21985d60e36d539e5b9abfdc96ecb", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: implicit-accounts\ntitle: Implicit Accounts\nsidebar_label: Implicit Accounts\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n## Background {#background}\n\nImplicit accounts work similarly to Bitcoin/Ethereum accounts.\n - They allow you to reserve an account ID before it's created by generating a ED25519 key-pair locally.\n - This key-pair has a public key that maps to the account ID.\n - The account ID is a lowercase hex representation of the public key.\n - An ED25519 Public key contains 32 bytes that maps to 64 characters account ID.\n - The corresponding secret key allows you to sign transactions on behalf of this account once it's created on chain.\n\n:::info\nYou can find the implicit accounts specification [here](https://nomicon.io/DataStructures/Account.html#implicit-account-ids).\n:::\n\n## Creating an account locally {#creating-an-account-locally}\n\nFor the purpose of this demo, we'll use the `betanet` network.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 956, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "523e2bd0-d33a-449b-bd22-4844d831e580": {"__data__": {"id_": "523e2bd0-d33a-449b-bd22-4844d831e580", "embedding": null, "metadata": {"file_path": "./near_dist/implicit-accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4889eb72-a647-41e3-992e-8480d36ac81f", "node_type": "4", "metadata": {}, "hash": "76e574f78f9103ad88b5cfb9dc3675e330a46f77db7b3b3c5935c3cebf53ec5c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c7a0c5d-9a10-4841-aa89-6508cf77e616", "node_type": "1", "metadata": {}, "hash": "8986b1b6f899dc3f93985ddd9438a9256b57d4690dd03d200d619ccfba7eef89", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "afbe13bf-a2af-4efa-8d53-93a50dca3dab", "node_type": "1", "metadata": {}, "hash": "a4ca085769d3ea73ed4423e6edf23b21b1813b46cd59eff79482a5b578557008", "class_name": "RelatedNodeInfo"}}, "text": "## Set `betanet` network {#set-betanet-network}\n\n```bash\nexport NEAR_ENV=betanet\n```\n\n## Generating the Implicit account\n\n```bash\nnear account create-account fund-later use-auto-generation save-to-folder ~/.near-credentials/implicit\n```\n\nExample Output\n```\nThe file \"~/.near-credentials/testnet/8bca86065be487de45e795b2c3154fe834d53ffa07e0a44f29e76a2a5f075df8.json\" was saved successfully\n\nHere is your console command if you need to script it or re-run:\n    near account create-account fund-later use-auto-generation save-to-folder ~/.near-credentials/implicit\n```\n\n## Using the Implicit Account\nWe can export our account ID to a bash env variable:\n```bash\nexport ACCOUNT=\"8bca86065be487de45e795b2c3154fe834d53ffa07e0a44f29e76a2a5f075df8\"\n```\n\nAssuming you've received tokens on your new account, you can transfer from it using the following command:\n\n<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near send $ACCOUNT <receiver> <amount>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near tokens $ACCOUNT send-near <receiver> '<amount> NEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n## Transferring to the implicit account {#transferring-to-the-implicit-account}\n\nLet's say someone gives you their account ID `0861ea8ddd696525696ccf3148dd706c4fda981c64d8a597490472594400c223`.", "mimetype": "text/plain", "start_char_idx": 959, "end_char_idx": 2328, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "afbe13bf-a2af-4efa-8d53-93a50dca3dab": {"__data__": {"id_": "afbe13bf-a2af-4efa-8d53-93a50dca3dab", "embedding": null, "metadata": {"file_path": "./near_dist/implicit-accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4889eb72-a647-41e3-992e-8480d36ac81f", "node_type": "4", "metadata": {}, "hash": "76e574f78f9103ad88b5cfb9dc3675e330a46f77db7b3b3c5935c3cebf53ec5c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "523e2bd0-d33a-449b-bd22-4844d831e580", "node_type": "1", "metadata": {}, "hash": "c7d1bcb50109d4bd0c79b9dd343448274bb21985d60e36d539e5b9abfdc96ecb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b0aea040-0cbe-44ef-ad3f-4adc0dc4ccb8", "node_type": "1", "metadata": {}, "hash": "07c1d37836fc0416838f0db6d578448bc9454f8fd15a75d1b2775488ea1969ba", "class_name": "RelatedNodeInfo"}}, "text": "You can just transfer to it by running:\n\n<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near send <your_account_id> 0861ea8ddd696525696ccf3148dd706c4fda981c64d8a597490472594400c223 <amount>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near tokens<your_account_id> send-near 0861ea8ddd696525696ccf3148dd706c4fda981c64d8a597490472594400c223 '<amount> NEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n## BONUS: Converting public key using python (for learning purposes) {#bonus-converting-public-key-using-python-for-learning-purposes}\n\nFor this flow we'll use `python3` (with version `3.5+`) with `base58` library.\n\nYou can install this library with `pip3`:\n```bash\npip3 install --user base58\n```\n\nStart python3 interpreter:\n```bash\npython3\n```\n\nThe first thing is to get the data part from the public key (without `ed25519:` prefix). Let's store it in a variable `pk58`:\n```python\npk58 = 'BGCCDDHfysuuVnaNVtEhhqeT4k9Muyem3Kpgq2U1m9HX'\n```\n\nNow let's import base58:\n```python\nimport base58\n```\n\nFinally, let's convert our base58 public key representation to bytes and then to hex:\n```python\nbase58.b58decode(pk58).hex()\n```\n\nOutput:\n```\n'98793cd91a3f870fb126f66285808c7e094afcfc4eda8a970f6648cdf0dbd6de'\n```\n\nThis gives us the same account ID as `near-cli`, so this is encouraging.\n\n**Note:** The default network for `near-cli` is `testnet`. If you would like to change this to `mainnet` or `betanet`, please see [`near-cli` network selection](/tools/near-cli#network-selection) for instructions.", "mimetype": "text/plain", "start_char_idx": 2329, "end_char_idx": 3914, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b0aea040-0cbe-44ef-ad3f-4adc0dc4ccb8": {"__data__": {"id_": "b0aea040-0cbe-44ef-ad3f-4adc0dc4ccb8", "embedding": null, "metadata": {"file_path": "./near_dist/implicit-accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4889eb72-a647-41e3-992e-8480d36ac81f", "node_type": "4", "metadata": {}, "hash": "76e574f78f9103ad88b5cfb9dc3675e330a46f77db7b3b3c5935c3cebf53ec5c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "afbe13bf-a2af-4efa-8d53-93a50dca3dab", "node_type": "1", "metadata": {}, "hash": "a4ca085769d3ea73ed4423e6edf23b21b1813b46cd59eff79482a5b578557008", "class_name": "RelatedNodeInfo"}}, "text": ":::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 3916, "end_char_idx": 4081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "22d18815-5b80-4fda-b6cb-41ace5b37bd5": {"__data__": {"id_": "22d18815-5b80-4fda-b6cb-41ace5b37bd5", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc3a8753-6964-4f3e-93b1-7bbd0add6217", "node_type": "1", "metadata": {}, "hash": "9be7d2ba99a417f9644190b16ed59b3cbfde9b4d382ce96d0d33173ed023e81d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: quick-reference\ntitle: Using JavaScript API to interact with NEAR\nsidebar_label: Using JavaScript API\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n## Quick Reference\n\n- [Installation](#install)\n- [Interacting with the Wallet](naj-wallet.md)\n- [Accounts](naj-account.md)\n- [Contracts](naj-contract.md)\n- [Utilities](naj-utils.md)\n\n## What is `near-api-js`\n\n`near-api-js` is a complete library to interact with the NEAR blockchain. You can use it in the browser, or in Node.js runtime.\n\nYou'll typically first create a connection to NEAR with [`connect`](#connect) using a [`KeyStore`](#key-store).\nWith the connection object you now can:\n\n- Interact with the [Wallet](naj-wallet.md) in a browser.\n- Instantiate an [Account](naj-account.md) object to:\n  - Send tokens\n  - Deploy contracts\n  - Inspect, create or delete accounts\n  - Manage keys for accounts.\n- Instantiate a [Contract](naj-contract.md) object to call smart contract methods.\n\nThe library also contains some [utility functions](naj-utils.md).\n\n:::tip\nTo quickly get started with integrating NEAR in a web browser, read our [Web Frontend integration](/build/web3-apps/integrate-contracts) article.\n:::\n\n:::info\nNote the difference between `near-api-js` and `near-sdk-js`:\n\nThe JavaScript _SDK_ is a library for developing smart contracts. It contains classes and functions you use to write your smart contract code.\n\nThe JavaScript _API_ is a complete library for all possible commands to interact with NEAR. It\u2019s a wrapper for the RPC endpoints, a library to interact with NEAR Wallet in the browser, and a tool for keys management.\n:::\n\n---\n\n## Install {#install}\n\nInclude `near-api-js` as a dependency in your package.\n\n```bash\nnpm i --save near-api-js\n```\n\n## Import {#import}\n\nYou can use the API library in the browser, or in Node.js runtime. Some features are available only in one of the environments.\nFor example, the `WalletConnection` is only for the browser, and there are different `KeyStore` providers for each environment.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2038, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc3a8753-6964-4f3e-93b1-7bbd0add6217": {"__data__": {"id_": "fc3a8753-6964-4f3e-93b1-7bbd0add6217", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "22d18815-5b80-4fda-b6cb-41ace5b37bd5", "node_type": "1", "metadata": {}, "hash": "0faa242593e44cd0a5b134a096d5103ff5ea1e952c8e86245e2c4f32609e02bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dcef93cb-a6d9-4031-b026-5979703d04fc", "node_type": "1", "metadata": {}, "hash": "c57f64692fbf78524f96228acb3cfbde816448dfd99340d9379a6d248cf8ac3d", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"Browser\" label=\"Browser\" default>\n\n```js\nimport * as nearAPI from \"near-api-js\";\n```\n\n</TabItem>\n<TabItem value=\"Node\" label=\"Node\">\n\n```js\nconst nearAPI = require(\"near-api-js\");\n```\n\n</TabItem>\n</Tabs>\n\n## Key Store {#key-store}\n\nIf you sign transactions, you need to create a _Key Store_. In the browser, the LocalStorage KeyStore will be used once you ask your user to Sign In with the Wallet.", "mimetype": "text/plain", "start_char_idx": 2040, "end_char_idx": 2460, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dcef93cb-a6d9-4031-b026-5979703d04fc": {"__data__": {"id_": "dcef93cb-a6d9-4031-b026-5979703d04fc", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc3a8753-6964-4f3e-93b1-7bbd0add6217", "node_type": "1", "metadata": {}, "hash": "9be7d2ba99a417f9644190b16ed59b3cbfde9b4d382ce96d0d33173ed023e81d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f50e3ab7-0ddf-4f04-9353-f04661b96709", "node_type": "1", "metadata": {}, "hash": "037553d3e86a772db95df1d03fb18569140b3cd1f164cf19f47315d6213655f1", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"browser\" label=\"Using Browser\" default>\n\n```js\n// creates keyStore using private key in local storage\n\nconst { keyStores } = nearAPI;\nconst myKeyStore = new keyStores.BrowserLocalStorageKeyStore();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `BrowserLocalStorageKeyStore`](https://near.github.io/near-api-js/classes/_near_js_keystores_browser.browser_local_storage_key_store.BrowserLocalStorageKeyStore.html)\n\n</TabItem>\n<TabItem value=\"dir\" label=\"Using Credentials Directory\">\n\n```js\n// creates a keyStore that searches for keys in .near-credentials\n// requires credentials stored locally by using a NEAR-CLI command: `near login`\n// https://docs.near.org/tools/cli#near-login\n\nconst { keyStores } = nearAPI;\nconst homedir = require(\"os\").homedir();\nconst CREDENTIALS_DIR = \".near-credentials\";\nconst credentialsPath = require(\"path\").join(homedir, CREDENTIALS_DIR);\nconst myKeyStore = new keyStores.UnencryptedFileSystemKeyStore(credentialsPath);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `UnencryptedFileSystemKeyStore`](https://near.github.io/near-api-js/classes/_near_js_keystores_node.unencrypted_file_system_keystore.UnencryptedFileSystemKeyStore.html)\n\n</TabItem>\n<TabItem value=\"file\" label=\"Using a File\">\n\n```js\n// creates keyStore from a provided file\n// you will need to pass the location of the .json key pair\n\nconst { KeyPair, keyStores } = require(\"near-api-js\");\nconst fs = require(\"fs\");\nconst homedir = require(\"os\").homedir();\n\nconst ACCOUNT_ID = \"near-example.testnet\"; // NEAR account tied to the keyPair\nconst NETWORK_ID = \"testnet\";\n// path to your custom keyPair location (ex.", "mimetype": "text/plain", "start_char_idx": 2462, "end_char_idx": 4141, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f50e3ab7-0ddf-4f04-9353-f04661b96709": {"__data__": {"id_": "f50e3ab7-0ddf-4f04-9353-f04661b96709", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dcef93cb-a6d9-4031-b026-5979703d04fc", "node_type": "1", "metadata": {}, "hash": "c57f64692fbf78524f96228acb3cfbde816448dfd99340d9379a6d248cf8ac3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "069d7eaf-2ea6-4fb0-86f2-900aa4648d32", "node_type": "1", "metadata": {}, "hash": "90f2f33c2a1aa784b76bbc69c699e14b092073c142a55334fb345fe05a2c0ae3", "class_name": "RelatedNodeInfo"}}, "text": "function access key for example account)\nconst KEY_PATH = \"/.near-credentials/near-example-testnet/get_token_price.json\";\n\nconst credentials = JSON.parse(fs.readFileSync(homedir + KEY_PATH));\nconst myKeyStore = new keyStores.InMemoryKeyStore();\nmyKeyStore.setKey(\n  NETWORK_ID,\n  ACCOUNT_ID,\n  KeyPair.fromString(credentials.private_key)\n);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `InMemoryKeyStore`](https://near.github.io/near-api-js/classes/_near_js_keystores.in_memory_key_store.InMemoryKeyStore.html)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `KeyPair`](https://near.github.io/near-api-js/classes/_near_js_crypto.key_pair.KeyPair.html)\n\n</TabItem>\n<TabItem value=\"key\" label=\"Using a private key string\">\n\n```js\n// creates keyStore from a private key string\n// you can define your key here or use an environment variable\n\nconst { keyStores, KeyPair } = nearAPI;\nconst myKeyStore = new keyStores.InMemoryKeyStore();\nconst PRIVATE_KEY =\n  \"by8kdJoJHu7uUkKfoaLd2J2Dp1q1TigeWMG123pHdu9UREqPcshCM223kWadm\";\n// creates a public / private key pair using the provided private key\nconst keyPair = KeyPair.fromString(PRIVATE_KEY);\n// adds the keyPair you created to keyStore\nawait myKeyStore.setKey(\"testnet\", \"example-account.testnet\", keyPair);\n```\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `InMemoryKeyStore`](https://near.github.io/near-api-js/classes/_near_js_keystores.in_memory_key_store.InMemoryKeyStore.html)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `KeyPair`](https://near.github.io/near-api-js/classes/_near_js_crypto.key_pair.KeyPair.html)\n\n</TabItem>\n</Tabs>\n\n## Connecting to NEAR {#connect}\n\nThe object returned from `connect` is your entry-point for all commands in the API.\nTo sign a transaction you'll need a [`KeyStore`](#key-store) to create a connection.", "mimetype": "text/plain", "start_char_idx": 4142, "end_char_idx": 6051, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "069d7eaf-2ea6-4fb0-86f2-900aa4648d32": {"__data__": {"id_": "069d7eaf-2ea6-4fb0-86f2-900aa4648d32", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f50e3ab7-0ddf-4f04-9353-f04661b96709", "node_type": "1", "metadata": {}, "hash": "037553d3e86a772db95df1d03fb18569140b3cd1f164cf19f47315d6213655f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d77333b9-a63b-494d-a1ba-59372829b6e2", "node_type": "1", "metadata": {}, "hash": "fc07fa33765346b19097fdf5804e002c69068adbbfe122c79786572dc30b2552", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"testnet\" label=\"TestNet\" default>\n\n```js\nconst { connect } = nearAPI;\n\nconst connectionConfig = {\n  networkId: \"testnet\",\n  keyStore: myKeyStore, // first create a key store\n  nodeUrl: \"https://rpc.testnet.near.org\",\n  walletUrl: \"https://testnet.mynearwallet.com/\",\n  helperUrl: \"https://helper.testnet.near.org\",\n  explorerUrl: \"https://testnet.nearblocks.io\",\n};\nconst nearConnection = await connect(connectionConfig);\n```\n\n</TabItem>\n<TabItem value=\"mainnet\" label=\"MainNet\">\n\n```js\nconst { connect } = nearAPI;\n\nconst connectionConfig = {\n  networkId: \"mainnet\",\n  keyStore: myKeyStore, // first create a key store\n  nodeUrl: \"https://rpc.mainnet.near.org\",\n  walletUrl: \"https://wallet.mainnet.near.org\",\n  helperUrl: \"https://helper.mainnet.near.org\",\n  explorerUrl: \"https://nearblocks.io\",\n};\nconst nearConnection = await connect(connectionConfig);\n```\n\n</TabItem>\n\n<TabItem value=\"localnet\" label=\"LocalNet\">\n\n```js\nconst { connect } = nearAPI;\nconst connectionConfig = {\n  networkId: \"local\",\n  nodeUrl: \"http://localhost:3030\",\n  walletUrl: \"http://localhost:4000/wallet\",\n};\nconst nearConnection = await connect(connectionConfig);\n```\n\n</TabItem>\n</Tabs>\n\n[<span className=\"typedoc-icon typedoc-icon-module\"></span> Module `connect`](https://near.github.io/near-api-js/modules/near_api_js.connect.html)\n\n## RPC Failover\n\nRPC providers can experience intermittent downtime, connectivity issues, or rate limits that cause client transactions to fail. This can be prevented by using the `FailoverRpcProvider` that supports multiple RPC providers.", "mimetype": "text/plain", "start_char_idx": 6053, "end_char_idx": 7632, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d77333b9-a63b-494d-a1ba-59372829b6e2": {"__data__": {"id_": "d77333b9-a63b-494d-a1ba-59372829b6e2", "embedding": null, "metadata": {"file_path": "./near_dist/quick-reference.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65101921-5443-4ca0-8d91-1785635df910", "node_type": "4", "metadata": {}, "hash": "e8d165dc99bc53a4ec9f5be881ea40df4ad32f4a25955f709482610196dbf5f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "069d7eaf-2ea6-4fb0-86f2-900aa4648d32", "node_type": "1", "metadata": {}, "hash": "90f2f33c2a1aa784b76bbc69c699e14b092073c142a55334fb345fe05a2c0ae3", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"mainnet\" label=\"MainNet\">\n\n```js\nconst jsonProviders = [\n  new JsonRpcProvider({\n    url: 'https://rpc.mainnet.near.org',\n  }),\n  new JsonRpcProvider(\n    {\n      url: 'https://another-rpc.cloud.com',\n      headers: { 'X-Api-Key': 'some string' },\n    },\n    { retries: 3, backoff: 2, wait: 500 }\n  ),\n];\nconst provider = new FailoverRpcProvider(jsonProviders);\n\nawait connect({\n  networkId: 'mainnet',\n  provider: provider,\n  // this isn't used if `provider` is specified, but is still required for backward compatibility\n  nodeUrl: 'https://rpc.mainnet.near.org',\n});\n```\n\n</TabItem>\n\n</Tabs>\n\n\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `FailoverRpcProvider `](https://near.github.io/near-api-js/classes/near_api_js.providers_failover_rpc_provider.FailoverRpcProvider.html)", "mimetype": "text/plain", "start_char_idx": 7634, "end_char_idx": 8455, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8bdaf7bd-cc4d-4077-934a-84d61ef49268": {"__data__": {"id_": "8bdaf7bd-cc4d-4077-934a-84d61ef49268", "embedding": null, "metadata": {"file_path": "./near_dist/2024-04-23.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ff765b7b-7110-4f5d-a9c7-16a8e50f185f", "node_type": "4", "metadata": {}, "hash": "bc74bd49c21d75018e4be6598d622b8f33f402c20efdfafa0507fe7a8305fb5c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08274152-bcff-4fb8-92f3-44382c1ddcaa", "node_type": "1", "metadata": {}, "hash": "700aeca2a7491126fff920763cf749da5c124d9e91d10b51c3d8fc2c51c41849", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: We have a blog now!\nauthors: [gagdiez]\nslug: we-have-a-blog\ntags: [updates]\n---\n\n*Check check check. Is this thing on? Hello, world!*\n\n<p><img src=\"/assets/images/protocol-b73c2a3ace3307226ee7eb2149ee432f.png\" /></p>\n\n<!-- truncate -->\n\n## Hello there!\nWelcome to the new NEAR documentation blog! We're excited to inaugurate this new space where we can share news and updates. We know what you are thinking \u2014 why a blog? Well, it allows us to interact with you in a different way!\n\nWhen writing documentation, it is important for us to keep the content focused and concise. This way, when you read it, you have nothing to distract you, and you can focus on learning a new concept.\n\nThe problem with this is that many times, we want to share ideas, thoughts, or insights into why some things are the way they are. However, this would imply going off on a tangent and explaining why some decisions were made, which will probably add noise to the document. Most of the time, users just want a link to an example or working code. Also, people don't like to read long texts.\n\nBesides that, sometimes we just want to share what we did during the week. For example, did you notice that we fixed the nightmare that was the URL structure, or that we added new landing pages for all concepts? We want to share these things with you, but they don't really belong in the Docs.\n\n:::tip\nYou would not believe the number of times we said during a review _\"let's remove that, we are writing technical documentation, not a blog post\"_ ... well, now we can make the blog post!\n:::\n\n## What to expect\n\nWe will be using this space to share updates about our docs, as well as **complement them** with additional information that we think you'll find interesting.\n\nOur aim is to keep the blog updated at least once a week, but given the limited amount of time we have, we will see how that goes.\n\nMoreover, we want to remind you that our Docs are an open source and **collaborative project**. If you feel like you have something to share, or want to contribute to the blog, feel free to reach out.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2086, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08274152-bcff-4fb8-92f3-44382c1ddcaa": {"__data__": {"id_": "08274152-bcff-4fb8-92f3-44382c1ddcaa", "embedding": null, "metadata": {"file_path": "./near_dist/2024-04-23.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ff765b7b-7110-4f5d-a9c7-16a8e50f185f", "node_type": "4", "metadata": {}, "hash": "bc74bd49c21d75018e4be6598d622b8f33f402c20efdfafa0507fe7a8305fb5c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8bdaf7bd-cc4d-4077-934a-84d61ef49268", "node_type": "1", "metadata": {}, "hash": "c01b4ce50f1d02ffb6d566a7a5ef1105c9096dae20f00460bfd2fa9eb56c1e98", "class_name": "RelatedNodeInfo"}}, "text": "And by reaching out, we mean [opening a PR](https://github.com/near/docs/pulls)!\n\n## A new era for NEAR docs\n\nWe are super excited to start this new section and hope it helps us to connect with all of you in a better way. We are looking forward to hearing your thoughts and feedback, and hope you enjoy the content we'll be sharing.\n\nSee you in the next post! \ud83d\ude80", "mimetype": "text/plain", "start_char_idx": 2087, "end_char_idx": 2448, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68d844ec-7273-4b94-8b14-22654a594f58": {"__data__": {"id_": "68d844ec-7273-4b94-8b14-22654a594f58", "embedding": null, "metadata": {"file_path": "./near_dist/send.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3d0e772a-22eb-41c0-bc12-a4bf095cb7ba", "node_type": "4", "metadata": {}, "hash": "aa19bfa5ec7b2f37709d5cad1612c63d3dec9a42e7a84dda33294d703ffd8743", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call token.v2.ref-finance.near ft_transfer '{\"receiver_id\": \"alice.near\", \"amount\": \"100000000000000000\"}' --depositYocto 1 --accountId bob.near\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 161, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73d97eff-cbb2-474c-b6db-c9f87adb08e0": {"__data__": {"id_": "73d97eff-cbb2-474c-b6db-c9f87adb08e0", "embedding": null, "metadata": {"file_path": "./near_dist/get-pools.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e1bd346f-3b53-462d-94a0-6803dccca798", "node_type": "4", "metadata": {}, "hash": "89e6b250d8e5a89aa32275ed01f100837f6076b7568f0ed8e7bd7218c9762d7a", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view v2.ref-finance.near get_pools '{\"from_index\": 0, \"limit\": 1000}'\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n[\n  {\n    pool_kind: 'SIMPLE_POOL',\n    token_account_ids: [ 'token.skyward.near', 'wrap.near' ],\n    amounts: [ '51865812079751349630100', '6254162663147994789053210138' ],\n    total_fee: 30,\n    shares_total_supply: '1305338644973934698612124055',\n    amp: 0\n  },\n  {\n    pool_kind: 'SIMPLE_POOL',\n    token_account_ids: [\n      'c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2.factory.bridge.near',\n      'wrap.near'\n    ],\n    amounts: [ '783621938569399817', '1100232280852443291118200599' ],\n    total_fee: 30,\n    shares_total_supply: '33923015415693335344747628',\n    amp: 0\n  }\n]\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 750, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "12bfaeb7-a008-411a-9e37-bf457aea9700": {"__data__": {"id_": "12bfaeb7-a008-411a-9e37-bf457aea9700", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3d6565b-0870-4a28-9e95-f849aa99e587", "node_type": "1", "metadata": {}, "hash": "d6832507defce7fc3c484de3fddf4f89e02d8c883b1b2c8f6e3ae76b8e23c17e", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: registering-accounts\ntitle: Registering Accounts\nsidebar_label: Registering Accounts\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn the previous tutorial, you looked at how to mint an initial circulating supply of tokens and how you could log events as per the [events standard](https://nomicon.io/Standards/Tokens/FungibleToken/Event). You then deployed the contract and saw the FTs in your wallet balance. In this tutorial, you'll learn about the [storage management](https://nomicon.io/Standards/StorageManagement) standard and how you can register accounts in your FT contract in order to prevent a malicious party from draining your contract of all its funds.\n\n---\n\n## Introduction\n\nWhenever a new person receives any fungible tokens, they're added to the `accounts` lookup map on the contract. By doing this, you're adding bytes to the contract. If you made it so any user could receive FTs for free, that system could easily be abused. Users could essentially \"drain\" the contract of all it's funds by sending small amounts of FTs to many accounts. For this reason, you'll want to charge users for the information they're storing and the bytes they're using on the contract. This way of charging users, however, should be standardized so it works across all contracts.\n\n*Enter the [storage management](https://nomicon.io/Standards/StorageManagement) standard*\n\n<img width=\"65%\" src=\"/docs/assets/fts/storage-standard-meme.png\" />\n\n<hr className=\"subsection\" />\n\n### Storage Management Standard\n\nThe storage management standard is a set of rules that govern how a contract should charge users for storage. It outlines functions and behaviors such that all contracts implementing the standard are interoperable with each other. The 3 functions you'll need to implement are:\n- **`storage_deposit`** - Allows a user to deposit some amount of storage to the contract. If the user over deposits, they're refunded for the excess $NEAR.\n- **`storage_balance_of`** - Query for the storage paid by a given user\n- **`storage_balance_bounds`** - Query for the minimum and maximum amount of storage needed to interact with a given contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2227, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c3d6565b-0870-4a28-9e95-f849aa99e587": {"__data__": {"id_": "c3d6565b-0870-4a28-9e95-f849aa99e587", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "12bfaeb7-a008-411a-9e37-bf457aea9700", "node_type": "1", "metadata": {}, "hash": "b1cb203ebf3811475096fb75ee94d73876f9fc30a62d3016c0353576132eb5d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d19853e8-6784-48fa-94ff-425b5ec45912", "node_type": "1", "metadata": {}, "hash": "4da5fe9be4441802391eb9c59cc8471442012353bc14d11f98314f95aab264f6", "class_name": "RelatedNodeInfo"}}, "text": "With these functions outlined, you could make a reasonable assumption that the flow would be:\n1. If a user doesn't exist on the contract, they need to deposit some storage to cover the bytes they use.\n2. Once the user deposits $NEAR via the `storage_deposit` function, they're free to interact with the contract.\n\nYou might be asking yourself what the deposit amount should be. There are two ways you can go about getting this information:\n- Dynamically calculate the bytes every individual user would take up in the `storage_deposit` function by inserting them into `accounts` map, measuring the bytes, and then removing them from the map after.\n- Calculate the bytes for inserting a largest possible account ID once upon initializing the contract and simply charge every user the same amount.\n\nFor the purpose of simplicity, we'll assume the second method.\n\n---\n\n## Modifications to the Contract\n\nThis \"bytes for longest account ID\" should be stored in the contract's state such that we can pull the value during the `storage_deposit` function and ensure the user attaches enough $NEAR. Open the `src/lib.rs` file and add the following code to the `Contract` struct. If you're just joining us now, you can find the skeleton code for this tutorial in the `3.initial-supply` folder.\n\n<Github language=\"rust\" start=\"23\" end=\"35\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/lib.rs\" />\n\nYou'll now need a way to calculate this amount which will be done in the initialization function. Move to the `src/internal.rs` file and add the following private function `measure_bytes_for_longest_account_id` which will add the longest possible account ID and remove it while measuring how many bytes the operation took. It will then set the `bytes_for_longest_account_id` field to the result.\n\n<Github language=\"rust\" start=\"38\" end=\"46\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/internal.rs\" />\n\nYou'll also want to create a function for _registering_ an account after they've paid for storage. To do this, you can simply insert them into the `accounts` map with a balance of 0. This way, you know that any account currently in the map is considered \"registered\" and have paid for storage.", "mimetype": "text/plain", "start_char_idx": 2229, "end_char_idx": 4468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d19853e8-6784-48fa-94ff-425b5ec45912": {"__data__": {"id_": "d19853e8-6784-48fa-94ff-425b5ec45912", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3d6565b-0870-4a28-9e95-f849aa99e587", "node_type": "1", "metadata": {}, "hash": "d6832507defce7fc3c484de3fddf4f89e02d8c883b1b2c8f6e3ae76b8e23c17e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9", "node_type": "1", "metadata": {}, "hash": "f54e26f3d06776d31bb6f0a831e6f7d59e9617dccc21db392df147c5f51f72a5", "class_name": "RelatedNodeInfo"}}, "text": "Any account that attempts to receive FTs must be in the map with a balance of 0 or greater. If they aren't, the contract should throw.\n\n<Github language=\"rust\" start=\"31\" end=\"36\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/internal.rs\" />\n\nLet's also create a function to panic with a custom message if the user doesn't exist yet.\n\n<Github language=\"rust\" start=\"8\" end=\"16\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/internal.rs\" />\n\nNow when you call the `internal_deposit` function, rather than defaulting the user's balance to `0` if they don't exist yet via:\n\n```rust\nlet balance = self.accounts.get(&account_id).unwrap_or(0);\n```\nYou can replace it with the following:\n\n<Github language=\"rust\" start=\"18\" end=\"29\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/internal.rs#L16-L27\" />\n\nWith this finished, your `internal.rs` should look as follows:\n\n```rust\nuse near_sdk::{require};\n\nuse crate::*;\n\nimpl Contract {\n    pub(crate) fn internal_unwrap_balance_of(&self, account_id: &AccountId) -> Balance {\n      ...\n    }\n\n    pub(crate) fn internal_deposit(&mut self, account_id: &AccountId, amount: Balance) {\n      ...\n    }\n\n    pub(crate) fn internal_register_account(&mut self, account_id: &AccountId) {\n      ...\n    }\n\n    pub(crate) fn measure_bytes_for_longest_account_id(&mut self) {\n      ...\n    }\n}\n```\n\nThere's only one problem you need to solve with this. When initializing the contract, the implementation will throw. This is because you call `internal_deposit` and the owner doesn't have a balance yet. To fix this, let's modify the initialization function to register the owner before depositing the FTs in their account. In addition, you should measure the bytes for the registration in this function.", "mimetype": "text/plain", "start_char_idx": 4469, "end_char_idx": 6283, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9": {"__data__": {"id_": "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d19853e8-6784-48fa-94ff-425b5ec45912", "node_type": "1", "metadata": {}, "hash": "4da5fe9be4441802391eb9c59cc8471442012353bc14d11f98314f95aab264f6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c814fc4e-684b-4cb6-bfc2-67623acde480", "node_type": "1", "metadata": {}, "hash": "a0c345458c60ab6c9311ff2ab0d75ca306440e342dfba3c497e543a4ce9f1562", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"70\" end=\"110\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/lib.rs\" />\n\n<hr className=\"subsection\" />\n\n### Implementing Storage Standard\n\nWith this finished, you're now ready to implement the storage management standard. If you remember, the three functions you'll be implementing, we can break each down into their core functionality and decide how to proceed.\n\n- **`storage_balance_bounds`** - Query for the minimum and maximum amount of storage needed to interact with a given contract.\n\nSince you're creating a fungible token contract and the storage price won't change (unless the `$NEAR` cost per byte changes), the minimum and maximum storage costs should be the same. These values should be equal to the amount of bytes for the longest account ID you calculated in the `measure_bytes_for_longest_account_id` function multiplied by the current `$NEAR` price per byte. Switch to the `src/storage.rs` file to get started.\n\n<Github language=\"rust\" start=\"120\" end=\"130\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/storage.rs\" />\n\n- **`storage_balance_of`** - Query for the storage paid by a given user.\n\nAs we mentioned earlier, you can tell if somebody has paid for storage by checking if they're in the `accounts` map. If they are, you know that they've paid the amount returned by `storage_balance_bounds`.\n\n<Github language=\"rust\" start=\"132\" end=\"139\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/storage.rs\" />\n\n- **`storage_deposit`** - Allows a user to deposit some amount of storage to the contract. If the user over deposits, they're refunded for the excess $NEAR.\n\nIn order to implement this logic, you first need to get the attached deposit. You'll also need to ensure that the user hasn't already paid for storage (i.e. they're in the `accounts` map). If they are, simply refund the caller for the $NEAR they attached to the call.\n\nIf the user isn't registered yet, you should get the storage cost by calling `storage_balance_bounds` and make sure they've attached enough to cover that amount.", "mimetype": "text/plain", "start_char_idx": 6285, "end_char_idx": 8413, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c814fc4e-684b-4cb6-bfc2-67623acde480": {"__data__": {"id_": "c814fc4e-684b-4cb6-bfc2-67623acde480", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9", "node_type": "1", "metadata": {}, "hash": "f54e26f3d06776d31bb6f0a831e6f7d59e9617dccc21db392df147c5f51f72a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29568542-6298-41e6-9efe-1108136bac0b", "node_type": "1", "metadata": {}, "hash": "b93c3086417a36d09b628086678662ab3697795647d5a3cff140a3c71b68d39b", "class_name": "RelatedNodeInfo"}}, "text": "Once this if finished, you can register them and refund any excess $NEAR.\n\n<Github language=\"rust\" start=\"81\" end=\"118\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/4.storage/src/storage.rs\" />\n\nWith this finished, you're ready to build and deploy the contract!\n\n---\n\n## Deploying the contract {#redeploying-contract}\n\nSince the current contract you have is already initialized, let's create a sub-account and deploy to again.\n\n### Creating a sub-account\n\nRun the following command to create a sub-account `storage` of your main account with an initial balance of 3 NEAR which will be transferred from the original to your new account.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near create-account storage.$FT_CONTRACT_ID --use-account $FT_CONTRACT_ID --initial-balance 3 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account create-account fund-myself storage.$FT_CONTRACT_ID '3 NEAR' autogenerate-new-keypair save-to-keychain sign-as $FT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport STORAGE_FT_CONTRACT_ID=storage.$FT_CONTRACT_ID\n```\n\nBuild the contract as you did in the previous tutorials:\n\n```bash\ncd 3.initial-supply\ncargo near build\n```\n\n<hr className=\"subsection\" />\n\n### Deploying and Initialization {#deploying-initialization}\n\nIt's time to deploy the contract, initialize it and mint the total supply. Let's once again create an initial supply of 1000 `gtNEAR`.\n\n```bash\ncargo near deploy $STORAGE_FT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$STORAGE_FT_CONTRACT_ID'\", \"total_supply\": \"1000000000000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nIf you now query for the storage paid by the owner, you should see that they're registered!", "mimetype": "text/plain", "start_char_idx": 8414, "end_char_idx": 10409, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "29568542-6298-41e6-9efe-1108136bac0b": {"__data__": {"id_": "29568542-6298-41e6-9efe-1108136bac0b", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c814fc4e-684b-4cb6-bfc2-67623acde480", "node_type": "1", "metadata": {}, "hash": "a0c345458c60ab6c9311ff2ab0d75ca306440e342dfba3c497e543a4ce9f1562", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1c73ea86-afa2-45df-9107-a904795a8253", "node_type": "1", "metadata": {}, "hash": "a4d073119f778f3549e2889152c913d0fcab54e562fd415559d844248344ea31", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $STORAGE_FT_CONTRACT_ID storage_balance_of '{\"account_id\": \"'$STORAGE_FT_CONTRACT_ID'\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $STORAGE_FT_CONTRACT_ID storage_balance_of json-args '{\"account_id\": \"'$STORAGE_FT_CONTRACT_ID'\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nThis should return a struct. The Total amount is roughly `0.00125 $NEAR` to register and the user has 0 available $NEAR since it's all being used up to pay for registration.\n\n```js\n{ total: '1250000000000000000000', available: '0' }\n```\n\nYou can also query for the storage balance required to interact with the contract:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $STORAGE_FT_CONTRACT_ID storage_balance_bounds '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $STORAGE_FT_CONTRACT_ID storage_balance_bounds json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nYou'll see that it returns the same amount as the `storage_balance_of` query above with the min equal to the max:\n\n```js\n{ min: '1250000000000000000000', max: '1250000000000000000000' }\n```\n\n---\n\n## Conclusion\n\nToday you went through and created the logic for registering users on the contract. This logic adheres to the [storage management standard](https://nomicon.io/Standards/StorageManagement) and is customized to meet our needs when writing a FT contract. You then built, deployed, and tested those changes. In the [next tutorial](5.transfers.md), you'll look at the basics of how to transfer FTs to other users.", "mimetype": "text/plain", "start_char_idx": 10411, "end_char_idx": 12212, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1c73ea86-afa2-45df-9107-a904795a8253": {"__data__": {"id_": "1c73ea86-afa2-45df-9107-a904795a8253", "embedding": null, "metadata": {"file_path": "./near_dist/4.storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e", "node_type": "4", "metadata": {}, "hash": "504b3541a7499c8433cb42038a42f4a529b6c4f65be4ba9d9af82f406f513bf4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29568542-6298-41e6-9efe-1108136bac0b", "node_type": "1", "metadata": {}, "hash": "b93c3086417a36d09b628086678662ab3697795647d5a3cff140a3c71b68d39b", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-sdk-rs: `5.1.0` (with enabled `legacy` feature)\n- cargo-near: `0.6.1`\n- near-cli-rs: `0.11.0`\n:::", "mimetype": "text/plain", "start_char_idx": 12214, "end_char_idx": 12455, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5802cd94-ecca-486f-bf9c-44f43cdd45ca": {"__data__": {"id_": "5802cd94-ecca-486f-bf9c-44f43cdd45ca", "embedding": null, "metadata": {"file_path": "./near_dist/exchange-integration.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a7c6b853-691e-4b4a-8427-7056c4925b1f", "node_type": "4", "metadata": {}, "hash": "1dd460d5c96f229cb2b59e58a98a372e42ae428628459a5fe52baa6a2e75a827", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29da7bdd-e893-4630-8ad9-f4b34bcee24b", "node_type": "1", "metadata": {}, "hash": "b261b3ab837c6d44c45eae6f8c61b674661762a8beacce78b70225418428228b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: exchange-integration\ntitle: Exchange Integration\nsidebar_label: Exchange Integration\n---\n\n## Integration Reference {#integration-reference}\n\n- [Balance Changes](/integrations/balance-changes)\n- [Accounts](/integrations/accounts)\n- [Fungible Tokens](/integrations/fungible-tokens)\n- [Implicit Accounts](/integrations/implicit-accounts)\n\n### Transaction Reference Links {#transaction-reference-links}\n\n - [Basics](/concepts/protocol/transactions)\n - [Specifications](https://nomicon.io/RuntimeSpec/Transactions)\n - [Constructing Transactions](/integrations/create-transactions)\n\n## Blocks and Finality {#blocks-and-finality}\n\nSome important pieces of information regarding blocks and finality include:\n\n- Expected block time is around 1s and expected time to finality is around 2s. The last final block can be queried by\n  specifying `{\"finality\": \"final\"}` in the block query. For example, to get the latest final block on mainnet, one can run\n\n```bash\nhttp post https://rpc.mainnet.near.org method=block params:='{\"finality\":\"final\"}' id=123 jsonrpc=2.0\n```\n\n- Block height are not necessarily continuous and certain heights may be skipped if, for example, a block producer for that height is offline. For example, after a block at height 100 is produced, the block at height 101 may be skipped. When block at height 102 is produced, its previous block is the block at height 100.\n\n- Some blocks may not include new chunks if, for example, the previous chunk producer is offline. Even though in the RPC\n  return result every block will have non-empty `chunks` field, it does not imply that there is a new chunk included in the block.\n  The way to tell whether the chunk is included in the block is to check whether `height_included` in the chunk is the same\n  as the height of the block.\n\n## Running an Archival Node {#running-an-archival-node}\nPlease refer to configuration changes required in `config.json` for archival node by referring to the documentation on [Run an Archival Node](https://near-nodes.io/archival/run-archival-node-with-nearup).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2057, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "29da7bdd-e893-4630-8ad9-f4b34bcee24b": {"__data__": {"id_": "29da7bdd-e893-4630-8ad9-f4b34bcee24b", "embedding": null, "metadata": {"file_path": "./near_dist/exchange-integration.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a7c6b853-691e-4b4a-8427-7056c4925b1f", "node_type": "4", "metadata": {}, "hash": "1dd460d5c96f229cb2b59e58a98a372e42ae428628459a5fe52baa6a2e75a827", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5802cd94-ecca-486f-bf9c-44f43cdd45ca", "node_type": "1", "metadata": {}, "hash": "7b2feac40e1cbc8e40f62ca244b0057fcf97c0eb491587916c6d83f7e5667c3f", "class_name": "RelatedNodeInfo"}}, "text": "## Staking and Delegation {#staking-and-delegation}\n\n- [https://github.com/nearprotocol/stakewars](https://github.com/nearprotocol/stakewars)\n- [https://github.com/near/core-contracts](https://github.com/near/core-contracts)\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 2059, "end_char_idx": 2450, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "69a73545-fcc4-447e-944a-d855ef0f755f": {"__data__": {"id_": "69a73545-fcc4-447e-944a-d855ef0f755f", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fa835245-b6f2-4ea6-8a8c-f106c48983fa", "node_type": "1", "metadata": {}, "hash": "757554639beca6ad13e6b22bcefa7bda064ba3c275f69d860c7641bbb43ee3e3", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: primitives\ntitle: NEAR Lake Primitive Types\nsidebar_label: Lake Primitive Types\n---\n\n# NEAR Lake Primitive Types\n\nThis article contains the primitive types used by the [NEAR Lake Framework package](https://www.npmjs.com/package/@near-lake/framework). These types are used to define the data structures used by the framework as well as provide some popular helper functions.\n\n## `Block`\n\n:::info Important Notes on `Block`\n\n- All the entities located on different shards were merged into one single list without differentiation.\n- `Block` is not the fairest name for this structure either. NEAR Protocol is a sharded blockchain, so its block is actually an ephemeral structure that represents a collection of real blocks called chunks in NEAR Protocol.\n\n:::\n\n### `Block` Structure Definition\n\nThe `Block` type is used to represent a block in the NEAR Lake Framework. It is comprised by the following structure:\n\n```ts\nexport class Block {\n    constructor(\n        readonly streamerMessage: StreamerMessage,\n        private executedReceipts: Receipt[],\n        readonly postponedReceipts: Receipt[],\n        readonly transactions: Transaction[],\n        private _actions: Map<string, Action>,\n        private _events: Map<string, Event[]>,\n        private _stateChanges: StateChange[]) { \n\n        }\n    ... // helper methods and getters omitted for brevity\n}\n```\n\n#### `streamerMessage`\n\nLow-level structure for backward compatibility. As implemented in previous versions of [`near-lake-framework`](https://www.npmjs.com/package/near-lake-framework). \n\n#### `postponedReceipts`\n\nReceipts included on the chain but not executed yet marked as \u201cpostponed\u201d: they are represented by the same structure `Receipt` (see the corresponding section in this doc for more details).\n\n#### `transactions`\n\nList of included `Transactions`, converted into `Receipts`.\n\n:::info Heads up!\n\n**Note:**  You might want to know about `Transactions` to know where the action chain has begun. Unlike Ethereum, where a Transaction contains everything you may want to know about a particular interaction on  the Ethereum blockchain, Near Protocol because of its asynchronous nature converts a `Transaction` into a `Receipt` before executing it. Thus, On NEAR, `Receipts` are more important for figuring out what happened on-chain as a result of a Transaction signed by a user.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2356, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fa835245-b6f2-4ea6-8a8c-f106c48983fa": {"__data__": {"id_": "fa835245-b6f2-4ea6-8a8c-f106c48983fa", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69a73545-fcc4-447e-944a-d855ef0f755f", "node_type": "1", "metadata": {}, "hash": "9e87101f0138f02596da52664274edad536f019df096a93c47a21a4699401d40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b22cdcce-dee7-4963-8deb-62de84287bd1", "node_type": "1", "metadata": {}, "hash": "ace49b268d2be4d879788f3cd16e47f0ea5ada5b791a00d13f28819c28419724", "class_name": "RelatedNodeInfo"}}, "text": "Read more about [Transactions on Near](https://nomicon.io/RuntimeSpec/Transactions) here.\n\n:::\n\n### `Block` Helper Methods\n\n```ts\nexport class Block {\n    ... // constructor omitted for brevity\n    get blockHash(): string {}\n    get prevBlockHash(): string {}\n    get blockHeight(): number {}\n\n    header(): BlockHeader {}\n    receipts(): Receipt[] {}\n    actions(): Action[] {}\n    events(): Event[] {}\n    stateChanges(): StateChange[] {}\n\n    actionByReceiptId(receipt_id: string): Action | undefined {}\n    eventsByReceiptId(receipt_id: string): Event[] {}\n    eventsByAccountId(account_id: string): Event[] {}\n\n    private buildActionsHashmap() {}\n    private buildEventsHashmap(): Map<string, Event[]> {}\n\n    static fromStreamerMessage(streamerMessage: StreamerMessage): Block {}\n}\n```\n\n#### `blockHash`\n\nReturns the block hash. A shortcut to get the data from the block header.\n\n#### `prevBlockHash`\n\nReturns the previous block hash. A shortcut to get the data from the block header.\n\n#### `blockHeight`\n\nReturns the block height. A shortcut to get the data from the block header.\n\n#### `header(): BlockHeader`\n\nReturns a `BlockHeader` structure of the block\n\nSee `BlockHeader` structure sections for details.\n\n#### `receipts(): Receipt[]`\n\nReturns a slice of `Receipts` executed in the block.\n\nBasically is a getter for the `executedReceipts` field.\n\n#### `actions(): Action[]`\n\nReturns an Array of `Actions` executed in the block.\n\n#### `events(): Event[]`\n\nReturns `Events` emitted in the block.\n\n#### `stateChanges(): StateChange[]`\n\nReturns an Array of `StateChange` occurred in the block.\n\n#### `actionByReceiptId(receipt_id: string): Action | undefined`\n\nReturns `Action`s of the provided `receipt_id` from the block if any. Returns `undefined` if there is no corresponding `Action`.\n\nThis method uses the internal `Block` `action` field which is empty by default and will be filled with the block\u2019s actions on the first call to optimize memory usage.\n\nThe result is either `Action | undefined` since there might be a request for an `Action` by `receipt_id` from another block, in which case this method will be unable to find the `Action` in the current block.", "mimetype": "text/plain", "start_char_idx": 2357, "end_char_idx": 4533, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b22cdcce-dee7-4963-8deb-62de84287bd1": {"__data__": {"id_": "b22cdcce-dee7-4963-8deb-62de84287bd1", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fa835245-b6f2-4ea6-8a8c-f106c48983fa", "node_type": "1", "metadata": {}, "hash": "757554639beca6ad13e6b22bcefa7bda064ba3c275f69d860c7641bbb43ee3e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ca120f32-0977-40e8-823e-ce1432f68c5f", "node_type": "1", "metadata": {}, "hash": "74c13080716b4b19ef7fbddf538a3e6b9691702f3239fe47ac160b8c139db0c8", "class_name": "RelatedNodeInfo"}}, "text": "In the other case, the request might be for an `Action` for a `receipt_id` that belongs to a `DataReceipt` where an action does not exist.\n\n#### `eventsByReceiptId(receipt_id: string): Event[]`\n\nReturns an Array of Events emitted by `ExecutionOutcome` for the given `receipt_id`. There might be more than one `Event` for the `Receipt` or there might be none of them. In the latter case, this method returns an empty Array.\n\n#### `eventsByAccountId(account_id: string): Event[]`\n\nReturns an Array of Events emitted by `ExecutionOutcome` for the given `account_id`. There might be more than one `Event` for the `Receipt` or there might be none of them. In the latter case, this method returns an empty Array.\n\n---\n\n## `BlockHeader`\n\nReplacement for `BlockHeaderView` from `near-primitives`. Shrunken and simplified. \n\n:::note\nThe original `BlockHeaderView` is still accessible via the `.streamerMessage` attribute.\n:::\n\n### `BlockHeader` Structure Definition\n\n```ts\nexport class BlockHeader {\n    constructor(\n        readonly height: number,\n        readonly hash: string,\n        readonly prevHash: string,\n        readonly author: string,\n        readonly timestampNanosec: string,\n        readonly epochId: string,\n        readonly nextEpochId: string,\n        readonly gasPrice: string,\n        readonly totalSupply: string,\n        readonly latestProtocolVersion: number,\n        readonly randomValue: string,\n        readonly chunksIncluded: number,\n        readonly validatorProposals: ValidatorStakeView[]) { \n        }\n    ... // helper method omitted for brevity\n}\n```\n\n---\n\n## `Receipt`\n\nThis field is a simplified representation of the `ReceiptView` structure from `near-primitives`.\n\n### `Receipt` Structure Definition\n\n```ts\nexport class Receipt implements Events {\n  constructor(\n    readonly receiptKind: ReceiptKind, \n    readonly receiptId: string, \n    readonly receiverId: string, \n    readonly predecessorId: string, \n    readonly status: ExecutionStatus, \n    readonly executionOutcomeId?", "mimetype": "text/plain", "start_char_idx": 4534, "end_char_idx": 6543, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ca120f32-0977-40e8-823e-ce1432f68c5f": {"__data__": {"id_": "ca120f32-0977-40e8-823e-ce1432f68c5f", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b22cdcce-dee7-4963-8deb-62de84287bd1", "node_type": "1", "metadata": {}, "hash": "ace49b268d2be4d879788f3cd16e47f0ea5ada5b791a00d13f28819c28419724", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "273de7bb-bd3f-4bf0-a329-950d7853b966", "node_type": "1", "metadata": {}, "hash": "987114b2226d6e48f02cb72c903a2365d47efe1221570e847870f5cfe28bd8a0", "class_name": "RelatedNodeInfo"}}, "text": ": string | undefined, \n    readonly logs: string[] = []) {\n    }\n  ... // helper methods omitted for brevity\n}\n```\n\n### `Receipt` Fields\n\n#### `receiptKind`\n\nDefined the type of the `Receipt`: `Action` or `Data` representing the `ActionReceipt` and `DataReceipt`.\n\n#### `receiptId`\n\nThe ID of the `Receipt` of the `CryptoHash` type.\n\n#### `receiverId`\n\nThe receiver account id of the `Receipt`.\n\n#### `predecessorId`\n\nThe predecessor account id of the `Receipt`.\n\n#### `status`\n\nRepresents the status of `ExecutionOutcome` of the `Receipt`.\n\nSee the `ExecutionStatus` enum section for the details.\n\n#### `executionOutcomeId`\n\nThe id of the `ExecutionOutcome` for the `Receipt`. Returns `null` if the `Receipt` isn\u2019t executed yet and has a postponed status.\n\n#### `logs`\n\nThe original logs of the corresponding `ExecutionOutcome` of the `Receipt`.\n\nNote: not all of the logs might be parsed as JSON Events (`Events`).\n\n### `Receipt` Helper Methods\n\n```ts\nexport class Receipt {\n    ... // constructor omitted for brevity\n    get events(): Event[] {}\n\n    static fromOutcomeWithReceipt(outcomeWithReceipt: OutcomeWithReceipt): Receipt {}\n}\n```\n\n#### `Receipt.events(): Events[]`\n\nReturns an Array of `Events` for the `Receipt`, if any. This might be empty if the `logs` field is empty or doesn\u2019t contain JSON Events compatible log records.\n\n---\n\n## `Event`\n\nThis structure is an ephemeral entity to provide access to the [Events Standard](https://github.com/near/NEPs/blob/master/neps/nep-0297.md) structure and keep data about the related `Receipt` for convenience.\n\n### Interface for Capturing Data About an Event in `handleStreamerMessage()`\n\nThe interface to capture data about an event has the following arguments:\n\n- `standard`: name of standard, e.g. nep171\n- `version`: e.g. 1.0.0\n- `event`: type of the event, e.g. nft_mint\n- `data`: associate event data.", "mimetype": "text/plain", "start_char_idx": 6543, "end_char_idx": 8405, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "273de7bb-bd3f-4bf0-a329-950d7853b966": {"__data__": {"id_": "273de7bb-bd3f-4bf0-a329-950d7853b966", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ca120f32-0977-40e8-823e-ce1432f68c5f", "node_type": "1", "metadata": {}, "hash": "74c13080716b4b19ef7fbddf538a3e6b9691702f3239fe47ac160b8c139db0c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b2d6fb79-5744-4a9a-810a-70760d234da4", "node_type": "1", "metadata": {}, "hash": "a22527b956a6dd4b68970ecd9f25af7ec8f2c42156282d59a397467faef122ee", "class_name": "RelatedNodeInfo"}}, "text": "Strictly typed for each set `{standard, version, event}` inside corresponding NEP\n\n### `Event` Structure Definition\n\n```ts\nexport class Event {\n    constructor(\n      readonly relatedReceiptId: string, \n      readonly rawEvent: RawEvent) {\n      }\n    ... // helper methods omitted for brevity\n}\n```\n\n### `Event` Methods\n\n```ts\nexport class Event {\n    ... // constructor omitted for brevity\n    static fromLog(log: string): Event {}\n}\n```\n\n---\n\n## `Transaction`\n\nA representation of the `IndexerTransactionWithOutcome` from `near-indexer-primitives` which is an ephemeral structure combining `SignedTransactionView` from `near-primitives` and `IndexerExecutionOutcomeWithOptionalReceipt` from `near-indexer-primitives`.\n\nThis structure is very similar to `Receipt`. Unlike `Receipt`, a `Transaction` has a few additional fields like `signerId`, `signature`, and `operations`.\n\n### `Transaction` Structure Definition\n\n```ts\nexport class Transaction {\n    constructor(\n      readonly transactionHash: string, \n      readonly signerId: string, \n      readonly signerPublicKey: string, \n      readonly signature: string, \n      readonly receiverId: string, \n      readonly status: ExecutionStatus, \n      readonly executionOutcomeId: string, \n      readonly operations: Operation[]) { \n      }\n}\n```\n\n#### `Transaction.transactionHash`\n\nReturns the hash of the `Transaction` in `CryptoHash`.\n\n#### `Transaction.signerId`\n\nReturns the signer account id of the `Transaction`.\n\n#### `Transaction.signerPublicKey`\n\nReturns the `PublicKey` of the signer of the `Transaction`.\n\n#### `Transaction.signature`\n\nReturns the `Signature` the `Transaction` was signed with.\n\n#### `Transaction.receiverId`\n\nReturns the receiver account id of the `Transaction`.\n\n#### `Transaction.status`\n\nReturns the status of the `Transaction` as `ExecutionStatus`.\n\n#### `Transaction.executionOutcomeId`\n\nReturns the id of the `ExecutionOutcome` for the `Transaction`.\n\n#### `Transaction.operations`\n\nReturns an Array of `Operation` for the `Transaction`.\n\n---\n\n## `StateChange`\n\nThis structure is almost an identical copy of the `StateChangeWithCauseView` from `near-primitives` with a propagated additional field `affectedAccountId`.", "mimetype": "text/plain", "start_char_idx": 8406, "end_char_idx": 10610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b2d6fb79-5744-4a9a-810a-70760d234da4": {"__data__": {"id_": "b2d6fb79-5744-4a9a-810a-70760d234da4", "embedding": null, "metadata": {"file_path": "./near_dist/primitives.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059f338f-4a1d-479c-b5f8-7135a5eac579", "node_type": "4", "metadata": {}, "hash": "154b94a3cf90b8c5d3f222316f18071f8490352fab2873b40053122b4f66d1b6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "273de7bb-bd3f-4bf0-a329-950d7853b966", "node_type": "1", "metadata": {}, "hash": "987114b2226d6e48f02cb72c903a2365d47efe1221570e847870f5cfe28bd8a0", "class_name": "RelatedNodeInfo"}}, "text": "### `StateChange` Structure Definition\n\n```ts\nexport class StateChange {\n    constructor(\n      readonly cause: StateChangeCause, \n      readonly value: StateChangeValue\n    ) {}\n    \n    get affectedAccountId(): string {}\n\n    static fromStateChangeView(stateChangeView: StateChangeWithCauseView) {}\n}\n```\n\n#### `StateChange.cause`\n\nReturns the `cause` of the `StateChange`.\n\n#### `StateChange.value`\n\nReturns the `value` of the `StateChange`.\n\n#### `StateChange.affectedAccountId(): string`\n\nReturns the account id of the `StateChange`.\n\n#### `StateChange.fromStateChangeView(stateChangeView: StateChangeWithCauseView): StateChange`\n\nReturns the `StateChange` from the `StateChangeWithCauseView`. Created for backward compatibility.", "mimetype": "text/plain", "start_char_idx": 10612, "end_char_idx": 11346, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "084589db-b853-4467-b011-2a8fa941ff82": {"__data__": {"id_": "084589db-b853-4467-b011-2a8fa941ff82", "embedding": null, "metadata": {"file_path": "./near_dist/indexing-tools.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c2264fdf-9dab-442b-a332-8de54ee3df9c", "node_type": "4", "metadata": {}, "hash": "62dd09505f45d1fb7080e2a4f169a86955e6c22361eabc0d6bc8d50eb4ad0e1f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2045ca57-a3d1-4593-8811-358ec8925ee8", "node_type": "1", "metadata": {}, "hash": "99d7ad27bce53695487f2f36aca9e69a91f3ef303f423df68d6389147abbd189", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: indexing\ntitle: Indexing Solutions on NEAR\nsidebar_label: \"Indexing Solutions\"\n---\n\n# Indexing Solutions on NEAR\n\nHere's a quick overview of Indexer projects on the NEAR ecosystem:\n\n- [QueryAPI](../2.build/6.data-infrastructure/query-api/intro.md): Near QueryAPI is a fully managed solution to build indexer functions, extract on-chain data, store it in a database, and be able to query it using GraphQL endpoints.\n\n- [BigQuery](../2.build/6.data-infrastructure/big-query.md): Blockchain data indexing in NEAR Public Lakehouse is for anyone wanting to understand blockchain data.\n\n- [NEAR Lake Framework](../2.build/6.data-infrastructure/lake-framework/near-lake.md): a companion library to NEAR Lake. It allows you to build your own indexer that watches a stream of blocks **from a NEAR Lake data source** and allows you to **create your own logic to process that data**. Keep in mind this is **the one you want to use for future projects**, instead of the Indexer Framework. Read [why it is better](https://docs.near.org/concepts/advanced/near-indexer-framework#why-is-it-better-than-near-indexer-framework).\n\n- [Indexer.xyz Multichain Indexer](https://indexer.xyz/): Indexer.xyz is an application layer that you can build your NFT or DeFi applications entirely on top of. In addition to raw transaction indexing, Indexer.xyz provides you with a standardized GraphQL API layer to easily tap into transactions across contracts and chains.\n\n- [Pagoda NEAR Lake](https://docs.pagoda.co/near-lake): with this fully managed solution by [Pagoda Inc.](https://pagoda.co), you don't need to run your own NEAR Lake Nodes and AWS S3 buckets.\n\n- [The Graph](https://thegraph.com/docs/en/cookbook/near/): development tools to process blockchain events and make the resulting data easily available via a GraphQL API, known individually as a subgraph. [Graph Node](https://github.com/graphprotocol/graph-node) is able to process NEAR events, which means that NEAR developers can build subgraphs to index their smart contracts.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2022, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2045ca57-a3d1-4593-8811-358ec8925ee8": {"__data__": {"id_": "2045ca57-a3d1-4593-8811-358ec8925ee8", "embedding": null, "metadata": {"file_path": "./near_dist/indexing-tools.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c2264fdf-9dab-442b-a332-8de54ee3df9c", "node_type": "4", "metadata": {}, "hash": "62dd09505f45d1fb7080e2a4f169a86955e6c22361eabc0d6bc8d50eb4ad0e1f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "084589db-b853-4467-b011-2a8fa941ff82", "node_type": "1", "metadata": {}, "hash": "e49af5e6d662922d9b845d2024807378391256050cb144934bd86193bb5a5313", "class_name": "RelatedNodeInfo"}}, "text": "- [GetBlock](https://getblock.io/explorers/near/blocks/): developer tools offering a simple and reliable API access to multiple blockchains including NEAR Protocol.\n\n- [NearBlocks](https://api.nearblocks.io/api-docs/#/): build precise & reliable dApps with NearBlocks APIs.\n\n- [Octopus Network NEAR Indexer](https://github.com/octopus-network/octopus-near-indexer-s3): an indexing solution based on NEAR Lake framework.\n\n- [Covalent](https://www.covalenthq.com/docs/networks/aurora/): for [Aurora EVM](https://aurora.dev/) indexing, Covalent provides a unified API bringing visibility to billions of Web3 data points.\n\n- [NEAR Indexer Framework](https://docs.near.org/concepts/advanced/near-indexer-framework): a micro-framework providing you with a \"live\" stream of blocks. Useful to handle on-chain real-time `events`.\n\n- [NEAR Indexer for Explorer](https://github.com/near/near-indexer-for-explorer): an indexer built on top of the indexer microframework. It watches and stores all events/data from the blockchain to a **PostgreSQL database**.\n  You can clone the [GitHub repository](https://github.com/near/near-indexer-for-explorer) and customize your own indexer solution.\n\n- [SubQuery](https://academy.subquery.network/quickstart/quickstart_chains/near.html): is an end to end multi-blockchain indexing solution that provides NEAR developers with fast, flexible, universal, open source and decentralized APIs for web3 projects. The [NEAR starter project](https://github.com/subquery/near-subql-starter/tree/main/Near/near-starter) provides a template for developers to get up and running within minutes.", "mimetype": "text/plain", "start_char_idx": 2024, "end_char_idx": 3634, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dbc7f63c-91d6-40c2-9f19-2c0e46d8c9d2": {"__data__": {"id_": "dbc7f63c-91d6-40c2-9f19-2c0e46d8c9d2", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934", "node_type": "4", "metadata": {}, "hash": "7a1273501125d2d4138cc7f9269fc2a6a0ac5d90b333aecb9c6538732d35f9aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5518537c-92d6-416b-9f48-e0a4aa22c5ab", "node_type": "1", "metadata": {}, "hash": "f42a05b775c1a7bd73c206b5c3b7307e1d846ad4ec70004348dea3d9ddbf4997", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: ethers-js\ntitle: NEAR for Ethereum developers\n---\n\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nNEAR components are chain-agnostic, enabling you to create decentralized frontends tailored for any Ethereum dApps. Throughout this article, we'll navigate prevalent use-cases with code snippets. You\u2019ll also find links to exemplary NEAR components for reference.\n\n---\n\n## Interact with Ethereum using Ethers.js\n\nThe NEAR VM has imported the [Ethers.js](https://docs.ethers.org/) library, allowing for seamless interaction with Ethereum nodes using JavaScript in a NEAR component.\n\nThe `Ethers` object exposes the provider connection:\n- `Ethers.provider()` is a read-only connection to the blockchain, which allows querying the blockchain state (e.g., account, block or transaction details), querying event logs or evaluating read-only code using call.\n  - `Ethers.provider().getSigner()` abstracts the class that interacts with an account\n    - `Ethers.provider().getSigner().getBalance()` returns a Promise that resolves to the account address.\n  - `Ethers.provider().getBlockNumber()` looks up the current block number (i.e. height)\n  - `Ethers.provider().getFeeData()` gets the best guess at the recommended FeeData\n\nYou can see various ways of using `Ethers` objects on the [Ethers documentation portal](https://docs.ethers.org/)).\n\n---\n    \nFurthermore, numerous [basic tools](https://docs.ethers.org/v6/api/utils/)  can be found in the ethers.utils object (be aware of the lowercase 'e').\n- `ethers.utils.parseUnits(value, unit)` converts the decimal string value to a BigInt, assuming unit decimal places. The unit may the number of decimal places or the name of a unit (e.g. \"gwei\" for 9 decimal places).\n- `ethers.utils.formatEther(wei)` converts value into a decimal string using 18 decimal places.\n\n#### Example showing the difference between `Ethers.provider()` and `ethers.utils`:\n```ts\n    Ethers.provider()\n        .getSigner()\n        .getBalance()\n        .then((balance) => {\n            console.log(\"Your ETH balance: \", ethers.utils.formatEther(balance))\n        });\n```\n\n## FAQ\n\n### How to get a user account?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2154, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5518537c-92d6-416b-9f48-e0a4aa22c5ab": {"__data__": {"id_": "5518537c-92d6-416b-9f48-e0a4aa22c5ab", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934", "node_type": "4", "metadata": {}, "hash": "7a1273501125d2d4138cc7f9269fc2a6a0ac5d90b333aecb9c6538732d35f9aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dbc7f63c-91d6-40c2-9f19-2c0e46d8c9d2", "node_type": "1", "metadata": {}, "hash": "934679081b382b1d06ea8b4e3c5540840770e883082bf555fff1d588ca021b34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5331d0a4-369f-4053-92c0-7a344a3aaadd", "node_type": "1", "metadata": {}, "hash": "d441e92dd7f06ba0c52d9649a6c106312cf2877283366a9d38fe3fab09558249", "class_name": "RelatedNodeInfo"}}, "text": "```ts\nconst receiver = Ethers.provider().send(\"eth_requestAccounts\", [])[0];\n```\n\n### How to get the current chain ID?\n\n```ts\nEthers.provider().getNetwork().then((chainIdData) => {\n    console.log(chainIdData.chainId);\n});\n```\n\n### How to show a Web3Login button?\n\n```ts\n<Web3ConnectButton \n    className=\"my-class\" \n    connectLabel=\"Connect Web3 Wallet\" \n    disconnectLabel=\"Disconnect Web3 Wallet\"\n    connectingLabel=\"Connecting...\" \n/>\n```\n\n### How to load a contract ABI?\n\n```ts\nconst abi = fetch(`https://eth.blockscout.com/api?module=contract&action=getabi&address=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2`);\n\nif (!abi.ok) {\n    return \"Loading\";\n}\n\nconsole.log(abi.body.result);\n```\n\n### How to load data from EVM nodes?\n\n```ts\n// create a contract interface\nconst iface = new ethers.utils.Interface(abi.body.result);\n\n// encode the balanceOf get request\nconst encodedBalanceData = iface.encodeFunctionData(\"balanceOf\", [receiver]);\n\n// perform a call\nEthers.provider().call({\n    to: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\n    data: encodedBalanceData,\n})\n.then((rawBalance) => {\n    // decode the result\n    const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n    );\n    console.log(Big(receiverBalanceHex).toFixed());\n});\n```\n\n### How to send a transaction to Ethereum nodes?\n\n```ts\n// create a contract instance\nconst wEthContract = new ethers.Contract(\n    \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\n    abi.body.result,\n    Ethers.provider().getSigner()\n);\n\n// perform a given method (withdraw in this case)\nwEthContract\n    .withdraw(balance, {\n        value: 0\n    })\n    .then((transactionHash) => {\n        console.log(transactionHash);\n    });\n```\n\n### How to convert HEX values to human readable numbers?", "mimetype": "text/plain", "start_char_idx": 2156, "end_char_idx": 3937, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5331d0a4-369f-4053-92c0-7a344a3aaadd": {"__data__": {"id_": "5331d0a4-369f-4053-92c0-7a344a3aaadd", "embedding": null, "metadata": {"file_path": "./near_dist/bos-ethersjs.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934", "node_type": "4", "metadata": {}, "hash": "7a1273501125d2d4138cc7f9269fc2a6a0ac5d90b333aecb9c6538732d35f9aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5518537c-92d6-416b-9f48-e0a4aa22c5ab", "node_type": "1", "metadata": {}, "hash": "f42a05b775c1a7bd73c206b5c3b7307e1d846ad4ec70004348dea3d9ddbf4997", "class_name": "RelatedNodeInfo"}}, "text": "```ts\n// use Big().toFixed method\n\nBig(balanceHex).toFixed()\n```\n\n### How to locate the ABI of a Smart Contract?\n\nUtilize platforms like etherscan.com and blockscout.com, or delve into the project's GitHub repositories and documentation.\n\n### Is there an example of applications with a description of how they were created? \n\nYes, there is an article that describes [best practices for creating applications for Ethereum developers on NEAR](bos-ethersjs-best-practices.md), with a breakdown of individual steps.\n\n## Examples\n\nBelow is a curated list of NEAR components, developed by the community, that epitomize the best practices for creating NEAR components:\n\n- [Unwrap ETH](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/unwrap-weth&tab=source)\n- [ERC-20 Token sender](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/erc20-sender&tab=source)\n- [Lido Component](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/Lido&tab=source)\n- [Swap component](https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/swap&tab=source) (a set of swap dApps for Ethereum Mainnet, Polygon Mainnet, Polygon zkevm, Aurora, NEAR, etc)\n- [1inch](https://near.org#/near/widget/ComponentDetailsPage?src=chanon.near/widget/1inch)\n- [Liquity](https://near.org/near/widget/ComponentDetailsPage?src=garlicfaucet.near/widget/liquityWidget)", "mimetype": "text/plain", "start_char_idx": 3939, "end_char_idx": 5348, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6b48ba1e-4786-49f9-88e4-a4261e6c06a9": {"__data__": {"id_": "6b48ba1e-4786-49f9-88e4-a4261e6c06a9", "embedding": null, "metadata": {"file_path": "./near_dist/frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "519d9f24-f372-4466-9f99-9f10c0271851", "node_type": "4", "metadata": {}, "hash": "4853346f373eb30028896f0dfca8fc4dbc29f368252a7a59f8457eb1f448ebc7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c753a2c8-443d-457a-9d60-bdf7d8bda0e9", "node_type": "1", "metadata": {}, "hash": "ab7b4e667e768905e44fd65acf55b2b5f0eb1da80c45f241e77f25e5f46be167", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: frontend\ntitle: Frontends for Web3 dApps\nsidebar_label: Frontends\n---\n\nWhen building decentralized web applications (dApps), developers have two primary options for connecting a front-end user interface (UI) to a smart contract backend. Each option offers distinct advantages and disadvantages, tailored to different project requirements and goals.\n\n- [Standard Web2 Frontend](#standard-web-2-frontend)\n- [Decentralized Frontend](#decentralized-frontend-solutions)\n\n## Standard Web 2 Frontend\n\nWhile your user interface layer will remain centralized, the backend layer\u2014including business logic and stored data\u2014will be decentralized through smart contracts. This approach offers optimal convenience for most applications as it eliminates technical constraints and does not impact performance. However, if your requirement is for full decentralization across the entire stack, this configuration may not be suitable.\n\n**Pros:**\n\n- Develop a standard web application without any technical restrictions.\n- Compatible with any framework and library combination.\n- Supports server-side rendering with platforms like Next.js or SvelteKit.\n- Delivers the best overall performance.\n\n**Cons:**\n\n- Requires hosting through a traditional Web 2 provider (e.g., Vercel, AWS).\n- The user interface layer will not be decentralized.\n\n**How to Build:**\n\nWhen building a frontend that can connect with the NEAR blockchain using standard web2 tooling will require you to import two dependencies:\n\n- [NEAR API JS](../../4.tools/near-api-js/quick-reference.md) - A JavaScript API tool that allows frontend clients the ability to view and retrieve data directly from the blockchain.\n- [Wallet Selector](../../4.tools/wallet-selector.md) - Wallet integration tool allowing developers to choose which wallets are supported and allows users to choose which wallet they would like to connect with.\n\n:::tip\n\n[Checkout this article](integrate-contracts.md) to learn how to integrate smart contracts to your frontend, using [Wallet Selector](../../4.tools/wallet-selector.md) and [NEAR API JS](../../4.tools/near-api-js/quick-reference.md).\n\n:::\n\n## Decentralized Frontend Solutions\n\nIf you need full decentralization of your entire stack, this option is ideal. However, consider the possible technical constraints, such as the absence of server-side rendering or meta frameworks like Next.js.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2371, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c753a2c8-443d-457a-9d60-bdf7d8bda0e9": {"__data__": {"id_": "c753a2c8-443d-457a-9d60-bdf7d8bda0e9", "embedding": null, "metadata": {"file_path": "./near_dist/frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "519d9f24-f372-4466-9f99-9f10c0271851", "node_type": "4", "metadata": {}, "hash": "4853346f373eb30028896f0dfca8fc4dbc29f368252a7a59f8457eb1f448ebc7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6b48ba1e-4786-49f9-88e4-a4261e6c06a9", "node_type": "1", "metadata": {}, "hash": "581ec2c9c46ba3df7792960cd2dc5211c6bbc329a551792c23563dd2f95402ad", "class_name": "RelatedNodeInfo"}}, "text": "Although the ecosystem for developing decentralized frontends is still maturing, here are some notable projects for you to evaluate and consider:\n\n|Name| <div align=\"center\">Description</div>   |\n|--------|------|\n| [**IPFS**](https://docs.ipfs.tech/how-to/websites-on-ipfs/single-page-website/)| A peer-to-peer hypermedia protocol designed to preserve and grow humanity's knowledge by making the web upgradeable, resilient, and more open. |\n| [**Fleek**](https://docs.fleek.co/tutorials/hosting/)| Hosts websites on IPFS with a user-friendly interface and continuous deployment from popular repositories. |\n| [**Arweave**](https://www.arweave.org/build) | Arweave lets you build quickly and simply with permanent storage. You can store anything from files to fully decentralized web applications. |\n| [**Web4**](https://web4.near.page/) | Web4 is a new way to distribute decentralized apps on NEAR Protocol. Deploy single WASM smart contract to deploy an entire web application.|\n| [**NEAR Social** ***(aka B.O.S. Components)***](https://near.social) | An experimental platform that allows users to build and deploy multi-chain decentralized UI experiences. |\n\n**Pros:**\n\n- Decentralized frontends are less susceptible to single points of failure, making them more resistant to attacks and server downtimes\n- By decentralizing the hosting of your frontend, you minimize the risk of content being censored or blocked by centralized authorities.\n- Users might trust a decentralized application more, knowing that it operates on a transparent and immutable blockchain.\n- Data displayed on the frontend is more likely to be accurate and tamper-proof since it's typically fetched directly from the blockchain.\n\n**Cons:**\n\n- Implementing a decentralized frontend can be more complex than traditional web development, requiring knowledge of specific technologies like IPFS, Arweave, or blockchain interactions.\n- Decentralized networks can face issues such as latency or lower speeds compared to traditional centralized servers, potentially affecting user experience.\n- The ecosystem for developing decentralized frontends is still maturing, which means there might be fewer tools and libraries available compared to traditional web development.\n- While decentralized storage costs have been decreasing, they can still be higher than traditional hosting, especially if the dApp generates a lot of data transactions.", "mimetype": "text/plain", "start_char_idx": 2373, "end_char_idx": 4782, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fcd4ea32-5407-4263-9520-1fd954c897fb": {"__data__": {"id_": "fcd4ea32-5407-4263-9520-1fd954c897fb", "embedding": null, "metadata": {"file_path": "./near_dist/2024-04-24.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0", "node_type": "4", "metadata": {}, "hash": "6469e0556b5e1108f2a80d176e799e03d65fe2b969e223192aec22f81cb17e04", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "89884230-fac4-46e5-907f-8910d6cd1064", "node_type": "1", "metadata": {}, "hash": "65dc17ea9fde30f5726bbb0d1b9e9f364cbb5cfec1d58eb6db1b457fd563bff7", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: Reorganizing our docs\nauthors: [gagdiez]\nslug: reorganizing-docs\ntags: [docusaurus, updates]\nhide_table_of_contents: true\n---\n\n*We released a mayor reorganization of our repository, so we can improve docs for everyone... including us*\n\n<p><img src=\"https://img.freepik.com/free-photo/ancient-books-adorn-library-carefully-arranged-with-classics-rare-gems_157027-2332.jpg\" /></p>\n\n<!-- truncate -->\n\n## Organic growth\nOur documentation is the result of multiple people collaborating across the span of four very active years, and it has seen a lot of changes: [2942 commits and counting](https://github.com/near/docs/commits/master/).\n\nIn the beginning, our docs only needed to explain how to create [smart contracts](/build/smart-contracts/what-is), and how to [interact with them through a frontend](/build/web3-apps/quickstart). Fast forward to today, and we have more than 200 pages of documentation, covering topics such as [chain abstraction](/build/chain-abstraction/what-is), [on-chain components](/build/near-components/what-is), [data infrastructure](/build/data-infrastructure/what-is), and [primitives such as NFT, FT](/build/primitives/what-is).\n\nThe best thing is that new features are released every single month. However, all progress comes at a cost, and as our ecosystem grew, so did the disorganization of our documentation.\n\n## What link was that again?\nLet's briefly explain how [docusaurus](https://docusaurus.io/) (the framework we use in our docs) works so you can understand the problem.\n\nIn docusaurus, all the pages are written as simple markdown files. These files go inside the `./docs` folder, and can be organized in folders. Each file has a unique ID on its header that identifies it (e.g. `id: what-is`), and this ID, alongside its folder path, is used to generate the URL.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1816, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "89884230-fac4-46e5-907f-8910d6cd1064": {"__data__": {"id_": "89884230-fac4-46e5-907f-8910d6cd1064", "embedding": null, "metadata": {"file_path": "./near_dist/2024-04-24.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0", "node_type": "4", "metadata": {}, "hash": "6469e0556b5e1108f2a80d176e799e03d65fe2b969e223192aec22f81cb17e04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fcd4ea32-5407-4263-9520-1fd954c897fb", "node_type": "1", "metadata": {}, "hash": "539267054de7da5bcd07909b5592d659e7604559ddd6697af1bf0473fd75e7f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4d72e59f-f62e-435a-b280-5f418bd3db8d", "node_type": "1", "metadata": {}, "hash": "65ffe1045f51c8a71f529feb77f4cb7bf195873b0bb594f6c0864f5d50358321", "class_name": "RelatedNodeInfo"}}, "text": "> For example, the document [`docs/build/smart-contracts/what-is.md`](https://github.com/near/docs/blob/master/docs/2.build/2.smart-contracts/what-is.md) has the `id: what-is`, so it ends being served in the URL https://docs.near.org/build/smart-contracts/what-is.\n\n### The problem\n\nAbout a year ago, we noticed that our organic growth had left us with a very inconsistent URL structure. Basically, we had a lot of folders, and the files related to the same topic (e.g. NEAR components) would be all over the place.\n\nFor example, you would be in the \"Build\" section reading about \"What is a NEAR Component?\" and the URL was `/bos/tutorial/quickstart`. The next page was \"Setup an Environment\" located at `/bos/dev/intro`, followed by \"Anatomy of a Component -> State\" at `/bos/api/state`. Talk about consistency!\n\nOf course, we did not do this on purpose, it is just how things evolved. You might even notice that we are now talking about \"NEAR Components\" but the URL talks about \"BOS\". This is because when we started, \"BOS\" (Blockchain Operating System) felt like a good name, but community feedback made us know that, indeed, it was not. \n\n### The migration\n\nWe [re-organized more than 200 files](https://github.com/near/docs/pull/1890/files) to a new structure that is more consistent. This makes it easier for users to remember the URLs, improves our SEO, and makes it easier for contributors to find where to add new content. No more need to search across multiple folders trying to find the right file!\n\nIn the process, we updated all **internal links**, aided by our [link-checker script](https://github.com/near/docs/blob/master/website/test-links.sh) to make sure we left **no broken links**. We also added **URL redirects** in our server, so all users coming from an external site are redirected to the correct URLs.\n\nBesides checking broken links, we took the time to make sure all the **translations were correctly migrated**.", "mimetype": "text/plain", "start_char_idx": 1819, "end_char_idx": 3759, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4d72e59f-f62e-435a-b280-5f418bd3db8d": {"__data__": {"id_": "4d72e59f-f62e-435a-b280-5f418bd3db8d", "embedding": null, "metadata": {"file_path": "./near_dist/2024-04-24.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0", "node_type": "4", "metadata": {}, "hash": "6469e0556b5e1108f2a80d176e799e03d65fe2b969e223192aec22f81cb17e04", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "89884230-fac4-46e5-907f-8910d6cd1064", "node_type": "1", "metadata": {}, "hash": "65dc17ea9fde30f5726bbb0d1b9e9f364cbb5cfec1d58eb6db1b457fd563bff7", "class_name": "RelatedNodeInfo"}}, "text": "The system Docusaurus uses (called [Crowdin](https://crowdin.com/)) is not very good at detecting changes in a file, so migrating all the translations was a huge effort in itself. \n\nWe could write a blog post just about migrating translations in docusaurus + crowdin... but we will spare you the pain.\n\n:::tip Missing URL\nIf you come across a URL that is not working, please let us know by using the `Feedback` button on the right side of the page, or by opening an [issue in our repository](https://github.com/near/docs/issues)\n:::\n\n## What's next\nNow that most of our documentation is in a better shape, we can focus on improving the content itself. We have a lot of ideas on how to make the docs more interactive, and we are excited to start working on them.\n\nStay tuned for more updates, and remember that if you have any feedback or ideas, you can always reach out to us. We are always happy to hear from you!\n\nSee you in the next post! \ud83d\ude80", "mimetype": "text/plain", "start_char_idx": 3760, "end_char_idx": 4703, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "27ef5107-c0d3-4369-9b73-cce92d1d8757": {"__data__": {"id_": "27ef5107-c0d3-4369-9b73-cce92d1d8757", "embedding": null, "metadata": {"file_path": "./near_dist/how-works.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ec4187b4-23da-4620-882d-58756f03b95e", "node_type": "4", "metadata": {}, "hash": "851d6ca0ccdb8608a15ec9cfb975b1c3fc9ab09bd83ad2176b419187b3726b63", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80f0107f-cbfe-4925-9e73-3a51b30e7466", "node_type": "1", "metadata": {}, "hash": "bcf724e80b2de08ba8962bf7a482d6e8c8dabe5b66d94944526addae0f23d2ba", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: how-it-works\ntitle: How QueryAPI works\nsidebar_label: How it works\n---\n\nQueryApi is a streaming indexer implementation that executes custom indexing logic written by developers on the NEAR blockchain.\nQueryApi allows hosted execution of complex queries (ones that can\u2019t be answered by a [simple RPC](../../../5.api/rpc/introduction.md) or [Enhanced API](https://docs.pagoda.co/api) call), data hosting, and its exposure via GraphQL endpoints.\n\n\n## Components involved \n\nThe QueryApi implementation integrates many different components in a single and streamlined solution.\nIn a high-level overview, the main components are:\n\n:::info Components\n`NEAR Protocol` -> `NEAR Lake` -> `Coordinator` -> `Runner` -> `Database` -> `API`\n:::\n\n\n### Detailed overview\n\nAn in-depth, detailed overview of the QueryApi components:\n\n[![QueryAPI](/docs/qapi-components.png)](/docs/qapi-components.png)\n\n\n### Description\n\n- **Protocol:** the underlying NEAR Layer-1 Blockchain, where data `Blocks` and `Chunks` are produced.\n- **NEAR Lake:** an indexer which watches the Layer-1 network and stores all the events as JSON files on AWS S3. Changes are indexed as new `Blocks` arrive.\n- **Coordinator:** the QueryApi coordinator indexer filters matching data `Blocks`, runs historical processing threads, and queues developer's JS code to be indexed with these matched blocks.\n- **Runner:** executes the user's indexer code, which outputs the data to the database.\n- **Database:** a Postgres database where the developer's indexer data is stored, using a logical DB per user, and a logical schema per indexer function.\n- **API:** a Hasura server running on Google Cloud Platform exposes a GraphQL endpoint so users can access their data from anywhere.\n\n## Historical backfill\n\nWhen an indexer is created, two processes are triggered:\n\n- real-time - starts from the block the indexer was registered (`block_X`), and will execute the indexer function on every matching block from there on.\n- historical - starts from the configured `start_from_block` height, and will execute the indexer function for all matching blocks up until `block_X`.\n\nThe historical backfill process can be broken down in to two parts: _indexed_, and _unindexed_ blocks.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2228, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80f0107f-cbfe-4925-9e73-3a51b30e7466": {"__data__": {"id_": "80f0107f-cbfe-4925-9e73-3a51b30e7466", "embedding": null, "metadata": {"file_path": "./near_dist/how-works.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ec4187b4-23da-4620-882d-58756f03b95e", "node_type": "4", "metadata": {}, "hash": "851d6ca0ccdb8608a15ec9cfb975b1c3fc9ab09bd83ad2176b419187b3726b63", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "27ef5107-c0d3-4369-9b73-cce92d1d8757", "node_type": "1", "metadata": {}, "hash": "f1734bbd0d990bc816c67085eea4857d395df2ef77a4820be8a9e3d4bb0352b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "830ba288-72ee-4218-99c7-94d4b1c3b56f", "node_type": "1", "metadata": {}, "hash": "0f8eaa0006d619ed071f27a02564cbf80c6596cffcc7b4099f4cadb3930748c5", "class_name": "RelatedNodeInfo"}}, "text": "**Indexed** blocks come from the `near-delta-lake` bucket in S3. This bucket is populated via a DataBricks job which streams blocks from NEAR Lake, and for every account, stores the block heights that contain transactions made against them. This processed data allows QueryAPI to quickly fetch a list of block heights that match the contract ID defined on the Indexer, rather than filtering through all blocks.\n\nNEAR Delta Lake is not updated in real time, so for the historical process to close the gap between it and the starting point of the real-time process, it must also manually process the remaining blocks. This is the **unindexed** portion of the backfill.\n\n## Provisioning\n\nIn summary, QueryAPI provisioning consists of the following steps:\n\n1. Create `database` in [Postgres](#postgres), named after account, if necessary\n2. Add `database` to Hasura\n3. Create `schema` in `database`\n4. Run DDL in `schema`\n5. Track all tables in `schema` in [Hasura](#hasura)\n6. Track all foreign key relationships in `schema` in [Hasura](#hasura)\n7. Add all permissions to all tables in `schema` for account\n\n:::note\nThis is the workflow for the initial provisioning. Nothing happens for the remaining provisions, as QueryAPI checks if it has been provisioned, and then skips these steps.\n:::\n\n:::info\nTo check if an Indexer has been provisioned, QueryAPI checks if both the `database` and `schema` exist. This check is what prevents the app from attempting to provision an already provisioned indexer.\n:::\n\n### Low level details\n\nThere are two main pieces to provisioning: [Postgres](#postgres) and [Hasura](#hasura).\n\n#### Postgres\n\nThe dynamic piece in this process is the user-provided `schema.sql` file, which uses Data Definition Language (DDL) to describe the structure of the user's database. The `schema` DDL will be executed within a new Postgres Schema named after the account + function name. For example, if you have an `account.near` and `my_function`, the schema's name will be `account_near_my_function`.", "mimetype": "text/plain", "start_char_idx": 2230, "end_char_idx": 4246, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "830ba288-72ee-4218-99c7-94d4b1c3b56f": {"__data__": {"id_": "830ba288-72ee-4218-99c7-94d4b1c3b56f", "embedding": null, "metadata": {"file_path": "./near_dist/how-works.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ec4187b4-23da-4620-882d-58756f03b95e", "node_type": "4", "metadata": {}, "hash": "851d6ca0ccdb8608a15ec9cfb975b1c3fc9ab09bd83ad2176b419187b3726b63", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80f0107f-cbfe-4925-9e73-3a51b30e7466", "node_type": "1", "metadata": {}, "hash": "bcf724e80b2de08ba8962bf7a482d6e8c8dabe5b66d94944526addae0f23d2ba", "class_name": "RelatedNodeInfo"}}, "text": "Each schema exists within a separate virtual database for that account, named after the account, i.e. `account_near`.\n\n#### Hasura\n\nAfter creating the new schema, Hasura is configured to expose this schema via a GraphQL endpoint. First, the database is added as a data source to Hasura. By default, all tables are hidden, so to expose them they must be \"tracked\". \n\nForeign keys in Postgres allow for nested queries via GraphQL, for example a `customer` table may have a foreign relationship to an `orders` table, this enables the user to query the orders from a customer within a single query. These are not enabled by default, so they must be \"tracked\" too.\n\nFinally, necessary permissions are added to the tables. These permissions control which GraphQL operations will be exposed. For example, the `SELECT` permission allows all queries, and `DELETE` will expose all delete mutations. A role, named after the account, is used to group these permissions. Specifying the role in the GraphQL request applies these permissions to that request, preventing access to other users data.\n\n## Who hosts QueryAPI\n\n[Pagoda Inc.](https://pagoda.co) runs and manages all the infrastructure of QueryAPI, including NEAR Lake nodes to store the data in JSON format on AWS S3.\n\n- NEAR Lake indexing is hosted on AWS S3 buckets.\n- Coordinator and Runners are hosted on GCP.\n- Hasura GraphQL API server is hosted on GCP.\n\n:::caution Pricing\nQueryAPI is currently free. Pagoda doesn't charge for storage of your indexer code and data as well as running the indexer, but usage pricing will be introduced once QueryApi is out of beta.\n:::", "mimetype": "text/plain", "start_char_idx": 4247, "end_char_idx": 5866, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "343caffc-e7f1-4303-a162-dbc261d6eab8": {"__data__": {"id_": "343caffc-e7f1-4303-a162-dbc261d6eab8", "embedding": null, "metadata": {"file_path": "./near_dist/relayers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "042c5071-be85-49e5-9e43-8a66ba22744e", "node_type": "4", "metadata": {}, "hash": "a89a86bd5fda056fcc7feff6b6e132432823f4b19884216499774fa6e8c3f51a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e31e12fa-608a-45ea-a4a2-9a2149ac0c73", "node_type": "1", "metadata": {}, "hash": "7d811e6e49a77da39471ec66983db80c163b44153f31bb9daea43f03ffba3158", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: relayers\ntitle: Relayers\n---\n\nA relayer is a simple web service that receives signed transactions from NEAR users, and relays them to the network while attaching tokens to sponsor their GAS expenses. This can be useful to create applications in which the users are not required to purchase NEAR in order to be able to transact. In this document we present a high-level overview on how relayers work. Please check the [build a relayer](../../2.build/1.chain-abstraction/meta-transactions.md) page if you want to learn how to build your own relayer.\n\n---\n\n## How it works\n\n![relayer-overview](/docs/assets/welcome-pages/relayer-overview.png)\n\nRelayers are a natural consequence of [Meta Transactions](meta-tx.md) ([NEP-366](https://github.com/near/NEPs/blob/master/neps/nep-0366.md)), a special type of transaction that can be best understood as an intent.\n\nThe user expresses: _\"I want to do a specific action on chain\"_ and signs this intent **off-chain**, but does not send it to the network. Instead, they send the intent to a `Relayer`, which wraps the message into an actual transaction, attaches the necessary funds, and sends it to the network.\n\n<details>\n<summary> Technical Details </summary>\n\nTechnically, the end user (client) creates a `SignedDelegateAction` that contains the data necessary to construct a `Transaction`, signs the `SignedDelegateAction` using their key, and send it to  the relayer service.\n\nWhen the request is received, the relayer uses its own key to sign a `Transaction` using the fields in the `SignedDelegateAction` as input to create a `SignedTransaction`.\n\nThe `SignedTransaction` is then sent to the network via RPC call, and the result is sent back to the client. The `Transaction` is executed in such a way that the relayer pays the GAS fees, but all actions are executed as if the user had sent the transaction.\n</details>\n\n---\n\n## Why use a Relayer?\n\nThere are multiple reasons to use a relayer:\n1. Your users are new to NEAR and don't have any gas to cover transactions\n2. Your users have an account on NEAR, but only have a Fungible Token Balance.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2099, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e31e12fa-608a-45ea-a4a2-9a2149ac0c73": {"__data__": {"id_": "e31e12fa-608a-45ea-a4a2-9a2149ac0c73", "embedding": null, "metadata": {"file_path": "./near_dist/relayers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "042c5071-be85-49e5-9e43-8a66ba22744e", "node_type": "4", "metadata": {}, "hash": "a89a86bd5fda056fcc7feff6b6e132432823f4b19884216499774fa6e8c3f51a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "343caffc-e7f1-4303-a162-dbc261d6eab8", "node_type": "1", "metadata": {}, "hash": "40b9bb5d4870e27503ac266114fccbea611ff5f4fc89c1403db2ba8578741dc0", "class_name": "RelatedNodeInfo"}}, "text": "They can now use the FT to pay for gas\n3. As an enterprise or a large startup you want to seamlessly onboard your existing users onto NEAR without needing them to worry about gas costs and seed phrases\n4. As an enterprise or large startup you have a user base that can generate large spikes of user activity that would congest the network. In this case, the relayer acts as a queue for low urgency transactions\n5. In exchange for covering the gas fee costs, relayer operators can limit where users spend their assets while allowing users to have custody and ownership of their assets\n6. Capital Efficiency: Without relayer if your business has 1M users they would have to be allocated 0.25 NEAR to cover their gas costs totalling 250k NEAR. However, only ~10% of the users would actually use the full allowance and a large amount of the 250k NEAR is just sitting there unused. So using the relayer, you can allocate 50k NEAR as a global pool of capital for your users, which can refilled on an as needed basis.", "mimetype": "text/plain", "start_char_idx": 2100, "end_char_idx": 3110, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3d9b4f83-b2ec-447f-9b84-d0401c107fd1": {"__data__": {"id_": "3d9b4f83-b2ec-447f-9b84-d0401c107fd1", "embedding": null, "metadata": {"file_path": "./near_dist/create-proposal.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9244eedd-0860-4505-8097-861902dd84bc", "node_type": "4", "metadata": {}, "hash": "517afce072035f6ad38555c7ed9e406e80287dd699302cd450c6d5c0fd427b3a", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call primitives.sputnik-dao.near add_proposal '{\"proposal\": {\"description\": \"My first proposal\", \"kind\": { \"Transfer\": {\"token_id\": \"\", \"receiver_id\": \"bob.near\", \"amount\": \"10000000000000000000000000\"}}}}'  --deposit 0.1 --gas 300000000000000 --accountId bob.near\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 281, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "856a5f04-c0a8-4f30-a76f-16000cf2df95": {"__data__": {"id_": "856a5f04-c0a8-4f30-a76f-16000cf2df95", "embedding": null, "metadata": {"file_path": "./near_dist/token.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8ca4639b-7c32-4acd-a236-63be501bf9e6", "node_type": "4", "metadata": {}, "hash": "7ca555829f917ccced25676bf7ec268ae5d656a78a8c1dd46d4d06bbca44fa1a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: tokens\ntitle: Tokens\n---\n\n# NEAR Token\nThis is the native token used in NEAR Protocol.\nIt has multiple use cases:\n- Secures the network through staking\n- Provides a unit of account - NEAR is used for processing transactions and storing data\n- Serves as a medium of exchange\n\n### Securing the Network\nNEAR Protocol is a proof-of-stake (PoS) network, which means that resistance from various attacks comes from staking NEAR.\nStaked NEAR represents the decentralized infrastructure of servers that maintain the network and process transactions for applications and users on NEAR.\nRewards for providing this service are received in NEAR.\n\n## Providing a Unit of Account\nNEAR is used to price computation and storage on the NEAR infrastructure.\nThe network charges transaction fees in NEAR to process changes and transactions.\n\n## Medium of Exchange\nNEAR is readily available on the protocol level, so it can be used to transfer value between NEAR applications and accounts.\nThis means that applications can use NEAR to charge for various functions, like access to data or other complex transactions.\nEntities can also easily exchange NEAR between each other, without the need for trusted third parties to clear and settle transactions.\n\n\nFor a deeper dive on NEAR Economics: [https://near.org/blog/near-protocol-economics](https://near.org/blog/near-protocol-economics)\n\nFor more information about the NEAR token, visit [NEAR Token Supply and Distribution](https://near.org/blog/near-token-supply-and-distribution/) or [Nomicon](https://nomicon.io).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1553, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9c5617cc-0953-45c8-94cd-2b670ceebf8c": {"__data__": {"id_": "9c5617cc-0953-45c8-94cd-2b670ceebf8c", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe", "node_type": "1", "metadata": {}, "hash": "5bb2b5528737a310d720d14fa6d640ac87db78bdfca36ff1c554e6cc03f07648", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: ds-components\ntitle: Design Components\n---\nimport {WidgetEditor} from \"@site/src/components/widget-editor\";\n\n# Design System Components\n\nWhen building components, the NEAR VM provides a complete set of [Radix primitives](https://www.radix-ui.com/docs/primitives/overview/introduction) to simplify UI development.\n\n## Radix UI\n\nUsing embedded Radix primitives on the NEAR VM is simple and straight-forward. You don't need to import any files:\n\n```js\nreturn (\n    <Label.Root className=\"LabelRoot\">\n      Hello World!\n    </Label.Root>\n);\n```\n\n:::caution Limitations\n\nCurrently, NEAR VM impose some limitations on the Radix UI framework:\n\n- `Form` component is not available.\n- You can't use `.Portal` definitions.\n- Using CSS is different. You'll have to use a `styled.div` wrapper.\n\n:::\n\n### Using CSS\n\nHere is an example on how to use CSS through the `styled.div` wrapper:\n\n```js\nconst Wrapper = styled.div`\n  .SwitchRoot {\n    ...\n  }\n  .SwitchThumb {\n    ...\n  }\n`;\n\nreturn (\n  <Wrapper>\n    <Switch.Root className=\"SwitchRoot\">\n      <Switch.Thumb className=\"SwitchThumb\" />\n    </Switch.Root>\n  </Wrapper>\n);\n```\n\n:::tip Using Wrapper\n\n[Example widget using Wrapper](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/RadixTooltipTest)\n\n:::\n\n### Using `styled-components`\n\nYou can use [`styled-components`](../../2.build/3.near-components/anatomy/builtin-components.md) in combination with Radix UI primitives.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1444, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe": {"__data__": {"id_": "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9c5617cc-0953-45c8-94cd-2b670ceebf8c", "node_type": "1", "metadata": {}, "hash": "23109f97a23d2497a5bf98fe90c39eea925d84c0dac2fe2ce000ae74cb67a1d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9c9b16ec-1dc1-49fa-85fa-153edbd22a53", "node_type": "1", "metadata": {}, "hash": "b2e5a49d1c95357fd5ba462bebd2eec43120494fc9a60f6ab9a023d814bfd7c1", "class_name": "RelatedNodeInfo"}}, "text": "Here's an example:\n\n```js\nconst SwitchRoot = styled(\"Switch.Root\")`\n  all: unset;\n  display: block;\n  width: 42px;\n  height: 25px;\n  background-color: var(--blackA9);\n  border-radius: 9999px;\n  position: relative;\n  box-shadow: 0 2px 10px var(--blackA7);\n\n  &[data-state=\"checked\"] {\n    background-color: black;\n  }\n`;\n\nconst SwitchThumb = styled(\"Switch.Thumb\")`\n  all: unset;\n  display: block;\n  width: 21px;\n  height: 21px;\n  background-color: white;\n  border-radius: 9999px;\n  box-shadow: 0 2px 2px var(--blackA7);\n  transition: transform 100ms;\n  transform: translateX(2px);\n  will-change: transform;\n\n  &[data-state=\"checked\"] {\n    transform: translateX(19px);\n  }\n`;\n\nreturn (\n  <SwitchRoot>\n    <SwitchThumb />\n  </SwitchRoot>\n);\n```\n\n:::tip Using styled components\n\n[Example widget using styled components to style Radix UI](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/RadixSwitchTest).\n\n:::\n\n### Forward references\n\nThe NEAR VM re-implements [React's forwardRef](https://react.dev/reference/react/forwardRef#reference) as `ref=\"forwardedRef\"`.\n\nYou can use `ref=\"forwardedRef\"` to forward references through `<Widget />` to support Radix's `asChild` property:\n\n```js title='Dialog.jsx'\n<AlertDialog.Trigger asChild>\n  <Widget\n    src=\"near/widget/TestButton\"\n    props={{ label: \"Click Me\" }}\n  />\n</AlertDialog.Trigger>\n```\n\n```js title='TestButton.jsx'\nconst Button = styled.button`\n  background: #f00;\n`;\n\nreturn (\n  <Button type=\"button\" ref=\"forwardedRef\">\n    {props.label}: Forwarded\n  </Button>\n);\n```\n\n## UI is Near\n\n[UI is Near](https://www.uiisnear.xyz/) is community-built library offering a comprehensive collection of UI components providing a solid foundation for creating intuitive and visually appealing user interfaces for dApps, wallets or other Web3 solutions.", "mimetype": "text/plain", "start_char_idx": 1445, "end_char_idx": 3265, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9c9b16ec-1dc1-49fa-85fa-153edbd22a53": {"__data__": {"id_": "9c9b16ec-1dc1-49fa-85fa-153edbd22a53", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe", "node_type": "1", "metadata": {}, "hash": "5bb2b5528737a310d720d14fa6d640ac87db78bdfca36ff1c554e6cc03f07648", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "de91555c-613e-4e3c-96d8-cd067c60dd6e", "node_type": "1", "metadata": {}, "hash": "ab3bedb2fd84d6299b45780e208529334121252df71cf601eaac06b2a05bb3c7", "class_name": "RelatedNodeInfo"}}, "text": ":::tip\n\nYou can find the documentation, available components, and code examples following this [this link](https://www.uiisnear.xyz/).\n\n:::\n\n## DIG components\n\nThese are the Decentralized Interface Guidelines (DIG) components available on the NEAR VM:\n\n- [DIG.Accordion](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Accordion)\n- [DIG.Avatar](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Avatar)\n- [DIG.Badge](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Badge)\n- [DIG.Button](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Button)\n- [DIG.Checkbox](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Checkbox)\n- [DIG.Chip](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Chip)\n- [DIG.Dialog](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Dialog)\n- [DIG.DropdownMenu](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.DropdownMenu)\n- [DIG.Input](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Input)\n- [DIG.InputSearch](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputSearch)\n- [DIG.InputSelect](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputSelect)\n- [DIG.InputTags](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputTags)\n- [DIG.InputTextarea](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputTextarea)\n- [DIG.Tabs](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.", "mimetype": "text/plain", "start_char_idx": 3267, "end_char_idx": 4950, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "de91555c-613e-4e3c-96d8-cd067c60dd6e": {"__data__": {"id_": "de91555c-613e-4e3c-96d8-cd067c60dd6e", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9c9b16ec-1dc1-49fa-85fa-153edbd22a53", "node_type": "1", "metadata": {}, "hash": "b2e5a49d1c95357fd5ba462bebd2eec43120494fc9a60f6ab9a023d814bfd7c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b8258c60-c3ba-4bb6-849a-f5f81471438a", "node_type": "1", "metadata": {}, "hash": "748cad7ea84650f30a457a7b78757a5eb95e49bee43186cceb498366b1cdbb90", "class_name": "RelatedNodeInfo"}}, "text": "Tabs)\n- [DIG.Theme](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Theme)\n- [DIG.Toast](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Toast)\n- [DIG.Tooltip](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Tooltip)\n\n\n:::tip\n\nIf you want to see working demos of these components, check the [DIG Overview page](https://dev.near.org/near/widget/DIG.OverviewPage).\n\n:::\n\n---\n\n### `DIG.Accordion`\n\nAn accordion built with the [Radix primitive](https://www.radix-ui.com/docs/primitives/components/accordion).\n\n<WidgetEditor networkId=\"mainnet\" id=\"1\">\n\n```jsx\n// Rendering the component with props\nreturn (<Widget\n  src=\"near/widget/DIG.Accordion\"\n  props={{\n    type: \"multiple\",\n    defaultValue: [\"1\"],\n    items: [\n      {\n        value: \"1\",\n        header: \"Header 1\",\n        content: (\n          <>\n            <p>My JSX context 1.</p>\n            <p>Here's another paragraph.</p>\n          </>\n        ),\n      },\n      {\n        value: \"2\",\n        header: \"Header 2\",\n        content: (\n          <>\n            <p>My JSX context 2.</p>\n            <p>Here's another paragraph.</p>\n          </>\n        ),\n      },\n    ],\n  }}\n/>);\n```\n\n</WidgetEditor>\n\n:::info DIG.Accordion properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Accordion&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Avatar`\n\nThis component renders an avatar.\n\n<WidgetEditor networkId=\"mainnet\" id=\"2\">\n\n```jsx\nconst accountId = \"root.near\";\nconst profile = props.profile || Social.get(`${accountId}/profile/**`, \"final\");\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.Avatar\"\n    props={{\n      alt: accountId,\n      image: profile.image,\n      size: \"medium\",\n    }}\n  />\n);\n```\n\n</WidgetEditor>", "mimetype": "text/plain", "start_char_idx": 4950, "end_char_idx": 6805, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b8258c60-c3ba-4bb6-849a-f5f81471438a": {"__data__": {"id_": "b8258c60-c3ba-4bb6-849a-f5f81471438a", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "de91555c-613e-4e3c-96d8-cd067c60dd6e", "node_type": "1", "metadata": {}, "hash": "ab3bedb2fd84d6299b45780e208529334121252df71cf601eaac06b2a05bb3c7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc56afbb-70df-476f-8bab-8a49c43f3745", "node_type": "1", "metadata": {}, "hash": "2ce12b3f4bc23826dcde382bf5fd264ef236e696a6812d7cb4cc450d43282ce4", "class_name": "RelatedNodeInfo"}}, "text": ":::info DIG.Avatar properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Avatar&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Badge`\n\nThis component renders a badge. Badges are not meant to be clickable. Refer to [DIG.Button](#digbutton) or [DIG.Chip](#digchip) for clickable alternatives.\n\n<WidgetEditor networkId=\"mainnet\" id=\"3\">\n\n```jsx\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.Badge\"\n    props={{\n      label: \"Hello\",\n      iconLeft: \"ph-bold ph-pizza\",\n      variant: \"warning\",\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.Badge properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Badge&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Button`\n\nA fully featured button component that can act as a `<button>` or `<a>` tag.\n\n<WidgetEditor networkId=\"mainnet\" id=\"4\">\n\n```jsx\n// Rendering the component with props\nreturn <Widget src=\"near/widget/DIG.Button\" props={{ label: \"Click Me\" }} />;\n```\n\n</WidgetEditor>\n\n:::info DIG.Button properties\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Button&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Checkbox`\n\nA checkbox built with the [Radix primitive](https://www.radix-ui.com/docs/primitives/components/checkbox).\n\n<WidgetEditor networkId=\"mainnet\" id=\"5\">\n\n```jsx\n// Rendering the component with props\nreturn <Widget\n  src=\"near/widget/DIG.Checkbox\"\n  props={{ id: \"checkbox-item\", label: \"Accept terms and conditions\" }}\n/>\n```\n\n</WidgetEditor>\n\n:::info DIG.Checkbox properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Checkbox&tab=about) for properties and details.", "mimetype": "text/plain", "start_char_idx": 6808, "end_char_idx": 8597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc56afbb-70df-476f-8bab-8a49c43f3745": {"__data__": {"id_": "bc56afbb-70df-476f-8bab-8a49c43f3745", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b8258c60-c3ba-4bb6-849a-f5f81471438a", "node_type": "1", "metadata": {}, "hash": "748cad7ea84650f30a457a7b78757a5eb95e49bee43186cceb498366b1cdbb90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "17b7b9f1-c758-43f5-afc9-bf596d0c2511", "node_type": "1", "metadata": {}, "hash": "ce2243f347982d811549f1c52f19a8ef2bcf33680d8c42e34318b93b7c0134cd", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n### `DIG.Chip`\n\nA fully featured chip component that can act as a `<button>` or `<a>` tag.\n\n<WidgetEditor networkId=\"mainnet\" id=\"6\">\n\n```jsx\n// Rendering the component with props\nreturn (<Widget src=\"near/widget/DIG.Chip\" props={{ label: 'Click Me' }} />);\n```\n\n</WidgetEditor>\n\n:::info DIG.Chip properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Chip&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Dialog`\n\nThis Dialog component is built with the [Radix primitive](https://www.radix-ui.com/primitives/docs/components/dialog).\n\n<WidgetEditor networkId=\"mainnet\" id=\"7\">\n\n```jsx\nState.init({\n  dialogIsOpen: false,\n});\n\nfunction handleCancelFunction() {\n  console.log(\"cancel\");\n}\n\nfunction handleConfirmFunction() {\n  console.log(\"confirm\");\n}\n\n// Rendering the component with props\nreturn (\n  <>\n    <Widget\n      src=\"near/widget/DIG.Button\"\n      props={{\n        label: \"Open Dialog\",\n        onClick: () => State.update({ dialogIsOpen: true }),\n      }}\n    />\n\n    <Widget\n      src=\"near/widget/DIG.Dialog\"\n      props={{\n        type: \"alert\",\n        title: \"Header\",\n        description: \"Some description\",\n        onCancel: handleCancelFunction,\n        onConfirm: handleConfirmFunction,\n        cancelButtonText: \"Cancel\",\n        confirmButtonText: \"Confirm\",\n        open: state.dialogIsOpen,\n        onOpenChange: (value) => State.update({ dialogIsOpen: value }),\n      }}\n    />\n  </>\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.Dialog properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Dialog&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.DropdownMenu`\n\nThis dropdown menu is built with the [Radix primitive](https://www.radix-ui.com/primitives/docs/components/dropdown-menu).", "mimetype": "text/plain", "start_char_idx": 8599, "end_char_idx": 10422, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "17b7b9f1-c758-43f5-afc9-bf596d0c2511": {"__data__": {"id_": "17b7b9f1-c758-43f5-afc9-bf596d0c2511", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc56afbb-70df-476f-8bab-8a49c43f3745", "node_type": "1", "metadata": {}, "hash": "2ce12b3f4bc23826dcde382bf5fd264ef236e696a6812d7cb4cc450d43282ce4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a14afa85-1578-455b-a272-d70ca43f6b4a", "node_type": "1", "metadata": {}, "hash": "7a33eeed0d0b2ffce1c52672e3ad639dc214e8a17b166504dd6ab80ec15644ca", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor networkId=\"mainnet\" id=\"8\">\n\n```jsx\n// Rendering the component with props\nreturn (<Widget\n  src=\"near/widget/DIG.DropdownMenu\"\n  props={{\n    trigger: (\n      <Widget src=\"near/widget/DIG.Button\" props={{ label: \"Open Menu\" }} />\n    ),\n    header: \"Dropdown header\",\n    items: [\n      {\n        name: \"Profile\",\n        iconLeft: \"ph ph-user-circle\",\n        iconRight: \"ph ph-user-focus\",\n      },\n      {\n        subHeader: \"Sub header here\",\n        name: \"Settings\",\n      },\n    ],\n  }}\n/>);\n```\n\n</WidgetEditor>\n\n:::info DIG.DropdownMenu properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.DropdownMenu&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Input`\n\nA text input component.\n\n<WidgetEditor networkId=\"mainnet\" id=\"9\">\n\n```jsx\nState.init({\n  myValue: \"\",\n});\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.Input\"\n    props={{\n      assistiveText: \"My assistive text\",\n      label: \"My Label\",\n      iconLeft: \"ph-bold ph-pizza\",\n      placeholder: \"Placeholder...\",\n      onInput: (e) => State.update({ myValue: e.target.value }),\n      value: state.myValue,\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.Input properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Input&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.InputSearch`\n\nAn input component for typing a search query.\n\n<WidgetEditor networkId=\"mainnet\" id=\"10\">\n\n```jsx\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.InputSearch\"\n    props={{\n      onQueryChange: (query) => console.log(query),\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.InputSearch properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputSearch&tab=about) for properties and details.", "mimetype": "text/plain", "start_char_idx": 10424, "end_char_idx": 12313, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a14afa85-1578-455b-a272-d70ca43f6b4a": {"__data__": {"id_": "a14afa85-1578-455b-a272-d70ca43f6b4a", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "17b7b9f1-c758-43f5-afc9-bf596d0c2511", "node_type": "1", "metadata": {}, "hash": "ce2243f347982d811549f1c52f19a8ef2bcf33680d8c42e34318b93b7c0134cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d86664c1-9764-4f4c-aa05-ce7ead56d53a", "node_type": "1", "metadata": {}, "hash": "ff8ed26d589b3df02132a83bdc00639c7a27c73ce02b3b8e3b0acb6b5b0b21ab", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n### `DIG.InputSelect`\n\nA select input component built with the [Radix primitive](https://www.radix-ui.com/docs/primitives/components/select).\n\n<WidgetEditor networkId=\"mainnet\" id=\"11\">\n\n```jsx\nState.init({\n  myValue: \"c\",\n});\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.InputSelect\"\n    props={{\n      assistiveText: \"My assistive text\",\n      groups: [\n        {\n          label: \"Group One\",\n          items: [\n            {\n              label: \"Option A\",\n              value: \"a\",\n            },\n            {\n              label: \"Option B\",\n              value: \"b\",\n              disabled: true,\n            },\n          ],\n        },\n        {\n          label: \"Group Two\",\n          items: [\n            {\n              label: \"Option C\",\n              value: \"c\",\n            },\n            {\n              label: \"Option D\",\n              value: \"d\",\n            },\n          ],\n        },\n      ],\n      label: \"My Label\",\n      placeholder: \"Placeholder...\",\n      rootProps: {\n        value: state.myValue,\n        onValueChange: (value) => {\n          State.update({ myValue: value });\n        },\n      },\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.InputSelect properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputSelect&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.InputTags`\n\nAn input component that handles adding and removing tags.\n\n<WidgetEditor networkId=\"mainnet\" id=\"12\">\n\n```jsx\nState.init({\n  myTags: [\"food\", \"watermelon\"],\n});\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.InputTags\"\n    props={{\n      assistiveText: \"My assistive text\",\n      label: \"My Label\",\n      placeholder: \"Placeholder...\",\n      tags: state.myTags,\n      onTagsChange: (value) => State.update({ myTags: value }),\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.InputTags properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputTags&tab=about) for properties and details.", "mimetype": "text/plain", "start_char_idx": 12315, "end_char_idx": 14402, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d86664c1-9764-4f4c-aa05-ce7ead56d53a": {"__data__": {"id_": "d86664c1-9764-4f4c-aa05-ce7ead56d53a", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a14afa85-1578-455b-a272-d70ca43f6b4a", "node_type": "1", "metadata": {}, "hash": "7a33eeed0d0b2ffce1c52672e3ad639dc214e8a17b166504dd6ab80ec15644ca", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f8e22b88-686b-4dc7-8fdd-07e54e218710", "node_type": "1", "metadata": {}, "hash": "383d8e4a73c4fd8242e4ef58fe06fb047ad82a44bdd4880bff8c0951b8eb10d4", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n### `DIG.InputTextarea`\n\nA textarea input component.\n\n<WidgetEditor networkId=\"mainnet\" id=\"13\">\n\n```jsx\nState.init({\n  myValue: \"\",\n});\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.InputTextarea\"\n    props={{\n      assistiveText: \"My assistive text\",\n      label: \"My Label\",\n      placeholder: \"Placeholder...\",\n      onInput: (e) => State.update({ myValue: e.target.value }),\n      value: state.myValue,\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.InputTextarea properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.InputTextarea&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Tabs`\n\nThis tabs component is built with the [Radix primitive](https://www.radix-ui.com/docs/primitives/components/tabs).\n\n<WidgetEditor networkId=\"mainnet\" id=\"14\">\n\n```jsx\n// Rendering the component with props\nreturn (<Widget\n  src=\"near/widget/DIG.Tabs\"\n  props={{\n    variant: \"line\",\n    size: \"default\",\n    items: [\n      {\n        name: \"Label 1\",\n        value: \"1\",\n        content: \"Hello 1\",\n        icon: \"ph ph-browser\",\n      },\n      {\n        name: \"Label 2\",\n        value: \"2\",\n        content: \"Hello 2\",\n        count: \"12\",\n        icon: \"ph ph-browser\",\n      },\n      {\n        name: \"Label 3\",\n        value: \"3\",\n        content: \"Hello 3\",\n        disabled: true,\n        icon: \"ph ph-browser\",\n      },\n    ],\n  }}\n/>);\n```\n\n</WidgetEditor>\n\n:::info DIG.Tabs properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Tabs&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Theme`\n\nThis component wraps all of NEAR Components so you don't need to render it yourself.", "mimetype": "text/plain", "start_char_idx": 14404, "end_char_idx": 16140, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f8e22b88-686b-4dc7-8fdd-07e54e218710": {"__data__": {"id_": "f8e22b88-686b-4dc7-8fdd-07e54e218710", "embedding": null, "metadata": {"file_path": "./near_dist/design-system.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6", "node_type": "4", "metadata": {}, "hash": "09a60939023a4a30bc5aa5a7f3c7589d038cd49eaf5952c16d20b811da95789e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d86664c1-9764-4f4c-aa05-ce7ead56d53a", "node_type": "1", "metadata": {}, "hash": "ff8ed26d589b3df02132a83bdc00639c7a27c73ce02b3b8e3b0acb6b5b0b21ab", "class_name": "RelatedNodeInfo"}}, "text": ":::tip\nYou can use any of the [CSS variables](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/DIG.Theme&tab=source) defined inside `DIG.Theme`.\n:::\n\n---\n\n### `DIG.Toast`\n\nThis toast component is built with [Radix primitive](https://www.radix-ui.com/primitives/docs/components/toast).\n\n<WidgetEditor networkId=\"mainnet\" id=\"16\">\n\n```jsx\nState.init({ showToast: false });\n\n// Rendering the component with props\nreturn (\n  <Widget\n    src=\"near/widget/DIG.Toast\"\n    props={{\n      title: \"Title\",\n      description: \"This is the toast description\",\n      type: \"success\",\n      open: state.showToast,\n      onOpenChange: (value) => State.update({ showToast: value }),\n      trigger: (\n        <Widget\n          src=\"near/widget/DIG.Button\"\n          props={{\n            label: \"Show Toast\",\n            onClick: () => State.update({ showToast: true }),\n          }}\n        />\n      ),\n      action: (\n        <Widget\n          src=\"near/widget/DIG.Button\"\n          props={{\n            label: \"Dismiss\",\n            onClick: () => State.update({ showToast: false }),\n          }}\n        />\n      ),\n      providerProps: { duration: 1000 },\n    }}\n  />\n);\n```\n\n</WidgetEditor>\n\n:::info DIG.Toast properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Toast&tab=about) for properties and details.\n\n:::\n\n---\n\n### `DIG.Tooltip`\n\nA tooltip built with the [Radix primitive](https://www.radix-ui.com/docs/primitives/components/tooltip).\n\n<WidgetEditor networkId=\"mainnet\" id=\"17\">\n\n```jsx\n// Rendering the component with props\nreturn (<Widget\n  src=\"near/widget/DIG.Tooltip\"\n  props={{\n    content: \"This is my tooltip content.\",\n    trigger: (\n      <Widget src=\"near/widget/DIG.Button\" props={{ label: \"Hover Me\" }} />\n    ),\n  }}\n/>);\n```\n\n</WidgetEditor>\n\n:::info DIG.Tooltip properties\n\n[Click here](https://dev.near.org/#/near/widget/ComponentDetailsPage?src=near/widget/DIG.Tooltip&tab=about) for properties and details.\n\n:::", "mimetype": "text/plain", "start_char_idx": 16142, "end_char_idx": 18133, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d94dd9f-0ada-448e-8466-ca02e1560843": {"__data__": {"id_": "1d94dd9f-0ada-448e-8466-ca02e1560843", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "62f0d714-75d5-404d-9619-9b912fffa433", "node_type": "1", "metadata": {}, "hash": "27ad9e58c9f7188d89ff80113918ea7938b583ad445b1c5be997d096f0cec62c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: feed-indexer\ntitle: Social Feed Indexer\nsidebar_label: Social Feed Indexer\n---\n\n:::tip\n\nThis tutorial creates a blockchain indexer using [NEAR QueryAPI](../../../2.build/6.data-infrastructure/query-api/intro.md).\n\n:::\n\n## Running `feed-indexer`\n\nThe indexer `indexingLogic.js` is comprised of functions that help handle, transform and record data. The main logic for handling transaction data as it occurs from the blockchain can be found underneath the comment marked:\n\n```js\n// Add your code here\n```\n\nA schema is also specified for the tables in which data from relevant transactions is to be persisted, this can be found in the `schema.sql` tab.\n\n:::tip\n\nThis indexer can be found by [following this link](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=dataplatform.near/social_feed).\n\n:::\n\n## Schema Definition\n\n:::note\n\nNote that database tables are named as `roshaan_near_feed_indexer_posts` which follows the format `<account_name>_near_<indexer_name>_<table_name>`.\n\n:::\n\n### Schema-Defined Table Names", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1051, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "62f0d714-75d5-404d-9619-9b912fffa433": {"__data__": {"id_": "62f0d714-75d5-404d-9619-9b912fffa433", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d94dd9f-0ada-448e-8466-ca02e1560843", "node_type": "1", "metadata": {}, "hash": "2afd154b8bf5f59ceb20ed446d2ae15f905c54e5410f5202388d61d6ceb033d0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1630006f-0436-42c5-b1a8-97d82a7a3c58", "node_type": "1", "metadata": {}, "hash": "f3972667943ba6757513760e536a0242bd066201d815a7f02318ec53be88a806", "class_name": "RelatedNodeInfo"}}, "text": "```sql\nCREATE TABLE\n  \"posts\" (\n    \"id\" SERIAL NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    \"content\" TEXT NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    \"accounts_liked\" JSONB NOT NULL DEFAULT '[]',\n    \"last_comment_timestamp\" DECIMAL(20, 0),\n    CONSTRAINT \"posts_pkey\" PRIMARY KEY (\"id\")\n  );\n\nCREATE TABLE\n  \"comments\" (\n    \"id\" SERIAL NOT NULL,\n    \"post_id\" SERIAL NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"content\" TEXT NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    CONSTRAINT \"comments_pkey\" PRIMARY KEY (\"id\")\n  );\n\nCREATE TABLE\n  \"post_likes\" (\n    \"post_id\" SERIAL NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0),\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    CONSTRAINT \"post_likes_pkey\" PRIMARY KEY (\"post_id\", \"account_id\")\n  );\n\nCREATE UNIQUE INDEX \"posts_account_id_block_height_key\" ON \"posts\" (\"account_id\" ASC, \"block_height\" ASC);\n\nCREATE UNIQUE INDEX \"comments_post_id_account_id_block_height_key\" ON \"comments\" (\n  \"post_id\" ASC,\n  \"account_id\" ASC,\n  \"block_height\" ASC\n);\n\nCREATE INDEX\n  \"posts_last_comment_timestamp_idx\" ON \"posts\" (\"last_comment_timestamp\" DESC);\n\nALTER TABLE\n  \"comments\"\nADD\n  CONSTRAINT \"comments_post_id_fkey\" FOREIGN KEY (\"post_id\") REFERENCES \"posts\" (\"id\") ON DELETE NO ACTION ON UPDATE NO ACTION;\n\nALTER TABLE\n  \"post_likes\"\nADD\n  CONSTRAINT \"post_likes_post_id_fkey\" FOREIGN KEY (\"post_id\") REFERENCES \"posts\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION;\n```\n\nThe tables declared in the schema definition are created when the indexer is deployed.", "mimetype": "text/plain", "start_char_idx": 1054, "end_char_idx": 2827, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1630006f-0436-42c5-b1a8-97d82a7a3c58": {"__data__": {"id_": "1630006f-0436-42c5-b1a8-97d82a7a3c58", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "62f0d714-75d5-404d-9619-9b912fffa433", "node_type": "1", "metadata": {}, "hash": "27ad9e58c9f7188d89ff80113918ea7938b583ad445b1c5be997d096f0cec62c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c62d1de-a487-4641-b217-36b7135b65c4", "node_type": "1", "metadata": {}, "hash": "861c128140a27d6a0255fd78cc1f469b6e4fedaa07ad68958e530ddf0435d6c2", "class_name": "RelatedNodeInfo"}}, "text": "In this schema definition, three tables are created: `posts`, `comments` and `post_likes`. Indexes are then defined for each and then foreign key dependencies.\n\n## Main Function\n\nThe main function can be explained in two parts. The first filters relevant transactional data for processing by the helper functions defined earlier in the file scope, the second part uses the helper functions to ultimately save the relevant data to for querying by applications.\n\n### Filtering for Relevant Data\n\n```js\nconst SOCIAL_DB = \"social.near\";\n\n  const nearSocialPosts = block\n    .actions()\n    .filter((action) => action.receiverId === SOCIAL_DB)\n    .flatMap((action) =>\n      action.operations\n        .map((operation) => operation[\"FunctionCall\"])\n        .filter((operation) => operation?.methodName === \"set\")\n        .map((functionCallOperation) => {\n          try {\n            const decodedArgs = base64decode(functionCallOperation.args);\n            return {\n              ...functionCallOperation,\n              args: decodedArgs,\n              receiptId: action.receiptId,\n            };\n          } catch (error) {\n            console.log(\n              \"Failed to decode function call args\",\n              functionCallOperation,\n              error\n            );\n          }\n        })\n        .filter((functionCall) => {\n          try {\n            const accountId = Object.keys(functionCall.args.data)[0];\n            return (\n              Object.keys(functionCall.args.data[accountId]).includes(\"post\") ||\n              Object.keys(functionCall.args.data[accountId]).includes(\"index\")\n            );\n          } catch (error) {\n            console.log(\n              \"Failed to parse decoded function call\",\n              functionCall,\n              error\n            );\n          }\n        })\n    );\n```\n\nWe first designate the near account ID that is on the receiving end of the transactions picked up by the indexer, as `SOCIAL_DB = \"social.near\"` and later with the equality operator for this check. This way we only filter for transactions that are relevant to the `social.near` account ID for saving data on-chain.\n\nThe filtering logic then begins by calling `block.actions()` where `block` is defined within the `@near-lake/primtives` package. The output from this filtering is saved in a `nearSocialPosts` variable for later use by the helper functions. The `.filter()` line helps specify for transactions exclusively that have interacted with the SocialDB.", "mimetype": "text/plain", "start_char_idx": 2828, "end_char_idx": 5302, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c62d1de-a487-4641-b217-36b7135b65c4": {"__data__": {"id_": "3c62d1de-a487-4641-b217-36b7135b65c4", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1630006f-0436-42c5-b1a8-97d82a7a3c58", "node_type": "1", "metadata": {}, "hash": "f3972667943ba6757513760e536a0242bd066201d815a7f02318ec53be88a806", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e33c0e66-0ba2-45bb-95d7-10c396e455d0", "node_type": "1", "metadata": {}, "hash": "c576b12fa60305b207023d8e982b59217f351e03c79dbfc1a50ec0cfd62f9793", "class_name": "RelatedNodeInfo"}}, "text": "`.flatMap()` specifies the types of transaction and looks for attributes in the transaction data on which to base the filter.\n\nSpecifically, `.flatMap()` filters for `FunctionCall` call types, calling the `set` method of the SocialDB contract. In addition, we look for transactions that include a `receiptId` and include either `post` or `index` in the function call argument data.\n\n### Processing Filtered Data\n\n```js\nif (nearSocialPosts.length > 0) {\n    console.log(\"Found Near Social Posts in Block...\");\n    const blockHeight = block.blockHeight;\n    const blockTimestamp = block.header().timestampNanosec;\n    await Promise.all(\n      nearSocialPosts.map(async (postAction) => {\n        const accountId = Object.keys(postAction.args.data)[0];\n        console.log(`ACCOUNT_ID: ${accountId}`);\n\n        // if creates a post\n        if (\n          postAction.args.data[accountId].post &&\n          Object.keys(postAction.args.data[accountId].post).includes(\"main\")\n        ) {\n          console.log(\"Creating a post...\");\n          await handlePostCreation(\n            ... // arguments required for handlePostCreation\n          );\n        } else if (\n          postAction.args.data[accountId].post &&\n          Object.keys(postAction.args.data[accountId].post).includes(\"comment\")\n        ) {\n          // if creates a comment\n          await handleCommentCreation(\n            ... // arguments required for handleCommentCreation\n          );\n        } else if (\n          Object.keys(postAction.args.data[accountId]).includes(\"index\")\n        ) {\n          // Probably like or unlike action is happening\n          if (\n            Object.keys(postAction.args.data[accountId].index).includes(\"like\")\n          ) {\n            console.log(\"handling like\");\n            await handleLike(\n              ... // arguments required for handleLike\n            );\n          }\n        }\n      })\n    );\n  }\n```\n\nThis logic is only entered if there are any `nearSocialPosts`, in which case it first declares the `blockHeight` and `blockTimestamp` variables that will be relevant when handling (transforming and persisting) the data. Then the processing for every transaction (or function call) is chained as a promise for asynchronous execution.\n\nWithin every promise, the `accountId` performing the call is extracted from the transaction data first.", "mimetype": "text/plain", "start_char_idx": 5303, "end_char_idx": 7647, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e33c0e66-0ba2-45bb-95d7-10c396e455d0": {"__data__": {"id_": "e33c0e66-0ba2-45bb-95d7-10c396e455d0", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c62d1de-a487-4641-b217-36b7135b65c4", "node_type": "1", "metadata": {}, "hash": "861c128140a27d6a0255fd78cc1f469b6e4fedaa07ad68958e530ddf0435d6c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f016a6e7-cda9-4965-8017-d42e945e4715", "node_type": "1", "metadata": {}, "hash": "5c768c64ad916461df40fd53e062a8e03f8f3e282b6f1fc11fef0a38728c1cb4", "class_name": "RelatedNodeInfo"}}, "text": "Then, depending on the attributes in the transaction data, there is logic for handling post creation, comment creation, or a like/unlike.\n\n## Helper Functions\n\n### `base64decode`\n\n```js\nfunction base64decode(encodedValue) {\n    let buff = Buffer.from(encodedValue, \"base64\");\n    return JSON.parse(buff.toString(\"utf-8\"));\n  }\n```\n\nThis function decodes a string that has been encoded in Base64 format. It takes a single argument, **`encodedValue`**, which is the Base64-encoded string to be decoded. The function returns the decoded string as a JavaScript object. Specifically:\n\n1. The **`Buffer.from()`** method is called with two arguments: **`encodedValue`** and **`\"base64\"`**. This creates a new **`Buffer`** object from the **`encodedValue`** string and specifies that the encoding format is Base64.\n2. The **`JSON.parse()`** method is called with the **`Buffer`** object returned by the **`Buffer.from()`** method as its argument. This parses the **`Buffer`** object as a JSON string and returns a JavaScript object.\n3. The **`toString()`** method is called on the **`Buffer`** object with **`\"utf-8\"`** as its argument. This converts the **`Buffer`** object to a string in UTF-8 format.\n4. The resulting string is returned as a JavaScript object.", "mimetype": "text/plain", "start_char_idx": 7648, "end_char_idx": 8903, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f016a6e7-cda9-4965-8017-d42e945e4715": {"__data__": {"id_": "f016a6e7-cda9-4965-8017-d42e945e4715", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e33c0e66-0ba2-45bb-95d7-10c396e455d0", "node_type": "1", "metadata": {}, "hash": "c576b12fa60305b207023d8e982b59217f351e03c79dbfc1a50ec0cfd62f9793", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "673c3064-5692-40c9-a969-a51e2d9c6639", "node_type": "1", "metadata": {}, "hash": "9ebd45e21cb38e16e12f05946b6de22b4d07aa070a482a41c0368ff763ee3d69", "class_name": "RelatedNodeInfo"}}, "text": "### `handlePostCreation`\n\n```js\nasync function handlePostCreation(\n    accountId,\n    blockHeight,\n    blockTimestamp,\n    receiptId,\n    content\n  ) {\n    try {\n      const postData = {\n        account_id: accountId,\n        block_height: blockHeight,\n        block_timestamp: blockTimestamp,\n        content: content,\n        receipt_id: receiptId,\n      };\n\n      // Call GraphQL mutation to insert a new post\n      await context.db.Posts.insert(postData);\n\n      console.log(`Post by ${accountId} has been added to the database`);\n    } catch (e) {\n      console.log(\n        `Failed to store post by ${accountId} to the database (perhaps it is already stored)`\n      );\n    }\n  }\n```\n\nAn object containing the relevant data to populate the `posts` table defined in the schema is created first to then be passed into the graphQL `createPost()` query that creates a new row in the table.", "mimetype": "text/plain", "start_char_idx": 8905, "end_char_idx": 9795, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "673c3064-5692-40c9-a969-a51e2d9c6639": {"__data__": {"id_": "673c3064-5692-40c9-a969-a51e2d9c6639", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f016a6e7-cda9-4965-8017-d42e945e4715", "node_type": "1", "metadata": {}, "hash": "5c768c64ad916461df40fd53e062a8e03f8f3e282b6f1fc11fef0a38728c1cb4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2af3e714-9524-4a22-82a8-d5350b1233f7", "node_type": "1", "metadata": {}, "hash": "1bcd8d80245400a0ccc4fd0c7c915f1551c7a13997f5019fe1602d286eb236ba", "class_name": "RelatedNodeInfo"}}, "text": "### `handleCommentCreation`\n\n```js\nasync function handleCommentCreation(\n    accountId,\n    blockHeight,\n    blockTimestamp,\n    receiptId,\n    commentString\n  ) {\n    try {\n      const comment = JSON.parse(commentString);\n      const postAuthor = comment.item.path.split(\"/\")[0];\n      const postBlockHeight = comment.item.blockHeight;\n\n      // find post to retrieve Id or print a warning that we don't have it\n      try {\n        // Call GraphQL query to fetch posts that match specified criteria\n        const posts = await context.db.Posts.select(\n          { account_id: postAuthor, block_height: postBlockHeight },\n          1\n        );\n        console.log(`posts: ${JSON.stringify(posts)}`);\n        if (posts.length === 0) {\n          return;\n        }\n\n        const post = posts[0];\n\n        try {\n          delete comment[\"item\"];\n          const commentData = {\n            account_id: accountId,\n            receipt_id: receiptId,\n            block_height: blockHeight,\n            block_timestamp: blockTimestamp,\n            content: JSON.stringify(comment),\n            post_id: post.id,\n          };\n          // Call GraphQL mutation to insert a new comment\n          await context.db.Comments.insert(commentData);\n\n          // Update last comment timestamp in Post table\n          const currentTimestamp = Date.now();\n          await context.db.Posts.update(\n            { id: post.id },\n            { last_comment_timestamp: currentTimestamp }\n          );\n          console.log(`Comment by ${accountId} has been added to the database`);\n        } catch (e) {\n          console.log(\n            `Failed to store comment to the post ${postAuthor}/${postBlockHeight} by ${accountId} perhaps it has already been stored. Error ${e}`\n          );\n        }\n      } catch (e) {\n        console.log(\n          `Failed to store comment to the post ${postAuthor}/${postBlockHeight} as we don't have the post stored.`\n        );\n      }\n    } catch (error) {\n      console.log(\"Failed to parse comment content. Skipping...\", error);\n    }\n  }\n```\n\nTo save or create a comment the relevant post is fetched first. If no posts are found the comment will not be created. If there is a post created in the graphQL DB, the `mutationData` object is constructed for the `createComment()` graphQL query that adds a row to the `comments` table.", "mimetype": "text/plain", "start_char_idx": 9797, "end_char_idx": 12144, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2af3e714-9524-4a22-82a8-d5350b1233f7": {"__data__": {"id_": "2af3e714-9524-4a22-82a8-d5350b1233f7", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "673c3064-5692-40c9-a969-a51e2d9c6639", "node_type": "1", "metadata": {}, "hash": "9ebd45e21cb38e16e12f05946b6de22b4d07aa070a482a41c0368ff763ee3d69", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c873885-ba2e-4953-9ec5-4104279d98ce", "node_type": "1", "metadata": {}, "hash": "755e8301815387ec3175c1896896b4fa7fec5f05f50be3cfb247a83a753a1e61", "class_name": "RelatedNodeInfo"}}, "text": "Once this row has been added, the relevant row in the `posts` table is updated to this comment\u2019s timestamp.\n\n### `handleLike`\n\n```js\nasync function handleLike(\n    accountId,\n    blockHeight,\n    blockTimestamp,\n    receiptId,\n    likeContent\n  ) {\n    try {\n      const like = JSON.parse(likeContent);\n      const likeAction = like.value.type; // like or unlike\n      const [itemAuthor, _, itemType] = like.key.path.split(\"/\", 3);\n      const itemBlockHeight = like.key.blockHeight;\n      console.log(\"handling like\", receiptId, accountId);\n      switch (itemType) {\n        case \"main\":\n          try {\n            const posts = await context.db.Posts.select(\n              { account_id: itemAuthor, block_height: itemBlockHeight },\n              1\n            );\n            if (posts.length == 0) {\n              return;\n            }\n\n            const post = posts[0];\n            switch (likeAction) {\n              case \"like\":\n                await _handlePostLike(\n                  post.id,\n                  accountId,\n                  blockHeight,\n                  blockTimestamp,\n                  receiptId\n                );\n                break;\n              case \"unlike\":\n                await _handlePostUnlike(post.id, accountId);\n                break;\n            }\n          } catch (e) {\n            console.log(\n              `Failed to store like to post ${itemAuthor}/${itemBlockHeight} as we don't have it stored in the first place.`\n            );\n          }\n          break;\n        case \"comment\":\n          // Comment\n          console.log(`Likes to comments are not supported yet. Skipping`);\n          break;\n        default:\n          // something else\n          console.log(`Got unsupported like type \"${itemType}\". Skipping...`);\n          break;\n      }\n    } catch (error) {\n      console.log(\"Failed to parse like content. Skipping...\", error);\n    }\n  }\n```\n\nAs with `handleCommentCreation` , first the relevant post is sought from the DB store. If the relevant post is found, the logic proceeds to handling the like being either a like or a dislike.", "mimetype": "text/plain", "start_char_idx": 12145, "end_char_idx": 14242, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c873885-ba2e-4953-9ec5-4104279d98ce": {"__data__": {"id_": "0c873885-ba2e-4953-9ec5-4104279d98ce", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2af3e714-9524-4a22-82a8-d5350b1233f7", "node_type": "1", "metadata": {}, "hash": "1bcd8d80245400a0ccc4fd0c7c915f1551c7a13997f5019fe1602d286eb236ba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73583fa7-065e-4b21-abea-b6539e085693", "node_type": "1", "metadata": {}, "hash": "4f3ab7e24371ca414f3c817058e3c2ae875dbf729aaee80e1080a017af864dfa", "class_name": "RelatedNodeInfo"}}, "text": "### `_handlePostLike`\n\n```js\nasync function _handlePostLike(\n    postId,\n    likeAuthorAccountId,\n    likeBlockHeight,\n    blockTimestamp,\n    receiptId\n  ) {\n    try {\n      const posts = await context.db.Posts.select({ id: postId });\n      if (posts.length == 0) {\n        return;\n      }\n      const post = posts[0];\n      let accountsLiked =\n        post.accounts_liked.length === 0\n          ? post.accounts_liked\n          : JSON.parse(post.accounts_liked);\n\n      if (accountsLiked.indexOf(likeAuthorAccountId) === -1) {\n        accountsLiked.push(likeAuthorAccountId);\n      }\n\n      // Call GraphQL mutation to update a post's liked accounts list\n      await context.db.Posts.update(\n        { id: postId },\n        { accounts_liked: JSON.stringify(accountsLiked) }\n      );\n\n      const postLikeData = {\n        post_id: postId,\n        account_id: likeAuthorAccountId,\n        block_height: likeBlockHeight,\n        block_timestamp: blockTimestamp,\n        receipt_id: receiptId,\n      };\n      // Call GraphQL mutation to insert a new like for a post\n      await context.db.PostLikes.insert(postLikeData);\n    } catch (e) {\n      console.log(`Failed to store like to in the database: ${e}`);\n    }\n  }\n```\n\nAs with `handleLike`, the relevant `post` is first sought from the graphQL DB table defined in `schema.sql`. If a post is found, the `accountsLiked` array is defined from the post\u2019s previous array plus the additional account that has performed the like account in `accountsLiked.push(likeAuthorAccountId)`. The graphQL query then updates the `posts` table to include this information. Lastly, the `postLikeMutation` object is created with the required data for adding a new row to the `post_likes` table.\n\n### `_handlePostUnlike`\n\n```js\nasync function _handlePostUnlike(postId, likeAuthorAccountId) {\n    try {\n      const posts = await context.db.Posts.select({ id: postId });\n      if (posts.length == 0) {\n        return;\n      }\n      const post = posts[0];\n      let accountsLiked =\n        post.accounts_liked.length === 0\n          ?", "mimetype": "text/plain", "start_char_idx": 14244, "end_char_idx": 16303, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73583fa7-065e-4b21-abea-b6539e085693": {"__data__": {"id_": "73583fa7-065e-4b21-abea-b6539e085693", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c873885-ba2e-4953-9ec5-4104279d98ce", "node_type": "1", "metadata": {}, "hash": "755e8301815387ec3175c1896896b4fa7fec5f05f50be3cfb247a83a753a1e61", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4b4d3e3b-a422-4242-b4fe-3ba6eb414d61", "node_type": "1", "metadata": {}, "hash": "cfe89b0f292b9c779b4e0154262bf9ab53bc9656a3194bace5ce377e6f9414e1", "class_name": "RelatedNodeInfo"}}, "text": "post.accounts_liked\n          : JSON.parse(post.accounts_liked);\n\n      console.log(accountsLiked);\n\n      let indexOfLikeAuthorAccountIdInPost =\n        accountsLiked.indexOf(likeAuthorAccountId);\n      if (indexOfLikeAuthorAccountIdInPost > -1) {\n        accountsLiked.splice(indexOfLikeAuthorAccountIdInPost, 1);\n        // Call GraphQL mutation to update a post's liked accounts list\n        await context.db.Posts.update(\n          { id: postId },\n          { accounts_liked: JSON.stringify(accountsLiked) }\n        );\n      }\n      // Call GraphQL mutation to delete a like for a post\n      await context.db.PostLikes.delete({\n        account_id: likeAuthorAccountId,\n        post_id: postId,\n      });\n    } catch (e) {\n      console.log(`Failed to delete like from the database: ${e}`);\n    }\n  }\n```\n\nHere we also search for an existing relevant post in the `posts` table and if one has been found, the `accountsLiked` is defined as to update it removing the account ID of the account that has performed the like action. Then a graphQL `delete` query is called to remove the like from the `post_likes` table.\n\n## Querying data from the indexer\n\nThe final step is querying the indexer using the public GraphQL API. This can be done by writing a GraphQL query using the GraphiQL tab in the code editor.\n\nFor example, here's a query that fetches `likes` from the _Feed Indexer_, ordered by `block_height`:\n\n```graphql\nquery MyQuery {\n  <user-name>_near_feed_indexer_post_likes(order_by: {block_height: desc}) {\n    account_id\n    block_height\n    post_id\n  }\n}\n```\n\nOnce you have defined your query, you can use the GraphiQL Code Exporter to auto-generate a JavaScript or NEAR Widget code snippet. The exporter will create a helper method `fetchGraphQL` which will allow you to fetch data from the indexer's GraphQL API. It takes three parameters:\n\n- `operationsDoc`: A string containing the queries you would like to execute.\n- `operationName`: The specific query you want to run.\n- `variables`: Any variables to pass in that your query supports, such as `offset` and `limit` for pagination.\n\nNext, you can call the `fetchGraphQL` function with the appropriate parameters and process the results.", "mimetype": "text/plain", "start_char_idx": 16304, "end_char_idx": 18507, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4b4d3e3b-a422-4242-b4fe-3ba6eb414d61": {"__data__": {"id_": "4b4d3e3b-a422-4242-b4fe-3ba6eb414d61", "embedding": null, "metadata": {"file_path": "./near_dist/feed-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f", "node_type": "4", "metadata": {}, "hash": "a1a52ad545bd067aa81b0c6de64a141429d237e3f5133c54f5f599aeac5d7c73", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73583fa7-065e-4b21-abea-b6539e085693", "node_type": "1", "metadata": {}, "hash": "4f3ab7e24371ca414f3c817058e3c2ae875dbf729aaee80e1080a017af864dfa", "class_name": "RelatedNodeInfo"}}, "text": "Here's the complete code snippet for a NEAR component using the _Feed Indexer_:\n\n```js\nconst QUERYAPI_ENDPOINT = `https://near-queryapi.api.pagoda.co/v1/graphql/`;\n\nState.init({\ndata: []\n});\n\nconst query = `query MyFeedQuery {\n    <user-name>_near_feed_indexer_post_likes(order_by: {block_height: desc}) {\n      account_id\n      block_height\n      post_id\n    }\n  }`\n\nfunction fetchGraphQL(operationsDoc, operationName, variables) {\n      return asyncFetch(\n        QUERYAPI_ENDPOINT,\n        {\n          method: \"POST\",\n          headers: { \"x-hasura-role\": `<user-name>_near` },\n          body: JSON.stringify({\n            query: operationsDoc,\n            variables: variables,\n            operationName: operationName,\n          }),\n        }\n      );\n    }\n\nfetchGraphQL(query, \"MyFeedQuery\", {}).then((result) => {\n  if (result.status === 200) {\n    if (result.body.data) {\n      const data = result.body.data.<user-name>_near_feed_indexer_post_likes;\n      State.update({ data })\n      console.log(data);\n    }\n  }\n});\n\nconst renderData = (a) => {\n  return (\n    <div key={JSON.stringify(a)}>\n        {JSON.stringify(a)}\n    </div>\n  );\n};\n\nconst renderedData = state.data.map(renderData);\nreturn (\n  {renderedData}\n);\n```\n\n\n:::tip\n\nTo view a more complex example, see this widget which fetches posts with proper pagination: [Posts Widget powered By QueryAPI](https://dev.near.org/edit/roshaan.near/widget/query-api-feed-infinite).\n\n:::", "mimetype": "text/plain", "start_char_idx": 18509, "end_char_idx": 19953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68d7f2a9-83f0-4ded-87d6-7bd1b5f269e6": {"__data__": {"id_": "68d7f2a9-83f0-4ded-87d6-7bd1b5f269e6", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "75da603a-64a8-42ae-bead-689bb54fb329", "node_type": "1", "metadata": {}, "hash": "fc4a5aad094f0588f658dfac00ad3afec0d6a4b99ed1d0a577f33a1498c61fb3", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: fungible-tokens\ntitle: Fungible tokens\nsidebar_label: Fungible Tokens\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n## Introduction {#introduction}\n\nPlease see the [spec for the fungible token standard](https://nomicon.io/Standards/FungibleToken/) and an [example implementation](https://github.com/near-examples/FT) for reference details.\n\nOne notable aspect of the standard is that method names are prefixed with `ft_`. This will be a helpful convention when querying for transactions related to fungible tokens.\n\n## Get balance {#get-balance}\n\nUsing the abstraction of the [NEAR CLI](/tools/near-cli) tool, we can check the balance of a user's account with [`near view`](/tools/near-cli#call):\n\n`near view ft.demo.testnet ft_balance_of '{\"account_id\": \"mike.testnet\"}'`\n\nReturns:\n\n```\nView call: ft.demo.testnet.ft_balance_of({\"account_id\": \"mike.testnet\"})\n'1000000'\n```\n\nAlternatively, you can [call a contract function](/api/rpc/setup#call-a-contract-function) using the `query` RPC endpoint.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1036, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "75da603a-64a8-42ae-bead-689bb54fb329": {"__data__": {"id_": "75da603a-64a8-42ae-bead-689bb54fb329", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68d7f2a9-83f0-4ded-87d6-7bd1b5f269e6", "node_type": "1", "metadata": {}, "hash": "c2ccf5764112bf244e626fe5513aaf22d802614296d5007f8274cf6b997d1d00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5cc04949-3755-4b29-a29d-2dc64d401095", "node_type": "1", "metadata": {}, "hash": "9d952772eb5c54a0f628942eb3053c64b4b45ac2c44ab519fbd40266e5a577e9", "class_name": "RelatedNodeInfo"}}, "text": "Below is an example using HTTPie:\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=ftbalance method=query \\\nparams:='{\n  \"request_type\": \"call_function\",\n  \"finality\": \"final\",\n  \"account_id\": \"ft.demo.testnet\",\n  \"method_name\": \"ft_balance_of\",\n  \"args_base64\": \"eyJhY2NvdW50X2lkIjogIm1pa2UudGVzdG5ldCJ9\"\n}'\n```\n\nReturns:\n\n```bash\nHTTP/1.1 200 OK\nAlt-Svc: clear\nVia: 1.1 google\naccess-control-allow-origin:\ncontent-length: 176\ncontent-type: application/json\ndate: Thu, 27 May 2021 12:53:38 GMT\n\n{\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\",\n    \"result\": {\n        \"block_hash\": \"3mvNHpZAsXiJ6SuHU1mbLVB4iXCfh5i5d41pnkaSoaJ5\",\n        \"block_height\": 49282350,\n        \"logs\": [],\n        \"result\": [ 34, 49, 48, 48, 48, 48, 48, 48, 34 ]\n    }\n}\n```\n\nAs mentioned earlier, the `result` is an array of bytes. There are various ways to convert bytes into a more human-readable form such as the [dtool CLI](https://github.com/guoxbin/dtool#installation).\n\n`dtool a2h '[34,49,48,48,48,48,48,48,34]' | dtool h2s`\n\nReturns:\n\n`\"1000000\"`\n\n**Note:** The fungible token balance of the account `mike.testnet` is `1000000` wrapped in double-quotes. This is because of an issue with JSON serialization. Amounts given in arguments and results must be serialized as Base-10 strings, e.g. \"100\". This is done to avoid JSON limitation of max integer value of 2**53, which can certainly happen with fungible tokens.\n\n## Get info about the FT {#get-info-about-the-ft}\n\nYou can get `name`, `decimals`,", "mimetype": "text/plain", "start_char_idx": 1037, "end_char_idx": 2534, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5cc04949-3755-4b29-a29d-2dc64d401095": {"__data__": {"id_": "5cc04949-3755-4b29-a29d-2dc64d401095", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "75da603a-64a8-42ae-bead-689bb54fb329", "node_type": "1", "metadata": {}, "hash": "fc4a5aad094f0588f658dfac00ad3afec0d6a4b99ed1d0a577f33a1498c61fb3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "72abd714-515d-4853-a369-3782eb2f4c02", "node_type": "1", "metadata": {}, "hash": "a3306597b6555a641200673f9d4db1a569ce57985de7be28cb74353d29ec65fc", "class_name": "RelatedNodeInfo"}}, "text": "`icon` and other parameters by calling the next function:\n  - using NEAR CLI:\n\n```bash\nnear view <contract_account_id> ft_metadata\n```\n\nResult:\n\n```bash\nView call: ft.demo.testnet.ft_metadata()\n{\n  spec: 'ft-1.0.0',\n  name: 'Example Token Name',\n  symbol: 'MOCHI',\n  icon: null,\n  reference: null,\n  reference_hash: null,\n  decimals: 24\n}\n```\n\n  - with JSON RPC call:\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=ftmetadata method=query \\\n  params:='{\n    \"request_type\": \"call_function\",\n    \"finality\": \"final\",\n    \"account_id\": \"<contract_account_id>\",\n    \"method_name\": \"ft_metadata\",\n    \"args_base64\": \"\"\n  }'\n```\n\nExample response:\n\n```bash\nHTTP/1.1 200 OK\nAlt-Svc: clear\nVia: 1.1 google\naccess-control-allow-origin:\ncontent-length: 604\ncontent-type: application/json\ndate: Wed, 02 Jun 2021 15:51:17 GMT\n\n{\n  \"id\": \"ftmetadata\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n      \"block_hash\": \"B3fu3v4dmn19B6oqjHUXN3k5NhdP9EW5kkjyuFUDpa1r\",\n      \"block_height\": 50061565,\n      \"logs\": [],\n      \"result\": [ 123, 34, 115, 112, 101, 99, 34, 58, 34, 102, 116, 45, 49, 46, 48, 46, 48, 34, 44, 34, 110, 97, 109, 101, 34, 58, 34, 69, 120, 97, 109, 112, 108, 101, 32, 84, 111, 107, 101, 110, 32, 78, 97, 109, 101, 34, 44,", "mimetype": "text/plain", "start_char_idx": 2535, "end_char_idx": 3768, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "72abd714-515d-4853-a369-3782eb2f4c02": {"__data__": {"id_": "72abd714-515d-4853-a369-3782eb2f4c02", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5cc04949-3755-4b29-a29d-2dc64d401095", "node_type": "1", "metadata": {}, "hash": "9d952772eb5c54a0f628942eb3053c64b4b45ac2c44ab519fbd40266e5a577e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b", "node_type": "1", "metadata": {}, "hash": "a539e9b5137c6ad3400c71edf294b1aa81e779522a5c9b91dc8f60274326687e", "class_name": "RelatedNodeInfo"}}, "text": "34, 115, 121, 109, 98, 111, 108, 34, 58, 34, 77, 79, 67, 72, 73, 34, 44, 34, 105, 99, 111, 110, 34, 58, 110, 117, 108, 108, 44, 34, 114, 101, 102, 101, 114, 101, 110, 99, 101, 34, 58, 110, 117, 108, 108, 44, 34, 114, 101, 102, 101, 114, 101, 110, 99, 101, 95, 104, 97, 115, 104, 34, 58, 110, 117, 108, 108, 44, 34, 100, 101, 99, 105, 109, 97, 108, 115, 34, 58, 50, 52, 125 ]\n  }\n}\n```\n\nDecoded result in this case is:\n\n```json\n{\n    \"spec\": \"ft-1.0.0\",\n    \"name\": \"Example Token Name\",\n    \"symbol\": \"MOCHI\",\n    \"icon\": null,\n    \"reference\": null,\n    \"reference_hash\": null,\n    \"decimals\": 24\n}\n```\n\n## Simple transfer {#simple-transfer}\n\nTo follow this guide, please check the [step by step instructions](/integrations/create-transactions#low-level----create-a-transaction) on how to create a transaction first.\n\nIn order to send a fungible token to an account, the receiver must have a storage deposit. This is because each smart contract on NEAR must account for storage used, and each account on a fungible token contract is a key-value pair, taking up a small amount of storage. For more information, please see [how storage works in NEAR](/concepts/storage/storage-staking). To check if account has deposited the storage for this FT do the following:\n\nGet storage balance of the account.", "mimetype": "text/plain", "start_char_idx": 3769, "end_char_idx": 5067, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b": {"__data__": {"id_": "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "72abd714-515d-4853-a369-3782eb2f4c02", "node_type": "1", "metadata": {}, "hash": "a3306597b6555a641200673f9d4db1a569ce57985de7be28cb74353d29ec65fc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7e66126-886b-4277-aa7c-f8cced9a6e79", "node_type": "1", "metadata": {}, "hash": "16de0e636716227a5a36c77b654d76649ff798184002ac0a64b9baa5eec4a36b", "class_name": "RelatedNodeInfo"}}, "text": "`storage_balance_of` function returns the amount of deposited storage or `null` if there is no deposit.\n  - using NEAR CLI:\n\n```bash\nnear view <contract_account_id> storage_balance_of '{\"account_id\": \"<user_account_id>\"}'\n```\n\n    Result:\n\n```bash\nView call: ft.demo.testnet.storage_balance_of({\"account_id\": \"serhii.testnet\"})\nnull\n```\n\n  - with JSON RPC call:\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=storagebalanceof method=query \\\n  params:='{\n     \"request_type\": \"call_function\",\n     \"finality\": \"final\",\n     \"account_id\": \"ft.demo.testnet\",\n     \"method_name\": \"storage_balance_of\",\n     \"args_base64\": \"eyJhY2NvdW50X2lkIjogInNlcmhpaS50ZXN0bmV0In0K\"\n  }'\n```\n\nExample response:\n\n```bash\nHTTP/1.1 200 OK\nAlt-Svc: clear\nVia: 1.1 google\naccess-control-allow-origin:\ncontent-length: 173\ncontent-type: application/json\ndate: Wed, 02 Jun 2021 14:22:01 GMT\n{\n  \"id\": \"storagebalanceof\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n      \"block_hash\": \"EkM2j4yxRVoQ1TCqF2KUb7J4w5G1VsWtMLiycq6k3f53\",\n      \"block_height\": 50054247,\n      \"logs\": [],\n      \"result\": [ 110, 117, 108, 108 ]\n  }\n}\n```\n\nDecoded result in this case is `null`.\n\nGet the minimum storage required for FT. (The storage used for an account's key-value pair.)\n\n  - using NEAR CLI:\n\n```bash\nnear view <contract_account_id> storage_balance_bounds`\n```\n\nResult:\n\n```bash\nView call: ft.demo.testnet.storage_balance_bounds()\n{ min: '1250000000000000000000', max: '1250000000000000000000' }\n```\n\n  - with JSON RPC call\n\n```bash\nhttp post https://rpc.testnet.near.", "mimetype": "text/plain", "start_char_idx": 5068, "end_char_idx": 6611, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d7e66126-886b-4277-aa7c-f8cced9a6e79": {"__data__": {"id_": "d7e66126-886b-4277-aa7c-f8cced9a6e79", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b", "node_type": "1", "metadata": {}, "hash": "a539e9b5137c6ad3400c71edf294b1aa81e779522a5c9b91dc8f60274326687e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2052fad6-d4fc-45f6-84f3-3e25be1b03cf", "node_type": "1", "metadata": {}, "hash": "afd7b894466ff1a18ee02074f7d4c6eab6ea9ef106e830557d83324212dfe065", "class_name": "RelatedNodeInfo"}}, "text": "org jsonrpc=2.0 id=storagebalancebounds method=query \\\n  params:='{\n      \"request_type\": \"call_function\",\n      \"finality\": \"final\",\n      \"account_id\": \"<contract_account_id>\",\n      \"method_name\": \"storage_balance_bounds\",\n      \"args_base64\": \"\"\n  }'\n```\n\nExample response:\n\n```bash\nHTTP/1.1 200 OK\nAlt-Svc: clear\nVia: 1.1 google\naccess-control-allow-origin:\ncontent-length: 357\ncontent-type: application/json\ndate: Wed, 02 Jun 2021 15:42:49 GMT\n\n{\n  \"id\": \"storagebalancebounds\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n      \"block_hash\": \"Fy3mBqwj5nvUDha3X7G61kmUeituHASEX12oCASrChEE\",\n      \"block_height\": 50060878,\n      \"logs\": [],\n      \"result\": [ 123, 34, 109, 105, 110, 34, 58, 34, 49, 50, 53, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 34, 44, 34, 109, 97, 120, 34, 58, 34, 49, 50, 53, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 34, 125 ]\n  }\n}\n```\n\nDecoded result should look similar to:\n\n```json\n  {\n    \"min\": \"1250000000000000000000\",\n    \"max\": \"1250000000000000000000\"\n  }\n```\n\nBasic fungible tokens are simple smart contracts that don't have variable storage as compared to a smart contract that might store free-form text, for instance.", "mimetype": "text/plain", "start_char_idx": 6611, "end_char_idx": 7831, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2052fad6-d4fc-45f6-84f3-3e25be1b03cf": {"__data__": {"id_": "2052fad6-d4fc-45f6-84f3-3e25be1b03cf", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d7e66126-886b-4277-aa7c-f8cced9a6e79", "node_type": "1", "metadata": {}, "hash": "16de0e636716227a5a36c77b654d76649ff798184002ac0a64b9baa5eec4a36b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "78c83d5a-73c4-4706-82f9-e89e4a59f417", "node_type": "1", "metadata": {}, "hash": "78d78094348b59de01f9044139178efec4aedf33bb7db700fbcf1bf23c9f72cc", "class_name": "RelatedNodeInfo"}}, "text": "The only storage needed is for an accounts key-value pair, which will always be covered by the `1250000000000000000000` yocto\u24c3 storage balance.\n\nIf there is not enough deposit for the storage or returned value is `null` - you should deposit more storage with the next command:\n  - using NEAR CLI, don't forget to convert from yocto\u24c3 to \u24c3:\n\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call <contract_account_id> storage_deposit '{\"account_id\": \"<user_account_id>\"}' --accountId <sender_account_id> --deposit <deposit in \u24c3>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction <contract_account_id> storage_deposit json-args '{\"account_id\": \"<user_account_id>\"}' prepaid-gas '100.0 Tgas' attached-deposit '<deposit in \u24c3> NEAR' sign-as <sender_account_id> network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nResult example:\n\n```bash\nScheduling a call: ft.demo.testnet.storage_deposit() with attached 0.125 NEAR\nTransaction Id 9CMrMMt3UzeU63FFrUyFb1gNGuHXxvKfHqYJzyFTAk6z\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/9CMrMMt3UzeU63FFrUyFb1gNGuHXxvKfHqYJzyFTAk6z\n{ total: '1250000000000000000000', available: '0' }\n```\n\n  - with JSON RPC call:\n\n  At the top of this section is a link detailing how to [construct a transaction](/integrations/create-transactions#low-level----create-a-transaction) without the full abstraction of the [`near-api-js` library](https://www.npmjs.com/package/near-api-js).", "mimetype": "text/plain", "start_char_idx": 7832, "end_char_idx": 9436, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78c83d5a-73c4-4706-82f9-e89e4a59f417": {"__data__": {"id_": "78c83d5a-73c4-4706-82f9-e89e4a59f417", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2052fad6-d4fc-45f6-84f3-3e25be1b03cf", "node_type": "1", "metadata": {}, "hash": "afd7b894466ff1a18ee02074f7d4c6eab6ea9ef106e830557d83324212dfe065", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e25bec66-983d-4b60-b9f7-6daa5e402155", "node_type": "1", "metadata": {}, "hash": "b12e076b16514ae6fd405d88d16d8a316baae17130144fa1f792e848a80bde29", "class_name": "RelatedNodeInfo"}}, "text": "For this and future examples that use the [RPC method `broadcast_tx_commit`](https://docs.near.org/api/rpc/setup#send-transaction-await) we will provide a JSON-like object meant to act similar to [pseudocode](https://en.wikipedia.org/wiki/Pseudocode), only imparting high-level details of a transaction. This code block below is the first example of this, detailing what goes into the transaction discussed currently, involving the method `storage_deposit`.\n\n```yaml\nTransaction: {\n\tblock_hash: `456\u2026abc`,\n\tsigner_id: \"serhii.testnet\",\n\tpublic_key: \"ed25519:789\u2026def\",\n\tnonce: 123,\n\treceiver_id: \"ft.demo.testnet\",\n\tactions: [\n\t\tFunctionCall(\n\t\t\tFunctionCallAction {\n\t\t\t\tmethod_name: storage_deposit,\n\t\t\t\targs: `{\"account_id\": \"robertyan.near\"}`,\n\t\t\t\tgas: 300000000000000,\n\t\t\t\tdeposit: 1250000000000000000000,\n\t\t\t},\n\t\t),\n\t]\n}\n```\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 9437, "end_char_idx": 10324, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e25bec66-983d-4b60-b9f7-6daa5e402155": {"__data__": {"id_": "e25bec66-983d-4b60-b9f7-6daa5e402155", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "78c83d5a-73c4-4706-82f9-e89e4a59f417", "node_type": "1", "metadata": {}, "hash": "78d78094348b59de01f9044139178efec4aedf33bb7db700fbcf1bf23c9f72cc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f95714f0-c1a2-4d99-b208-4fe2dcd0312b", "node_type": "1", "metadata": {}, "hash": "023f1ded576cc121fc2afa0999ce22811aa147d14b50a721db3be238029c548c", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=broadcast_tx_commit \\\n  params:='[\"DgAAAHNlcmhpaS50ZXN0bmV0AEKEp54fyVkp8dJE2l/m1ErjdhDGodBK8ZF6JLeHFMeZi/qoVEgrAAAPAAAAZnQuZGVtby50ZXN0bmV0JYbWPOu0P9T32vtUKnZSh+EaoboQqg0/De2i8Y+AjHIBAAAAAg8AAABzdG9yYWdlX2RlcG9zaXQCAAAAe30AQHoQ81oAAAAAILSd2XlDeBoAAAAAAAAAZF7+s4lcHOzy+re59VErt7LcZkPMMUVgOJV8LH5TsLBBv+8h/5tZ6+HFwxSp605A4c46oS9Jw4KBRXZD07lKCg==\"]'\n```\n\n<details>\n\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"myid\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"serhii.testnet\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"e30=\",\n                  \"deposit\": \"125000000000000000000000\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"storage_deposit\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"4urgFabknn1myZkjTYdb1BFSoEimP21k9smCUWoSggA7\",\n        \"receiver_id\": \"ft.", "mimetype": "text/plain", "start_char_idx": 10324, "end_char_idx": 11595, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f95714f0-c1a2-4d99-b208-4fe2dcd0312b": {"__data__": {"id_": "f95714f0-c1a2-4d99-b208-4fe2dcd0312b", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e25bec66-983d-4b60-b9f7-6daa5e402155", "node_type": "1", "metadata": {}, "hash": "b12e076b16514ae6fd405d88d16d8a316baae17130144fa1f792e848a80bde29", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ebe4c503-ded3-4635-8646-21d2a0d985e4", "node_type": "1", "metadata": {}, "hash": "339b5bc01fb8ba717aa2ab13ced7d484a3610c5aa7f7660354db8fba696f6512", "class_name": "RelatedNodeInfo"}}, "text": "demo.testnet\"\n      },\n      {\n        \"predecessor_id\": \"ft.demo.testnet\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"123750000000000000000000\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"7neJYE45vXnQia1LQqWuAfyTRXHy4vv88JaULa5DnNBd\",\n        \"receiver_id\": \"serhii.testnet\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"19200274886926125000\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"2c59u2zYj41JuhMfPUCKjNucmYfz2Jt83JLWP6VyQn1S\",\n        \"receiver_id\": \"serhii.testnet\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18587201427159524319124\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],", "mimetype": "text/plain", "start_char_idx": 11595, "end_char_idx": 13238, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ebe4c503-ded3-4635-8646-21d2a0d985e4": {"__data__": {"id_": "ebe4c503-ded3-4635-8646-21d2a0d985e4", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f95714f0-c1a2-4d99-b208-4fe2dcd0312b", "node_type": "1", "metadata": {}, "hash": "023f1ded576cc121fc2afa0999ce22811aa147d14b50a721db3be238029c548c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "52210c76-98a7-4896-9fab-14041ad4d0c0", "node_type": "1", "metadata": {}, "hash": "a257dffffc34598a0852bc3284f5290c6ca3fb42e6a16899fabadf36737ce1e4", "class_name": "RelatedNodeInfo"}}, "text": "\"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"kaYatRKxcC1NXac69WwTqg6K13oXq2yEuy4LLZtsV2G\",\n        \"receiver_id\": \"serhii.testnet\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"6Gz6P8N3F447kRc7kkxEhuZRZTzfuTUEagye65bPVGb\",\n        \"id\": \"4urgFabknn1myZkjTYdb1BFSoEimP21k9smCUWoSggA7\",\n        \"outcome\": {\n          \"executor_id\": \"ft.demo.testnet\",\n          \"gas_burnt\": 4258977405434,\n          \"logs\": [],\n          \"receipt_ids\": [\n            \"7neJYE45vXnQia1LQqWuAfyTRXHy4vv88JaULa5DnNBd\",\n            \"kaYatRKxcC1NXac69WwTqg6K13oXq2yEuy4LLZtsV2G\"\n          ],\n          \"status\": {\n            \"SuccessValue\": \"eyJ0b3RhbCI6IjEyNTAwMDAwMDAwMDAwMDAwMDAwMDAiLCJhdmFpbGFibGUiOiIwIn0=\"\n          },\n          \"tokens_burnt\": \"425897740543400000000\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"J6YXMnLPfLEPyvL3fWdhWPzpWAeW8zNY2CwAFwAg9tfr\",\n        \"id\": \"7neJYE45vXnQia1LQqWuAfyTRXHy4vv88JaULa5DnNBd\",", "mimetype": "text/plain", "start_char_idx": 13251, "end_char_idx": 14369, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52210c76-98a7-4896-9fab-14041ad4d0c0": {"__data__": {"id_": "52210c76-98a7-4896-9fab-14041ad4d0c0", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ebe4c503-ded3-4635-8646-21d2a0d985e4", "node_type": "1", "metadata": {}, "hash": "339b5bc01fb8ba717aa2ab13ced7d484a3610c5aa7f7660354db8fba696f6512", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2581c591-d4ad-4236-b30e-bc4bd81a6c6d", "node_type": "1", "metadata": {}, "hash": "efcf01f59d68754c513bbeee1aa8324de31a89a6ff48bb69ccba20f3d6be5c61", "class_name": "RelatedNodeInfo"}}, "text": "\"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 223182562500,\n          \"logs\": [],\n          \"receipt_ids\": [\n            \"2c59u2zYj41JuhMfPUCKjNucmYfz2Jt83JLWP6VyQn1S\"\n          ],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"22318256250000000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"D6tGfHwKh21PqzhBTsdKCsTtZvXFDkmH39dQiQBoGN3w\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"HRRF7N1PphZ46eN5g4DjqEgYHBYM76yGiXSTYWsfMGoy\",\n        \"id\": \"2c59u2zYj41JuhMfPUCKjNucmYfz2Jt83JLWP6VyQn1S\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"J6YXMnLPfLEPyvL3fWdhWPzpWAeW8zNY2CwAFwAg9tfr\",\n        \"id\": \"kaYatRKxcC1NXac69WwTqg6K13oXq2yEuy4LLZtsV2G\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },", "mimetype": "text/plain", "start_char_idx": 14378, "end_char_idx": 15684, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2581c591-d4ad-4236-b30e-bc4bd81a6c6d": {"__data__": {"id_": "2581c591-d4ad-4236-b30e-bc4bd81a6c6d", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "52210c76-98a7-4896-9fab-14041ad4d0c0", "node_type": "1", "metadata": {}, "hash": "a257dffffc34598a0852bc3284f5290c6ca3fb42e6a16899fabadf36737ce1e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f3939a24-2c16-46fa-8813-93a2c499f2dc", "node_type": "1", "metadata": {}, "hash": "90feb2d6a5c0edc86edf96aed3333b67b43808418073fc824d74676c9ab7f797", "class_name": "RelatedNodeInfo"}}, "text": "\"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"1uVJZ8vNQpHMwPA38DYJjk9PpvnHDhsDcMxrTXcwf1s\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"eyJ0b3RhbCI6IjEyNTAwMDAwMDAwMDAwMDAwMDAwMDAiLCJhdmFpbGFibGUiOiIwIn0=\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"e30=\",\n            \"deposit\": \"125000000000000000000000\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"storage_deposit\"\n          }\n        }\n      ],\n      \"hash\": \"6sDUF1f5hebpybUbipNJer5ez13EY4HW1VBJEBqZjCEm\",\n      \"nonce\": 47589658000011,\n      \"public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\",\n      \"receiver_id\": \"ft.demo.testnet\",\n      \"signature\": \"ed25519:31PfuinsVvM1o2CmiZbSguFkZKYqAtkf5PHerfexhDbC3SsJWDzRFBpoUYTNDJddhKeqs93GQ3SHtUyqaSYhhQ9X\",\n      \"signer_id\": \"serhii.testnet\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"5XiuxzTpyw6p2NTD5AqrZYNW7SHvpj8MhUCyn1x2KSQR\",\n      \"id\": \"6sDUF1f5hebpybUbipNJer5ez13EY4HW1VBJEBqZjCEm\",\n      \"outcome\": {\n        \"executor_id\": \"serhii.testnet\",", "mimetype": "text/plain", "start_char_idx": 15693, "end_char_idx": 16824, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f3939a24-2c16-46fa-8813-93a2c499f2dc": {"__data__": {"id_": "f3939a24-2c16-46fa-8813-93a2c499f2dc", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2581c591-d4ad-4236-b30e-bc4bd81a6c6d", "node_type": "1", "metadata": {}, "hash": "efcf01f59d68754c513bbeee1aa8324de31a89a6ff48bb69ccba20f3d6be5c61", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e466379-ca1c-4293-80db-8867127fd30a", "node_type": "1", "metadata": {}, "hash": "37753b77d44fd012cec41096a750b55590a72e19b4d6a1d4686d22c7eeebeb24", "class_name": "RelatedNodeInfo"}}, "text": "\"gas_burnt\": 2427959010878,\n        \"logs\": [],\n        \"receipt_ids\": [\n          \"4urgFabknn1myZkjTYdb1BFSoEimP21k9smCUWoSggA7\"\n        ],\n        \"status\": {\n          \"SuccessReceiptId\": \"4urgFabknn1myZkjTYdb1BFSoEimP21k9smCUWoSggA7\"\n        },\n        \"tokens_burnt\": \"242795901087800000000\"\n      },\n      \"proof\": []\n    }\n  }\n}\n```\n\n</details>\n\nTransfer the tokens:\n  - using NEAR CLI:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call <contract_account_id> ft_transfer '{\"receiver_id\": \"<receiver_account_id>\", \"amount\": \"1\"}' --accountId <sender_account_id> --amount 0.000000000000000000000001\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction <contract_account_id> ft_transfer json-args '{\"receiver_id\": \"<receiver_account_id>\", \"amount\": \"1\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as <sender_account_id> network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nResult example:\n\n```bash\nScheduling a call: berryclub.ek.near.ft_transfer({\"receiver_id\": \"volovyk.near\", \"amount\": \"1\"}) with attached 0.000000000000000000000001 NEAR\nReceipt: GDeE3Kv1JHgs71A22NEUbgq55r2Hvcnis8gCMyJtQ2mx\n\tLog [berryclub.ek.near]: Transfer 1 from serhii.near to volovyk.near\nTransaction Id 3MkWKbXVP8wyy4pBofELqiE1pwx7ie2v3SKCwaobNcEe\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://nearblocks.", "mimetype": "text/plain", "start_char_idx": 16833, "end_char_idx": 18318, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0e466379-ca1c-4293-80db-8867127fd30a": {"__data__": {"id_": "0e466379-ca1c-4293-80db-8867127fd30a", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f3939a24-2c16-46fa-8813-93a2c499f2dc", "node_type": "1", "metadata": {}, "hash": "90feb2d6a5c0edc86edf96aed3333b67b43808418073fc824d74676c9ab7f797", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d", "node_type": "1", "metadata": {}, "hash": "69cbb71070a774cd988107fe07d73a4e42e0db54aed4db2e219acaecb6d80a3f", "class_name": "RelatedNodeInfo"}}, "text": "io/txns/3MkWKbXVP8wyy4pBofELqiE1pwx7ie2v3SKCwaobNcEe\n''\n```\n\n  - with JSON RPC call:\n\nTransaction representation:\n\n```yaml\nTransaction: {\n\tblock_hash: `456\u2026abc`,\n\tsigner_id: \"serhii.near\",\n\tpublic_key: \"ed25519:789\u2026def\",\n\tnonce: 123,\n\treceiver_id: \"berryclub.ek.near\",\n\tactions: [\n\t\tFunctionCall(\n\t\t\tFunctionCallAction {\n\t\t\t\tmethod_name: ft_transfer,\n\t\t\t\targs: `{\"receiver_id\": \"volovyk.near\", \"amount\": \"1\"}`,\n\t\t\t\tgas: 300000000000000,\n\t\t\t\tdeposit: 1,\n\t\t\t},\n\t\t),\n\t]\n}\n```\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=broadcast_tx_commit \\\n  params:='[\"CwAAAHNlcmhpaS5uZWFyAAmQpgZcJM5nMc6f3tqmw/YI4eAvc84ZgsKMRRRzhY/6CQAAAAAAAAARAAAAYmVycnljbHViLmVrLm5lYXLLWPIiUOElkDF3u4hLAMJ0Sjeo1V338pDdHIp70va3ewEAAAACCwAAAGZ0X3RyYW5zZmVyKwAAAHsicmVjZWl2ZXJfaWQiOiJ2b2xvdnlrLm5lYXIiLCJhbW91bnQiOiIxIn0AQHoQ81oAAAEAAAAAAAAAAAAAAAAAAAAA7fDOZQt3zCtdS05Y8XaZFlwO/Gd5wkkNAHShzDiLQXk4Q4ixpraLPMJivs35PZD0gocXl1iGFbQ46NG3VllzCA==\"]'\n```\n\nTo get details of this transaction:\n\n```bash\nhttp post https://archival-rpc.mainnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 18318, "end_char_idx": 19373, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d": {"__data__": {"id_": "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0e466379-ca1c-4293-80db-8867127fd30a", "node_type": "1", "metadata": {}, "hash": "37753b77d44fd012cec41096a750b55590a72e19b4d6a1d4686d22c7eeebeb24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf", "node_type": "1", "metadata": {}, "hash": "e15b61a270258ca1f33f9c088d60f88db861b208ed77c6ec2f0eac7467235bef", "class_name": "RelatedNodeInfo"}}, "text": "0 method=EXPERIMENTAL_tx_status \\\n  params:='[\"2Fy4714idMCoja7QLdGAbQZHzV2XEnUdwZX6yGa46VMX\", \"serhii.near\"]' id=myid\n```\n\n<details>\n\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"myid\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"serhii.near\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJyZWNlaXZlcl9pZCI6InZvbG92eWsubmVhciIsImFtb3VudCI6IjEifQ==\",\n                  \"deposit\": \"1\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"ft_transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.near\",\n            \"signer_public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\"\n          }\n        },\n        \"receipt_id\": \"ExhYcvwAUb3Jpm38pSQ5oobwJAouBqqDZjbhavKrZtur\",\n        \"receiver_id\": \"berryclub.ek.near\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18418055677558685763688\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.near\",", "mimetype": "text/plain", "start_char_idx": 19373, "end_char_idx": 20847, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf": {"__data__": {"id_": "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d", "node_type": "1", "metadata": {}, "hash": "69cbb71070a774cd988107fe07d73a4e42e0db54aed4db2e219acaecb6d80a3f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "959482f1-4d8b-42fe-b46a-91403d0c704c", "node_type": "1", "metadata": {}, "hash": "350dda76d50f34f75d7307b53ac61f58e7da23f2796b6326dc79d14fb498c30b", "class_name": "RelatedNodeInfo"}}, "text": "\"signer_public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\"\n          }\n        },\n        \"receipt_id\": \"EAPh8XrBMqm6iuVH5jsfemz4YqUxWsV8Mz241cw5tjvE\",\n        \"receiver_id\": \"serhii.near\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"6Re4NTkKzD7maKx3MuoxzYVHQKqjgnXW8rNjGjeVx8YC\",\n        \"id\": \"ExhYcvwAUb3Jpm38pSQ5oobwJAouBqqDZjbhavKrZtur\",\n        \"outcome\": {\n          \"executor_id\": \"berryclub.ek.near\",\n          \"gas_burnt\": 6365774114160,\n          \"logs\": [\n            \"Transfer 1 from serhii.near to volovyk.near\"\n          ],\n          \"receipt_ids\": [\n            \"EAPh8XrBMqm6iuVH5jsfemz4YqUxWsV8Mz241cw5tjvE\"\n          ],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"636577411416000000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"2eUmWnLExsH5jb6mALY9jTC8FiQH4FcuxQ16tn7RfkYr\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"266d5QfDKXNbAWJgXMJXgLP97VwoMiC4Qyt8wH7xcs1Q\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"EkJAuJigdVSZj41yGXSZYAtDV7Xwe2Hv9Xsqcv6LUZvq\"\n          }\n        ]\n      },", "mimetype": "text/plain", "start_char_idx": 20860, "end_char_idx": 22081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "959482f1-4d8b-42fe-b46a-91403d0c704c": {"__data__": {"id_": "959482f1-4d8b-42fe-b46a-91403d0c704c", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf", "node_type": "1", "metadata": {}, "hash": "e15b61a270258ca1f33f9c088d60f88db861b208ed77c6ec2f0eac7467235bef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90d8af20-85e9-4057-816d-2b17d51c46f0", "node_type": "1", "metadata": {}, "hash": "ca5341c25762e2af3e996b4803bbe69bb20aba3af120da915fa84c902cc32bdf", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"block_hash\": \"3XMoeEdm1zE64aByFuWCrZaxfbvsjMHRFcL8Wsp95vyt\",\n        \"id\": \"EAPh8XrBMqm6iuVH5jsfemz4YqUxWsV8Mz241cw5tjvE\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.near\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"EGC9ZPJHTbmCs3aQDuCkFQboGLBxU2uzrSZMsp8WonDu\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"EsBd1n7bDAphA3HY84DrrKd1GP1VugeNiqFCET2S5sNG\"\n          },\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"H4q3ByfNB7QH9QEuHN3tcGay7tjhsZwjXx3sq3Vm3Lza\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZWNlaXZlcl9pZCI6InZvbG92eWsubmVhciIsImFtb3VudCI6IjEifQ==\",\n            \"deposit\": \"1\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"ft_transfer\"\n          }\n        }\n      ],\n      \"hash\": \"2Fy4714idMCoja7QLdGAbQZHzV2XEnUdwZX6yGa46VMX\",\n      \"nonce\": 10,", "mimetype": "text/plain", "start_char_idx": 22088, "end_char_idx": 23313, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90d8af20-85e9-4057-816d-2b17d51c46f0": {"__data__": {"id_": "90d8af20-85e9-4057-816d-2b17d51c46f0", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "959482f1-4d8b-42fe-b46a-91403d0c704c", "node_type": "1", "metadata": {}, "hash": "350dda76d50f34f75d7307b53ac61f58e7da23f2796b6326dc79d14fb498c30b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "87369dc2-318c-4af4-b239-e2df943c4989", "node_type": "1", "metadata": {}, "hash": "8b754fdde3e4b7265807144db8c9fae309f3cca6e0f535c851618b245b23be2c", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\",\n      \"receiver_id\": \"berryclub.ek.near\",\n      \"signature\": \"ed25519:5eJPGirNkBUbMeyRfEA4fgi1FtkgGk8pmbbkmiz3Faf6zrANpBsCs5bZd5heSTvQ6b3fEPLSPCPi2iwD2XJT93As\",\n      \"signer_id\": \"serhii.near\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"EAcwavyaeNWZnfhYP2nAWzeDgMiuiyRHfaprFqhXgCRF\",\n      \"id\": \"2Fy4714idMCoja7QLdGAbQZHzV2XEnUdwZX6yGa46VMX\",\n      \"outcome\": {\n        \"executor_id\": \"serhii.near\",\n        \"gas_burnt\": 2428041740436,\n        \"logs\": [],\n        \"receipt_ids\": [\n          \"ExhYcvwAUb3Jpm38pSQ5oobwJAouBqqDZjbhavKrZtur\"\n        ],\n        \"status\": {\n          \"SuccessReceiptId\": \"ExhYcvwAUb3Jpm38pSQ5oobwJAouBqqDZjbhavKrZtur\"\n        },\n        \"tokens_burnt\": \"242804174043600000000\"\n      },\n      \"proof\": [\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"GatQmy7fW5uXRJRSg7A315CWzWWcQCGk4GJXyW3cjw4j\"\n        },\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"89WJwAetivZLvAkVLXUt862o7zJX7YYt6ZixdWebq3xv\"\n        },\n        {\n          \"direction\": \"Right\",", "mimetype": "text/plain", "start_char_idx": 23320, "end_char_idx": 24412, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "87369dc2-318c-4af4-b239-e2df943c4989": {"__data__": {"id_": "87369dc2-318c-4af4-b239-e2df943c4989", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90d8af20-85e9-4057-816d-2b17d51c46f0", "node_type": "1", "metadata": {}, "hash": "ca5341c25762e2af3e996b4803bbe69bb20aba3af120da915fa84c902cc32bdf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "59b15cd8-c36a-442b-9a08-4546258686d5", "node_type": "1", "metadata": {}, "hash": "0d59fd30d4ae6993e20995c4859b5ad23a12ced23f3d0a36419b09ccb5d32180", "class_name": "RelatedNodeInfo"}}, "text": "\"hash\": \"CH3wHSqYPJp35krLjSgJTgCFYnv1ymhd9bJpjXA31VVD\"\n        }\n      ]\n    }\n  }\n}\n```\n\n</details>\n\nYou can get the same info later by the transaction hash from the previous call:\n\n  - using NEAR Explorer: https://nearblocks.io\n\n<!--\n- using NEAR CLI:\nnear tx-status <transaction_hash> --accountId <transaction_signer>\n-->\n\n  - with JSON RPC call\n\n```bash\n  http post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_tx_status \\\n  params:='[ \"2Fy4714idMCoja7QLdGAbQZHzV2XEnUdwZX6yGa46VMX\", \"sender.testnet\"]'\n```\n\nLet's create test transaction that should fail and investigate the response. We will try to send more tokens that are available on this account:\n  - using NEAR CLI:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call <contract_account_id> ft_transfer '{\"receiver_id\": \"<user_account_id>\", \"amount\": \"10000000000\"}' --accountId <sender_account_id> --amount 0.000000000000000000000001\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction <contract_account_id> ft_transfer json-args '{\"receiver_id\": \"<user_account_id>\", \"amount\": \"1\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as <sender_account_id> network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n  - with JSON RPC call:\n\nTransaction representation:\n\n```yaml\nTransaction: {\n\tblock_hash: `456\u2026abc`,\n\tsigner_id: \"serhii.near\",\n\tpublic_key: \"ed25519:789\u2026def\",\n\tnonce: 123,\n\treceiver_id: \"berryclub.ek.near\",\n\tactions: [\n\t\tFunctionCall(\n\t\t\tFunctionCallAction {\n\t\t\t\tmethod_name: ft_transfer,", "mimetype": "text/plain", "start_char_idx": 24423, "end_char_idx": 26050, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "59b15cd8-c36a-442b-9a08-4546258686d5": {"__data__": {"id_": "59b15cd8-c36a-442b-9a08-4546258686d5", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "87369dc2-318c-4af4-b239-e2df943c4989", "node_type": "1", "metadata": {}, "hash": "8b754fdde3e4b7265807144db8c9fae309f3cca6e0f535c851618b245b23be2c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80f98343-a0fd-4257-986d-ad6271854eaa", "node_type": "1", "metadata": {}, "hash": "af214b24703e95c85294e3fc9be389f0005b4ce8dba207b01400fe4bb9978b56", "class_name": "RelatedNodeInfo"}}, "text": "args: `{\"receiver_id\":\"volovyk.near\",\"amount\":\"10000000000000000000\"}`,\n\t\t\t\tgas: 300000000000000,\n\t\t\t\tdeposit: 1,\n\t\t\t},\n\t\t),\n\t]\n}\n```\n\n```bash\n  http post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=broadcast_tx_commit \\\n  params:='[\"DgAAAHNlcmhpaS50ZXN0bmV0AEKEp54fyVkp8dJE2l/m1ErjdhDGodBK8ZF6JLeHFMeZofqoVEgrAAAgAAAAZGV2LTE2MjMzMzM3OTU2MjMtMjEzOTk5NTk3NzgxNTm8Xq8BTIi6utG0424Gg7CknYzLH8RH/A409jq5o0zi7gEAAAACCwAAAGZ0X3RyYW5zZmVyPwAAAHsicmVjZWl2ZXJfaWQiOiJkZXYtMTYyMzMzMzkxNjM2OC01ODcwNzQzNDg3ODUzMyIsImFtb3VudCI6IjEifQBAehDzWgAAAQAAAAAAAAAAAAAAAAAAAABCwjqayKdpWgM6PE0ixzm/Gy0EtdpxVn0xehMTBReVfVAKIBTDPoPSaOdT8fAhk343F5uOMfSijhTqU2mWV3oD\"]'\n```\n\nTo get details of this transaction:\n\n```bash\nhttp post https://archival-rpc.mainnet.near.org jsonrpc=2.0 method=EXPERIMENTAL_tx_status \\\n  params:='[\"CKHzodHvFw4C87PazsniycYZZHm37CEWLE2u8VUUMU7r\", \"serhii.near\"]' id=myid\n```\n\n<details>\n\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"myid\",\n  \"jsonrpc\": \"2.", "mimetype": "text/plain", "start_char_idx": 26055, "end_char_idx": 27039, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80f98343-a0fd-4257-986d-ad6271854eaa": {"__data__": {"id_": "80f98343-a0fd-4257-986d-ad6271854eaa", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59b15cd8-c36a-442b-9a08-4546258686d5", "node_type": "1", "metadata": {}, "hash": "0d59fd30d4ae6993e20995c4859b5ad23a12ced23f3d0a36419b09ccb5d32180", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c67604c0-0371-4f7a-a7a8-c8a88129bbdc", "node_type": "1", "metadata": {}, "hash": "085d20727d3e7eb3a70d9cb2341a0546b8b8c262aa694e2b52ce50f40668c0bd", "class_name": "RelatedNodeInfo"}}, "text": "0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"serhii.near\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJyZWNlaXZlcl9pZCI6InZvbG92eWsubmVhciIsImFtb3VudCI6IjEwMDAwMDAwMDAwMDAwMDAwMDAwIn0=\",\n                  \"deposit\": \"1\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"ft_transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.near\",\n            \"signer_public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\"\n          }\n        },\n        \"receipt_id\": \"5bdBKwS1RH7wm8eoG6ZeESdhNpj9HffUcf8RoP6Ng5d\",\n        \"receiver_id\": \"berryclub.ek.near\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"1\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"system\",\n            \"signer_public_key\": \"ed25519:11111111111111111111111111111111\"\n          }\n        },\n        \"receipt_id\": \"Td3QxpKhMdi8bfVeMiQZwNS1VzPXceQdn6xdftoC8k6\",\n        \"receiver_id\": \"serhii.near\"\n      },\n      {\n        \"predecessor_id\": \"system\",", "mimetype": "text/plain", "start_char_idx": 27039, "end_char_idx": 28549, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c67604c0-0371-4f7a-a7a8-c8a88129bbdc": {"__data__": {"id_": "c67604c0-0371-4f7a-a7a8-c8a88129bbdc", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80f98343-a0fd-4257-986d-ad6271854eaa", "node_type": "1", "metadata": {}, "hash": "af214b24703e95c85294e3fc9be389f0005b4ce8dba207b01400fe4bb9978b56", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3f1344fa-9d35-454e-a8b0-9c87ece68e0f", "node_type": "1", "metadata": {}, "hash": "4821094a6abb7b7ce97d004817c5f16c269b77a6716414d13aaad95053af1557", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18653463364152698495356\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.near\",\n            \"signer_public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\"\n          }\n        },\n        \"receipt_id\": \"DwLMVTdqv9Z4g9QC4AthTXHqqeJVAH4s1tFXHQYMArW7\",\n        \"receiver_id\": \"serhii.near\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"DTruWLgm5Y56yDrxUipvYqKKm8F7hxVQTarNQqe147zs\",\n        \"id\": \"5bdBKwS1RH7wm8eoG6ZeESdhNpj9HffUcf8RoP6Ng5d\",\n        \"outcome\": {\n          \"executor_id\": \"berryclub.ek.near\",\n          \"gas_burnt\": 4011776278642,\n          \"logs\": [],\n          \"receipt_ids\": [\n            \"Td3QxpKhMdi8bfVeMiQZwNS1VzPXceQdn6xdftoC8k6\",\n            \"DwLMVTdqv9Z4g9QC4AthTXHqqeJVAH4s1tFXHQYMArW7\"\n          ],\n          \"status\": {\n            \"Failure\": {\n              \"ActionError\": {\n                \"index\": 0,\n                \"kind\": {\n                  \"FunctionCallError\": {\n                    \"ExecutionError\": \"Smart contract panicked: The account doesn't have enough balance\"\n                  }\n                }\n              }\n            }\n          },\n          \"tokens_burnt\": \"401177627864200000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",", "mimetype": "text/plain", "start_char_idx": 28558, "end_char_idx": 30079, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3f1344fa-9d35-454e-a8b0-9c87ece68e0f": {"__data__": {"id_": "3f1344fa-9d35-454e-a8b0-9c87ece68e0f", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c67604c0-0371-4f7a-a7a8-c8a88129bbdc", "node_type": "1", "metadata": {}, "hash": "085d20727d3e7eb3a70d9cb2341a0546b8b8c262aa694e2b52ce50f40668c0bd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7833e786-7161-4464-be1b-991a9592d38a", "node_type": "1", "metadata": {}, "hash": "7acc90db2571f00d7623e3ec2ab43e7df694eb97aed4045fe26396ff4f506f30", "class_name": "RelatedNodeInfo"}}, "text": "\"hash\": \"6GHrA42oMEF4g7YCBpPw9EakkLiepTHnQBvaKtmsenEY\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"DCG3qZAzf415twXfHmgBUdB129g2iZoQ4v8dawwBzhSh\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"F9xNWGhJuYW336f3qVaDDAipsyfpudJHYbmt5in3MeMT\",\n        \"id\": \"Td3QxpKhMdi8bfVeMiQZwNS1VzPXceQdn6xdftoC8k6\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.near\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"CJNvis1CoJmccshDpPBrk3a7fdZ5HnMQuy3p2Kd2GCdS\"\n          },\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"4vHM3fbdNwXGMp9uYzVKB13abEM6qdPUuZ9rfrdsaDzc\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"F9xNWGhJuYW336f3qVaDDAipsyfpudJHYbmt5in3MeMT\",\n        \"id\": \"DwLMVTdqv9Z4g9QC4AthTXHqqeJVAH4s1tFXHQYMArW7\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.near\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },", "mimetype": "text/plain", "start_char_idx": 30092, "end_char_idx": 31360, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7833e786-7161-4464-be1b-991a9592d38a": {"__data__": {"id_": "7833e786-7161-4464-be1b-991a9592d38a", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3f1344fa-9d35-454e-a8b0-9c87ece68e0f", "node_type": "1", "metadata": {}, "hash": "4821094a6abb7b7ce97d004817c5f16c269b77a6716414d13aaad95053af1557", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1195b82f-264a-4d22-98ba-e188cd1f4686", "node_type": "1", "metadata": {}, "hash": "2465758cd77aac462562caa4c142d38ac4d457aa686af0d9259ab80181ddcd02", "class_name": "RelatedNodeInfo"}}, "text": "\"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"BR3R7tjziEgXMiHaJ7VuuXCo2yBHB2ZzsoxobPhPjFeJ\"\n          },\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"4vHM3fbdNwXGMp9uYzVKB13abEM6qdPUuZ9rfrdsaDzc\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"Failure\": {\n        \"ActionError\": {\n          \"index\": 0,\n          \"kind\": {\n            \"FunctionCallError\": {\n              \"ExecutionError\": \"Smart contract panicked: The account doesn't have enough balance\"\n            }\n          }\n        }\n      }\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZWNlaXZlcl9pZCI6InZvbG92eWsubmVhciIsImFtb3VudCI6IjEwMDAwMDAwMDAwMDAwMDAwMDAwIn0=\",\n            \"deposit\": \"1\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"ft_transfer\"\n          }\n        }\n      ],\n      \"hash\": \"CKHzodHvFw4C87PazsniycYZZHm37CEWLE2u8VUUMU7r\",\n      \"nonce\": 12,\n      \"public_key\": \"ed25519:eLbduR3uJGaAHLXeGKEfo1fYmYFKkLyR1R8ZPCxrJAM\",\n      \"receiver_id\": \"berryclub.ek.near\",\n      \"signature\": \"ed25519:63MC3f8m5jeycpy97G9XaCwmJLx4YHRn2x5AEJDiYYzZ3TzdzWsrz8dgaz2kHR2jsWh35aZoL97tw1RRTHK6ZQYq\",\n      \"signer_id\": \"serhii.near\"\n    },", "mimetype": "text/plain", "start_char_idx": 31369, "end_char_idx": 32619, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1195b82f-264a-4d22-98ba-e188cd1f4686": {"__data__": {"id_": "1195b82f-264a-4d22-98ba-e188cd1f4686", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7833e786-7161-4464-be1b-991a9592d38a", "node_type": "1", "metadata": {}, "hash": "7acc90db2571f00d7623e3ec2ab43e7df694eb97aed4045fe26396ff4f506f30", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48200d64-04f7-4998-ae03-d0a69be6d0f0", "node_type": "1", "metadata": {}, "hash": "fd535d03a71c76f49f56f5dd0902989f448dda28cc0ac279605c1730b8f81500", "class_name": "RelatedNodeInfo"}}, "text": "\"transaction_outcome\": {\n      \"block_hash\": \"7YUgyBHgmbGy1edhaWRZeBVq9zzbnzrRGtVRQS5PpooW\",\n      \"id\": \"CKHzodHvFw4C87PazsniycYZZHm37CEWLE2u8VUUMU7r\",\n      \"outcome\": {\n        \"executor_id\": \"serhii.near\",\n        \"gas_burnt\": 2428084223182,\n        \"logs\": [],\n        \"receipt_ids\": [\n          \"5bdBKwS1RH7wm8eoG6ZeESdhNpj9HffUcf8RoP6Ng5d\"\n        ],\n        \"status\": {\n          \"SuccessReceiptId\": \"5bdBKwS1RH7wm8eoG6ZeESdhNpj9HffUcf8RoP6Ng5d\"\n        },\n        \"tokens_burnt\": \"242808422318200000000\"\n      },\n      \"proof\": [\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"Agyg5P46kSVa4ptG9spteHpZ5c8XkvfbmDN5EUXhC1Wr\"\n        },\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"3JDKkLCy5bJaAU3exa66sotTwJyGwyChxeNJgKReKw34\"\n        },\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"7GXEmeQEJdd4c2kgN7NoYiF2bkjzV4bNkMmkhpK14NTz\"\n        }\n      ]\n    }\n  }\n}\n```\n\n</details>\n\nWas the fungible token transfer successful?\n  - Look for `result` \u00bb `transaction_outcome` \u00bb `outcome` \u00bb see if `SuccessReceiptId` is a key\n  - if `SuccessReceiptId` is not a key, this fungible token transfer has `failed`.", "mimetype": "text/plain", "start_char_idx": 32624, "end_char_idx": 33774, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "48200d64-04f7-4998-ae03-d0a69be6d0f0": {"__data__": {"id_": "48200d64-04f7-4998-ae03-d0a69be6d0f0", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1195b82f-264a-4d22-98ba-e188cd1f4686", "node_type": "1", "metadata": {}, "hash": "2465758cd77aac462562caa4c142d38ac4d457aa686af0d9259ab80181ddcd02", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23671998-a4e1-4a9b-9e63-493926214701", "node_type": "1", "metadata": {}, "hash": "f0fea803beea9c47ae38af65602afc5d0a226d79656218bcd710b145ab9c55bb", "class_name": "RelatedNodeInfo"}}, "text": "- If it does have that key, get the value, which is a `receipt ID`\n  - Loop through `result` \u00bb `receipts_outcome` until you find an object that ID (from above) under the id key\n  - in that object check `outcome` \u00bb `status` \u00bb (see if SuccessValue is a key)\n  - If SuccessValue is a key, fungible token transfer succeeded, if not, it failed.\n\nTo determine how many fungible tokens were transferred, look at:\n  - `result` \u00bb `transaction` \u00bb `actions` \u00bb `FunctionCall` \u00bb `args`\n  - then take the args and `base64` decode it, that will give you a JSON payload and look for the `amount` key\n  - It will contain a stringified number that represents the number of fungible tokens that were successfully transferred\n\n## Transfer and call {#transfer-and-call}\n\nIf the idea of a fungible token using \"transfer and call\" is new, please review the comments above the function in [the Nomicon spec](https://nomicon.io/Standards/Tokens/FungibleToken/Core#reference-level-explanation). Also, see a similar idea [from EIP-677](https://github.com/ethereum/EIPs/issues/677).\n\nFor this example we will build and deploy FT contracts from [near-sdk-rs/examples/fungible-token](https://github.com/near/near-sdk-rs/tree/master/examples/fungible-token).\n\nLet's call `ft_transfer_call` function on `ft` contract (receiver) and examine successful and unsuccessful scenarios.\n\n### Successful transfer and call {#successful-transfer-and-call}\n  Let's send 10 N to `DEFI` contract that requires only 9 N.\n\n  - using NEAR CLI\n\n    <Tabs groupId=\"cli-tabs\">\n      <TabItem value=\"short\" label=\"Short\">\n\n      ```bash\n      near call <ft_contract_id> ft_transfer_call '{\"receiver_id\": \"<defi_contract_id>\", \"amount\": \"10\", \"msg\": \"take-my-money\"}' --accountId <user_account_id> --amount 0.", "mimetype": "text/plain", "start_char_idx": 33777, "end_char_idx": 35532, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23671998-a4e1-4a9b-9e63-493926214701": {"__data__": {"id_": "23671998-a4e1-4a9b-9e63-493926214701", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "48200d64-04f7-4998-ae03-d0a69be6d0f0", "node_type": "1", "metadata": {}, "hash": "fd535d03a71c76f49f56f5dd0902989f448dda28cc0ac279605c1730b8f81500", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1bb062fb-d3b9-456d-9651-35ce51d6c9cb", "node_type": "1", "metadata": {}, "hash": "6875e7d41633a8f2746faff149bc03b3721d60ed0fd3496fa99801401a02e822", "class_name": "RelatedNodeInfo"}}, "text": "000000000000000000000001\n      ```\n      </TabItem>\n\n      <TabItem value=\"full\" label=\"Full\">\n\n        ```bash\n        near contract call-function as-transaction <ft_contract_id> ft_transfer_call json-args '{\"receiver_id\": \"<defi_contract_id>\", \"amount\": \"10\", \"msg\": \"take-my-money\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as <user_account_id> network-config testnet sign-with-keychain send\n        ```\n      </TabItem>\n    </Tabs>\n\n  - with JSON RPC call\n\nTransaction representation:\n\n```yaml\nTransaction: {\n\tblock_hash: `456\u2026abc`,\n\tsigner_id: \"serhii.testnet\",\n\tpublic_key: \"ed25519:789\u2026def\",\n\tnonce: 123,\n\treceiver_id: \"dev-1623333795623-21399959778159\",\n\tactions: [\n\t\tFunctionCall(\n\t\t\tFunctionCallAction {\n\t\t\t\tmethod_name: ft_transfer_call,\n\t\t\t\targs: `{\"receiver_id\":\"dev-1623693121955-71667632531176\",\"amount\":\"10\",\"msg\":\"take-my-money\"}`,\n\t\t\t\tgas: 300000000000000,\n\t\t\t\tdeposit: 1,\n\t\t\t},\n\t\t),\n\t]\n}\n```\n\n```bash\n  http post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 35532, "end_char_idx": 36524, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1bb062fb-d3b9-456d-9651-35ce51d6c9cb": {"__data__": {"id_": "1bb062fb-d3b9-456d-9651-35ce51d6c9cb", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23671998-a4e1-4a9b-9e63-493926214701", "node_type": "1", "metadata": {}, "hash": "f0fea803beea9c47ae38af65602afc5d0a226d79656218bcd710b145ab9c55bb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f9c572d5-0d45-4dad-9d5c-72f0044e84d3", "node_type": "1", "metadata": {}, "hash": "530f5781ec37416b3259f318cab2c30524dd621f1028dc90c14b2d3e367df1b2", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=broadcast_tx_commit \\\n  params:='[\"DgAAAHNlcmhpaS50ZXN0bmV0AEKEp54fyVkp8dJE2l/m1ErjdhDGodBK8ZF6JLeHFMeZqPqoVEgrAAAgAAAAZGV2LTE2MjMzMzM3OTU2MjMtMjEzOTk5NTk3NzgxNTn9j4g2IJ8nGQ38i3+k+4WBAeJL1xP7ygQhC7CrvEG4NQEAAAACEAAAAGZ0X3RyYW5zZmVyX2NhbGxWAAAAeyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzNjkzMTIxOTU1LTcxNjY3NjMyNTMxMTc2IiwiYW1vdW50IjoiMTAiLCJtc2ciOiJ0YWtlLW15LW1vbmV5In0AQHoQ81oAAAEAAAAAAAAAAAAAAAAAAAAANY2lHqJlAJYNDGEQiUNnmfiBV44Q1sdg45xNlNvlROOM+AtN1z3PSJqM6M6jAKXUwANoQTzFqXhIMHIjIPbTAA==\"]'\n```\n\nTo get details of this transaction:\n\n```bash\nhttp post https://archival-rpc.testnet.near.org jsonrpc=2.0 method=EXPERIMENTAL_tx_status \\\n    params:='[\"5n1kwA3TQQyFTkddR2Jau3H1Pt8ebQNGaov6aCQ6TDp1\", \"serhii.testnet\"]' id=myid\n```\n\n<details>\n\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"myid\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"serhii.testnet\",", "mimetype": "text/plain", "start_char_idx": 36524, "end_char_idx": 37446, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f9c572d5-0d45-4dad-9d5c-72f0044e84d3": {"__data__": {"id_": "f9c572d5-0d45-4dad-9d5c-72f0044e84d3", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1bb062fb-d3b9-456d-9651-35ce51d6c9cb", "node_type": "1", "metadata": {}, "hash": "6875e7d41633a8f2746faff149bc03b3721d60ed0fd3496fa99801401a02e822", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d645ac00-6232-42eb-b408-77bbcc9bd118", "node_type": "1", "metadata": {}, "hash": "47462401c2bf708d29cad5ec651a8ef962103ab82d9471ebf41f66665a1639cc", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzNjkzMTIxOTU1LTcxNjY3NjMyNTMxMTc2IiwiYW1vdW50IjoiMTAiLCJtc2ciOiJ0YWtlLW15LW1vbmV5In0=\",\n                  \"deposit\": \"1\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"ft_transfer_call\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"Hw6z8kJ7CSaC6SgyQzcmXzNX9gq1gaAnLS169qgyZ2Vk\",\n        \"receiver_id\": \"dev-1623333795623-21399959778159\"\n      },\n      {\n        \"predecessor_id\": \"dev-1623333795623-21399959778159\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJzZW5kZXJfaWQiOiJzZXJoaWkudGVzdG5ldCIsImFtb3VudCI6IjEwIiwibXNnIjoidGFrZS1teS1tb25leSJ9\",\n                  \"deposit\": \"0\",\n                  \"gas\": 70000000000000,\n                  \"method_name\": \"ft_on_transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],", "mimetype": "text/plain", "start_char_idx": 37455, "end_char_idx": 38843, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d645ac00-6232-42eb-b408-77bbcc9bd118": {"__data__": {"id_": "d645ac00-6232-42eb-b408-77bbcc9bd118", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f9c572d5-0d45-4dad-9d5c-72f0044e84d3", "node_type": "1", "metadata": {}, "hash": "530f5781ec37416b3259f318cab2c30524dd621f1028dc90c14b2d3e367df1b2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94", "node_type": "1", "metadata": {}, "hash": "e8a102eb46f5ce2ed77f4c4280b8f4ed70a099dc7a4cece00d34864c0cf5714e", "class_name": "RelatedNodeInfo"}}, "text": "\"output_data_receivers\": [\n              {\n                \"data_id\": \"EiDQi54XHfdD1KEcgiNzogXxXuwTpzeQfmyqVwbq7H4D\",\n                \"receiver_id\": \"dev-1623333795623-21399959778159\"\n              }\n            ],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"EB69xtJiLRh9RNzAHgBGmom8551hrK2xSRreqbjvJgu5\",\n        \"receiver_id\": \"dev-1623693121955-71667632531176\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"13116953530949529501760\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"AkwgvxUspRgy255fef2hrEWMbrMWFtnTRGduSgDRdSW1\",\n        \"receiver_id\": \"serhii.testnet\"\n      },\n      {\n        \"predecessor_id\": \"dev-1623333795623-21399959778159\",", "mimetype": "text/plain", "start_char_idx": 38856, "end_char_idx": 40071, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94": {"__data__": {"id_": "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d645ac00-6232-42eb-b408-77bbcc9bd118", "node_type": "1", "metadata": {}, "hash": "47462401c2bf708d29cad5ec651a8ef962103ab82d9471ebf41f66665a1639cc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c1dd796-a262-46e5-ab81-7ecc2da90f7a", "node_type": "1", "metadata": {}, "hash": "475ae88ee5933c29aed2b37a43fcbec565f9f7647086f3605e0f8fc4bc94e6f4", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJzZW5kZXJfaWQiOiJzZXJoaWkudGVzdG5ldCIsInJlY2VpdmVyX2lkIjoiZGV2LTE2MjM2OTMxMjE5NTUtNzE2Njc2MzI1MzExNzYiLCJhbW91bnQiOiIxMCJ9\",\n                  \"deposit\": \"0\",\n                  \"gas\": 5000000000000,\n                  \"method_name\": \"ft_resolve_transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [\n              \"EiDQi54XHfdD1KEcgiNzogXxXuwTpzeQfmyqVwbq7H4D\"\n            ],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"4Tc8MsrJZSMpNZx7u4jSqxr3WhRzqxaNHxLJFqz8tUPR\",\n        \"receiver_id\": \"dev-1623333795623-21399959778159\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"761030677610514102464\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },", "mimetype": "text/plain", "start_char_idx": 40080, "end_char_idx": 41518, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c1dd796-a262-46e5-ab81-7ecc2da90f7a": {"__data__": {"id_": "5c1dd796-a262-46e5-ab81-7ecc2da90f7a", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94", "node_type": "1", "metadata": {}, "hash": "e8a102eb46f5ce2ed77f4c4280b8f4ed70a099dc7a4cece00d34864c0cf5714e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2", "node_type": "1", "metadata": {}, "hash": "e3a93f7e77fa76e867ea797590d2982c29a881d674e7a550b924d5746ffe07c3", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_id\": \"9rxcC9o8x4RX7ftsDCfxK8qnisYv45rA1HGPxhuukWUL\",\n        \"receiver_id\": \"serhii.testnet\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"2137766093631769060520\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"H7YWFkvx16Efy2keCQ7BQ67BMEsdgdYLqJ99G4H3dR1D\",\n        \"receiver_id\": \"serhii.testnet\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"B9yZz1w3yzrqQnfBFAf17S4TLaHakXJWqmFDBbFxaEiZ\",\n        \"id\": \"Hw6z8kJ7CSaC6SgyQzcmXzNX9gq1gaAnLS169qgyZ2Vk\",\n        \"outcome\": {\n          \"executor_id\": \"dev-1623333795623-21399959778159\",\n          \"gas_burnt\": 20612680932083,\n          \"logs\": [\n            \"Transfer 10 from serhii.testnet to dev-1623693121955-71667632531176\"\n          ],\n          \"receipt_ids\": [\n            \"EB69xtJiLRh9RNzAHgBGmom8551hrK2xSRreqbjvJgu5\",", "mimetype": "text/plain", "start_char_idx": 41527, "end_char_idx": 42771, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2": {"__data__": {"id_": "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c1dd796-a262-46e5-ab81-7ecc2da90f7a", "node_type": "1", "metadata": {}, "hash": "475ae88ee5933c29aed2b37a43fcbec565f9f7647086f3605e0f8fc4bc94e6f4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d", "node_type": "1", "metadata": {}, "hash": "85349ce1d7badf50ae33ced2d2cbfdc6e3051213fdacf18ace1b9e62aafd9f2a", "class_name": "RelatedNodeInfo"}}, "text": "\"4Tc8MsrJZSMpNZx7u4jSqxr3WhRzqxaNHxLJFqz8tUPR\",\n            \"H7YWFkvx16Efy2keCQ7BQ67BMEsdgdYLqJ99G4H3dR1D\"\n          ],\n          \"status\": {\n            \"SuccessReceiptId\": \"4Tc8MsrJZSMpNZx7u4jSqxr3WhRzqxaNHxLJFqz8tUPR\"\n          },\n          \"tokens_burnt\": \"2061268093208300000000\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"7Z4LHWksvw7sKYKwpQfjEMG8oigjtRXKa3EopN7hS2v7\",\n        \"id\": \"EB69xtJiLRh9RNzAHgBGmom8551hrK2xSRreqbjvJgu5\",\n        \"outcome\": {\n          \"executor_id\": \"dev-1623693121955-71667632531176\",\n          \"gas_burnt\": 3568066327145,\n          \"logs\": [\n            \"Sender @serhii.testnet is transferring 10 tokens using ft_on_transfer, msg = take-my-money\"\n          ],\n          \"receipt_ids\": [\n            \"AkwgvxUspRgy255fef2hrEWMbrMWFtnTRGduSgDRdSW1\"\n          ],\n          \"status\": {\n            \"SuccessValue\": \"IjEi\"\n          },\n          \"tokens_burnt\": \"356806632714500000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"5X2agUKpqmk7QkUZsDQ4R4HdX7zXeuPYpVAfvbmF5Gav\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"CrSDhQNn72K2Qr1mmoM9j3YHCo3wfZdmHjpHJs74WnPk\",", "mimetype": "text/plain", "start_char_idx": 42784, "end_char_idx": 43977, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d": {"__data__": {"id_": "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2", "node_type": "1", "metadata": {}, "hash": "e3a93f7e77fa76e867ea797590d2982c29a881d674e7a550b924d5746ffe07c3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "017b1f81-552f-4f00-b00f-a3d192149313", "node_type": "1", "metadata": {}, "hash": "2c0f99cdf2af2c901decdaca6f4dbed64c864171b2fc3a2b92ec894692a04c04", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"AkwgvxUspRgy255fef2hrEWMbrMWFtnTRGduSgDRdSW1\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"4WG6hF5fTAtM7GSqU8mprrFwRVbChGMCV2NPZEjEdnc1\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"CrSDhQNn72K2Qr1mmoM9j3YHCo3wfZdmHjpHJs74WnPk\",\n        \"id\": \"4Tc8MsrJZSMpNZx7u4jSqxr3WhRzqxaNHxLJFqz8tUPR\",\n        \"outcome\": {\n          \"executor_id\": \"dev-1623333795623-21399959778159\",\n          \"gas_burnt\": 6208280264404,\n          \"logs\": [\n            \"Refund 1 from dev-1623693121955-71667632531176 to serhii.testnet\"\n          ],\n          \"receipt_ids\": [\n            \"9rxcC9o8x4RX7ftsDCfxK8qnisYv45rA1HGPxhuukWUL\"\n          ],\n          \"status\": {\n            \"SuccessValue\": \"Ijki\"\n          },\n          \"tokens_burnt\": \"620828026440400000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"BzT8YhEDDWSuoGGTBzH2Cj5GC4c56uAQxk41by4KVnXi\"\n          }\n        ]\n      },", "mimetype": "text/plain", "start_char_idx": 43986, "end_char_idx": 45214, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "017b1f81-552f-4f00-b00f-a3d192149313": {"__data__": {"id_": "017b1f81-552f-4f00-b00f-a3d192149313", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d", "node_type": "1", "metadata": {}, "hash": "85349ce1d7badf50ae33ced2d2cbfdc6e3051213fdacf18ace1b9e62aafd9f2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86817f53-59b0-4c2e-9cfb-0e4036994a2f", "node_type": "1", "metadata": {}, "hash": "b7cd2875a516d715e9bba68a1836bfb8fdc69b70d76f4cbcba3f67150eebc4d5", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"block_hash\": \"3Q2Zyscj6vG5nC2vdoYfcBHU9RVaAwoxHsHzAKVcAHZ6\",\n        \"id\": \"9rxcC9o8x4RX7ftsDCfxK8qnisYv45rA1HGPxhuukWUL\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"7Z4LHWksvw7sKYKwpQfjEMG8oigjtRXKa3EopN7hS2v7\",\n        \"id\": \"H7YWFkvx16Efy2keCQ7BQ67BMEsdgdYLqJ99G4H3dR1D\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"61ak42D3duBBunCz3w4xXxoEeR2N7oav5e938TnmGFGN\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"Ijki\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzNjkzMTIxOTU1LTcxNjY3NjMyNTMxMTc2IiwiYW1vdW50IjoiMTAiLCJtc2ciOiJ0YWtlLW15LW1vbmV5In0=\",", "mimetype": "text/plain", "start_char_idx": 45221, "end_char_idx": 46457, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86817f53-59b0-4c2e-9cfb-0e4036994a2f": {"__data__": {"id_": "86817f53-59b0-4c2e-9cfb-0e4036994a2f", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "017b1f81-552f-4f00-b00f-a3d192149313", "node_type": "1", "metadata": {}, "hash": "2c0f99cdf2af2c901decdaca6f4dbed64c864171b2fc3a2b92ec894692a04c04", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5cac58a3-b902-4c30-bb72-3e43d532d538", "node_type": "1", "metadata": {}, "hash": "428196b9a720e46c2e7c8034d018f945d98dd0e84bf22fac7d3a4cd95f84d623", "class_name": "RelatedNodeInfo"}}, "text": "\"deposit\": \"1\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"ft_transfer_call\"\n          }\n        }\n      ],\n      \"hash\": \"5n1kwA3TQQyFTkddR2Jau3H1Pt8ebQNGaov6aCQ6TDp1\",\n      \"nonce\": 47589658000040,\n      \"public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\",\n      \"receiver_id\": \"dev-1623333795623-21399959778159\",\n      \"signature\": \"ed25519:256qp2jAGXhhw2t2XfUAjWwzz3XcD83DH2v9THwDPsZjCLWHU8QJd6cuA773NP9yBmTd2ZyYiFHuxVEkYqnbsaSb\",\n      \"signer_id\": \"serhii.testnet\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"96k8kKzFuZWxyiUnT774Rg7DC3XDZNuxhxD1qEViFupd\",\n      \"id\": \"5n1kwA3TQQyFTkddR2Jau3H1Pt8ebQNGaov6aCQ6TDp1\",\n      \"outcome\": {\n        \"executor_id\": \"serhii.testnet\",\n        \"gas_burnt\": 2428149065268,\n        \"logs\": [],\n        \"receipt_ids\": [\n          \"Hw6z8kJ7CSaC6SgyQzcmXzNX9gq1gaAnLS169qgyZ2Vk\"\n        ],\n        \"status\": {\n          \"SuccessReceiptId\": \"Hw6z8kJ7CSaC6SgyQzcmXzNX9gq1gaAnLS169qgyZ2Vk\"\n        },\n        \"tokens_burnt\": \"242814906526800000000\"\n      },", "mimetype": "text/plain", "start_char_idx": 46470, "end_char_idx": 47517, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5cac58a3-b902-4c30-bb72-3e43d532d538": {"__data__": {"id_": "5cac58a3-b902-4c30-bb72-3e43d532d538", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "86817f53-59b0-4c2e-9cfb-0e4036994a2f", "node_type": "1", "metadata": {}, "hash": "b7cd2875a516d715e9bba68a1836bfb8fdc69b70d76f4cbcba3f67150eebc4d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a2cf5bcf-b203-409a-bc7b-c4b2759bb793", "node_type": "1", "metadata": {}, "hash": "91c171fae3026f58b4982ef29f97bd78d44e90769e6a13dc42de1004743cffc0", "class_name": "RelatedNodeInfo"}}, "text": "\"proof\": []\n    }\n  }\n}\n```\n\n</details>\n\nNow, let's try to follow the steps described in the previous section and determine if these transactions was successful. In addition to being successful, let's analyze the various receipts in the series of cross-contract calls to determine how many fungible tokens were transferred. This will be the most complex case we'll look at.\n\n  1. Check that `result` \u00bb `transaction_outcome` \u00bb `outcome` \u00bb `status` has `SuccessReceiptId` as a key. If not, no fungible tokens were transferred.\n  2. Take the value of the `SuccessReceiptId` key. In the case above it's `Hw6z8kJ7CSaC6SgyQzcmXzNX9gq1gaAnLS169qgyZ2Vk`.\n  3. Now, under `result` \u00bb `receipts` loop through the array until you find a receipt where the `receipt_id` matches the value from step 2. (Note that in the receipt, under `Actions` there's an element mentioning calling the `method_name: \"ft_transfer_call\"`.) On the same level of JSON, there's an `args` key. That's a base64-encoded value of the arguments passed to the method. When decoded it is:\n\n```json\n{\"receiver_id\":\"dev-1623693121955-71667632531176\",\"amount\":\"10\",\"msg\":\"take-my-money\"}\n```\n\n  4. Loop through `result` \u00bb `receipts_outcome` until finding the object where `id` is equal to the value from step 2. Similar to step 1, this object will also contain a `status` field that should contain the key `SuccessReceiptId`. Again, if this isn't there no fungible tokens were transferred, otherwise get the value of the `SuccessReceiptId`. In the above example, this value is `4Tc8MsrJZSMpNZx7u4jSqxr3WhRzqxaNHxLJFqz8tUPR`.\n  5. Similar to the previous step, loop through the `result` \u00bb `receipts_outcome` until you find the object where the `id` matches the value from step 4.", "mimetype": "text/plain", "start_char_idx": 47524, "end_char_idx": 49257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a2cf5bcf-b203-409a-bc7b-c4b2759bb793": {"__data__": {"id_": "a2cf5bcf-b203-409a-bc7b-c4b2759bb793", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5cac58a3-b902-4c30-bb72-3e43d532d538", "node_type": "1", "metadata": {}, "hash": "428196b9a720e46c2e7c8034d018f945d98dd0e84bf22fac7d3a4cd95f84d623", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "22f297f4-cfea-472a-ac50-55b0373e95b1", "node_type": "1", "metadata": {}, "hash": "ad109465203e9fa89fcd4b92e19d939d4c369b3dff639847d0a47c1acaad054d", "class_name": "RelatedNodeInfo"}}, "text": "In that object check that `outcome` \u00bb `status` has the `SuccessValue` field. This `SuccessValue` represents how many fungible tokens the receiving contract is \"returning\" to the fungible token contract. Note that in the example above the value is `Ijki`, which is the base64-encoded version of `\"9\"`. At this point, we know that 10 fungible tokens were sent (from step 3) and 9 were taken.\n\nFor additional clarity, let's take a look at one more optional aspect. In step 4 we isolated an obeject in `result` \u00bb `receipts_outcome`. There's an array of `receipt_ids` that's particularly interesting. The first element in the array is the receipt ID `EB69xtJiLRh9RNzAHgBGmom8551hrK2xSRreqbjvJgu5`. If we loop through the `result` \u00bb `receipts_outcome` and find this as the value for the `id` key, we'll see what happened in the function `ft_on_transfer` which takes place in the contract receiving the fungible tokens. In this object the `status` \u00bb `SuccessValue` is `IjEi` which is the base64-encoded value of `\"1\"`.\n\nIn summary:\n1. A user called the fungible token contract with the method `ft_transfer_call` specifying the receiver account, how many tokens to send, and custom info.\n2. The receiver account implemented `ft_on_transfer`, returning `\"1\"` to the callback function on the fungible token contract.\n3. The fungible token contract's callback is `ft_resolve_transfer` and receives this value of `\"1\"`. It knows that 1 token was returned, so subtracts that from the 10 it intended to send. It then returns to the user how many tokens were used in this back-and-forth series of cross-contract calls: `\"9\"`.\n\n### Failed transfer and call {#failed-transfer-and-call}\nLet's try to send more tokens than the account has:\n\n  - using NEAR CLI\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call <ft_contract_id> ft_transfer_call '{\"receiver_id\": \"<defi_contract_id>\",", "mimetype": "text/plain", "start_char_idx": 49258, "end_char_idx": 51161, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "22f297f4-cfea-472a-ac50-55b0373e95b1": {"__data__": {"id_": "22f297f4-cfea-472a-ac50-55b0373e95b1", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a2cf5bcf-b203-409a-bc7b-c4b2759bb793", "node_type": "1", "metadata": {}, "hash": "91c171fae3026f58b4982ef29f97bd78d44e90769e6a13dc42de1004743cffc0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b0f8fb39-eaea-41d5-b610-bd2f2e37906f", "node_type": "1", "metadata": {}, "hash": "3adba60b6b22d647d2fb2afad19d0a5cfe76eb80e9bd61e7745f1eeb3bc33e95", "class_name": "RelatedNodeInfo"}}, "text": "\"amount\": \"1000000000\", \"msg\": \"take-my-money\"}' --accountId <user_account_id> --amount 0.000000000000000000000001\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction <ft_contract_id> ft_transfer_call json-args '{\"receiver_id\": \"<defi_contract_id>\", \"amount\": \"1000000000\", \"msg\": \"take-my-money\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as <user_account_id> network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nTransaction representation:\n\n```yaml\nTransaction: {\n\tblock_hash: `456\u2026abc`,\n\tsigner_id: \"serhii.testnet\",\n\tpublic_key: \"ed25519:789\u2026def\",\n\tnonce: 123,\n\treceiver_id: \"dev-1623333795623-21399959778159\",\n\tactions: [\n\t\tFunctionCall(\n\t\t\tFunctionCallAction {\n\t\t\t\tmethod_name: ft_transfer_call,\n\t\t\t\targs: `{\"receiver_id\":\"dev-1623333916368-58707434878533\",\"amount\":\"1000000000\",\"msg\":\"take-my-money\"}`,\n\t\t\t\tgas: 300000000000000,\n\t\t\t\tdeposit: 1,\n\t\t\t},\n\t\t),\n\t]\n}\n```\n\n  - with JSON RPC call\n\n```bash\n  http post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 51162, "end_char_idx": 52228, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b0f8fb39-eaea-41d5-b610-bd2f2e37906f": {"__data__": {"id_": "b0f8fb39-eaea-41d5-b610-bd2f2e37906f", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "22f297f4-cfea-472a-ac50-55b0373e95b1", "node_type": "1", "metadata": {}, "hash": "ad109465203e9fa89fcd4b92e19d939d4c369b3dff639847d0a47c1acaad054d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f5895fc-96c5-4a77-896a-315e4c7093b6", "node_type": "1", "metadata": {}, "hash": "6d14dbfba1440ab9b0d8cb71f2402642c7a8f950629f7cb06e6056a316b5e172", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=broadcast_tx_commit \\\n  params:='[\"DgAAAHNlcmhpaS50ZXN0bmV0AEKEp54fyVkp8dJE2l/m1ErjdhDGodBK8ZF6JLeHFMeZn/qoVEgrAAAgAAAAZGV2LTE2MjMzMzM3OTU2MjMtMjEzOTk5NTk3NzgxNTnrbOQ93Wv9xxBwmq4yDYrssCpwKSI2bzjNNCCCHMZKNwEAAAACEAAAAGZ0X3RyYW5zZmVyX2NhbGxeAAAAeyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzMzMzOTE2MzY4LTU4NzA3NDM0ODc4NTMzIiwiYW1vdW50IjoiMTAwMDAwMDAwMCIsIm1zZyI6InRha2UtbXktbW9uZXkifQBAehDzWgAAAQAAAAAAAAAAAAAAAAAAAABQh3k+7zG2m/Yz3O/FBrvLaBwR/5YRB5FbFnb27Nfu6BW/Wh77RFH7+ktBwGLBwFbJGxiumIcsqBiGXgg1EPMN\"]'\n```\n\nTo get details of this transaction:\n\n```bash\nhttp post https://archival-rpc.testnet.near.org jsonrpc=2.0 method=EXPERIMENTAL_tx_status \\\n    params:='[\"FQsh44pvEsK8RS9AbK868CmGwfhUU2pUrizkQ6wCWTsB\", \"serhii.testnet\"]' id=myid\n```\n\n<details>\n\n<summary>**Example response**:</summary>\n\n```json\n{\n  \"id\": \"myid\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"serhii.testnet\",", "mimetype": "text/plain", "start_char_idx": 52228, "end_char_idx": 53158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9f5895fc-96c5-4a77-896a-315e4c7093b6": {"__data__": {"id_": "9f5895fc-96c5-4a77-896a-315e4c7093b6", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b0f8fb39-eaea-41d5-b610-bd2f2e37906f", "node_type": "1", "metadata": {}, "hash": "3adba60b6b22d647d2fb2afad19d0a5cfe76eb80e9bd61e7745f1eeb3bc33e95", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f074be08-54bc-44b9-8bad-357302827d3a", "node_type": "1", "metadata": {}, "hash": "0288d458b2ae2ff3980b233331bea4ae649db4ce2b0431946ba63131befdd3f8", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzMzMzOTE2MzY4LTU4NzA3NDM0ODc4NTMzIiwiYW1vdW50IjoiMTAwMDAwMDAwMCIsIm1zZyI6InRha2UtbXktbW9uZXkifQ==\",\n                  \"deposit\": \"1\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"ft_transfer_call\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"83AdQ16bpAC7BEUyF7zoRsAgeNW7HHmjhZLvytEsrygo\",\n        \"receiver_id\": \"dev-1623333795623-21399959778159\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"1\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"system\",\n            \"signer_public_key\": \"ed25519:11111111111111111111111111111111\"\n          }\n        },\n        \"receipt_id\": \"Euy4Q33DfvJTXD8HirE5ACoXnw9PMTQ2Hq47aGyD1spc\",\n        \"receiver_id\": \"serhii.testnet\"\n      },\n      {\n        \"predecessor_id\": \"system\",", "mimetype": "text/plain", "start_char_idx": 53167, "end_char_idx": 54657, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f074be08-54bc-44b9-8bad-357302827d3a": {"__data__": {"id_": "f074be08-54bc-44b9-8bad-357302827d3a", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9f5895fc-96c5-4a77-896a-315e4c7093b6", "node_type": "1", "metadata": {}, "hash": "6d14dbfba1440ab9b0d8cb71f2402642c7a8f950629f7cb06e6056a316b5e172", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e1e022e-2b47-4770-8bae-bf77eef00be2", "node_type": "1", "metadata": {}, "hash": "75fb173f3da81616215d85ac74d7aa53e88fe5af85d34c0490cbba31ace93a38", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18681184841157733814920\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"serhii.testnet\",\n            \"signer_public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\"\n          }\n        },\n        \"receipt_id\": \"6ZDoSeV3gLFS2NXqMCJGEUR3VwBpSxBEPjnEEaAQfmXL\",\n        \"receiver_id\": \"serhii.testnet\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"BohRBwqjRHssDVS9Gt9dj3SYuipxHA81xXFjRVLqgGeb\",\n        \"id\": \"83AdQ16bpAC7BEUyF7zoRsAgeNW7HHmjhZLvytEsrygo\",\n        \"outcome\": {\n          \"executor_id\": \"dev-1623333795623-21399959778159\",\n          \"gas_burnt\": 3734715409940,\n          \"logs\": [],\n          \"receipt_ids\": [\n            \"Euy4Q33DfvJTXD8HirE5ACoXnw9PMTQ2Hq47aGyD1spc\",\n            \"6ZDoSeV3gLFS2NXqMCJGEUR3VwBpSxBEPjnEEaAQfmXL\"\n          ],\n          \"status\": {\n            \"Failure\": {\n              \"ActionError\": {\n                \"index\": 0,\n                \"kind\": {\n                  \"FunctionCallError\": {\n                    \"ExecutionError\": \"Smart contract panicked: The account doesn't have enough balance\"\n                  }\n                }\n              }\n            }\n          },\n          \"tokens_burnt\": \"373471540994000000000\"\n        },\n        \"proof\": []\n      },", "mimetype": "text/plain", "start_char_idx": 54666, "end_char_idx": 56175, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0e1e022e-2b47-4770-8bae-bf77eef00be2": {"__data__": {"id_": "0e1e022e-2b47-4770-8bae-bf77eef00be2", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f074be08-54bc-44b9-8bad-357302827d3a", "node_type": "1", "metadata": {}, "hash": "0288d458b2ae2ff3980b233331bea4ae649db4ce2b0431946ba63131befdd3f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac4556f9-670f-43a1-9ee0-e249bdc85c04", "node_type": "1", "metadata": {}, "hash": "e1e98fe45624723cf948404d1163aef5069066c42dce314c29757207bea35b59", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"block_hash\": \"4BzTmMmTjKvfs6ANS5gmJ6GQzhqianEGWq7SaxSfPbdC\",\n        \"id\": \"Euy4Q33DfvJTXD8HirE5ACoXnw9PMTQ2Hq47aGyD1spc\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"5ipmcdgTieQqFXWQFCwcbZhFtkHE4PL4nW3mknBchpG6\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"4BzTmMmTjKvfs6ANS5gmJ6GQzhqianEGWq7SaxSfPbdC\",\n        \"id\": \"6ZDoSeV3gLFS2NXqMCJGEUR3VwBpSxBEPjnEEaAQfmXL\",\n        \"outcome\": {\n          \"executor_id\": \"serhii.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"9tcjij6M8Ge4aJcAa97He5nw8pH7PF8ZjRHVahBZD2VW\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"Failure\": {\n        \"ActionError\": {\n          \"index\": 0,\n          \"kind\": {\n            \"FunctionCallError\": {\n              \"ExecutionError\": \"Smart contract panicked: The account doesn't have enough balance\"\n            }\n          }\n        }\n      }\n    },", "mimetype": "text/plain", "start_char_idx": 56182, "end_char_idx": 57569, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac4556f9-670f-43a1-9ee0-e249bdc85c04": {"__data__": {"id_": "ac4556f9-670f-43a1-9ee0-e249bdc85c04", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0e1e022e-2b47-4770-8bae-bf77eef00be2", "node_type": "1", "metadata": {}, "hash": "75fb173f3da81616215d85ac74d7aa53e88fe5af85d34c0490cbba31ace93a38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f7769871-2acb-43c5-bb3d-dd08887690b0", "node_type": "1", "metadata": {}, "hash": "5def1489e7e0cd453bf77d42ee2a7ea6aa4b753ded83b6a81a5be6bc73b53054", "class_name": "RelatedNodeInfo"}}, "text": "\"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZWNlaXZlcl9pZCI6ImRldi0xNjIzMzMzOTE2MzY4LTU4NzA3NDM0ODc4NTMzIiwiYW1vdW50IjoiMTAwMDAwMDAwMCIsIm1zZyI6InRha2UtbXktbW9uZXkifQ==\",\n            \"deposit\": \"1\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"ft_transfer_call\"\n          }\n        }\n      ],\n      \"hash\": \"FQsh44pvEsK8RS9AbK868CmGwfhUU2pUrizkQ6wCWTsB\",\n      \"nonce\": 47589658000031,\n      \"public_key\": \"ed25519:5UfEFyve3RdqKkWtALMreA9jzsAGDgCtwEXGNtkGeruN\",\n      \"receiver_id\": \"dev-1623333795623-21399959778159\",\n      \"signature\": \"ed25519:2cPASnxKtCoQtZ9NFq63fg8RzpjvmmE8hL4s2jk8zuhnBCD3AnYQ6chZZrUBGwu7WrsGuWUyohP1bEca4vfbsorC\",\n      \"signer_id\": \"serhii.testnet\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"FwHUeqmYpvgkL7eBrUUAEMCuaQshcSy5vm4AHchebhK1\",\n      \"id\": \"FQsh44pvEsK8RS9AbK868CmGwfhUU2pUrizkQ6wCWTsB\",\n      \"outcome\": {\n        \"executor_id\": \"serhii.testnet\",\n        \"gas_burnt\": 2428166952740,\n        \"logs\": [],", "mimetype": "text/plain", "start_char_idx": 57574, "end_char_idx": 58601, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f7769871-2acb-43c5-bb3d-dd08887690b0": {"__data__": {"id_": "f7769871-2acb-43c5-bb3d-dd08887690b0", "embedding": null, "metadata": {"file_path": "./near_dist/tokens.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "922a3bbc-9209-4aa7-964c-71c7174b484d", "node_type": "4", "metadata": {}, "hash": "641e2c59f2f6b3990a3df96c26f4d7f6e14d4024313614ba8db01dce82bacb40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ac4556f9-670f-43a1-9ee0-e249bdc85c04", "node_type": "1", "metadata": {}, "hash": "e1e98fe45624723cf948404d1163aef5069066c42dce314c29757207bea35b59", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_ids\": [\n          \"83AdQ16bpAC7BEUyF7zoRsAgeNW7HHmjhZLvytEsrygo\"\n        ],\n        \"status\": {\n          \"SuccessReceiptId\": \"83AdQ16bpAC7BEUyF7zoRsAgeNW7HHmjhZLvytEsrygo\"\n        },\n        \"tokens_burnt\": \"242816695274000000000\"\n      },\n      \"proof\": []\n    }\n  }\n}\n```\n\n</details>\n\n\nLet's examine this response.\n\n  * `result` \u00bb `transaction_outcome` \u00bb `outcome` \u00bb `status` \u00bb `SuccessReceiptId` is `83AdQ16bpAC7BEUyF7zoRsAgeNW7HHmjhZLvytEsrygo`\n  * check `result` \u00bb `receipts_outcome` \u00bb `0` \u00bb `outcome` \u00bb `status` and find `Failure` status there\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 58610, "end_char_idx": 59336, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68a308ba-3d20-49c0-8b94-d55213698054": {"__data__": {"id_": "68a308ba-3d20-49c0-8b94-d55213698054", "embedding": null, "metadata": {"file_path": "./near_dist/setup.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5", "node_type": "4", "metadata": {}, "hash": "995b7337d4a3ad83331537d3a813c550368eb1193416b65f7ed88e4484305f3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4938e3c3-2017-4a52-a964-0a1c49526521", "node_type": "1", "metadata": {}, "hash": "3085df695f73d9f517d08e690bc90f633de3af6a3c7ef7aa4f0d2f5a041e0a55", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: Setup\ntitle: RPC Setup\n---\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\nIn order to use the RPC API you will need to setup the correct RPC endpoints:\n\n- `POST` for all RPC methods\n- `JSON RPC 2.0`\n- `id: \"dontcare\"`\n- Endpoint URL varies by network\n  -  testnet: `https://near-testnet.api.pagoda.co/rpc/v1/`\n  -  mainnet: `https://near-mainnet.api.pagoda.co/rpc/v1/`\n\n:::note\n\nWe are working on supporting historical data access in the next phase.\n\n:::\n\n## API Keys\n\nWhen accessing the NEAR network via a node provider, API services like Pagoda require an API key, which allows developers to monitor personal apps and access usage metrics.\n\n:::tip\nFor the best development experience, we recommend that you [sign up for a free API key](get-keys.md).\n:::\n\nWith a dedicated API key, developers are able to:\n\n-    Access higher request throughput and increased concurrent requests\n-    Query data from [Enhanced APIs](api.md), gaining access to free processed data for NFT, FT and NEAR balances, ownership, and metadata\n-    Utilize dedicated, individualized usage metrics\n\n### Test your API keys\n\nTo quickly test your API keys and connection, try a simple request from your command line:\n\n```sh\ncurl -X POST -H 'x-api-key:<YOUR-API-KEY>' -H 'Content-Type: application/json' -d '{\"jsonrpc\": \"2.0\", \"id\":\"dontcare\",\"method\":\"status\",\"params\":[] }' https://near-testnet.api.pagoda.co/rpc/v1/\n```\n\n## Postman Setup\n\nAn easy way to test the queries in this documentation page is to use an API request tool such as [Postman](https://www.postman.com/).\nYou only need to configure two things:\n\n1. Make sure you add a header with a key of `Content-Type` and value of `application/json`.\n   ![postman-setup-header](/docs/assets/postman-setup-headers.png)\n\n2. Then select the `Body` tab and choose the `raw` radio button and ensure `JSON` is the selected format.\n   !", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1942, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4938e3c3-2017-4a52-a964-0a1c49526521": {"__data__": {"id_": "4938e3c3-2017-4a52-a964-0a1c49526521", "embedding": null, "metadata": {"file_path": "./near_dist/setup.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5", "node_type": "4", "metadata": {}, "hash": "995b7337d4a3ad83331537d3a813c550368eb1193416b65f7ed88e4484305f3d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68a308ba-3d20-49c0-8b94-d55213698054", "node_type": "1", "metadata": {}, "hash": "97f9a4c5893c18ecc885a6b136ee2874ee1ad9f4cee95458335db79e510dda99", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb97ddfd-5fae-44fb-bee6-5d89753e5051", "node_type": "1", "metadata": {}, "hash": "7ee78d53f7088426dbc9e2ad0f1f1a2d19b974576d9198cad613032e81a209ef", "class_name": "RelatedNodeInfo"}}, "text": "[postman-setup-header](/docs/assets/postman-setup-body.png)\n\nAfter that is set up, just copy/paste the `JSON object` example snippets below into the `body` of your request, on Postman, and click `send`.\n\n\n## Command-line Setup\n\n### NEAR CLI\n\n1. If you don\u2019t yet have `near-cli` installed on your machine, follow the [near-cli installation instructions](https://docs.near.org/tools/near-cli#installation).\n2. Set your RPC URL:\n   ```\n   export NEAR_CLI_TESTNET_RPC_SERVER_URL=https://near-testnet.api.pagoda.co/rpc/v1/\n   ```\n3. Configure your API key:\n   ```\n   near set-api-key $NEAR_CLI_TESTNET_RPC_SERVER_URL <your API Key>\n   ```\n\n### HTTPie Setup {#httpie-setup}\n\nIf you prefer to use a command line interface, we have provided RPC examples you can use with [HTTPie](https://httpie.org/). \nPlease note that params take either an object or array passed as a string.\n\n```bash\nhttp post https://near-testnet.api.pagoda.co/rpc/v1/ jsonrpc=2.0 id=dontcare method=network_info params:='[]'\n```\n\n## JavaScript Setup\n\nAll of the queries listed in this documentation page can be called using [`near-api-js`](https://github.com/near/near-api-js).\n\n:::tip\nFor `near-api-js` installation and setup please refer to `near-api-js` [quick reference documentation](https://docs.near.org/tools/near-api-js/quick-reference#install).", "mimetype": "text/plain", "start_char_idx": 1942, "end_char_idx": 3260, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb97ddfd-5fae-44fb-bee6-5d89753e5051": {"__data__": {"id_": "eb97ddfd-5fae-44fb-bee6-5d89753e5051", "embedding": null, "metadata": {"file_path": "./near_dist/setup.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5", "node_type": "4", "metadata": {}, "hash": "995b7337d4a3ad83331537d3a813c550368eb1193416b65f7ed88e4484305f3d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4938e3c3-2017-4a52-a964-0a1c49526521", "node_type": "1", "metadata": {}, "hash": "3085df695f73d9f517d08e690bc90f633de3af6a3c7ef7aa4f0d2f5a041e0a55", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9e12a08c-6e75-4ff9-9bcc-61b2c7caba1e", "node_type": "1", "metadata": {}, "hash": "de28d14c030588c3b865fbb4dea3eda70ce207a30532a8453f9717c20da03273", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nAdd the following code to get started:\n\n```js\nconst { connect, keyStores } = require(\"near-api-js\");\n\n// Can be an empty object if not signing transactions\n\nconst keyStore = new keyStores.BrowserLocalStorageKeyStore();\n\nconst RPC_API_ENDPOINT = 'https://near-testnet.api.pagoda.co/rpc/v1/';\nconst API_KEY = '<YOUR-API-KEY>';\n\nconst ACCOUNT_ID = 'account.near';\n\nconst config = {\n    networkId: 'testnet',\n    keyStore,\n    nodeUrl: RPC_API_ENDPOINT,\n    headers: { 'x-api-key': API_KEY },\n};\n\n// Example: Fetching account status\n\nasync function getState(accountId) {\n    const near = await connect(config);\n    const account = await near.account(accountId);\n    const state = await account.state();\n    console.log(state);\n}\n\ngetState(ACCOUNT_ID);\n```\n\n:::info\nAll JavaScript code snippets require a `near` object. For examples of how to instantiate, [click here](https://docs.near.org/tools/near-api-js/quick-reference#connect).\n:::\n\n## Rust Setup\n\nYou can use the [near-jsonrpc-client-rs](https://github.com/near/near-jsonrpc-client-rs) library to communicate with the Pagoda RPC endpoints via JSONRPC.\n\nExample of asynchronously fetching the latest block using `tokio`:\n\n```rust\nuse near_jsonrpc_client::{auth, methods, JsonRpcClient};\nuse near_primitives::types::{BlockReference, Finality};\n\n#[tokio::main]\nasync fn main() -> Result<(), Box<dyn std::error::Error>> {\n    let client = JsonRpcClient::connect(\"https://near-testnet.api.pagoda.co/rpc/v1/\")\n        .header(auth::ApiKey::new(\"<YOUR-API-KEY>\")?);\n\n    let request = methods::block::RpcBlockRequest {\n        block_reference: BlockReference::Finality(Finality::Final),\n    };\n\n    let response = client.call(request).await?;\n\n    println!(\"{:?}\", response);\n\n    Ok(())\n}\n```\n\n---\n\n## Using `block_id` param {#using-block_id-param}\n\nThe `block_id` param can take either the block number (e.g. `27912554`) or the block hash (e.g.", "mimetype": "text/plain", "start_char_idx": 3261, "end_char_idx": 5158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9e12a08c-6e75-4ff9-9bcc-61b2c7caba1e": {"__data__": {"id_": "9e12a08c-6e75-4ff9-9bcc-61b2c7caba1e", "embedding": null, "metadata": {"file_path": "./near_dist/setup.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5", "node_type": "4", "metadata": {}, "hash": "995b7337d4a3ad83331537d3a813c550368eb1193416b65f7ed88e4484305f3d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eb97ddfd-5fae-44fb-bee6-5d89753e5051", "node_type": "1", "metadata": {}, "hash": "7ee78d53f7088426dbc9e2ad0f1f1a2d19b974576d9198cad613032e81a209ef", "class_name": "RelatedNodeInfo"}}, "text": "`'3Xz2wM9rigMXzA2c5vgCP8wTgFBaePucgUmVYPkMqhRL'` ) as an argument.\n\n:::caution\nThe block IDs of transactions shown in [NEAR Explorer](https://explorer.testnet.near.org) are not necessarily the block ID of the executed transaction. Transactions may execute a block or two after its recorded, and in some cases, can take place over several blocks. Due to this, it is important to check subsequent blocks to be sure all results related to the queried transaction are discovered.\n:::\n\n---\n\n## Using `finality` param {#using-finality-param}\n\nThe `finality` param has two options: `optimistic` and `final`.\n1. `optimistic` uses the latest block recorded on the node that responded to your query _(&lt;1 second delay after the transaction is submitted)_\n2. `final` is for a block that has been validated on at least 66% of the nodes in the network _(usually takes 2 blocks / approx. 2 second delay)_", "mimetype": "text/plain", "start_char_idx": 5159, "end_char_idx": 6051, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3d65bf3c-e834-4fec-8fec-dca55ef3e739": {"__data__": {"id_": "3d65bf3c-e834-4fec-8fec-dca55ef3e739", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852", "node_type": "4", "metadata": {}, "hash": "5c49a114d6b5a7f354d111ffaeba223e3f734a7eea71b02015deb97b086a4f78", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "78990f0c-09fd-459c-88f9-9a13363d1801", "node_type": "1", "metadata": {}, "hash": "1d630416e4f611fa5727109b67697fc52935e90407fe8ae1df539f50a8112c14", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"Lake Framework\"\n---\n\n# NEAR Lake Framework\n\n:::note GitHub repo\n\nhttps://github.com/near/near-lake-framework/\n\n:::\n\n## Description\n\nNEAR Lake Framework is an ecosystem of library companions to [NEAR Lake](/build/data-infrastructure/lake-framework/near-lake). They allow you to build your own indexer that subscribes to the stream of blocks from the [NEAR Lake](/build/data-infrastructure/lake-framework/near-lake) data source and create your own logic to process the NEAR Protocol data in the programming languages of your choice (at the moment, there are implementations in [Python](http://pypi.org/project/near-lake-framework), [JavaScript](https://www.npmjs.com/package/near-lake-framework), and [Rust](https://crates.io/crates/near-lake-framework)).\n\n:::tip NEAR Lake Framework announcement\n\nWe have announced the release of NEAR Lake Framework on NEAR Governance Forum.\n\nPlease, read the post [here](https://gov.near.org/t/announcement-near-lake-framework-brand-new-word-in-indexer-building-approach/17668).\n\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1037, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78990f0c-09fd-459c-88f9-9a13363d1801": {"__data__": {"id_": "78990f0c-09fd-459c-88f9-9a13363d1801", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852", "node_type": "4", "metadata": {}, "hash": "5c49a114d6b5a7f354d111ffaeba223e3f734a7eea71b02015deb97b086a4f78", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3d65bf3c-e834-4fec-8fec-dca55ef3e739", "node_type": "1", "metadata": {}, "hash": "6c9f9e21d84b1196ef4a470b8231adee446ccb03d0692ecbfac7f7971cf63ce3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "535a2d0e-2b33-4a1e-a42c-3159ba699a3f", "node_type": "1", "metadata": {}, "hash": "911c125107254c1b13b96728f83d0d65c2c9a6440ef2801d7688f3cbaba89c2c", "class_name": "RelatedNodeInfo"}}, "text": "## How does it compare to [NEAR Indexer Framework](near-indexer-framework.md)?\n\nFeature | Indexer Framework | Lake Framework\n------- | ----------------- | --------------\nAllows to follow the blocks and transactions in the NEAR Protocol | **Yes** | **Yes**<br />(but only mainnet and testnet networks)\nDecentralized | **Yes** | No<br />(Pagoda Inc dumps the blocks to AWS S3)\nReaction time (end-to-end) | [minimum 3.8s (estimated average 5-7s)](near-indexer-framework.md#limitations) | [minimum 3.9s (estimated average 6-8s)](#limitations)\nReaction time (framework overhead only) | 0.1s | 0.2-2.2s\nEstimated cost of infrastructure | [$500+/mo](https://near-nodes.io/rpc/hardware-rpc) | [**$20/mo**](#what-is-the-cost-of-running-a-custom-indexer-based-on-near-lake)\nEase of maintenance | Advanced<br />(need to follow every nearcore upgrade, and sync state) | **Easy**<br />(deploy once and forget)\nHow long will it take to start? | days (on mainnet/testnet) | **seconds**\nEase of local development | Advanced<br />(localnet is a good option, but testing on testnet/mainnet is too heavy) | **Easy**<br />(see [tutorials](/build/data-infrastructure/lake-framework/near-lake-state-changes-indexer))\nProgramming languages that a custom indexer can be implemented with | Rust only | **Any**<br />(currently, helper packages are released in [Python](http://pypi.org/project/near-lake-framework), [JavaScript](https://www.npmjs.com/package/near-lake-framework), and [Rust](https://crates.io/crates/near-lake-framework))\n\n\n## Limitations\n\nLake Framework relies on the data being dumped to AWS S3 from [NEAR Lake Indexer](https://github.com/near/near-lake-indexer) which is based on [NEAR Indexer Framework](near-indexer-framework.md). Thus, Lake Framework is centralized around AWS S3 storage and also around maintainers of NEAR Lake Indexer nodes (Pagoda Inc).", "mimetype": "text/plain", "start_char_idx": 1040, "end_char_idx": 2892, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "535a2d0e-2b33-4a1e-a42c-3159ba699a3f": {"__data__": {"id_": "535a2d0e-2b33-4a1e-a42c-3159ba699a3f", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852", "node_type": "4", "metadata": {}, "hash": "5c49a114d6b5a7f354d111ffaeba223e3f734a7eea71b02015deb97b086a4f78", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "78990f0c-09fd-459c-88f9-9a13363d1801", "node_type": "1", "metadata": {}, "hash": "1d630416e4f611fa5727109b67697fc52935e90407fe8ae1df539f50a8112c14", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "56679bc5-ba6d-4aef-8570-e219c2c94b30", "node_type": "1", "metadata": {}, "hash": "d33816d773352438c3a050bc1f9a5f0875b350167f9a7ab4f47b2403d6bc080b", "class_name": "RelatedNodeInfo"}}, "text": "This is the tradeoff you might still want to take given all the other benefits mentioned above.\n\nIndexers based on the Lake Framework inherit [the latency characteristics of Indexer Framework](near-indexer-framework.md#limitations) and extra latency of dumping to and reading from AWS S3, which is estimated to add at least 50ms delay while writing to S3, and 50ms on polling and reading from S3 (to make the polling cost-efficient, we default to polling only every 2s, so in the worst case you may observe an additional 2-second latency). Thus, Lake Framework adds 0.1-2.1s latency on top of Indexer Framework. Yet, again, most of the latency is there due to the finalization delay and both Indexer Framework and Lake Framework add quite a minimum overhead.\n\n## What is the cost of running a custom indexer based on NEAR Lake?\n\nIndexers based on NEAR Lake consume 100-500MB of RAM depending on the size of the preloading queue, it does not require any storage, and it can potentially run even on Raspberry PI.\n\nGetting the blockchain data from S3 will cost around $18.15 per month as NEAR Lake configured S3 buckets in such a way that the reader is paying the costs.\n\n### AWS S3 cost breakdown\n\nAssuming NEAR Protocol produces exactly 1 block per second (which is really not, the average block production time is 1.3s). A full day consists of 86400 seconds, that's the max number of blocks that can be produced.\n\nAccording the [Amazon S3 prices](https://aws.amazon.com/s3/pricing/?nc1=h_ls) `list` requests are charged for $0.005 per 1000 requests and `get` is charged for $0.0004 per 1000 requests.", "mimetype": "text/plain", "start_char_idx": 2893, "end_char_idx": 4493, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "56679bc5-ba6d-4aef-8570-e219c2c94b30": {"__data__": {"id_": "56679bc5-ba6d-4aef-8570-e219c2c94b30", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852", "node_type": "4", "metadata": {}, "hash": "5c49a114d6b5a7f354d111ffaeba223e3f734a7eea71b02015deb97b086a4f78", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "535a2d0e-2b33-4a1e-a42c-3159ba699a3f", "node_type": "1", "metadata": {}, "hash": "911c125107254c1b13b96728f83d0d65c2c9a6440ef2801d7688f3cbaba89c2c", "class_name": "RelatedNodeInfo"}}, "text": "Calculations (assuming we are following the tip of the network all the time):\n\n```\n86400 blocks per day * 5 requests for each block / 1000 requests * $0.0004 per 1k requests = $0.173 * 30 days = $5.19\n```\n**Note:** 5 requests for each block means we have 4 shards (1 file for common block data and 4 separate files for each shard)\n\nAnd a number of `list` requests we need to perform for 30 days:\n\n```\n86400 blocks per day / 1000 requests * $0.005 per 1k list requests = $0.432 * 30 days = $12.96\n\n$5.19 + $12.96 = $18.15\n```\n\nNote, the price depends on the number of shards.\n\n## Examples & Tutorials\n\n- [`near-examples/near-lake-raw-printer`](https://github.com/near-examples/near-lake-raw-printer): simple example of a data printer built on top of NEAR Lake Framework\n- [`near-examples/near-lake-accounts-watcher`](https://github.com/near-examples/near-lake-accounts-watcher): source code for a video tutorial on how to use the NEAR Lake Framework\n- [`near-examples/indexer-tx-watcher-example-lake`](https://github.com/near-examples/indexer-tx-watcher-example-lake) indexer example that watches for transaction for specified accounts/contracts build on top of NEAR Lake Framework\n\n:::note Tutorials\n\nSee [Tutorials page](/build/data-infrastructure/lake-framework/near-lake-state-changes-indexer)\n\n:::", "mimetype": "text/plain", "start_char_idx": 4495, "end_char_idx": 5796, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6481616f-67d3-47b9-be72-93e2a17b9626": {"__data__": {"id_": "6481616f-67d3-47b9-be72-93e2a17b9626", "embedding": null, "metadata": {"file_path": "./near_dist/list-for-sale.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06ca800-2135-4f04-84cb-9088a554e1bc", "node_type": "4", "metadata": {}, "hash": "596b0ea3b7a895f5ebf2e3886f8c167c9845cfdf7dea0400562f769560b55785", "class_name": "RelatedNodeInfo"}}, "text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"nft-contract-tabs\" className=\"file-tabs\">\n<TabItem value=\"Paras\" label=\"Paras\">\n\n```bash\nnear call marketplace.paras.near storage_deposit '{\"receiver_id\": \"bob.near\"}' --accountId bob.near --deposit 0.00939\n\nnear call nft.primitives.near nft_approve '{\"token_id\": \"1e95238d266e5497d735eb30\", \"account_id\": \"marketplace.paras.near\", \"msg\": {\"price\": \"200000000000000000000000\", \"market_type\": \"sale\", \"ft_token_id\": \"near\"}}' --accountId bob.near\n```\n\nMethod `nft_approve` of a NFT contract also calls the `nft_on_approve` method in `marketplace.paras.near` as a callback.\n\n</TabItem>\n\n<TabItem value=\"Mintbase\" label=\"Mintbase\">\n\n```bash\nnear call simple.market.mintbase1.near deposit_storage '{\"autotransfer\": \"true\"}' --accountId bob.near --deposit 0.00939\n\nnear call nft.primitives.near nft_approve '{\"token_id\": \"3c46b76cbd48e65f2fc88473\", \"account_id\": \"simple.market.mintbase1.near\", \"msg\": {\"price\": \"200000000000000000000000\"}}' --accountId bob.near\n```\n\nMethod `nft_approve` of a NFT contract also calls the `nft_on_approve` method in `simple.market.mintbase1.near` as a callback.\n\n</TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1196, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b9db4a17-d5cf-4526-b5be-8ca24ef63353": {"__data__": {"id_": "b9db4a17-d5cf-4526-b5be-8ca24ef63353", "embedding": null, "metadata": {"file_path": "./near_dist/1.2-testing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "49cdffca-ff74-4732-aeda-b996777b7dc6", "node_type": "4", "metadata": {}, "hash": "86310111b43d79e13b964b3064dd11eb7827abc170f0198a75b23246e8411d90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0e602a0-df33-4414-bd22-1dda06db93e0", "node_type": "1", "metadata": {}, "hash": "eb39a9388e19f3789d094f404eccc15202ab559780c665dfa85a03719c5ae5d5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: sandbox-testing\ntitle: Sandbox Testing\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nIn the previous section we went through the contract's code, analyzing how it worked. Now, we need to test it and make sure it works as expected! For contracts there are two types of testing you can do: unit testing and sandbox testing.\n\nHere, we will focus on the sandbox testing, as it enables to deploy the contract in a realistic environment, allowing us to create multiple accounts and interact with the contract as if it was deployed on the blockchain.\n\n:::info unit testing\n\nUnit tests are built into the language and are used to test the contract functions individually. These tests work well when little context is required. However, they cannot test chain interactions - like sending accounts $NEAR tokens - since they need to be processed by the network.\n\n:::\n\n---\n\n## Account Creation\n\nThe first thing our test does is to create multiple accounts with 10 $NEAR tokens each, and deploy the contract into one of them.\n\n<Tabs groupId=\"code-tabs\">\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/sandbox-test/main.ava.js#L12\"\n                start=\"12\" end=\"22\" />\n        \n        To deploy the contract, we pass the path to the compiled WASM contract as an argument to the test in `package.json`. Indeed, when executing `npm run test`, the command will first compile the contract and then run the tests.\n\n    </TabItem>\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/tests/test_basics.rs#L10\"\n                start=\"17\" end=\"28\" />\n\n        Notice that the sandbox compiles the code itself, so we do not need to pre-compile the contract before running the tests.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2086, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0e602a0-df33-4414-bd22-1dda06db93e0": {"__data__": {"id_": "e0e602a0-df33-4414-bd22-1dda06db93e0", "embedding": null, "metadata": {"file_path": "./near_dist/1.2-testing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "49cdffca-ff74-4732-aeda-b996777b7dc6", "node_type": "4", "metadata": {}, "hash": "86310111b43d79e13b964b3064dd11eb7827abc170f0198a75b23246e8411d90", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9db4a17-d5cf-4526-b5be-8ca24ef63353", "node_type": "1", "metadata": {}, "hash": "d5e105be7cc9da0abc78f29688dab04c466446c034f0ed9538e0eb4e7a57aee8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d2f8fb45-145b-4d34-be57-3fb245b32720", "node_type": "1", "metadata": {}, "hash": "dffa7449b5638dbcef945e7a04ba182bb08fcecdeffed47fd1e5189d008f6ef8", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n</Tabs>\n\n---\n\n## Contract Initialization\n\nTo initialize, the contract's account calls itself, invoking the `init` function with an `end_time` set to 60 seconds in the future.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/sandbox-test/main.ava.js\"\n                start=\"25\" end=\"27\" />\n\n:::warning Time Units\n\nThe contract measures time in **nanoseconds**, for which we need to multiply the result of `Date.now()` (expressed in milliseconds) by `10^6`\n\n:::\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/tests/test_basics.rs\"\n                start=\"30\" end=\"37\" />\n\n:::warning Time Units\n\nThe contract measures time in **nanoseconds**, for which we need to multiply the result of `Utc::now().timestamp()` (expressed in seconds) by `10^9`\n\n:::\n\n    </TabItem>\n</Tabs>\n\n:::info Time is a String\n\nNotice that the time is passed as a `String` to the contract, this is because smart contracts cannot receive numbers larger than `52 bits` and we want to pass a `unix timestamp` in **nanoseconds**\n\n:::\n\n---\n\n## Bidding\n\nNow that the contract is deployed and initialized, we can start biding and checking if the contract behaves as expected.\n\nWe first make `alice` place a bid of 1 NEAR, and check that the contract correctly registers the bid. Then, we make `bob` place a bid of 2 NEAR, and check that the highest bid is updated, and that `alice` gets its NEAR refunded.", "mimetype": "text/plain", "start_char_idx": 2091, "end_char_idx": 3844, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d2f8fb45-145b-4d34-be57-3fb245b32720": {"__data__": {"id_": "d2f8fb45-145b-4d34-be57-3fb245b32720", "embedding": null, "metadata": {"file_path": "./near_dist/1.2-testing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "49cdffca-ff74-4732-aeda-b996777b7dc6", "node_type": "4", "metadata": {}, "hash": "86310111b43d79e13b964b3064dd11eb7827abc170f0198a75b23246e8411d90", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e0e602a0-df33-4414-bd22-1dda06db93e0", "node_type": "1", "metadata": {}, "hash": "eb39a9388e19f3789d094f404eccc15202ab559780c665dfa85a03719c5ae5d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "75018fbe-f42f-4d66-a544-2d1c6f045d4b", "node_type": "1", "metadata": {}, "hash": "b946c082fd185e931c42dded6dd6713ab2950da6553407c592210678005aaa23", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/sandbox-test/main.ava.js\"\n                start=\"45\" end=\"60\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/tests/test_basics.rs\"\n                start=\"41\" end=\"73\" />\n\n    </TabItem>\n\n</Tabs>\n\n#### Checking the balance\nIt is important to notice how we check if `alice` was refunded. We query her balance after her first bid, and then check if it has increased by 1 NEAR after `bob` makes his bid. \n\nYou might be tempted to check if `alice`'s balance is exactly 10 NEAR after she gets refunded, but `alice` balance cannot be 10 NEAR anymore, because some $NEAR was **consumed as `gas` fees** when `alice` called `bid`.\n\n#### Testing invalid calls\n\nWhen testing we should also check that the contract does not allow invalid calls. The next part checks that the contract doesn't allow for bids with fewer $NEAR tokens than the previous to be made.", "mimetype": "text/plain", "start_char_idx": 3846, "end_char_idx": 5119, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "75018fbe-f42f-4d66-a544-2d1c6f045d4b": {"__data__": {"id_": "75018fbe-f42f-4d66-a544-2d1c6f045d4b", "embedding": null, "metadata": {"file_path": "./near_dist/1.2-testing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "49cdffca-ff74-4732-aeda-b996777b7dc6", "node_type": "4", "metadata": {}, "hash": "86310111b43d79e13b964b3064dd11eb7827abc170f0198a75b23246e8411d90", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2f8fb45-145b-4d34-be57-3fb245b32720", "node_type": "1", "metadata": {}, "hash": "dffa7449b5638dbcef945e7a04ba182bb08fcecdeffed47fd1e5189d008f6ef8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53670b6f-cbc4-4b0b-9c04-687043f18765", "node_type": "1", "metadata": {}, "hash": "dc5513632d9e73740a6bb5b20098223056a07ff39964de89190ea2b61fd4ac45", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/sandbox-test/main.ava.js#L63\"\n                start=\"63\" end=\"63\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/tests/test_basics.rs\"\n                start=\"76\" end=\"82\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Fast Forwarding Time\nThe sandbox allows us to fast forward time, which is useful to test the contract when the auction is over. The test advances 200 blocks in order to pass a minute, and thus finishing the auction.\n\nAny bid made after the auction ends should be rejected.\n\n<Tabs groupId=\"code-tabs\">\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/sandbox-test/main.ava.js\"\n                start=\"65\" end=\"69\" />\n\n    </TabItem>\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/tests/test_basics.rs\"\n                start=\"85\" end=\"95\" />\n\n    </TabItem>\n</Tabs>\n\n---\n\n## Executing the tests \n\nNow that we understand what we are testing, let's go ahead and run the tests!", "mimetype": "text/plain", "start_char_idx": 5121, "end_char_idx": 6755, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53670b6f-cbc4-4b0b-9c04-687043f18765": {"__data__": {"id_": "53670b6f-cbc4-4b0b-9c04-687043f18765", "embedding": null, "metadata": {"file_path": "./near_dist/1.2-testing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "49cdffca-ff74-4732-aeda-b996777b7dc6", "node_type": "4", "metadata": {}, "hash": "86310111b43d79e13b964b3064dd11eb7827abc170f0198a75b23246e8411d90", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "75018fbe-f42f-4d66-a544-2d1c6f045d4b", "node_type": "1", "metadata": {}, "hash": "b946c082fd185e931c42dded6dd6713ab2950da6553407c592210678005aaa23", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        ```bash\n        # if you haven't already, install the dependencies\n        npm install\n\n        # run the tests\n        npm run test \n        ```\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        ```bash\n        cargo test\n        ```\n\n    </TabItem>\n\n</Tabs>\n\nAll tests should pass, and you should see the output of the tests in the console. If you see any errors, please contact us in the [NEAR Discord](https://near.chat) or through [Telegram](https://t.me/neardev) and we'll help you out!\n\n---\n\n## Conclusion \n\nIn this part of the tutorial, we've seen how to use our sandbox testing environment to test the contract. We've tested the contract's initialization, biding, and time advancement.\n\nYou are now ready to move to the next section, where we will deploy the contract to `testnet` and interact with it through the CLI.", "mimetype": "text/plain", "start_char_idx": 6758, "end_char_idx": 7686, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "763ec519-83f7-48ee-bc86-4b729c5bf7df": {"__data__": {"id_": "763ec519-83f7-48ee-bc86-4b729c5bf7df", "embedding": null, "metadata": {"file_path": "./near_dist/hello-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb", "node_type": "4", "metadata": {}, "hash": "eda60acf7eaf0de3956c3ba76b1495febe86ccec5694dee76fd6c448a348c359", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "562b7236-b839-4254-babb-d6e3cddb5ae0", "node_type": "1", "metadata": {}, "hash": "b198881df4725c2716cededd0fabf163aa2e159d319d836c9550d136124db297", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: interaction\ntitle: Smart Contract Interaction\n---\n\nYour frontend can interact with different blockchains using the built-in BOS API. Let's see how to create an application that reads and stores a greeting from a NEAR smart contract. \n\n![widgets](/docs/hello-near-logedin.png)\n*View of our Hello Near app when the user is logged-in*\n\n:::info\nCheck the finished example at [near.social code page](https://near.social/#/mob.near/widget/WidgetSource?src=gagdiez.near/widget/HelloNear).\n:::\n\n---\n\n## The Contract\n\nWe have deployed a `Hello World` smart contract in the NEAR network at `hello.near-examples.near`. The contract exposes two methods:\n- `set_greeting(greeting: string): void`, which accepts a greeting and stores it in the contract state.\n- `get_greeting(): string` which returns the stored greeting.\n\n---\n\n## Retrieving the Greeting\nSince we want to interact with the NEAR network, we will use the `Near` object from the BOS API.\n\n```ts\nconst contract = \"hello.near-examples.near\";\nconst greeting = Near.view(contract, \"get_greeting\", {});\n\nreturn <div>{greeting} World</div>;\n```\n\nAssuming the contract is storing `\"Hello\"`, this will render a simple:\n\n```json\nHello World\n```\n\n---\n\n## Changing the Greeting\nTo modify the greeting, we simply need to use `Near.call` to call the `set_greeting` method. This however, requires us to have a frontend in which the user can input the new greeting.\n\nLets create it in two steps:\n1. Build the HTML that will be rendered\n2. Add the logic to handle the function call\n\n<hr className=\"subsection\" />\n\n### 1. HTML Components\nUse the following code to create a simple frontend, composed by a title, an input form to change the greeting, and a button to submit the change.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1724, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "562b7236-b839-4254-babb-d6e3cddb5ae0": {"__data__": {"id_": "562b7236-b839-4254-babb-d6e3cddb5ae0", "embedding": null, "metadata": {"file_path": "./near_dist/hello-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb", "node_type": "4", "metadata": {}, "hash": "eda60acf7eaf0de3956c3ba76b1495febe86ccec5694dee76fd6c448a348c359", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "763ec519-83f7-48ee-bc86-4b729c5bf7df", "node_type": "1", "metadata": {}, "hash": "401f9df39a04ca7fc8180803efbf369cb412de065a2720c947c59ec7f3ea1454", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a14b16e7-4198-453b-bfbc-2a91fce4e958", "node_type": "1", "metadata": {}, "hash": "b36aa5b49c9e5929c627c2bec1b05d9e87f36b66196d76f7c1b6d8960982678f", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst contract = \"hello.near-examples.near\";\nconst greeting = Near.view(contract, \"get_greeting\", {});\n\n// Define components\nconst greetingForm = (\n  <>\n    <div className=\"border border-black p-3\">\n      <label>Update greeting</label>\n      <input placeholder=\"Howdy\" onChange={onInputChange} />\n      <button className=\"btn btn-primary mt-2\" onClick={onBtnClick}>\n        Save\n      </button>\n    </div>\n  </>\n);\n\nconst notLoggedInWarning = <p> Login to change the greeting </p>;\n\n// Render\nreturn (\n  <>\n    <div className=\"container border border-info p-3\">\n      <h3 className=\"text-center\">\n        The contract says:\n        <span className=\"text-decoration-underline\"> {greeting} </span>\n      </h3>\n\n      <p className=\"text-center py-2\">\n        Look at that! A greeting stored on the NEAR blockchain.\n      </p>\n\n      {context.accountId ? greetingForm : notLoggedInWarning}\n    </div>\n  </>\n);\n```\n\n:::info Relevant HTML\nThere are two important things to notice in the code above:\n\n1. **onChange & onClick**: We have prepared our `<input>` and `<button>` to act when something happens. Particularly, we will build two methods: one when the input changes, and one when the button is pressed.\n\n2. **context.accountId**: We check if `context.accountId` is set, which tells us if the user has logged in using their NEAR account, and thus can interact with NEAR contracts.\n:::\n\n<hr className=\"subsection\" />\n\n### 2. Handling User's Input\nHaving our component's view ready, we now need to define the logic for when the user inputs a new greeting and presses the `Submit` button. This is, we need to define the `onInputChange` and `onBtnClick` methods.\n\n#### onInputChange\nWhen the user inputs a new greeting, we want to store it somewhere until the `Submit` button is pressed, for this, we can use the [application's State](../../2.build/3.near-components/anatomy/state.md).\n\nIn BOS, the state is initialized through `State.init`, updated with `State.update`, and accessed through the `state` variable (notice the lowercase).", "mimetype": "text/plain", "start_char_idx": 1726, "end_char_idx": 3763, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a14b16e7-4198-453b-bfbc-2a91fce4e958": {"__data__": {"id_": "a14b16e7-4198-453b-bfbc-2a91fce4e958", "embedding": null, "metadata": {"file_path": "./near_dist/hello-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb", "node_type": "4", "metadata": {}, "hash": "eda60acf7eaf0de3956c3ba76b1495febe86ccec5694dee76fd6c448a348c359", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "562b7236-b839-4254-babb-d6e3cddb5ae0", "node_type": "1", "metadata": {}, "hash": "b198881df4725c2716cededd0fabf163aa2e159d319d836c9550d136124db297", "class_name": "RelatedNodeInfo"}}, "text": "Lets store the new greeting in the App's state:\n\n```js\nState.init({ new_greeting: \"\" });\n\nconst onInputChange = ({ target }) => {\n  State.update({ new_greeting: target.value });\n};\n```\n\n#### onBtnClick\nThe only thing left to do, is to handle when the user clicks the `Submit` button. What we want is to check if the user changed the greeting, and submit it to the contract.\n\n```js\nconst onBtnClick = () => {\n  if (!state.new_greeting) {\n    return;\n  }\n\n  Near.call(contract, \"set_greeting\", {\n    greeting: state.new_greeting,\n  });\n};\n```\n\n---\n\n## Complete Example\nWe have deployed a complete version of this example on the NEAR blockchain, so you can see its code and play with it.\n\n:::tip\n- **Code**: Check the code of this example at the [near.social code page](https://near.social/#/mob.near/widget/WidgetSource?src=gagdiez.near/widget/HelloNear).\n\n- **Try It**: Interact with the application at the [near.social page](https://near.social/#/gagdiez.near/widget/HelloNear).\n:::", "mimetype": "text/plain", "start_char_idx": 3764, "end_char_idx": 4746, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bbe92749-bce9-4e46-807b-7c7cf91d37f5": {"__data__": {"id_": "bbe92749-bce9-4e46-807b-7c7cf91d37f5", "embedding": null, "metadata": {"file_path": "./near_dist/validators.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2", "node_type": "4", "metadata": {}, "hash": "f625f7bff619565447500e36dc6117b6f199f6e4ab6249296952598a2af0ca9f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6b8b349c-d41b-4329-aa40-a32faacfb2a5", "node_type": "1", "metadata": {}, "hash": "9f94989e0cafb73974491ec3c776bc911049d5aa2b84931fde3e9bf8fb993787", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: validators\ntitle: Validators\n---\n\nThe NEAR network is decentralized, meaning that multiple people collaborate in order to keep it safe. We call such people **validators**.\n\nIn order to make sure that all the transactions in the network are valid, i.e. that nobody is trying to steal money, the validators follow a specific consensus\nmechanism.\n\nCurrently, there are a few well-known consensus mechanisms to keep a blockchain working correctly and resistant to attacks.\nNEAR Protocol uses a version of **Proof-of-Stake**, particularly [Thresholded Proof of Stake](https://near.org/blog/thresholded-proof-of-stake/).\n\nIn Proof-of-Stake, users show support to specific network validators by delegating NEAR tokens to them. This process is known as **staking**. The main idea is that, if a validator has a large amount of tokens delegated is because the community trusts them.\n\n### Securing the Network\nValidators have two main jobs. The first is to validate and execute transactions, aggregating them in the blocks that form the blockchain. Their second job is to oversee other validators, making sure no one produces an invalid block or creates an alternative chain (eg. with the goal of creating a double spend).\n\nIf a validator is caught misbehaving, then they get \"slashed\", meaning that their stake (or part of it) is burned.\n\nIn the NEAR networks, an attempt to manipulate the chain would mean taking control over the majority of the validators at once, so that the malicious activity won't be flagged. However, this would require putting a huge sum of capital at risk, since an unsuccessful attack would mean slashing your staked tokens.\n\n### Validator's Economy\nIn exchange for servicing the network, validators are rewarded with a target number of NEAR every epoch. The target value is computed in such a way that, on an annualized basis, it will be 4.5% of the total supply.\n\nAll transaction fees (minus the part which is allocated as the rebate for contracts) which are collected within each epoch are burned by the system. The inflationary reward is paid out to validators at the same rate regardless of the number of fees collected or burned. \n\n\n## Intro to Validators\n\n[Validators](https://pages.near.org/papers/the-official-near-white-paper/#economics) are responsible for producing blocks and the security of the network.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2342, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6b8b349c-d41b-4329-aa40-a32faacfb2a5": {"__data__": {"id_": "6b8b349c-d41b-4329-aa40-a32faacfb2a5", "embedding": null, "metadata": {"file_path": "./near_dist/validators.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2", "node_type": "4", "metadata": {}, "hash": "f625f7bff619565447500e36dc6117b6f199f6e4ab6249296952598a2af0ca9f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bbe92749-bce9-4e46-807b-7c7cf91d37f5", "node_type": "1", "metadata": {}, "hash": "c7b05e2393205cefb2174ee6aa20553ae5427d97772e2edf1eada28d0404fdc2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7a0730ee-9a79-46c9-8564-e7eec9bb3c53", "node_type": "1", "metadata": {}, "hash": "265e87cfa84cfd1c91e35540e6846ad6d932aa4dbaf18e46ddd0342cb940df51", "class_name": "RelatedNodeInfo"}}, "text": "Since Validators validate all shards, high requirements are set for running them (an 8-Core CPU with 16GB of RAM and 1 TB SSD of storage). The cost of running a block-producing validator node is estimated to be $330 per month for hosting. Please see our [hardware and cost estimates page](https://near-nodes.io/validator/hardware) for more info.\n\nThe current active Validators are available on the Explorer. The minimum seat price to become a block-producing validator is based on the 300th proposal. (If more than 300 proposals are submitted, the threshold will simply be the stake of the 300th proposal, provided that it\u2019s larger than the minimum threshold of 25,500 $NEAR.) The current seat price to become a block-producing validator is updated live on the Explorer. Any validator nodes with stakes higher than the seat price can join the active set of Validators.\n\n<blockquote className=\"lesson\">\n<strong>Is there a plan to support GPU compute if certain validator nodes can offer that or is it just CPU?</strong><br /><br />\n  \nWe don't need GPU support as we are a POS chain and we require very little compute power.\n\nYou can read more about our consensus strategy on our <a href=\"https://github.com/near/wiki/blob/master/Archive/validators/about.md\" target=\"_blank\" rel=\"noopener noreferrer\">Validator Quickstart</a> and <a href=\"https://github.com/near/wiki/blob/master/Archive/validators/faq.md\" target=\"_blank\" rel=\"noopener noreferrer\">Staking FA</a>.\n</blockquote>\n\n## Chunk-Only Validators\n\nThe Chunk-Only Producer is a more accessible role with lower hardware and token requirements. This new role will allow the network's validator number to grow, creating more opportunities to earn rewards and secure the NEAR Ecosystem. \n\n[Chunk-Only Producers](https://pages.near.org/papers/the-official-near-white-paper/#economics) are solely responsible for [producing chunks](https://pages.near.org/papers/nightshade/#nightshade) (parts of the block from a shard, see [Nightshade](https://near.org/papers/nightshade/) for more detail) in one shard (a partition on the network).", "mimetype": "text/plain", "start_char_idx": 2344, "end_char_idx": 4427, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7a0730ee-9a79-46c9-8564-e7eec9bb3c53": {"__data__": {"id_": "7a0730ee-9a79-46c9-8564-e7eec9bb3c53", "embedding": null, "metadata": {"file_path": "./near_dist/validators.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2", "node_type": "4", "metadata": {}, "hash": "f625f7bff619565447500e36dc6117b6f199f6e4ab6249296952598a2af0ca9f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6b8b349c-d41b-4329-aa40-a32faacfb2a5", "node_type": "1", "metadata": {}, "hash": "9f94989e0cafb73974491ec3c776bc911049d5aa2b84931fde3e9bf8fb993787", "class_name": "RelatedNodeInfo"}}, "text": "Because Chunk-Only Producers only need to validate one shard, they can run the validator node on a 8-Core CPU, with 16GB of RAM, and 500 GB SSD of storage.\n\nLike Validators, Chunk-Only Producers will receive, at minimum, 4.5% annual rewards. If less than 100% of the tokens on the network is staked, Chunk-Only Producers stand to earn even more annual rewards. For more details about the Validator\u2019s economics, please check out [NEAR\u2019s Economics Explained](https://near.org/blog/near-protocol-economics/).\n\n## Dedicated Validator Documentation Site \n\nIf you'd like to further explore Validators and Nodes in general, you can visit the [Dedicated Validator Documentation Site](https://near-nodes.io/).\n\n<blockquote className=\"lesson\">\n<strong>If a developer writes a vulnerable or malicious dApp, is a validator implicitly taking on risk?</strong><br /><br />\n  \nNo. We have handled the potential damages to the network on the protocol level. For example, we have a lot of limiters that constrain how much data you can pass into a function call or how much compute you can do in one function call, etc.\n\nThat said, smart contract developers will need to be responsible for their own dApps, as there is no stage gate or approval process. All vulnerability can only damage the smart contract itself. Luckily, updating smart contracts is very smooth on NEAR, so vulnerabilities can be updated/patched to an account in ways that cannot be done on other blockchains.\n</blockquote>", "mimetype": "text/plain", "start_char_idx": 4428, "end_char_idx": 5902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9bab25ab-c803-4768-9cba-21862d1751b7": {"__data__": {"id_": "9bab25ab-c803-4768-9cba-21862d1751b7", "embedding": null, "metadata": {"file_path": "./near_dist/networks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3583ecf0-d669-4e61-a52a-0d02b1adf999", "node_type": "4", "metadata": {}, "hash": "9ccdbb291371b6c84d1084632c2931264fe444f5ef74151d59025c1b7192be40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d291f438-0c5f-4f3d-83d7-aa4af99c7a9d", "node_type": "1", "metadata": {}, "hash": "8eb9e80f42dc83214f96de07c596669f90476af9da3e7c6ef73addc606755713", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: networks\ntitle: NEAR Networks\nsidebar_label: Networks\n---\n\nNEAR Protocol operates on several networks each operating with their own independent validators and unique state. These networks are as follows:\n\n- [`mainnet`](/concepts/basics/networks#mainnet)\n- [`testnet`](/concepts/basics/networks#testnet)\n- [`localnet`](/concepts/basics/networks#localnet)\n\n## Mainnet {#mainnet}\n\n`mainnet` is for production ready smart contracts and live token transfers. Contracts ready for `mainnet` should have gone through rigorous testing and independent security reviews if necessary. `mainnet` is the only network where state is guaranteed to persist over time _(subject to the typical security guarantees of the network's validation process)_.\n\n- Status: `https://rpc.mainnet.near.org/status`\n- [ [NearBlocks Explorer](https://nearblocks.io) ]\n- [ [Wallet](https://wallet.near.org) ]\n- [ [Data Snapshots](https://near-nodes.io/intro/node-data-snapshots) ]\n\n## Testnet {#testnet}\n\n`testnet` is a public network and the final testing network for `nearcore` changes before deployment to `mainnet`. `testnet` is intended for testing all aspects of the NEAR platform prior to `mainnet` deployment. From account creation, mock token transfers, development tooling, and smart contract development, the `testnet` environment closely resembles `mainnet` behavior. All `nearcore` changes are deployed as release candidates on first testnet, before the changes are released on `mainnet`. A number of `testnet` validators validate transactions and create new blocks. dApp developers deploy their applications on `testnet` before deploying on `mainnet`. It is important to note that `testnet` has its own transactions and states.\n\n- Status: `https://rpc.testnet.near.org/status`\n- [ [Explorer](https://testnet.nearblocks.io) ]\n- [ [Wallet](https://testnet.mynearwallet.com/) ]\n- [ [Data Snapshots](https://near-nodes.io/intro/node-data-snapshots) ]\n\n## Localnet {#localnet}\n\n`localnet` is intended for developers who want to work with the NEAR platform independent of the public blockchain.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2075, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d291f438-0c5f-4f3d-83d7-aa4af99c7a9d": {"__data__": {"id_": "d291f438-0c5f-4f3d-83d7-aa4af99c7a9d", "embedding": null, "metadata": {"file_path": "./near_dist/networks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3583ecf0-d669-4e61-a52a-0d02b1adf999", "node_type": "4", "metadata": {}, "hash": "9ccdbb291371b6c84d1084632c2931264fe444f5ef74151d59025c1b7192be40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9bab25ab-c803-4768-9cba-21862d1751b7", "node_type": "1", "metadata": {}, "hash": "6ad0c880ec058dd7bfc0a31dfe34acc1cd5bd30f8ff881a84fb49fbcfe95c8ad", "class_name": "RelatedNodeInfo"}}, "text": "You will need to generate nodes yourself. `localnet` gives you the total control over accounts, economics, and other factors for more advanced use cases (including making changes to `nearcore`). For developers, `localnet` is the right choice if you prefer to avoid leaking information about your work during the development process.\n\nMore on local development [here](https://near-nodes.io/validator/running-a-node)\n\n`near-cli` [network selection](/tools/near-cli#network-selection) variable is `local`\n\n---\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\">\n<h8>Ask it on StackOverflow!</h8>\n</a>\n:::", "mimetype": "text/plain", "start_char_idx": 2076, "end_char_idx": 2758, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "04563622-16fd-40f5-8409-11270d034427": {"__data__": {"id_": "04563622-16fd-40f5-8409-11270d034427", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dfa5085d-a991-492a-a324-a0f1fb4e7b73", "node_type": "1", "metadata": {}, "hash": "d02addcdb8f400415e4bb35a302fbde4da6c96482e0fd1355ee8c4e9e607a9aa", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: actions\ntitle: Transfers & Actions\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nSmart contracts can perform specific `Actions` such as transferring NEAR, or calling other contracts.\n\nAn important property of `Actions` is that they can be batched together when acting on the same contract. **Batched actions** act as a unit: they execute in the same [receipt](../../../1.concepts/protocol/transactions.md#receipt-receipt), and if **any fails**, then they **all get reverted**.\n\n:::info\n`Actions` can be batched only when they act on the **same contract**. You can batch calling two methods on a contract,\nbut **cannot** call two methods on different contracts.\n:::\n\n---\n\n## Transfer NEAR \u24c3\n\nYou can send $NEAR from your contract to any other account on the network. The Gas cost for transferring $NEAR is fixed and is based on the protocol's genesis config. Currently, it costs `~0.45 TGas`.\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, NearPromise, call } from 'near-sdk-js'\n  import { AccountId } from 'near-sdk-js/lib/types'\n\n  @NearBindgen({})\n  class Contract{\n    @call({})\n    transfer({ to, amount }: { to: AccountId, amount: bigint }) {\n      return NearPromise.new(to).transfer(amount);\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, AccountId, Promise, NearToken};\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n\n  #[near]\n  impl Contract {\n    pub fn transfer(&self, to: AccountId, amount: NearToken){\n      Promise::new(to).transfer(amount);\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n:::tip Why is there no callback?\nThe only case where a transfer will fail is if the receiver account does **not** exist.\n:::\n\n:::caution\nRemember that your balance is used to cover for the contract's storage.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1897, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dfa5085d-a991-492a-a324-a0f1fb4e7b73": {"__data__": {"id_": "dfa5085d-a991-492a-a324-a0f1fb4e7b73", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "04563622-16fd-40f5-8409-11270d034427", "node_type": "1", "metadata": {}, "hash": "e1914285052e2c7717acb55fecd648bbd2a74bc75f5a248c6e6304cb9738620e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e7334d11-436e-4a7a-9000-d92467ced7e9", "node_type": "1", "metadata": {}, "hash": "4783b720d008ecb7314597320aa9bc412f8ffbfdebf173157e723950ce702be8", "class_name": "RelatedNodeInfo"}}, "text": "When sending money, make sure you always leave enough to cover for future storage needs.\n:::\n\n---\n\n## Function Call\n\nYour smart contract can call methods in another contract. In the snippet below we call a method\nin a deployed [Hello NEAR](../quickstart.md) contract, and check if everything went\nright in the callback.", "mimetype": "text/plain", "start_char_idx": 1898, "end_char_idx": 2217, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e7334d11-436e-4a7a-9000-d92467ced7e9": {"__data__": {"id_": "e7334d11-436e-4a7a-9000-d92467ced7e9", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dfa5085d-a991-492a-a324-a0f1fb4e7b73", "node_type": "1", "metadata": {}, "hash": "d02addcdb8f400415e4bb35a302fbde4da6c96482e0fd1355ee8c4e9e607a9aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9", "node_type": "1", "metadata": {}, "hash": "69171f56422146da310f68b5527c9793c3eda3afb12d67456735823e8339e24c", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, near, call, bytes, NearPromise } from 'near-sdk-js'\n  import { AccountId } from 'near-sdk-js/lib/types'\n\n  const HELLO_NEAR: AccountId = \"hello-nearverse.testnet\";\n  const NO_DEPOSIT: bigint = BigInt(0);\n  const CALL_GAS: bigint = BigInt(\"10000000000000\");\n\n  @NearBindgen({})\n  class Contract {\n    @call({})\n    call_method({}): NearPromise {\n      const args = bytes(JSON.stringify({ message: \"howdy\" }))\n\n      return NearPromise.new(HELLO_NEAR)\n      .functionCall(\"set_greeting\", args, NO_DEPOSIT, CALL_GAS)\n      .then(\n        NearPromise.new(near.currentAccountId())\n        .functionCall(\"callback\", bytes(JSON.stringify({})), NO_DEPOSIT, CALL_GAS)\n      )\n      .asReturn()\n    }\n\n    @call({privateFunction: true})\n    callback({}): boolean {\n      let result, success;\n    \n      try{ result = near.promiseResult(0); success = true }\n      catch{ result = undefined; success = false }\n    \n      if (success) {\n        near.log(`Success!`)\n        return true\n      } else {\n        near.log(\"Promise failed...\")\n        return false\n      }\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, env, log, Promise, Gas, PromiseError};\n  use serde_json::json;\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n\n  const HELLO_NEAR: &str = \"hello-nearverse.testnet\";\n  const NO_DEPOSIT: u128 = 0;\n  const CALL_GAS: Gas = Gas(5_000_000_000_000);\n\n  #[near]\n  impl Contract {\n    pub fn call_method(&self){\n      let args = json!", "mimetype": "text/plain", "start_char_idx": 2219, "end_char_idx": 3851, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9": {"__data__": {"id_": "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e7334d11-436e-4a7a-9000-d92467ced7e9", "node_type": "1", "metadata": {}, "hash": "4783b720d008ecb7314597320aa9bc412f8ffbfdebf173157e723950ce702be8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "85b7e9d2-dae1-475d-a00d-10f1d720132c", "node_type": "1", "metadata": {}, "hash": "e9389a1b1f7ad9e47597041a3bf4c9c9fb21a1e6b8a421633cea71fb949a7dde", "class_name": "RelatedNodeInfo"}}, "text": "({ \"message\": \"howdy\".to_string() })\n                .to_string().into_bytes().to_vec();\n\n      Promise::new(HELLO_NEAR.parse().unwrap())\n      .function_call(\"set_greeting\".to_string(), args, NO_DEPOSIT, CALL_GAS)\n      .then(\n        Promise::new(env::current_account_id())\n        .function_call(\"callback\".to_string(), Vec::new(), NO_DEPOSIT, CALL_GAS)\n      );\n    }\n\n    pub fn callback(&self, #[callback_result] result: Result<(), PromiseError>){\n      if result.is_err(){\n          log!(\"Something went wrong\")\n      }else{\n          log!(\"Message changed\")\n      }\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n:::warning\nThe snippet showed above is a low level way of calling other methods. We recommend make calls to other contracts as explained in the [Cross-contract Calls section](crosscontract.md).\n:::\n\n---\n\n## Create a Sub Account\nYour contract can create direct sub accounts of itself, for example, `user.near` can create `sub.user.near`.\n\nAccounts do **NOT** have control over their sub-accounts, since they have their own keys. \n\nSub-accounts are simply useful for organizing your accounts (e.g. `dao.project.near`, `token.project.near`).", "mimetype": "text/plain", "start_char_idx": 3851, "end_char_idx": 4999, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "85b7e9d2-dae1-475d-a00d-10f1d720132c": {"__data__": {"id_": "85b7e9d2-dae1-475d-a00d-10f1d720132c", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9", "node_type": "1", "metadata": {}, "hash": "69171f56422146da310f68b5527c9793c3eda3afb12d67456735823e8339e24c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b224e62-5948-4824-ba51-873921ee8468", "node_type": "1", "metadata": {}, "hash": "846681ecbbbb24af3dea4d27a6856fcc69077137bd63b481c7379d9e6001a9f5", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, near, call, NearPromise } from 'near-sdk-js'\n\n  const MIN_STORAGE: bigint = BigInt(\"1000000000000000000000\") // 0.001\u24c3\n\n  @NearBindgen({})\n  class Contract {\n    @call({payableFunction:true})\n    create({prefix}:{prefix: String}) {\n      const account_id = `${prefix}.${near.currentAccountId()}`\n\n      NearPromise.new(account_id)\n      .createAccount()\n      .transfer(MIN_STORAGE)\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, env, Promise, NearToken};\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n                            \n  const MIN_STORAGE: Balance = 1_000_000_000_000_000_000_000; //0.001\u24c3\n\n  #[near]\n  impl Contract {\n    pub fn create(&self, prefix: String){\n      let account_id = prefix + \".\" + &env::current_account_id().to_string();\n      Promise::new(account_id.parse().unwrap())\n      .create_account()\n      .transfer(MIN_STORAGE);\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n:::tip\n  Notice that in the snippet we are transferring some money to the new account for storage\n:::\n\n:::caution\n\nWhen you create an account from within a contract, it has no keys by default. If you don't explicitly [add keys](#add-keys) to it or [deploy a contract](#deploy-a-contract) on creation then it will be [locked](../../../1.concepts/protocol/access-keys.md#locked-accounts).\n\n:::\n\n<hr className=\"subsection\" />\n\n#### Creating `.testnet` / `.near` Accounts\n\nAccounts can only create immediate sub-accounts of themselves.\n\nIf your contract wants to create a `.mainnet` or `.testnet` account, then it needs to [call](#function-call)\nthe `create_account` method of `near` or `testnet` root contracts.", "mimetype": "text/plain", "start_char_idx": 5002, "end_char_idx": 6805, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b224e62-5948-4824-ba51-873921ee8468": {"__data__": {"id_": "7b224e62-5948-4824-ba51-873921ee8468", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "85b7e9d2-dae1-475d-a00d-10f1d720132c", "node_type": "1", "metadata": {}, "hash": "e9389a1b1f7ad9e47597041a3bf4c9c9fb21a1e6b8a421633cea71fb949a7dde", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d62777e6-7505-4c5f-a630-bb482f48de31", "node_type": "1", "metadata": {}, "hash": "8440b01ddf80f38d1611f6e775a33d52e88023b4797518728ccd080121afaf24", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, near, call, bytes, NearPromise } from 'near-sdk-js'\n\n  const MIN_STORAGE: bigint = BigInt(\"1820000000000000000000\"); //0.00182\u24c3\n  const CALL_GAS: bigint = BigInt(\"28000000000000\");\n\n  @NearBindgen({})\n  class Contract {\n    @call({})\n    create_account({account_id, public_key}:{account_id: String, public_key: String}) {\n      const args = bytes(JSON.stringify({ \n        \"new_account_id\": account_id,\n        \"new_public_key\": public_key \n      }))\n\n      NearPromise.new(\"testnet\")\n      .functionCall(\"create_account\", args, MIN_STORAGE, CALL_GAS);\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, Promise, Gas, NearToken };\n  use serde_json::json;\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n\n  const CALL_GAS: Gas = Gas(28_000_000_000_000);\n  const MIN_STORAGE: Balance = 1_820_000_000_000_000_000_000; //0.00182\u24c3\n\n  #[near]\n  impl Contract {\n    pub fn create_account(&self, account_id: String, public_key: String){\n      let args = json!({\n                  \"new_account_id\": account_id,\n                  \"new_public_key\": public_key,\n                }).to_string().into_bytes().to_vec();\n\n      // Use \"near\" to create mainnet accounts\n      Promise::new(\"testnet\".parse().unwrap())\n      .function_call(\"create_account\".to_string(), args, MIN_STORAGE, CALL_GAS);\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## Deploy a Contract\n\nWhen creating an account you can also batch the action of deploying a contract to it. Note that for this, you will need to pre-load the byte-code you want to deploy in your contract.", "mimetype": "text/plain", "start_char_idx": 6807, "end_char_idx": 8532, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d62777e6-7505-4c5f-a630-bb482f48de31": {"__data__": {"id_": "d62777e6-7505-4c5f-a630-bb482f48de31", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7b224e62-5948-4824-ba51-873921ee8468", "node_type": "1", "metadata": {}, "hash": "846681ecbbbb24af3dea4d27a6856fcc69077137bd63b481c7379d9e6001a9f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a", "node_type": "1", "metadata": {}, "hash": "297b2d19c4b4bd49e8e55f7972a636d52f618668013d670ca29aa35b24c13957", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, env, Promise, NearToken};\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n\n  const MIN_STORAGE: Balance = 1_100_000_000_000_000_000_000_000; //1.1\u24c3\n  const HELLO_CODE: &[u8] = include_bytes!(\"./hello.wasm\");\n\n  #[near]\n  impl Contract {\n    pub fn create_hello(&self, prefix: String){\n      let account_id = prefix + \".\" + &env::current_account_id().to_string();\n      Promise::new(account_id.parse().unwrap())\n      .create_account()\n      .transfer(MIN_STORAGE)\n      .deploy_contract(HELLO_CODE.to_vec());\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n:::tip\nIf an account with a contract deployed does **not** have any access keys, this is known as a locked contract. When the account is locked, it cannot sign transactions therefore, actions can **only** be performed from **within** the contract code.\n:::\n\n---\n\n## Add Keys\n\nWhen you use actions to create a new account, the created account does not have any [access keys](../../../1.concepts/protocol/access-keys.md), meaning that it **cannot sign transactions** (e.g. to update its contract, delete itself, transfer money).\n\nThere are two options for adding keys to the account:\n1. `add_access_key`: adds a key that can only call specific methods on a specified contract.\n2. `add_full_access_key`: adds a key that has full access to the account.", "mimetype": "text/plain", "start_char_idx": 8534, "end_char_idx": 9978, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a": {"__data__": {"id_": "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d62777e6-7505-4c5f-a630-bb482f48de31", "node_type": "1", "metadata": {}, "hash": "8440b01ddf80f38d1611f6e775a33d52e88023b4797518728ccd080121afaf24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46002793-2a3a-4afd-b3ce-abb5d012489a", "node_type": "1", "metadata": {}, "hash": "797f292b1644a3e7ba9c07d0cb961cdd2d65d646c6728b909902731d4bfe4fc2", "class_name": "RelatedNodeInfo"}}, "text": "<br/>\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, near, call, NearPromise } from 'near-sdk-js'\n  import { PublicKey } from 'near-sdk-js/lib/types'\n\n  const MIN_STORAGE: bigint = BigInt(\"1000000000000000000000\") // 0.001\u24c3\n\n  @NearBindgen({})\n  class Contract {\n    @call({})\n    create_hello({prefix, public_key}:{prefix: String, public_key: PublicKey}) {\n      const account_id = `${prefix}.${near.currentAccountId()}`\n\n      NearPromise.new(account_id)\n      .createAccount()\n      .transfer(MIN_STORAGE)\n      .addFullAccessKey(public_key)\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, env, Promise, Balance, PublicKey};\n\n  #[near(serializers = [json, borsh])]\n  #[derive(Default)]\n  pub struct Contract { }\n\n  const MIN_STORAGE: Balance = 1_100_000_000_000_000_000_000_000; //1.1\u24c3\n  const HELLO_CODE: &[u8] = include_bytes!(\"./hello.wasm\");\n\n  #[near]\n  impl Contract {\n    pub fn create_hello(&self, prefix: String, public_key: PublicKey){\n      let account_id = prefix + \".\" + &env::current_account_id().to_string();\n      Promise::new(account_id.parse().unwrap())\n      .create_account()\n      .transfer(MIN_STORAGE)\n      .deploy_contract(HELLO_CODE.to_vec())\n      .add_full_access_key(public_key);\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\nNotice that what you actually add is a \"public key\". Whoever holds its private counterpart, i.e. the private-key, will be able to use the newly access key.\n\n:::tip\nIf an account with a contract deployed does **not** have any access keys, this is known as a locked contract. When the account is locked, it cannot sign transactions therefore, actions can **only** be performed from **within** the contract code.", "mimetype": "text/plain", "start_char_idx": 9980, "end_char_idx": 11768, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46002793-2a3a-4afd-b3ce-abb5d012489a": {"__data__": {"id_": "46002793-2a3a-4afd-b3ce-abb5d012489a", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a", "node_type": "1", "metadata": {}, "hash": "297b2d19c4b4bd49e8e55f7972a636d52f618668013d670ca29aa35b24c13957", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf66281e-e150-4307-9193-f791bb90db6a", "node_type": "1", "metadata": {}, "hash": "5a3143131bcda5f6cdd5a611ea83426f59362aca7bb99b34a3ad664eb3fb4c89", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Delete Account\n\nThere are two scenarios in which you can use the `delete_account` action:\n1. As the **last** action in a chain of batched actions.\n2. To make your smart contract delete its own account.\n\n<Tabs className=\"language-tabs\" groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```js\n  import { NearBindgen, near, call, NearPromise } from 'near-sdk-js'\n  import { AccountId } from 'near-sdk-js/lib/types'\n\n  const MIN_STORAGE: bigint = BigInt(\"1000000000000000000000\") // 0.001\u24c3\n\n  @NearBindgen({})\n  class Contract {\n    @call({})\n    create_delete({prefix, beneficiary}:{prefix: String, beneficiary: AccountId}) {\n      const account_id = `${prefix}.${near.currentAccountId()}`\n\n      NearPromise.new(account_id)\n      .createAccount()\n      .transfer(MIN_STORAGE)\n      .deleteAccount(beneficiary)\n    }\n\n    @call({})\n    self_delete({beneficiary}:{beneficiary: AccountId}) {\n      NearPromise.new(near.currentAccountId())\n      .deleteAccount(beneficiary)\n    }\n  }\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\n  use near_sdk::{near, env, Promise, Neartoken, AccountId};\n\n  #[near(contract_state)]\n  #[derive(Default)]\n  pub struct Contract { }\n                            \n  const MIN_STORAGE: Balance = 1_000_000_000_000_000_000_000; //0.001\u24c3\n\n  #[near]\n  impl Contract {\n    pub fn create_delete(&self, prefix: String, beneficiary: AccountId){\n      let account_id = prefix + \".\"", "mimetype": "text/plain", "start_char_idx": 11769, "end_char_idx": 13211, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf66281e-e150-4307-9193-f791bb90db6a": {"__data__": {"id_": "cf66281e-e150-4307-9193-f791bb90db6a", "embedding": null, "metadata": {"file_path": "./near_dist/actions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886", "node_type": "4", "metadata": {}, "hash": "030d58bf72c59dd22f1d40cd8f04063f8d0d70577bfd069eab1c4d53db34a123", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46002793-2a3a-4afd-b3ce-abb5d012489a", "node_type": "1", "metadata": {}, "hash": "797f292b1644a3e7ba9c07d0cb961cdd2d65d646c6728b909902731d4bfe4fc2", "class_name": "RelatedNodeInfo"}}, "text": "+ &env::current_account_id().to_string();\n      Promise::new(account_id.parse().unwrap())\n      .create_account()\n      .transfer(MIN_STORAGE)\n      .delete_account(beneficiary);\n    }\n\n    pub fn self_delete(beneficiary: AccountId){\n      Promise::new(env::current_account_id())\n      .delete_account(beneficiary);\n    }\n  }\n```\n\n</TabItem>\n\n</Tabs>\n\n:::warning Token Loss\nIf the beneficiary account does not exist the funds will be [**dispersed among validators**](../../../1.concepts/basics/token-loss.md).\n:::\n\n:::warning Token Loss\nDo **not** use `delete` to try fund a new account. Since the account doesn't exist the tokens will be lost.\n:::", "mimetype": "text/plain", "start_char_idx": 13212, "end_char_idx": 13860, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3ffa5b3-22ae-4aab-ae3a-da040a25249b": {"__data__": {"id_": "e3ffa5b3-22ae-4aab-ae3a-da040a25249b", "embedding": null, "metadata": {"file_path": "./near_dist/anatomy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "48725fe8-57e5-47b3-ad73-720261c88c5c", "node_type": "4", "metadata": {}, "hash": "cdc4ed3c6b58358baba3356b9d34ca61ef9e66c26621718eecb83a4a69a2dcd7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f77559b5-bf8d-4da3-a16e-a20b90ca9d70", "node_type": "1", "metadata": {}, "hash": "bfdc9a02bd92766fefef582505cda3dbb3ba4cbfe4e5eda29d70c110dbec7fd6", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: anatomy\ntitle: Basic Anatomy\nhide_table_of_contents: true\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport {ExplainCode, Block, File} from '@site/src/components/CodeExplainer/code-explainer';\n\nLet's illustrate the basic anatomy of a simple \"Hello World\" contract. The code on this page comes from our [Hello NEAR repository](https://github.com/near-examples/hello-near-examples) on GitHub.\n\n<ExplainCode languages=\"js,rust\" >\n\n<Block highlights='{\"js\": \"1\", \"rust\": \"1\"}' fname=\"hello-near\">\n\n    ### Importing the SDK\n    All contracts will import the **NEAR SDK**, enabling them to [access the execution environment](./environment.md), [call other contracts](./crosscontract.md), [transfer tokens](./actions.md), and much more.\n\n    You can also use third-party libraries, though some might not work due to the limitations of the contract runtime.\n\n</Block>\n\n<Block highlights='{\"js\": \"4-17\", \"rust\":\"5-7,20-31\"}' fname=\"hello-near\">\n\n    ### Contract's Main Structure\n    The contract is described through a structure:\n    - The attributes define which data the contract stores\n    - The functions define its public (and private) interface\n\n</Block>\n\n<Block highlights='{\"js\": \"3\"}' fname=\"hello-near\">\n\n    ### Contract Class Decorator\n    \n    Note that the contract's class is decorated with `@NearBindgen`. This decorator tells the SDK which class defines the contract, so it knows:\n    1. What to fetch from storage when the contract is loaded\n    2. What to store when the contract is done executing\n    3. The methods that are exposed to the outside world\n    4.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1685, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f77559b5-bf8d-4da3-a16e-a20b90ca9d70": {"__data__": {"id_": "f77559b5-bf8d-4da3-a16e-a20b90ca9d70", "embedding": null, "metadata": {"file_path": "./near_dist/anatomy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "48725fe8-57e5-47b3-ad73-720261c88c5c", "node_type": "4", "metadata": {}, "hash": "cdc4ed3c6b58358baba3356b9d34ca61ef9e66c26621718eecb83a4a69a2dcd7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3ffa5b3-22ae-4aab-ae3a-da040a25249b", "node_type": "1", "metadata": {}, "hash": "82ae9b3a01f8954b3a3f11920c013cc839903496642303e33ea613d82443f1d1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0632fef1-82be-4697-bcc1-a83a4f8d3edf", "node_type": "1", "metadata": {}, "hash": "d4485abbd53b9f24a8875d66c42ddf6f903501b43d9b9a2e6be3edfa8bbb3740", "class_name": "RelatedNodeInfo"}}, "text": "If the contract needs to be initialized (we will cover this later)\n\n    **Note:** Only one class can be decorated with the `@NearBindgen` decorator\n\n</Block>\n\n<Block highlights='{\"rust\": \"4,19\"}' fname=\"hello-near\">\n\n    ### Contract Struct Macro\n    \n    Note that the contract's struct definition and the implementation are decorated with macros\n    \n    The `#[near(contract_state)]` macro tell the SDK that this structure defines the contract's state, so it knows:\n    1. What to fetch from storage when the contract is loaded\n    2. What to store when the contract is done executing\n\n    The `#[near]` macro tells the SDK which functions are exposed to the outside world.\n\n    **Note:** Only one struct can be decorated with the `#[near(contract_state)]` macro.\n\n</Block>\n\n<Block highlights='{\"rust\": \"4,19\"}' fname=\"hello-near\" type='info'>\n\n    <details>\n\n    <summary> Interaction with other macros </summary>\n\n    When `near` is built for the wasm32 target, it generates the external NEAR contract bindings.  To achieve this it is actually generating another function with the signature `pub extern \"C\" fn function_name()` that first deserializes the contract struct from NEAR storage and then calls the `contract.function_name(parameter1, parameter2, ...)`.\n\n    If you have annotated your function with any attribute-like macros, these are then executed _twice_.  Specifically if the attribute like macro makes any modification to the function signature, or inserts any code that depends on the contract struct (in the form of `&self`, `&mut self`, or `self`) this will fail in the second invocation, because the externally exposed function does not have any concept of this struct.\n\n    It is possible to detect this by checking which build target you are building for and limit the execution of the macro to operate only on the first pass.\n\n    </details>\n\n</Block>\n\n<Block highlights='{\"js\": \"5\", \"rust\": \"6,10-16\"}' fname=\"hello-near\">\n\n    ### Storage (State)\n    We call the data stored in the contract [the contract's state](./storage.md).\n    \n    In our Hello World example, the contract stores a single string (`greeting`), and the state starts initialized with the default value `\"Hello\"`.", "mimetype": "text/plain", "start_char_idx": 1686, "end_char_idx": 3897, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0632fef1-82be-4697-bcc1-a83a4f8d3edf": {"__data__": {"id_": "0632fef1-82be-4697-bcc1-a83a4f8d3edf", "embedding": null, "metadata": {"file_path": "./near_dist/anatomy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "48725fe8-57e5-47b3-ad73-720261c88c5c", "node_type": "4", "metadata": {}, "hash": "cdc4ed3c6b58358baba3356b9d34ca61ef9e66c26621718eecb83a4a69a2dcd7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f77559b5-bf8d-4da3-a16e-a20b90ca9d70", "node_type": "1", "metadata": {}, "hash": "bfdc9a02bd92766fefef582505cda3dbb3ba4cbfe4e5eda29d70c110dbec7fd6", "class_name": "RelatedNodeInfo"}}, "text": "**Note:** We will cover more about the contract's state in the [state section](./storage.md).\n\n</Block>\n\n<Block highlights='{\"js\": \"7-9\"}' fname=\"hello-near\">\n\n    Javascript contracts need to further include a `schema` object that defines the contract's state and its types. This object is used by the SDK to correctly serialize and deserialize the contract's state.\n\n</Block>\n\n<Block highlights='{\"js\": \"12-14\", \"rust\": \"22-24\"}' fname=\"hello-near\">\n\n    ### Read Only Functions\n    Contract's functions can be read-only, meaning they don't modify the state. Calling them is free for everyone, and does not require to have a NEAR account.\n\n    **Note:** We will cover more about function types in the [functions section](./functions.md).\n\n</Block>\n\n<Block highlights='{\"js\": \"17-20\", \"rust\": \"27-30\"}' fname=\"hello-near\">\n\n    ### State Mutating Functions\n    Functions that modify the state or call other contracts are considered state mutating functions. It is necessary to have a NEAR account to call them, as they require a transaction to be sent to the network.\n\n    **Note:** We will cover more about function types in the [functions section](./functions.md).\n\n</Block>\n\n<File language=\"js\" fname=\"hello-near\"\n    url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-ts/src/contract.ts\"\n    start=\"2\" end=\"32\" />\n\n<File language=\"rust\" fname=\"hello-near\"\n    url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-rs/src/lib.rs\"\n    start=\"2\" end=\"32\" />\n\n</ExplainCode>", "mimetype": "text/plain", "start_char_idx": 3903, "end_char_idx": 5427, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5f74420b-32fd-4e21-b60d-88b87065f682": {"__data__": {"id_": "5f74420b-32fd-4e21-b60d-88b87065f682", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a79eeccb-4e91-4413-8c4b-9380364a4d36", "node_type": "1", "metadata": {}, "hash": "0a0747b62304967f23770470aa79d2b6afb1207ef808fe0d7fcab82026dd7284", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: near-cli\ntitle: NEAR CLI\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe NEAR [Command Line Interface](https://github.com/near/near-cli-rs) (CLI) is a tool that enables to interact with the NEAR network directly from the shell. Among other things, the NEAR CLI enables you to:\n\n- Login with a NEAR account\n- Deploy a contract\n- Interact and query information from a deployed contract\n\n---\n\n## Installation\n\n<Tabs>\n  <TabItem value=\"npm\">\n\n  ```bash\n  npm install -g near-cli-rs@latest\n  ```\n  </TabItem>\n  <TabItem value=\"Cargo\">\n\n  ```\n  $ cargo install near-cli-rs\n  ```\n  </TabItem>\n  <TabItem value=\"Mac and Linux (binaries)\">\n\n  ```bash\n  curl --proto '=https' --tlsv1.2 -LsSf https://github.com/near/near-cli-rs/releases/latest/download/near-cli-rs-installer.sh | sh\n  ```\n  </TabItem>\n  <TabItem value=\"Windows (binaries)\">\n\n  ```bash\n  irm https://github.com/near/near-cli-rs/releases/latest/download/near-cli-rs-installer.ps1 | iex\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Configuration file\nThe directory with access keys and available connection networks are defined in the configuration file (`near-cli/config.toml`), which is located depending on the operating system in the following places:\n\n- macOS: `$HOME/Library/Application Support` (e.g. `/Users/Alice/Library/Application Support`)\n- Linux: `$XDG_CONFIG_HOME` or `$HOME/.config` (e.g. `/home/alice/.config`)\n- Windows: `{FOLDERID*RoamingAppData}` (e.g. `C:\\Users\\Alice\\AppData\\Roaming`)\n\nYou can learn more about working with the configuration file [here](https://github.com/near/near-cli-rs/blob/main/docs/GUIDE.en.md#config---manage-connections-in-a-configuration-file).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1676, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a79eeccb-4e91-4413-8c4b-9380364a4d36": {"__data__": {"id_": "a79eeccb-4e91-4413-8c4b-9380364a4d36", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5f74420b-32fd-4e21-b60d-88b87065f682", "node_type": "1", "metadata": {}, "hash": "0b3b9065486649109546362d33b526343f100e45ca505bd9a7a69663f67c705b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed8016dd-77af-4fbf-bd51-ab8a239c8678", "node_type": "1", "metadata": {}, "hash": "4884818ada0fe2ae08d34ae70e871adb750086d9b2a67ed5fe7efb6dc0ef343d", "class_name": "RelatedNodeInfo"}}, "text": ":::tip Custom RPC\nYou can setup a custom [RPC server](../api/rpc/providers) by changing the `rpc_url` parameter in `near-cli` settings:\n\n```bash\nnear config edit-connection testnet --key rpc_url --value https://archival-rpc.testnet.near.org/\n```\n:::\n\n\n---\n\n## Interactive mode\n\nTo use the `near-cli` simply run the following in your terminal.\n\n```bash\n$ near\n```\n\nYou should then see the following. Use the arrow keys and hit `enter` or simply type out one of the available options to select an option\n\n![](/docs/assets/near-cli-rs.png)\n\n:::important\nWe provide examples only of the most used commands. Such commands may have two versions - a **full** one and a **short** one. If you want to explore all options provided by `near-cli` use the interactive mode described above.\n:::\n\n---\n\n## Account\n\nThis option will allow you to manage, control, and retrieve information on your accounts.\n\n### Summary\n\n`view-account-summary` - view properties for an account.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n    ```bash\n    export ACCOUNT_ID=bob.testnet\n    near account view-account-summary $ACCOUNT_ID network-config testnet now\n    ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n    ```bash\n    export ACCOUNT_ID=bob.testnet\n    near state $ACCOUNT_ID --networkId testnet\n    ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Import\n\n`import-account` - import existing account (a.k.a. \"sign in\").\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  near account import-account using-web-wallet network-config testnet\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  near login --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Export\n\n`export-account` - export existing account.", "mimetype": "text/plain", "start_char_idx": 1679, "end_char_idx": 3428, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ed8016dd-77af-4fbf-bd51-ab8a239c8678": {"__data__": {"id_": "ed8016dd-77af-4fbf-bd51-ab8a239c8678", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a79eeccb-4e91-4413-8c4b-9380364a4d36", "node_type": "1", "metadata": {}, "hash": "0a0747b62304967f23770470aa79d2b6afb1207ef808fe0d7fcab82026dd7284", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "390e6c20-b9c5-4086-9c78-2f94223972dd", "node_type": "1", "metadata": {}, "hash": "0051ac8a761207a2c67ed2b9fa304f01e4e485d6bd36e4c7f6fcb933321b71e1", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near account export-account $ACCOUNT_ID using-web-wallet network-config testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Create\n\n`create-account` - create a new account.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near account create-account sponsor-by-faucet-service $ACCOUNT_ID autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near create-account $ACCOUNT_ID --useFaucet --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Delete\n\n`delete-account` - delete an account.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export BENEFICIARY_ID=alice.testnet\n\n  near account delete-account $ACCOUNT_ID beneficiary $BENEFICIARY_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export BENEFICIARY_ID=alice.testnet\n\n  near delete-account $ACCOUNT_ID $BENEFICIARY_ID --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Keys\n\nShowing, adding and removing account keys.\n\n### List keys\n\n`list-keys` - view a list of keys for an account.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near account list-keys $ACCOUNT_ID network-config testnet now\n  ```\n  </TabItem>\n\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near list-keys $ACCOUNT_ID --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Add key\n\n`add-key` - add an access key to an account.", "mimetype": "text/plain", "start_char_idx": 3430, "end_char_idx": 5232, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "390e6c20-b9c5-4086-9c78-2f94223972dd": {"__data__": {"id_": "390e6c20-b9c5-4086-9c78-2f94223972dd", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ed8016dd-77af-4fbf-bd51-ab8a239c8678", "node_type": "1", "metadata": {}, "hash": "4884818ada0fe2ae08d34ae70e871adb750086d9b2a67ed5fe7efb6dc0ef343d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa70af44-e839-4918-b4df-01fa3eeb7a03", "node_type": "1", "metadata": {}, "hash": "f73339221921fa6793625410b205756a011989f4b876aa5378ed02fb08d8b903", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near account add-key $ACCOUNT_ID grant-full-access use-manually-provided-public-key ed25519:CXqAs8c8kZz81josLw82RQsnZXk8CAdUo7jAuN7uSht2 network-config testnet sign-with-keychain send\n  ```\n\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near add-key $ACCOUNT_ID ed25519:CXqAs8c8kZz81josLw82RQsnZXk8CAdUo7jAuN7uSht2 --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Delete key\n\n`delete-keys` - delete an access key from an account.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near account delete-keys $ACCOUNT_ID public-keys ed25519:HdkFZFEPoWfgrrLK3R4t5dWtNoLC8WymBzhCXoP3zrjh network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near delete-key $ACCOUNT_ID ed25519:HdkFZFEPoWfgrrLK3R4t5dWtNoLC8WymBzhCXoP3zrjh --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Tokens\n\nThis will allow you to manage your token assets such as NEAR, FTs and NFTs.\n\n### Send NEAR\n\n`send-near` - transfers NEAR to a specified recipient in units of NEAR or yoctoNEAR.", "mimetype": "text/plain", "start_char_idx": 5234, "end_char_idx": 6493, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa70af44-e839-4918-b4df-01fa3eeb7a03": {"__data__": {"id_": "aa70af44-e839-4918-b4df-01fa3eeb7a03", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "390e6c20-b9c5-4086-9c78-2f94223972dd", "node_type": "1", "metadata": {}, "hash": "0051ac8a761207a2c67ed2b9fa304f01e4e485d6bd36e4c7f6fcb933321b71e1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b87a3e6-da9d-49bc-99f8-a9e411242228", "node_type": "1", "metadata": {}, "hash": "afc4e06e316a935c5194159e8a1ab703df74c3116f57949f4b94014c516a94ef", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export RECEIVER_ID=alice.testnet\n  near tokens $ACCOUNT_ID send-near $RECEIVER_ID '0.5 NEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export RECEIVER_ID=alice.testnet\n\n  near send-near $ACCOUNT_ID $RECEIVER_ID 0.5 --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Send FT\n\n`send-ft` - transfer Fungible Tokens to a specified user.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export RECEIVER_ID=alice.testnet\n  export FT_CONTRACT_ID=0c97251cd1f630c444dbusdt.testnet\n\n  near tokens $ACCOUNT_ID send-ft $FT_CONTRACT_ID $RECEIVER_ID amount-ft '1 USDT' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Send NFT\n\n`send-nft` - transfers NFTs between accounts.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export RECEIVER_ID=alice.testnet\n  export NFT_CONTRACT_ID=nft.examples.testnet\n\n  near tokens $ACCOUNT_ID send-nft $NFT_CONTRACT_ID $RECEIVER_ID 1 --prepaid-gas '100.0 Tgas' --attached-deposit '1 yoctoNEAR' network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### View NEAR balance\n\n`view-near-balance` - view the balance of NEAR tokens.", "mimetype": "text/plain", "start_char_idx": 6495, "end_char_idx": 8030, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b87a3e6-da9d-49bc-99f8-a9e411242228": {"__data__": {"id_": "8b87a3e6-da9d-49bc-99f8-a9e411242228", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa70af44-e839-4918-b4df-01fa3eeb7a03", "node_type": "1", "metadata": {}, "hash": "f73339221921fa6793625410b205756a011989f4b876aa5378ed02fb08d8b903", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3f101f89-cd9c-4540-b574-6906b4be8c21", "node_type": "1", "metadata": {}, "hash": "26f7297d1815dae2dab5f6e26a6b9cff42b564506ad595f573c5569050ce6a0d", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  near tokens $ACCOUNT_ID view-near-balance network-config testnet now\n  ```\n\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### View FT balance\n\n`view-ft-balance` - view the balance of Fungible Tokens.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export FT_CONTRACT_ID=0c97251cd1f630c444dbusdt.testnet\n  near tokens $ACCOUNT_ID view-ft-balance $FT_CONTRACT_ID network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### View NFT balance\n\n`view-nft-assets` - view the balance of NFT tokens.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export ACCOUNT_ID=bob.testnet\n  export NFT_CONTRACT_ID=nft.examples.testnet\n  near tokens $ACCOUNT_ID view-nft-assets $NFT_CONTRACT_ID network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Contract\n\nThis option allows you to manage and interact with your smart contracts.\n\n### Call\n\n`call-function` - execute function (contract method).", "mimetype": "text/plain", "start_char_idx": 8032, "end_char_idx": 9119, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3f101f89-cd9c-4540-b574-6906b4be8c21": {"__data__": {"id_": "3f101f89-cd9c-4540-b574-6906b4be8c21", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8b87a3e6-da9d-49bc-99f8-a9e411242228", "node_type": "1", "metadata": {}, "hash": "afc4e06e316a935c5194159e8a1ab703df74c3116f57949f4b94014c516a94ef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5351c4c-21ce-460e-b969-574c30ae4509", "node_type": "1", "metadata": {}, "hash": "c181f71f5a8b8b2d88aa1960ff9c9c72821c0535ff8d41146a44e2ee39b41ec7", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  # View method\n  export CONTRACT_ID=nft.examples.testnet\n  near contract call-function as-read-only $CONTRACT_ID nft_tokens json-args '{\"from_index\": \"0\", \"limit\": 2}' network-config testnet now\n\n  # Call method\n  export ACCOUNT_ID=bob.testnet\n  near contract call-function as-transaction $CONTRACT_ID nft_mint json-args '{\"metadata\": {\"copies\": 1, \"description\": \"The Team Goes\", \"media\": \"https://bafybeidl4hjbpdr6u6xvlrizwxbrfcyqurzvcnn5xoilmcqbxfbdwrmp5m.ipfs.dweb.link/\", \"title\": \"GO TEAM\"}, \"receiver_id\": \"bob.testnet\", \"token_id\": \"5895\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $ACCOUNT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  # View method\n  export CONTRACT_ID=nft.examples.testnet\n  near view $CONTRACT_ID nft_tokens '{\"from_index\": \"0\", \"limit\": 2}' --networkId testnet\n\n  # Call method\n  export ACCOUNT_ID=bob.testnet\n  near call $CONTRACT_ID nft_mint '{\"metadata\": {\"copies\": 1, \"description\": \"The Team Goes\", \"media\": \"https://bafybeidl4hjbpdr6u6xvlrizwxbrfcyqurzvcnn5xoilmcqbxfbdwrmp5m.ipfs.dweb.link/\", \"title\": \"GO TEAM\"}, \"receiver_id\": \"bob.testnet\", \"token_id\": \"5896\"}' --deposit 0.1 --useAccount $ACCOUNT_ID --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Deploy\n\n`deploy` - add a new contract code.", "mimetype": "text/plain", "start_char_idx": 9121, "end_char_idx": 10533, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5351c4c-21ce-460e-b969-574c30ae4509": {"__data__": {"id_": "d5351c4c-21ce-460e-b969-574c30ae4509", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3f101f89-cd9c-4540-b574-6906b4be8c21", "node_type": "1", "metadata": {}, "hash": "26f7297d1815dae2dab5f6e26a6b9cff42b564506ad595f573c5569050ce6a0d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50a62226-d7bc-4b44-9e05-45da9a9afb08", "node_type": "1", "metadata": {}, "hash": "28bdd75a2821af2db7e9ea792d1de8cd85e344768d20ffae7dc7006369e105e2", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export CONTRACT_ID=contract.testnet\n  near contract deploy $CONTRACT_ID use-file ../target/near/contract.wasm without-init-call network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export CONTRACT_ID=contract.testnet\n  near deploy $CONTRACT_ID ../target/near/contract.wasm --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Inspect\n\n`inspect` - get a list of available function names.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  export CONTRACT_ID=nft.examples.testnet\n  near contract view-storage $CONTRACT_ID all as-text network-config testnet now\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  export CONTRACT_ID=nft.examples.testnet\n  near storage $CONTRACT_ID --finality final --utf8 --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Transaction\n\nOperate transactions.\n\n### View status\n\n`view-status` - view a transaction status.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  near transaction view-status BFrVVtjqD2p1zYX1UCvn4nJpy7zPHpY5cTgQaKCZjBvw network-config testnet\n  ```\n  </TabItem>\n  <TabItem value=\"Short\">\n\n  ```bash\n  near tx-status BFrVVtjqD2p1zYX1UCvn4nJpy7zPHpY5cTgQaKCZjBvw --networkId testnet\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Config\n\nManage the connection parameters inside the `config.toml` file for `near-cli`.\n\nThis will allow you to change or modify the network connections for your CLI.\n\n### Show connections\n\n`show-connections` - show a list of network connections.", "mimetype": "text/plain", "start_char_idx": 10535, "end_char_idx": 12145, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "50a62226-d7bc-4b44-9e05-45da9a9afb08": {"__data__": {"id_": "50a62226-d7bc-4b44-9e05-45da9a9afb08", "embedding": null, "metadata": {"file_path": "./near_dist/cli.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7691598-9b96-4355-82e8-8859932a5a35", "node_type": "4", "metadata": {}, "hash": "3f01f2bfe66fe67162edbc459db8b6c984fb5c6e5b28d93c9418cec282f4d009", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5351c4c-21ce-460e-b969-574c30ae4509", "node_type": "1", "metadata": {}, "hash": "c181f71f5a8b8b2d88aa1960ff9c9c72821c0535ff8d41146a44e2ee39b41ec7", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  near config show-connections\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Edit connection\n\n`edit-connection` - edit a network connection.\n\n<Tabs groupId=\"cli-commands\">\n  <TabItem value=\"Full\">\n\n  ```bash\n  near config edit-connection testnet --key rpc_url --value https://test.rpc.fastnear.com\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n:::important\nWe provide examples only of the most used commands. If you want to explore all options provided by `near-cli` use [the interactive mode](#interactive-mode).\n:::", "mimetype": "text/plain", "start_char_idx": 12147, "end_char_idx": 12730, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c37f1c7d-4d22-49a2-b4eb-4b2445a9e6c0": {"__data__": {"id_": "c37f1c7d-4d22-49a2-b4eb-4b2445a9e6c0", "embedding": null, "metadata": {"file_path": "./near_dist/transaction-execution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b", "node_type": "4", "metadata": {}, "hash": "6e3602f213f212101570216e12979e8025a24f838f845d0cc809ccd789b9a8e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "174bca80-86ab-4891-95a7-8217d8986ccd", "node_type": "1", "metadata": {}, "hash": "ffedf56b2223b7c3ad16ab4ea2e97215e76d24f89de586db034eefe886dbdbbe", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: transaction-execution\ntitle: Lifecycle of a Transaction\n---\n\n`Transactions` are constructed by users to express the intent of performing actions in the network. Once in the network, transactions are converted into `Receipts`, which are messages exchanged between network nodes.\n\nOn this page, we will explore the lifecycle of a transaction, from its creation to its final status.\n\n\n:::tip Recommended Reading\nTo dig deeper into transaction routing, we recommend reading the [nearcore documentation](https://near.github.io/nearcore/architecture/how/tx_routing.html)\n:::\n\n---\n\n## Receipts & Finality\n\nLet's walk through the lifecycle of a complex transaction and see how it is processed by the network using blocks as **time units**.\n\n#### Block #1: The Transaction Arrives\nAfter a transaction arrives, the network takes one block to validate it and transform it into a single `Receipt` that contains all the [actions](./transaction-anatomy.md) to be executed.\n\nWhile creating the `Receipt`, the `signer` gets $NEAR deducted from its balance to **pay for the gas** and **any attached NEAR**.\n\nIf the `signer` and `receiver` coincide - e.g. the `signer` is adding a Key - the `Receipt` is immediately processed in this first block and the transaction is considered final.\n\n#### Block #2: The Receipt is Processed\nIf the `signer` and `receiver` differs - e.g. the `signer` transfers NEAR to the `receiver` - the `Receipt` is processed in a second block. \n\nDuring this process a `FunctionCall` could span a **cross-contract call**, creating one or multiple new `Receipts`.\n\n#### Block #3...: Function Calls\nEach `Receipt` created from the function call take an additional block to be processed. Notice that, if those `Receipts` are `FunctionCall` they could spawn new `Receipts` and so on.\n\n#### Final Block: Gas is Refunded\nA final `Receipt` is processed in a new block, refunding any extra gas paid by the user.\n\n:::info\nA transaction is considered **final** when all its receipts are processed.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2000, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "174bca80-86ab-4891-95a7-8217d8986ccd": {"__data__": {"id_": "174bca80-86ab-4891-95a7-8217d8986ccd", "embedding": null, "metadata": {"file_path": "./near_dist/transaction-execution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b", "node_type": "4", "metadata": {}, "hash": "6e3602f213f212101570216e12979e8025a24f838f845d0cc809ccd789b9a8e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c37f1c7d-4d22-49a2-b4eb-4b2445a9e6c0", "node_type": "1", "metadata": {}, "hash": "0ae71303321e65f4542c9a570de70e8ce194cca375125e88bcc1749ec54e5837", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "467d4502-929b-4ef6-ade3-869ab5d0d4c7", "node_type": "1", "metadata": {}, "hash": "28eed29b597b29a5b4dc4eafdde9b8b9d77caf1a9ebfe38ebf27ef1ddc7d176a", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n:::tip\nMost transactions will just spawn a receipt to process the actions, and a receipt to refund the gas, being final in 1-3 blocks (~1-3 seconds):\n\n- [One block](https://testnet.nearblocks.io/txns/8MAvH96aMfDxPb3kVDrgj8nvJS7CAXP1GgtiivKAMGkF#execution) if the `signer` and `receiver` coincide - e.g. when adding a key\n- [Three blocks](https://testnet.nearblocks.io/txns/B7gxJNxav1A9WhWvaNWYLrSTub1Mkfj3tAudoASVM5tG#) if the `signer` and `receiver` differ, since the first block creates the `Receipt`, and the last reimburses gas\n\nFunction calls might take longer, as they can spawn multiple receipts. Network congestion can also increase the time to process a receipt and, thus, a transaction.\n:::\n\n---\n\n## Transaction Status\n\nAs the `Receipts` of a `Transaction` are processed, they get a status:\n\n- `Success`: the actions on the receipt were executed successfully\n- `Failed`: an action on the receipt failed\n- `Unknown`: the receipt is not known by the network\n\nIf an action in a `Receipt` fails, all the actions in that `Receipt` are rolled back. Notice that we are talking about the `Receipt` status, and not the `Transaction` status.\n\nThe status of a transaction is determined by its first receipt, which contains all its actions. If any of the actions in the first receipt fail, the transaction is marked as failed.\n\nNotice that, it could happen that a transaction is marked as successful, but some of its receipt fails. This happens when a `FunctionCall` successfully spawns a new receipt, but the consequent function call fails. In this case, the transaction is marked as successful because the original function call was successful.\n\nSee the examples below for more details.\n\n<details>\n\n<summary> Status Examples </summary>\n\n#### Example: Transaction with Transfer\n\n1. `bob.near` creates a transaction to transfer 10 NEAR to `alice.near`\n2. The transaction is converted into a receipt\n3.", "mimetype": "text/plain", "start_char_idx": 2001, "end_char_idx": 3905, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "467d4502-929b-4ef6-ade3-869ab5d0d4c7": {"__data__": {"id_": "467d4502-929b-4ef6-ade3-869ab5d0d4c7", "embedding": null, "metadata": {"file_path": "./near_dist/transaction-execution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b", "node_type": "4", "metadata": {}, "hash": "6e3602f213f212101570216e12979e8025a24f838f845d0cc809ccd789b9a8e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "174bca80-86ab-4891-95a7-8217d8986ccd", "node_type": "1", "metadata": {}, "hash": "ffedf56b2223b7c3ad16ab4ea2e97215e76d24f89de586db034eefe886dbdbbe", "class_name": "RelatedNodeInfo"}}, "text": "The conversion fails because `bob.near` does not have enough balance\n4. The transaction is marked as failed \u26d4\n\n#### Example: Deploying a Contract\n\n1. `bob.near` creates a transaction to:\n    - create the account `contract.bob.near`\n    - transfer 5 NEAR to `contract.bob.near`\n    - deploy a contract in `contract.bob.near`\n2. The transaction is transformed into one receipt\n3. The account is created, the money transfer and the contract deployed\n4. The transaction is marked as successful \u2705\n\n#### Example: Deploying a Contract Fails\n\n1. `bob.near` creates a transaction to:\n    - create the account `contract.bob.near`\n    - transfer 5 NEAR to `contract.bob.near`\n    - deploy a contract in `contract.bob.near`\n2. The transaction is transformed into one receipt\n3. The account is created, but the transfer fails because `bob.near` does not have enough balance\n4. The whole process is reverted (i.e. no account is created)\n5. The transaction is marked as successful \u26d4\n\n#### Example: Calling a Function\n1. `bob.near` creates a transaction to call the function `cross-call` in `contract.near`\n2. The transaction is transformed into one receipt\n3. The function `cross-call` creates a promise to call the function `external-call` in `external.near`\n4. The function finishes correctly and the transaction is marked as successful \u2705\n5. A new receipt is created to call the function `external-call` in `external.near`\n5. The function `external-call` fails\n6. The original transaction is still marked as successful \u2705 because the first receipt was successful\n\n</details>\n\n:::tip\nYou can check the status of a transaction using the [NearBlocks explorer](https://nearblocks.io/)\n:::", "mimetype": "text/plain", "start_char_idx": 3906, "end_char_idx": 5576, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bebde77-7112-4d8f-accc-82bdd72dcc4e": {"__data__": {"id_": "6bebde77-7112-4d8f-accc-82bdd72dcc4e", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af856bcd-fc10-4713-af37-daabae63674a", "node_type": "1", "metadata": {}, "hash": "4647c542c59b5609a16206d1fdc5f1ea8bc495badfd0d3279def0a67d4c5481a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: chain-signatures\ntitle: Implementing Chain Signatures\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nChain signatures enable NEAR accounts, including smart contracts, to sign and execute transactions across many blockchain protocols.\n\nThis unlocks the next level of blockchain interoperability by giving ownership of diverse assets, cross-chain accounts, and data to a single NEAR account.\n\n:::info\n\nThis guide will take you through a step by step process for creating a Chain Signature.\n\n\u2b50\ufe0f For complete examples of a NEAR account performing transactions in other chains:\n\n- [CLI script](https://github.com/mattlockyer/mpc-script)\n- [web-app example](https://github.com/near-examples/near-multichain)\n- [component example](https://test.near.social/bot.testnet/widget/chainsig-sign-eth-tx)\n\n:::\n\n---\n\n## Create a Chain Signature\n\nThere are five steps to create a Chain Signature:\n\n1. [Deriving the Foreign Address](#1-deriving-the-foreign-address) - Construct the address that will be controlled on the target blockchain\n2. [Creating a Transaction](#2-creating-the-transaction) - Create the transaction or message to be signed\n3. [Requesting a Signature](#3-requesting-the-signature) - Call the NEAR `v1.signer` contract requesting it to sign the transaction\n4. [Reconstructing the Signature](#4-reconstructing-the-signature) - Reconstruct the signature from the MPC service's response\n5. [Relaying the Signed Transaction](#5-relaying-the-signature) - Send the signed transaction to the destination chain for execution\n\n!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1631, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af856bcd-fc10-4713-af37-daabae63674a": {"__data__": {"id_": "af856bcd-fc10-4713-af37-daabae63674a", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6bebde77-7112-4d8f-accc-82bdd72dcc4e", "node_type": "1", "metadata": {}, "hash": "bb1887064f25e6cbe37a8f8e7b62801f64ee3fe1f7dcc9d8aac92cc45dee82bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b4b8eb96-d98b-464d-9a6c-a2403836bbe1", "node_type": "1", "metadata": {}, "hash": "d15555553f2375ff049e9aa87d1dcfd575d401041f0fcde0a8f4c2dea6effa23", "class_name": "RelatedNodeInfo"}}, "text": "[chain-signatures](/docs/assets/welcome-pages/chain-signatures-overview.png)\n_Diagram of a chain signature in NEAR_\n\n:::info MPC Contracts\n\nIf you want to try things out, these are the smart contracts available on `testnet`:\n\n- `v1.signer-prod.testnet`: [MPC signer](https://github.com/near/mpc/tree/v0.2.0/contract) contract, latest release, made up of 8 MPC nodes\n\n:::\n\n:::info MPC mainnet contracts\n\n- `v1.signer`: [MPC signer](https://github.com/near/mpc/tree/v0.2.0/contract) contract, latest release, made up of 8 MPC nodes\n:::\n\n---\n\n## 1. Deriving the Foreign Address\n\nChain Signatures use [`derivation paths`](../../../1.concepts/abstraction/chain-signatures.md#one-account-multiple-chains) to represent accounts on the target blockchain. The external address to be controlled can be deterministically derived from:\n\n- The NEAR address (e.g., `example.near`, `example.testnet`, etc.)\n- A derivation path (a string such as `ethereum-1`, `ethereum-2`, etc.)", "mimetype": "text/plain", "start_char_idx": 1631, "end_char_idx": 2594, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b4b8eb96-d98b-464d-9a6c-a2403836bbe1": {"__data__": {"id_": "b4b8eb96-d98b-464d-9a6c-a2403836bbe1", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af856bcd-fc10-4713-af37-daabae63674a", "node_type": "1", "metadata": {}, "hash": "4647c542c59b5609a16206d1fdc5f1ea8bc495badfd0d3279def0a67d4c5481a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "11743469-38c4-4359-abe6-1bca8f2b71e1", "node_type": "1", "metadata": {}, "hash": "f35724437fd29be182affcaf246e89af2b53d0cac203956a036f6246f5b56eda", "class_name": "RelatedNodeInfo"}}, "text": "- The MPC service's public key (see the tip bellow for the MPC service public keys)\n\nWe provide code to derive the address, as it's a complex process that involves multiple steps of hashing and encoding:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u039e Ethereum\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/ethereum.js\" start=\"17\" end=\"21\" />\n\n</TabItem>\n\n<TabItem value=\"\u20bf Bitcoin\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/bitcoin.js\" start=\"13\" end=\"17\" />\n\n</TabItem>\n\n</Tabs>\n\n:::tip\n\nWe recommend hardcoding the derivation paths in your application to ensure the signature request is made to the correct account\n\n- **v1.signer-prod.testnet** (testnet): `secp256k1:4NfTiv3UsGahebgTaHyD9vF8KYKMBnfd6kh94mK6xv8fGBiJB8TBtFMP5WWXz6B89Ac1fbpzPwAvoyQebemHFwx3`\n\n- **v1.signer** (mainnet): `secp256k1:3tFRbMqmoa6AAALMrEFAYCEoHcqKxeW38YptwowBVBtXK1vo36HDbUWuR6EZmoK4JcH6HDkNMGGqP1ouV7VZUWya`\n\n:::\n\n:::info\n\nThe same NEAR account and path will always produce the same address on the target blockchain.\n\n- `example.near` + `ethereum-1` = `0x1b48b83a308ea4beb845db088180dc3389f8aa3b`\n- `example.near` + `ethereum-2` = `0x99c5d3025dc736541f2d97c3ef3c90de4d221315`\n\n:::\n\n---\n\n## 2. Creating the Transaction\n\nConstructing the transaction to be signed (transaction, message, data, etc.)", "mimetype": "text/plain", "start_char_idx": 2595, "end_char_idx": 4004, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "11743469-38c4-4359-abe6-1bca8f2b71e1": {"__data__": {"id_": "11743469-38c4-4359-abe6-1bca8f2b71e1", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b4b8eb96-d98b-464d-9a6c-a2403836bbe1", "node_type": "1", "metadata": {}, "hash": "d15555553f2375ff049e9aa87d1dcfd575d401041f0fcde0a8f4c2dea6effa23", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "95df2d7a-9b78-4198-9708-ba13a3a71e77", "node_type": "1", "metadata": {}, "hash": "d888f441aed631c69e0b83bcd2dd265e39fc87a1f102a45d8b463c5f605d9b5e", "class_name": "RelatedNodeInfo"}}, "text": "varies depending on the target blockchain, but generally it's the hash of the message or transaction to be signed.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u039e Ethereum\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/ethereum.js\"\n      start=\"46\" end=\"73\" />\n    \nIn Ethereum, constructing the transaction is simple since you only need to specify the address of the receiver and how much you want to send.\n\n</TabItem>\n\n<TabItem value=\"\u20bf Bitcoin\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/bitcoin.js\"\n      start=\"27\" end=\"81\" />\n\nIn bitcoin, you construct a new transaction by using all the Unspent Transaction Outputs (UTXOs) of the account as input, and then specify the output address and amount you want to send.\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## 3. Requesting the Signature\n\nOnce the transaction is created and ready to be signed, a signature request is made by calling `sign` on the [MPC smart contract](https://github.com/near/mpc-recovery/blob/f31e39f710f2fb76706e7bb638a13cf1fa1dbf26/contract/src/lib.rs#L298).\n\nThe method requires two parameters:\n\n  1. The `transaction` to be signed for the target blockchain\n  2. The derivation `path` for the account we want to use to sign the transaction\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u039e Ethereum\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/ethereum.js\"\n      start=\"75\" end=\"82\" />\n\n</TabItem>\n\n  <TabItem value=\"\u20bf Bitcoin\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/bitcoin.js\"\n      start=\"83\" end=\"102\" />\n\nFor bitcoin, all UTXOs are signed independently and then combined into a single transaction.", "mimetype": "text/plain", "start_char_idx": 4005, "end_char_idx": 5834, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "95df2d7a-9b78-4198-9708-ba13a3a71e77": {"__data__": {"id_": "95df2d7a-9b78-4198-9708-ba13a3a71e77", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "11743469-38c4-4359-abe6-1bca8f2b71e1", "node_type": "1", "metadata": {}, "hash": "f35724437fd29be182affcaf246e89af2b53d0cac203956a036f6246f5b56eda", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "55805337-7b7b-481f-aada-5f5e910586ac", "node_type": "1", "metadata": {}, "hash": "7cbf7fe02a4672f43cf85f31ab34a9d2edabcdd3b129a3b091961e1c511b1e40", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n</Tabs>\n\n<details> \n        \n  <summary> Deposit amount </summary>\n\n  In this example, we attach a deposit of 0.05 $NEAR for the signature request. The transaction may fail if the network is congested since the deposit required by the MPC service scales linearly with the number of pending requests, from 1 yoctoNEAR to a maximum of 0.65 $NEAR. Any unused deposit will be refunded and if the signature fails, the user will be refunded the full deposit.  \n\n  The MPC contract does implement a method to check the current deposit required, however, it cannot be used reliably since the amount will likely change between the time of the check and the time of the request.\n\n</details>\n\n:::info\n\nThe contract will take some time to respond, as the `sign` method [yields execution](/blog/yield-resume), waiting for the MPC service to sign the transaction.\n\n:::\n\n---\n\n## 4. Reconstructing the Signature\n\nThe MPC contract will not return the signature of the transaction itself, but the elements needed to reconstruct the signature.\n\nThis allows the contract to generalize the signing process for multiple blockchains.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u039e Ethereum\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/ethereum.js\"\n      start=\"84\" end=\"95\" />\n\nIn Ethereum, the signature is reconstructed by concatenating the `r`, `s`, and `v` values returned by the contract.\n\n</TabItem>\n\n<TabItem value=\"\u20bf Bitcoin\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/bitcoin.js\"\n      start=\"104\" end=\"115\" />\n\nIn Bitcoin, the signature is reconstructed by concatenating the `r` and `s` values returned by the contract.\n\n</TabItem>\n\n</Tabs>\n\n---\n\n## 5. Relaying the Signature\n\nOnce we have reconstructed the signature, we can relay it to the corresponding network. This will once again vary depending on the target blockchain.", "mimetype": "text/plain", "start_char_idx": 5836, "end_char_idx": 7795, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "55805337-7b7b-481f-aada-5f5e910586ac": {"__data__": {"id_": "55805337-7b7b-481f-aada-5f5e910586ac", "embedding": null, "metadata": {"file_path": "./near_dist/chain-signatures.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258", "node_type": "4", "metadata": {}, "hash": "248d3ae41fb2d0f0d19204f652610571a2ccb6d336c207d5339a2a3a45153026", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "95df2d7a-9b78-4198-9708-ba13a3a71e77", "node_type": "1", "metadata": {}, "hash": "d888f441aed631c69e0b83bcd2dd265e39fc87a1f102a45d8b463c5f605d9b5e", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u039e Ethereum\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/ethereum.js\"\n      start=\"105\" end=\"109\" />\n\n</TabItem>\n\n<TabItem value=\"\u20bf Bitcoin\">\n    <Github language=\"js\"\n      url=\"https://github.com/near-examples/near-multichain/blob/main/src/services/bitcoin.js\"\n      start=\"118\" end=\"126\" />\n\n</TabItem>\n\n</Tabs>\n\n:::info\n\u2b50\ufe0f For a deep dive into the concepts of Chain Signatures see [What are Chain Signatures?](/concepts/abstraction/chain-signatures)\n\n\u2b50\ufe0f For complete examples of a NEAR account performing Eth transactions:\n\n- [web-app example](https://github.com/near-examples/near-multichain)\n- [component example](https://test.near.social/bot.testnet/widget/chainsig-sign-eth-tx)\n\n:::", "mimetype": "text/plain", "start_char_idx": 7797, "end_char_idx": 8597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "983d9a30-6e47-4397-a073-e7c674d8cf91": {"__data__": {"id_": "983d9a30-6e47-4397-a073-e7c674d8cf91", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ba9614d5-d9c8-46fa-9367-7f27d0fe56da", "node_type": "1", "metadata": {}, "hash": "5209c03aed5a0f83a5ce8ce3e826533c4e8e51db6f13e55a47f1ec5494a0d54a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: nft-indexer\ntitle: Minted NFTs Indexer\nsidebar_label: NFTs Indexer\n---\n\n:::tip\n\nThis tutorial creates a blockchain indexer using [NEAR QueryAPI](../../../2.build/6.data-infrastructure/query-api/intro.md).\n\n:::\n\n## Overview\n\nThis tutorial creates a working NFT indexer using [NEAR QueryAPI](../../../2.build/6.data-infrastructure/query-api/intro.md), and builds a [NEAR component](../../../2.build/3.near-components/what-is.md) that presents the data. The indexer is watching for `nft_mint` [Events](https://nomicon.io/Standards/EventsFormat) and captures some relevant data:\n\n- `receiptId` of the [Receipt](/build/data-infrastructure/lake-data-structures/receipt) where the mint has happened\n- `receiverId`\n- Marketplace\n- Links to the transaction on NEAR Explorer\n\nIn this tutorial you'll learn how you can listen to [Events](https://nomicon.io/Standards/EventsFormat) generated by smart contracts and how you can index them.\n\n:::tip\n\nThe indexer's source code can be found by [following this link](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=bucanero.near/nft_v4).\n\n:::\n\n### NFT Events\n\nNEAR Protocol supports [Events](https://nomicon.io/Standards/EventsFormat). These `Events` allow a contract developer to add standardized logs to the [`ExecutionOutcomes`](/build/data-infrastructure/lake-data-structures/execution-outcome) thus allowing themselves or other developers to read those logs in more convenient manner via API or indexers. Events have a field `standard` which aligns with NEPs. In this tutorial we'll be talking about [NEP-171 Non-Fungible Token standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core).\n\nThe indexer watches all the NFTs minted following the [NEP-171 Events](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event) standard.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1816, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ba9614d5-d9c8-46fa-9367-7f27d0fe56da": {"__data__": {"id_": "ba9614d5-d9c8-46fa-9367-7f27d0fe56da", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "983d9a30-6e47-4397-a073-e7c674d8cf91", "node_type": "1", "metadata": {}, "hash": "545f8efb3357d597b156eb2c29fa200d9ff6692f8d0e71c3c0f05f2de4fc176f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "95014d92-6e16-49c5-88dc-eb73695c6508", "node_type": "1", "metadata": {}, "hash": "f8a4e92362e5221b6b1409d53d10fd64e450a35daef55235e12d0d1ea792beda", "class_name": "RelatedNodeInfo"}}, "text": "It should detect every single NFT minted, and store a basic set of data like: in what Receipt it was minted, and which marketplace created it (for example, [Paras](https://paras.id), [ShardDog](https://shard.dog), and [Mintbase](https://mintbase.io)).\n\n## Defining the Database Schema\n\nThe first step to creating an indexer is to define the database schema. This is done by editing the `schema.sql` file in the code editor. The schema for this indexer looks like this:\n\n```sql\nCREATE TABLE\n  \"nfts\" (\n    \"id\" SERIAL NOT NULL,\n    \"marketplace\" TEXT,\n    \"block_height\" BIGINT,\n    \"block_timestamp\" BIGINT,\n    \"receipt_id\" TEXT,\n    \"receiver_id\" TEXT,\n    \"nft_data\" TEXT,\n    PRIMARY KEY (\"id\", \"block_height\", \"block_timestamp\")\n  );\n```\n\nThis schema defines one table: `nfts`. The table has these columns:\n\n- `id`: a unique identifier for each row in the table\n- `marketplace`: the marketplace where the NFT was created\n- `block_height`: the height of the block in which the NFT was created\n- `block_timestamp`: the timestamp of the block in which the NFT was created\n- `receipt_id`: the receipt ID of the transaction that created the NFT\n- `receiver_id`: the receiver ID of the transaction that created the NFT\n- `nft_data`: the content of the minted NFT\n\n## Defining the indexing logic\n\nThe next step is to define the indexing logic. This is done by editing the `indexingLogic.js` file in the code editor. The logic for this indexer can be divided into two parts:\n\n1. Filtering blockchain transactions for a specific type of transaction\n2. Saving the data from the filtered transactions to the database\n\n### Filtering Blockchain transactions\n\nThe first part of the logic is to filter blockchain transactions for a specific type of transaction, where the `Event` is a [NEP-171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core) `nft_mint`. This is done by using the `getBlock` function. This function takes in a block and a context and returns a promise.", "mimetype": "text/plain", "start_char_idx": 1817, "end_char_idx": 3787, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "95014d92-6e16-49c5-88dc-eb73695c6508": {"__data__": {"id_": "95014d92-6e16-49c5-88dc-eb73695c6508", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba9614d5-d9c8-46fa-9367-7f27d0fe56da", "node_type": "1", "metadata": {}, "hash": "5209c03aed5a0f83a5ce8ce3e826533c4e8e51db6f13e55a47f1ec5494a0d54a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cc57c69d-306f-4307-afb6-f89c9824cc82", "node_type": "1", "metadata": {}, "hash": "7bd2becdcb73f56451cc561c063b20bae45a2ea4e5f078792f6040cb8b9b9e4a", "class_name": "RelatedNodeInfo"}}, "text": "The `block` is a Near Protocol block, and the `context` is a set of helper methods to retrieve and commit state. The `getBlock` function is called for every block on the blockchain.\n\nThe `getBlock` function for this NFT indexer looks like this:\n\n```js\nasync function getBlock(block: Block) {\n  for (let ev of block.events()) {\n    const r = block.actionByReceiptId(ev.relatedReceiptId);\n    const createdOn = block.streamerMessage.block.header.timestamp;\n\n    try {\n      let event = ev.rawEvent;\n\n      if (event.standard === \"nep171\" && event.event === \"nft_mint\") {\n        console.log(event);\n\n        let marketplace = \"unknown\";\n        if (r.receiverId.endsWith(\".paras.near\")) marketplace = \"Paras\";\n        else if (r.receiverId.endsWith(\".sharddog.near\"))\n          marketplace = \"ShardDog\";\n        else if (r.receiverId.match(/\\.mintbase\\d+\\.near$/))\n          marketplace = \"Mintbase\";\n\n        const nftMintData = {\n          marketplace: marketplace,\n          block_height: block.header().height,\n          block_timestamp: createdOn,\n          receipt_id: r.receiptId,\n          receiver_id: r.receiverId,\n          nft_data: JSON.stringify(event.data),\n        };\n\n        await context.db.Nfts.insert(nftMintData);\n\n        console.log(`NFT by ${r.receiptId} has been added to the database`);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n```\n\nThis indexer filters [Blocks](https://near.github.io/near-lake-framework-js/classes/_near_lake_primitives.block.Block.html) that have [Events](https://near.github.io/near-lake-framework-js/classes/_near_lake_primitives.events.Event.html) of type `nft_mint` and standard `nep171`. In addition, it stores the JSON event data and identifies the NFT marketplace.\n\n### Saving the data to the Database\n\nThe second part of the logic is to save the data from the filtered transactions to the database.", "mimetype": "text/plain", "start_char_idx": 3788, "end_char_idx": 5658, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cc57c69d-306f-4307-afb6-f89c9824cc82": {"__data__": {"id_": "cc57c69d-306f-4307-afb6-f89c9824cc82", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "95014d92-6e16-49c5-88dc-eb73695c6508", "node_type": "1", "metadata": {}, "hash": "f8a4e92362e5221b6b1409d53d10fd64e450a35daef55235e12d0d1ea792beda", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519", "node_type": "1", "metadata": {}, "hash": "79fe14612b4113efe983b1593b0d8eb6882588a9e7003bf661be212377caf207", "class_name": "RelatedNodeInfo"}}, "text": "This is solved easily by using the [`context.db.Nfts.insert`](../../../2.build/6.data-infrastructure/query-api/context.md#insert) helper method:\n\nThe logic for this looks like:\n\n```js\nconst nftMintData = {\n  marketplace: marketplace,\n  block_height: h,\n  block_timestamp: createdOn,\n  receipt_id: r.receiptId,\n  receiver_id: r.receiverId,\n  nft_data: JSON.stringify(event.data),\n};\n\n// store result to the database\nawait context.db.Nfts.insert(nftMintData);\n```\n\n## NEAR Component\n\nThe final step is querying the indexer using GraphQL from a [NEAR component](../queryapi-ws.md) with WebSockets.\n\nHere's a simple GraphQL query that gets the last `${LIMIT}` minted NFTs:\n\n```graphql\nIndexerQuery {\n    bucanero_near_nft_v4_nfts(order_by: {block_timestamp: desc}, limit: ${LIMIT}) {\n      block_height\n      block_timestamp\n      id\n      marketplace\n      nft_data\n      receipt_id\n      receiver_id\n    }\n```\n\n### Setup\n\nHere's a code snippet that subscribes and processes the most recent activity (last 10 NFTs) from the [NFT indexer](#queryapi-indexer):\n\n:::tip\n\nThe code below is only a snippet. If you want the full source code to play around with the component, you can fork the [NFT Activity Feed source code](https://near.org/near/widget/ComponentDetailsPage?src=bucanero.near/widget/query-api-nft-feed) and build your own NEAR component.\n\n:::\n\n```js\nconst GRAPHQL_ENDPOINT = \"near-queryapi.api.pagoda.co\";\n\nconst LIMIT = 10;\nconst accountId = props.accountId || \"bucanero.near\" || context.accountId;\n\nState.init({\n  widgetActivities: [],\n  widgetActivityCount: 0,\n  startWebSocketWidgetActivity: null,\n  initialFetch: false,\n});\n\nconst widgetActivitySubscription = `\n  subscription IndexerQuery {\n    bucanero_near_nft_v4_nfts(order_by: {block_timestamp: desc},", "mimetype": "text/plain", "start_char_idx": 5659, "end_char_idx": 7427, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519": {"__data__": {"id_": "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cc57c69d-306f-4307-afb6-f89c9824cc82", "node_type": "1", "metadata": {}, "hash": "7bd2becdcb73f56451cc561c063b20bae45a2ea4e5f078792f6040cb8b9b9e4a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f7006f87-006d-4924-a395-f5d7470d2513", "node_type": "1", "metadata": {}, "hash": "e7ee2244fe887a6cde0089737907ab5a2f23734387dd1e2f3dc375d0a89313f6", "class_name": "RelatedNodeInfo"}}, "text": "limit: ${LIMIT}) {\n      block_height\n      block_timestamp\n      id\n      marketplace\n      nft_data\n      receipt_id\n      receiver_id\n    }\n  }\n`;\n\nconst subscriptionWidgetActivity = {\n  type: \"start\",\n  id: \"widgetNftActivity\", // You can use any unique identifier\n  payload: {\n    operationName: \"IndexerQuery\",\n    query: widgetActivitySubscription,\n    variables: {},\n  },\n};\nfunction processWidgetActivity(activity) {\n  return { .activity };\n}\nfunction startWebSocketWidgetActivity(processWidgetActivities) {\n  let ws = State.get().ws_widgetActivity;\n\n  if (ws) {\n    ws.close();\n    return;\n  }\n\n  ws = new WebSocket(`wss://${GRAPHQL_ENDPOINT}/v1/graphql`, \"graphql-ws\");\n\n  ws.onopen = () => {\n    console.log(`Connection to WS has been established`);\n    ws.send(\n      JSON.stringify({\n        type: \"connection_init\",\n        payload: {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Hasura-Client-Name\": \"hasura-console\",\n            \"x-hasura-role\": \"bucanero_near\",\n          },\n          lazy: true,\n        },\n      })\n    );\n\n    setTimeout(() => ws.send(JSON.stringify(subscriptionWidgetActivity)), 50);\n  };\n\n  ws.onclose = () => {\n    State.update({ ws_widgetActivity: null });\n    console.log(`WS Connection has been closed`);\n  };\n\n  ws.onmessage = (e) => {\n    const data = JSON.parse(e.data);\n    console.log(\"received data\", data);\n    if (data.type === \"data\" && data.id === \"widgetNftActivity\") {\n      processWidgetActivities(data.payload.data);\n    }\n  };\n\n  ws.onerror = (err) => {\n    State.update({ ws_widgetActivity: null });\n    console.log(\"WebSocket error\", err);\n  };\n\n  State.update({ ws_widgetActivity: ws });\n}\n```\n\n:::info\nPay attention to the `widgetActivitySubscription` GraphQL query and the `subscriptionWidgetActivity` JSON payload.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f7006f87-006d-4924-a395-f5d7470d2513": {"__data__": {"id_": "f7006f87-006d-4924-a395-f5d7470d2513", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519", "node_type": "1", "metadata": {}, "hash": "79fe14612b4113efe983b1593b0d8eb6882588a9e7003bf661be212377caf207", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "989ceada-ebdd-425c-b764-66baaef40408", "node_type": "1", "metadata": {}, "hash": "2da02896c62a786628fbcd258e8912e12e0d562ae5a638beb63c5a549ace4c77", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n### Processing\n\nThis is the JS function that process the incoming widget activities generated by the QueryAPI indexer, allowing the NEAR component to create a feed based on the blockchain's widget activity:\n\n:::tip\n\nYou can fork the [NFT Activity Feed source code](https://near.org/near/widget/ComponentDetailsPage?src=bucanero.near/widget/query-api-nft-feed) and build your own NEAR component.", "mimetype": "text/plain", "start_char_idx": 9246, "end_char_idx": 9650, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "989ceada-ebdd-425c-b764-66baaef40408": {"__data__": {"id_": "989ceada-ebdd-425c-b764-66baaef40408", "embedding": null, "metadata": {"file_path": "./near_dist/nft-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100", "node_type": "4", "metadata": {}, "hash": "32c4c1670fa2dd8ca9095bda29b0e766fa3df78c29eccb00d4469e710f17a336", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f7006f87-006d-4924-a395-f5d7470d2513", "node_type": "1", "metadata": {}, "hash": "e7ee2244fe887a6cde0089737907ab5a2f23734387dd1e2f3dc375d0a89313f6", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n```js\nfunction processWidgetActivities(incoming_data) {\n  let incoming_widgetActivities =\n    incoming_data.bucanero_near_nft_v4_nfts.flatMap(processWidgetActivity);\n  const newActivities = [\n    ...incoming_widgetActivities.filter((activity) => {\n      return (\n        state.widgetActivities.length == 0 ||\n        activity.block_timestamp > state.widgetActivities[0].block_timestamp\n      );\n    }),\n  ];\n  if (newActivities.length > 0 && state.widgetActivities.length > 0) {\n  }\n  const prevActivities = state.prevActivities || [];\n  State.update({ widgetActivities: [...newActivities, ...prevActivities] });\n}\n\nif (state.ws_widgetActivity === undefined) {\n  State.update({\n    startWebSocketWidgetActivity: startWebSocketWidgetActivity,\n  });\n  state.startWebSocketWidgetActivity(processWidgetActivities);\n}\n```\n\n---\n\n### Rendering\n\nFinally, rendering the activity feed on the NEAR component is straight-forward, by iterating through the `state.widgetActivities` map:\n\n```js\nreturn (\n  <div>\n    <Title>\n      NFT Minting Activity Feed{\" \"}\n      <TextLink href=\"https://dev.near.org/dataplatform.near/widget/QueryApi.App\">\n        {\" \"}\n        Powered By QueryAPI{\" \"}\n      </TextLink>\n    </Title>\n    <RowContainer>\n      {state.widgetActivities.map((activity, i) => (\n        <Card>\n          <div>\n            <Widget\n              src=\"mob.near/widget/TimeAgo\"\n              props={{ blockHeight: activity.block_height }}\n            />{\" \"}\n            ago\n          </div>\n          <CardBody>\n            <div key={i}>\n              <Text bold>NFT Marketplace: {activity.marketplace}</Text>\n              <TextLink\n                href={`https://nearblocks.io/address/${activity.receiver_id}`}\n              >\n                {activity.receiver_id}\n              </TextLink>\n              <Text bold>Receipt ID: {activity.receipt_id}</Text>\n            </div>\n          </CardBody>\n          <CardFooter>\n            <TextLink\n              href={`https://legacy.nearblocks.io/?query=${activity.receipt_id}`}\n            >\n              View details on NEAR Explorer\n            </TextLink>\n          </CardFooter>\n        </Card>\n      ))}\n    </RowContainer>\n  </div>\n);\n```", "mimetype": "text/plain", "start_char_idx": 9652, "end_char_idx": 11849, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5d87902b-09f4-40af-b384-1bbbc821361f": {"__data__": {"id_": "5d87902b-09f4-40af-b384-1bbbc821361f", "embedding": null, "metadata": {"file_path": "./near_dist/dao.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca", "node_type": "4", "metadata": {}, "hash": "3381208e88ba6187f497a2b505ec871d07e6930ec0325d6ebd437f7606570f2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b805d26-a995-4823-b1ab-77665b3f59ea", "node_type": "1", "metadata": {}, "hash": "8493f411adcc9c1d19f18646b51f866fed955250b11fb60346b8be889d844d5c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: dao\ntitle: Decentralized Autonomous Organizations\nsidebar_label: Autonomous Organizations (DAO)\nhide_table_of_contents: false\n---\n\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\"\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport BOSGetDAOList from \"./dao/bos/get-dao-list.md\"\nimport BOSGetProposalList from \"./dao/bos/get-proposal-list.md\"\nimport BOSCreateDAO from \"./dao/bos/create-dao.md\"\nimport BOSCreateProposal from \"./dao/bos/create-proposal.md\"\nimport BOSVoteForProposal from \"./dao/bos/vote-for-proposal.md\"\n\nimport WebAppGetDAOList from \"./dao/web-app/get-dao-list.md\"\nimport WebAppGetProposalList from \"./dao/web-app/get-proposal-list.md\"\nimport WebAppCreateDAO from \"./dao/web-app/create-dao.md\"\nimport WebAppCreateProposal from \"./dao/web-app/create-proposal.md\"\nimport WebAppVoteForProposal from \"./dao/web-app/vote-for-proposal.md\"\n\nimport CLIGetDAOList from \"./dao/near-cli/get-dao-list.md\"\nimport CLIGetProposalList from \"./dao/near-cli/get-proposal-list.md\"\nimport CLICreateDAO from \"./dao/near-cli/create-dao.md\"\nimport CLICreateProposal from \"./dao/near-cli/create-proposal.md\"\nimport CLIVoteForProposal from \"./dao/near-cli/vote-for-proposal.md\"\n\nimport SmartContractCreateDAO from \"./dao/smart-contract/create-dao.md\"\nimport SmartContractCreateProposal from \"./dao/smart-contract/create-proposal.md\"\nimport SmartContractVoteForProposal from \"./dao/smart-contract/vote-for-proposal.md\"\n\nDecentralized Autonomous Organizations (DAOs) are self-organized groups that form around common purposes. Membership, decision making, and funding are coordinated by publicly voting on proposals through a smart contract.\n\n![dao](/docs/primitives/dao.png)\n\nIn contrast with [FT](ft.md) and [NFT](nft.md), DAO contract's are not standardized.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1814, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b805d26-a995-4823-b1ab-77665b3f59ea": {"__data__": {"id_": "3b805d26-a995-4823-b1ab-77665b3f59ea", "embedding": null, "metadata": {"file_path": "./near_dist/dao.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca", "node_type": "4", "metadata": {}, "hash": "3381208e88ba6187f497a2b505ec871d07e6930ec0325d6ebd437f7606570f2a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5d87902b-09f4-40af-b384-1bbbc821361f", "node_type": "1", "metadata": {}, "hash": "45ee00ba0975acef44b8894139e63f5863d2583fc76bf8f2c677a85995feba77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0fcd7a41-0ad3-466f-8db9-838eb5f83f03", "node_type": "1", "metadata": {}, "hash": "d07b62833deafc1de0d9ca4746f1b1233f28e00371b950665b2aa7c1a3170ffe", "class_name": "RelatedNodeInfo"}}, "text": "Because of this, in this page we will use as\nreference the [Astra dao](https://dev.near.org/astraplusplus.ndctools.near/widget/home?page=daos) [contract](https://github.com/near-daos/sputnik-dao-contract). The main concepts covered here should\neasily generalizable to other DAO implementations.\n\n---\n\n## Create a DAO\nThe simplest way to create and interact with a DAO is to go through the [AstraDAO UI](https://dev.near.org/astraplusplus.ndctools.near/widget/home?page=daos).\n\nYou can also create a DAO by interacting with the `sputnik-dao` contract.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSCreateDAO />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppCreateDAO />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLICreateDAO />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractCreateDAO />\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Voting policy\nCurrently, DAOs support two different types of [voting policies](https://github.com/near-daos/sputnik-dao-contract#voting-policy): `TokenWeight`, and `RoleWeight`. \n\nWhen the vote policy is `TokenWeight`, the council votes using [tokens](ft.md). The weigh of a vote is the proportion of tokens used for voting over the token's total supply.\n\nWhen the vote policy is `RoleWeight(role)`, the vote weigh is computed as \"one over the total number of people with the role\".\n\n<details>\n<summary> Voting Threshold </summary>\nBoth voting policies further include a `threshold` for passing a proposal, which can be a ratio or a fixed number.\n\nThe ratio indicates that you need a proportion of people/tokens to approve the proposal (e.g. half the people need to vote, and to vote positively). A fixed number indicated that you need a specific number of votes/tokens to pass the proposal (e.g.", "mimetype": "text/plain", "start_char_idx": 1815, "end_char_idx": 3683, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0fcd7a41-0ad3-466f-8db9-838eb5f83f03": {"__data__": {"id_": "0fcd7a41-0ad3-466f-8db9-838eb5f83f03", "embedding": null, "metadata": {"file_path": "./near_dist/dao.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca", "node_type": "4", "metadata": {}, "hash": "3381208e88ba6187f497a2b505ec871d07e6930ec0325d6ebd437f7606570f2a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b805d26-a995-4823-b1ab-77665b3f59ea", "node_type": "1", "metadata": {}, "hash": "8493f411adcc9c1d19f18646b51f866fed955250b11fb60346b8be889d844d5c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb0bdf90-177c-4f03-919d-0f2d120b2303", "node_type": "1", "metadata": {}, "hash": "c15bff8e8e4e06e807f798bc4db4bf29c5023b0aa3bfc53de56a80fb331b5c03", "class_name": "RelatedNodeInfo"}}, "text": "3 people/tokens are enough to approve the proposal).\n</details>\n\n---\n\n## List of DAOs\n\nQuery the list of DAOs existing in Sputnik Dao.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetDAOList />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetDAOList />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIGetDAOList />\n  </TabItem>\n</Tabs>\n\n---\n\n## Query Existing Proposals\n\nThese snippets will enable you to query the proposals existing in a particular DAO.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetProposalList />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetProposalList />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIGetProposalList />\n  </TabItem>\n</Tabs>\n\n---\n\n## Create proposal\n\nCreate a proposal so other users can vote in favor or against it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSCreateProposal />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppCreateProposal />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLICreateProposal />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractCreateProposal />\n  </TabItem>\n</Tabs>\n\n:::info\nBy default, only **council members** can create proposals.\n:::\n\n---\n\n## Vote for proposal\n\nThese snippet will enable your users to cast a vote for proposal of a particular DAO.", "mimetype": "text/plain", "start_char_idx": 3684, "end_char_idx": 5223, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb0bdf90-177c-4f03-919d-0f2d120b2303": {"__data__": {"id_": "bb0bdf90-177c-4f03-919d-0f2d120b2303", "embedding": null, "metadata": {"file_path": "./near_dist/dao.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca", "node_type": "4", "metadata": {}, "hash": "3381208e88ba6187f497a2b505ec871d07e6930ec0325d6ebd437f7606570f2a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0fcd7a41-0ad3-466f-8db9-838eb5f83f03", "node_type": "1", "metadata": {}, "hash": "d07b62833deafc1de0d9ca4746f1b1233f28e00371b950665b2aa7c1a3170ffe", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSVoteForProposal />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppVoteForProposal />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIVoteForProposal />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\" label=\"\ud83d\udcc4 Contract\">\n    <SmartContractVoteForProposal />\n  </TabItem>\n</Tabs>\n\n---\n\n## Additional Resources\n\n1. [AstroDAO UI](https://astrodao.com/) - the web app built on top of the Sputnik DAO Contract. Allows users to create and manage DAOs.\n2. [List of DAOs as a NEAR component](https://dev.near.org/onboarder.near/widget/DAOSocialSearch)", "mimetype": "text/plain", "start_char_idx": 5225, "end_char_idx": 5897, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a8083d1e-9cfc-4dc1-84a8-e7c52f212b7f": {"__data__": {"id_": "a8083d1e-9cfc-4dc1-84a8-e7c52f212b7f", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50935a81-f53a-4542-a492-fc9eaa094ab4", "node_type": "1", "metadata": {}, "hash": "6edd1cc45b715771b621aef46f7b0f56c70a631801632b9945da614c8b3a1163", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: ft\ntitle: Fungible Tokens (FT)\nhide_table_of_contents: false\n---\n\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\"\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport BOSGetMetadata from \"./ft/bos/get-metadata.md\"\nimport BOSCheckBalance from \"./ft/bos/check-balance.md\"\nimport BOSSendToken from \"./ft/bos/send.md\"\nimport BOSRegister from \"./ft/bos/register.md\"\nimport BOSAttachTokenToCall from \"./ft/bos/attach-to-call.md\"\nimport BOSCreateToken from \"./ft/bos/create.md\"\n\nimport WebAppGetMetadata from \"./ft/web-app/get-metadata.md\"\nimport WebAppCheckBalance from \"./ft/web-app/check-balance.md\"\nimport WebAppSendToken from \"./ft/web-app/send.md\"\nimport WebAppRegister from \"./ft/web-app/register.md\"\nimport WebAppAttachTokenToCall from \"./ft/web-app/attach-to-call.md\"\nimport WebAppCreateToken from \"./ft/web-app/create.md\"\n\nimport CLIGetMetadata from \"./ft/near-cli/get-metadata.md\"\nimport CLICheckBalance from \"./ft/near-cli/check-balance.md\"\nimport CLISendToken from \"./ft/near-cli/send.md\"\nimport CLIRegister from \"./ft/near-cli/register.md\"\nimport CLIAttachTokenToCall from \"./ft/near-cli/attach-to-call.md\"\nimport CLICreateToken from \"./ft/near-cli/create.md\"\n\nimport SmartContractSendToken from \"./ft/smart-contract/send.md\"\nimport SmartContractAttachTokenToCall from \"./ft/smart-contract/attach-to-call.md\"\n\nBesides the native NEAR token, NEAR accounts have access to a [multitude of tokens](https://guide.ref.finance/developers-1/cli-trading#query-whitelisted-tokens) to use throughout the ecosystem. Moreover, it is even possible for users to create their own fungible tokens.\n\nIn contrast with the NEAR native token, fungible token (FT) are **not stored** in the user's account. In fact, each FT lives in **their own contract** which is in charge of doing **bookkeeping**. This is, the contract keeps track of how many tokens each user has, and handles transfers internally.\n\n!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "50935a81-f53a-4542-a492-fc9eaa094ab4": {"__data__": {"id_": "50935a81-f53a-4542-a492-fc9eaa094ab4", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a8083d1e-9cfc-4dc1-84a8-e7c52f212b7f", "node_type": "1", "metadata": {}, "hash": "9ac594399fcc506611acaadfffe1ed29f89152b421f846eb74a4055cdf5c1a22", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7", "node_type": "1", "metadata": {}, "hash": "98951d9ce74e29559d35c96f084318803a3dd85e60a12d87989a62e34bcd3bb5", "class_name": "RelatedNodeInfo"}}, "text": "[FT](/docs/primitives/ft.png)\n\nIn order for a contract to be considered a FT-contract it has to follow the [**NEP-141 and NEP-148 standards**](https://nomicon.io/Standards/FungibleToken/). The **NEP-141** & **NEP-148** standards explain the **minimum interface** required to be implemented, as well as the expected functionality.\n\n---\n\n## Token Factory\nYou can create an FT using the community tool [Token Farm](https://tkn.farm/). Token farm is a token factory, you can interact with it through its graphical interface, or by making calls to its contract.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSCreateToken />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppCreateToken />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLICreateToken />\n  </TabItem>\n</Tabs>\n\nThe FT you create will live in the account `<your_token_symbol>.tkn.near` (e.g. `test.tkn.near`).\n\n---\n\n## Deploying Your Own Contract\n\nYou can also create a fungible token by deploying and initializing a [canonical FT contract](https://github.com/near-examples/FT).\n\nOn initialization you will define the token's metadata such as its name (e.g. Ethereum), symbol (e.g. ETH) and total supply (e.g. 10M). You will also define an `owner`, which will own the tokens **total supply**.\n\nTo initialize a FT contract you will need to deploy it and then call the `new` method defining the token's metadata.", "mimetype": "text/plain", "start_char_idx": 1953, "end_char_idx": 3406, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7": {"__data__": {"id_": "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50935a81-f53a-4542-a492-fc9eaa094ab4", "node_type": "1", "metadata": {}, "hash": "6edd1cc45b715771b621aef46f7b0f56c70a631801632b9945da614c8b3a1163", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2ec95384-8b6c-491c-a90b-c13246200189", "node_type": "1", "metadata": {}, "hash": "8cdf50ec418c7abea3f2e00d79658bbd70a7b89ee6dfddfb38f7aa05437c2a18", "class_name": "RelatedNodeInfo"}}, "text": "```bash\ncargo near deploy <account-id> with-init-call new json-args '{\"owner_id\": \"<owner-account>\", \"total_supply\": \"1000000000000000\", \"metadata\": { \"spec\": \"ft-1.0.0\", \"name\": \"Example Token Name\", \"symbol\": \"EXLT\", \"decimals\": 8 }}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\n:::tip\nCheck the [Contract Wizard](https://dev.near.org/contractwizard.near/widget/ContractWizardUI) to create a personalized FT contract!.\n:::\n\n---\n\n## Querying Metadata\nYou can query the FT's metadata by calling the `ft_metadata`.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSGetMetadata />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppGetMetadata />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIGetMetadata />\n  </TabItem>\n</Tabs>\n\n---\n\n## Checking Balance\nTo know how many coins a user has you will need to query the method `ft_balance_of`.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSCheckBalance />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppCheckBalance />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLICheckBalance />\n  </TabItem>\n</Tabs>\n\n---\n\n## Registering a User\nIn order for an user to own and transfer tokens they need to first **register** in the contract. This is done by calling `storage_deposit` and attaching 0.00125\u24c3.\n\nBy calling this `storage_deposit` the user can register themselves or **register other users**.", "mimetype": "text/plain", "start_char_idx": 3408, "end_char_idx": 4976, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2ec95384-8b6c-491c-a90b-c13246200189": {"__data__": {"id_": "2ec95384-8b6c-491c-a90b-c13246200189", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7", "node_type": "1", "metadata": {}, "hash": "98951d9ce74e29559d35c96f084318803a3dd85e60a12d87989a62e34bcd3bb5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d8f9268-c920-4d5e-aaf4-893768ac1d4d", "node_type": "1", "metadata": {}, "hash": "e3d8fd114227c512321cad9e8fd3aeab1d40ba9f8f44e642b6a43a4da840421c", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSRegister />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppRegister />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIRegister />\n  </TabItem>\n</Tabs>\n\n:::info\nYou can make sure a user is registered by calling `storage_balance_of`.\n:::\n\n:::tip\nAfter a user calls the `storage_deposit` the FT will appear in their Wallets. \n:::\n\n---\n\n## Transferring Tokens\nTo send FT to another account you will use the `ft_transfer` method, indicating the receiver and the amount of FT you want to send.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSSendToken />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppSendToken />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLISendToken />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\"  label=\"\ud83d\udcc4 Contract\"  default>\n    <SmartContractSendToken />\n  </TabItem>\n</Tabs>\n\n---\n\n## Attaching FTs to a Call\nNatively, only NEAR tokens (\u24c3) can be attached to a function calls. However, the FT standard enables to attach fungible tokens in a call by using the FT-contract as intermediary. This means that, instead of you attaching tokens directly to the call, you ask the FT-contract to do both a transfer and a function call in your name.\n\nLet's assume that you need to deposit FTs on Ref Finance.", "mimetype": "text/plain", "start_char_idx": 4978, "end_char_idx": 6418, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8d8f9268-c920-4d5e-aaf4-893768ac1d4d": {"__data__": {"id_": "8d8f9268-c920-4d5e-aaf4-893768ac1d4d", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2ec95384-8b6c-491c-a90b-c13246200189", "node_type": "1", "metadata": {}, "hash": "8cdf50ec418c7abea3f2e00d79658bbd70a7b89ee6dfddfb38f7aa05437c2a18", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a2f38771-9dde-4dcb-8357-f9edee612920", "node_type": "1", "metadata": {}, "hash": "8bd5baaf7506ae8b9189091ea1b6edc2e7fe03920b05cdf1e344300de6a6a74d", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n    <BOSAttachTokenToCall />\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n    <WebAppAttachTokenToCall />\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n    <CLIAttachTokenToCall />\n  </TabItem>\n  <TabItem value=\"\ud83d\udcc4 Contract\"  label=\"\ud83d\udcc4 Contract\"  default>\n    <SmartContractAttachTokenToCall />\n  </TabItem>\n</Tabs>\n\nHow it works:\n\n1. You call ft_transfer_call in the FT contract passing: the receiver, a message, and the amount.\n2. The FT contract transfers the amount to the receiver.\n3. The FT contract calls receiver.ft_on_transfer(sender, msg, amount)\n4. The FT contract handles errors in the ft_resolve_transfer callback.\n5. The FT contract returns you how much of the attached amount was actually used.\n\n---\n\n## Handling Deposits (Contract Only)\n\nIf you want your contract to handle deposit in FTs you have to implement the `ft_on_transfer` method. When executed, such method will know:\n\n- Which FT was transferred, since it is the predecessor account.\n- Who is sending the FT, since it is a parameter\n- How many FT were transferred, since it is a parameter\n- If there are any parameters encoded as a message\n\nThe `ft_on_transfer` must return how many FT tokens have to **be refunded**, so the FT contract gives them back to the sender.\n\n```rust\n// Implement the contract structure\n#[near(contract_state)]\nimpl Contract {}\n\n#[near]\nimpl FungibleTokenReceiver for Contract {\n  // Callback on receiving tokens by this contract.\n  // `msg` format is either \"\" for deposit or `TokenReceiverMessage`.\n  fn ft_on_transfer(\n    &mut self,\n    sender_id: AccountId,\n    amount: U128,\n    msg: String,\n  ) -> PromiseOrValue<U128> {\n    let token_in = env::predecessor_account_id();\n\n    assert!(token_in == self.ft_contract, \"{}\", \"The token is not supported\");\n    assert!", "mimetype": "text/plain", "start_char_idx": 6420, "end_char_idx": 8301, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a2f38771-9dde-4dcb-8357-f9edee612920": {"__data__": {"id_": "a2f38771-9dde-4dcb-8357-f9edee612920", "embedding": null, "metadata": {"file_path": "./near_dist/ft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb", "node_type": "4", "metadata": {}, "hash": "0941266ccdc3f3c0611b6d65639649a52adbaddd255f42d45c2befac658b6207", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d8f9268-c920-4d5e-aaf4-893768ac1d4d", "node_type": "1", "metadata": {}, "hash": "e3d8fd114227c512321cad9e8fd3aeab1d40ba9f8f44e642b6a43a4da840421c", "class_name": "RelatedNodeInfo"}}, "text": "(amount >= self.price, \"{}\", \"The attached amount is not enough\");\n\n    env::log_str(format!(\"Sender id: {:?}\", sender_id).as_str());\n\n    if msg.is_empty() {\n      // Your internal logic here\n      PromiseOrValue::Value(U128(0))\n    } else {\n      let message =\n        serde_json::from_str::<TokenReceiverMessage>(&msg).expect(\"WRONG_MSG_FORMAT\");\n      match message {\n        TokenReceiverMessage::Action {\n          buyer_id,\n        } => {\n          let buyer_id = buyer_id.map(|x| x.to_string());\n          env::log_str(format!(\"Target buyer id: {:?}\", buyer_id).as_str());\n          // Your internal business logic\n          PromiseOrValue::Value(U128(0))\n        }\n      }\n    }\n  }\n}\n```\n\n---\n\n## Additional Resources\n\n1. [NEP-141 and NEP-148 standards](https://nomicon.io/Standards/Tokens/FungibleToken/)\n2. [FT Event Standards](https://nomicon.io/Standards/Tokens/FungibleToken/Event)\n3. [FT reference implementation](https://github.com/near-examples/FT)\n4. [Fungible Tokens 101](../../3.tutorials/fts/0-intro.md) - a set of tutorials that cover how to create a FT contract using Rust.", "mimetype": "text/plain", "start_char_idx": 8301, "end_char_idx": 9398, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fd060ed2-af01-426c-b07f-0a1215487434": {"__data__": {"id_": "fd060ed2-af01-426c-b07f-0a1215487434", "embedding": null, "metadata": {"file_path": "./near_dist/reduce-size.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f", "node_type": "4", "metadata": {}, "hash": "b9a8a379569ecc06031a3e11ad88b363acca36055cd8bee5548075f80679fa28", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "faf72222-66b4-4e80-9163-6c01e4733d77", "node_type": "1", "metadata": {}, "hash": "1745636f617807a24e99b0b9155f678cd5ba81d29e8a872d9ff4ed743c19a744", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: reduce-size\ntitle: \"Reducing Contract Size\"\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\n# Reducing a contract's size\n\n## Advice & examples\n\nThis page is made for developers familiar with lower-level concepts who wish to reduce their contract size significantly, perhaps at the expense of code readability.\n\nSome common scenarios where this approach may be helpful:\n\n- contracts intended to be tied to one's account management\n- contracts deployed using a factory\n- future advancements similar to the EVM on NEAR\n\nThere have been a few items that may add unwanted bytes to a contract's size when compiled. Some of these may be more easily swapped for other approaches while others require more internal knowledge about system calls.\n\n## Small wins\n\n### Using flags\n\nWhen compiling a contract make sure to pass flag `-C link-arg=-s` to the rust compiler:\n\n```bash\nRUSTFLAGS='-C link-arg=-s' cargo build --target wasm32-unknown-unknown --release\n```\n\nHere is the parameters we use for the most examples in `Cargo.toml`:\n\n```toml\n[profile.release]\ncodegen-units = 1\nopt-level = \"s\"\nlto = true\ndebug = false\npanic = \"abort\"\noverflow-checks = true\n```\n\nYou may want to experiment with using `opt-level = \"z\"` instead of `opt-level = \"s\"` to see if generates a smaller binary. See more details on this in [The Cargo Book Profiles section](https://doc.rust-lang.org/cargo/reference/profiles.html#opt-level). You may also reference this [Shrinking .wasm Size](https://rustwasm.github.io/book/reference/code-size.html#tell-llvm-to-optimize-for-size-instead-of-speed) resource.\n\n### Removing `rlib` from the manifest\n\nEnsure that your manifest (`Cargo.toml`) doesn't contain `rlib` unless it needs to. Some NEAR examples have included this:\n\n:::caution Adds unnecessary bloat\n\n```toml\n[lib]\ncrate-type = [\"cdylib\", \"rlib\"]\n```\n:::\n\n  when it could be:\n\n:::tip\n\n```toml\n[lib]\ncrate-type = [\"cdylib\"]\n```\n:::\n\n3.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1921, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "faf72222-66b4-4e80-9163-6c01e4733d77": {"__data__": {"id_": "faf72222-66b4-4e80-9163-6c01e4733d77", "embedding": null, "metadata": {"file_path": "./near_dist/reduce-size.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f", "node_type": "4", "metadata": {}, "hash": "b9a8a379569ecc06031a3e11ad88b363acca36055cd8bee5548075f80679fa28", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd060ed2-af01-426c-b07f-0a1215487434", "node_type": "1", "metadata": {}, "hash": "a164a92ffe5082bc1a510d4e24807a44c01740808c9ea67b7288f72a32b3a150", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3ef82d58-4997-410f-bf12-4d35a1555150", "node_type": "1", "metadata": {}, "hash": "2b8054042929dc874d6d4e74a4a1d59a41d3cd45eadb128ecc0bb69f5f157e73", "class_name": "RelatedNodeInfo"}}, "text": "When using the Rust SDK, you may override the default JSON serialization to use [Borsh](https://borsh.io) instead. [See this page](./serialization-interface.md#overriding-serialization-protocol-default) for more information and an example.\n4. When using assertions or guards, avoid using the standard `assert` macros like [`assert!`](https://doc.rust-lang.org/std/macro.assert.html), [`assert_eq!`](https://doc.rust-lang.org/std/macro.assert_eq.html), or [`assert_ne!`](https://doc.rust-lang.org/std/macro.assert_ne.html) as these may add bloat for information regarding the line number of the error. There are similar issues with `unwrap`, `expect`, and Rust's `panic!()` macro.\n\n  Example of a standard assertion:\n\n  :::caution Adds unnecessary bloat\n\n  ```rust\n  assert_eq!(contract_owner, predecessor_account, \"ERR_NOT_OWNER\");\n  ```\n  :::\n\n  when it could be:\n\n  :::tip\n\n  ```rust\n  if contract_owner != predecessor_account {\n    env::panic(b\"ERR_NOT_OWNER\");\n  }\n  ```\n  :::\n\n  Example of removing `expect`:\n\n  :::caution Adds unnecessary bloat\n\n  ```rust\n  let owner_id = self.owner_by_id.get(&token_id).expect(\"Token not found\");\n  ```\n  :::\n\n  when it could be:\n\n  :::tip\n\n  ```rust\n  fn expect_token_found<T>(option: Option<T>) -> T {\n    option.unwrap_or_else(|| env::panic_str(\"Token not found\"))\n  }\n  let owner_id = expect_token_found(self.owner_by_id.get(&token_id));  \n  ```\n  :::\n\n  Example of changing standard `panic!()`:\n\n  :::caution Adds unnecessary bloat\n\n  ```rust\n  panic!(\"ERR_MSG_HERE\"); \n  ```\n  :::\n\n  when it could be:\n\n  :::tip\n\n  ```rust\n  env::panic_str(\"ERR_MSG_HERE\");  \n  ```\n  :::\n\n## Ready to use script\nWe have prepared a simple `bash` script that can be used to minify `.wasm` contract file. You can find it [here](https://github.com/near/near-sdk-rs/blob/master/minifier/minify.sh).\n\nThe current approach to minification is the following:\n1.", "mimetype": "text/plain", "start_char_idx": 1922, "end_char_idx": 3804, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3ef82d58-4997-410f-bf12-4d35a1555150": {"__data__": {"id_": "3ef82d58-4997-410f-bf12-4d35a1555150", "embedding": null, "metadata": {"file_path": "./near_dist/reduce-size.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f", "node_type": "4", "metadata": {}, "hash": "b9a8a379569ecc06031a3e11ad88b363acca36055cd8bee5548075f80679fa28", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "faf72222-66b4-4e80-9163-6c01e4733d77", "node_type": "1", "metadata": {}, "hash": "1745636f617807a24e99b0b9155f678cd5ba81d29e8a872d9ff4ed743c19a744", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "317b6a5a-244e-4afc-96a2-d88611a3b11c", "node_type": "1", "metadata": {}, "hash": "5c7e995a77ffce2b19ed348edd08c2842d9eab8361eb7ca97842807296b70a45", "class_name": "RelatedNodeInfo"}}, "text": "Snip (i.e. just replace with unreachable instruction) few known fat functions from the standard library (such as float formatting and panic-related) with `wasm-snip`.\n2. Run `wasm-gc` to eliminate all functions reachable from the snipped functions.\n3. Strip unneeded sections, such as names with `wasm-strip`.\n4. Run `binaryen wasm-opt`, which cleans up the rest.\n\n### Requirements to run the script:\n- install [wasm-snip](https://docs.rs/wasm-snip/0.4.0/wasm_snip/) and [wasm-gc](https://docs.rs/crate/wasm-gc/0.1.6) with Cargo:\n```bash\ncargo install wasm-snip wasm-gc\n```\n- install [binaryen](https://github.com/WebAssembly/binaryen) and [wabt](https://github.com/WebAssembly/wabt) on your system. For Ubuntu and other Debian based Linux distributions run:\n```bash\napt install binaryen wabt\n```\n\n:::danger\n\nMinification could be rather aggressive, so you must test the contract after minification. Standalone NEAR runtime could be helpful [here](https://github.com/nearprotocol/nearcore/tree/master/runtime/near-vm-runner).\n\n:::\n\n## Lower-level approach\n\nFor a `no_std` approach to minimal contracts, observe the following examples:\n\n- [Tiny contract](https://github.com/near/nearcore/tree/1e7c6613f65c23f87adf2c92e3d877f4ffe666ea/runtime/near-test-contracts/tiny-contract-rs)\n- [NEAR ETH Gateway](https://github.com/ilblackdragon/near-eth-gateway/blob/master/proxy/src/lib.rs)\n- [This YouTube video](https://youtu.be/Hy4VBSCqnsE) where Eugene demonstrates a fungible token in `no_std` mode. The code for this [example lives here](https://github.com/near/core-contracts/pull/88).\n- [Examples using a project called `nesdie`](https://github.com/austinabell/nesdie/tree/main/examples).\n- Note that Aurora has found success using [rjson](https://crates.io/crates/rjson) as a lightweight JSON serialization crate.", "mimetype": "text/plain", "start_char_idx": 3805, "end_char_idx": 5616, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "317b6a5a-244e-4afc-96a2-d88611a3b11c": {"__data__": {"id_": "317b6a5a-244e-4afc-96a2-d88611a3b11c", "embedding": null, "metadata": {"file_path": "./near_dist/reduce-size.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f", "node_type": "4", "metadata": {}, "hash": "b9a8a379569ecc06031a3e11ad88b363acca36055cd8bee5548075f80679fa28", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3ef82d58-4997-410f-bf12-4d35a1555150", "node_type": "1", "metadata": {}, "hash": "2b8054042929dc874d6d4e74a4a1d59a41d3cd45eadb128ecc0bb69f5f157e73", "class_name": "RelatedNodeInfo"}}, "text": "It has a smaller footprint than [serde](https://crates.io/crates/serde) which is currently packaged with the Rust SDK. See [this example of rjson](https://github.com/aurora-is-near/aurora-engine/blob/65a1d11fcd16192cc1bda886c62005c603189a24/src/json.rs#L254) in an Aurora repository, although implementation details will have to be gleaned by the reader and won't be expanded upon here. [This nesdie example](https://github.com/austinabell/nesdie/blob/bb6beb77e32cd54077ac54bf028f262a9dfb6ad0/examples/multisig/src/utils/json/vector.rs#L26-L30) also uses the [miniserde crate](https://crates.io/crates/miniserde), which is another option to consider for folks who choose to avoid using the Rust SDK.\n\n:::note Information on system calls\n\n<details>\n  <summary>Expand to see what's available from <code>sys.rs</code></summary>\n\n<Github language=\"rust\" start=\"\" end=\"\" url=\"https://github.com/near/near-sdk-rs/blob/master/near-sdk/src/environment/sys.rs\" />\n\n</details>\n\n:::", "mimetype": "text/plain", "start_char_idx": 5617, "end_char_idx": 6588, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "496839cc-9a83-4d88-95ec-90a85600ef9a": {"__data__": {"id_": "496839cc-9a83-4d88-95ec-90a85600ef9a", "embedding": null, "metadata": {"file_path": "./near_dist/types.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff", "node_type": "4", "metadata": {}, "hash": "e4e434eeea164c2a8a0a8fd3ec44e2a7353a4cdb2dae17a9ec9012282d3f6255", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c11239a0-2b61-4b9e-83e6-cedf58d42c21", "node_type": "1", "metadata": {}, "hash": "2cb9731daed24ca3baa9b81a39c09cc5f4956f6345c7f849a55cb8d0dda6be96", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: types\ntitle: SDK Types\nhide_table_of_contents: true\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\nimport CodeBlock from '@theme/CodeBlock';\n\nimport {ExplainCode, Block, File} from '@site/src/components/CodeExplainer/code-explainer';\n\nLets discuss which types smart contracts use to input and output data, as well as how such data is stored and handled in the contract's code.\n\n<ExplainCode languages=\"js,rust\">\n\n<Block highlights='{\"js\":\"5,8,13\"}' fname=\"hello-near\">\n\n    ### Native Types\n    Smart contracts can receive, store and return data using JS native types:\n    - `string`\n    - `number`\n    - `boolean`\n    - `Array`\n    - `Map`\n    - `Object`\n    - `BigInt`\n\n</Block>\n\n<Block highlights='{\"rust\":\"6,13,22,27\"}' fname=\"hello-near\">\n\n    ### Native Types\n    Smart contracts can receive, store and return data using the following Rust types:\n    - `string`\n    - `i8-i32/u8-u32`\n    - **`u64/128`**: It is preferable to use SDK types `U64` and `U128`\n    - `bool`\n    - `HashMap`\n    - `Vector`\n\n</Block>\n\n<Block highlights='{\"rust\": \"1,15,22,64\"}' fname=\"auction\" type='info'>\n\n:::warning `U64/U128`\n\nSmart contracts can store `u64` and `u128`, but these types need to be converted to `string` for input/output, since JSON cannot serialize values with more than 52 bits\n\nTo simplify development, the SDK provides the `U64` and `U128` types which are automatically casted to `u64/u128` when stored, and to `string` when used as input/output\n\n:::\n\n</Block>\n\n<Block highlights='{\"js\":\"3-6\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1608, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c11239a0-2b61-4b9e-83e6-cedf58d42c21": {"__data__": {"id_": "c11239a0-2b61-4b9e-83e6-cedf58d42c21", "embedding": null, "metadata": {"file_path": "./near_dist/types.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff", "node_type": "4", "metadata": {}, "hash": "e4e434eeea164c2a8a0a8fd3ec44e2a7353a4cdb2dae17a9ec9012282d3f6255", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "496839cc-9a83-4d88-95ec-90a85600ef9a", "node_type": "1", "metadata": {}, "hash": "f3c0bebdd460b7d231ec3ed9ffc421c56efa9a4645dd98a8194686d9d2558be7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d8bfc88-6de4-4e85-b1e3-cbeeffea19c2", "node_type": "1", "metadata": {}, "hash": "e720c5b9f1aaa2b4257a7dd988a3a9fa672903bb37d3048b41977f73c5f4b177", "class_name": "RelatedNodeInfo"}}, "text": "\"rust\": \"6-9\"}' fname=\"auction\">\n\n    ### Complex Objects\n    Smart contracts can store and return complex objects\n\n    **Note:** Objects will always be received and returned as JSON\n\n</Block>\n\n<Block highlights='{\"rust\": \"4\"}' fname=\"auction\">\n\n    #### Serializers\n    Objects that will be used as input or output need to be serializable to JSON, add the `#[near(serializer=json)]` macro\n\n    Objects that will be stored in the contract's state need to be serializable to Borsh, add the `#[near(serializer=borsh)]` macro\n\n</Block>\n\n<Block highlights='{\"js\": \"5,11,25,47\"}' fname=\"auction\">\n\n    ### Handling Tokens\n    `$NEAR` tokens are typed as `BigInt` in JS, and their values represented in `yoctonear`\n\n    **Note:** 1 NEAR = 10^24 yoctoNEAR\n\n</Block>\n\n<Block highlights='{\"rust\": \"8,26,41\"}' fname=\"auction\">\n\n    ### Handling Tokens\n    `$NEAR` tokens are handled through the `NearToken` struct, which exposes methods to represent the value in `yoctonear`, `milinear` and `near`\n\n    **Note:** 1 NEAR = 10^24 yoctonear\n\n</Block>\n\n<Block highlights='{\"js\": \"4\", \"rust\": \"7\"}' fname=\"auction\">\n\n    ### Account\n    The SDK exposes a special type to handle NEAR Accounts, which automatically checks if the account address is valid\n\n</Block>\n\n<File language=\"js\" fname=\"hello-near\"\n    url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-ts/src/contract.ts\"\n    start=\"2\" end=\"18\" />\n\n<File language=\"rust\" fname=\"hello-near\"\n    url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-rs/src/lib.rs\"\n    start=\"2\" end=\"32\" />\n\n<File language=\"js\" fname=\"auction\"\n    url=\"https://github.com/near-examples/auction-examples/blob/main/contract-ts/01-basic-auction/src/contract.", "mimetype": "text/plain", "start_char_idx": 1609, "end_char_idx": 3335, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d8bfc88-6de4-4e85-b1e3-cbeeffea19c2": {"__data__": {"id_": "7d8bfc88-6de4-4e85-b1e3-cbeeffea19c2", "embedding": null, "metadata": {"file_path": "./near_dist/types.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff", "node_type": "4", "metadata": {}, "hash": "e4e434eeea164c2a8a0a8fd3ec44e2a7353a4cdb2dae17a9ec9012282d3f6255", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c11239a0-2b61-4b9e-83e6-cedf58d42c21", "node_type": "1", "metadata": {}, "hash": "2cb9731daed24ca3baa9b81a39c09cc5f4956f6345c7f849a55cb8d0dda6be96", "class_name": "RelatedNodeInfo"}}, "text": "ts\"\n    start=\"2\" end=\"51\" />\n\n<File language=\"rust\" fname=\"auction\"\n    url=\"https://github.com/near-examples/auction-examples/blob/main/contract-rs/01-basic-auction/src/lib.rs\"\n    start=\"2\" end=\"72\" />\n\n</ExplainCode>", "mimetype": "text/plain", "start_char_idx": 3335, "end_char_idx": 3555, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c463161-618e-4147-a960-d8f280258c2f": {"__data__": {"id_": "5c463161-618e-4147-a960-d8f280258c2f", "embedding": null, "metadata": {"file_path": "./near_dist/2024-08-13.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c", "node_type": "4", "metadata": {}, "hash": "6a1f2c22879fc227aa70d638b5b243363522e279fae1f919eae637c16907a308", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "748aa497-63d7-4507-b701-c0b4bcb5bdf1", "node_type": "1", "metadata": {}, "hash": "626f4f92ba7076de3390a3da08b8ee63fc2a554635d8d69c5e8cd23bbb9c9778", "class_name": "RelatedNodeInfo"}}, "text": "---\ntitle: Future of Pagoda Services\nauthors: [ewiner]\nslug: 2024-08-13-pagoda-services\ntags: [updates]\nhide_table_of_contents: false\n---\n\nAs the NEAR ecosystem continues to decentralize, Pagoda will cease operations within the next six months and decentralize its functions into NEAR ecosystem teams and committees.  This document describes the transition plan for each of the services, activities, and tools that Pagoda develops or operates.\n\n<!-- truncate -->\n\n### Critical NEAR Services\n\nThe critical services below will continue to be operated and maintained by Pagoda until they are smoothly transitioned to new operators in the NEAR ecosystem during the second half of 2024:\n\n-   [near.org RPC](https://docs.near.org/api/rpc/providers)\n-   [NEAR Lake](https://docs.near.org/concepts/advanced/near-lake-framework)\n-   [BigQuery Public Dataset](https://docs.near.org/build/data-infrastructure/big-query)\n-   [Node Snapshots](https://near-nodes.io/intro/node-data-snapshots)\n-   [State Sync](https://near-nodes.io/rpc/state-sync)\n-   Undocumented but critical services:\n    -   KitWallet Indexer API\n    -   near-cli Testnet Faucet\n\nEach transition will be independently planned and communicated on its own timeline and this page will be updated accordingly.\n\nThe NEAR [Infrastructure Committee](https://dev.near.org/infrastructure-committee.near/widget/near-prpsls-bos.components.pages.app?page=about) will manage this transition process by soliciting proposals from the community for continued operation of these services, then will select, fund, and oversee the new operator.\n\n#### A Note About near.org RPC\n\nThe Infrastructure Committee feels that Pagoda's fully-subsidized near.org RPC service is getting in the way of decentralization efforts and is preventing high-quality commercial RPC offerings from gaining traction. If a NEAR core team continues to support a free-to-use near.org RPC service, it will be required to gradually lower its rate limits over the coming months to prevent abuse. More details on this plan will be communicated by the end of September 2024. In light of this proposed change, **high-traffic near.org RPC users should start making plans to switch to other RPC providers**.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2211, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "748aa497-63d7-4507-b701-c0b4bcb5bdf1": {"__data__": {"id_": "748aa497-63d7-4507-b701-c0b4bcb5bdf1", "embedding": null, "metadata": {"file_path": "./near_dist/2024-08-13.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c", "node_type": "4", "metadata": {}, "hash": "6a1f2c22879fc227aa70d638b5b243363522e279fae1f919eae637c16907a308", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c463161-618e-4147-a960-d8f280258c2f", "node_type": "1", "metadata": {}, "hash": "4319447b96d38b7a7adf7e3173a1f8d28de40cbfb48f682e454ea5249c477ccf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c6a7663-6214-462b-9171-ab9e09106d5b", "node_type": "1", "metadata": {}, "hash": "004b5cd822b22ab3c5d4bbf657b7024a807f3fd1afb0637f355c6994e47d7d90", "class_name": "RelatedNodeInfo"}}, "text": "### Chain Abstraction Services\n\n[Chain Signatures](https://docs.near.org/concepts/abstraction/chain-signatures), Multichain Gas Relayer, and [FastAuth](https://docs.near.org/build/chain-abstraction/fastauth-sdk) will continue to be developed by Pagoda, then will be taken over by the new Chain Abstraction / Multichain spinout from Pagoda and Proximity. More information will be shared in September or October 2024.\n\n### Pagoda Operations & Ecosystem Services\n\nPagoda\u2019s ecosystem services will transition as follows:\n\n-   [Infrastructure Committee](https://dev.near.org/infrastructure-committee.near/widget/near-prpsls-bos.components.pages.app?page=about) administration, the recently rebooted Security Assessment Program, and management of the [near.org](http://near.org) website will move under the purview of NEAR Foundation.\n-   [Bug bounty](https://hackenproof.com/company/near/programs) triage will be transitioned to the protocol team at NEAR One.\n-   The [NEAR Helpdesk](https://help.near.org/) will be turned into self-service documentation.\n-   Pagoda's informal technical / smart contract advisory services for other ecosystem companies will wind down over the next few months.\n\n### Open-Source Libraries\n\nThese open-source libraries and tools will be developed by Pagoda until they reach a logical completion or stopping point:\n\n-   [Pagoda Metatransaction Relayer](https://github.com/near/pagoda-relayer-rs)\n-   [Chain Hosted UI](https://github.com/near/chain-hosted-ui)\n-   [Modularization and Refactor](https://t.me/neardev/53280) of near-api-js\n\nOnce active development by Pagoda has ceased, it doesn't mean these tools have to languish. We encourage the NEAR community to continue this work. If you need funding to do so, you can submit proposals to [DevHub](https://dev.near.org/devhub.near/widget/app) or the [Infrastructure Committee](https://dev.near.org/infrastructure-committee.near/widget/near-prpsls-bos.components.pages.app?page=about).", "mimetype": "text/plain", "start_char_idx": 2213, "end_char_idx": 4175, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c6a7663-6214-462b-9171-ab9e09106d5b": {"__data__": {"id_": "2c6a7663-6214-462b-9171-ab9e09106d5b", "embedding": null, "metadata": {"file_path": "./near_dist/2024-08-13.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c", "node_type": "4", "metadata": {}, "hash": "6a1f2c22879fc227aa70d638b5b243363522e279fae1f919eae637c16907a308", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "748aa497-63d7-4507-b701-c0b4bcb5bdf1", "node_type": "1", "metadata": {}, "hash": "626f4f92ba7076de3390a3da08b8ee63fc2a554635d8d69c5e8cd23bbb9c9778", "class_name": "RelatedNodeInfo"}}, "text": "### Deprecated Services\n\nBetween now and February 2025, Pagoda's development work will slow down or stop on the following products and services:\n\n-   [QueryAPI](https://docs.near.org/build/data-infrastructure/query-api/intro)\n-   [Enhanced API](https://docs.near.org/pagoda/rpc/api)\n-   [Alerts & Triggers](https://docs.near.org/pagoda/alerts/intro)\n\nThese are open-source services and we encourage the community to continue with their development and operation. If we can't identify new operators quickly, we will encourage remaining users of these services to switch to alternative solutions, then communicate a timeline for these services to be turned off.", "mimetype": "text/plain", "start_char_idx": 4177, "end_char_idx": 4836, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "da0b0a28-42e0-4b16-9ac4-9f45ec7893b9": {"__data__": {"id_": "da0b0a28-42e0-4b16-9ac4-9f45ec7893b9", "embedding": null, "metadata": {"file_path": "./near_dist/posts-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be1a981a-5390-453b-b9a1-a67d02d2f669", "node_type": "4", "metadata": {}, "hash": "c27146babe058f0f92ef40654c96466c6bbf0efb289cbf6421249972d97d0a07", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "402ceb2b-2add-449d-b8d6-4347bc5bafc8", "node_type": "1", "metadata": {}, "hash": "6c173305e0ce4dd4d31ec7052a2f034147c82832d62fd29f63efb33866a7179a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: posts-indexer\ntitle: Posts Indexer\nsidebar_label: Posts Indexer\n---\n\n:::tip\n\nThis tutorial creates a blockchain indexer using [NEAR QueryAPI](../../../2.build/6.data-infrastructure/query-api/intro.md).\n\n:::\n\n## Overview\n\nThis indexer creates a new row in a pre-defined `posts` table created by the user in the GraphQL database for every new post found on the blockchain. This is a simple example that shows how to specify a single table, filter blockchain transaction data for a specific type of transaction, and save the data to the database.\n\n:::tip\n\nThis indexer can be found by [following this link](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=bucanero.near/posts-example).\n\n:::\n\n## Defining the Database Schema\n\nThe first step to creating an indexer is to define the database schema. This is done by editing the `schema.sql` file in the code editor. The schema for this indexer looks like this:\n\n```sql\nCREATE TABLE\n  \"posts\" (\n    \"id\" SERIAL NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    \"content\" TEXT NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    CONSTRAINT \"posts_pkey\" PRIMARY KEY (\"id\")\n  );\n```\n\nThis schema defines a table called `posts` with columns:\n\n- `id`: a unique identifier for each row in the table\n- `account_id`: the account ID of the user who created the post\n- `block_height`: the height of the block in which the post was created\n- `receipt_id`: the receipt ID of the transaction that created the post\n- `content`: the content of the post\n- `block_timestamp`: the timestamp of the block in which the post was created\n\n## Defining the Indexing Logic\n\nThe next step is to define the indexing logic. This is done by editing the `indexingLogic.js` file in the code editor. The logic for this indexer can be divided into two parts:\n\n1. Filtering blockchain transactions for a specific type of transaction\n2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1969, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "402ceb2b-2add-449d-b8d6-4347bc5bafc8": {"__data__": {"id_": "402ceb2b-2add-449d-b8d6-4347bc5bafc8", "embedding": null, "metadata": {"file_path": "./near_dist/posts-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be1a981a-5390-453b-b9a1-a67d02d2f669", "node_type": "4", "metadata": {}, "hash": "c27146babe058f0f92ef40654c96466c6bbf0efb289cbf6421249972d97d0a07", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da0b0a28-42e0-4b16-9ac4-9f45ec7893b9", "node_type": "1", "metadata": {}, "hash": "d9886c8a38a6ac96d2fa7512c7123ba65833138b1c7e33b135703f25075419bd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff", "node_type": "1", "metadata": {}, "hash": "f4d2f5e7c4de0666146ca8fd87d87e9f6d40c16eac70dbd6e5f8d6c1ceeac515", "class_name": "RelatedNodeInfo"}}, "text": "Saving the data from the filtered transactions to the database\n\n### Filtering Blockchain Transactions\n\nThe first part of the logic is to filter blockchain transactions for a specific type of transaction. This is done by using the `getBlock` function. This function takes in a block and a context and returns a promise. The block is a Near Protocol block, and the context is a set of helper methods to retrieve and commit state. The `getBlock` function is called for every block on the blockchain.\n\nThe `getBlock` function for this indexer looks like this:\n\n```js\nimport { Block } from \"@near-lake/primitives\";\n\nasync function getBlock(block: Block, context) {\n  function base64decode(encodedValue) {\n    let buff = Buffer.from(encodedValue, \"base64\");\n    return JSON.parse(buff.toString(\"utf-8\"));\n  }\n\n  const SOCIAL_DB = \"social.near\";\n\n  const nearSocialPosts = block\n    .actions()\n    .filter((action) => action.receiverId === SOCIAL_DB)\n    .flatMap((action) =>\n      action.operations\n        .map((operation) => operation[\"FunctionCall\"])\n        .filter((operation) => operation?.method_name === \"set\")\n        .map((functionCallOperation) => ({\n          ...functionCallOperation,\n          args: base64decode(functionCallOperation.args),\n          receiptId: action.receiptId,\n        }))\n        .filter((functionCall) => {\n          const accountId = Object.keys(functionCall.args.data)[0];\n          return (\n            Object.keys(functionCall.args.data[accountId]).includes(\"post\") ||\n            Object.keys(functionCall.args.data[accountId]).includes(\"index\")\n          );\n        })\n    );\n\n  ... // Further logic for saving nearSocialPosts to the database\n}\n```\n\nThis function first defines a helper function called `base64decode` that decodes base64 encoded data. It then defines a constant called `SOCIAL_DB` that is the name of the smart contract that stores the posts in NEAR. It then filters the blockchain transactions for a specific type of transaction. This is done by:\n\n1. Filtering the blockchain transactions for transactions where the `receiverId` is the `SOCIAL_DB` database\n2. Mapping the operations of the filtered transactions to the `FunctionCall` operation\n3. Filtering the `FunctionCall` operations for operations where the `method_name` is `set`\n4.", "mimetype": "text/plain", "start_char_idx": 1970, "end_char_idx": 4260, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff": {"__data__": {"id_": "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff", "embedding": null, "metadata": {"file_path": "./near_dist/posts-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be1a981a-5390-453b-b9a1-a67d02d2f669", "node_type": "4", "metadata": {}, "hash": "c27146babe058f0f92ef40654c96466c6bbf0efb289cbf6421249972d97d0a07", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "402ceb2b-2add-449d-b8d6-4347bc5bafc8", "node_type": "1", "metadata": {}, "hash": "6c173305e0ce4dd4d31ec7052a2f034147c82832d62fd29f63efb33866a7179a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3af4c23b-328b-48bd-a86e-20bf4b38bd4e", "node_type": "1", "metadata": {}, "hash": "eaf1bb9e86ad737e79cf97013425a4507958f7fb4143e6861e3c361941eca890", "class_name": "RelatedNodeInfo"}}, "text": "Mapping the filtered `FunctionCall` operations to an object that contains the `FunctionCall` operation, the decoded `args` of the `FunctionCall` operation, and the `receiptId` of the transaction\n5. Filtering the mapped objects for objects where the `args` contain a `post` or `index` key\n\nThis function returns an array of objects that contain the `FunctionCall` operation, the decoded `args` of the `FunctionCall` operation, and the `receiptId` of the transaction. This array is called `nearSocialPosts`.\n\n### Saving the Data to the Database\n\nThe second part of the logic is to save the data from the filtered transactions to the database. This is done by using the [`context.db.Posts.insert()`](../../../2.build/6.data-infrastructure/query-api/context.md#insert) function. The `context.db.Posts.insert()` function will be called for every filtered transaction as defined by the `.map()` function called on the array of `nearSocialPosts`.\n\nThe function for this indexer looks like this:\n\n```js\n  ... // Logic for filtering blockchain transactions, defining nearSocialPosts\n\n  if (nearSocialPosts.length > 0) {\n    const blockHeight = block.blockHeight;\n    const blockTimestamp = Number(block.header().timestampNanosec);\n    await Promise.all(\n      nearSocialPosts.map(async (postAction) => {\n        const accountId = Object.keys(postAction.args.data)[0];\n        console.log(`ACCOUNT_ID: ${accountId}`);\n\n        // create a post if indeed a post\n        if (\n          postAction.args.data[accountId].post &&\n          Object.keys(postAction.args.data[accountId].post).includes(\"main\")\n        ) {\n          try {\n            console.log(\"Creating a post...\");\n            const postData = {\n                account_id: accountId,\n                block_height: blockHeight,\n                block_timestamp: blockTimestamp,\n                receipt_id: postAction.receiptId,\n                content: postAction.args.data[accountId].post.main,\n            };\n            await context.db.Posts.insert(postData);\n            console.log(`Post by ${accountId} has been added to the database`);\n          } catch (e) {\n            console.error(`Error creating a post by ${accountId}: ${e}`);\n          }\n        }\n      })\n    );\n  }\n```\n\n## Querying data from the indexer\n\nThe final step is querying the indexer using the public GraphQL API.", "mimetype": "text/plain", "start_char_idx": 4261, "end_char_idx": 6603, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3af4c23b-328b-48bd-a86e-20bf4b38bd4e": {"__data__": {"id_": "3af4c23b-328b-48bd-a86e-20bf4b38bd4e", "embedding": null, "metadata": {"file_path": "./near_dist/posts-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be1a981a-5390-453b-b9a1-a67d02d2f669", "node_type": "4", "metadata": {}, "hash": "c27146babe058f0f92ef40654c96466c6bbf0efb289cbf6421249972d97d0a07", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff", "node_type": "1", "metadata": {}, "hash": "f4d2f5e7c4de0666146ca8fd87d87e9f6d40c16eac70dbd6e5f8d6c1ceeac515", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c38e07df-4e0f-4294-8c3f-1bf730729942", "node_type": "1", "metadata": {}, "hash": "f47de25fb89643a585e115a35bb29724d5c2f250336d0bb94de5325e4ac5805a", "class_name": "RelatedNodeInfo"}}, "text": "This can be done by writing a GraphQL query using the GraphiQL tab in the code editor.\n\nFor example, here's a query that fetches `posts` from the _Posts Indexer_, ordered by `block_height`:\n\n```graphql\nquery MyQuery {\n  <user-name>_near_posts_indexer_posts(order_by: {block_height: desc}) {\n    content\n    block_height\n    account_id\n  }\n}\n```\n\nOnce you have defined your query, you can use the GraphiQL Code Exporter to auto-generate a JavaScript or NEAR Widget code snippet. The exporter will create a helper method `fetchGraphQL` which will allow you to fetch data from the indexer's GraphQL API. It takes three parameters:\n\n- `operationsDoc`: A string containing the queries you would like to execute.\n- `operationName`: The specific query you want to run.\n- `variables`: Any variables to pass in that your query supports, such as `offset` and `limit` for pagination.\n\nNext, you can call the `fetchGraphQL` function with the appropriate parameters and process the results.", "mimetype": "text/plain", "start_char_idx": 6604, "end_char_idx": 7581, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c38e07df-4e0f-4294-8c3f-1bf730729942": {"__data__": {"id_": "c38e07df-4e0f-4294-8c3f-1bf730729942", "embedding": null, "metadata": {"file_path": "./near_dist/posts-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be1a981a-5390-453b-b9a1-a67d02d2f669", "node_type": "4", "metadata": {}, "hash": "c27146babe058f0f92ef40654c96466c6bbf0efb289cbf6421249972d97d0a07", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3af4c23b-328b-48bd-a86e-20bf4b38bd4e", "node_type": "1", "metadata": {}, "hash": "eaf1bb9e86ad737e79cf97013425a4507958f7fb4143e6861e3c361941eca890", "class_name": "RelatedNodeInfo"}}, "text": "Here's the complete code snippet for a NEAR component using the _Posts Indexer_:\n\n```js\nconst QUERYAPI_ENDPOINT = `https://near-queryapi.api.pagoda.co/v1/graphql/`;\n\nState.init({\ndata: []\n});\n\nconst query = `query MyPostsQuery {\n    <user-name>_near_posts_indexer_posts(order_by: {block_height: desc}) {\n      content\n      block_height\n      account_id\n    }\n  }`\n\nfunction fetchGraphQL(operationsDoc, operationName, variables) {\n      return asyncFetch(\n        QUERYAPI_ENDPOINT,\n        {\n          method: \"POST\",\n          headers: { \"x-hasura-role\": `<user-name>_near` },\n          body: JSON.stringify({\n            query: operationsDoc,\n            variables: variables,\n            operationName: operationName,\n          }),\n        }\n      );\n    }\n\nfetchGraphQL(query, \"MyPostsQuery\", {}).then((result) => {\n  if (result.status === 200) {\n    if (result.body.data) {\n      const data = result.body.data.<user-name>_near_posts_indexer_posts;\n      State.update({ data })\n      console.log(data);\n    }\n  }\n});\n\nconst renderData = (a) => {\n  return (\n    <div key={JSON.stringify(a)}>\n        {JSON.stringify(a)}\n    </div>\n  );\n};\n\nconst renderedData = state.data.map(renderData);\nreturn (\n  {renderedData}\n);\n```\n\n\n:::tip\n\nTo view a more complex example, see this widget which fetches posts with proper pagination: [Posts Widget powered By QueryAPI](https://dev.near.org/edit/roshaan.near/widget/query-api-feed-infinite).\n\n:::", "mimetype": "text/plain", "start_char_idx": 7583, "end_char_idx": 9022, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7febecd2-cf23-403f-8f54-cf368a8f0fd3": {"__data__": {"id_": "7febecd2-cf23-403f-8f54-cf368a8f0fd3", "embedding": null, "metadata": {"file_path": "./near_dist/nft-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4", "node_type": "4", "metadata": {}, "hash": "8b2ed553363eba3cab1d9606002652a275bed65aacd60816bb2b387200b1bd61", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4586836-7bd3-482e-bf22-e6ac97587451", "node_type": "1", "metadata": {}, "hash": "431ee5fe14f2088fe7ff8a6a2bb1053398b59cd05cd8b4b8d6981ac57e5ef5d5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: nft-chain-keys\ntitle: NFT Chain Keys Smart Contract\nsidebar_label: NFT Chain Keys Contract\n---\n\nThe NFT Chain Keys smart contract makes the ownership of remote accounts both provable and transferrable. This new paradigm allows you to create new end-user experiences that leverage provable and transferrable remote accounts as a core primitive.\n\n## Contract overview\n\nThe [MPC Account Recovery smart contract](https://github.com/near/mpc-recovery) provides a [`sign`](https://github.com/near/mpc-recovery#sign) method that accepts a `path` parameter. This allows one predecessor account to have access to an effectively unlimited number of MPC keys.\n\nThe NFT Chain Keys contract takes advantage of this property and allows secure transfers of MPC keys between users, using the [NEP-171 NFT contract standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core).\nThe contract also implements new functionality to enable chain key management features.\n\n:::info\n\nThe essence of Multi-Party Computation (MPC) is to enable independent parties to perform shared computations on private information without revealing secrets to each other.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1146, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a4586836-7bd3-482e-bf22-e6ac97587451": {"__data__": {"id_": "a4586836-7bd3-482e-bf22-e6ac97587451", "embedding": null, "metadata": {"file_path": "./near_dist/nft-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4", "node_type": "4", "metadata": {}, "hash": "8b2ed553363eba3cab1d9606002652a275bed65aacd60816bb2b387200b1bd61", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7febecd2-cf23-403f-8f54-cf368a8f0fd3", "node_type": "1", "metadata": {}, "hash": "e3dcab558ab1baded872e15083e04286434941a2683e09563d7ebe1d0e9c9029", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "369102e0-0256-4a33-92a1-613a9aaa2a01", "node_type": "1", "metadata": {}, "hash": "e061a604465d957762fd9f9f91da58b567e00d72d90aaf944a113834e9ddf0cd", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n### Standards\n\nBesides the NEP-171 contract standard, the NFT Chain Keys contract complies with a full suite of NEP standards:\n\n- [NEP-145: Storage Management](https://nomicon.io/Standards/StorageManagement)\n- [NEP-171: NFT Core](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core)\n- [NEP-177: Metadata](https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata)\n- [NEP-178: Approval Management](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement)\n- [NEP-181: Enumeration](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration)\n\n## Usage\n\nPlease refer to the smart contract [GitHub documentation](https://github.com/near/multichain-gas-station-contract/blob/master/nft_key/README.md) for usage information:\n\n- [Creating new key tokens](https://github.com/near/multichain-gas-station-contract/tree/master/nft_key#creating-new-key-tokens): mint unlimited new NFT chain keys, as long as the account has sufficient storage.\n- [Issuing signatures](https://github.com/near/multichain-gas-station-contract/tree/master/nft_key#issuing-signatures): generate new signatures based on a submitted payload.\n- [Approvals](https://github.com/near/multichain-gas-station-contract/tree/master/nft_key#approvals): implement a separate set of approval management functions for using NFTs, which operate similarly to NEP-178.\n\n:::tip testnet contract\n\nIf you want to try things out, this smart contract is available on `nft.kagi.testnet`.\n\n:::\n\n---\n\n## Use Cases for NFT Keys\n\n:::info Disclaimer\nThe ideas presented in this section are just initial concepts, and shouldn\u2019t be considered as fully fledged solutions.\n:::\n\n### Remote Account Marketplace\n\nNFT Keys enable users to buy, sell, and trade remote accounts within a marketplace-style application.\nFor instance, _Alice_, possessing a set of remote accounts with value and history, can mint an NFT key and list these accounts for sale on the marketplace.", "mimetype": "text/plain", "start_char_idx": 1148, "end_char_idx": 3085, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "369102e0-0256-4a33-92a1-613a9aaa2a01": {"__data__": {"id_": "369102e0-0256-4a33-92a1-613a9aaa2a01", "embedding": null, "metadata": {"file_path": "./near_dist/nft-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4", "node_type": "4", "metadata": {}, "hash": "8b2ed553363eba3cab1d9606002652a275bed65aacd60816bb2b387200b1bd61", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4586836-7bd3-482e-bf22-e6ac97587451", "node_type": "1", "metadata": {}, "hash": "431ee5fe14f2088fe7ff8a6a2bb1053398b59cd05cd8b4b8d6981ac57e5ef5d5", "class_name": "RelatedNodeInfo"}}, "text": "Potential buyers, like _Bob_, can browse the value of _Alice\u2019s_ accounts and choose to make a purchase.\nIf _Bob_ decides to proceed, they would simply need to acquire ownership of the original NFT key from _Alice_ in exchange for payment, such as in `$NEAR`.\nOnce the transaction is completed, ownership of the accounts transfers to _Bob_.\n\n### Bridgeless Multi-Chain DEX\n\nYou can create a Multi-chain DEX without bridging by combining Chain Signatures with NFT Keys.\nUsers wishing to swap asset `$A` for asset `$B` would initiate the swap on the bridgeless DEX.\nSupported by liquidity providers (Automated Market Makers) across multiple chains, the DEX facilitates these swaps.\nHere's how it works:\n\n- A user proposes the swap, specifying asset `$A` in remote `account X` for asset `$B` in remote `account Y`.\n- The liquidity provider receives asset `$A` from the user and sends the equivalent amount of asset `$B` to a newly created remote `account Y`, along with a minted NFT key.\n- The NFT key is then sent to the user to complete the swap.\n\nAlthough liquidity providers still need to leverage bridging to settle assets between different pools, users of this exchange type are exposed to reduced bridge risk.", "mimetype": "text/plain", "start_char_idx": 3086, "end_char_idx": 4298, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6918c4cd-3c37-4700-82c5-087f14e4bca8": {"__data__": {"id_": "6918c4cd-3c37-4700-82c5-087f14e4bca8", "embedding": null, "metadata": {"file_path": "./near_dist/bos-loader.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65697ecb-2b06-4339-92ed-186d900bae92", "node_type": "4", "metadata": {}, "hash": "2aee17d151bf494a6fd180bec551b6cdc5398d9f37ee7edcdd5b8314c9960780", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4fe88e5-3de1-4b28-a2ae-f72a0207b9db", "node_type": "1", "metadata": {}, "hash": "c7681806e294d54e8defe2a868df481b0df29a81684dbe468e5997bcf6ec91dd", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: bos-loader\ntitle: BOS Loader\n---\n\n# BOS Loader\n\nIn this article you'll learn how to develop, test, and deploy BOS components using CLI tools. You can use this workflow to tap into the colaboration, pull-request, and other GitHub benefits while still deploying components to the BOS. \n\n[BOS Component Loader](https://github.com/near/bos-loader) serves a local directory of component files as a JSON payload properly formatted to be plugged into a BOS `redirectMap`. When paired with a viewer configured to call out to this loader, it enables local component development.\n\n## Development flow\n\n1. _(Optional)_ Download and install [`bos` CLI](https://bos.cli.rs).\n\n   :::info\n   You need `bos` CLI if you have component code on the BOS already that you want to use or if you want to manage component deploys locally instead of the GitHub actions CI/CD.\n   :::\n\n2. To get component code saved on the BOS, use `bos` to download the source code. Otherwise, create a `src` folder.\n\n3. Create a component within that src folder like `src/<component name>.jsx`.\n\n   :::tip\n   It's common practice to use `.` delimited component names for namespacing. You can handle this with folders for better files organization.\n   \n   For example, `AppName.Component` \u2192 `AppName/Component.jsx`.\n   :::\n\n5. Download and install [BOS Component Loader](https://github.com/near/bos-loader/releases) (`bos-loader`).\n\n6. Run `bos-loader <youraccount.near> --path src` (or run from `src` folder)\n\n7. Open https://dev.near.org/flags, and set the loader URL to `http://127.0.0.1:3030`.\n\n8. Open `https://dev.near.org/<youraccount.near>/widget/<component name>` (case sensitive)\n\n   :::info\n   If you're testing on `testnet`, use your testnet account and open https://test.near.org instead.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1767, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4fe88e5-3de1-4b28-a2ae-f72a0207b9db": {"__data__": {"id_": "f4fe88e5-3de1-4b28-a2ae-f72a0207b9db", "embedding": null, "metadata": {"file_path": "./near_dist/bos-loader.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "65697ecb-2b06-4339-92ed-186d900bae92", "node_type": "4", "metadata": {}, "hash": "2aee17d151bf494a6fd180bec551b6cdc5398d9f37ee7edcdd5b8314c9960780", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6918c4cd-3c37-4700-82c5-087f14e4bca8", "node_type": "1", "metadata": {}, "hash": "3aa952885411bde6901eb95dd95ce8d8008997682a1e517c9f5953053e5bdc25", "class_name": "RelatedNodeInfo"}}, "text": "Run `bos-loader <youraccount.testnet> --path src` locally, set loader URL in https://test.near.org/flags and open `https://test.near.org/<youraccount.testnet>/widget/<component name>` to view your component locally.\n   :::\n\n   :::tip\n   You can work on multiple components at once by embedding them in a wrapper component.\n   :::\n\n9. Make changes to the component's code.\n\n   :::info\n   You must refresh the browser's web page to see the changes.\n   :::\n\n10. When you're done, use the <kbd>X</kbd> on the banner to stop loading locally.\n\n## Component deployment\n\nAt this point, your new component is ready to be deployed. To deploy, you can use either of the following two paths: \n\n - Use `bos` CLI to deploy from command line:\n\n   ```\n   bos deploy\n   ```\n\n - Set up a [GitHub actions](https://github.com/FroVolod/bos-cli-rs/blob/master/README.md#reusable-workflow) deployment workflow. Check [this document](https://github.com/FroVolod/bos-cli-rs/blob/master/README.md#github-actions) for instructions.\n\nYou should now be able to see your component in discovery. Happy Hacking!", "mimetype": "text/plain", "start_char_idx": 1775, "end_char_idx": 2854, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "57a9e994-06b3-40c3-b36a-9fc52e7f8838": {"__data__": {"id_": "57a9e994-06b3-40c3-b36a-9fc52e7f8838", "embedding": null, "metadata": {"file_path": "./near_dist/CODE_OF_CONDUCT.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ff31c45-e0a7-4771-ba1c-eace18d5346a", "node_type": "4", "metadata": {}, "hash": "b6069252ae42b8d4a16a4b10d5ec7e077b363df14713c88023c8836c4c43a4fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b7982cb1-336a-47e1-a79b-149a6a28f45e", "node_type": "1", "metadata": {}, "hash": "8d01443e296a14d598b300dea0c55b4e4aaa6cf2db5768824502af1e56e90861", "class_name": "RelatedNodeInfo"}}, "text": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nIn the interest of fostering an open and welcoming environment, we as\ncontributors and maintainers pledge to making participation in our project and\nour community a harassment-free experience for everyone, regardless of age, body\nsize, disability, ethnicity, sex characteristics, gender identity and expression,\nlevel of experience, education, socio-economic status, nationality, personal\nappearance, race, religion, or sexual identity and orientation.\n\n## Our Standards\n\nExamples of behavior that contributes to creating a positive environment\ninclude:\n\n* Using welcoming and inclusive language\n* Being respectful of differing viewpoints and experiences\n* Gracefully accepting constructive criticism\n* Focusing on what is best for the community\n* Showing empathy towards other community members\n\nExamples of unacceptable behavior by participants include:\n\n* The use of sexualized language or imagery and unwelcome sexual attention or\n advances\n* Trolling, insulting/derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or electronic\n address, without explicit permission\n* Other conduct which could reasonably be considered inappropriate in a\n professional setting\n\n## Our Responsibilities\n\nProject maintainers are responsible for clarifying the standards of acceptable\nbehavior and are expected to take appropriate and fair corrective action in\nresponse to any instances of unacceptable behavior.\n\nProject maintainers have the right and responsibility to remove, edit, or\nreject comments, commits, code, wiki edits, issues, and other contributions\nthat are not aligned to this Code of Conduct, or to ban temporarily or\npermanently any contributor for other behaviors that they deem inappropriate,\nthreatening, offensive, or harmful.\n\n## Scope\n\nThis Code of Conduct applies both within project spaces and in public spaces\nwhen an individual is representing the project or its community. Examples of\nrepresenting a project or community include using an official project e-mail\naddress, posting via an official social media account, or acting as an appointed\nrepresentative at an online or offline event. Representation of a project may be\nfurther defined and clarified by project maintainers.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be\nreported by contacting the project team at privacy@near.org. All\ncomplaints will be reviewed and investigated and will result in a response that\nis deemed necessary and appropriate to the circumstances.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2636, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b7982cb1-336a-47e1-a79b-149a6a28f45e": {"__data__": {"id_": "b7982cb1-336a-47e1-a79b-149a6a28f45e", "embedding": null, "metadata": {"file_path": "./near_dist/CODE_OF_CONDUCT.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ff31c45-e0a7-4771-ba1c-eace18d5346a", "node_type": "4", "metadata": {}, "hash": "b6069252ae42b8d4a16a4b10d5ec7e077b363df14713c88023c8836c4c43a4fa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "57a9e994-06b3-40c3-b36a-9fc52e7f8838", "node_type": "1", "metadata": {}, "hash": "2fac9647aac686be0a1920de1603478773acbd75d70f37d868cf7174dde49322", "class_name": "RelatedNodeInfo"}}, "text": "The project team is\nobligated to maintain confidentiality with regard to the reporter of an incident.\nFurther details of specific enforcement policies may be posted separately.\n\nProject maintainers who do not follow or enforce the Code of Conduct in good\nfaith may face temporary or permanent repercussions as determined by other\nmembers of the project's leadership.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,\navailable at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html\n\n[homepage]: https://www.contributor-covenant.org\n\nFor answers to common questions about this code of conduct, see\nhttps://www.contributor-covenant.org/faq", "mimetype": "text/plain", "start_char_idx": 2637, "end_char_idx": 3347, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "959766bf-fc87-48ac-8c36-9eadb1d276bc": {"__data__": {"id_": "959766bf-fc87-48ac-8c36-9eadb1d276bc", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "68e70ddc-0f2a-409e-8b73-c8199d2b060a", "node_type": "1", "metadata": {}, "hash": "01f2800d6c1ba6fc9f01a5446dfe9a3e551f31a5c93f21784f545578ffcc7659", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 4\nsidebar_label: \"Add a puzzle\"\ntitle: \"Adding a new puzzle now that we're using a collection that can contain multiple crossword puzzles\"\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport blankCrossword from '/docs/assets/crosswords/chapter-2-crossword-blank.png';\nimport teachingDeployment from '/docs/assets/crosswords/teaching-just-teacher--herogranada.near--GranadaHero.jpeg';\nimport recreatingSubaccount from '/docs/assets/crosswords/erase-recreate-subaccount--3one9.near--3one92.gif';\n\n# Adding a puzzle\n\nWe're going to make a new puzzle, which means we need to provide the smart contract with a set of clues and info about the answers.\n\nOf course, we'll not be sending the *answers* to the smart contract, otherwise everyone could see. We will, however, send details about each clue, including:\n\n- The clue number\n- Whether it's a down or across clue\n- The coordinates (x and y position)\n- The length of the clue. (How many letters)\n\nEssentially, we're going to tell the smart contract enough information for an empty puzzle like this:\n\n<img src={blankCrossword} alt=\"Blank crossword for chapter 2 of the crossword puzzle smart contract tutorial\" width=\"600\"/>\n<br/>\n\n(Note that we aren't showing the human-readable clues in the above screenshot, but we will provide that as well.)\n\n## Building and deploying\n\nLet's use the same steps we learned from the first chapter:\n\n<figure>\n    <img src={teachingDeployment} alt=\"Teacher shows chalkboard with instructions on how to properly deploy a smart contract. 1. Build smart contract. 2. Create a subaccount (or delete and recreate if it exists) 3. Deploy to subaccount. 4. Interact. Art created by herogranada.near\" width=\"600\"/>\n    <figcaption>Art by <a href=\"https://twitter.com/GranadaHero\" target=\"_blank\" rel=\"noopener noreferrer\">herogranada.near</a></figcaption>\n</figure>\n<br/>\n\nNavigate to the `contract` directory, then run:\n\n```bash\ncargo near build\n```\n\nIf following from the previous chapter, you'll likely have a subaccount already created.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2065, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68e70ddc-0f2a-409e-8b73-c8199d2b060a": {"__data__": {"id_": "68e70ddc-0f2a-409e-8b73-c8199d2b060a", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "959766bf-fc87-48ac-8c36-9eadb1d276bc", "node_type": "1", "metadata": {}, "hash": "3bb7b2652ca36ba112a154e0514c0d44347adb4c2cea7e62e38c65cfb5057ae2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557", "node_type": "1", "metadata": {}, "hash": "ea24d7ec9b785b03f1532e55e09faa9db60aa6f947401dd9b6bf9c9d7042c7f8", "class_name": "RelatedNodeInfo"}}, "text": "For the purpose of demonstration, we're calling the subaccount (where we deploy the contract) `crossword.friend.testnet` and the parent account is thus `friend.testnet`.\n\nLet's delete the subaccount and recreate it, to start from a blank slate.\n\n<figure>\n    <img src={recreatingSubaccount} alt=\"Animation of an alien in space with a computer deleting and re-writing the account crossword.friend.testnet Art by 3one9.near\" width=\"600\"/>\n    <figcaption>Art by <a href=\"https://twitter.com/3one92\" target=\"_blank\" rel=\"noopener noreferrer\">3one9.near</a></figcaption>\n</figure>\n<br/>\n\nHere's how to delete and recreate the subaccount using NEAR CLI:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Delete the subaccount and send remaining balance to friend.testnet\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n  \n  # Create the subaccount again\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Delete the subaccount and send remaining balance to friend.testnet\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # Create the subaccount again\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nDeploy, calling the \"new\" method with the parameter for owner_id:\n```bash\ncargo near deploy crossword.friend.testnet with-init-call new json-args '{\"owner_id\": \"crossword.friend.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nNow we're ready to construct our new crossword puzzle and add it via the `new_puzzle` method. Let's start with the clues for this new puzzle.\n\n## The clues\n\nWe're going to use these clues below for our improved puzzle.", "mimetype": "text/plain", "start_char_idx": 2066, "end_char_idx": 4130, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557": {"__data__": {"id_": "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68e70ddc-0f2a-409e-8b73-c8199d2b060a", "node_type": "1", "metadata": {}, "hash": "01f2800d6c1ba6fc9f01a5446dfe9a3e551f31a5c93f21784f545578ffcc7659", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce", "node_type": "1", "metadata": {}, "hash": "824d789b7c038a9e2fbc62db097c0672c9a76e9fd27452d8099b0b8a310d1629", "class_name": "RelatedNodeInfo"}}, "text": "The **Answer** column will not get sent to the smart contract when we call `new_puzzle`.\n\n| Number | Answer    | Clue | (x, y) coords | length |\n| ----------- | ----------- | ----------- | ----------- | ----------- |\n| 1 | paras | NFT market on NEAR that specializes in cards and comics. | (1, 1) | 5 |\n| 2 | rainbowbridge | You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app | (0, 2) | 13 |\n| 3 | mintbase | NFT market on NEAR with art, physical items, tickets, and more. | (9, 1) | 8 |\n| 4 | yoctonear | The smallest denomination of the native token on NEAR. | (3, 8) | 9 |\n| 5 | cli | You typically deploy a smart contract with the NEAR ___ tool. | (5, 8) | 3 |\n\nThe x and y coordinates have their origin in the upper-left side of the puzzle grid, and each row and column start at 0.", "mimetype": "text/plain", "start_char_idx": 4131, "end_char_idx": 4964, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce": {"__data__": {"id_": "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557", "node_type": "1", "metadata": {}, "hash": "ea24d7ec9b785b03f1532e55e09faa9db60aa6f947401dd9b6bf9c9d7042c7f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e20ad06b-71e0-4e95-b736-2f39a91b7d0f", "node_type": "1", "metadata": {}, "hash": "547185375efb4e9333b42011b24213aecf44382601a641eaa3f1562281cd4291", "class_name": "RelatedNodeInfo"}}, "text": "## Solution hash\n\nLet's derive the sha256 hash using an [easy online tool](https://www.wolframalpha.com/input/?i=sha256+%22paras+rainbowbridge+mintbase+yoctonear+cli%22) (there are many other offline methods as well) to discover the solution hash:\n\n```\n    d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\n```\n\n## Add the puzzle\n\nAdd a new puzzle using NEAR CLI with this long command, replacing `crossword.friend.testnet` with your subaccount:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call crossword.friend.testnet new_puzzle '{\n      \"solution_hash\": \"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\",\n      \"answers\": [\n      {\n        \"num\": 1,\n        \"start\": {\n          \"x\": 1,\n          \"y\": 1\n        },\n        \"direction\": \"Down\",\n        \"length\": 5,\n        \"clue\": \"NFT market on NEAR that specializes in cards and comics.\"\n      },\n      {\n        \"num\": 2,\n        \"start\": {\n          \"x\": 0,\n          \"y\": 2\n        },\n        \"direction\": \"Across\",\n        \"length\": 13,\n        \"clue\": \"You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app\"\n      },\n      {\n        \"num\": 3,\n        \"start\": {\n          \"x\": 9,\n          \"y\": 1\n        },\n        \"direction\": \"Down\",\n        \"length\": 8,\n        \"clue\": \"NFT market on NEAR with art, physical items, tickets, and more.\"\n      },\n      {\n        \"num\": 4,\n        \"start\": {\n          \"x\": 3,\n          \"y\": 8\n        },\n        \"direction\": \"Across\",\n        \"length\": 9,\n        \"clue\": \"The smallest denomination of the native token on NEAR.\"", "mimetype": "text/plain", "start_char_idx": 4966, "end_char_idx": 6607, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e20ad06b-71e0-4e95-b736-2f39a91b7d0f": {"__data__": {"id_": "e20ad06b-71e0-4e95-b736-2f39a91b7d0f", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce", "node_type": "1", "metadata": {}, "hash": "824d789b7c038a9e2fbc62db097c0672c9a76e9fd27452d8099b0b8a310d1629", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "51d405a5-24c4-467a-a5b9-c1ffb9e7b34d", "node_type": "1", "metadata": {}, "hash": "fe82234f8b7fd6a8abba623d18560f9a04a71baf754aba417a0c4cf1b8c885c1", "class_name": "RelatedNodeInfo"}}, "text": "},\n      {\n        \"num\": 5,\n        \"start\": {\n          \"x\": 5,\n          \"y\": 8\n        },\n        \"direction\": \"Down\",\n        \"length\": 3,\n        \"clue\": \"You typically deploy a smart contract with the NEAR ___ tool.\"\n      }\n      ]\n    }' --gas 100000000000000 --accountId crossword.friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction crossword.friend.testnet new_puzzle json-args '{\n      \"solution_hash\": \"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\",\n      \"answers\": [\n      {\n        \"num\": 1,\n        \"start\": {\n          \"x\": 1,\n          \"y\": 1\n        },\n        \"direction\": \"Down\",\n        \"length\": 5,\n        \"clue\": \"NFT market on NEAR that specializes in cards and comics.\"\n      },\n      {\n        \"num\": 2,\n        \"start\": {\n          \"x\": 0,\n          \"y\": 2\n        },\n        \"direction\": \"Across\",\n        \"length\": 13,\n        \"clue\": \"You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app\"\n      },\n      {\n        \"num\": 3,\n        \"start\": {\n          \"x\": 9,\n          \"y\": 1\n        },\n        \"direction\": \"Down\",\n        \"length\": 8,\n        \"clue\": \"NFT market on NEAR with art, physical items, tickets, and more.\"\n      },\n      {\n        \"num\": 4,\n        \"start\": {\n          \"x\": 3,\n          \"y\": 8\n        },\n        \"direction\": \"Across\",\n        \"length\": 9,\n        \"clue\": \"The smallest denomination of the native token on NEAR.\"", "mimetype": "text/plain", "start_char_idx": 6614, "end_char_idx": 8138, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "51d405a5-24c4-467a-a5b9-c1ffb9e7b34d": {"__data__": {"id_": "51d405a5-24c4-467a-a5b9-c1ffb9e7b34d", "embedding": null, "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "527ef4f5-e248-4215-9097-1adb73311286", "node_type": "4", "metadata": {}, "hash": "6e86a151b9269afb0acad98f0c1f5c4961ef70c42f3d07ec56c0a9c70ad0c10b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e20ad06b-71e0-4e95-b736-2f39a91b7d0f", "node_type": "1", "metadata": {}, "hash": "547185375efb4e9333b42011b24213aecf44382601a641eaa3f1562281cd4291", "class_name": "RelatedNodeInfo"}}, "text": "},\n      {\n        \"num\": 5,\n        \"start\": {\n          \"x\": 5,\n          \"y\": 8\n        },\n        \"direction\": \"Down\",\n        \"length\": 3,\n        \"clue\": \"You typically deploy a smart contract with the NEAR ___ tool.\"\n      }\n      ]\n    }' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as crossword.friend.testnet network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNote that our contract name and the account we're calling this from are both `crossword.friend.testnet`. That's because we added a check at the top of `new_puzzle` to make sure the predecessor is the `owner_id`.\n\nNow our smart contract has information about this second crossword puzzle.\n\nLet's explore how to make our frontend have a login button and truly turn this into a decentralized app (dApp)!", "mimetype": "text/plain", "start_char_idx": 8145, "end_char_idx": 8953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "22de840e-9a1c-4fd9-8ce0-e1862e444bee": {"__data__": {"id_": "22de840e-9a1c-4fd9-8ce0-e1862e444bee", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d", "node_type": "1", "metadata": {}, "hash": "12985c9214584f55955cdace60321c93e2f82722c5e5320f78573806c28462e8", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: royalty\ntitle: Royalty\nsidebar_label: Royalty\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial you'll continue building your non-fungible token (NFT) smart contract, and learn how to implement perpetual royalties into your NFTs. This will allow people to get a percentage of the purchase price when an NFT is sold.\n\n\n\n## Introduction\n\nBy now, you should have a fully fledged NFT contract, except for the royalties support.\nTo get started, either switch to the `5.approval` branch from our [GitHub repository](https://github.com/near-examples/nft-tutorial-js/), or continue your work from the previous tutorials.\n\n```bash\ngit checkout 5.approval\n```\n\n:::tip\nIf you wish to see the finished code for this _Royalty_ tutorial, you can find it on the `6.royalty` branch.\n:::\n\n## Thinking about the problem\n\nIn order to implement the functionality, you first need to understand how NFTs are sold. In the previous tutorial, you saw how someone with an NFT could list it on a marketplace using the `nft_approve` function by passing in a message that could be properly decoded. When a user purchases your NFT on the marketplace, what happens?\n\nUsing the knowledge you have now, a reasonable conclusion would be to say that the marketplace transfers the NFT to the buyer by performing a cross-contract call and invokes the NFT contract's `nft_transfer` method. Once that function finishes, the marketplace would pay the seller for the correct amount that the buyer paid.\n\nLet's now think about how this can be expanded to allow for a cut of the pay going to other accounts that aren't just the seller.\n\n### Expanding the current solution\n\nSince perpetual royalties will be on a per-token basis, it's safe to assume that you should be changing the `Token` and `JsonToken` structs. You need some way of keeping track of what percentage each account with a royalty should have. If you introduce a map of an account to an integer, that should do the trick.\n\nNow, you need some way to relay that information to the marketplace.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2117, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d": {"__data__": {"id_": "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "22de840e-9a1c-4fd9-8ce0-e1862e444bee", "node_type": "1", "metadata": {}, "hash": "5c3b94ee0f66fb48070f5e43d292a105165951be8fcf6a4f98eba3079d562306", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2702a95e-d167-472f-8a48-393f3c730574", "node_type": "1", "metadata": {}, "hash": "10096c4284627146f92290aacd3526ba700f6b97bec804e10468839eb6394434", "class_name": "RelatedNodeInfo"}}, "text": "This method should be able to transfer the NFT exactly like the old solution but with the added benefit of telling the marketplace exactly what accounts should be paid what amounts. If you implement a method that transfers the NFT and then calculates exactly what accounts get paid and to what amount based on a passed-in balance, that should work nicely.\n\nThis is what the [royalty standards](https://nomicon.io/Standards/NonFungibleToken/Payout) outlined. Let's now move on and modify our smart contract to introduce this behavior.\n\n## Modifications to the contract\n\nThe first thing you'll want to do is add the royalty information to the structs. Open the `nft-contract/src/metadata.ts` file and add `royalty` to the `Token` and `JsonToken` structs:\n\n```js\nroyalty: { [accountId: string]: number };\n```\n\nSecond, you'll want to add `royalty` to the `JsonToken` struct as well:\n\n<Github language=\"js\" start=\"106\" end=\"166\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/metadata.ts\" />\n\n### Internal helper function\n\n**royaltyToPayout**\n\nTo simplify the payout calculation, let's add a helper `royaltyToPayout` function to `src/internal.ts`. This will convert a percentage to the actual amount that should be paid. In order to allow for percentages less than 1%, you can give 100% a value of `10,000`. This means that the minimum percentage you can give out is 0.01%, or `1`. For example, if you wanted the account `benji.testnet` to have a perpetual royalty of 20%, you would insert the pair `\"benji.testnet\": 2000` into the payout map.\n\n<Github language=\"js\" start=\"13\" end=\"16\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/internal.ts\" />\n\nIf you were to use the `royaltyToPayout` function and pass in `2000` as the `royaltyPercentage` and an `amountToPay` of 1 NEAR, it would return a value of 0.2 NEAR.", "mimetype": "text/plain", "start_char_idx": 2118, "end_char_idx": 4006, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2702a95e-d167-472f-8a48-393f3c730574": {"__data__": {"id_": "2702a95e-d167-472f-8a48-393f3c730574", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d", "node_type": "1", "metadata": {}, "hash": "12985c9214584f55955cdace60321c93e2f82722c5e5320f78573806c28462e8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "baffb0fe-7b8e-4987-b197-f8b870eadc08", "node_type": "1", "metadata": {}, "hash": "b2e217ed8738535664f5bc99ecaadb8443f4b5205b306abd098cc2ab7cfb5b48", "class_name": "RelatedNodeInfo"}}, "text": "### Royalties\n\n**nft_payout**\n\nLet's now implement a method to check what accounts will be paid out for an NFT given an amount, or balance. Open the `nft-contract/src/royalty.ts` file, and modify the `internalNftPayout` function as shown.\n\n<Github language=\"js\" start=\"7\" end=\"53\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/royalty.ts\" />\n\nThis function will loop through the token's royalty map and take the balance and convert that to a payout using the `royaltyToPayout` function you created earlier. It will give the owner of the token whatever is left from the total royalties. As an example:\n\nYou have a token with the following royalty field:\n\n```js\nToken {\n    owner_id: \"damian\",\n    royalty: {\n        \"benji\": 1000,\n        \"josh\": 500,\n        \"mike\": 2000\n    }\n}\n```\n\nIf a user were to call `nft_payout` on the token and pass in a balance of 1 NEAR, it would loop through the token's royalty field and insert the following into the payout object:\n\n```js\nPayout {\n    payout: {\n        \"benji\": 0.1 NEAR,\n        \"josh\": 0.05 NEAR,\n        \"mike\": 0.2 NEAR\n    }\n}\n```\n\nAt the very end, it will insert `damian` into the payout object and give him `1 NEAR - 0.1 - 0.05 - 0.2 = 0.65 NEAR`.\n\n**nft_transfer_payout**\n\nNow that you know how payouts are calculated, it's time to create the function that will transfer the NFT and return the payout to the marketplace.\n\n<Github language=\"js\" start=\"55\" end=\"121\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/royalty.ts\" />\n\n### Perpetual royalties\n\nTo add support for perpetual royalties, let's edit the `src/mint.ts` file. First, add an optional parameter for perpetual royalties.", "mimetype": "text/plain", "start_char_idx": 4008, "end_char_idx": 5729, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "baffb0fe-7b8e-4987-b197-f8b870eadc08": {"__data__": {"id_": "baffb0fe-7b8e-4987-b197-f8b870eadc08", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2702a95e-d167-472f-8a48-393f3c730574", "node_type": "1", "metadata": {}, "hash": "10096c4284627146f92290aacd3526ba700f6b97bec804e10468839eb6394434", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6bcf360b-dd0e-4e65-a06a-561d4f44dcab", "node_type": "1", "metadata": {}, "hash": "93c167d5bd02bc44726eceac9f943e7cafd36e5f606215843ce82158366828e7", "class_name": "RelatedNodeInfo"}}, "text": "This is what will determine what percentage goes to which accounts when the NFT is purchased. You will also need to create and insert the royalty to be put in the `Token` object:\n\n<Github language=\"js\" start=\"7\" end=\"64\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/mint.ts\" />\n\n### Adding royalty object to struct implementations\n\nSince you've added a new field to your `Token` and `JsonToken` structs, you need to edit your implementations accordingly. Move to the `nft-contract/src/internal.ts` file and edit the part of your `internalTransfer` function that creates the new `Token` object:\n\n<Github language=\"js\" start=\"150\" end=\"158\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/internal.ts\" />\n\nOnce that's finished, move to the `nft-contract/src/nft_core.ts` file. You need to edit your implementation of `internalNftToken` so that the `JsonToken` sends back the new royalty information.\n\n<Github language=\"js\" start=\"10\" end=\"37\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/6.royalty/src/nft-contract/nft_core.ts\" />\n\nNext, you can use the CLI to query the new `nft_payout` function and validate that it works correctly.\n\n## Deploying the contract {#redeploying-contract}\n\nAs you saw in the previous tutorial, adding changes like these will cause problems when redeploying. Since these changes affect all the other tokens and the state won't be able to automatically be inherited by the new code, simply redeploying the contract will lead to errors. For this reason, you'll create a new sub-account again.\n\n### Creating a sub-account\n\nRun the following command to create a sub-account `royalty` of your main account with an initial balance of 25 NEAR which will be transferred from the original to your new account.", "mimetype": "text/plain", "start_char_idx": 5730, "end_char_idx": 7550, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bcf360b-dd0e-4e65-a06a-561d4f44dcab": {"__data__": {"id_": "6bcf360b-dd0e-4e65-a06a-561d4f44dcab", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "baffb0fe-7b8e-4987-b197-f8b870eadc08", "node_type": "1", "metadata": {}, "hash": "b2e217ed8738535664f5bc99ecaadb8443f4b5205b306abd098cc2ab7cfb5b48", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ecc7b185-baa6-4af6-b25e-13c0acfd9e27", "node_type": "1", "metadata": {}, "hash": "ef32bcdebc81ac597c89b0d03bbf925e8f237ffa32a59e864e137aaec871da0b", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear create-account royalty.$NFT_CONTRACT_ID --masterAccount $NFT_CONTRACT_ID --initialBalance 25\n```\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport ROYALTY_NFT_CONTRACT_ID=royalty.$NFT_CONTRACT_ID\n```\n\nUsing the build script, build the deploy the contract as you did in the previous tutorials:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $ROYALTY_NFT_CONTRACT_ID\n```\n\n### Initialization and minting {#initialization-and-minting}\n\nSince this is a new contract, you'll need to initialize and mint a token. Use the following command to initialize the contract:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $ROYALTY_NFT_CONTRACT_ID init '{\"owner_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\"}' --accountId $ROYALTY_NFT_CONTRACT_ID\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $ROYALTY_NFT_CONTRACT_ID init json-args '{\"owner_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $ROYALTY_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNext, you'll need to mint a token. By running this command, you'll mint a token with a token ID `\"royalty-token\"` and the receiver will be your new account. In addition, you're passing in a map with two accounts that will get perpetual royalties whenever your token is sold.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $ROYALTY_NFT_CONTRACT_ID nft_mint '{\"token_id\": \"approval-token\", \"metadata\": {\"title\": \"Approval Token\", \"description\": \"testing out the new approval extension of the standard\",", "mimetype": "text/plain", "start_char_idx": 7552, "end_char_idx": 9304, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ecc7b185-baa6-4af6-b25e-13c0acfd9e27": {"__data__": {"id_": "ecc7b185-baa6-4af6-b25e-13c0acfd9e27", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6bcf360b-dd0e-4e65-a06a-561d4f44dcab", "node_type": "1", "metadata": {}, "hash": "93c167d5bd02bc44726eceac9f943e7cafd36e5f606215843ce82158366828e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "811ffbcf-f542-45b6-8bad-250b9719f56e", "node_type": "1", "metadata": {}, "hash": "80b312b0a13444cd3e43fc3d9dc4b6afe632704e40c8f29c69efa000cbc6e92f", "class_name": "RelatedNodeInfo"}}, "text": "\"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\", \"perpetual_royalties\": {\"benjiman.testnet\": 2000, \"mike.testnet\": 1000, \"josh.testnet\": 500}}' --accountId $ROYALTY_NFT_CONTRACT_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $ROYALTY_NFT_CONTRACT_ID nft_mint json-args '{\"token_id\": \"approval-token\", \"metadata\": {\"title\": \"Approval Token\", \"description\": \"testing out the new approval extension of the standard\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\", \"perpetual_royalties\": {\"benjiman.testnet\": 2000, \"mike.testnet\": 1000, \"josh.testnet\": 500}}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $ROYALTY_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou can check to see if everything went through properly by calling one of the enumeration functions:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $ROYALTY_NFT_CONTRACT_ID nft_tokens_for_owner '{\"account_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\",", "mimetype": "text/plain", "start_char_idx": 9305, "end_char_idx": 10610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "811ffbcf-f542-45b6-8bad-250b9719f56e": {"__data__": {"id_": "811ffbcf-f542-45b6-8bad-250b9719f56e", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ecc7b185-baa6-4af6-b25e-13c0acfd9e27", "node_type": "1", "metadata": {}, "hash": "ef32bcdebc81ac597c89b0d03bbf925e8f237ffa32a59e864e137aaec871da0b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2817e6ed-8f35-4ec0-abfd-7c50be98bc74", "node_type": "1", "metadata": {}, "hash": "aa5d08d771979c2023d9877338916414ab84f8ff9fb5baea5ffbf592f7511d83", "class_name": "RelatedNodeInfo"}}, "text": "\"limit\": 10}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $ROYALTY_NFT_CONTRACT_ID nft_tokens_for_owner json-args '{\"account_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\", \"limit\": 10}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```json\n[\n  {\n    \"token_id\": \"approval-token\",\n    \"owner_id\": \"royalty.goteam.examples.testnet\",\n    \"metadata\": {\n      \"title\": \"Approval Token\",\n      \"description\": \"testing out the new approval extension of the standard\",\n      \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"\n    },\n    \"approved_account_ids\": {},\n    \"royalty\": {\n      \"josh.testnet\": 500,\n      \"benjiman.testnet\": 2000,\n      \"mike.testnet\": 1000\n    }\n  }\n]\n```\n\nNotice how there's now a royalty field that contains the 3 accounts that will get a combined 35% of all sales of this NFT? Looks like it works! Go team :)\n\n### NFT payout\n\nLet's calculate the payout for the `\"approval-token\"` NFT, given a balance of 100 yoctoNEAR. It's important to note that the balance being passed into the `nft_payout` function is expected to be in yoctoNEAR.", "mimetype": "text/plain", "start_char_idx": 10611, "end_char_idx": 11853, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2817e6ed-8f35-4ec0-abfd-7c50be98bc74": {"__data__": {"id_": "2817e6ed-8f35-4ec0-abfd-7c50be98bc74", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "811ffbcf-f542-45b6-8bad-250b9719f56e", "node_type": "1", "metadata": {}, "hash": "80b312b0a13444cd3e43fc3d9dc4b6afe632704e40c8f29c69efa000cbc6e92f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f7e3d6a3-f0b3-4699-9bcc-f107437939b2", "node_type": "1", "metadata": {}, "hash": "0f73f1f7f333375902f30fb5c2c50820a79fd35bc8f24bdc7b4e6187e64e0bae", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $ROYALTY_NFT_CONTRACT_ID nft_payout '{\"token_id\": \"approval-token\", \"balance\": \"100\", \"max_len_payout\": 100}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $ROYALTY_NFT_CONTRACT_ID nft_payout json-args '{\"token_id\": \"approval-token\", \"balance\": \"100\", \"max_len_payout\": 100}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nThis command should return an output similar to the following:\n\n```bash\n{\n  payout: {\n    'josh.testnet': '5',\n    'royalty.goteam.examples.testnet': '65',\n    'mike.testnet': '10',\n    'benjiman.testnet': '20'\n  }\n}\n```\n\nIf the NFT was sold for 100 yoctoNEAR, josh would get 5, benji would get 20, mike would get 10, and the owner, in this case `royalty.goteam.examples.testnet` would get the rest: 65.\n\n## Conclusion\n\nAt this point you have everything you need for a fully functioning NFT contract to interact with marketplaces.\nThe last remaining standard that you could implement is the events standard. This allows indexers to know what functions are being called and makes it easier and more reliable to keep track of information that can be used to populate the collectibles tab in the wallet for example.\n\n:::info remember\nIf you want to see the finished code from this tutorial, you can checkout the `6.royalty` branch.", "mimetype": "text/plain", "start_char_idx": 11855, "end_char_idx": 13275, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f7e3d6a3-f0b3-4699-9bcc-f107437939b2": {"__data__": {"id_": "f7e3d6a3-f0b3-4699-9bcc-f107437939b2", "embedding": null, "metadata": {"file_path": "./near_dist/6-royalty.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32", "node_type": "4", "metadata": {}, "hash": "984c29e6c75042b9908a01f525c0b83f41189a5e8bf7086fd9e249cf5808342c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2817e6ed-8f35-4ec0-abfd-7c50be98bc74", "node_type": "1", "metadata": {}, "hash": "aa5d08d771979c2023d9877338916414ab84f8ff9fb5baea5ffbf592f7511d83", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Enumeration standard: [NEP181](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration), version `1.0.0`\n- Royalties standard: [NEP199](https://nomicon.io/Standards/Tokens/NonFungibleToken/Payout), version `2.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 13276, "end_char_idx": 13746, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "043894b2-db48-445a-8bdd-5780da37858a": {"__data__": {"id_": "043894b2-db48-445a-8bdd-5780da37858a", "embedding": null, "metadata": {"file_path": "./near_dist/what-is.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2e276c8b-65d4-4e79-ab74-72917b0a2283", "node_type": "4", "metadata": {}, "hash": "eda5cb647ab5118e479b5d9cd55f07b4921ca0eda3a27afffaa23e614af87d4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c41a7805-4d6e-460e-9c41-0a03be8bbd5c", "node_type": "1", "metadata": {}, "hash": "1b621cde6189f19b3aefdd189bf94c61d70998d0031aa7f66c4eab10d0e1c90c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: what-is\ntitle: What is Chain Abstraction? \n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThe idea behind `chain abstraction` is quite simple: **blockchain** technology should be **abstracted away** from the user experience. In other words, people should **not realize** when they are **using a blockchain**, nor **which blockchain** they are using.\n\n![img](/docs/assets/welcome-pages/chain-abstraction-landing.png)\n\nTo help on this task, NEAR Protocol provides services that allow to **create** and **recover accounts** using **email addresses**, use the account **without acquiring funds**, and **control accounts** in **other chains**. All in the most **seamless** way possible.\n\n---\n\n## Fast-Auth: Email onboarding\nOne of the first barriers that new users face when entering the world of Web3 is the need to create a crypto wallet. This generally implies the need to choose a wallet, create and store a recovery phrase, and obtain deposit funds to start using the account.\n\nWith FastAuth, users only need to provide an email address to create a NEAR account. Using the same email address the user will be able to use their account across applications and devices.\n\n:::info\nFastAuth accounts are kept safe through multi-party computation (MPC) on a decentralized network. This means that the user's private key is never stored in a single location, and thus it is never exposed to any single party.\n:::\n\n<hr subclass=\"subsection\" />\n\n## Relayers: Cover gas fees\nAllowing users to start using a dApp without having to acquire funds is a powerful tool to increase user adoption. NEAR Protocol provides a service that allows developers to subsidize gas fees for their users.\n\nThis concept, known as \"Account Abstraction\" in other chains, is a **built-in feature** in NEAR. User can wrap transactions in messages known as **meta-transaction**, that any other account can relay to the network.\n\n:::tip\nIn NEAR the relayers simply attach NEAR to cover gas fees, and pass the transaction to the network. There, the transaction is executed as if the **user had sent it**.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2176, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c41a7805-4d6e-460e-9c41-0a03be8bbd5c": {"__data__": {"id_": "c41a7805-4d6e-460e-9c41-0a03be8bbd5c", "embedding": null, "metadata": {"file_path": "./near_dist/what-is.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2e276c8b-65d4-4e79-ab74-72917b0a2283", "node_type": "4", "metadata": {}, "hash": "eda5cb647ab5118e479b5d9cd55f07b4921ca0eda3a27afffaa23e614af87d4c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "043894b2-db48-445a-8bdd-5780da37858a", "node_type": "1", "metadata": {}, "hash": "1d921d1919249cc53b8782fff23b7904e27bbd1e92ed58915d99546ab4fdf587", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n<hr subclass=\"subsection\" />\n\n## Multi-chain signatures: One account, multiple chains \nCurrently, users and applications are siloed in different chains. This means that a user needs to create a new account for each chain they want to use. This is not only cumbersome for the user, but also for the developer who needs to maintain different codebases for each chain.\n\nNEAR Protocol provides a multi-chain signature service that allows users to use their NEAR Account to sign transactions in **other chains**. This means that a user can use the same account to interact with **Ethereum**, **Binance Smart Chain**, **Avalanche**, and **NEAR**.\n\n:::info\nMulti-chain signatures work by combining **smart contracts** that produce signatures, with indexers that listen for these signatures, and relayers that submit the transactions to other networks. This allows users to hold assets and use applications in **any** network, only needing to have a single NEAR account.\n:::\n\n---\n\n## Chain Abstraction: The Holistic View\n\nThe combination of these services allows to create a **seamless** user experience, in which users can use blockchain-based applications without realizing they are using a blockchain.\n\nUsers will simply login with an email, and a **zero-fund** account will be created for them. No seed phrases to remember, no private keys to safe keep, and no need to acquire funds.\n\nOnce having their account, apps can ask the user to create meta-transactions and send them to any relayer. The relayer will pass the transaction to the network, attaching NEAR to pay for the execution fees. The transaction will then be executed as if the user had sent it, since the relayer is only there to attach NEAR to the submission.   \n\nIf the user wants to interact with other blockchains, they can use their account to interact with a multi-chain signature relayer, which will relay the transaction to the right network, covering GAS fees.\n\nAs an example, this would allow users to collect NFTs across different chains, without ever needing to explicitly create an account or acquire crypto. All with just a single email login.", "mimetype": "text/plain", "start_char_idx": 2177, "end_char_idx": 4298, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4b0fccaf-3568-466f-913f-fd7413cac57f": {"__data__": {"id_": "4b0fccaf-3568-466f-913f-fd7413cac57f", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8f676efa-23af-4bd1-80f1-5bb586ecefbd", "node_type": "1", "metadata": {}, "hash": "c84001fe9956f30ecf3a27be57b2275d4a110464b2201e6c4a40f2141471e93f", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: queryapi-websockets\ntitle: WebSocket-enabled Components with QueryAPI\nsidebar_label: WebSockets & QueryAPI\n---\n\nIn this article you'll learn how to create a NEAR component that gathers information from a [QueryAPI indexer](../../2.build/6.data-infrastructure/query-api/intro.md) using WebSockets.\nIn this example, the QueryAPI indexer monitors the widget activity on the blockchain, and the NEAR component gets that information using WebSockets.\n\n:::info\n\n[QueryAPI](../../2.build/6.data-infrastructure/query-api/intro.md) is a fully managed solution to build indexer functions, extract on-chain data, store it in a database, and be able to query it using GraphQL endpoints.\n\n:::\n\n## QueryAPI indexer\n\nThe [Widget Activity indexer](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=roshaan.near/widget-activity-feed) keeps track of any widget activity on the `social.near` smart contract. Whenever a Widget transaction is found, the data is stored in a Postgres database.\n\n### DB schema\n\nThe schema for the indexer's database is pretty simple:\n\n```sql title=schema.sql\nCREATE TABLE\n  \"widget_activity\" (\n    \"id\" SERIAL NOT NULL,\n    \"account_id\" VARCHAR NOT NULL,\n    \"widget_name\" VARCHAR NOT NULL,\n    \"block_height\" DECIMAL(58, 0) NOT NULL,\n    \"receipt_id\" VARCHAR NOT NULL,\n    \"block_timestamp\" DECIMAL(20, 0) NOT NULL,\n    CONSTRAINT \"widgets_pkey\" PRIMARY KEY (\"id\")\n  );\n\nCREATE INDEX\n  idx_widget_activity_block_timestamp ON widget_activity (block_timestamp);\n```\n\n### Indexer logic\n\nIn the following code snippet, you can find the simple indexer logic that filters widget transactions from the `social.near` smart contract, and if it finds widget development activity, then it adds a record to the `widget_activity` table defined previously.\n\n:::tip\n\nTo learn more, check the complete source code of the [Widget Activity indexer](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=roshaan.near/widget-activity-feed).\n\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1998, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8f676efa-23af-4bd1-80f1-5bb586ecefbd": {"__data__": {"id_": "8f676efa-23af-4bd1-80f1-5bb586ecefbd", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4b0fccaf-3568-466f-913f-fd7413cac57f", "node_type": "1", "metadata": {}, "hash": "9442cf3e01e4f02dcee6c8f82f8a921d0ee427a8ca45655a024565d241fd69e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84020472-2075-4822-9371-821c8035d0b0", "node_type": "1", "metadata": {}, "hash": "3ffad040cad601a5bf3a7f15302689e55186bce5a8a93d009bfd9a7a9f9feee2", "class_name": "RelatedNodeInfo"}}, "text": "```js title=indexerLogic.js\n  // Add your code here\n  const SOCIAL_DB = \"social.near\";\n\n  const nearSocialWidgetTxs = block\n    .actions()\n    .filter((action) => action.receiverId === SOCIAL_DB)\n    .flatMap((action) =>\n      action.operations\n        .map((operation) => operation[\"FunctionCall\"])\n        .filter((operation) => operation?.methodName === \"set\")\n        .map((functionCallOperation) => ({\n          ...functionCallOperation,\n          args: base64decode(functionCallOperation.args),\n          receiptId: action.receiptId, // providing receiptId as we need it\n        }))\n        .filter((functionCall) => {\n          const accountId = Object.keys(functionCall.args.data)[0];\n          return Object.keys(functionCall.args.data[accountId]).includes(\n            \"widget\"\n          );\n        })\n    );\n\n  if (nearSocialWidgetTxs.length > 0) {\n    console.log(\"Found NEAR Widget Development Activity...\");\n    const blockHeight = block.blockHeight;\n    const blockTimestamp = block.header().timestampNanosec;\n    console.log(nearSocialWidgetTxs);\n    await Promise.all(\n      nearSocialWidgetTxs.map(async (widgetEditTx) => {\n        const accountId = Object.keys(widgetEditTx.args.data)[0];\n        const widgetName = Object.keys(\n          widgetEditTx.args.data[accountId][\"widget\"]\n        )[0];\n\n        console.log(`ACCOUNT_ID: ${accountId}`);\n        console.log(widgetName);\n        await handleWidgetTx(\n          accountId,\n          widgetName,\n          blockHeight,\n          blockTimestamp,\n          widgetEditTx.receiptId\n        );\n        console.log(widgetEditTx);\n      })\n    );\n  }\n}\n```\n\n---\n\nThis is the JS function that calls the GraphQL mutation `InsertWidgetActivity` and adds a record to the `widget_activity` table:\n\n:::tip\n\nLearn more about [QueryAPI indexing functions](../../2.build/6.data-infrastructure/query-api/index-function.md) and how to build your own indexers.", "mimetype": "text/plain", "start_char_idx": 2001, "end_char_idx": 3918, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84020472-2075-4822-9371-821c8035d0b0": {"__data__": {"id_": "84020472-2075-4822-9371-821c8035d0b0", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8f676efa-23af-4bd1-80f1-5bb586ecefbd", "node_type": "1", "metadata": {}, "hash": "c84001fe9956f30ecf3a27be57b2275d4a110464b2201e6c4a40f2141471e93f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "da6ac31b-6943-42a2-8a83-c4ca037f6c5e", "node_type": "1", "metadata": {}, "hash": "db52c7cb761d472c0ce7584ef201ff27fe8ead5519e949702275ef3e5701a954", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n```js title=indexerLogic.js\n  async function handleWidgetTx(\n    accountId,\n    widgetName,\n    blockHeight,\n    blockTimestamp,\n    receiptId\n  ) {\n    console.log(accountId, blockHeight, blockTimestamp, receiptId);\n    try {\n      const mutationData = {\n        activity: {\n          account_id: accountId,\n          widget_name: widgetName,\n          block_height: blockHeight,\n          block_timestamp: blockTimestamp,\n          receipt_id: receiptId,\n        },\n      };\n      await context.graphql(\n        `mutation InsertWidgetActivity($activity: roshaan_near_widget_activity_feed_widget_activity_insert_input = {}) {\n  insert_roshaan_near_widget_activity_feed_widget_activity_one(object: $activity) {\n    id\n  }\n}`,\n        mutationData\n      );\n    } catch (e) {\n      console.log(`Could not add widget activity to DB, ${e}`);\n    }\n  }\n```\n\n## Using WebSockets\n\nOnce you have a QueryAPI indexer running, you can use WebSockets to get the data in your NEAR Component. You only need to create a `WebSocket` object pointing to the QueryAPI's GraphQL endpoint.\n\n### Setup\n\nHere's a code snippet from the NEAR component that subscribes and processes any activity from the [Widget Activity indexer](#queryapi-indexer):\n\n:::tip\n\nThe code below is only a snippet. If you want the full source code to play around with the component, you can fork the [Widget Activity Feed source code](https://near.org#/near/widget/ComponentDetailsPage?src=roshaan.near/widget/query-api-widget-feed) and build your own NEAR component.\n\n:::\n\n```js\nconst GRAPHQL_ENDPOINT = \"near-queryapi.api.pagoda.co\";\n\nconst LIMIT = 10;\nconst accountId = props.accountId || \"roshaan.near\" || context.accountId;\n\nState.init({\n  widgetActivities: [],\n  widgetActivityCount: 0,\n  startWebSocketWidgetActivity: null,\n  initialFetch: false,\n  soundEffect:\n    \"https://bafybeic7uvzmhuwjficgctpleov5i43rteavwmktyyjrauwi346ntgja4a.ipfs.nftstorage.link/\",\n});", "mimetype": "text/plain", "start_char_idx": 3920, "end_char_idx": 5847, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "da6ac31b-6943-42a2-8a83-c4ca037f6c5e": {"__data__": {"id_": "da6ac31b-6943-42a2-8a83-c4ca037f6c5e", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "84020472-2075-4822-9371-821c8035d0b0", "node_type": "1", "metadata": {}, "hash": "3ffad040cad601a5bf3a7f15302689e55186bce5a8a93d009bfd9a7a9f9feee2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4d757e98-f19f-4ddf-9c04-18793ee90a19", "node_type": "1", "metadata": {}, "hash": "f244194a68a64d1ec107e0c615b2e6ff1f527a5e928ffb470cd0851362c7c1fb", "class_name": "RelatedNodeInfo"}}, "text": "const widgetActivitySubscription = `\n  subscription IndexerQuery {\n    roshaan_near_widget_activity_feed_widget_activity(\n      order_by: {block_timestamp: desc}\n      limit: ${LIMIT}\n    ) {\n      account_id\n      block_height\n      block_timestamp\n      id\n      receipt_id\n      widget_name\n    }\n  }\n`;\n\nconst subscriptionWidgetActivity = {\n  type: \"start\",\n  id: \"widgetActivity\", // You can use any unique identifier\n  payload: {\n    operationName: \"IndexerQuery\",\n    query: widgetActivitySubscription,\n    variables: {},\n  },\n};\nfunction processWidgetActivity(activity) {\n  return { .activity };\n}\nfunction startWebSocketWidgetActivity(processWidgetActivities) {\n  let ws = State.get().ws_widgetActivity;\n\n  if (ws) {\n    ws.close();\n    return;\n  }\n\n  ws = new WebSocket(`wss://${GRAPHQL_ENDPOINT}/v1/graphql`, \"graphql-ws\");\n\n  ws.onopen = () => {\n    console.log(`Connection to WS has been established`);\n    ws.send(\n      JSON.stringify({\n        type: \"connection_init\",\n        payload: {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Hasura-Client-Name\": \"hasura-console\",\n            \"x-hasura-role\": \"roshaan_near\",\n          },\n          lazy: true,\n        },\n      })\n    );\n\n    setTimeout(() => ws.send(JSON.stringify(subscriptionWidgetActivity)), 50);\n  };\n\n  ws.onclose = () => {\n    State.update({ ws_widgetActivity: null });\n    console.log(`WS Connection has been closed`);\n  };\n\n  ws.onmessage = (e) => {\n    const data = JSON.parse(e.data);\n    console.log(\"received data\", data);\n    if (data.type === \"data\" && data.id === \"widgetActivity\") {\n      processWidgetActivities(data.payload.data);\n    }\n  };\n\n  ws.onerror = (err) => {\n    State.update({ ws_widgetActivity: null });\n    console.log(\"WebSocket error\", err);\n  };\n\n  State.update({ ws_widgetActivity: ws });", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4d757e98-f19f-4ddf-9c04-18793ee90a19": {"__data__": {"id_": "4d757e98-f19f-4ddf-9c04-18793ee90a19", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da6ac31b-6943-42a2-8a83-c4ca037f6c5e", "node_type": "1", "metadata": {}, "hash": "db52c7cb761d472c0ce7584ef201ff27fe8ead5519e949702275ef3e5701a954", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cc4d8669-70be-4b59-a97f-0075a7183bc4", "node_type": "1", "metadata": {}, "hash": "4db5b442a63bc3439d517b82f3705619287c42bfac782985c4400c420d3f100b", "class_name": "RelatedNodeInfo"}}, "text": "}\n```\n\n:::info\nPay attention to the `subscriptionWidgetActivity` JSON payload.\n:::\n\n---\n\n### Processing\n\nThis is the JS function that process the incoming widget activities generated by the QueryAPI indexer, allowing the NEAR component to create a feed based on the blockchain's widget activity:", "mimetype": "text/plain", "start_char_idx": 7687, "end_char_idx": 7982, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cc4d8669-70be-4b59-a97f-0075a7183bc4": {"__data__": {"id_": "cc4d8669-70be-4b59-a97f-0075a7183bc4", "embedding": null, "metadata": {"file_path": "./near_dist/queryapi-ws.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a", "node_type": "4", "metadata": {}, "hash": "2aa1b867ee850a23ef8d0a30fd8ded88b795685f9f3a5d4b016422389d114ee3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4d757e98-f19f-4ddf-9c04-18793ee90a19", "node_type": "1", "metadata": {}, "hash": "f244194a68a64d1ec107e0c615b2e6ff1f527a5e928ffb470cd0851362c7c1fb", "class_name": "RelatedNodeInfo"}}, "text": ":::tip\n\nYou can fork the [Widget Activity Feed source code](https://near.org#/near/widget/ComponentDetailsPage?src=roshaan.near/widget/query-api-widget-feed) and build your own NEAR component.\n\n:::\n\n```js\nfunction processWidgetActivities(incoming_data) {\n  let incoming_widgetActivities =\n    incoming_data.roshaan_near_widget_activity_feed_widget_activity.flatMap(\n      processWidgetActivity\n    );\n  const newActivities = [\n    ...incoming_widgetActivities.filter((activity) => {\n      return (\n        state.widgetActivities.length == 0 ||\n        activity.block_timestamp > state.widgetActivities[0].block_timestamp\n      );\n    }),\n  ];\n  const prevActivities = state.prevActivities || [];\n  State.update({ widgetActivities: [...newActivities, ...prevActivities] });\n}\n\nif (state.ws_widgetActivity === undefined) {\n  State.update({\n    startWebSocketWidgetActivity: startWebSocketWidgetActivity,\n  });\n  state.startWebSocketWidgetActivity(processWidgetActivities);\n}\n```\n\n---\n\n### Rendering\n\nFinally, rendering the activity feed on the NEAR component is straight-forward, by iterating through the `state.widgetActivities` map:\n\n```js\nreturn (\n  <div>\n    <Title>\n      Widget Activity Feed{\" \"}\n      <TextLink href=\"https://dev.near.org/dataplatform.near/widget/QueryApi.App\">\n        {\" \"}\n        Powered By QueryAPI{\" \"}\n      </TextLink>\n    </Title>\n    <RowContainer>\n      {state.widgetActivities.map((activity, i) => (\n        <Card>\n          <div>\n            <Widget\n              src=\"mob.near/widget/TimeAgo\"\n              props={{ blockHeight: activity.block_height }}\n            />{\" \"}\n            ago\n          </div>\n          <CardBody>\n            <div key={i}>\n              <Text bold>Widget Name: {activity.widget_name}</Text>\n              <Text bold>Account ID: {activity.account_id}</Text>\n            </div>\n          </CardBody>\n          <CardFooter>\n            <TextLink\n              href={`/#/near/widget/ComponentDetailsPage?src=${activity.account_id}/widget/${activity.widget_name}`}\n            >\n              View\n            </TextLink>\n          </CardFooter>\n        </Card>\n      ))}\n    </RowContainer>\n  </div>\n);\n```\n\n---", "mimetype": "text/plain", "start_char_idx": 7985, "end_char_idx": 10159, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e4827c90-6eb3-4ae3-ab52-90c2eacc59a7": {"__data__": {"id_": "e4827c90-6eb3-4ae3-ab52-90c2eacc59a7", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6cdb4300-a634-412f-9c1c-1266353f08ab", "node_type": "1", "metadata": {}, "hash": "6654a9080e6abf4998107ad69d4a2c62182d37186458fe20be6e21e826f7b93c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: approvals\ntitle: Approvals\nsidebar_label: Approvals\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial you'll learn the basics of an approval management system which will allow you to grant others access to transfer NFTs on your behalf. This is the backbone of all NFT marketplaces and allows for some complex yet beautiful scenarios to happen. If you're joining us for the first time, feel free to clone [this repository](https://github.com/near-examples/nft-tutorial) and checkout the `4.core` branch to follow along.\n\n\n\n\n```bash\ngit checkout 4.core\n```\n\n:::tip\nIf you wish to see the finished code for this _Approval_ tutorial, you can find it on the `5.approval` branch.\n:::\n\n## Introduction\n\nUp until this point you've created a smart contract that allows users to mint and transfer NFTs as well as query for information using the [enumeration standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration). As we've been doing in the previous tutorials, let's break down the problem into smaller, more digestible, tasks. Let's first define some of the end goals that we want to accomplish as per the [approval management](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement) extension of the standard. We want a user to have the ability to:\n\n- Grant other accounts access to transfer their NFTs on a per token basis.\n- Check if an account has access to a specific token.\n- Revoke a specific account the ability to transfer an NFT.\n- Revoke **all** other accounts the ability to transfer an NFT.\n\nIf you look at all these goals, they are all on a per token basis. This is a strong indication that you should change the `Token` struct which keeps track of information for each token.\n\n## Allow an account to transfer your NFT\n\nLet's start by trying to accomplish the first goal. How can you grant another account access to transfer an NFT on your behalf?\n\nThe simplest way that you can achieve this is to add a list of approved accounts to the `Token` struct.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2099, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6cdb4300-a634-412f-9c1c-1266353f08ab": {"__data__": {"id_": "6cdb4300-a634-412f-9c1c-1266353f08ab", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e4827c90-6eb3-4ae3-ab52-90c2eacc59a7", "node_type": "1", "metadata": {}, "hash": "b6f88de8de25b3e95c733623c944953cf3aaf32e02b0e4f19bfea8ef660812c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfed7c03-84ad-457e-bd13-57a07182a0eb", "node_type": "1", "metadata": {}, "hash": "6524d967bab87cc587cbcea012d00210df59aff3535145a397b0cfe17ad89225", "class_name": "RelatedNodeInfo"}}, "text": "When transferring the NFT, if the caller is not the owner, you could check if they're in the list.\n\nBefore transferring, you would need to clear the list of approved accounts since the new owner wouldn't expect the accounts approved by the original owner to still have access to transfer their new NFT.\n\n### The problem {#the-problem}\n\nOn the surface, this would work, but if you start thinking about the edge cases, some problems arise. Often times when doing development, a common approach is to think about the easiest and most straightforward solution. Once you've figured it out, you can start to branch off and think about optimizations and edge cases.\n\nLet's consider the following scenario. Benji has an NFT and gives two separate marketplaces access to transfer his token. By doing so, he's putting the NFT for sale (more about that in the [marketplace integrations](#marketplace-integrations) section). Let's say he put the NFT for sale for 1 NEAR on both markets. The token's list of approved account IDs would look like the following:\n\n```\nToken: {\n    owner_id: Benji\n    approved_accounts_ids: [marketplace A, marketplace B]\n}\n```\n\nJosh then comes along and purchases the NFT on marketplace A for 1 NEAR. This would take the sale down from the marketplace A and clear the list of approved accounts. Marketplace B, however, still has the token listed for sale for 1 NEAR and has no way of knowing that the token was purchased on marketplace A by Josh. The new token struct would look as follows:\n\n```\nToken: {\n    owner_id: Josh\n    approved_accounts_ids: []\n}\n```\n\nLet's say Josh is low on cash and wants to flip this NFT and put it for sale for 10 times the price on marketplace B. He goes to put it for sale and for whatever reason, the marketplace is built in a way that if you try to put a token up for sale twice, it keeps the old sale data. This would mean that from marketplace B's perspective, the token is still for sale for 1 NEAR (which was the price that Benji had originally listed it for).", "mimetype": "text/plain", "start_char_idx": 2100, "end_char_idx": 4117, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfed7c03-84ad-457e-bd13-57a07182a0eb": {"__data__": {"id_": "bfed7c03-84ad-457e-bd13-57a07182a0eb", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6cdb4300-a634-412f-9c1c-1266353f08ab", "node_type": "1", "metadata": {}, "hash": "6654a9080e6abf4998107ad69d4a2c62182d37186458fe20be6e21e826f7b93c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "618864da-03b1-4089-9034-bbcaacf7a264", "node_type": "1", "metadata": {}, "hash": "a6e6ad10a3da91c955aa976ec1910cf51163cc4d8fc0fd5e3be8c6ee792977a2", "class_name": "RelatedNodeInfo"}}, "text": "Since Josh approved the marketplace to try and put it for sale, the token struct would look as follows:\n\n```\nToken: {\n    owner_id: Josh\n    approved_accounts_ids: [marketplace A, marketplace B]\n}\n```\n\nIf Mike then comes along and purchases the NFT for only 1 NEAR on marketplace B, the marketplace would go to try and transfer the NFT and since technically, Josh approved the marketplace and it's in the list of approved accounts, the transaction would go through properly.\n\n### The solution {#the-solution}\n\nNow that we've identified a problem with the original solution, let's think about ways that we can fix it. What would happen now if, instead of just keeping track of a list of approved accounts, you introduced a specific ID that went along with each approved account. The new approved accounts would now be a map instead of a list. It would map an account to it's `approval id`.\n\nFor this to work, you need to make sure that the approval ID is **always** a unique, new ID. If you set it as an integer that always increases by 1 whenever u approve an account, this should work. Let's consider the same scenario with the new solution.\n\nBenji puts his NFT for sale for 1 NEAR on marketplace A and marketplace B by approving both marketplaces. The \"next approval ID\" would start off at 0 when the NFT was first minted and will increase from there. This would result in the following token struct:\n\n```\nToken: {\n    owner_id: Benji\n    approved_accounts_ids: {\n        marketplace A: 0\n        marketplace B: 1\n    }\n    next_approval_id: 2\n}\n```\n\nWhen Benji approved marketplace A, it took the original value of `next_approval_id` which started off at 0. The marketplace was then inserted into the map and the next approval ID was incremented. This process happened again for marketplace B and the next approval ID was again incremented where it's now 2.\n\nJosh comes along and purchases the NFT on marketplace A for 1 NEAR.", "mimetype": "text/plain", "start_char_idx": 4119, "end_char_idx": 6048, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "618864da-03b1-4089-9034-bbcaacf7a264": {"__data__": {"id_": "618864da-03b1-4089-9034-bbcaacf7a264", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfed7c03-84ad-457e-bd13-57a07182a0eb", "node_type": "1", "metadata": {}, "hash": "6524d967bab87cc587cbcea012d00210df59aff3535145a397b0cfe17ad89225", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f3d941a3-804f-49da-9428-5cf2345588a7", "node_type": "1", "metadata": {}, "hash": "f185f885dec1ec6e1a0d4e6230888bfb2af14de16629de21ff4d2d5d816c00fa", "class_name": "RelatedNodeInfo"}}, "text": "Notice how the next approval ID stayed at 2:\n\n```\nToken: {\n    owner_id: Josh\n    approved_accounts_ids: {}\n    next_approval_id: 2\n}\n```\n\nJosh then flips the NFT because he's once again low on cash and approves marketplace B:\n\n```\nToken: {\n    owner_id: Josh\n    approved_accounts_ids: {\n        marketplace B: 2\n    }\n    next_approval_id: 3\n}\n```\n\nThe marketplace is inserted into the map and the next approval ID is incremented. From marketplace B's perspective it stores it's original approval ID from when Benji put the NFT up for sale which has a value of 1. If Mike were to go and purchase the NFT on marketplace B for the original 1 NEAR sale price, the NFT contract should panic. This is because the marketplace is trying to transfer the NFT with an approval ID 1 but the token struct shows that it **should** have an approval ID of 2.\n\n### Expanding the `Token` and `JsonToken` structs\n\nNow that you understand the proposed solution to the original problem of allowing an account to transfer your NFT, it's time to implement some of the logic. The first thing you should do is modify the `Token` and `JsonToken` structs to reflect the new changes. Let's switch over to the `nft-contract/src/metadata.ts` file:\n\n<Github language=\"js\" start=\"106\" end=\"156\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/metadata.ts\" />\n\nYou'll then need to initialize both the `approved_account_ids` and `next_approval_id` to their default values when a token is minted.", "mimetype": "text/plain", "start_char_idx": 6049, "end_char_idx": 7552, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f3d941a3-804f-49da-9428-5cf2345588a7": {"__data__": {"id_": "f3d941a3-804f-49da-9428-5cf2345588a7", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "618864da-03b1-4089-9034-bbcaacf7a264", "node_type": "1", "metadata": {}, "hash": "a6e6ad10a3da91c955aa976ec1910cf51163cc4d8fc0fd5e3be8c6ee792977a2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "868469ae-3f6c-48c2-965e-3cf4f694f104", "node_type": "1", "metadata": {}, "hash": "592d9389dd30581dd73fcf2b9243b7c748760420d75bc687e0453fa08e50631b", "class_name": "RelatedNodeInfo"}}, "text": "Switch to the `nft-contract/src/mint.ts` file and when creating the `Token` struct to store in the contract, let's set the next approval ID to be 0 and the approved account IDs to be an empty object:\n\n<Github language=\"js\" start=\"23\" end=\"31\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/mint.ts\" />\n\n### Approving accounts\n\nNow that you've added the support for approved account IDs and the next approval ID on the token level, it's time to add the logic for populating and changing those fields through a function called `nft_approve`. This function should approve an account to have access to a specific token ID. Let's move to the `nft-contract/src/approval.ts` file and edit the `internalNftApprove` function:\n\n<Github language=\"js\" start=\"9\" end=\"73\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/approval.ts\" />\n\nThe function will first assert that the user has attached **at least** one yoctoNEAR (which we'll implement soon). This is both for security and to cover storage. When someone approves an account ID, they're storing that information on the contract. As you saw in the [minting tutorial](/tutorials/nfts/js/minting), you can either have the smart contract account cover the storage, or you can have the users cover that cost. The latter is more scalable and it's the approach you'll be working with throughout this tutorial.\n\nAfter the assertion comes back with no problems, you get the token object and make sure that only the owner is calling this method. Only the owner should be able to allow other accounts to transfer their NFTs. You then get the next approval ID and insert the passed in account into the map with the next approval ID. If it's a new approval ID, storage must be paid. If it's not a new approval ID, no storage needs to be paid and only attaching 1 yoctoNEAR would be enough.\n\nYou then calculate how much storage is being used by adding that new account to the map and increment the tokens `next_approval_id` by 1.", "mimetype": "text/plain", "start_char_idx": 7553, "end_char_idx": 9592, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "868469ae-3f6c-48c2-965e-3cf4f694f104": {"__data__": {"id_": "868469ae-3f6c-48c2-965e-3cf4f694f104", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f3d941a3-804f-49da-9428-5cf2345588a7", "node_type": "1", "metadata": {}, "hash": "f185f885dec1ec6e1a0d4e6230888bfb2af14de16629de21ff4d2d5d816c00fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0d1f7326-b8af-4f0c-a66e-6569a3390c73", "node_type": "1", "metadata": {}, "hash": "b9a587a976eb314a4a1d5c2a8a4d6ae6dfb0d3b450cb4442cf688fd0db379829", "class_name": "RelatedNodeInfo"}}, "text": "After inserting the token object back into the `tokensById` map, you refund any excess storage.\n\nYou'll notice that the function contains an optional `msg` parameter. This message is actually the foundation of all NFT marketplaces on NEAR.\n\n#### Marketplace Integrations {#marketplace-integrations}\n\nIf a message was provided into the function, you're going to perform a cross contract call to the account being given access. This cross contract call will invoke the `nft_on_approve` function which will parse the message and act accordingly. Let's consider a general use case.\n\nWe have a marketplace that expects it's sale conditions to be passed in through the message field. Benji approves the marketplace with the `nft_approve` function and passes in a stringified JSON to the message which will outline sale conditions. These sale conditions could look something like the following:\n\n```json\nsale_conditions: {\n    price: 5\n}\n```\n\nBy leaving the message field type as just a string, this generalizes the process and allows users to input sale conditions for many different marketplaces. It is up to the person approving to pass in an appropriate message that the marketplace can properly decode and use. This is usually done through the marketplace's frontend app which would know how to construct the `msg` in a useful way.\n\n#### Internal functions\n\nNow that the core logic for approving an account is finished, you need to implement the `assertAtLeastOneYocto` and `bytesForApprovedAccountId` functions. Move to the `nft-contract/src/internal.ts` file and copy the following function right below the `assertOneYocto` function.\n\n<Github language=\"js\" start=\"61\" end=\"64\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/internal.ts\" />\n\nNext, you'll need to copy the logic for calculating how many bytes it costs to store an account ID. Place this function at the very top of the page:\n\n<Github language=\"js\" start=\"55\" end=\"59\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/internal.ts\" />\n\nNow that the logic for approving accounts is finished, you need to change the restrictions for transferring.", "mimetype": "text/plain", "start_char_idx": 9593, "end_char_idx": 11778, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0d1f7326-b8af-4f0c-a66e-6569a3390c73": {"__data__": {"id_": "0d1f7326-b8af-4f0c-a66e-6569a3390c73", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "868469ae-3f6c-48c2-965e-3cf4f694f104", "node_type": "1", "metadata": {}, "hash": "592d9389dd30581dd73fcf2b9243b7c748760420d75bc687e0453fa08e50631b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4768c3ff-545f-40f5-afd9-5e42797d56dc", "node_type": "1", "metadata": {}, "hash": "ac42de71cf9df7c817e56d0445270ce416221cd96ee9c19f2481bfb0933cd8a3", "class_name": "RelatedNodeInfo"}}, "text": "### Changing the restrictions for transferring NFTs\n\nCurrently, an NFT can **only** be transferred by its owner. You need to change that restriction so that people that have been approved can also transfer NFTs. In addition, you'll make it so that if an approval ID is passed, you can increase the security and check if both the account trying to transfer is in the approved list **and** they correspond to the correct approval ID. This is to address the problem we ran into earlier.\n\nIn the `internal.ts` file, you need to change the logic of the `internalTransfer` method as that's where the restrictions are being made. Change the internal transfer function to be the following:\n\n<Github language=\"js\" start=\"108\" end=\"163\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/internal.ts\" />\n\nThis will check if the sender isn't the owner and then if they're not, it will check if the sender is in the approval list. If an approval ID was passed into the function, it will check if the sender's actual approval ID stored on the contract matches the one passed in.\n\n#### Refunding storage on transfer\n\nWhile you're in the internal file, you're going to need to add methods for refunding users who have paid for storing approved accounts on the contract when an NFT is transferred. This is because you'll be clearing the `approved_account_ids` object whenever NFTs are transferred and so the storage is no longer being used.\n\n<Github language=\"js\" start=\"13\" end=\"28\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/internal.ts\" />\n\nThese will be useful in the next section where you'll be changing the `nft_core` functions to include the new approval logic.\n\n### Changes to `nft_core.ts`\n\nHead over to the `nft-contract/src/nft_core.ts` file and the first change that you'll want to make is to add an `approval_id` to the `internalTransfer` function. This is so that anyone trying to transfer the token that isn't the owner must pass in an approval ID to address the problem seen earlier.", "mimetype": "text/plain", "start_char_idx": 11780, "end_char_idx": 13844, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4768c3ff-545f-40f5-afd9-5e42797d56dc": {"__data__": {"id_": "4768c3ff-545f-40f5-afd9-5e42797d56dc", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0d1f7326-b8af-4f0c-a66e-6569a3390c73", "node_type": "1", "metadata": {}, "hash": "b9a587a976eb314a4a1d5c2a8a4d6ae6dfb0d3b450cb4442cf688fd0db379829", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "588c5ee0-08f7-4137-9c72-49be25c0101e", "node_type": "1", "metadata": {}, "hash": "4d6afd5ce075a13241003efdfb8656bc7ecd5024ab628e9e6fe6fbaf8bc98bfc", "class_name": "RelatedNodeInfo"}}, "text": "If they are the owner, the approval ID won't be used as we saw in the `internalTransfer` function.\n\n\nFor the `nft_transfer` function, the only change that you'll need to make is to pass in the approval ID into the `internalTransfer` function and then refund the previous tokens approved account IDs after the transfer is finished\n\n<Github language=\"js\" start=\"38\" end=\"72\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/nft_core.ts\" />\n\nNext, you need to do the same to `nft_transfer_call` but instead of refunding immediately, you need to attach the previous token's approved account IDs to `nft_resolve_transfer` instead as there's still the possibility that the transfer gets reverted.\n\n<Github language=\"js\" start=\"74\" end=\"135\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/nft_core.ts\" />\n\nYou'll also need to add the tokens approved account IDs to the `JsonToken` being returned by `nft_token`.\n\n<Github language=\"js\" start=\"10\" end=\"36\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/nft_core.ts\" />\n\nFinally, you need to add the logic for refunding the approved account IDs in `internalResolveTransfer`. If the transfer went through, you should refund the owner for the storage being released by resetting the tokens `approved_account_ids` field. If, however, you should revert the transfer, it wouldn't be enough to just not refund anybody. Since the receiver briefly owned the token, they could have added their own approved account IDs and so you should refund them if they did so.\n\n<Github language=\"js\" start=\"137\" end=\"208\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/nft_core.ts\" />\n\nWith that finished, it's time to move on and complete the next task.\n\n## Check if an account is approved\n\nNow that the core logic is in place for approving and refunding accounts, it should be smooth sailing from this point on.", "mimetype": "text/plain", "start_char_idx": 13845, "end_char_idx": 15836, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "588c5ee0-08f7-4137-9c72-49be25c0101e": {"__data__": {"id_": "588c5ee0-08f7-4137-9c72-49be25c0101e", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4768c3ff-545f-40f5-afd9-5e42797d56dc", "node_type": "1", "metadata": {}, "hash": "ac42de71cf9df7c817e56d0445270ce416221cd96ee9c19f2481bfb0933cd8a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3ec7592e-880a-4210-88ba-1e8c8717b8c4", "node_type": "1", "metadata": {}, "hash": "bdc3defb348e16458ebe05552081aab4e289fab31f119a4bd97328c739cb9415", "class_name": "RelatedNodeInfo"}}, "text": "You now need to implement the logic for checking if an account has been approved. This should take an account and token ID as well as an optional approval ID. If no approval ID was provided, it should simply return whether or not the account is approved.\n\nIf an approval ID was provided, it should return whether or not the account is approved and has the same approval ID as the one provided. Let's move to the `nft-contract/src/approval.ts` file and add the necessary logic to the `internalNftIsApproved` function.\n\n<Github language=\"js\" start=\"75\" end=\"110\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/approval.ts\" />\n\nLet's now move on and add the logic for revoking an account\n\n## Revoke an account\n\nThe next step in the tutorial is to allow a user to revoke a specific account from having access to their NFT. The first thing you'll want to do is assert one yocto for security purposes. You'll then need to make sure that the caller is the owner of the token. If those checks pass, you'll need to remove the passed in account from the tokens approved account IDs and refund the owner for the storage being released.\n\n<Github language=\"js\" start=\"112\" end=\"145\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/approval.ts\" />\n\n## Revoke all accounts\n\nThe final step in the tutorial is to allow a user to revoke all accounts from having access to their NFT. This should also assert one yocto for security purposes and make sure that the caller is the owner of the token. You then refund the owner for releasing all the accounts in the map and then clear the `approved_account_ids`.\n\n<Github language=\"js\" start=\"147\" end=\"177\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/5.approval/src/nft-contract/approval.ts\" />\n\nWith that finished, it's time to deploy and start testing the contract.", "mimetype": "text/plain", "start_char_idx": 15837, "end_char_idx": 17725, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3ec7592e-880a-4210-88ba-1e8c8717b8c4": {"__data__": {"id_": "3ec7592e-880a-4210-88ba-1e8c8717b8c4", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "588c5ee0-08f7-4137-9c72-49be25c0101e", "node_type": "1", "metadata": {}, "hash": "4d6afd5ce075a13241003efdfb8656bc7ecd5024ab628e9e6fe6fbaf8bc98bfc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f49aaae7-f62e-47b7-90d4-93bd3a793672", "node_type": "1", "metadata": {}, "hash": "e316a9b8a6306649c75785bb441da8b6d899e26f0c4d524912f6ca300e3c99d5", "class_name": "RelatedNodeInfo"}}, "text": "## Testing the new changes {#testing-changes}\n\nSince these changes affect all the other tokens and the state won't be able to automatically be inherited by the new code, simply redeploying the contract will lead to errors. For this reason, it's best practice to create a sub-account and deploy the contract there.\n\n### Creating a sub-account {#creating-sub-account}\n\nRun the following command to create a sub-account `approval` of your main account with an initial balance of 25 NEAR which will be transferred from the original to your new account.\n\n```bash\nnear create-account approval.$NFT_CONTRACT_ID --masterAccount $NFT_CONTRACT_ID --initialBalance 25\n```\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport APPROVAL_NFT_CONTRACT_ID=approval.$NFT_CONTRACT_ID\n```\n\nUsing the build script, build the deploy the contract as you did in the previous tutorials:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $APPROVAL_NFT_CONTRACT_ID\n```\n\n### Initialization and minting {#initialization-and-minting}\n\nSince this is a new contract, you'll need to initialize and mint a token. Use the following command to initialize the contract:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID init '{\"owner_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' --accountId $APPROVAL_NFT_CONTRACT_ID\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID init json-args '{\"owner_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $APPROVAL_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNext, you'll need to mint a token. By running this command, you'll mint a token with a token ID `\"approval-token\"` and the receiver will be your new account.", "mimetype": "text/plain", "start_char_idx": 17727, "end_char_idx": 19653, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f49aaae7-f62e-47b7-90d4-93bd3a793672": {"__data__": {"id_": "f49aaae7-f62e-47b7-90d4-93bd3a793672", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3ec7592e-880a-4210-88ba-1e8c8717b8c4", "node_type": "1", "metadata": {}, "hash": "bdc3defb348e16458ebe05552081aab4e289fab31f119a4bd97328c739cb9415", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15b95d56-74ca-4ca0-84d2-86625e688ddd", "node_type": "1", "metadata": {}, "hash": "b06b2d322a26dc7bbdcebeae7e508822348a9da16e637d56764058a979f4e203", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID nft_mint '{\"token_id\": \"approval-token\", \"metadata\": {\"title\": \"Approval Token\", \"description\": \"testing out the new approval extension of the standard\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' --accountId $APPROVAL_NFT_CONTRACT_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID nft_mint json-args '{\"token_id\": \"approval-token\", \"metadata\": {\"title\": \"Approval Token\", \"description\": \"testing out the new approval extension of the standard\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $APPROVAL_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou can check to see if everything went through properly by calling one of the enumeration functions:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner '{\"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\",", "mimetype": "text/plain", "start_char_idx": 19655, "end_char_idx": 21048, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "15b95d56-74ca-4ca0-84d2-86625e688ddd": {"__data__": {"id_": "15b95d56-74ca-4ca0-84d2-86625e688ddd", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f49aaae7-f62e-47b7-90d4-93bd3a793672", "node_type": "1", "metadata": {}, "hash": "e316a9b8a6306649c75785bb441da8b6d899e26f0c4d524912f6ca300e3c99d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3bdd067b-f8e9-44f9-b51d-a92b35198ee4", "node_type": "1", "metadata": {}, "hash": "3f290738d9d87acf2adb37847374faace40735dd1a66c38009413e9b6c1575c7", "class_name": "RelatedNodeInfo"}}, "text": "\"limit\": 10}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner json-args '{\"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\", \"limit\": 10}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```json\n[\n  {\n    \"token_id\": \"approval-token\",\n    \"owner_id\": \"approval.goteam.examples.testnet\",\n    \"metadata\": {\n      \"title\": \"Approval Token\",\n      \"description\": \"testing out the new approval extension of the standard\",\n      \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\",\n    },\n    \"approved_account_ids\": {}\n  }\n]\n```\n\nNotice how the approved account IDs are now being returned from the function? This is a great sign! You're now ready to move on and approve an account to have access to your token.\n\n### Approving an account {#approving-an-account}\n\nAt this point, you should have two accounts. One stored under `$NFT_CONTRACT_ID` and the other under the `$APPROVAL_NFT_CONTRACT_ID` environment variable. You can use both of these accounts to test things out. If you approve your old account, it should have the ability to transfer the NFT to itself.\n\nExecute the following command to approve the account stored under `$NFT_CONTRACT_ID` to have access to transfer your NFT with an ID `\"approval-token\"`. You don't need to pass a message since the old account didn't implement the `nft_on_approve` function. In addition, you'll need to attach enough NEAR to cover the cost of storing the account on the contract. 0.1 NEAR should be more than enough and you'll be refunded any excess that is unused.", "mimetype": "text/plain", "start_char_idx": 21049, "end_char_idx": 22784, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3bdd067b-f8e9-44f9-b51d-a92b35198ee4": {"__data__": {"id_": "3bdd067b-f8e9-44f9-b51d-a92b35198ee4", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15b95d56-74ca-4ca0-84d2-86625e688ddd", "node_type": "1", "metadata": {}, "hash": "b06b2d322a26dc7bbdcebeae7e508822348a9da16e637d56764058a979f4e203", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9e27be60-9878-4041-8a91-c1ebb70d1b7f", "node_type": "1", "metadata": {}, "hash": "8fad6b715df365295dc1f5a1ce782bb691687726e1d4d8937353f6c546928020", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID nft_approve '{\"token_id\": \"approval-token\", \"account_id\": \"'$NFT_CONTRACT_ID'\"}' --accountId $APPROVAL_NFT_CONTRACT_ID --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID nft_approve json-args '{\"token_id\": \"approval-token\", \"account_id\": \"'$NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $APPROVAL_NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you call the same enumeration method as before, you should see the new approved account ID being returned.", "mimetype": "text/plain", "start_char_idx": 22786, "end_char_idx": 23542, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9e27be60-9878-4041-8a91-c1ebb70d1b7f": {"__data__": {"id_": "9e27be60-9878-4041-8a91-c1ebb70d1b7f", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3bdd067b-f8e9-44f9-b51d-a92b35198ee4", "node_type": "1", "metadata": {}, "hash": "3f290738d9d87acf2adb37847374faace40735dd1a66c38009413e9b6c1575c7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0fd5a296-cccc-40be-a624-007742aefb94", "node_type": "1", "metadata": {}, "hash": "d4df8f08bc7272a79fc3ae040278208fbcbbe7c7da8487e3b9b1b56e3755082f", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner '{\"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\", \"limit\": 10}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner json-args '{\"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\", \"limit\": 10}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nThis should return an output similar to the following:\n\n```json\n[\n  {\n    \"token_id\": \"approval-token\",\n    \"owner_id\": \"approval.goteam.examples.testnet\",\n    \"metadata\": {\n      \"title\": \"Approval Token\",\n      \"description\": \"testing out the new approval extension of the standard\",\n      \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"\n    },\n    \"approved_account_ids\": { \"goteam.examples.testnet\": 0 }\n  }\n]\n```\n\n### Transferring an NFT as an approved account {#transferring-the-nft}\n\nNow that you've approved another account to transfer the token, you can test that behavior. You should be able to use the other account to transfer the NFT to itself by which the approved account IDs should be reset.", "mimetype": "text/plain", "start_char_idx": 23544, "end_char_idx": 24800, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0fd5a296-cccc-40be-a624-007742aefb94": {"__data__": {"id_": "0fd5a296-cccc-40be-a624-007742aefb94", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9e27be60-9878-4041-8a91-c1ebb70d1b7f", "node_type": "1", "metadata": {}, "hash": "8fad6b715df365295dc1f5a1ce782bb691687726e1d4d8937353f6c546928020", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "066e1526-6a1b-475b-9bc7-86199482045e", "node_type": "1", "metadata": {}, "hash": "a6c2b470158594cc3fa2ed3a26a54cc42b4c516c3f006f829ae895e709cb7a31", "class_name": "RelatedNodeInfo"}}, "text": "Let's test transferring the NFT with the wrong approval ID:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID nft_transfer '{\"receiver_id\": \"'$NFT_CONTRACT_ID'\", \"token_id\": \"approval-token\", \"approval_id\": 1}' --accountId $NFT_CONTRACT_ID --depositYocto 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID nft_transfer json-args '{\"receiver_id\": \"'$NFT_CONTRACT_ID'\", \"token_id\": \"approval-token\", \"approval_id\": 1}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```bash\nkind: {\n    ExecutionError: \"Smart contract panicked: panicked at 'assertion failed: `(left == right)`\\n\" +\n      '  left: `0`,\\n' +\n      \" right: `1`: The actual approval_id 0 is different from the given approval_id 1', src/internal.ts:165:17\"\n  },\n```\n\n</p>\n</details>\n\nIf you pass the correct approval ID which is `0`, everything should work fine.", "mimetype": "text/plain", "start_char_idx": 24801, "end_char_idx": 25949, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "066e1526-6a1b-475b-9bc7-86199482045e": {"__data__": {"id_": "066e1526-6a1b-475b-9bc7-86199482045e", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0fd5a296-cccc-40be-a624-007742aefb94", "node_type": "1", "metadata": {}, "hash": "d4df8f08bc7272a79fc3ae040278208fbcbbe7c7da8487e3b9b1b56e3755082f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1eb0f855-5c96-4876-b321-0ec3b349c979", "node_type": "1", "metadata": {}, "hash": "bfb0884d526d0057a013328aa39ed409bd549328858f03b8775f9637b88128e9", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID nft_transfer '{\"receiver_id\": \"'$NFT_CONTRACT_ID'\", \"token_id\": \"approval-token\", \"approval_id\": 0}' --accountId $NFT_CONTRACT_ID --depositYocto 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID nft_transfer json-args '{\"receiver_id\": \"'$NFT_CONTRACT_ID'\", \"token_id\": \"approval-token\", \"approval_id\": 0}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you again call the enumeration method, you should see the owner updated and the approved account IDs reset.\n\n```json\n[\n  {\n    \"token_id\": \"approval-token\",\n    \"owner_id\": \"goteam.examples.testnet\",\n    \"metadata\": {\n      \"title\": \"Approval Token\",\n      \"description\": \"testing out the new approval extension of the standard\",\n      \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"\n    },\n    \"approved_account_ids\": {}\n  }\n]\n```\n\nLet's now test the approval ID incrementing across different owners. If you approve the sub-account that originally minted the token, the approval ID should be 1 now.", "mimetype": "text/plain", "start_char_idx": 25951, "end_char_idx": 27289, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1eb0f855-5c96-4876-b321-0ec3b349c979": {"__data__": {"id_": "1eb0f855-5c96-4876-b321-0ec3b349c979", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "066e1526-6a1b-475b-9bc7-86199482045e", "node_type": "1", "metadata": {}, "hash": "a6c2b470158594cc3fa2ed3a26a54cc42b4c516c3f006f829ae895e709cb7a31", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c65c010-acb1-443b-97e4-6b9f00cc0415", "node_type": "1", "metadata": {}, "hash": "6382d529171b60d6758ac919166694d1f83a3a8e71c8e7cda6f855fca768e683", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $APPROVAL_NFT_CONTRACT_ID nft_approve '{\"token_id\": \"approval-token\", \"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' --accountId $NFT_CONTRACT_ID --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $APPROVAL_NFT_CONTRACT_ID nft_approve json-args '{\"token_id\": \"approval-token\", \"account_id\": \"'$APPROVAL_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nCalling the view function again show now return an approval ID of 1 for the sub-account that was approved.", "mimetype": "text/plain", "start_char_idx": 27291, "end_char_idx": 28044, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8c65c010-acb1-443b-97e4-6b9f00cc0415": {"__data__": {"id_": "8c65c010-acb1-443b-97e4-6b9f00cc0415", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1eb0f855-5c96-4876-b321-0ec3b349c979", "node_type": "1", "metadata": {}, "hash": "bfb0884d526d0057a013328aa39ed409bd549328858f03b8775f9637b88128e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c4cf133b-d0d2-47d8-b98f-2bc8afcbcff4", "node_type": "1", "metadata": {}, "hash": "44e02f898e6f524884418d215312769dbc0297827e8443e1c812257261542f11", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner '{\"account_id\": \"'$NFT_CONTRACT_ID'\", \"limit\": 10}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $APPROVAL_NFT_CONTRACT_ID nft_tokens_for_owner json-args '{\"account_id\": \"'$NFT_CONTRACT_ID'\", \"limit\": 10}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n[\n  {\n    \"token_id\": \"approval-token\",\n    \"owner_id\": \"goteam.examples.testnet\",\n    \"metadata\": {\n      \"title\": \"Approval Token\",\n      \"description\": \"testing out the new approval extension of the standard\",\n      \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"\n    },\n    \"approved_account_ids\": { \"approval.goteam.examples.testnet\": 1 }\n  }\n]\n```\n\n</p>\n</details>\n\nWith the testing finished, you've successfully implemented the approvals extension to the standard!\n\n## Conclusion\n\nToday you went through a lot of logic to implement the [approvals extension](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement) so let's break down exactly what you did.\n\nFirst, you explored the [basic approach](#basic-solution) of how to solve the problem. You then went through and discovered some of the [problems](#the-problem) with that solution and learned how to [fix it](#the-solution).\n\nAfter understanding what you should do to implement the approvals extension, you started to [modify](#expanding-json-and-token) the JsonToken and Token structs in the contract. You then implemented the logic for [approving accounts](#approving-accounts) and saw how [marketplaces](#marketplace-integrations) are integrated.", "mimetype": "text/plain", "start_char_idx": 28045, "end_char_idx": 29866, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c4cf133b-d0d2-47d8-b98f-2bc8afcbcff4": {"__data__": {"id_": "c4cf133b-d0d2-47d8-b98f-2bc8afcbcff4", "embedding": null, "metadata": {"file_path": "./near_dist/5-approval.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f3a153e-4368-461a-b65c-0509a7eba737", "node_type": "4", "metadata": {}, "hash": "012bd99634d2ea6f47461ea1569ef20b56f5658434a261b45d7fd18a40a2832d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8c65c010-acb1-443b-97e4-6b9f00cc0415", "node_type": "1", "metadata": {}, "hash": "6382d529171b60d6758ac919166694d1f83a3a8e71c8e7cda6f855fca768e683", "class_name": "RelatedNodeInfo"}}, "text": "After implementing the logic behind approving accounts, you went and [changed the restrictions](#changing-restrictions) needed to transfer NFTs. The last step you did to finalize the approving logic was to go back and edit the [nft_core](#nft-core-changes) files to be compatible with the new changes.\n\nAt this point, everything was implemented in order to allow accounts to be approved and you extended the functionality of the [core standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core) to allow for approved accounts to transfer tokens.\n\nYou implemented a view method to [check](#check-if-account-approved) if an account is approved and to finish the coding portion of the tutorial, you implemented the logic necessary to [revoke an account](#revoke-account) as well as [revoke all accounts](#revoke-all-accounts).\n\nAfter this, the contract code was finished and it was time to move onto testing where you created a [subaccount](#creating-sub-account) and tested the [approving](#approving-an-account) and [transferring](#transferring-the-nft) for your NFTs.\n\nIn the next tutorial, you'll learn about the royalty standards and how you can interact with NFT marketplaces.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Enumeration standard: [NEP181](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration), version `1.0.0`\n- Approval standard: [NEP178](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 29868, "end_char_idx": 31534, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d45c580-c2e7-401f-bb33-a43ffe4d78d7": {"__data__": {"id_": "2d45c580-c2e7-401f-bb33-a43ffe4d78d7", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36dc66dd-3c88-4a34-b5b0-5176ee2e8903", "node_type": "1", "metadata": {}, "hash": "fe990b4bd358f8365af2f33e58fb4e55b08882f41e61c089e4294fd885d48d09", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: marketplace\ntitle: Integrating FT Payments into an NFT Marketplace\nsidebar_label: Adding FTs to a Marketplace\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial, you'll learn the basics of how an NFT marketplace contract works and how you can modify it to allow for purchasing NFTs using Fungible Tokens. In the previous tutorials, you went through and created a fully fledged FT contract that incorporates all the standards found in the [FT standard](https://nomicon.io/Standards/Tokens/FungibleToken/Core).\n\n---\n\n## Introduction\n\nThroughout this tutorial, you'll learn how a marketplace contract could work on NEAR. This is meant to be an example and there is no canonical implementation. Feel free to branch off and modify this contract to meet your specific needs.\n\nUsing the same repository as the previous tutorials, if you visit the `market-contract` directory, you should have the necessary files to complete the tutorial.\n\n---\n\n## File structure {#file-structure}\n\nThis directory contains the actual contract code and dependencies as outlined below.\n\n```\nmarket-contract\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 external.rs\n    \u251c\u2500\u2500 ft_balances.rs\n    \u251c\u2500\u2500 internal.rs\n    \u251c\u2500\u2500 lib.rs\n    \u251c\u2500\u2500 nft_callbacks.rs\n    \u251c\u2500\u2500 sale.rs\n    \u2514\u2500\u2500 sale_views.rs\n```\n\nLet's start by building both the finished FT contract and the marketplace contract. Make sure you're in the root directory and run the following command in your terminal:\n\n\n```bash\ncd market-contract && cargo near build && cd ..\n```\n\nThis will install the dependencies for the marketplace contract as well as the FT contract. Note that there's also `ft-tutorial/out` directory with pre-build nft contract wasm file which you'll use to place the NFTs for sale.\n\n```\nft-tutorial\n\u2514\u2500\u2500 out\n    \u2514\u2500\u2500 nft-contract.wasm\n```\n\n---\n\n## Understanding the contract\n\nThe marketplace contract used in this tutorial is a modified version of the contract created at the end of the NFT zero to hero tutorial.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2070, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36dc66dd-3c88-4a34-b5b0-5176ee2e8903": {"__data__": {"id_": "36dc66dd-3c88-4a34-b5b0-5176ee2e8903", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d45c580-c2e7-401f-bb33-a43ffe4d78d7", "node_type": "1", "metadata": {}, "hash": "ac92a64b59ff6cd62c03b3070424ab061b0495e4b26e4830c74af3e3596dd82b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cfa6ab11-9037-460b-9733-59976700c271", "node_type": "1", "metadata": {}, "hash": "37c2898bf3824765e575a8c2444e0beb8378a37fa8594d3fb505b67cfacbbb67", "class_name": "RelatedNodeInfo"}}, "text": "If you'd like to learn about the backbone of how the NFTs are put for sale and the process by which they are minted / sold, check out the [NFT zero to hero tutorial](/tutorials/nfts/marketplace).\n\nThe core functionalities are the same in the sense that both this contract and the marketplace contract built in the NFT zero to hero have the following features:\n- Users can put NFTs for sale and specify sale conditions\n- Users must pay for storage deposit to put NFTs for sale and they can withdraw the storage at any time\n- Users can update the price of an NFT or remove the sale entirely\n- Buyers can purchase the NFTs by calling `offer`.\n\nThe only difference is that this marketplace has removed the ability to purchase NFTs for `$NEAR` and instead allows users to buy them with Fungible Tokens. The fungible token is specified when the contract is initialized and only **1 type of fungible token** can be used to purchase NFTs. You can't, for example, offer 100 Team Tokens for an NFT and 5000 Mike Tokens for another.\n\nIn addition, the marketplace does **not** support royalties. This is because FT transfers are less Gas efficient than regular $NEAR transfers. In addition, each user would have to be registered and it's much easier to say \"hey seller, make sure you're registered before your NFT is sold\" rather than enforcing that the seller and **all** accounts in the payout object are registered. When an NFT is sold, the entire price is sent directly to the seller.\n\n<hr className=\"subsection\" />\n\n### Purchasing Flow\n\nIn order to purchase an NFT, the contract utilizes the \"transfer and call\" workflow that the FT contract provides. The marketplace contract implements the `ft_on_transfer` method that is called whenever someone transfers FTs to the marketplace contract.\n\nThe marketplace keeps track of a balance for each user that outlines how many FTs they've sent to the contract. Each time `ft_on_transfer` is called, the marketplace contract will update the balance for the user. When that user wishes to purchase an NFT, they call `offer` and pass in the amount of tokens they're willing to spend. The marketplace will then decrement from their balance and transfer the NFT to the buyer / send the FTs to the seller.", "mimetype": "text/plain", "start_char_idx": 2071, "end_char_idx": 4306, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cfa6ab11-9037-460b-9733-59976700c271": {"__data__": {"id_": "cfa6ab11-9037-460b-9733-59976700c271", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36dc66dd-3c88-4a34-b5b0-5176ee2e8903", "node_type": "1", "metadata": {}, "hash": "fe990b4bd358f8365af2f33e58fb4e55b08882f41e61c089e4294fd885d48d09", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d3b920e1-a46f-4d2d-8bf1-374972a9c514", "node_type": "1", "metadata": {}, "hash": "5f46358d45415fb0114ce76a9789f54230a2ba1d1572eac1a965c62bc36ff500", "class_name": "RelatedNodeInfo"}}, "text": "It's important to note that the seller **must** be registered in the FT contract before a sale is made otherwise the `ft_transfer` method will panic and the seller won't receive any tokens.\n\n---\n\n## Looking at the Code\n\nMost of the code is the same as what's been outlined in the [NFT zero to hero tutorial](/tutorials/nfts/marketplace) but we'll go through a refresher in case you're new or have forgotten some of the details.\n\n<hr className=\"subsection\" />\n\n### Main Library File\n\nStarting at the `lib.rs` file, this outlines what information is stored on the contract as well as some other crucial functions that you'll learn about below.\n\n<hr className=\"subsection\" />\n\n### Initialization function {#initialization-function}\n\nThe first function you'll look at is the initialization function. This takes an `owner_id` as well as the `ft_id` as the parameters and will default all the storage collections to their default values. The `ft_id` outlines the account ID for the fungible token that the contract will allow.\n\n<Github language=\"rust\" start=\"93\" end=\"114\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/lib.rs\" />\n\n<hr className=\"subsection\" />\n\n### Storage management model {#storage-management-model}\n\nNext, let's talk about the storage management model chosen for this contract. Users will need to deposit $NEAR onto the marketplace to cover the storage costs. Whenever someone puts an NFT for sale, the marketplace needs to store that information which costs $NEAR. Users can either deposit a large amount of $NEAR so that they never have to worry about storage again or they can deposit the minimum amount to cover 1 sale on an as-needed basis.\n\nYou might be thinking about the scenario when a sale is purchased. What happens to the storage that is now being released on the contract? This is why we have a storage withdrawal function. This allows users to withdraw any excess storage that is not being used. Let's go through some scenarios to understand the logic. The required storage for 1 sale is 0.01 NEAR on the marketplace contract.\n\n**Scenario A**\n\n- Benji wants to list his NFT on the marketplace but has never paid for storage.\n- He deposits exactly 0.01 NEAR using the `storage_deposit` method.", "mimetype": "text/plain", "start_char_idx": 4308, "end_char_idx": 6562, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d3b920e1-a46f-4d2d-8bf1-374972a9c514": {"__data__": {"id_": "d3b920e1-a46f-4d2d-8bf1-374972a9c514", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cfa6ab11-9037-460b-9733-59976700c271", "node_type": "1", "metadata": {}, "hash": "37c2898bf3824765e575a8c2444e0beb8378a37fa8594d3fb505b67cfacbbb67", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c75a38bb-cdbc-48e2-8a88-af585e7280a3", "node_type": "1", "metadata": {}, "hash": "530599db6605eb6e20a107197e94ca5ec1b9146fdb45c4580810de325f7b28b1", "class_name": "RelatedNodeInfo"}}, "text": "This will cover 1 sale.\n- He lists his NFT on the marketplace and is now using up 1 out of his prepaid 1 sales and has no more storage left. If he were to call `storage_withdraw`, nothing would happen.\n- Dorian loves his NFT and quickly purchases it before anybody else can. This means that Benji's sale has now been taken down (since it was purchased) and Benji is using up 0 out of his prepaid 1 sales. In other words, he has an excess of 1 sale or 0.01 NEAR.\n- Benji can now call `storage_withdraw` and will be transferred his 0.01 NEAR back. On the contract's side, after withdrawing, he will have 0 sales paid for and will need to deposit storage before trying to list anymore NFTs.\n\n**Scenario B**\n\n- Dorian owns one hundred beautiful NFTs and knows that he wants to list all of them.\n- To avoid having to call `storage_deposit` everytime he wants to list an NFT, he calls it once. Since Dorian is a baller, he attaches 10 NEAR which is enough to cover 1000 sales. He now has an excess of 9 NEAR or 900 sales.\n- Dorian needs the 9 NEAR for something else but doesn't want to take down his 100 listings. Since he has an excess of 9 NEAR, he can easily withdraw and still have his 100 listings. After calling `storage_withdraw` and being transferred 9 NEAR, he will have an excess of 0 sales.\n\nWith this behavior in mind, the following two functions outline the logic.\n\n<Github language=\"rust\" start=\"119\" end=\"182\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/lib.rs\" />\n\nIn this contract, the storage required for each sale is 0.01 NEAR but you can query that information using the `storage_minimum_balance` function. In addition, if you wanted to check how much storage a given account has paid, you can query the `storage_balance_of` function.", "mimetype": "text/plain", "start_char_idx": 6563, "end_char_idx": 8349, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c75a38bb-cdbc-48e2-8a88-af585e7280a3": {"__data__": {"id_": "c75a38bb-cdbc-48e2-8a88-af585e7280a3", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d3b920e1-a46f-4d2d-8bf1-374972a9c514", "node_type": "1", "metadata": {}, "hash": "5f46358d45415fb0114ce76a9789f54230a2ba1d1572eac1a965c62bc36ff500", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6da7f737-b039-440a-b9f0-b6dc8e46d75c", "node_type": "1", "metadata": {}, "hash": "cd211c382c5eaf8ccef694100e4747dbb1d79001cbd5770d10d335bb98b3adc2", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n## FT Deposits\n\nIf you want to learn more about how NFTs are put for sale, check out the [NFT zero to hero tutorial](/tutorials/nfts/marketplace). Once NFTs are put for sale, the owner has three options:\n- Update the price of the NFT\n- Remove the sale from the marketplace\n- Wait for somebody to purchase it\n\nIn order to purchase NFTs, buyers need to deposit FTs in the contract and call the `offer` function. All the logic for FT deposits is outlined in the `src/ft_balances.rs` file. Starting with the `ft_on_transfer` function, this is called when a user transfers FTs to the marketplace contract. The logic can be seen below.\n\n<Github language=\"rust\" start=\"39\" end=\"77\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/ft_balances.rs\" />\n\nOnce FTs are deposited into the contract, users can either withdraw their FTs or they can use them to purchase NFTs. The withdrawing flow is outlined in the `ft_withdraw` function. It's important to note that you should decrement the user's balance **before** calling the `ft_transfer` function to avoid a common exploit scenario where a user spams the `ft_withdraw`. If you were to decrement their balance in the callback function (if the transfer was successful), they could spam the `ft_withdraw` during the time it takes the callback function to execute. A better pattern is to decrement their balance before the transfer and then if the promise was **unsuccessful**, revert the balance back to what it was before.\n\n<Github language=\"rust\" start=\"79\" end=\"154\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/ft_balances.rs\" />\n\n---\n\n## Purchasing NFTs\n\nNow that you're familiar with the process of both adding storage and depositing FTs on the marketplace, let's go through what you can do once a sale has been listed. The `src/sale.rs` file outlines the functions for updating the price, removing, and purchasing NFTs. In this tutorial, we'll focus **only** on the purchasing flow.", "mimetype": "text/plain", "start_char_idx": 8351, "end_char_idx": 10350, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6da7f737-b039-440a-b9f0-b6dc8e46d75c": {"__data__": {"id_": "6da7f737-b039-440a-b9f0-b6dc8e46d75c", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c75a38bb-cdbc-48e2-8a88-af585e7280a3", "node_type": "1", "metadata": {}, "hash": "530599db6605eb6e20a107197e94ca5ec1b9146fdb45c4580810de325f7b28b1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f", "node_type": "1", "metadata": {}, "hash": "e1bae6b3c3fb43034bf0eee8c44167d80be090292e5ac7a71180879426af592f", "class_name": "RelatedNodeInfo"}}, "text": "If you'd like to learn about the sale objects, updating the price, and removing a sale, check out the [NFT zero to hero tutorial](/tutorials/nfts/marketplace).\n\nFor purchasing NFTs, you must call the `offer` function. It takes an `nft_contract_id`, `token_id`, and the amount you wish to offer as parameters. Behind the scenes, this function will make sure your offer amount is greater than the list price and also that you have enough FTs deposited. It will then call a private method `process_purchase` which will perform a cross-contract call to the NFT contract to invoke the `nft_transfer` function where the NFT will be transferred to the seller.\n\n<Github language=\"rust\" start=\"68\" end=\"145\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/sale.rs\" />\n\nOnce the transfer is complete, the contract will call `resolve_purchase` where it will check the status of the transfer.If the transfer succeeded, it will send the FTs to the seller. If the transfer didn't succeed, it will increment the buyer's FT balance (acting as a refund).\n\n\n<Github language=\"rust\" start=\"147\" end=\"191\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/market-contract/src/sale.rs\" />\n\n## View Methods\n\nThere are several view functions that the marketplace contract exposes. All of these functions are the same as the [NFT zero to hero tutorial](/tutorials/nfts/marketplace) except for one extra function we've added. In the `src/ft_balances.rs` file, we've added the `ft_balance_of` function. This function returns the balance of a given account.\n\n---\n\n## Testing\n\nNow that you *hopefully* have a good understanding of how the marketplace contract works and how you can use the powers of the FT standard to purchase NFTs, let's move onto testing everything.\n\n### Deploying and Initializing the Contracts\n\nThe first thing you'll want to do is deploy a new FT, NFT, and marketplace contract.", "mimetype": "text/plain", "start_char_idx": 10351, "end_char_idx": 12266, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f": {"__data__": {"id_": "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6da7f737-b039-440a-b9f0-b6dc8e46d75c", "node_type": "1", "metadata": {}, "hash": "cd211c382c5eaf8ccef694100e4747dbb1d79001cbd5770d10d335bb98b3adc2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b9af40ec-4c16-4ec1-a854-47978e159e2c", "node_type": "1", "metadata": {}, "hash": "a066ee0336189d0f87777c3848ff5fbcf3df06fd5c6c45f223f9bb08e8a9738f", "class_name": "RelatedNodeInfo"}}, "text": "```bash\ncd market-contract && cargo near build && cd ..\n```\n\nTo deploy the FT contract and export an environment variable, run the following command:\n\n```bash\nexport FT_CONTRACT=<new-ft-account-id>\nnear create-account $FT_CONTRACT --useFaucet\ncd 5.transfers/ && cargo near deploy $FT_CONTRACT with-init-call new_default_meta json-args '{\"owner_id\": \"'$FT_CONTRACT'\", \"total_supply\": \"1000000000000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send && cd ../\n```\n\nNext, you'll deploy the NFT and marketplace contracts.\n\n```bash\nexport NFT_CONTRACT=<new-nft-account-id>\nnear create-account $NFT_CONTRACT --useFaucet\nnear deploy $NFT_CONTRACT out/nft-contract.wasm\n```\n\n```bash\nexport MARKETPLACE_CONTRACT=<new-marketplace-account-id>\nnear create-account $MARKETPLACE_CONTRACT --useFaucet\ncd market-contract/ && cargo near deploy $MARKETPLACE_CONTRACT with-init-call new json-args '{\"owner_id\": \"'$MARKETPLACE_CONTRACT'\", \"ft_id\": \"'$FT_CONTRACT'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send && cd ../\n```\n\nCheck and see if your environment variables are all correct by running the following command. Each output should be different.\n\n```bash\necho $FT_CONTRACT && echo $MARKETPLACE_CONTRACT && echo $NFT_CONTRACT\n```\nAn example output is:\n\n```bash\nft-contract.testnet\nmarketplace-contract.testnet\nnft-contract.testnet\n```\n\nOnce that's finished, go ahead and initialize NFT contract by running the following command (FT and marketplace contract were initialized during deploying process above).", "mimetype": "text/plain", "start_char_idx": 12268, "end_char_idx": 13880, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b9af40ec-4c16-4ec1-a854-47978e159e2c": {"__data__": {"id_": "b9af40ec-4c16-4ec1-a854-47978e159e2c", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f", "node_type": "1", "metadata": {}, "hash": "e1bae6b3c3fb43034bf0eee8c44167d80be090292e5ac7a71180879426af592f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a3a68d9-1d2f-483b-a5a2-10374231a9d2", "node_type": "1", "metadata": {}, "hash": "b97964f888747023282e581285d61c3fea58a8b92980164144e0e48211d1700f", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT new_default_meta '{\"owner_id\": \"'$NFT_CONTRACT'\"}' --accountId $NFT_CONTRACT\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT new_default_meta json-args '{\"owner_id\": \"'$NFT_CONTRACT'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $NFT_CONTRACT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nLet's check if each contract was initialized correctly. You can do this by checking the metadata of the FT and NFT contracts:\n\n```bash\nnear view $FT_CONTRACT ft_metadata && near view $NFT_CONTRACT nft_metadata\n```\nIn addition, you can check the sales of the marketplace contract and it should return 0.\n\n```bash\nnear view $MARKETPLACE_CONTRACT get_supply_sales\n```\n\n<hr className=\"subsection\" />\n\n### Placing a Token For Sale\n\nNow that the marketplace and NFT contracts are initialized, let's place a token for sale. Start by creating a new buyer and seller account by running the following command. In this case, we'll create a sub-account of the FT contract.\n\n```bash\nnear create-account buyer.$FT_CONTRACT --masterAccount $FT_CONTRACT --initialBalance 2 && export BUYER_ID=buyer.$FT_CONTRACT\n```\n\n```bash\nnear create-account seller.$FT_CONTRACT --masterAccount $FT_CONTRACT --initialBalance 2 && export SELLER_ID=seller.$FT_CONTRACT\n```\n\nCheck if everything went well by running the following command.\n\n```bash\necho $BUYER_ID && echo $SELLER_ID\n```\nThis should return something similar to:\n```bash\nbuyer.ft-contract.testnet\nseller.ft-contract.testnet\n```\n\nThe next thing you'll want to do is mint a token to the seller.", "mimetype": "text/plain", "start_char_idx": 13882, "end_char_idx": 15627, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a3a68d9-1d2f-483b-a5a2-10374231a9d2": {"__data__": {"id_": "8a3a68d9-1d2f-483b-a5a2-10374231a9d2", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9af40ec-4c16-4ec1-a854-47978e159e2c", "node_type": "1", "metadata": {}, "hash": "a066ee0336189d0f87777c3848ff5fbcf3df06fd5c6c45f223f9bb08e8a9738f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eff956fb-4604-4ec1-96a7-314419fba34d", "node_type": "1", "metadata": {}, "hash": "03dccb336eed7edd21c4923ae746cfb34b6caba36d7c3ae1ca811cb4669d0e52", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT nft_mint '{\"token_id\": \"market-token\", \"metadata\": {\"title\": \"Marketplace Token\", \"description\": \"testing out the marketplace\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$SELLER_ID'\"}' --accountId $NFT_CONTRACT --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT nft_mint json-args '{\"token_id\": \"market-token\", \"metadata\": {\"title\": \"Marketplace Token\", \"description\": \"testing out the marketplace\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$SELLER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NFT_CONTRACT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNow you'll need to place the token for sale. This requires paying for storage as well as calling the `nft_approve` function.", "mimetype": "text/plain", "start_char_idx": 15629, "end_char_idx": 16731, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eff956fb-4604-4ec1-96a7-314419fba34d": {"__data__": {"id_": "eff956fb-4604-4ec1-96a7-314419fba34d", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8a3a68d9-1d2f-483b-a5a2-10374231a9d2", "node_type": "1", "metadata": {}, "hash": "b97964f888747023282e581285d61c3fea58a8b92980164144e0e48211d1700f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e7d5550-c53c-4568-accd-9a68e16fa538", "node_type": "1", "metadata": {}, "hash": "600771e5bcddc9f2b98098eaed4eb3a396f0d6210570eef673ee7968db94d59f", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $MARKETPLACE_CONTRACT storage_deposit --accountId $SELLER_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $MARKETPLACE_CONTRACT storage_deposit json-args '{}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $SELLER_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIn this case, we'll place the token for sale for `10 gtNEAR`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT nft_approve '{\"token_id\": \"market-token\", \"account_id\": \"'$MARKETPLACE_CONTRACT'\", \"msg\": \"{\\\"sale_conditions\\\":\\\"10000000000000000000000000\\\"}\"}' --accountId $SELLER_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT nft_approve json-args '{\"token_id\": \"market-token\", \"account_id\": \"'$MARKETPLACE_CONTRACT'\", \"msg\": \"{\\\"sale_conditions\\\":\\\"10000000000000000000000000\\\"}\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $SELLER_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you now query for the supply of sales again on the marketplace, it should be 1.", "mimetype": "text/plain", "start_char_idx": 16733, "end_char_idx": 18085, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e7d5550-c53c-4568-accd-9a68e16fa538": {"__data__": {"id_": "4e7d5550-c53c-4568-accd-9a68e16fa538", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eff956fb-4604-4ec1-96a7-314419fba34d", "node_type": "1", "metadata": {}, "hash": "03dccb336eed7edd21c4923ae746cfb34b6caba36d7c3ae1ca811cb4669d0e52", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d11e8d8c-24cc-439b-8a7f-902626308791", "node_type": "1", "metadata": {}, "hash": "1aaa64c2aedf07ed0cf82d8352eef4142bd75040a1245d4f4999ddeff228120a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $MARKETPLACE_CONTRACT get_supply_sales\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $MARKETPLACE_CONTRACT get_supply_sales json-args {} network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nIn addition, if you query for the sales by the owner ID, it should reflect the `10 gtNEAR` price.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $MARKETPLACE_CONTRACT get_sales_by_owner_id '{\"account_id\": \"'$SELLER_ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $MARKETPLACE_CONTRACT get_sales_by_owner_id json-args '{\"account_id\": \"'$SELLER_ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nExpected output:\n\n```bash\n[\n  {\n    owner_id: 'seller.ft-contract.testnet',\n    approval_id: 0,\n    nft_contract_id: 'nft-contract.testnet',\n    token_id: 'market-token',\n    sale_conditions: '10000000000000000000000000'\n  }\n]\n```\n\n<hr className=\"subsection\" />\n\n### Deposit FTs into the Marketplace\n\nNow that you have an NFT up for sale for `10 gtNEAR` on the marketplace contract, the buyer needs to deposit some FTs. The first thing you need to do is register both the marketplace contract and the buyer on the FT contract otherwise you won't be able to transfer any FTs.", "mimetype": "text/plain", "start_char_idx": 18087, "end_char_idx": 19539, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d11e8d8c-24cc-439b-8a7f-902626308791": {"__data__": {"id_": "d11e8d8c-24cc-439b-8a7f-902626308791", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e7d5550-c53c-4568-accd-9a68e16fa538", "node_type": "1", "metadata": {}, "hash": "600771e5bcddc9f2b98098eaed4eb3a396f0d6210570eef673ee7968db94d59f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "616cce0c-5ca0-4209-a37a-a7548720843e", "node_type": "1", "metadata": {}, "hash": "12af540bd6e6cdd104d7a9a84c601753cd5038c87a238a291b801bff847c5013", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $FT_CONTRACT storage_deposit '{\"account_id\": \"'$MARKETPLACE_CONTRACT'\"}' --accountId $FT_CONTRACT --amount 0.1\n\n  near call $FT_CONTRACT storage_deposit '{\"account_id\": \"'$BUYER_ID'\"}' --accountId $FT_CONTRACT --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $FT_CONTRACT storage_deposit json-args '{\"account_id\": \"'$MARKETPLACE_CONTRACT'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $FT_CONTRACT network-config testnet sign-with-keychain send\n\n    near contract call-function as-transaction $FT_CONTRACT storage_deposit json-args '{\"account_id\": \"'$BUYER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $FT_CONTRACT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nAfter this, you should transfer the buyer some FTs so that they can deposit at least `10 gtNEAR`. Lets start with 50 `gtNEAR`. Run the following command to send the buyer FTs on behalf of the FT contract owner.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $FT_CONTRACT ft_transfer '{\"receiver_id\": \"'$BUYER_ID'\", \"amount\": \"50000000000000000000000000\", \"memo\": \"Go Team!\"}' --accountId $FT_CONTRACT --depositYocto 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $FT_CONTRACT ft_transfer json-args '{\"receiver_id\": \"'$BUYER_ID'\", \"amount\": \"50000000000000000000000000\", \"memo\": \"Go Team!\"}'", "mimetype": "text/plain", "start_char_idx": 19541, "end_char_idx": 21151, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "616cce0c-5ca0-4209-a37a-a7548720843e": {"__data__": {"id_": "616cce0c-5ca0-4209-a37a-a7548720843e", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d11e8d8c-24cc-439b-8a7f-902626308791", "node_type": "1", "metadata": {}, "hash": "1aaa64c2aedf07ed0cf82d8352eef4142bd75040a1245d4f4999ddeff228120a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee416e4b-0044-49cd-bba6-c97e53c5672c", "node_type": "1", "metadata": {}, "hash": "34206bb084b38871769717a79bc083d21c87712371581d57aa3c53d91ae3d955", "class_name": "RelatedNodeInfo"}}, "text": "prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $FT_CONTRACT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou'll now need to deposit those tokens into the marketplace contract.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $FT_CONTRACT ft_transfer_call '{\"receiver_id\": \"'$MARKETPLACE_CONTRACT'\", \"amount\": \"50000000000000000000000000\", \"msg\": \"Wooooooo!\"}' --accountId $BUYER_ID --depositYocto 1 --gas 200000000000000\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $FT_CONTRACT ft_transfer_call json-args '{\"receiver_id\": \"'$MARKETPLACE_CONTRACT'\", \"amount\": \"50000000000000000000000000\", \"msg\": \"Wooooooo!\"}' prepaid-gas '200.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you now query for your balance on the marketplace contract, it should be `50 gtNEAR`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $MARKETPLACE_CONTRACT ft_deposits_of '{\"account_id\": \"'$BUYER_ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $MARKETPLACE_CONTRACT ft_deposits_of json-args '{\"account_id\": \"'$BUYER_ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Purchasing the NFT\n\nNow that the buyer has deposited FTs into the marketplace and the token is up for sale, let's go ahead and make an offer! If you try to offer more FTs than what you have, the contract will panic.", "mimetype": "text/plain", "start_char_idx": 21152, "end_char_idx": 22827, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ee416e4b-0044-49cd-bba6-c97e53c5672c": {"__data__": {"id_": "ee416e4b-0044-49cd-bba6-c97e53c5672c", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "616cce0c-5ca0-4209-a37a-a7548720843e", "node_type": "1", "metadata": {}, "hash": "12af540bd6e6cdd104d7a9a84c601753cd5038c87a238a291b801bff847c5013", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb427c6e-929c-4c23-b62a-334cf08967db", "node_type": "1", "metadata": {}, "hash": "75fb10fd5bfdb3b6ee6b5cd5a0c27a467c8eec4cd58a27f2b3cae352b6767bac", "class_name": "RelatedNodeInfo"}}, "text": "Similarly, if you try to offer lower than the sale price, the contract will also panic. Since the sale price is `10 gtNEAR`, let's try to offer `20 gtNEAR` and see what happens. The expected outcome is:\n- The NFT will be transferred to the buyer\n- `20 gtNEAR` will be sent to the seller\n- The buyer will have `30 gtNEAR` left to withdraw.\n\nThere is one thing we're forgetting, however. We need to make sure that the seller is registered on the FT contract so let's go ahead and do that now.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $FT_CONTRACT storage_deposit '{\"account_id\": \"'$SELLER_ID'\"}' --accountId $FT_CONTRACT --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $FT_CONTRACT storage_deposit json-args '{\"account_id\": \"'$SELLER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $FT_CONTRACT network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNow let's make an offer!", "mimetype": "text/plain", "start_char_idx": 22828, "end_char_idx": 23874, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb427c6e-929c-4c23-b62a-334cf08967db": {"__data__": {"id_": "bb427c6e-929c-4c23-b62a-334cf08967db", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee416e4b-0044-49cd-bba6-c97e53c5672c", "node_type": "1", "metadata": {}, "hash": "34206bb084b38871769717a79bc083d21c87712371581d57aa3c53d91ae3d955", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b", "node_type": "1", "metadata": {}, "hash": "fb17da9b57bf68cc20a7884d83ceb8639e225f267f609b12549f5e7823631ecb", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $MARKETPLACE_CONTRACT offer '{\"nft_contract_id\": \"'$NFT_CONTRACT'\", \"token_id\": \"market-token\", \"amount\": \"20000000000000000000000000\"}' --accountId $BUYER_ID --depositYocto 1 --gas 300000000000000\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $MARKETPLACE_CONTRACT offer json-args '{\"nft_contract_id\": \"'$NFT_CONTRACT'\", \"token_id\": \"market-token\", \"amount\": \"20000000000000000000000000\"}' prepaid-gas '300.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf everything went well, you should see 2 events in your terminal. One event is the NFT transfer coming from the NFT contract when the token was transferred from the seller to the buyer. The other event is the FT transfer for when the seller receives their fungible tokens.", "mimetype": "text/plain", "start_char_idx": 23876, "end_char_idx": 24852, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b": {"__data__": {"id_": "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bb427c6e-929c-4c23-b62a-334cf08967db", "node_type": "1", "metadata": {}, "hash": "75fb10fd5bfdb3b6ee6b5cd5a0c27a467c8eec4cd58a27f2b3cae352b6767bac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256", "node_type": "1", "metadata": {}, "hash": "f02bbffdbd56b49479612445027b9055cb0aa0b769f595fc5f7f3bbb085efefc", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nLog [dev-1660831638497-73655245450834]: Memo: payout from market\nLog [dev-1660831638497-73655245450834]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"nft-1.0.0\",\"event\":\"nft_transfer\",\"data\":[{\"authorized_id\":\"dev-1660831638497-73655245450834\",\"old_owner_id\":\"seller.dev-1660831615048-16894106456797\",\"new_owner_id\":\"buyer.dev-1660831615048-16894106456797\",\"token_ids\":[\"market-token\"],\"memo\":\"payout from market\"}]}\nReceipt: BBvHig5zg1n2vmxFPTpxED4FNCAU1ZzZ3H8EBqqaeRw5\nLog [dev-1660831638497-73655245450834]: EVENT_JSON:{\"standard\":\"nep141\",\"version\":\"1.0.0\",\"event\":\"ft_transfer\",\"data\":[{\"old_owner_id\":\"dev-1660831638497-73655245450834\",\"new_owner_id\":\"seller.dev-1660831615048-16894106456797\",\"amount\":\"20000000000000000000000000\",\"memo\":\"Sale from marketplace\"}]}\n```\n\nLet's call some view methods to double check if everything went well. First let's check if the seller now has `20 gtNEAR`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $FT_CONTRACT ft_balance_of '{\"account_id\": \"'$SELLER_ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $FT_CONTRACT ft_balance_of json-args '{\"account_id\": \"'$SELLER_ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nNext, let's check if the buyer has `30 gtNEAR` left to withdraw.", "mimetype": "text/plain", "start_char_idx": 24854, "end_char_idx": 26216, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256": {"__data__": {"id_": "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b", "node_type": "1", "metadata": {}, "hash": "fb17da9b57bf68cc20a7884d83ceb8639e225f267f609b12549f5e7823631ecb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1042c0a7-f43c-4a32-bbce-a37723af2239", "node_type": "1", "metadata": {}, "hash": "297d2114ad35b24294cf2a57c14c355dc1cbca6929d1ebe667216b221efaa3ec", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $MARKETPLACE_CONTRACT ft_deposits_of '{\"account_id\": \"'$BUYER_ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $MARKETPLACE_CONTRACT ft_deposits_of json-args '{\"account_id\": \"'$BUYER_ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nFinally, let's check if the NFT is now owned by the buyer.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $NFT_CONTRACT nft_token '{\"token_id\": \"market-token\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $NFT_CONTRACT nft_token json-args '{\"token_id\": \"market-token\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Withdrawing the Excess Deposits\n\nNow that the buyer purchased the NFT with `20 gtNEAR`, they should have `30 gtNEAR` left to withdraw. If they withdraw the tokens, they should be left with a balance of `30 gtNEAR` on the FT contract.", "mimetype": "text/plain", "start_char_idx": 26218, "end_char_idx": 27338, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1042c0a7-f43c-4a32-bbce-a37723af2239": {"__data__": {"id_": "1042c0a7-f43c-4a32-bbce-a37723af2239", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256", "node_type": "1", "metadata": {}, "hash": "f02bbffdbd56b49479612445027b9055cb0aa0b769f595fc5f7f3bbb085efefc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ad292271-7fb4-4163-9770-990a40ad6ff4", "node_type": "1", "metadata": {}, "hash": "275356426fb7fb99d292f2b1c17e068c74fc856ca6c08971afb1384fb39da854", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $MARKETPLACE_CONTRACT ft_withdraw '{\"amount\": \"30000000000000000000000000\"}' --accountId $BUYER_ID --depositYocto 1 --gas 300000000000000\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $MARKETPLACE_CONTRACT ft_withdraw json-args '{\"amount\": \"30000000000000000000000000\"}' prepaid-gas '300.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you now query for the buyer's balance, it should be `30 gtNEAR`.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view $FT_CONTRACT ft_balance_of '{\"account_id\": \"'$BUYER_ID'\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-read-only $FT_CONTRACT ft_balance_of json-args '{\"account_id\": \"'$BUYER_ID'\"}' network-config testnet now\n    ```\n  </TabItem>\n</Tabs>\n\nAnd just like that you're finished! You went through and put an NFT up for sale and purchased it using fungible tokens! **Go team \ud83d\ude80**\n\n---\n\n## Conclusion\n\nIn this tutorial, you learned about the basics of a marketplace contract and how it works. You went through the core logic both at a high level and looked at the code. You deployed an NFT, marketplace, and FT contract, initialized them all and then put an NFT for sale and sold it for fungible tokens! What an amazing experience! Go forth and expand these contracts to meet whatever needs you have. The world is your oyster and thank you so much for following along with this tutorial series. Don't hesitate to ask for help or clarification on anything in our discord or social media channels. **Go Team!", "mimetype": "text/plain", "start_char_idx": 27340, "end_char_idx": 29141, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ad292271-7fb4-4163-9770-990a40ad6ff4": {"__data__": {"id_": "ad292271-7fb4-4163-9770-990a40ad6ff4", "embedding": null, "metadata": {"file_path": "./near_dist/6-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150ff207-3e9e-4d5d-99d8-d88022e71575", "node_type": "4", "metadata": {}, "hash": "74d2c148b4eefe0b8893a9f98a082b42f469a2f3480ff921dbd77953a9763de0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1042c0a7-f43c-4a32-bbce-a37723af2239", "node_type": "1", "metadata": {}, "hash": "297d2114ad35b24294cf2a57c14c355dc1cbca6929d1ebe667216b221efaa3ec", "class_name": "RelatedNodeInfo"}}, "text": "**\n\n---\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-sdk-rs: `5.1.0` (with enabled `legacy` feature)\n- cargo-near: `0.6.1`\n- near-cli: `4.0.13`\n:::", "mimetype": "text/plain", "start_char_idx": 29141, "end_char_idx": 29383, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78c77b55-c0bd-4e33-a285-a2e2d81103e1": {"__data__": {"id_": "78c77b55-c0bd-4e33-a285-a2e2d81103e1", "embedding": null, "metadata": {"file_path": "./near_dist/transfer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ef9c78b4-b477-4a17-9788-055328c36ba3", "node_type": "4", "metadata": {}, "hash": "16ec91222f88cc5590e76581084d7fecb43e216cd60389c2396cacf6fcb74e60", "class_name": "RelatedNodeInfo"}}, "text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"nft-contract-tabs\" className=\"file-tabs\">\n<TabItem value=\"NFT Primitive\" label=\"Reference\" default>\n\n```bash\nnear call nft.primitives.near nft_transfer '{\"token_id\": \"1\", \"receiver_id\": \"bob.near\"}' --accountId bob.near --deposit 0.000000000000000000000001\n```\n\n</TabItem>\n\n<TabItem value=\"Paras\" label=\"Paras\">\n\n```bash\nnear call x.paras.near nft_transfer '{\"token_id\": \"490641\", \"receiver_id\": \"bob.near\"}' --accountId bob.near --deposit 0.000000000000000000000001\n```\n\n</TabItem>\n\n<TabItem value=\"Mintbase\" label=\"Mintbase\">\n\n```bash\nnear call thomasettorreiv.mintbase1.near nft_transfer '{\"token_id\": \"490641\" \"receiver_id\": \"bob.near\"}' --accountId bob.near --deposit 0.000000000000000000000001\n```\n\n</TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 810, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2fc99b53-171b-4143-bef3-8acb338f0d24": {"__data__": {"id_": "2fc99b53-171b-4143-bef3-8acb338f0d24", "embedding": null, "metadata": {"file_path": "./near_dist/meta-improvement.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "337d93bd-dc47-40d3-a7e7-ae07494f5995", "node_type": "4", "metadata": {}, "hash": "f59470ae721a29ddf2d67b5cb9bd5e0f796794d49da1f35c0547f494e9c86157", "class_name": "RelatedNodeInfo"}}, "text": "---\nname: Meta improvement \ud83d\udca1\nabout: This is for an improvement to the workflow and/or tooling\ntitle: \"[META]\"\nlabels: enhancement\nassignees: ''\n\n---\n\n**Is your feature request related to a problem? Please describe.**\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\n\n**Describe the solution you'd like**\nA clear and concise description of what you want to happen.\n\n**Additional context**\nAdd any other context or screenshots about the feature request here.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 500, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "38899778-8ae5-4d6e-b935-ab343a594d70": {"__data__": {"id_": "38899778-8ae5-4d6e-b935-ab343a594d70", "embedding": null, "metadata": {"file_path": "./near_dist/01-access-key-solution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6275d904-ab30-467c-a419-9dede89167f7", "node_type": "4", "metadata": {}, "hash": "a45cfa5da958a0697d208d34e959947a07b752013192109fcd3bf268caefe85e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe", "node_type": "1", "metadata": {}, "hash": "b91944d5f531da66d1ef27afb1e7275d3daead6e7f4a7a7cfd2eaaa1a7e47540", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 2\nsidebar_label: \"Solution as seed phrase\"\ntitle: \"Replacing the solution hash with an access key\"\n---\n\nimport puzzleFrontrun from '/docs/assets/crosswords/puzzle-frontrun.png';\nimport padlockSafe from '/docs/assets/crosswords/safe-with-access-key--soulless.near--ZeroSerotonin__.png';\n\n# Replacing our solution hash\n\nSo far in this tutorial, the user sends the plaintext solution to the crossword puzzle smart contract, where it's hashed and compared with the known answer.\n\nThis works, but we might want to be more careful and avoid sending the plaintext solution.\n\n## Why?\n\nBlockchains rely on many computers processing transactions. When you send a transaction to the blockchain, it doesn't immediately get processed. In some Layer 1 blockchains it can take minutes or longer. On NEAR transactions settle within a couple seconds, but nonetheless there's a small period of waiting time.\n\nWhen we previously sent the crossword puzzle solution in plain text (via the parameter `solution` to `submit_solution`) it means it's visible to everyone before it gets processed.\n\nAt the time of this writing, there haven't been outstanding incidents of validators \"front-running\" transactions, but it's something to be aware of. Front-running is when a validator sees a transaction that might be profitable and does it themselves.\n\nThere have been several incidents of this and it continues to be an issue.\n\n<figure>\n    <img src={puzzleFrontrun} alt=\"Tweet talking about a puzzle where tens of thousands of dollars were taken because of a frontrun attack\" width=\"600\"/>\n    <figcaption>Real-life example of a puzzle being front-run.<br/>Read <a href=\"https://twitter.com/_anishagnihotri/status/1444113372715356162\" target=\"_blank\" rel=\"noopener noreferrer\">Anish Agnihotri's thread</a></figcaption>\n</figure>\n<br/>\n\n## How?\n\nWe're doing to do something unique \u2014 and frankly unusual \u2014 with our crossword puzzle. We're going to use function-call access keys in a new way.\n\nOur crossword puzzle smart contract will add a function-call access key to itself. The private key is derived from the solution, used as a seed phrase.\n\n:::info What's a seed phrase, again?\nA private key is essentially a very large number.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2225, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe": {"__data__": {"id_": "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe", "embedding": null, "metadata": {"file_path": "./near_dist/01-access-key-solution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6275d904-ab30-467c-a419-9dede89167f7", "node_type": "4", "metadata": {}, "hash": "a45cfa5da958a0697d208d34e959947a07b752013192109fcd3bf268caefe85e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "38899778-8ae5-4d6e-b935-ab343a594d70", "node_type": "1", "metadata": {}, "hash": "a00d8ec699c5758ed80e5722e98ba45969fe462fdacf670bb2df6e8c15275ba5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a518dd7-4123-4ed2-872f-c789a3db67a2", "node_type": "1", "metadata": {}, "hash": "d61977b37f709e19e14b2ba565025e7d4fa5ce82f3dec2579b2140b2713e8674", "class_name": "RelatedNodeInfo"}}, "text": "So large that the number of possible private keys is approaching the estimated number of atoms in the known universe.\n\nIt would be pretty long if we wrote it down, so it's often made human-readable with numbers and letters. However, even the human-readable version is hard to memorize and prone to mistakes.\n\nA seed phrase is a series of words (usually 12 or 24 words) that create a private key. (There's actually a [bit more to it](https://learnmeabitcoin.com/technical/mnemonic).)\n\nSeed phrases typically use a [BIP-30 wordlist](https://github.com/bitcoin/bips/blob/master/bip-0039/bip-0039-wordlists.md), but *they do not need to* use a wordlist or have a certain number of words. As long as the words create entropy, a crossword puzzle solution can act as a deterministic seed phrase.\n:::\n\nSo when we add a new puzzle, we'll use the `AddKey` Action to add a limited, function-call access key can that *only* call the `submit_solution` method.\n\nThe first user to solve the puzzle will essentially \"discover\" the private key and call that method. Think of it like a safe that contains a function-call access key.\n\n<figure>\n    <img src={padlockSafe} alt=\"A small safe with a padlock containing words to a seed phrase, and you can see through the safe, showing it holds a function-call access key. Art created by soulless.near.\"/>\n    <figcaption className=\"full-width\">Open the safe using answers to the puzzle, revealing the function-call access key.<br/>Art by <a href=\"https://twitter.com/ZeroSerotonin__\" target=\"_blank\" rel=\"noopener noreferrer\">soulless.near</a></figcaption>\n</figure><br/>\n\nOur method `submit_solution` no longer needs to hash the plaintext answer, but instead looks at the key that signed this transaction. Cool, huh!\n\n## Onboarding\n\nIn the previous chapter we implemented login to the crossword, but this requires a person to have a NEAR account.\n\nIf the end user is discovering a key that exists on the crossword contract, they don't even need a NEAR account, right? Well, that's partly accurate, but we'll still need to send the prize in NEAR somewhere.", "mimetype": "text/plain", "start_char_idx": 2226, "end_char_idx": 4309, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a518dd7-4123-4ed2-872f-c789a3db67a2": {"__data__": {"id_": "8a518dd7-4123-4ed2-872f-c789a3db67a2", "embedding": null, "metadata": {"file_path": "./near_dist/01-access-key-solution.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6275d904-ab30-467c-a419-9dede89167f7", "node_type": "4", "metadata": {}, "hash": "a45cfa5da958a0697d208d34e959947a07b752013192109fcd3bf268caefe85e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe", "node_type": "1", "metadata": {}, "hash": "b91944d5f531da66d1ef27afb1e7275d3daead6e7f4a7a7cfd2eaaa1a7e47540", "class_name": "RelatedNodeInfo"}}, "text": "What if we could make the winner an account on the fly? Is that possible? Yes, and that's what we're going to do in this chapter.", "mimetype": "text/plain", "start_char_idx": 4311, "end_char_idx": 4440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1ea9281-3f4b-4198-abe1-40ce75a3913d": {"__data__": {"id_": "b1ea9281-3f4b-4198-abe1-40ce75a3913d", "embedding": null, "metadata": {"file_path": "./near_dist/0-intro.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "83aa8e0b-67eb-4dda-9acd-6b94ac620b36", "node_type": "4", "metadata": {}, "hash": "858765274e507bf79f8440c76666e59c0c4cb8eb18a32073b12a5f0380406a40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe5c43e5-e8c9-4e87-9fee-bc7492e6ebf7", "node_type": "1", "metadata": {}, "hash": "f41053c21c70c52101cb186ead01400a5f7d8c0d3fe6bbbf9e73e5b0927a31d4", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: introduction\ntitle: NFT Zero to Hero JavaScript Edition\nsidebar_label: Introduction\n---\n\n> In this _Zero to Hero_ series, you'll find a set of tutorials that will cover every aspect of a non-fungible token (NFT) smart contract.\n> You'll start by minting an NFT using a pre-deployed contract and by the end you'll end up building a fully-fledged NFT smart contract that supports every extension.\n\n\n\n## Prerequisites\n\nTo complete these tutorials successfully, you'll need:\n\n- [Node.js](/build/smart-contracts/quickstart#prerequisites#nodejs)\n- [A NEAR Wallet](https://testnet.mynearwallet.com/create)\n- [NEAR-CLI](/tools/near-cli#installation)\n\n---\n\n## Overview\n\nThese are the steps that will bring you from **_Zero_** to **_Hero_** in no time! \ud83d\udcaa\n\n| Step | Name                                                             | Description                                                                                                            |\n|------|------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|\n| 1    | [Pre-deployed contract](/tutorials/nfts/js/predeployed-contract) | Mint an NFT without the need to code, create, or deploy a smart contract.                                              |\n| 2    | [Contract architecture](/tutorials/nfts/js/skeleton)             | Learn the basic architecture of the NFT smart contract and compile code.                                               |\n| 3    | [Minting](/tutorials/nfts/js/minting)                            | Flesh out the skeleton so the smart contract can mint a non-fungible token.                                            |\n| 4    | [Upgrade a contract](/tutorials/nfts/js/upgrade-contract)        | Discover the process to upgrade an existing smart contract.                                                            |\n| 5    | [Enumeration](/tutorials/nfts/js/enumeration)                    | Explore enumeration methods that can be used to return the smart contract's states.                                    |\n| 6    | [Core](/tutorials/nfts/js/core)                                  | Extend the NFT contract using the core standard which allows token transfer                                            |\n| 7    | [Approvals](/tutorials/nfts/js/approvals)                        | Expand the contract allowing other accounts to transfer NFTs on your behalf.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2482, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe5c43e5-e8c9-4e87-9fee-bc7492e6ebf7": {"__data__": {"id_": "fe5c43e5-e8c9-4e87-9fee-bc7492e6ebf7", "embedding": null, "metadata": {"file_path": "./near_dist/0-intro.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "83aa8e0b-67eb-4dda-9acd-6b94ac620b36", "node_type": "4", "metadata": {}, "hash": "858765274e507bf79f8440c76666e59c0c4cb8eb18a32073b12a5f0380406a40", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1ea9281-3f4b-4198-abe1-40ce75a3913d", "node_type": "1", "metadata": {}, "hash": "32651507163dc41e8e0dddd3191f1a6b7c4c579170ceddb4c771d63ffc3796b2", "class_name": "RelatedNodeInfo"}}, "text": "|\n| 8    | [Royalty](/tutorials/nfts/js/royalty)                            | Add NFT royalties allowing for a set percentage to be paid out to the token creator.                                   |\n| 9    | [Events](/tutorials/nfts/js/events)                              | in this tutorial you'll explore the events extension, allowing the contract to react on certain events.                |\n| 10   | [Marketplace](/tutorials/nfts/js/marketplace)                    | Learn about how common marketplaces operate on NEAR and dive into some of the code that allows buying and selling NFTs |\n\n---\n\n## Next steps\n\nReady to start? Jump to the [Pre-deployed Contract](/tutorials/nfts/js/predeployed-contract) tutorial and begin your learning journey!\n\nIf you already know about non-fungible tokens and smart contracts, feel free to skip and jump directly to the tutorial of your interest. The tutorials have been designed so you can start at any given point!\n\n:::info Questions?\n\ud83d\udc49 Join us on [Discord](https://near.chat/) and let us know in the `#development` channels. \ud83d\udc48\n\nWe also host daily [Office Hours](https://pages.near.org/developers/get-help/office-hours/) live where the DevRel team will answer any questions you may have. \ud83e\udd14\n\nMonday \u2013 Friday 11AM \u2013 12PM Pacific (6PM \u2013 7PM UTC)\n:::", "mimetype": "text/plain", "start_char_idx": 2525, "end_char_idx": 3813, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6acc146a-a015-4b6d-a5aa-8c125c8f55d3": {"__data__": {"id_": "6acc146a-a015-4b6d-a5aa-8c125c8f55d3", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2cc0025d-b282-48a3-8e3a-12d2f2bca24f", "node_type": "1", "metadata": {}, "hash": "1ece9e4b75301119c27ebce54dcedc62560697544f819124e9638b0ea2c3b0c4", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 4\nsidebar_label: \"Hash the solution, unit tests, and an init method\"\ntitle: \"Introduction to basic hashing and adding unit tests\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport batchCookieTray from '/docs/assets/crosswords/batch-of-actions--dobulyo.near--w_artsu.jpg';\n\n# Hash the solution, add basic unit tests\n\nIn the previous section, we stored the crossword solution as plain text as a `String` type on the smart contract. If we're trying to hide the solution from the users, this isn't a great approach as it'll be public to anyone looking at the state. Let's instead hash our crossword solution and store that instead. There are different ways to hash data, but let's use `sha256` which is one of the hashing algorithms available in [the Rust SDK](https://docs.rs/near-sdk/latest/near_sdk/env/fn.sha256.html).\n\n:::info Remind me about hashing\nWithout getting into much detail, hashing is a \"one-way\" function that will output a result from a given input. If you have input (in our case, the crossword puzzle solution) you can get a hash, but if you have a hash you cannot get the input. This basic idea is foundational to information theory and security.\n\nLater on in this tutorial, we'll switch from using `sha256` to using cryptographic key pairs to illustrate additional NEAR concepts.\n\nLearn more about hashing from [Evgeny Kapun](https://github.com/abacabadabacaba)'s presentation on the subject. You may find other NEAR-related videos from the channel linked in the screenshot below.\n\n[![Evgeny Kapun presents details on hashing](/docs/assets/crosswords/kapun-hashing.png)](https://youtu.be/PfabikgnD08)\n:::\n\n## Helper unit test during rapid iteration\n\nAs mentioned in the first section of this **Basics** chapter, our smart contract is technically a library as defined in the manifest file. For our purposes, a consequence of writing a library in Rust is not having a \"main\" function that runs. You may find many online tutorials where the command `cargo run` is used during development.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2111, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2cc0025d-b282-48a3-8e3a-12d2f2bca24f": {"__data__": {"id_": "2cc0025d-b282-48a3-8e3a-12d2f2bca24f", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6acc146a-a015-4b6d-a5aa-8c125c8f55d3", "node_type": "1", "metadata": {}, "hash": "e5bdd6078067f46aa788ee0a148cd49256be039ec03b6bd0b2a0db1556a0deb9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "43fa3d47-af19-4a14-916c-9095d3bd5dfa", "node_type": "1", "metadata": {}, "hash": "b2e8e82b4b1ce54587d7c7f9ef3be3f3c42dd397401b21c77e8ed89f464c35fd", "class_name": "RelatedNodeInfo"}}, "text": "We don't have this luxury, but we can use unit tests to interact with our smart contract. This is likely more convenient than building the contract, deploying to a blockchain network, and calling a method.\n\nWe'll add a dependency to the [hex crate](https://crates.io/crates/hex) to make things easier. As you may remember, dependencies live in the manifest file.\n\n<Github language=\"rust\" start=\"10\" end=\"12\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/master/contract/Cargo.toml\" />\n\nLet's write a unit test that acts as a helper during development. This unit test will sha256 hash the input **\"near nomicon ref finance\"** and print it in a human-readable, hex format. (We'll typically put unit tests at the bottom of the `lib.rs` file.)\n\n<Github language=\"rust\" start=\"43\" end=\"60\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/master/contract/src/lib.rs\" />\n\n:::info What is that `{:?}` thing?\nTake a look at different formatting traits that are covered in the [`std` Rust docs](https://doc.rust-lang.org/std/fmt/index.html#formatting-traits) regarding this. This is a `Debug` formatting trait and can prove to be useful during development.\n:::\n\nRun the unit tests with the command:\n\n```\ncargo test -- --nocapture\n```\n\nYou'll see this output:\n\n```\n\u2026\nrunning 1 test\nLet's debug: \"69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f\"\ntest tests::debug_get_hash ... ok\n\ntest result: ok.", "mimetype": "text/plain", "start_char_idx": 2112, "end_char_idx": 3564, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "43fa3d47-af19-4a14-916c-9095d3bd5dfa": {"__data__": {"id_": "43fa3d47-af19-4a14-916c-9095d3bd5dfa", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2cc0025d-b282-48a3-8e3a-12d2f2bca24f", "node_type": "1", "metadata": {}, "hash": "1ece9e4b75301119c27ebce54dcedc62560697544f819124e9638b0ea2c3b0c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a654a13d-8031-4789-bb3c-7f4d2a929d5b", "node_type": "1", "metadata": {}, "hash": "a4d1448bdebe0d9fd611eb27f3f8f7142c63e7ad6e8e0010e60b71456f8828d4", "class_name": "RelatedNodeInfo"}}, "text": "1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n```\n\nThis means when you sha256 the input **\"near nomicon ref finance\"** it produces the hash:\n`69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f`\n\n:::tip Note on the test flags\nYou may also run tests using:\n\n```\ncargo test\n```\n\nNote that the test command we ran had additional flags. Those flags told Rust **not to hide the output** from the tests. You can read more about this in [the cargo docs](https://doc.rust-lang.org/cargo/commands/cargo-test.html#display-options). Go ahead and try running the tests using the command above, without the additional flags, and note that we won't see the debug message.\n:::\n\nThe unit test above is meant for debugging and quickly running snippets of code. Some may find this a useful technique when getting familiar with Rust and writing smart contracts. Next we'll write a real unit test that applies to this early version of our crossword puzzle contract.\n\n## Write a regular unit test\n\nLet's add this unit test (inside the `mod tests {}` block, under our previous unit test) and analyze it:\n\n<Github language=\"rust\" start=\"62\" end=\"92\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/master/contract/src/lib.rs\" />\n\nThe first few lines of code will be used commonly when writing unit tests. It uses the `VMContextBuilder` to create some basic context for a transaction, then sets up the testing environment.\n\nNext, an object is created representing the contract and the `set_solution` function is called. After that, the `guess_solution` function is called twice: first with the incorrect solution and then the correct one. We can check the logs to determine that the function is acting as expected.\n\n:::info Note on assertions\nThis unit test uses the [`assert_eq!`](https://doc.rust-lang.org/std/macro.assert_eq.html) macro.", "mimetype": "text/plain", "start_char_idx": 3565, "end_char_idx": 5449, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a654a13d-8031-4789-bb3c-7f4d2a929d5b": {"__data__": {"id_": "a654a13d-8031-4789-bb3c-7f4d2a929d5b", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43fa3d47-af19-4a14-916c-9095d3bd5dfa", "node_type": "1", "metadata": {}, "hash": "b2e8e82b4b1ce54587d7c7f9ef3be3f3c42dd397401b21c77e8ed89f464c35fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "99da5886-5c08-4488-9761-5ba577006ff0", "node_type": "1", "metadata": {}, "hash": "83a39aa025529971a8ded8f53096f232e3cc0b7de2d8a395f500a3726945f8ab", "class_name": "RelatedNodeInfo"}}, "text": "Similar macros like [`assert!`](https://doc.rust-lang.org/std/macro.assert.html) and [`assert_ne!`](https://doc.rust-lang.org/std/macro.assert_ne.html) are commonly used in Rust. These are great to use in unit tests. However, these will add unnecessary overhead when added to contract logic, and it's recommended to use the [`require!` macro](https://docs.rs/near-sdk/4.0.0-pre.2/near_sdk/macro.require.html). See more information on this and [other efficiency tips here](../../../2.build/2.smart-contracts/anatomy/reduce-size.md).\n:::\n\nAgain, we can run all the unit tests with:\n\n```\ncargo test -- --nocapture\n```\n\n:::tip Run only one test\nTo only run this latest test, use the command:\n\n```\ncargo test check_guess_solution -- --nocapture\n```\n\n:::\n\n## Modifying `set_solution`\n\nThe [overview section](00-overview.md) of this chapter tells us we want to have a single crossword puzzle and the user solving the puzzle should not be able to know the solution. Using a hash addresses this, and we can keep `crossword_solution`'s field type, as `String` will work just fine. The overview also indicates we only want the author of the crossword puzzle to be able to set the solution. As it stands, our function `set_solution` can be called by anyone with a full-access key. It's trivial for someone to create a NEAR account and call this function, changing the solution. Let's fix that.\n\nLet's have the solution be set once, right after deploying the smart contract.\n\nHere we'll use the [`#[near]` macro](https://docs.rs/near-sdk/latest/near_sdk/attr.near.html) on a function called `new`, which is a common pattern.\n\n<Github language=\"rust\" start=\"9\" end=\"17\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/master/contract/src/lib.rs\" />\n\nLet's call this method on a fresh contract.", "mimetype": "text/plain", "start_char_idx": 5450, "end_char_idx": 7253, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "99da5886-5c08-4488-9761-5ba577006ff0": {"__data__": {"id_": "99da5886-5c08-4488-9761-5ba577006ff0", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a654a13d-8031-4789-bb3c-7f4d2a929d5b", "node_type": "1", "metadata": {}, "hash": "a4d1448bdebe0d9fd611eb27f3f8f7142c63e7ad6e8e0010e60b71456f8828d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7cbd59cc-15bf-4509-be3f-855109c82624", "node_type": "1", "metadata": {}, "hash": "71d8c8b024ba1ee8b0b9bbf20397175572439db8adea4f31b48a86ec35e3ab28", "class_name": "RelatedNodeInfo"}}, "text": "Go into the directory containing the Rust smart contract and build it:\n\n```bash\ncd contract\n\n# Build\ncargo near build\n```\n\nCreate fresh account if you wish, which is good practice:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Delete an account\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n  \n  # Create an account again\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Delete an account\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # Create an account again\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nDeploy the contract:\n\n```bash\ncargo near deploy crossword.friend.testnet without-init-call network-config testnet sign-with-keychain send\n```\n\nCall the \"new\" method:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near call crossword.friend.testnet new '{\"solution\": \"69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f\"}' --gas 100000000000000 --accountId crossword.friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-transaction crossword.friend.testnet new json-args '{\"solution\": \"69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as crossword.friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nNow the crossword solution, as a hash, is stored instead.", "mimetype": "text/plain", "start_char_idx": 7255, "end_char_idx": 9118, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7cbd59cc-15bf-4509-be3f-855109c82624": {"__data__": {"id_": "7cbd59cc-15bf-4509-be3f-855109c82624", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "99da5886-5c08-4488-9761-5ba577006ff0", "node_type": "1", "metadata": {}, "hash": "83a39aa025529971a8ded8f53096f232e3cc0b7de2d8a395f500a3726945f8ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea", "node_type": "1", "metadata": {}, "hash": "4c1d7e2dfc00a6e6ef6e0e2f0433aa131c73a60068a35e06d14adf57cb7ec325", "class_name": "RelatedNodeInfo"}}, "text": "If you try calling the last command again, you'll get the error message, thanks to the `#[init]` macro:\n`The contract has already been initialized`\n\n## First use of Batch Actions\n\nThis is close to what we want, but what if a person deploys their smart contract and **someone else** quickly calls the `new` function before them? We want to make sure the same person who deployed the contract sets the solution, and we can do this using Batch Actions. Besides, why send two transactions when we can do it in one? (Technical details covered in the spec for a [batch transaction here](https://nomicon.io/RuntimeSpec/Transactions.html?highlight=batch#batched-transaction).)\n\n<figure>\n    <img src={batchCookieTray} alt=\"Cookie sheet representing a transaction, where cookies are Deploy and FunctionCall Actions. Art created by dobulyo.near.\"/>\n    <figcaption className=\"full-width\">Art by <a href=\"https://twitter.com/w_artsu\" target=\"_blank\" rel=\"noopener noreferrer\">dobulyo.near</a></figcaption>\n</figure><br/>\n\n:::info Batch Actions in use\nBatch Actions are common in this instance, where we want to deploy and call an initialization function. They're also common when using a factory pattern, where a subaccount is created, a smart contract is deployed to it, a key is added, and a function is called.\n\nHere's a truncated snippet from a useful (though somewhat advanced) repository with a wealth of useful code:\n<Github language=\"rust\" start=\"172\" end=\"177\" url=\"https://github.com/near/core-contracts/blob/1720c0cfee238974ebeae8ad43076abeb951504f/staking-pool-factory/src/lib.rs\" />\n\nWe'll get into Actions later in this tutorial, but in the meantime here's a handy [reference from the spec](https://nomicon.io/RuntimeSpec/Actions.html).\n:::\n\nAs you can from the info bubble above, we can batch [Deploy](https://docs.rs/near-sdk/3.1.0/near_sdk/struct.Promise.html#method.deploy_contract) and [FunctionCall](https://docs.rs/near-sdk/3.1.0/near_sdk/struct.Promise.html#method.function_call) Actions.", "mimetype": "text/plain", "start_char_idx": 9119, "end_char_idx": 11118, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea": {"__data__": {"id_": "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7cbd59cc-15bf-4509-be3f-855109c82624", "node_type": "1", "metadata": {}, "hash": "71d8c8b024ba1ee8b0b9bbf20397175572439db8adea4f31b48a86ec35e3ab28", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0098cd9f-3ca0-4065-a48a-2a9d96ae2751", "node_type": "1", "metadata": {}, "hash": "4bc3c094e55b07ebda85ac88d8c8425efada64d58adf3cd0a639a58c1b7f02d7", "class_name": "RelatedNodeInfo"}}, "text": "This is exactly what we want to do for our crossword puzzle, and luckily, NEAR CLI has a [flag especially for this](https://docs.near.org/tools/near-cli#near-deploy).\n\nLet's run this again with the handy `--initFunction` and `--initArgs` flags:\n\nCreate fresh account if you wish, which is good practice:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Delete an account\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n  \n  # Create an account again\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Delete an account\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # Create an account again\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nDeploy the contract and call the initialization method:\n\n```bash\ncargo near deploy crossword.friend.testnet with-init-call new json-args '{\"solution\": \"69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nNow that we're using Batch Actions, no one can call this `new` method before us.\n\n:::note Batch action failures\nIf one Action in a set of Batch Actions fails, the entire transaction is reverted. This is good to note because sharded, proof-of-stake systems do not work like proof-of-work where a complex transaction with multiple cross-contract calls reverts if one call fails. With NEAR, cross-contract calls use callbacks to ensure expected behavior, but we'll get to that later.", "mimetype": "text/plain", "start_char_idx": 11119, "end_char_idx": 13025, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0098cd9f-3ca0-4065-a48a-2a9d96ae2751": {"__data__": {"id_": "0098cd9f-3ca0-4065-a48a-2a9d96ae2751", "embedding": null, "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23d0d087-64bc-4bb1-a288-c4b162c05799", "node_type": "4", "metadata": {}, "hash": "f3ad67f96c3e269e083e09cffd08dbfd1348a0c198edb9520e6b00bb598093a5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea", "node_type": "1", "metadata": {}, "hash": "4c1d7e2dfc00a6e6ef6e0e2f0433aa131c73a60068a35e06d14adf57cb7ec325", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n## Get ready for our frontend\n\nIn the previous section we showed that we could use a `curl` command to view the state of the contract without explicitly having a function that returns a value from state. Now that we've demonstrated that and hashed the solution, let's add a short view-only function `get_solution`.\n\nIn the next section we'll add a simple frontend for our single, hardcoded crossword puzzle. We'll want to easily call a function to get the final solution hash. We can use this opportunity to remove the function `get_puzzle_number` and the constant it returns, as these were use for informative purposes.\n\nWe'll also modify our `guess_solution` to return a boolean value, which will also make things easier for our frontend.\n\n<Github language=\"rust\" start=\"19\" end=\"34\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/94f42e75cf70ed2aafb9c29a1faa1e21f079a49e/contract/src/lib.rs\" />\n\nThe `get_solution` method can be called with:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view crossword.friend.testnet get_solution '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only crossword.friend.testnet get_solution json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nIn the next section we'll add a simple frontend. Following chapters will illustrate more NEAR concepts built on top of this idea.", "mimetype": "text/plain", "start_char_idx": 13026, "end_char_idx": 14505, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d90ec3b2-2cdd-4265-bede-bb6d050e7101": {"__data__": {"id_": "d90ec3b2-2cdd-4265-bede-bb6d050e7101", "embedding": null, "metadata": {"file_path": "./near_dist/3-enumeration.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5", "node_type": "4", "metadata": {}, "hash": "ac3a423d5c6baf27e2c6ded893dcc5a14cfdc04b137439fd0e23204e149eef94", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3cd0411e-55c3-409d-bb95-0658dc4c9641", "node_type": "1", "metadata": {}, "hash": "ec1e08517f34eb7bd2afdfaa6997b298bf725896565ba8ebe83cc44b29e7c408", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: enumeration\ntitle: Enumeration\nsidebar_label: Enumeration\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\nIn the previous tutorials, you looked at ways to integrate the minting functionality into a skeleton smart contract. In order to get your NFTs to show in the wallet, you also had to deploy a patch fix that implemented one of the enumeration methods. In this tutorial, you'll expand on and finish the rest of the enumeration methods as per the [standard](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration)\nNow you'll extend the NFT smart contract and add a couple of enumeration methods that can be used to return the contract's state.\n\n\n\n\n## Introduction\n\nAs mentioned in the [Upgrade a Contract](/tutorials/nfts/js/upgrade-contract/) tutorial, you can deploy patches and fixes to smart contracts. This time, you'll use that knowledge to implement the `nft_total_supply`, `nft_tokens` and `nft_supply_for_owner` enumeration functions.\n\nTo get started, either switch to the `2.minting` branch from our [GitHub repository](https://github.com/near-examples/nft-tutorial/), or continue your work from the previous tutorials.\nIf you haven't cloned it yet, refer to the [Contract Architecture](/tutorials/nfts/js/skeleton#building-the-skeleton) to check out the repository.\n\n```bash\ngit checkout 2.minting\n```\n\n:::tip\nIf you wish to see the finished code for this _Enumeration_ tutorial, you can find it on the `3.enumeration` branch.\n:::\n\n## Modifications to the contract\n\nLet's start by opening the  `src/enumeration.ts` file and locating the empty `internalNftTotalSupply` function. \n\n### NFT Total Supply\n\nThis function should return the total number of NFTs stored on the contract. You can easily achieve this functionality by simply returning the length of the `nftMetadataById` data structure.\n\n<Github language=\"js\" start=\"8\" end=\"16\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/3.enumeration/src/nft-contract/enumeration.ts\" />\n\n### NFT Tokens\n\nThis function should return a paginated list of `JsonTokens` that are stored on the contract regardless of their owners.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2122, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3cd0411e-55c3-409d-bb95-0658dc4c9641": {"__data__": {"id_": "3cd0411e-55c3-409d-bb95-0658dc4c9641", "embedding": null, "metadata": {"file_path": "./near_dist/3-enumeration.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5", "node_type": "4", "metadata": {}, "hash": "ac3a423d5c6baf27e2c6ded893dcc5a14cfdc04b137439fd0e23204e149eef94", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d90ec3b2-2cdd-4265-bede-bb6d050e7101", "node_type": "1", "metadata": {}, "hash": "1e43683706f151ee3e5d9ed44c051ee06a201dd740f8dac207dd1dd459492f4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0d41dd5-bc88-48c6-9024-3dd8112078ab", "node_type": "1", "metadata": {}, "hash": "e475d8c2a0c31b0aa0717f2909ae9381a99fea5cf22047c5062717da920d8f3c", "class_name": "RelatedNodeInfo"}}, "text": "If the user provides a `from_index` parameter, you should use that as the starting point for which to start iterating through tokens; otherwise it should start from the beginning. Likewise, if the user provides a `limit` parameter, the function shall stop after reaching either the limit or the end of the list.\n\n<Github language=\"js\" start=\"18\" end=\"43\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/3.enumeration/src/nft-contract/enumeration.ts\" />\n\n### NFT Supply For Owner\n\nThis function should look for all the non-fungible tokens for a user-defined owner, and return the length of the resulting set.\nIf there isn't a set of tokens for the provided Account ID, then the function shall return `0`.\n\n<Github language=\"js\" start=\"45\" end=\"62\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/3.enumeration/src/nft-contract/enumeration.ts\" />\n\nNext, you can use the CLI to query these new methods and validate that they work correctly.\n\n## Redeploying the contract {#redeploying-contract}\n\nNow that you've implemented the necessary logic for `nft_tokens_for_owner`, it's time to build and re-deploy the contract to your account. Using the build script, deploy the contract as you did in the previous tutorials:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $NFT_CONTRACT_ID\n```\n\nThis should output a warning saying that the account has a deployed contract and will ask if you'd like to proceed. Simply type `y` and hit enter.\n\n```\nThis account already has a deployed contract [ AKJK7sCysrWrFZ976YVBnm6yzmJuKLzdAyssfzK9yLsa ]. Do you want to proceed? (y/n)\n```\n\n## Enumerating tokens\n\nOnce the updated contract has been redeployed, you can test and see if these new functions work as expected.\n\n### NFT tokens\n\nLet's query for a list of non-fungible tokens on the contract.", "mimetype": "text/plain", "start_char_idx": 2123, "end_char_idx": 3946, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0d41dd5-bc88-48c6-9024-3dd8112078ab": {"__data__": {"id_": "e0d41dd5-bc88-48c6-9024-3dd8112078ab", "embedding": null, "metadata": {"file_path": "./near_dist/3-enumeration.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5", "node_type": "4", "metadata": {}, "hash": "ac3a423d5c6baf27e2c6ded893dcc5a14cfdc04b137439fd0e23204e149eef94", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3cd0411e-55c3-409d-bb95-0658dc4c9641", "node_type": "1", "metadata": {}, "hash": "ec1e08517f34eb7bd2afdfaa6997b298bf725896565ba8ebe83cc44b29e7c408", "class_name": "RelatedNodeInfo"}}, "text": "Use the following command to query for the information of up to 50 NFTs starting from the 10th item:\n\n```bash\nnear view $NFT_CONTRACT_ID nft_tokens '{\"from_index\": \"10\", \"limit\": 50}'\n```\n\nThis command should return an output similar to the following:\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n[]\n```\n\n</p>\n</details>\n\n### Tokens by owner\n\nTo get the total supply of NFTs owned by the `goteam.testnet` account, call the `nft_supply_for_owner` function and set the `account_id` parameter:\n\n```bash\nnear view $NFT_CONTRACT_ID nft_supply_for_owner '{\"account_id\": \"goteam.testnet\"}'\n```\n\nThis should return an output similar to the following:\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n0\n```\n\n</p>\n</details>\n\n## Conclusion\n\nIn this tutorial, you have added two [new enumeration functions](/tutorials/nfts/js/enumeration#modifications-to-the-contract), and now you have a basic NFT smart contract with minting and enumeration methods in place. After implementing these modifications, you redeployed the smart contract and tested the functions using the CLI.\n\nIn the [next tutorial](/tutorials/nfts/js/core), you'll implement the core functions needed to allow users to transfer the minted tokens.\n\n:::info Remember\nIf you want to see the finished code from this tutorial, you can checkout the `3.enumeration` branch. \n:::\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Enumeration standard: [NEP181](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 3947, "end_char_idx": 5662, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf10d780-792a-42ab-a44a-c0775a60d343": {"__data__": {"id_": "bf10d780-792a-42ab-a44a-c0775a60d343", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac3248e7-a58c-4e0c-8e1c-a9c326585b26", "node_type": "1", "metadata": {}, "hash": "b982089714c3ef6660a9b2b71454763d661cb8bc148a91d28ed409ef3867169d", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 6\nsidebar_label: \"Base64 params, wrap up\"\ntitle: \"Using base64-encoded arguments when we create a new crossword puzzle\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n# Final modifications\n\nimport base64Encode from '/docs/assets/crosswords/boop-base64-encode.gif';\n\nLet's modify our `new_puzzle` method a bit, and demonstrate how a smart contract author might use base64-encoded arguments.\n\nIn the previous chapter we had a fairly long NEAR CLI command that called the `new_puzzle`, providing it the parameters for all the clues. Having these lengthy parameters on the CLI might get cumbersome. There may be issues needing to escape single or double quotes, and each operating system may wish for a different format on the Terminal or Command Prompt.\n\nWe're going to send all the arguments as a base64-encoded string, and make this a bit simpler. For this, we're going to use [`Base64VecU8` from the SDK](https://docs.rs/near-sdk/latest/near_sdk/json_types/struct.Base64VecU8.html).\n\n:::note `Base64VecU8` is great for binary payloads\nWhat we're doing makes sense, but it's worth noting that it's perhaps more common to use `Base64VecU8` when sending binary parameters.\n\nRead more [about it here](../../../2.build/2.smart-contracts/anatomy/serialization-interface.md).\n:::\n\nFirst we'll set up a struct for the arguments we're expecting:\n\n<Github language=\"rust\" start=\"103\" end=\"108\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\nThen we modify our `new_puzzle` method like so:\n\n<Github language=\"rust\" start=\"281\" end=\"289\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-3/blob/master/contract/src/lib.rs\" />\n\nWe can take our original arguments and base64 encode them, using whatever method you prefer. There are plenty of online tool, Terminal commands, and open source applications like [Boop](https://boop.okat.best).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2001, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac3248e7-a58c-4e0c-8e1c-a9c326585b26": {"__data__": {"id_": "ac3248e7-a58c-4e0c-8e1c-a9c326585b26", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bf10d780-792a-42ab-a44a-c0775a60d343", "node_type": "1", "metadata": {}, "hash": "ee68db867689ae670e0252ebb9fcf3bfce950e0f0dd0ebd357f89915d6c72393", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "217aac38-f84f-4e29-87d2-13289a6d1916", "node_type": "1", "metadata": {}, "hash": "a4579e7780fccaa13c418f2f25ebb2a0965b05ed8963f4b64b704083d528fc0d", "class_name": "RelatedNodeInfo"}}, "text": "We'll copy this:\n\n```js\n{\n  \"answer_pk\": \"ed25519:7PkKPmVUXcupA5oU8d6TbgyMwzFe8tPV6eV1KGwgo9xg\",\n  \"dimensions\": {\n   \"x\": 11,\n   \"y\": 10\n  },\n  \"answers\": [\n   {\n     \"num\": 1,\n     \"start\": {\n       \"x\": 0,\n       \"y\": 1\n     },\n     \"direction\": \"Across\",\n     \"length\": 12,\n     \"clue\": \"NEAR transactions are more ______ instead of atomic.\"\n   },\n   {\n     \"num\": 2,\n     \"start\": {\n       \"x\": 6,\n       \"y\": 0\n     },\n     \"direction\": \"Down\",\n     \"length\": 7,\n     \"clue\": \"In a smart contract, when performing an Action, you use this in Rust.\"\n   },\n   {\n     \"num\": 3,\n     \"start\": {\n       \"x\": 9,\n       \"y\": 0\n     },\n     \"direction\": \"Down\",\n     \"length\": 6,\n     \"clue\": \"In docs.rs when you search for the near-sdk crate, these items a considered a what: collections, env, json_types.\"\n   },\n   {\n     \"num\": 4,\n     \"start\": {\n       \"x\": 1,\n       \"y\": 1\n     },\n     \"direction\": \"Down\",\n     \"length\": 10,\n     \"clue\": \"A series of words that can deterministically generate a private key.\"\n   },\n   {\n     \"num\": 5,\n     \"start\": {\n       \"x\": 1,\n       \"y\": 3\n     },\n     \"direction\": \"Across\",\n     \"length\": 3,\n     \"clue\": \"When doing high-level cross-contract calls, we import this that ends in _contract. When calling ourselves in a callback, it is convention to call it THIS_self.\"", "mimetype": "text/plain", "start_char_idx": 2003, "end_char_idx": 3316, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "217aac38-f84f-4e29-87d2-13289a6d1916": {"__data__": {"id_": "217aac38-f84f-4e29-87d2-13289a6d1916", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ac3248e7-a58c-4e0c-8e1c-a9c326585b26", "node_type": "1", "metadata": {}, "hash": "b982089714c3ef6660a9b2b71454763d661cb8bc148a91d28ed409ef3867169d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fdb817c4-fc70-49c4-be22-c3842e8b0812", "node_type": "1", "metadata": {}, "hash": "e47ae86d69c06f6adbfc889004f45b9734fc4dabccfe3bcae4a37e9918f83272", "class_name": "RelatedNodeInfo"}}, "text": "},\n   {\n     \"num\": 6,\n     \"start\": {\n       \"x\": 0,\n       \"y\": 8\n     },\n     \"direction\": \"Across\",\n     \"length\": 8,\n     \"clue\": \"Use this to determine the execution outcome of a cross-contract call or Action.\"\n   },\n   {\n     \"num\": 7,\n     \"start\": {\n       \"x\": 4,\n       \"y\": 6\n     },\n     \"direction\": \"Across\",\n     \"length\": 4,\n     \"clue\": \"You chain this syntax onto a promise in order to schedule a callback afterward.\"\n   }\n  ]\n}\n```\n\nand base64 encode it:\n\n<figure>\n    <img src={base64Encode} alt=\"Animated gif of parameters getting base64 encoded with the program Boop\" width=\"600\"/>\n</figure>\n<br/>\n\nNow we can build and run the new crossword puzzle contract as we have before:\n\n```bash\ncargo near build\n```\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  export NEAR_ACCT=crossword.friend.testnet\n  export PARENT_ACCT=friend.testnet\n\n  near delete-account $NEAR_ACCT $PARENT_ACCT --networkId testnet\n  \n  # Create an account again\n  near create-account $NEAR_ACCT --use-account $PARENT_ACCT --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  export NEAR_ACCT=crossword.friend.testnet\n  export PARENT_ACCT=friend.testnet\n\n  near account delete-account $NEAR_ACCT beneficiary $PARENT_ACCT network-config testnet sign-with-keychain send\n\n  near account create-account fund-myself $NEAR_ACCT '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as $PARENT_ACCT network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n```bash\ncargo near deploy $NEAR_ACCT with-init-call new json-args '{\"owner_id\": \"'$NEAR_ACCT'\", \"creator_account\": \"testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit", "mimetype": "text/plain", "start_char_idx": 3320, "end_char_idx": 5043, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fdb817c4-fc70-49c4-be22-c3842e8b0812": {"__data__": {"id_": "fdb817c4-fc70-49c4-be22-c3842e8b0812", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "217aac38-f84f-4e29-87d2-13289a6d1916", "node_type": "1", "metadata": {}, "hash": "a4579e7780fccaa13c418f2f25ebb2a0965b05ed8963f4b64b704083d528fc0d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e84964c4-3595-44d8-9221-15dee27dcb3e", "node_type": "1", "metadata": {}, "hash": "765efd20a5c42ec2675215c73b509354a7c61e5be7604a5bb732bfba057c8cae", "class_name": "RelatedNodeInfo"}}, "text": "'0 NEAR' network-config testnet sign-with-keychain send\n```\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near call $NEAR_ACCT new_puzzle '{{\n    \"args\": \"ewogICJhbnN3ZXJfcGsiOiAiZWQyNTUxOTo3UGtLUG1WVVhjdXBBNW9VOGQ2VGJneU13ekZlOHRQVjZlVjFLR3dnbzl4ZyIsCiAgImRpbWVuc2lvbnMiOiB7CiAgICJ4IjogMTEsCiAgICJ5IjogMTAKICB9LAogICJhbnN3ZXJzIjogWwogICB7CiAgICAgIm51bSI6IDEsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiAwLAogICAgICAgInkiOiAxCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkFjcm9zcyIsCiAgICAgImxlbmd0aCI6IDEyLAogICAgICJjbHVlIjogIk5FQVIgdHJhbnNhY3Rpb25zIGFyZSBtb3JlIF9fX19fXyBpbnN0ZWFkIG9mIGF0b21pYy4iCiAgIH0sC", "mimetype": "text/plain", "start_char_idx": 5044, "end_char_idx": 5672, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e84964c4-3595-44d8-9221-15dee27dcb3e": {"__data__": {"id_": "e84964c4-3595-44d8-9221-15dee27dcb3e", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdb817c4-fc70-49c4-be22-c3842e8b0812", "node_type": "1", "metadata": {}, "hash": "e47ae86d69c06f6adbfc889004f45b9734fc4dabccfe3bcae4a37e9918f83272", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a533080a-fb3f-44d5-ba19-b3c637d0cee9", "node_type": "1", "metadata": {}, "hash": "634979fb0a3c098bc10154e8cd49102d71dc502d30ed83692435c5c9c61e4ad6", "class_name": "RelatedNodeInfo"}}, "text": "iAgIHsKICAgICAibnVtIjogMiwKICAgICAic3RhcnQiOiB7CiAgICAgICAieCI6IDYsCiAgICAgICAieSI6IDAKICAgICB9LAogICAgICJkaXJlY3Rpb24iOiAiRG93biIsCiAgICAgImxlbmd0aCI6IDcsCiAgICAgImNsdWUiOiAiSW4gYSBzbWFydCBjb250cmFjdCwgd2hlbiBwZXJmb3JtaW5nIGFuIEFjdGlvbiwgeW91IHVzZSB0aGlzIGluIFJ1c3QuIgogICB9LAogICB7CiAgICAgIm51bSI6IDMsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiA5LAogICAgICAgInkiOiAwCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkRvd24iLAogICAgICJsZW5ndGgiOiA2LAogICAgICJjbHVlIjogIkluIGRvY3MucnMgd2hlbiB5b3Ugc2VhcmNoIGZvciB0aGUgb", "mimetype": "text/plain", "start_char_idx": 5672, "end_char_idx": 6172, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a533080a-fb3f-44d5-ba19-b3c637d0cee9": {"__data__": {"id_": "a533080a-fb3f-44d5-ba19-b3c637d0cee9", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e84964c4-3595-44d8-9221-15dee27dcb3e", "node_type": "1", "metadata": {}, "hash": "765efd20a5c42ec2675215c73b509354a7c61e5be7604a5bb732bfba057c8cae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9901a8c5-d0a5-4491-9496-5e457f331fe5", "node_type": "1", "metadata": {}, "hash": "8ea770c9deeac56a528e8de557f66d8e8c150a46072e65dd1893f11d9dc9ba6d", "class_name": "RelatedNodeInfo"}}, "text": "mVhci1zZGsgY3JhdGUsIHRoZXNlIGl0ZW1zIGEgY29uc2lkZXJlZCBhIHdoYXQ6IGNvbGxlY3Rpb25zLCBlbnYsIGpzb25fdHlwZXMuIgogICB9LAogICB7CiAgICAgIm51bSI6IDQsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiAxLAogICAgICAgInkiOiAxCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkRvd24iLAogICAgICJsZW5ndGgiOiAxMCwKICAgICAiY2x1ZSI6ICJBIHNlcmllcyBvZiB3b3JkcyB0aGF0IGNhbiBkZXRlcm1pbmlzdGljYWxseSBnZW5lcmF0ZSBhIHByaXZhdGUga2V5LiIKICAgfSwKICAgewogICAgICJudW0iOiA1LAogICAgICJzdGFydCI6IHsKICAgICAgICJ4IjogMSwKICAgICAgICJ5IjogMwogICAgIH0sCiAgICAgImRpc", "mimetype": "text/plain", "start_char_idx": 6172, "end_char_idx": 6672, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9901a8c5-d0a5-4491-9496-5e457f331fe5": {"__data__": {"id_": "9901a8c5-d0a5-4491-9496-5e457f331fe5", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a533080a-fb3f-44d5-ba19-b3c637d0cee9", "node_type": "1", "metadata": {}, "hash": "634979fb0a3c098bc10154e8cd49102d71dc502d30ed83692435c5c9c61e4ad6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfef6977-460c-42e4-adac-5d96ca0c217f", "node_type": "1", "metadata": {}, "hash": "57ef1844955cd0fcb86b4dfea777690ea0acb996faaea0670958f9c368f8a85d", "class_name": "RelatedNodeInfo"}}, "text": "mVjdGlvbiI6ICJBY3Jvc3MiLAogICAgICJsZW5ndGgiOiAzLAogICAgICJjbHVlIjogIldoZW4gZG9pbmcgaGlnaC1sZXZlbCBjcm9zcy1jb250cmFjdCBjYWxscywgd2UgaW1wb3J0IHRoaXMgdGhhdCBlbmRzIGluIF9jb250cmFjdC4gV2hlbiBjYWxsaW5nIG91cnNlbHZlcyBpbiBhIGNhbGxiYWNrLCBpdCBpcyBjb252ZW50aW9uIHRvIGNhbGwgaXQgVEhJU19zZWxmLiIKICAgfSwKICAgewogICAgICJudW0iOiA2LAogICAgICJzdGFydCI6IHsKICAgICAgICJ4IjogMCwKICAgICAgICJ5IjogOAogICAgIH0sCiAgICAgImRpcmVjdGlvbiI6ICJBY3Jvc3MiLAogICAgICJsZW5ndGgiOiA4LAogICAgICJjbHVlIjogIlVzZSB0aGlzIHRvIGRldGVybWluZSB0a", "mimetype": "text/plain", "start_char_idx": 6672, "end_char_idx": 7172, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfef6977-460c-42e4-adac-5d96ca0c217f": {"__data__": {"id_": "bfef6977-460c-42e4-adac-5d96ca0c217f", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9901a8c5-d0a5-4491-9496-5e457f331fe5", "node_type": "1", "metadata": {}, "hash": "8ea770c9deeac56a528e8de557f66d8e8c150a46072e65dd1893f11d9dc9ba6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36d3c4aa-850d-42a9-b384-b206479df438", "node_type": "1", "metadata": {}, "hash": "a5f553845730c4d39f617f69434f74119382094a6142e2666fb2ab53b9c14daf", "class_name": "RelatedNodeInfo"}}, "text": "GUgZXhlY3V0aW9uIG91dGNvbWUgb2YgYSBjcm9zcy1jb250cmFjdCBjYWxsIG9yIEFjdGlvbi4iCiAgIH0sCiAgIHsKICAgICAibnVtIjogNywKICAgICAic3RhcnQiOiB7CiAgICAgICAieCI6IDQsCiAgICAgICAieSI6IDYKICAgICB9LAogICAgICJkaXJlY3Rpb24iOiAiQWNyb3NzIiwKICAgICAibGVuZ3RoIjogNCwKICAgICAiY2x1ZSI6ICJZb3UgY2hhaW4gdGhpcyBzeW50YXggb250byBhIHByb21pc2UgaW4gb3JkZXIgdG8gc2NoZWR1bGUgYSBjYWxsYmFjayBhZnRlcndhcmQuIgogICB9CiAgXQp9\"\n  }}' --gas 100000000000000 --accountId $NEAR_ACCT --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-transaction $NEAR_ACCT new_puzzle json-args '{\n    \"args\": \"ewogICJhbnN3ZXJfcGsiOiAiZWQyNTUxOTo3U", "mimetype": "text/plain", "start_char_idx": 7172, "end_char_idx": 7829, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36d3c4aa-850d-42a9-b384-b206479df438": {"__data__": {"id_": "36d3c4aa-850d-42a9-b384-b206479df438", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfef6977-460c-42e4-adac-5d96ca0c217f", "node_type": "1", "metadata": {}, "hash": "57ef1844955cd0fcb86b4dfea777690ea0acb996faaea0670958f9c368f8a85d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff74b474-fa28-4cde-a602-41430d03ce57", "node_type": "1", "metadata": {}, "hash": "5b384e1abc09cc49b13956673ccdb1a22af596ebcac0ccda951bd6581c9ea141", "class_name": "RelatedNodeInfo"}}, "text": "GtLUG1WVVhjdXBBNW9VOGQ2VGJneU13ekZlOHRQVjZlVjFLR3dnbzl4ZyIsCiAgImRpbWVuc2lvbnMiOiB7CiAgICJ4IjogMTEsCiAgICJ5IjogMTAKICB9LAogICJhbnN3ZXJzIjogWwogICB7CiAgICAgIm51bSI6IDEsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiAwLAogICAgICAgInkiOiAxCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkFjcm9zcyIsCiAgICAgImxlbmd0aCI6IDEyLAogICAgICJjbHVlIjogIk5FQVIgdHJhbnNhY3Rpb25zIGFyZSBtb3JlIF9fX19fXyBpbnN0ZWFkIG9mIGF0b21pYy4iCiAgIH0sCiAgIHsKICAgICAibnVtIjogMiwKICAgICAic3RhcnQiOiB7CiAgICAgICAieCI6IDYsCiAgICAgICAieSI6IDAKICAgICB9LAogI", "mimetype": "text/plain", "start_char_idx": 5272, "end_char_idx": 5772, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ff74b474-fa28-4cde-a602-41430d03ce57": {"__data__": {"id_": "ff74b474-fa28-4cde-a602-41430d03ce57", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36d3c4aa-850d-42a9-b384-b206479df438", "node_type": "1", "metadata": {}, "hash": "a5f553845730c4d39f617f69434f74119382094a6142e2666fb2ab53b9c14daf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0285ef6a-46a7-46eb-90af-70c2f2ebd435", "node_type": "1", "metadata": {}, "hash": "f4ee934a74f3328b0a4f2377fbc1479e485d1bd5d6cebe1e9d29a3a39c85f586", "class_name": "RelatedNodeInfo"}}, "text": "CAgICJkaXJlY3Rpb24iOiAiRG93biIsCiAgICAgImxlbmd0aCI6IDcsCiAgICAgImNsdWUiOiAiSW4gYSBzbWFydCBjb250cmFjdCwgd2hlbiBwZXJmb3JtaW5nIGFuIEFjdGlvbiwgeW91IHVzZSB0aGlzIGluIFJ1c3QuIgogICB9LAogICB7CiAgICAgIm51bSI6IDMsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiA5LAogICAgICAgInkiOiAwCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkRvd24iLAogICAgICJsZW5ndGgiOiA2LAogICAgICJjbHVlIjogIkluIGRvY3MucnMgd2hlbiB5b3Ugc2VhcmNoIGZvciB0aGUgbmVhci1zZGsgY3JhdGUsIHRoZXNlIGl0ZW1zIGEgY29uc2lkZXJlZCBhIHdoYXQ6IGNvbGxlY3Rpb25zLCBlbnYsIGpzb25fdHlwZ", "mimetype": "text/plain", "start_char_idx": 5772, "end_char_idx": 6272, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0285ef6a-46a7-46eb-90af-70c2f2ebd435": {"__data__": {"id_": "0285ef6a-46a7-46eb-90af-70c2f2ebd435", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff74b474-fa28-4cde-a602-41430d03ce57", "node_type": "1", "metadata": {}, "hash": "5b384e1abc09cc49b13956673ccdb1a22af596ebcac0ccda951bd6581c9ea141", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "060dde09-e64a-499a-81e3-9203fc3ae0b2", "node_type": "1", "metadata": {}, "hash": "2f8db09321dd419198a2a3fbf2f998ba9757dace116340c07273e63beffb2f6c", "class_name": "RelatedNodeInfo"}}, "text": "XMuIgogICB9LAogICB7CiAgICAgIm51bSI6IDQsCiAgICAgInN0YXJ0IjogewogICAgICAgIngiOiAxLAogICAgICAgInkiOiAxCiAgICAgfSwKICAgICAiZGlyZWN0aW9uIjogIkRvd24iLAogICAgICJsZW5ndGgiOiAxMCwKICAgICAiY2x1ZSI6ICJBIHNlcmllcyBvZiB3b3JkcyB0aGF0IGNhbiBkZXRlcm1pbmlzdGljYWxseSBnZW5lcmF0ZSBhIHByaXZhdGUga2V5LiIKICAgfSwKICAgewogICAgICJudW0iOiA1LAogICAgICJzdGFydCI6IHsKICAgICAgICJ4IjogMSwKICAgICAgICJ5IjogMwogICAgIH0sCiAgICAgImRpcmVjdGlvbiI6ICJBY3Jvc3MiLAogICAgICJsZW5ndGgiOiAzLAogICAgICJjbHVlIjogIldoZW4gZG9pbmcgaGlnaC1sZXZlbCBjc", "mimetype": "text/plain", "start_char_idx": 6272, "end_char_idx": 6772, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "060dde09-e64a-499a-81e3-9203fc3ae0b2": {"__data__": {"id_": "060dde09-e64a-499a-81e3-9203fc3ae0b2", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0285ef6a-46a7-46eb-90af-70c2f2ebd435", "node_type": "1", "metadata": {}, "hash": "f4ee934a74f3328b0a4f2377fbc1479e485d1bd5d6cebe1e9d29a3a39c85f586", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b35d654-25d2-40f7-b201-896029031399", "node_type": "1", "metadata": {}, "hash": "9100e7e206df024867cb4e18322fb6b5a934752819901b3cd6cb15a2c48a26e8", "class_name": "RelatedNodeInfo"}}, "text": "m9zcy1jb250cmFjdCBjYWxscywgd2UgaW1wb3J0IHRoaXMgdGhhdCBlbmRzIGluIF9jb250cmFjdC4gV2hlbiBjYWxsaW5nIG91cnNlbHZlcyBpbiBhIGNhbGxiYWNrLCBpdCBpcyBjb252ZW50aW9uIHRvIGNhbGwgaXQgVEhJU19zZWxmLiIKICAgfSwKICAgewogICAgICJudW0iOiA2LAogICAgICJzdGFydCI6IHsKICAgICAgICJ4IjogMCwKICAgICAgICJ5IjogOAogICAgIH0sCiAgICAgImRpcmVjdGlvbiI6ICJBY3Jvc3MiLAogICAgICJsZW5ndGgiOiA4LAogICAgICJjbHVlIjogIlVzZSB0aGlzIHRvIGRldGVybWluZSB0aGUgZXhlY3V0aW9uIG91dGNvbWUgb2YgYSBjcm9zcy1jb250cmFjdCBjYWxsIG9yIEFjdGlvbi4iCiAgIH0sCiAgIHsKICAgICAib", "mimetype": "text/plain", "start_char_idx": 6772, "end_char_idx": 7272, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b35d654-25d2-40f7-b201-896029031399": {"__data__": {"id_": "7b35d654-25d2-40f7-b201-896029031399", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "060dde09-e64a-499a-81e3-9203fc3ae0b2", "node_type": "1", "metadata": {}, "hash": "2f8db09321dd419198a2a3fbf2f998ba9757dace116340c07273e63beffb2f6c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e778ab4e-b783-4493-b9b6-184764659bcd", "node_type": "1", "metadata": {}, "hash": "0cd71db5b9dcd65ebd1e2339fa0caa6cdaf33164c17ff5e6f5e1c9b2e5274ae3", "class_name": "RelatedNodeInfo"}}, "text": "nVtIjogNywKICAgICAic3RhcnQiOiB7CiAgICAgICAieCI6IDQsCiAgICAgICAieSI6IDYKICAgICB9LAogICAgICJkaXJlY3Rpb24iOiAiQWNyb3NzIiwKICAgICAibGVuZ3RoIjogNCwKICAgICAiY2x1ZSI6ICJZb3UgY2hhaW4gdGhpcyBzeW50YXggb250byBhIHByb21pc2UgaW4gb3JkZXIgdG8gc2NoZWR1bGUgYSBjYWxsYmFjayBhZnRlcndhcmQuIgogICB9CiAgXQp9\"\n  }' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $NEAR_ACCT network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nBack at the project root (not in the `contract` directory) we can run our app and see the new crossword puzzle:\n\n```bash\nCONTRACT_NAME=crossword.friend.testnet npm run start\n```\n\n## Wrapping up\n\nOnce you understand cross-contract calls and callbacks and where the logic should go, you can build just about anything on NEAR.\n\nThis might be a good time for a reminder that this crossword puzzle, which checks permissions to methods based on a public key, is a bit unusual. It's more common to have simple collections or mappings for allowed users, or utilize the `owner_id` field we set up.", "mimetype": "text/plain", "start_char_idx": 9829, "end_char_idx": 10852, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e778ab4e-b783-4493-b9b6-184764659bcd": {"__data__": {"id_": "e778ab4e-b783-4493-b9b6-184764659bcd", "embedding": null, "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b", "node_type": "4", "metadata": {}, "hash": "30a49d52a9b6c81c3fa23f6d51eb4e25751f8723f4f336984df74d899b59e691", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7b35d654-25d2-40f7-b201-896029031399", "node_type": "1", "metadata": {}, "hash": "9100e7e206df024867cb4e18322fb6b5a934752819901b3cd6cb15a2c48a26e8", "class_name": "RelatedNodeInfo"}}, "text": "The account and access key system in NEAR is quite powerful, and hopefully this tutorial helps stretch the limits of what's possible, like the seamless onboarding we have with the crossword puzzle.\n\nAgain, the final code for this chapter:\n\nhttps://github.com/near-examples/crossword-tutorial-chapter-3\n\nHappy hacking!", "mimetype": "text/plain", "start_char_idx": 10853, "end_char_idx": 11170, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f0dc985e-da08-47fa-9e97-077797b27b05": {"__data__": {"id_": "f0dc985e-da08-47fa-9e97-077797b27b05", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a8e59399-24f0-459d-950e-3fe0e875d201", "node_type": "1", "metadata": {}, "hash": "68a57cd83e3440f397f5b54de916900986576c932df7af9b8a74f647961be654", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: error-implementation\ntitle: Source Code Survey\nsidebar_label: Source Code Survey\n---\n\nThis page provides a very high level, sometimes \"pseudocode\", view of error types and related messages as implemented by the NEAR platform.\n\nErrors raised by the NEAR platform are implemented in the following locations in `nearcore`:\n\n- [nearcore/core/primitives/src/errors.rs](https://github.com/near/nearcore/blob/master/core/primitives/src/errors.rs)\n- [nearcore/runtime/near-vm-errors/src/lib.rs](https://github.com/near/nearcore/blob/master/runtime/near-vm-errors/src/lib.rs)\n\n---\n\n## RuntimeError and subtypes {#runtimeerror-and-subtypes}\n\n### RuntimeError {#runtimeerror}\n\n#### Definition {#definition}\n\n```rust\n/// Error returned from `Runtime::apply`\npub enum RuntimeError {\n    /// An unexpected integer overflow occurred. The likely issue is an invalid state or the transition.\n    UnexpectedIntegerOverflow,\n    /// An error happened during TX verification and account charging. It's likely the chunk is invalid.\n    /// and should be challenged.\n    InvalidTxError(InvalidTxError),\n    /// Unexpected error which is typically related to the node storage corruption.account\n    /// That it's possible the input state is invalid or malicious.\n    StorageError(StorageError),\n    /// An error happens if `check_balance` fails, which is likely an indication of an invalid state.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1381, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a8e59399-24f0-459d-950e-3fe0e875d201": {"__data__": {"id_": "a8e59399-24f0-459d-950e-3fe0e875d201", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f0dc985e-da08-47fa-9e97-077797b27b05", "node_type": "1", "metadata": {}, "hash": "20b8fc1ce5f9a584bdf19d9987a8ae772fc08633965770e9ecfb9f9c06a72d00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ede725f0-f045-4e39-b306-f5a80e51fa81", "node_type": "1", "metadata": {}, "hash": "40e3180a75ccce44b4b762a001d588c5b30d315d772ccc276a9426152e841ede", "class_name": "RelatedNodeInfo"}}, "text": "BalanceMismatchError(BalanceMismatchError),\n}\n```\n\n#### Error Messages {#error-messages}\n\n- see below: `InvalidTxError`, `StorageError` and `BalanceMismatchError`\n\n### InvalidTxError {#invalidtxerror}\n\n#### Definition {#definition-1}\n\n```rust\n/// An error happened during TX execution\npub enum InvalidTxError {\n    /// Happens if a wrong AccessKey used or AccessKey has not enough permissions\n    InvalidAccessKeyError(InvalidAccessKeyError),\n    /// TX signer_id is not in a valid format or not satisfy requirements see `near_core::primitives::utils::is_valid_account_id`\n    InvalidSignerId { signer_id: AccountId },\n    /// TX signer_id is not found in a storage\n    SignerDoesNotExist { signer_id: AccountId },\n    /// Transaction nonce must be account[access_key].nonce + 1\n    InvalidNonce { tx_nonce: Nonce, ak_nonce: Nonce },\n    /// TX receiver_id is not in a valid format or not satisfy requirements see `near_core::primitives::utils::is_valid_account_id`\n    InvalidReceiverId { receiver_id: AccountId },\n    /// TX signature is not valid\n    InvalidSignature,\n    /// Account does not have enough balance to cover TX cost\n    NotEnoughBalance {\n        signer_id: AccountId,\n        balance: Balance,\n        cost: Balance,\n    },\n    /// Signer account rent is unpaid\n    RentUnpaid {\n        /// An account which is required to pay the rent\n        signer_id: AccountId,\n        /// Required balance to cover the state rent\n        amount: Balance,\n    },\n    /// An integer overflow occurred during transaction cost estimation.\n    CostOverflow,\n    /// Transaction parent block hash doesn't belong to the current chain\n    InvalidChain,\n    /// Transaction has expired\n    Expired,\n    /// An error occurred while validating actions of a Transaction.\n    ActionsValidation(ActionsValidationError),\n}\n```\n\n\n#### Error Messages {#error-messages-1}\n\n```rust\nInvalidTxError::InvalidSignerId { signer_id }\n    \"Invalid signer account ID {:?} according to requirements\"\n\nInvalidTxError::SignerDoesNotExist { signer_id }\n    \"Signer {:?}", "mimetype": "text/plain", "start_char_idx": 1386, "end_char_idx": 3432, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ede725f0-f045-4e39-b306-f5a80e51fa81": {"__data__": {"id_": "ede725f0-f045-4e39-b306-f5a80e51fa81", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a8e59399-24f0-459d-950e-3fe0e875d201", "node_type": "1", "metadata": {}, "hash": "68a57cd83e3440f397f5b54de916900986576c932df7af9b8a74f647961be654", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0147177c-66a2-4086-8f31-c15e5b86eed4", "node_type": "1", "metadata": {}, "hash": "3c9f72d244cc65ea4b8a561351e5d5fc024e277bc28c9a8539de295808c8a371", "class_name": "RelatedNodeInfo"}}, "text": "does not exist\"\n\nInvalidTxError::InvalidAccessKeyError(access_key_error)\n\nInvalidTxError::InvalidNonce { tx_nonce, ak_nonce }\n    \"Transaction nonce {} must be larger than nonce of the used access key {}\"\n\nInvalidTxError::InvalidReceiverId { receiver_id }\n    \"Invalid receiver account ID {:?} according to requirements\"\n\nInvalidTxError::InvalidSignature\n    \"Transaction is not signed with the given public key\"\n\nInvalidTxError::NotEnoughBalance { signer_id, balance, cost }\n    \"Sender {:?} does not have enough balance {} for operation costing {}\"\n\nInvalidTxError::RentUnpaid { signer_id, amount }\n    \"Failed to execute, because the account {:?} wouldn't have enough to pay required rent {}\" \n\nInvalidTxError::CostOverflow\n    \"Transaction gas or balance cost is too high\"\n\nInvalidTxError::InvalidChain\n    \"Transaction parent block hash doesn't belong to the current chain\"\n\nInvalidTxError::Expired\n    \"Transaction has expired\"\n\nInvalidTxError::ActionsValidation(error)\n    \"Transaction actions validation error: {}\"\n```\n\n### StorageError {#storageerror}\n\n#### Definition {#definition-2}\n\n```rust\npub enum StorageError {\n    /// Key-value db internal failure\n    StorageInternalError,\n    /// Storage is PartialStorage and requested a missing trie node\n    TrieNodeMissing,\n    /// Either invalid state or key-value db is corrupted.\n    /// For PartialStorage it cannot be corrupted.\n    /// Error message is unreliable and for debugging purposes only. It's also probably ok to\n    /// panic in every place that produces this error.\n    /// We can check if db is corrupted by verifying everything in the state trie.\n    StorageInconsistentState(String),\n}\n```\n\n### BalanceMismatchError {#balancemismatcherror}\n\n#### Definition {#definition-3}\n\n```rust\n/// Happens when the input balance doesn't match the output balance in Runtime apply.", "mimetype": "text/plain", "start_char_idx": 3433, "end_char_idx": 5276, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0147177c-66a2-4086-8f31-c15e5b86eed4": {"__data__": {"id_": "0147177c-66a2-4086-8f31-c15e5b86eed4", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ede725f0-f045-4e39-b306-f5a80e51fa81", "node_type": "1", "metadata": {}, "hash": "40e3180a75ccce44b4b762a001d588c5b30d315d772ccc276a9426152e841ede", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1c8afef5-3536-4946-81b9-2b1762a455d8", "node_type": "1", "metadata": {}, "hash": "0478ba138e1bf809a802c1533800a082f3b7f7ccb2730dd3f0bee4e9576b75ba", "class_name": "RelatedNodeInfo"}}, "text": "pub struct BalanceMismatchError {\n    // Input balances\n    pub incoming_validator_rewards: Balance,\n    pub initial_accounts_balance: Balance,\n    pub incoming_receipts_balance: Balance,\n    pub processed_delayed_receipts_balance: Balance,\n    pub initial_postponed_receipts_balance: Balance,\n    // Output balances\n    pub final_accounts_balance: Balance,\n    pub outgoing_receipts_balance: Balance,\n    pub new_delayed_receipts_balance: Balance,\n    pub final_postponed_receipts_balance: Balance,\n    pub total_rent_paid: Balance,\n    pub total_validator_reward: Balance,\n    pub total_balance_burnt: Balance,\n    pub total_balance_slashed: Balance,\n}\n```\n\n#### Error Messages {#error-messages-2}\n\n```rust\n\"Balance Mismatch Error. The input balance {} doesn't match output balance {}\\n\\\nInputs:\\n\\\n    \\tIncoming validator rewards sum: {}\\n\\\n    \\tInitial accounts balance sum: {}\\n\\\n    \\tIncoming receipts balance sum: {}\\n\\\n    \\tProcessed delayed receipts balance sum: {}\\n\\\n    \\tInitial postponed receipts balance sum: {}\\n\\\nOutputs:\\n\\\n    \\tFinal accounts balance sum: {}\\n\\\n    \\tOutgoing receipts balance sum: {}\\n\\\n    \\tNew delayed receipts balance sum: {}\\n\\\n    \\tFinal postponed receipts balance sum: {}\\n\\\n    \\tTotal rent paid: {}\\n\\\n    \\tTotal validators reward: {}\\n\\\n    \\tTotal balance burnt: {}\\n\\\n    \\tTotal balance slashed: {}\",\n```\n\n### InvalidAccessKeyError {#invalidaccesskeyerror}\n\n#### Definition {#definition-4}\n\n```rust\npub enum InvalidAccessKeyError {\n    /// The access key identified by the `public_key` doesn't exist for the account\n    AccessKeyNotFound { account_id: AccountId, public_key: PublicKey },\n    /// Transaction `receiver_id` doesn't match the access key receiver_id\n    ReceiverMismatch { tx_receiver: AccountId, ak_receiver: AccountId },\n    /// Transaction method name isn't allowed by the access key\n    MethodNameMismatch { method_name: String },\n    /// Transaction requires a full permission access key.", "mimetype": "text/plain", "start_char_idx": 5277, "end_char_idx": 7240, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1c8afef5-3536-4946-81b9-2b1762a455d8": {"__data__": {"id_": "1c8afef5-3536-4946-81b9-2b1762a455d8", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0147177c-66a2-4086-8f31-c15e5b86eed4", "node_type": "1", "metadata": {}, "hash": "3c9f72d244cc65ea4b8a561351e5d5fc024e277bc28c9a8539de295808c8a371", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5ac4319-225b-4e20-9c03-2170f6e9dfd4", "node_type": "1", "metadata": {}, "hash": "e22ab7b39d5e0ba99f22789cf74ee52a5c0a37c0c6d57f66cca9a0adccc942ec", "class_name": "RelatedNodeInfo"}}, "text": "RequiresFullAccess,\n    /// Access Key does not have enough allowance to cover transaction cost\n    NotEnoughAllowance {\n        account_id: AccountId,\n        public_key: PublicKey,\n        allowance: Balance,\n        cost: Balance,\n    },\n    /// Having a deposit with a function call action is not allowed with a function call access key.\n    DepositWithFunctionCall,\n}\n```\n\n#### Error Messages {#error-messages-3}\n\n```rust\nInvalidAccessKeyError::AccessKeyNotFound { account_id, public_key }\n    \"Signer {:?} doesn't have access key with the given public_key {}\"\n\nInvalidAccessKeyError::ReceiverMismatch { tx_receiver, ak_receiver }\n    \"Transaction receiver_id {:?} doesn't match the access key receiver_id {:?}\"\n\nInvalidAccessKeyError::MethodNameMismatch { method_name }\n    \"Transaction method name {:?} isn't allowed by the access key\"\n\nInvalidAccessKeyError::RequiresFullAccess\n    \"The transaction contains more then one action, but it was signed \\\n     with an access key which allows transaction to apply only one specific action. \\\n     To apply more then one actions TX must be signed with a full access key\"\n\nInvalidAccessKeyError::NotEnoughAllowance { account_id, public_key, allowance, cost }\n    \"Access Key {:?}:{} does not have enough balance {} for transaction costing {}\"\n\nInvalidAccessKeyError::DepositWithFunctionCall\n    \"Having a deposit with a function call action is not allowed with a function call access key.\"\n```\n\n### ActionsValidationError {#actionsvalidationerror}\n\n#### Definition {#definition-5}\n\n```rust\n/// Describes the error for validating a list of actions.\npub enum ActionsValidationError {\n    /// The total prepaid gas (for all given actions) exceeded the limit.\n    TotalPrepaidGasExceeded { total_prepaid_gas: Gas, limit: Gas },\n    /// The number of actions exceeded the given limit.\n    TotalNumberOfActionsExceeded { total_number_of_actions: u64, limit: u64 },\n    /// The total number of bytes of the method names exceeded the limit in a Add Key action.\n    AddKeyMethodNamesNumberOfBytesExceeded { total_number_of_bytes: u64, limit: u64 },\n    /// The length of some method name exceeded the limit in a Add Key action.", "mimetype": "text/plain", "start_char_idx": 7245, "end_char_idx": 9413, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5ac4319-225b-4e20-9c03-2170f6e9dfd4": {"__data__": {"id_": "c5ac4319-225b-4e20-9c03-2170f6e9dfd4", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1c8afef5-3536-4946-81b9-2b1762a455d8", "node_type": "1", "metadata": {}, "hash": "0478ba138e1bf809a802c1533800a082f3b7f7ccb2730dd3f0bee4e9576b75ba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e77ca36b-e846-4245-8ace-b0e947be2db4", "node_type": "1", "metadata": {}, "hash": "89fdacf2e89444398b1034a5c37046f7453172efc5988469cada357048c006a1", "class_name": "RelatedNodeInfo"}}, "text": "AddKeyMethodNameLengthExceeded { length: u64, limit: u64 },\n    /// Integer overflow during a compute.\n    IntegerOverflow,\n    /// Invalid account ID.\n    InvalidAccountId { account_id: AccountId },\n    /// The size of the contract code exceeded the limit in a DeployContract action.\n    ContractSizeExceeded { size: u64, limit: u64 },\n    /// The length of the method name exceeded the limit in a Function Call action.\n    FunctionCallMethodNameLengthExceeded { length: u64, limit: u64 },\n    /// The length of the arguments exceeded the limit in a Function Call action.", "mimetype": "text/plain", "start_char_idx": 9418, "end_char_idx": 9990, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e77ca36b-e846-4245-8ace-b0e947be2db4": {"__data__": {"id_": "e77ca36b-e846-4245-8ace-b0e947be2db4", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5ac4319-225b-4e20-9c03-2170f6e9dfd4", "node_type": "1", "metadata": {}, "hash": "e22ab7b39d5e0ba99f22789cf74ee52a5c0a37c0c6d57f66cca9a0adccc942ec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "be397b22-df25-4d21-9668-ba44c98e0796", "node_type": "1", "metadata": {}, "hash": "dfe474263a8c1a457c1424bb4ae704169a6bce5866ab4c524f706e4672075526", "class_name": "RelatedNodeInfo"}}, "text": "FunctionCallArgumentsLengthExceeded { length: u64, limit: u64 },\n}\n```\n\n#### Error Messages {#error-messages-4}\n\n```rust\nActionsValidationError::TotalPrepaidGasExceeded     { total_prepaid_gas, limit }\n     \"The total prepaid gas {} exceeds the limit {}\"\n     \nActionsValidationError::TotalNumberOfActionsExceeded {total_number_of_actions, limit }\n     \"The total number of actions {} exceeds the limit {}\"\n     \nActionsValidationError::AddKeyMethodNamesNumberOfBytesExceeded { total_number_of_bytes, limit }\n     \"The total number of bytes in allowed method names {} exceeds the maximum allowed number {} in a AddKey action\"\n     \nActionsValidationError::AddKeyMethodNameLengthExceeded { length, limit }\n     \"The length of some method name {} exceeds the maximum allowed length {} in a AddKey action\"\n     \nActionsValidationError::IntegerOverflow\n     \"Integer overflow during a compute\"\n     \nActionsValidationError::InvalidAccountId { account_id }\n     \"Invalid account ID `{}`\"\n     \nActionsValidationError::ContractSizeExceeded { size, limit }\n     \"The length of the contract size {} exceeds the maximum allowed size {} in a DeployContract action\"\n     \nActionsValidationError::FunctionCallMethodNameLengthExceeded { length, limit }\n     \"The length of the method name {} exceeds the maximum allowed length {} in a FunctionCall action\"\n     \nActionsValidationError::FunctionCallArgumentsLengthExceeded { length, limit }\n     \"The length of the arguments {} exceeds the maximum allowed length {} in a FunctionCall action\"\n     \n```\n\n## TxExecutionError and subtypes {#txexecutionerror-and-subtypes}\n\n### TxExecutionError {#txexecutionerror}\n\n#### Definition {#definition-6}\n```rust\n/// Error returned in the ExecutionOutcome in case of failure\npub enum TxExecutionError {\n    /// An error happened during Acton execution\n    ActionError(ActionError),\n    /// An error happened during Transaction execution\n    InvalidTxError(InvalidTxError),\n}\n```\n\n### ActionError {#actionerror}\n\n#### Definition {#definition-7}\n\n```rust\nActionError\npub struct ActionError {\n    /// Index of the failed action in the transaction.", "mimetype": "text/plain", "start_char_idx": 9995, "end_char_idx": 12114, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "be397b22-df25-4d21-9668-ba44c98e0796": {"__data__": {"id_": "be397b22-df25-4d21-9668-ba44c98e0796", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e77ca36b-e846-4245-8ace-b0e947be2db4", "node_type": "1", "metadata": {}, "hash": "89fdacf2e89444398b1034a5c37046f7453172efc5988469cada357048c006a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dd0625e2-802f-49ff-b5b6-3ad2a1efb224", "node_type": "1", "metadata": {}, "hash": "bc64e7c7d8e92f9a6d55ef7e9063147c288d19ee6447d37369bb12ffe240a6c8", "class_name": "RelatedNodeInfo"}}, "text": "/// Action index is not defined if ActionError.kind is `ActionErrorKind::RentUnpaid`\n    pub index: Option<u64>,\n    /// The kind of ActionError happened\n    pub kind: ActionErrorKind,\n}\n```\n\n### ActionErrorKind {#actionerrorkind}\n\n#### Definition {#definition-8}\n\n```rust\npub enum ActionErrorKind {\n    /// Happens when CreateAccount action tries to create an account with account_id which is already exists in the storage\n    AccountAlreadyExists { account_id: AccountId },\n    /// Happens when TX receiver_id doesn't exist (but action is not Action::CreateAccount)\n    AccountDoesNotExist { account_id: AccountId },\n    /// A newly created account must be under a namespace of the creator account\n    CreateAccountNotAllowed { account_id: AccountId, predecessor_id: AccountId },\n    /// Administrative actions like `DeployContract`, `Stake`, `AddKey`, `DeleteKey`. can be proceed only if sender=receiver\n    /// or the first TX action is a `CreateAccount` action\n    ActorNoPermission { account_id: AccountId, actor_id: AccountId },\n    /// Account tries to remove an access key that doesn't exist\n    DeleteKeyDoesNotExist { account_id: AccountId, public_key: PublicKey },\n    /// The public key is already used for an existing access key\n    AddKeyAlreadyExists { account_id: AccountId, public_key: PublicKey },\n    /// Account is staking and can not be deleted\n    DeleteAccountStaking { account_id: AccountId },\n    /// Foreign sender (sender=!receiver) can delete an account only if a target account hasn't enough tokens to pay rent\n    DeleteAccountHasRent {\n        account_id: AccountId,\n        balance: Balance,\n    },\n    /// ActionReceipt can't be completed, because the remaining balance will not be enough to pay rent.\n    RentUnpaid {\n        /// An account which is required to pay the rent\n        account_id: AccountId,\n        /// Rent due to pay.\n        amount: Balance,\n    },\n    /// Account is not yet staked, but tries to unstake\n    TriesToUnstake { account_id: AccountId },\n    /// The account doesn't have enough balance to increase the stake.", "mimetype": "text/plain", "start_char_idx": 12119, "end_char_idx": 14193, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dd0625e2-802f-49ff-b5b6-3ad2a1efb224": {"__data__": {"id_": "dd0625e2-802f-49ff-b5b6-3ad2a1efb224", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "be397b22-df25-4d21-9668-ba44c98e0796", "node_type": "1", "metadata": {}, "hash": "dfe474263a8c1a457c1424bb4ae704169a6bce5866ab4c524f706e4672075526", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fdcaf138-6da2-4911-870c-4dbbc8531520", "node_type": "1", "metadata": {}, "hash": "c4f3700ca589eb10112dd5d1fedb3455248fdf27d2e0f043cc986ba9a482496b", "class_name": "RelatedNodeInfo"}}, "text": "TriesToStake {\n        account_id: AccountId,\n        stake: Balance,\n        locked: Balance,\n        balance: Balance,\n    },\n    /// An error occurred during a `FunctionCall` Action.\n    FunctionCallError(FunctionCallError),\n    /// Error occurs when a new `ActionReceipt` created by the `FunctionCall` action fails\n    /// receipt validation.\n    NewReceiptValidationError(ReceiptValidationError),\n}\n```\n\n#### Error Messages {#error-messages-5}\n\n```rust\nActionErrorKind::AccountAlreadyExists { account_id } \n\"Can't create a new account {:?}, because it already exists\"\n\nActionErrorKind::AccountDoesNotExist { account_id } \n\"Can't complete the action because account {:?} doesn't exist\"\n\nActionErrorKind::ActorNoPermission { actor_id, account_id } \n\"Actor {:?} doesn't have permission to account {:?} to complete the action\"\n\nActionErrorKind::RentUnpaid { account_id, amount } \n\"The account {} wouldn't have enough balance to pay required rent {}\"\n\nActionErrorKind::TriesToUnstake { account_id } \n\"Account {:?} is not yet staked, but tries to unstake\"\n\nActionErrorKind::TriesToStake { account_id, stake, locked, balance } \n\"Account {:?} tries to stake {}, but has staked {} and only has {}\"\n\nActionErrorKind::CreateAccountNotAllowed { account_id, predecessor_id } \n\"The new account_id {:?} can't be created by {:?}\"\n\nActionErrorKind::DeleteKeyDoesNotExist { account_id, .. } \n\"Account {:?} tries to remove an access key that doesn't exist\"\n\nActionErrorKind::AddKeyAlreadyExists { public_key, .. } \n\"The public key {:?} is already used for an existing access key\"\n\nActionErrorKind::DeleteAccountStaking { account_id }\n\"Account {:?} is staking and can not be deleted\"\n\nActionErrorKind::DeleteAccountHasRent { account_id, balance } \n\"Account {:?} can't be deleted. It has {}, which is enough to cover the rent\"\n\nActionErrorKind::FunctionCallError(s) \n\nActionErrorKind::NewReceiptValidationError(e) \n\"An new action receipt created during a FunctionCall is not valid: {}\"\n```", "mimetype": "text/plain", "start_char_idx": 14198, "end_char_idx": 16171, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fdcaf138-6da2-4911-870c-4dbbc8531520": {"__data__": {"id_": "fdcaf138-6da2-4911-870c-4dbbc8531520", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dd0625e2-802f-49ff-b5b6-3ad2a1efb224", "node_type": "1", "metadata": {}, "hash": "bc64e7c7d8e92f9a6d55ef7e9063147c288d19ee6447d37369bb12ffe240a6c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e", "node_type": "1", "metadata": {}, "hash": "9657a9b401509176d584d442e30d477f3de00a68f9ca93f6c846a94bc0891dc6", "class_name": "RelatedNodeInfo"}}, "text": "### ReceiptValidationError {#receiptvalidationerror}\n\n#### Definition {#definition-9}\n\n```rust\n/// Describes the error for validating a receipt.\npub enum ReceiptValidationError {\n    /// The `predecessor_id` of a Receipt is not valid.\n    InvalidPredecessorId { account_id: AccountId },\n    /// The `receiver_id` of a Receipt is not valid.\n    InvalidReceiverId { account_id: AccountId },\n    /// The `signer_id` of an ActionReceipt is not valid.\n    InvalidSignerId { account_id: AccountId },\n    /// The `receiver_id` of a DataReceiver within an ActionReceipt is not valid.\n    InvalidDataReceiverId { account_id: AccountId },\n    /// The length of the returned data exceeded the limit in a DataReceipt.\n    ReturnedValueLengthExceeded { length: u64, limit: u64 },\n    /// The number of input data dependencies exceeds the limit in an ActionReceipt.\n    NumberInputDataDependenciesExceeded { number_of_input_data_dependencies: u64, limit: u64 },\n    /// An error occurred while validating actions of an ActionReceipt.\n    ActionsValidation(ActionsValidationError),\n    /// Receipt is bigger than the limit.\n    /// ReceiptSizeExceeded means that there was a receipt above the size limit (currently 4MiB).\n    /// NEAR will refuse to execute receipts that are above the size limit.\n    /// The most likely source of such receipts would be cross-contract calls with a lot of large actions\n    /// (contract deployment, function call with large args, etc).\n    /// This error means that the user has to adjust their contract to generate smaller receipts.\n    ReceiptSizeExceeded { size: u64, limit: u64 },\n}\n```\n\n#### Error Messages {#error-messages-6}\n\n```rust\nReceiptValidationError::InvalidPredecessorId { account_id } \n\"The predecessor_id `{}` of a Receipt is not valid.\"\n\nReceiptValidationError::InvalidReceiverId { account_id } \n\"The receiver_id `{}` of a Receipt is not valid.\"\n\nReceiptValidationError::InvalidSignerId { account_id } \n\"The signer_id `{}` of an ActionReceipt is not valid.\"\n\nReceiptValidationError::InvalidDataReceiverId { account_id } \n\"The receiver_id `{}` of a DataReceiver within an ActionReceipt is not valid.\"", "mimetype": "text/plain", "start_char_idx": 16174, "end_char_idx": 18311, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e": {"__data__": {"id_": "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdcaf138-6da2-4911-870c-4dbbc8531520", "node_type": "1", "metadata": {}, "hash": "c4f3700ca589eb10112dd5d1fedb3455248fdf27d2e0f043cc986ba9a482496b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b976425-577e-40ff-adbb-81f36187aad2", "node_type": "1", "metadata": {}, "hash": "a4b9944b561dc8000c616e002067f64483f891813fa716128c3b61b1268b9426", "class_name": "RelatedNodeInfo"}}, "text": "ReceiptValidationError::ReturnedValueLengthExceeded { length, limit } \n\"The length of the returned data {} exceeded the limit {} in a DataReceipt\"\n\nReceiptValidationError::NumberInputDataDependenciesExceeded { number_of_input_data_dependencies, limit } \n\"The number of input data dependencies {} exceeded the limit {} in an ActionReceipt\"\n\nReceiptValidationError::ActionsValidation(e) \n\nReceiptValidationError::ReceiptSizeExceeded { size, limit }\n\"The size of the receipt exceeded the limit: {} > {}\",\n```\n\n\n## VMError and subtypes {#vmerror-and-subtypes}\n\n### VMError {#vmerror}\n\n#### Definition {#definition-10}\n\n```rust\npub enum VMError {\n    FunctionCallError(FunctionCallError),\n    /// Serialized external error from External trait implementation.\n    ExternalError(Vec<u8>),\n    /// An error that is caused by an operation on an inconsistent state.\n    /// E.g. an integer overflow by using a value from the given context.", "mimetype": "text/plain", "start_char_idx": 18313, "end_char_idx": 19242, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0b976425-577e-40ff-adbb-81f36187aad2": {"__data__": {"id_": "0b976425-577e-40ff-adbb-81f36187aad2", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e", "node_type": "1", "metadata": {}, "hash": "9657a9b401509176d584d442e30d477f3de00a68f9ca93f6c846a94bc0891dc6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a09c021-26ec-4f74-bf7c-609e07402034", "node_type": "1", "metadata": {}, "hash": "81527262a100627ef70cbd64e044af5bff03acc44c7eea7ebd967a272b35833a", "class_name": "RelatedNodeInfo"}}, "text": "InconsistentStateError(InconsistentStateError),\n}\n```\n\n#### Error Messages {#error-messages-7}\n\n```rust\nVMError::ExternalError\n  \"Serialized ExternalError\"\n```\n\n### FunctionCallError {#functioncallerror}\n\n#### Definition {#definition-11}\n\n```rust\npub enum FunctionCallError {\n    CompilationError(CompilationError),\n    LinkError { msg: String },\n    MethodResolveError(MethodResolveError),\n    WasmTrap { msg: String },\n    HostError(HostError),\n}\n```\n\n#### Error Messages {#error-messages-8}\n\n```rust\nFunctionCallError::WasmTrap\n  \"WebAssembly trap: {}\"\n```\n\n### MethodResolveError {#methodresolveerror}\n\n#### Definition {#definition-12}\n\n```rust\npub enum MethodResolveError {\n    MethodEmptyName,\n    MethodUTF8Error,\n    MethodNotFound,\n    MethodInvalidSignature,\n}\n```\n\n### CompilationError {#compilationerror}\n\n#### Definition {#definition-13}\n\n```rust\npub enum CompilationError {\n    CodeDoesNotExist { account_id: String },\n    PrepareError(PrepareError),\n    WasmerCompileError { msg: String },\n}\n```\n#### Error Messages {#error-messages-9}\n\n```rust\nCompilationError::CodeDoesNotExist\n  \"cannot find contract code for account {}\"\n\nCompilationError::PrepareError(p)\n  \"PrepareError: {}\"\n\nCompilationError::WasmerCompileError\n  \"Wasmer compilation error: {}\"\n```\n\n### PrepareError {#prepareerror}\n\n#### Definition {#definition-14}\n\n```rust\n/// Error that can occur while preparing or executing Wasm smart-contract.\npub enum PrepareError {\n    /// Error happened while serializing the module.\n    Serialization,\n    /// Error happened while deserializing the module.\n    Deserialization,\n    /// Internal memory declaration has been found in the module.\n    InternalMemoryDeclared,\n    /// Gas instrumentation failed.\n    ///\n    /// This most likely indicates the module isn't valid.\n    GasInstrumentation,\n    /// Stack instrumentation failed.\n    ///\n    /// This  most likely indicates the module isn't valid.\n    StackHeightInstrumentation,\n    /// Error happened during instantiation.\n    ///\n    /// This might indicate that `start` function trapped, or module isn't\n    /// instantiable and/or unlinkable.\n    Instantiate,\n    /// Error creating memory.", "mimetype": "text/plain", "start_char_idx": 19247, "end_char_idx": 21416, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a09c021-26ec-4f74-bf7c-609e07402034": {"__data__": {"id_": "9a09c021-26ec-4f74-bf7c-609e07402034", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b976425-577e-40ff-adbb-81f36187aad2", "node_type": "1", "metadata": {}, "hash": "a4b9944b561dc8000c616e002067f64483f891813fa716128c3b61b1268b9426", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d79a500c-8b5b-49e0-8bf5-049b6e25df7f", "node_type": "1", "metadata": {}, "hash": "b0f9948da2ff9591c23af084b0b2adbb39b5ff7e6476b0d4e3d614d9333ecb25", "class_name": "RelatedNodeInfo"}}, "text": "Memory,\n}\n```\n\n#### Error Messages {#error-messages-10}\n\n```rust\nSerialization\n  \"Error happened while serializing the module.\"\n\nDeserialization\n  \"Error happened while deserializing the module.\"\n\nInternalMemoryDeclared\n  \"Internal memory declaration has been found in the module.\"\n\nGasInstrumentation\n  \"Gas instrumentation failed.\"\n\nStackHeightInstrumentation\n  \"Stack instrumentation failed.\"\n\nInstantiate\n  \"Error happened during instantiation.\"\n\nMemory\n  \"Error creating memory\"\n```\n\n### HostError {#hosterror}\n\n#### Definition {#definition-15}\n\n```rust\npub enum HostError {\n    /// String encoding is bad UTF-16 sequence\n    BadUTF16,\n    /// String encoding is bad UTF-8 sequence\n    BadUTF8,\n    /// Exceeded the prepaid gas\n    GasExceeded,\n    /// Exceeded the maximum amount of gas allowed to burn per contract\n    GasLimitExceeded,\n    /// Exceeded the account balance\n    BalanceExceeded,\n    /// Tried to call an empty method name\n    EmptyMethodName,\n    /// Smart contract panicked\n    GuestPanic { panic_msg: String },\n    /// IntegerOverflow happened during a contract execution\n    IntegerOverflow,\n    /// `promise_idx` does not correspond to existing promises\n    InvalidPromiseIndex { promise_idx: u64 },\n    /// Actions can only be appended to non-joint promise.", "mimetype": "text/plain", "start_char_idx": 21421, "end_char_idx": 22706, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d79a500c-8b5b-49e0-8bf5-049b6e25df7f": {"__data__": {"id_": "d79a500c-8b5b-49e0-8bf5-049b6e25df7f", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a09c021-26ec-4f74-bf7c-609e07402034", "node_type": "1", "metadata": {}, "hash": "81527262a100627ef70cbd64e044af5bff03acc44c7eea7ebd967a272b35833a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde", "node_type": "1", "metadata": {}, "hash": "676c5e9d01cd19d5147803a575201b5b61c3afae6f53d4db40db58e53484f76f", "class_name": "RelatedNodeInfo"}}, "text": "CannotAppendActionToJointPromise,\n    /// Returning joint promise is currently prohibited\n    CannotReturnJointPromise,\n    /// Accessed invalid promise result index\n    InvalidPromiseResultIndex { result_idx: u64 },\n    /// Accessed invalid register id\n    InvalidRegisterId { register_id: u64 },\n    /// Iterator `iterator_index` was invalidated after its creation by performing a mutable operation on trie\n    IteratorWasInvalidated { iterator_index: u64 },\n    /// Accessed memory outside the bounds\n    MemoryAccessViolation,\n    /// VM Logic returned an invalid receipt index\n    InvalidReceiptIndex { receipt_index: u64 },\n    /// Iterator index `iterator_index` does not exist\n    InvalidIteratorIndex { iterator_index: u64 },\n    /// VM Logic returned an invalid account id\n    InvalidAccountId,\n    /// VM Logic returned an invalid method name\n    InvalidMethodName,\n    /// VM Logic provided an invalid public key\n    InvalidPublicKey,\n    /// `method_name` is not allowed in view calls\n    ProhibitedInView { method_name: String },\n    /// The total number of logs will exceed the limit.\n    NumberOfLogsExceeded { limit: u64 },\n    /// The storage key length exceeded the limit.\n    KeyLengthExceeded { length: u64, limit: u64 },\n    /// The storage value length exceeded the limit.\n    ValueLengthExceeded { length: u64, limit: u64 },\n    /// The total log length exceeded the limit.\n    TotalLogLengthExceeded { length: u64, limit: u64 },\n    /// The maximum number of promises within a FunctionCall exceeded the limit.\n    NumberPromisesExceeded { number_of_promises: u64, limit: u64 },\n    /// The maximum number of input data dependencies exceeded the limit.\n    NumberInputDataDependenciesExceeded { number_of_input_data_dependencies: u64, limit: u64 },\n    /// The returned value length exceeded the limit.\n    ReturnedValueLengthExceeded { length: u64, limit: u64 },\n    /// The contract size for DeployContract action exceeded the limit.\n    ContractSizeExceeded { size: u64, limit: u64 },\n}\n```\n#### Error Messages {#error-messages-11}\n```rust\nBadUTF8 \n  \"String encoding is bad UTF-8 sequence.\"\n\nBadUTF16 \n  \"String encoding is bad UTF-16 sequence.\"\n\nGasExceeded \n  \"Exceeded the prepaid gas.\"", "mimetype": "text/plain", "start_char_idx": 22711, "end_char_idx": 24928, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde": {"__data__": {"id_": "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d79a500c-8b5b-49e0-8bf5-049b6e25df7f", "node_type": "1", "metadata": {}, "hash": "b0f9948da2ff9591c23af084b0b2adbb39b5ff7e6476b0d4e3d614d9333ecb25", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "421fd192-3741-4902-b961-6369a17f2ca3", "node_type": "1", "metadata": {}, "hash": "a25de7ee6e2f2856e3447fc7e8ebb704e823c7d60e04823f22af7f0c52a8e617", "class_name": "RelatedNodeInfo"}}, "text": "GasLimitExceeded \n  \"Exceeded the maximum amount of gas allowed to burn per contract.\"\n\nBalanceExceeded \n  \"Exceeded the account balance.\"\n\nEmptyMethodName \n  \"Tried to call an empty method name.\"\n\nGuestPanic { panic_msg } \n  \"Smart contract panicked: {}\"\n\nIntegerOverflow \n  \"Integer overflow.\"\n\nInvalidIteratorIndex { iterator_index } \n  \"Iterator index {:?} does not exist\"\n\nInvalidPromiseIndex { promise_idx } \n  \"{:?} does not correspond to existing promises\"\n\nCannotAppendActionToJointPromise \n  \"Actions can only be appended to non-joint promise.\"\n\nCannotReturnJointPromise \n  \"Returning joint promise is currently prohibited.\"\n\nInvalidPromiseResultIndex { result_idx } \n  \"Accessed invalid promise result index: {:?}\"\n\nInvalidRegisterId { register_id } \n  \"Accessed invalid register id: {:?}\"\n\nIteratorWasInvalidated { iterator_index } \n  \"Iterator {:?} was invalidated after its creation by performing a mutable operation on trie\"\n\nMemoryAccessViolation \n  \"Accessed memory outside the bounds.\"\n\nInvalidReceiptIndex { receipt_index } \n  \"VM Logic returned an invalid receipt index: {:?}\"", "mimetype": "text/plain", "start_char_idx": 24930, "end_char_idx": 26026, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "421fd192-3741-4902-b961-6369a17f2ca3": {"__data__": {"id_": "421fd192-3741-4902-b961-6369a17f2ca3", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde", "node_type": "1", "metadata": {}, "hash": "676c5e9d01cd19d5147803a575201b5b61c3afae6f53d4db40db58e53484f76f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4f3a3e6-6556-4b6c-8557-ce57e295a781", "node_type": "1", "metadata": {}, "hash": "0ff44fd4f3de716d5a0282424249d2501aa9da12f47f47978c98bc5293db39ec", "class_name": "RelatedNodeInfo"}}, "text": "InvalidAccountId \n  \"VM Logic returned an invalid account id\"\n\nInvalidMethodName \n  \"VM Logic returned an invalid method name\"\n\nInvalidPublicKey \n  \"VM Logic provided an invalid public key\"\n\nProhibitedInView { method_name } \n  \"{} is not allowed in view calls\"\n\nNumberOfLogsExceeded { limit } \n  \"The number of logs will exceed the limit {}\"\n\nKeyLengthExceeded { length, limit } \n  \"The length of a storage key {} exceeds the limit {}\"\n\nValueLengthExceeded { length, limit } \n  \"The length of a storage value {} exceeds the limit {}\"\n\nTotalLogLengthExceeded{ length, limit } \n  \"The length of a log message {} exceeds the limit {}\"\n\nNumberPromisesExceeded { number_of_promises, limit } \n  \"The number of promises within a FunctionCall {} exceeds the limit {}\"\n\nNumberInputDataDependenciesExceeded { number_of_input_data_dependencies, limit } \n  \"The number of input data dependencies {} exceeds the limit {}\"\n\nReturnedValueLengthExceeded { length, limit } \n  \"The length of a returned value {} exceeds the limit {}\"\n\nContractSizeExceeded { size, limit } \n  \"The size of a contract code in DeployContract action {} exceeds the limit {}\"\n\n```\n\n\n### VMLogicError {#vmlogicerror}\n\n#### Definition {#definition-16}\n\n```rust\npub enum VMLogicError {\n    HostError(HostError),\n    /// Serialized external error from External trait implementation.\n    ExternalError(Vec<u8>),\n    /// An error that is caused by an operation on an inconsistent state.\n    InconsistentStateError(InconsistentStateError),\n}\n```\n\n### InconsistentStateError {#inconsistentstateerror}\n\n#### Definition {#definition-17}\n\n```rust\npub enum InconsistentStateError {\n    /// Math operation with a value from the state resulted in a integer overflow.\n    IntegerOverflow,\n}\n```\n\n#### Error Messages {#error-messages-12}\n```rust\nInconsistentStateError::IntegerOverflow\n    \"Math operation with a value from the state resulted in a integer overflow.\"\n```\n\n\n## RPC interface {#rpc-interface}\n\n- error name\n- error subtype(s)\n- error properties\n\n### Error Schema {#error-schema}\n\n```json\n{\n  \"schema\": {\n    \"BadUTF16\": {\n      \"name\": \"BadUTF16\",\n      \"subtypes\": [],", "mimetype": "text/plain", "start_char_idx": 26028, "end_char_idx": 28155, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4f3a3e6-6556-4b6c-8557-ce57e295a781": {"__data__": {"id_": "f4f3a3e6-6556-4b6c-8557-ce57e295a781", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "421fd192-3741-4902-b961-6369a17f2ca3", "node_type": "1", "metadata": {}, "hash": "a25de7ee6e2f2856e3447fc7e8ebb704e823c7d60e04823f22af7f0c52a8e617", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c784c60-6114-4bcf-8494-7f011a279e49", "node_type": "1", "metadata": {}, "hash": "981be81784b302ffd94ba2f598c4d2a817127e797fd52618c338f2f246decc2c", "class_name": "RelatedNodeInfo"}}, "text": "\"props\": {}\n    },\n    \"BadUTF8\": {\n      \"name\": \"BadUTF8\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"BalanceExceeded\": {\n      \"name\": \"BalanceExceeded\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"CannotAppendActionToJointPromise\": {\n      \"name\": \"CannotAppendActionToJointPromise\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"CannotReturnJointPromise\": {\n      \"name\": \"CannotReturnJointPromise\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"CodeDoesNotExist\": {\n      \"name\": \"CodeDoesNotExist\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\"\n      }\n    },\n    \"CompilationError\": {\n      \"name\": \"CompilationError\",\n      \"subtypes\": [\n        \"CodeDoesNotExist\",\n        \"PrepareError\",\n        \"WasmerCompileError\"\n      ],\n      \"props\": {}\n    },\n    \"ContractSizeExceeded\": {\n      \"name\": \"ContractSizeExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"limit\": \"\",\n        \"size\": \"\"\n      }\n    },\n    \"Deserialization\": {\n      \"name\": \"Deserialization\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"EmptyMethodName\": {\n      \"name\": \"EmptyMethodName\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"FunctionCallError\": {\n      \"name\": \"FunctionCallError\",\n      \"subtypes\": [\n        \"CompilationError\",\n        \"LinkError\",\n        \"MethodResolveError\",\n        \"WasmTrap\",\n        \"HostError\"\n      ],\n      \"props\": {}\n    },\n    \"GasExceeded\": {\n      \"name\": \"GasExceeded\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"GasInstrumentation\": {\n      \"name\": \"GasInstrumentation\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"GasLimitExceeded\": {\n      \"name\": \"GasLimitExceeded\",\n      \"subtypes\": [],", "mimetype": "text/plain", "start_char_idx": 28162, "end_char_idx": 29867, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7c784c60-6114-4bcf-8494-7f011a279e49": {"__data__": {"id_": "7c784c60-6114-4bcf-8494-7f011a279e49", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4f3a3e6-6556-4b6c-8557-ce57e295a781", "node_type": "1", "metadata": {}, "hash": "0ff44fd4f3de716d5a0282424249d2501aa9da12f47f47978c98bc5293db39ec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6b2c5ca-cdee-4978-acfd-3e1b51d48243", "node_type": "1", "metadata": {}, "hash": "dda57c15759d84d0ae8e0f0d41ce30f8924baacd4c6d8a1cdc7917f9fb5d82e9", "class_name": "RelatedNodeInfo"}}, "text": "\"props\": {}\n    },\n    \"GuestPanic\": {\n      \"name\": \"GuestPanic\",\n      \"subtypes\": [],\n      \"props\": {\n        \"panic_msg\": \"\"\n      }\n    },\n    \"HostError\": {\n      \"name\": \"HostError\",\n      \"subtypes\": [\n        \"BadUTF16\",\n        \"BadUTF8\",\n        \"GasExceeded\",\n        \"GasLimitExceeded\",\n        \"BalanceExceeded\",\n        \"EmptyMethodName\",\n        \"GuestPanic\",\n        \"IntegerOverflow\",\n        \"InvalidPromiseIndex\",\n        \"CannotAppendActionToJointPromise\",\n        \"CannotReturnJointPromise\",\n        \"InvalidPromiseResultIndex\",\n        \"InvalidRegisterId\",\n        \"IteratorWasInvalidated\",\n        \"MemoryAccessViolation\",\n        \"InvalidReceiptIndex\",\n        \"InvalidIteratorIndex\",\n        \"InvalidAccountId\",\n        \"InvalidMethodName\",\n        \"InvalidPublicKey\",\n        \"ProhibitedInView\",\n        \"NumberOfLogsExceeded\",\n        \"KeyLengthExceeded\",\n        \"ValueLengthExceeded\",\n        \"TotalLogLengthExceeded\",\n        \"NumberPromisesExceeded\",\n        \"NumberInputDataDependenciesExceeded\",\n        \"ReturnedValueLengthExceeded\",\n        \"ContractSizeExceeded\"\n      ],\n      \"props\": {}\n    },\n    \"Instantiate\": {\n      \"name\": \"Instantiate\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"IntegerOverflow\": {\n      \"name\": \"IntegerOverflow\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InternalMemoryDeclared\": {\n      \"name\": \"InternalMemoryDeclared\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidAccountId\": {\n      \"name\": \"InvalidAccountId\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidIteratorIndex\": {\n      \"name\": \"InvalidIteratorIndex\",\n      \"subtypes\": [],\n      \"props\": {\n        \"iterator_index\": \"\"\n      }\n    },\n    \"InvalidMethodName\": {\n      \"name\": \"InvalidMethodName\",\n      \"subtypes\": [],\n      \"props\": {}\n    },", "mimetype": "text/plain", "start_char_idx": 29874, "end_char_idx": 31696, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6b2c5ca-cdee-4978-acfd-3e1b51d48243": {"__data__": {"id_": "c6b2c5ca-cdee-4978-acfd-3e1b51d48243", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7c784c60-6114-4bcf-8494-7f011a279e49", "node_type": "1", "metadata": {}, "hash": "981be81784b302ffd94ba2f598c4d2a817127e797fd52618c338f2f246decc2c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c", "node_type": "1", "metadata": {}, "hash": "05df1ede311410259a0232d33775ee1f1bbaf5eea0c09160a62d8202b6e321dc", "class_name": "RelatedNodeInfo"}}, "text": "\"InvalidPromiseIndex\": {\n      \"name\": \"InvalidPromiseIndex\",\n      \"subtypes\": [],\n      \"props\": {\n        \"promise_idx\": \"\"\n      }\n    },\n    \"InvalidPromiseResultIndex\": {\n      \"name\": \"InvalidPromiseResultIndex\",\n      \"subtypes\": [],\n      \"props\": {\n        \"result_idx\": \"\"\n      }\n    },\n    \"InvalidPublicKey\": {\n      \"name\": \"InvalidPublicKey\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidReceiptIndex\": {\n      \"name\": \"InvalidReceiptIndex\",\n      \"subtypes\": [],\n      \"props\": {\n        \"receipt_index\": \"\"\n      }\n    },\n    \"InvalidRegisterId\": {\n      \"name\": \"InvalidRegisterId\",\n      \"subtypes\": [],\n      \"props\": {\n        \"register_id\": \"\"\n      }\n    },\n    \"IteratorWasInvalidated\": {\n      \"name\": \"IteratorWasInvalidated\",\n      \"subtypes\": [],\n      \"props\": {\n        \"iterator_index\": \"\"\n      }\n    },\n    \"KeyLengthExceeded\": {\n      \"name\": \"KeyLengthExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"length\": \"\",\n        \"limit\": \"\"\n      }\n    },\n    \"LinkError\": {\n      \"name\": \"LinkError\",\n      \"subtypes\": [],\n      \"props\": {\n        \"msg\": \"\"\n      }\n    },\n    \"Memory\": {\n      \"name\": \"Memory\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"MemoryAccessViolation\": {\n      \"name\": \"MemoryAccessViolation\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"MethodEmptyName\": {\n      \"name\": \"MethodEmptyName\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"MethodInvalidSignature\": {\n      \"name\": \"MethodInvalidSignature\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"MethodNotFound\": {\n      \"name\": \"MethodNotFound\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"MethodResolveError\": {\n      \"name\": \"MethodResolveError\",", "mimetype": "text/plain", "start_char_idx": 31701, "end_char_idx": 33422, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c": {"__data__": {"id_": "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6b2c5ca-cdee-4978-acfd-3e1b51d48243", "node_type": "1", "metadata": {}, "hash": "dda57c15759d84d0ae8e0f0d41ce30f8924baacd4c6d8a1cdc7917f9fb5d82e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c8220e7-265a-47db-a176-b1bbfaf230b5", "node_type": "1", "metadata": {}, "hash": "a59d086932cc97cac25b9de3be193d52fd8703123732f06a7595654b25f61e82", "class_name": "RelatedNodeInfo"}}, "text": "\"subtypes\": [\n        \"MethodEmptyName\",\n        \"MethodUTF8Error\",\n        \"MethodNotFound\",\n        \"MethodInvalidSignature\"\n      ],\n      \"props\": {}\n    },\n    \"MethodUTF8Error\": {\n      \"name\": \"MethodUTF8Error\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"NumberInputDataDependenciesExceeded\": {\n      \"name\": \"NumberInputDataDependenciesExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"limit\": \"\",\n        \"number_of_input_data_dependencies\": \"\"\n      }\n    },\n    \"NumberOfLogsExceeded\": {\n      \"name\": \"NumberOfLogsExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"limit\": \"\"\n      }\n    },\n    \"NumberPromisesExceeded\": {\n      \"name\": \"NumberPromisesExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"limit\": \"\",\n        \"number_of_promises\": \"\"\n      }\n    },\n    \"PrepareError\": {\n      \"name\": \"PrepareError\",\n      \"subtypes\": [\n        \"Serialization\",\n        \"Deserialization\",\n        \"InternalMemoryDeclared\",\n        \"GasInstrumentation\",\n        \"StackHeightInstrumentation\",\n        \"Instantiate\",\n        \"Memory\"\n      ],\n      \"props\": {}\n    },\n    \"ProhibitedInView\": {\n      \"name\": \"ProhibitedInView\",\n      \"subtypes\": [],\n      \"props\": {\n        \"method_name\": \"\"\n      }\n    },\n    \"ReturnedValueLengthExceeded\": {\n      \"name\": \"ReturnedValueLengthExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"length\": \"\",\n        \"limit\": \"\"\n      }\n    },\n    \"Serialization\": {\n      \"name\": \"Serialization\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"StackHeightInstrumentation\": {\n      \"name\": \"StackHeightInstrumentation\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"TotalLogLengthExceeded\": {\n      \"name\": \"TotalLogLengthExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"length\": \"\",\n        \"limit\": \"\"\n      }\n    },", "mimetype": "text/plain", "start_char_idx": 33429, "end_char_idx": 35251, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c8220e7-265a-47db-a176-b1bbfaf230b5": {"__data__": {"id_": "6c8220e7-265a-47db-a176-b1bbfaf230b5", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c", "node_type": "1", "metadata": {}, "hash": "05df1ede311410259a0232d33775ee1f1bbaf5eea0c09160a62d8202b6e321dc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3007f512-b2a7-4c06-9ad0-e0e6752075a5", "node_type": "1", "metadata": {}, "hash": "ed5f25bc87cf3940530d77f5f27a2f097d05c6ecc9234ab39a6178eacd1aed13", "class_name": "RelatedNodeInfo"}}, "text": "\"ValueLengthExceeded\": {\n      \"name\": \"ValueLengthExceeded\",\n      \"subtypes\": [],\n      \"props\": {\n        \"length\": \"\",\n        \"limit\": \"\"\n      }\n    },\n    \"WasmTrap\": {\n      \"name\": \"WasmTrap\",\n      \"subtypes\": [],\n      \"props\": {\n        \"msg\": \"\"\n      }\n    },\n    \"WasmerCompileError\": {\n      \"name\": \"WasmerCompileError\",\n      \"subtypes\": [],\n      \"props\": {\n        \"msg\": \"\"\n      }\n    },\n    \"AccessKeyNotFound\": {\n      \"name\": \"AccessKeyNotFound\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"public_key\": \"\"\n      }\n    },\n    \"AccountAlreadyExists\": {\n      \"name\": \"AccountAlreadyExists\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\"\n      }\n    },\n    \"AccountDoesNotExist\": {\n      \"name\": \"AccountDoesNotExist\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\"\n      }\n    },\n    \"ActionError\": {\n      \"name\": \"ActionError\",\n      \"subtypes\": [\n        \"AccountAlreadyExists\",\n        \"AccountDoesNotExist\",\n        \"CreateAccountNotAllowed\",\n        \"ActorNoPermission\",\n        \"DeleteKeyDoesNotExist\",\n        \"AddKeyAlreadyExists\",\n        \"DeleteAccountStaking\",\n        \"DeleteAccountHasRent\",\n        \"RentUnpaid\",\n        \"TriesToUnstake\",\n        \"TriesToStake\",\n        \"FunctionCallError\",\n        \"NewReceiptValidationError\"\n      ],\n      \"props\": {\n        \"index\": \"\"\n      }\n    },\n    \"ActorNoPermission\": {\n      \"name\": \"ActorNoPermission\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"actor_id\": \"\"\n      }\n    },\n    \"AddKeyAlreadyExists\": {\n      \"name\": \"AddKeyAlreadyExists\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"public_key\": \"\"\n      }\n    },", "mimetype": "text/plain", "start_char_idx": 35256, "end_char_idx": 36983, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3007f512-b2a7-4c06-9ad0-e0e6752075a5": {"__data__": {"id_": "3007f512-b2a7-4c06-9ad0-e0e6752075a5", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c8220e7-265a-47db-a176-b1bbfaf230b5", "node_type": "1", "metadata": {}, "hash": "a59d086932cc97cac25b9de3be193d52fd8703123732f06a7595654b25f61e82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6d28344-a59f-4c5e-96ac-525aa120075f", "node_type": "1", "metadata": {}, "hash": "6bb082a1e170d24a129f9c60d2ff829a951d03c5019494e87c7057e5393055be", "class_name": "RelatedNodeInfo"}}, "text": "\"BalanceMismatchError\": {\n      \"name\": \"BalanceMismatchError\",\n      \"subtypes\": [],\n      \"props\": {\n        \"final_accounts_balance\": \"\",\n        \"final_postponed_receipts_balance\": \"\",\n        \"incoming_receipts_balance\": \"\",\n        \"incoming_validator_rewards\": \"\",\n        \"initial_accounts_balance\": \"\",\n        \"initial_postponed_receipts_balance\": \"\",\n        \"new_delayed_receipts_balance\": \"\",\n        \"outgoing_receipts_balance\": \"\",\n        \"processed_delayed_receipts_balance\": \"\",\n        \"total_balance_burnt\": \"\",\n        \"total_balance_slashed\": \"\",\n        \"total_rent_paid\": \"\",\n        \"total_validator_reward\": \"\"\n      }\n    },\n    \"CostOverflow\": {\n      \"name\": \"CostOverflow\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"CreateAccountNotAllowed\": {\n      \"name\": \"CreateAccountNotAllowed\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"predecessor_id\": \"\"\n      }\n    },\n    \"DeleteAccountHasRent\": {\n      \"name\": \"DeleteAccountHasRent\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"balance\": \"\"\n      }\n    },\n    \"DeleteAccountStaking\": {\n      \"name\": \"DeleteAccountStaking\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\"\n      }\n    },\n    \"DeleteKeyDoesNotExist\": {\n      \"name\": \"DeleteKeyDoesNotExist\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"public_key\": \"\"\n      }\n    },\n    \"DepositWithFunctionCall\": {\n      \"name\": \"DepositWithFunctionCall\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"Expired\": {\n      \"name\": \"Expired\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidAccessKeyError\": {\n      \"name\": \"InvalidAccessKeyError\",\n      \"subtypes\": [\n        \"AccessKeyNotFound\",\n        \"ReceiverMismatch\",\n        \"MethodNameMismatch\",\n        \"RequiresFullAccess\",\n        \"NotEnoughAllowance\",", "mimetype": "text/plain", "start_char_idx": 36988, "end_char_idx": 38860, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6d28344-a59f-4c5e-96ac-525aa120075f": {"__data__": {"id_": "c6d28344-a59f-4c5e-96ac-525aa120075f", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3007f512-b2a7-4c06-9ad0-e0e6752075a5", "node_type": "1", "metadata": {}, "hash": "ed5f25bc87cf3940530d77f5f27a2f097d05c6ecc9234ab39a6178eacd1aed13", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "728a0cae-2ea3-440b-a572-225cb42bdfed", "node_type": "1", "metadata": {}, "hash": "8fcfb469008b8f86a7c6d25dd44699b7f091939cea8087349675523ac8f8463d", "class_name": "RelatedNodeInfo"}}, "text": "\"DepositWithFunctionCall\"\n      ],\n      \"props\": {}\n    },\n    \"InvalidChain\": {\n      \"name\": \"InvalidChain\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidNonce\": {\n      \"name\": \"InvalidNonce\",\n      \"subtypes\": [],\n      \"props\": {\n        \"ak_nonce\": \"\",\n        \"tx_nonce\": \"\"\n      }\n    },\n    \"InvalidReceiverId\": {\n      \"name\": \"InvalidReceiverId\",\n      \"subtypes\": [],\n      \"props\": {\n        \"receiver_id\": \"\"\n      }\n    },\n    \"InvalidSignature\": {\n      \"name\": \"InvalidSignature\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"InvalidSignerId\": {\n      \"name\": \"InvalidSignerId\",\n      \"subtypes\": [],\n      \"props\": {\n        \"signer_id\": \"\"\n      }\n    },\n    \"InvalidTxError\": {\n      \"name\": \"InvalidTxError\",\n      \"subtypes\": [\n        \"InvalidAccessKeyError\",\n        \"InvalidSignerId\",\n        \"SignerDoesNotExist\",\n        \"InvalidNonce\",\n        \"InvalidReceiverId\",\n        \"InvalidSignature\",\n        \"NotEnoughBalance\",\n        \"RentUnpaid\",\n        \"CostOverflow\",\n        \"InvalidChain\",\n        \"Expired\",\n        \"ActionsValidation\"\n      ],\n      \"props\": {}\n    },\n    \"MethodNameMismatch\": {\n      \"name\": \"MethodNameMismatch\",\n      \"subtypes\": [],\n      \"props\": {\n        \"method_name\": \"\"\n      }\n    },\n    \"NotEnoughAllowance\": {\n      \"name\": \"NotEnoughAllowance\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"allowance\": \"\",\n        \"cost\": \"\",\n        \"public_key\": \"\"\n      }\n    },\n    \"NotEnoughBalance\": {\n      \"name\": \"NotEnoughBalance\",\n      \"subtypes\": [],\n      \"props\": {\n        \"balance\": \"\",\n        \"cost\": \"\",\n        \"signer_id\": \"\"\n      }\n    },\n    \"ReceiverMismatch\": {\n      \"name\": \"ReceiverMismatch\",\n      \"subtypes\": [],", "mimetype": "text/plain", "start_char_idx": 38869, "end_char_idx": 40612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "728a0cae-2ea3-440b-a572-225cb42bdfed": {"__data__": {"id_": "728a0cae-2ea3-440b-a572-225cb42bdfed", "embedding": null, "metadata": {"file_path": "./near_dist/error-implementation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3", "node_type": "4", "metadata": {}, "hash": "08d38c7a7a8a923956615dc8bb6943ba1565f1174abd7dffdc3213b99602e736", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6d28344-a59f-4c5e-96ac-525aa120075f", "node_type": "1", "metadata": {}, "hash": "6bb082a1e170d24a129f9c60d2ff829a951d03c5019494e87c7057e5393055be", "class_name": "RelatedNodeInfo"}}, "text": "\"props\": {\n        \"ak_receiver\": \"\",\n        \"tx_receiver\": \"\"\n      }\n    },\n    \"RentUnpaid\": {\n      \"name\": \"RentUnpaid\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"amount\": \"\"\n      }\n    },\n    \"RequiresFullAccess\": {\n      \"name\": \"RequiresFullAccess\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"SignerDoesNotExist\": {\n      \"name\": \"SignerDoesNotExist\",\n      \"subtypes\": [],\n      \"props\": {\n        \"signer_id\": \"\"\n      }\n    },\n    \"TriesToStake\": {\n      \"name\": \"TriesToStake\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\",\n        \"balance\": \"\",\n        \"locked\": \"\",\n        \"stake\": \"\"\n      }\n    },\n    \"TriesToUnstake\": {\n      \"name\": \"TriesToUnstake\",\n      \"subtypes\": [],\n      \"props\": {\n        \"account_id\": \"\"\n      }\n    },\n    \"TxExecutionError\": {\n      \"name\": \"TxExecutionError\",\n      \"subtypes\": [\n        \"ActionError\",\n        \"InvalidTxError\"\n      ],\n      \"props\": {}\n    },\n    \"Closed\": {\n      \"name\": \"Closed\",\n      \"subtypes\": [],\n      \"props\": {}\n    },\n    \"ServerError\": {\n      \"name\": \"ServerError\",\n      \"subtypes\": [\n        \"TxExecutionError\",\n        \"Timeout\",\n        \"Closed\"\n      ],\n      \"props\": {}\n    },\n    \"Timeout\": {\n      \"name\": \"Timeout\",\n      \"subtypes\": [],\n      \"props\": {}\n    }\n  }\n}\n```\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 40619, "end_char_idx": 42113, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7a2d32a1-b036-4345-b752-2e84a2bb610e": {"__data__": {"id_": "7a2d32a1-b036-4345-b752-2e84a2bb610e", "embedding": null, "metadata": {"file_path": "./near_dist/token-loss.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b62153ab-6ad2-4ef9-ab1e-08ed8369badf", "node_type": "4", "metadata": {}, "hash": "5e8fcec996e8a5e3e94827a9ff20282b57d7f2e3f3726749b91840350b683004", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "75261c96-7198-4e6f-9d48-fa29a1652778", "node_type": "1", "metadata": {}, "hash": "6f5112c5deba4f2c419b4d926898d4a0109969ec5e3a98c83fb89cdf3bb151c5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: token-loss\ntitle: Avoiding Token Loss\nsidebar_label: Avoiding Token Loss\n---\n\n:::warning\nCareful! Losing tokens means losing money!\n:::\n\n\nToken loss is possible under multiple scenarios. These scenarios can be grouped into a few related classes:\n\n1. Improper key management\n2. Refunding deleted accounts\n3. Failed function calls in batches\n\n---\n\n## Improper key management\n\nImproper key management may lead to token loss. Mitigating such scenarios may be done by issuing backup keys\nallowing for recovery of accounts whose keys have been lost or deleted.\n\n### Loss of `FullAccess` key\n\nA user may lose their private key of a `FullAccess` key pair for an account with no other keys.\nNo one will be able to recover the funds. Funds will remain locked in the account forever.\n\n### Loss of `FunctionCall` access key\n\nAn account may have its one and only `FunctionCall` access key deleted.\nNo one will be able to recover the funds. Funds will remain locked in the account forever.\n\n---\n## Refunding deleted accounts\n\nWhen a refund receipt is issued for an account, if that account no longer exists, the funds will be dispersed among\nvalidators proportional to their stake in the current epoch.\n\n### Deleting account with non-existent beneficiary\n\nWhen you delete an account, you must assign a beneficiary.\nOnce deleted, a transfer receipt is generated and sent to the beneficiary account.\nIf the beneficiary account does not exist, a refund receipt will be generated and sent back to the original account.\nSince the original account has already been deleted, the funds will be dispersed among validators.\n\n### Account with zero balance is garbage-collected, just before it receives refund\n\nIf an account `A` transfers all of its funds to another account `B` and account `B` does not exist,\na refund receipt will be generated for account `A`. During the period of this round trip,\naccount `A` is vulnerable to deletion by garbage collection activities on the network.\nIf account `A` is deleted before the refund receipt arrives, the funds will be dispersed among validators.\n\n---\n## Failed function calls in batches\n\n:::warning\nWhen designing a smart contract, you should always consider the asynchronous nature of NEAR Protocol.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2231, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "75261c96-7198-4e6f-9d48-fa29a1652778": {"__data__": {"id_": "75261c96-7198-4e6f-9d48-fa29a1652778", "embedding": null, "metadata": {"file_path": "./near_dist/token-loss.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b62153ab-6ad2-4ef9-ab1e-08ed8369badf", "node_type": "4", "metadata": {}, "hash": "5e8fcec996e8a5e3e94827a9ff20282b57d7f2e3f3726749b91840350b683004", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7a2d32a1-b036-4345-b752-2e84a2bb610e", "node_type": "1", "metadata": {}, "hash": "80a22ee553605e31cdae8e57ad5d1c569e43b08e07509f30dbe24ce0da2d1a09", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\nIf a contract function `f1` calls two (or more) other functions `f2` and `f3`, and at least one of these functions, `f2` and `f3` fails, then tokens will be refunded from the function that failed, but tokens will be appropriately credited to the function(s) which succeed.\n\nThe successful call's tokens may be considered lost depending on your use case if a single failure in the batch means the whole batch failed.", "mimetype": "text/plain", "start_char_idx": 2232, "end_char_idx": 2652, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2a9284c-e7a6-4f7d-ac0c-2c68a3b49709": {"__data__": {"id_": "c2a9284c-e7a6-4f7d-ac0c-2c68a3b49709", "embedding": null, "metadata": {"file_path": "./near_dist/count-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc47d689-483e-4671-9b32-ed46aea89d16", "node_type": "4", "metadata": {}, "hash": "c8258eec926c0cd181773caa4519a5b7f16a3ad3baf9791375e8f65969f43fac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d", "node_type": "1", "metadata": {}, "hash": "8b7b5943d47b31d99c63365a5f3342e1c3a434220e54516fe8ee6a14585933e6", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: count-near\ntitle: Count on NEAR\n---\n\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nOur counter example is a friendly decentralized app that stores a number and exposes methods to `increment`,\n`decrement`, and `reset` it.\n\n![img](/docs/assets/examples/count-on-near-banner.png)\n\n---\n\n## Obtaining the Counter Example\n\nYou have two options to start the Counter Example.\n\n1. You can use the app through `GitHub Codespaces`, which will open a web-based interactive environment.\n2. Clone the repository locally and use it from your computer.\n\n| Codespaces                                                                                                             | Clone locally                                  |\n| ---------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |\n| [![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/near-examples/counters) | \ud83c\udf10 `https://github.com/near-examples/counters` |\n\n---\n\n## Structure of the Example\n\nThe example is divided in two main components:\n\n1. The smart contract, available in two flavors: Rust and JavaScript\n2. The frontend, that interacts with an already deployed contract.\n\n<Tabs groupId=\"code-tabs\">\n\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n\u250c\u2500\u2500 sandbox-ts # sandbox testing\n\u2502    \u251c\u2500\u2500 src\n\u2502    \u2502    \u2514\u2500\u2500 main.ava.ts\n\u2502    \u251c\u2500\u2500 ava.config.cjs\n\u2502    \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u2514\u2500\u2500 contract.ts\n\u251c\u2500\u2500 package.json # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tsconfig.json # test script\n```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n\u250c\u2500\u2500 src # contract's code\n\u2502    \u2514\u2500\u2500 lib.rs\n\u251c\u2500\u2500 tests # sandbox test\n\u2502    \u2514\u2500\u2500 test_basics.rs\n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Frontend\n\nThe counter example includes a frontend interface designed to interact seamlessly with an existing smart contract that has been deployed.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2120, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d": {"__data__": {"id_": "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d", "embedding": null, "metadata": {"file_path": "./near_dist/count-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc47d689-483e-4671-9b32-ed46aea89d16", "node_type": "4", "metadata": {}, "hash": "c8258eec926c0cd181773caa4519a5b7f16a3ad3baf9791375e8f65969f43fac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2a9284c-e7a6-4f7d-ac0c-2c68a3b49709", "node_type": "1", "metadata": {}, "hash": "2c3f9fb4befb711a580552d1fffb8688d64a5f7d4553a1ed0d8b209f51c0ddcb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a97a7307-d490-40d1-bb67-2ed76f0d3c7e", "node_type": "1", "metadata": {}, "hash": "293f5880108b1f59e640b5ca3091c533a025635c7032d3103fb0f1c863dfb699", "class_name": "RelatedNodeInfo"}}, "text": "This interface allows users to increase or decrease the counter as needed.\n\n<hr class=\"subsection\" />\n\n### Running the Frontend\n\nTo start the frontend you will need to install the dependencies and start the server.\n\n```bash\ncd frontend\nyarn\nyarn dev\n```\n\nGo ahead and login with your NEAR account. If you don't have one, you will be able to create one in the moment. Once logged in, use the `+` and `-` buttons to increase and decrease the counter. Then, use the Gameboy buttons to reset it and make the counter blink an eye!\n\n![img](/docs/assets/examples/count-on-near.png)\n_Frontend of the Counter_\n\n<hr class=\"subsection\" />\n\n### Understanding the Frontend\n\nThe frontend is a [Next.JS](https://nextjs.org/) project generated by [create-near-app](https://github.com/near/create-near-app). Check `_app.js` and `index.js` to understand how components are displayed and interacting with the contract.\n\n<Language value=\"js\" language=\"js\">\n  <Github fname=\"_app.js\"\n          url=\"https://github.com/near-examples/counters/blob/main/frontend/src/pages/_app.js\"/>\n  <Github fname=\"index.js\"\n          url=\"https://github.com/near-examples/counters/blob/main/frontend/src/pages/index.js\"/>\n</Language>\n\n---\n\n## Smart Contract\n\nThe contract presents 4 methods: `get_num`, `increment`, `decrement`, and `reset`. The method `get_num` retrieves the current value, and the rest modify it.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/counters/blob/main/contract-ts/src/contract.ts\"\n            start=\"3\" end=\"29\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/counters/blob/main/contract-rs/src/lib.rs\"\n            start=\"5\" end=\"37\" />\n  </Language>\n</CodeTabs>\n\n---\n\n### Testing the Contract\n\nThe contract readily includes a set of unit and sandbox testing to validate its functionality.", "mimetype": "text/plain", "start_char_idx": 2121, "end_char_idx": 4076, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a97a7307-d490-40d1-bb67-2ed76f0d3c7e": {"__data__": {"id_": "a97a7307-d490-40d1-bb67-2ed76f0d3c7e", "embedding": null, "metadata": {"file_path": "./near_dist/count-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc47d689-483e-4671-9b32-ed46aea89d16", "node_type": "4", "metadata": {}, "hash": "c8258eec926c0cd181773caa4519a5b7f16a3ad3baf9791375e8f65969f43fac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d", "node_type": "1", "metadata": {}, "hash": "8b7b5943d47b31d99c63365a5f3342e1c3a434220e54516fe8ee6a14585933e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9727b06e-351e-4920-810e-89a5fdb07954", "node_type": "1", "metadata": {}, "hash": "4c3b1c862db4455a9519e516c48c1551c5dc5b2060bd03c324dde929dc6307c0", "class_name": "RelatedNodeInfo"}}, "text": "To execute the tests, run the following commands:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\ncd contract-ts\nyarn\nyarn test\n```\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n  \n  ```bash\n  cd contract-rs\n  cargo test\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\nThe `integration tests` use a sandbox to create NEAR users and simulate interactions with the contract.\n:::\n\n<hr class=\"subsection\" />\n\n### Deploying the Contract to the NEAR network\n\nIn order to deploy the contract you will need to create a NEAR account.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nGo into the directory containing the smart contract (`cd contract-ts` or `cd contract-rs`), build and deploy it:\n\n```bash\ncargo near build\n\ncargo near deploy <accountId>\n```\n:::tip\nTo interact with your contract from the [frontend](#frontend), simply replace the value of the `testnet` key in the `config.js` file.\n:::\n\n<hr class=\"subsection\" />\n\n### CLI: Interacting with the Contract\n\nTo interact with the contract through the console, you can use the following commands.\n\n#### Get the current number of the counter\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view counter.near-examples.testnet get_num\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n   near contract call-function as-read-only counter.near-examples.", "mimetype": "text/plain", "start_char_idx": 4077, "end_char_idx": 5887, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9727b06e-351e-4920-810e-89a5fdb07954": {"__data__": {"id_": "9727b06e-351e-4920-810e-89a5fdb07954", "embedding": null, "metadata": {"file_path": "./near_dist/count-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc47d689-483e-4671-9b32-ed46aea89d16", "node_type": "4", "metadata": {}, "hash": "c8258eec926c0cd181773caa4519a5b7f16a3ad3baf9791375e8f65969f43fac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a97a7307-d490-40d1-bb67-2ed76f0d3c7e", "node_type": "1", "metadata": {}, "hash": "293f5880108b1f59e640b5ca3091c533a025635c7032d3103fb0f1c863dfb699", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9e2b8a87-1424-435a-bdfe-171ad45917e1", "node_type": "1", "metadata": {}, "hash": "1257744643055006c194d3fbf484acd2c87aff591594ecf6ba5f50493fccaa15", "class_name": "RelatedNodeInfo"}}, "text": "testnet get_num json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Increment the counter\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near call counter.near-examples.testnet increment --accountId <accountId>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction counter.near-examples.testnet increment json-args {} prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as aha_6.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Decrement the counter\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near call counter.near-examples.testnet decrement --accountId <accountId>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction counter.near-examples.testnet decrement json-args {} prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as aha_6.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Reset the counter to zero\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near call counter.near-examples.testnet reset --accountId <accountId>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction counter.near-examples.testnet reset json-args {} prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as aha_6.", "mimetype": "text/plain", "start_char_idx": 5887, "end_char_idx": 7720, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9e2b8a87-1424-435a-bdfe-171ad45917e1": {"__data__": {"id_": "9e2b8a87-1424-435a-bdfe-171ad45917e1", "embedding": null, "metadata": {"file_path": "./near_dist/count-near.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc47d689-483e-4671-9b32-ed46aea89d16", "node_type": "4", "metadata": {}, "hash": "c8258eec926c0cd181773caa4519a5b7f16a3ad3baf9791375e8f65969f43fac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9727b06e-351e-4920-810e-89a5fdb07954", "node_type": "1", "metadata": {}, "hash": "4c3b1c862db4455a9519e516c48c1551c5dc5b2060bd03c324dde929dc6307c0", "class_name": "RelatedNodeInfo"}}, "text": "testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n:::tip\nIf you're using your own account, replace `counter.near-examples.testnet` with your `accountId`.\n:::\n\n---\n\n## Moving Forward\n\nA nice way to learn is by trying to expand the contract. Modify it by adding a parameter to `increment` and `decrement`,\nso the user can choose by how much to change the value. For this, you will need to use knowledge from the [anatomy](../../2.build/2.smart-contracts/anatomy/anatomy.md)\nand [storage](../../2.build/2.smart-contracts/anatomy/storage.md) sections.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 7720, "end_char_idx": 8478, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3934eb11-4815-4c82-9d96-0af7b010394f": {"__data__": {"id_": "3934eb11-4815-4c82-9d96-0af7b010394f", "embedding": null, "metadata": {"file_path": "./near_dist/intro.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b4094f74-d6fb-45c6-aca0-14a89c1bb36a", "node_type": "4", "metadata": {}, "hash": "e865c3f596fcce62b6b31b2036339c9d99668b1780d499a36708f3c10daf629d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "31b0a2ec-8e29-403b-afc7-37df7c37309e", "node_type": "1", "metadata": {}, "hash": "90e7dd8802c53c9a98d5b65165a7158fc03b443e1bc311a06b0b8ee4adc16e1e", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 1\nsidebar_label: Introduction\ntitle: Pagoda RPC API\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n:::warning\n\nPlease be advised that these tools and services will be discontinued soon.\n\n:::\n\n## Overview\n\nThe Pagoda RPC provides you with instant access to maintenance free, scalable NEAR infrastructure, powering you on the fastest path from ideas to launch.\n\nDevelopers can interact with on-chain data and send different types of transactions to the network by utilizing the RPC endpoints.\n\nIn addition to the powerful node infrastructure, we also created the Pagoda RPC Stats page so that you can have visibility into your RPC usage and performances and take control of your project from the infrastructure level. What\u2019s more? You can subscribe to the alerts from our Status page so that you can follow the health of Pagoda RPC real time. All accessible via [Pagoda Console](https://console.pagoda.co/).\n\n## Setup\n\n### API Keys\n\n- [Getting API keys](get-keys.md)\n- [Testing your API keys](setup.md#test-your-api-keys)\n\n### Tools\n\n- [Postman](setup.md#postman-setup) setup\n- [Command-line (CLI)](setup.md#command-line-setup) setup\n- [JavaScript](setup.md#javascript-setup) setup\n- [Rust](setup.md#rust-setup) setup\n\n---\n\n## RPC Endpoints - Quick Links\n\n| API                                        | Description                                                                  |\n| ------------------------------------------ | ---------------------------------------------------------------------------- |\n| [Access Keys](/api/rpc/access-keys)        | Retrieve information about an account's access keys.                         |\n| [Accounts / Contracts](/api/rpc/contracts) | View details about accounts and contracts as well as perform contract calls. |\n| [Block / Chunk](/api/rpc/block-chunk)      | Query the network and get details about specific blocks or chunks.           |\n| [Gas](/api/rpc/gas)                        | Get gas price for a specific block or hash.                                  |\n| [Protocol](/api/rpc/protocol)              | Retrieve current genesis and protocol configuration.                         |\n| [Network](/api/rpc/network)                | Return status information for nodes and validators.                          |\n| [Transactions](/api/rpc/transactions)      | Send transactions and query their status.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2401, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31b0a2ec-8e29-403b-afc7-37df7c37309e": {"__data__": {"id_": "31b0a2ec-8e29-403b-afc7-37df7c37309e", "embedding": null, "metadata": {"file_path": "./near_dist/intro.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b4094f74-d6fb-45c6-aca0-14a89c1bb36a", "node_type": "4", "metadata": {}, "hash": "e865c3f596fcce62b6b31b2036339c9d99668b1780d499a36708f3c10daf629d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3934eb11-4815-4c82-9d96-0af7b010394f", "node_type": "1", "metadata": {}, "hash": "35f7b18422d585d9e91b4f5d9954328f9243291047c653cc184ad6a858794f1d", "class_name": "RelatedNodeInfo"}}, "text": "|\n\n:::tip\n\nYou can access the JSON RPC 2.0 endpoints using [Postman](setup.md#postman-setup),\n[JavaScript](setup.md#javascript-setup), [Rust](setup.md#rust-setup), and [CLI](setup.md#command-line-setup).\n\n:::", "mimetype": "text/plain", "start_char_idx": 2437, "end_char_idx": 2645, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af80a050-a746-4b8d-a2a6-de439413d3f5": {"__data__": {"id_": "af80a050-a746-4b8d-a2a6-de439413d3f5", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ddf3bbad-3bf6-497a-97e9-ee5564824ee4", "node_type": "1", "metadata": {}, "hash": "f14fa0d7822149b94fb314c819db9b56394937cbf8ae013d6737734d6f0811a2", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: donation\ntitle: Donation\n---\n\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nOur donation example enables to forward NEAR Tokens to an account while keeping track of it. It is one of the simplest examples on making a contract handle tranfers.\n\n![img](/docs/assets/examples/donation.png)\n_Frontend of the Donation App_\n\n---\n\n## Obtaining the Donation Example\n\nYou have two options to start the Donation Example.\n\n1. You can use the app through `Github Codespaces`, which will open a web-based interactive environment.\n2. Clone the repository locally and use it from your computer.\n\n| Codespaces                                                                                                                      | Clone locally                                               |\n| ------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- |\n| [![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/near-examples/donation-examples) | \ud83c\udf10 `https://github.com/near-examples/donation-examples.git` |\n\n---\n\n## Structure of the Example\n\nThe example is divided in two main components:\n\n1. The smart contract, available in two flavors: rust and javascript\n2. The frontend, that interacts with an already deployed contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1486, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ddf3bbad-3bf6-497a-97e9-ee5564824ee4": {"__data__": {"id_": "ddf3bbad-3bf6-497a-97e9-ee5564824ee4", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af80a050-a746-4b8d-a2a6-de439413d3f5", "node_type": "1", "metadata": {}, "hash": "4bfeb2d800f463222900ea99c222f3ac91bb29069d12fca4fb9959ef1c30b163", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eaa02ef6-02b8-41e2-8c37-84c436fd22fe", "node_type": "1", "metadata": {}, "hash": "6b5f1a55988d0b0d528204451e1dd2eeb0aec12d9ca2a0f9886ccb195354300a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n\u250c\u2500\u2500 sandbox-ts # sandbox testing\n\u2502    \u251c\u2500\u2500 src\n\u2502    \u2502    \u2514\u2500\u2500 main.ava.ts\n\u2502    \u251c\u2500\u2500 ava.config.cjs\n\u2502    \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 contract.ts\n\u2502    \u251c\u2500\u2500 model.ts\n\u2502    \u2514\u2500\u2500 utils.ts\n\u251c\u2500\u2500 package.json # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tsconfig.json # test script\n```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n\u250c\u2500\u2500 tests # workspaces testing\n\u2502    \u251c\u2500\u2500 workspaces.rs\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 donation.rs\n\u2502    \u2514\u2500\u2500 lib.rs\n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Frontend\n\nThe donation example includes a frontend that interacts with an already deployed smart contract, allowing user to donate NEAR tokens to a faucet service.\n\n<hr class=\"subsection\" />\n\n### Running the Frontend\n\nTo start the frontend you will need to install the dependencies and start the server.\n\n```bash\ncd frontend\nyarn\nyarn dev\n```\n\nGo ahead and login with your NEAR account. If you don't have one, you will be able to create one in the moment. Once logged in, input the amount of NEAR you want to donate and press the donate button. You will be redirected to the NEAR Wallet to confirm the transaction. After confirming it, the donation will be listed in the \"Latest Donations\".\n\n<hr class=\"subsection\" />\n\n### Understanding the Frontend\n\nThe frontend is a [Next.JS](https://nextjs.org/) project generated by [create-near-app](https://github.com/near/create-near-app). Check `DonationsTable.jsx` and `DonationsForm.jsx` to understand how components are displayed and interacting with the contract.", "mimetype": "text/plain", "start_char_idx": 1488, "end_char_idx": 3152, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eaa02ef6-02b8-41e2-8c37-84c436fd22fe": {"__data__": {"id_": "eaa02ef6-02b8-41e2-8c37-84c436fd22fe", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ddf3bbad-3bf6-497a-97e9-ee5564824ee4", "node_type": "1", "metadata": {}, "hash": "f14fa0d7822149b94fb314c819db9b56394937cbf8ae013d6737734d6f0811a2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f", "node_type": "1", "metadata": {}, "hash": "d766af91b2261daf66a0c786bb8f341d76da8be52f23a679795891d02b470bd3", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"js\" language=\"js\">\n  <Github fname=\"DonationsTable.jsx\"\n          url=\"https://github.com/near-examples/donation-examples/blob/main/frontend/src/components/DonationsTable.jsx\"/>\n  <Github fname=\"DonationsForm.jsx\"\n          url=\"https://github.com/near-examples/donation-examples/blob/main/frontend/src/components/DonationForm.jsx\"/>\n</Language>\n\nAn interesting aspect of the donation example is that it showcases how to retrieve a result after being redirected to the\nNEAR wallet to accept a transaction.\n\n---\n\n## Smart Contract\n\nThe contract exposes methods to donate tokens (`donate`), and methods to retrieve the recorded donations (e.g. `get_donation_for_account`).\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/donation-examples/blob/main/contract-ts/src/contract.ts\"\n            start=\"16\" end=\"44\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/donation-examples/blob/main/contract-rs/src/donation.rs\"\n            start=\"17\" end=\"74\" />\n  </Language>\n</CodeTabs>\n\n<hr class=\"subsection\" />\n\n### Testing the Contract\n\nThe contract readily includes a set of unit and sandbox testing to validate its functionality. To execute the tests, run the following commands:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  ```bash\n  cd contract-ts\n  yarn\n  yarn test\n  ```\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n  \n  ```bash\n  cd contract-rs\n  cargo test\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\nThe `integration tests` use a sandbox to create NEAR users and simulate interactions with the contract.\n:::\n\n<hr class=\"subsection\" />\n\n### Deploying the Contract to the NEAR network\n\nIn order to deploy the contract you will need to create a NEAR account.", "mimetype": "text/plain", "start_char_idx": 3154, "end_char_idx": 5030, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f": {"__data__": {"id_": "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eaa02ef6-02b8-41e2-8c37-84c436fd22fe", "node_type": "1", "metadata": {}, "hash": "6b5f1a55988d0b0d528204451e1dd2eeb0aec12d9ca2a0f9886ccb195354300a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d759940-d37b-4dea-9034-b6a762fa8464", "node_type": "1", "metadata": {}, "hash": "e1d53c94c34089c95be9033410c90c6640ffa06a647ba83589d7e545a2684563", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nGo into the directory containing the smart contract (`cd contract-ts` or `cd contract-rs`), build and deploy it:\n\n```bash\ncargo near build\n\ncargo near deploy <accountId>\n```\n\n:::tip\nTo interact with your contract from the [frontend](#frontend), simply replace the variable `CONTRACT_NAME` in the `index.js` file.\n:::\n\n<hr class=\"subsection\" />\n\n### CLI: Interacting with the Contract\n\nTo interact with the contract through the console, you can use the following commands\n\n#### Get donations\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view donation.near-examples.testnet get_donations '{\"from_index\": \"0\",\"limit\": \"10\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only donation.near-examples.testnet get_donations json-args '{\"from_index\": \"0\",\"limit\": \"10\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Get beneficiary\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view donation.near-examples.testnet get_beneficiary\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only donation.near-examples.", "mimetype": "text/plain", "start_char_idx": 5032, "end_char_idx": 6745, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d759940-d37b-4dea-9034-b6a762fa8464": {"__data__": {"id_": "9d759940-d37b-4dea-9034-b6a762fa8464", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f", "node_type": "1", "metadata": {}, "hash": "d766af91b2261daf66a0c786bb8f341d76da8be52f23a679795891d02b470bd3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b29d803f-b177-48df-b4e6-e02f7cd05e3e", "node_type": "1", "metadata": {}, "hash": "8c57980ecda5ca3ba1d0ec5536054e238357d62f7a5f7157a07c67195199548e", "class_name": "RelatedNodeInfo"}}, "text": "testnet get_beneficiary json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Get number of donors\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view donation.near-examples.testnet number_of_donors\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only donation.near-examples.testnet number_of_donors json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Get donation for an account\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Require accountId\n  near view donation.near-examples.testnet get_donation_for_account '{\"account_id\":<accountId>}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Require accountId\n  near contract call-function as-read-only donation.near-examples.testnet get_donation_for_account json-args '{\"account_id\":<accountId>}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Donate to the contract\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  # Require deposit\n  near call donation.near-examples.testnet donate --accountId <accountId> --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  # Require deposit\n  near contract call-function as-transaction donation.near-examples.testnet donate json-args {} prepaid-gas '30.0 Tgas' attached-deposit '0.1 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n:::tip\nIf you're using your own account, replace `donation.near-examples.testnet` with your `accountId`.", "mimetype": "text/plain", "start_char_idx": 6745, "end_char_idx": 8591, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b29d803f-b177-48df-b4e6-e02f7cd05e3e": {"__data__": {"id_": "b29d803f-b177-48df-b4e6-e02f7cd05e3e", "embedding": null, "metadata": {"file_path": "./near_dist/donation.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8", "node_type": "4", "metadata": {}, "hash": "8156da4e526ff2d9e4465c2791d1ffb20ef1f3b950b03f50c8d2ec1c0f11f7a4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d759940-d37b-4dea-9034-b6a762fa8464", "node_type": "1", "metadata": {}, "hash": "e1d53c94c34089c95be9033410c90c6640ffa06a647ba83589d7e545a2684563", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Moving Forward\n\nA nice way to learn is by trying to expand a contract. Modify the donation example so it accumulates the tokens in the contract\ninstead of sending it immediately. Then, make a method that only the `beneficiary` can call to retrieve the tokens.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 8592, "end_char_idx": 9042, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "755f3147-3942-4b81-aa32-4eb97387786c": {"__data__": {"id_": "755f3147-3942-4b81-aa32-4eb97387786c", "embedding": null, "metadata": {"file_path": "./near_dist/oracles.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "28d1774a-9a63-4054-9379-856df9035418", "node_type": "4", "metadata": {}, "hash": "7026898778c7bf35be0cc32e2726ea60a0b8870f00c620571ce5eff5ea13eff5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6112d1d1-32c1-42d1-9272-3e37c9181dfc", "node_type": "1", "metadata": {}, "hash": "1f7eea4b51c7cc0dd18cd4a1bb2af94efcf25b4038b40b8f3d0cf4638860b039", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: oracles\ntitle: Price Oracles\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nOracles are smart contracts that enable you to query the current price of an asset.\n\nSince smart contracts cannot connect to\ninternet and pull information, Oracles rely on having someone constantly updating their prices. Because of that, be mindful\nwhen using an oracle that there might be a delay between the market's latest information and the Oracles data.\n\nOracle contract's are not standardized. We will here list different providers and how to use their Oracle as they are built.\n\n---\n\n## Price Oracles\n\n- Account: **priceoracle.near** | **priceoracle.testnet**\n- Creator: [NearDefi](https://github.com/NearDeFi)\n- Smart contract: https://github.com/NearDeFi/price-oracle\n- Bot to fill contract: https://github.com/NearDeFi/near-price-oracle-bot\n\n---\n\n## Query Assets\n\n<Tabs>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear view priceoracle.near get_assets\n``` \n\n</TabItem>\n\n</Tabs>\n\n<details>\n\n<summary>Example response</summary>\n\n```json\n[\n  [\n    'wrap.near',\n    {\n      reports: [\n        {\n          oracle_id: 'thorinoracle.near',\n          timestamp: '1669795900809627816',\n          price: { multiplier: '17030', decimals: 28 }\n        },\n        {\n          oracle_id: 'npo-aurora.near',\n          timestamp: '1706631791706032710',\n          price: { multiplier: '30641', decimals: 28 }\n        },\n        {\n          oracle_id: 'gloriafoster.near',\n          timestamp: '1706631808550973590',\n          price: { multiplier: '30666', decimals: 28 }\n        },\n        .\n```\n\n</details>\n\n---\n\n## Get Assets Price\n\n<Tabs>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear view priceoracle.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6112d1d1-32c1-42d1-9272-3e37c9181dfc": {"__data__": {"id_": "6112d1d1-32c1-42d1-9272-3e37c9181dfc", "embedding": null, "metadata": {"file_path": "./near_dist/oracles.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "28d1774a-9a63-4054-9379-856df9035418", "node_type": "4", "metadata": {}, "hash": "7026898778c7bf35be0cc32e2726ea60a0b8870f00c620571ce5eff5ea13eff5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "755f3147-3942-4b81-aa32-4eb97387786c", "node_type": "1", "metadata": {}, "hash": "eb6cfbdef25a5587c016e683d69b6381a089feb24f466e80e7adbcc9718fc97c", "class_name": "RelatedNodeInfo"}}, "text": "near get_price_data\n```\n\n</TabItem>\n\n</Tabs>\n\n<details>\n\n<summary>Example response</summary>\n\n```json\n{\n  timestamp: '1706631861981947371',\n  recency_duration_sec: 90,\n  prices: [\n    {\n      asset_id: 'wrap.near',\n      price: { multiplier: '30702', decimals: 28 }\n    },\n    {\n      asset_id: 'aurora',\n      price: { multiplier: '235662', decimals: 20 }\n    },\n    {\n      asset_id: 'meta-pool.near',\n      price: { multiplier: '38770', decimals: 28 }\n    },\n    {\n      asset_id: 'linear-protocol.near',\n      price: { multiplier: '36432', decimals: 28 }\n    },\n```\n\n</details>\n\n:::tip\n\nDivide the returned `multiplier` by `10000` to obtain the price in USD.\n\n:::", "mimetype": "text/plain", "start_char_idx": 1732, "end_char_idx": 2399, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6d53a2a3-6e2a-423c-a640-1c586c1b42b1": {"__data__": {"id_": "6d53a2a3-6e2a-423c-a640-1c586c1b42b1", "embedding": null, "metadata": {"file_path": "./near_dist/index-function.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9b74a36-ea47-4086-a403-893de752fcf3", "node_type": "4", "metadata": {}, "hash": "7fade527e81b76d5c9abd77a53cca38b037d0de96d71311fb9ae35c5c423de88", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1896b52-027c-4984-8126-64b79817d501", "node_type": "1", "metadata": {}, "hash": "474a3c38b1014005de2a8138d6e2cfc491f58ac26920acccf061da8700d4f738", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: index-functions\ntitle: Indexing Functions\nsidebar_label: Indexing Functions\n---\n\n:::info\nQueryAPI is a fully managed service that allows you to create and manage indexers on-chain seamlessly.\n:::\n\n\n## Indexing\n\nLet's review a [very simple indexer](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=roshaan.near/demo-indexer), which will help you to understand\nhow the indexer's indexing logic works.\n\n```js title=indexingLogic.js\nimport { Block } from \"@near-lake/primitives\";\n\n/**\n * getBlock(block, context) applies your custom logic to a Block on Near and commits the data to a database.\n *\n * @param {block} Block - A Near Protocol Block\n * @param {context} - A set of helper methods to retrieve and commit state\n */\nasync function getBlock(block: Block, context) {\n  const h = block.header().height;\n  await context.set(\"height\", h);\n}\n```\n\nIn the `getBlock()` function, you're given a block, which is a block on the Near blockchain, as\nwell as a `context` object, which gives you a set of helper methods to be able to commit\nwhat you want to the database that QueryAPI has provisioned for you.\n\nThe code is going into the header of the `block`\nand getting the block's `height`, and then is using the `context` object to set a key value store.\n\nNext, if you check out the database schema:\n\n```sql title=schema.sql\nCREATE TABLE\n  \"indexer_storage\" (\n    \"function_name\" TEXT NOT NULL,\n    \"key_name\" TEXT NOT NULL,\n    \"value\" TEXT NOT NULL,\n    PRIMARY KEY (\"function_name\", \"key_name\")\n  )\n```\n\nIt's a very simple schema where you can store the `function_name`, `key_name`, and `value`.\n\n:::tip\nThat's all this indexer function is doing: it sets the `height` value equal to the current block's height.\n:::\n\n\n<!-- ![QueryAPI Indexer Dashboard](/docs/assets/QAPIScreen2.png) -->", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1819, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1896b52-027c-4984-8126-64b79817d501": {"__data__": {"id_": "b1896b52-027c-4984-8126-64b79817d501", "embedding": null, "metadata": {"file_path": "./near_dist/index-function.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9b74a36-ea47-4086-a403-893de752fcf3", "node_type": "4", "metadata": {}, "hash": "7fade527e81b76d5c9abd77a53cca38b037d0de96d71311fb9ae35c5c423de88", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d53a2a3-6e2a-423c-a640-1c586c1b42b1", "node_type": "1", "metadata": {}, "hash": "57f9bb1ae95817d5d5526519fd2a7e272ad4ff1077dad53c72ba18ccbad094e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ae0a3eb-5abd-4189-84c9-d0472b176d72", "node_type": "1", "metadata": {}, "hash": "35389492746e60a327b01428c061ccbdcd112f1f6090826a9da2e8f0a3b15f1d", "class_name": "RelatedNodeInfo"}}, "text": "## Local Debug Mode\n\nWhile you're iterating on your indexer development, it's critical to have some type of debugging\nfunctionality to be able to test with, and the _Debug Mode_ is very helpful for that.\n\n![QueryAPI Dashboard](/docs/assets/QAPIdebug.png)\n\nFor example, if you want to test the [simple indexer](#indexing) explained in the previous section\nusing the local debugging mode:\n\n- Enable <kbd>Debug Mode</kbd> on the **Indexer Editor**\n- Add a block to your debug list (e.g., `97779559`)\n- Go into your web browser's Console\n- Finally, click <kbd>Play</kbd>.\n\n\nOn your browser's Console, you should see the indexer's debug execution where it sets the `height` key to `97779559`:\n\n![QueryAPI Indexer Dashboard](/docs/assets/QAPIdebuglog.png)\n\n:::info Local tests\nAll debug mode tests are happening **locally**, so they do not reach the database.\nAll your queries and mutations will return empty objects.\n:::\n\n:::tip\nYou can also click <kbd>Follow the Network</kbd> and it will show how your indexer logic works throughout.\n:::\n\n## Contract filters\n\nA contract filter is used by QueryAPI to do backend optimizations to\nhelp do historical indexing faster.\nWhile creating an indexer, when you define a contract filter,\nQueryAPI will send any single transaction event that passes this filter to your indexer function\nso you can index it.\n\nIf you only want to index events from a single contract, simply define the contract name on the **Contract Filter** text box.\nIn some cases you might want to either support indexing on multiple contracts,\nor simply support every single contract that exists on the Near blockchain.\n\n#### Single contract filter\n\n\nFor example, if you check out the [simple indexer](https://dev.near.org/dataplatform.near/widget/QueryApi.App?selectedIndexerPath=roshaan.near/demo-indexer), you'll see that in this case\nyou have a `social.near` contract filter.\nIn this example, the indexer is only concerned on indexing events from `social.near`'s contract.", "mimetype": "text/plain", "start_char_idx": 1822, "end_char_idx": 3802, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ae0a3eb-5abd-4189-84c9-d0472b176d72": {"__data__": {"id_": "4ae0a3eb-5abd-4189-84c9-d0472b176d72", "embedding": null, "metadata": {"file_path": "./near_dist/index-function.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9b74a36-ea47-4086-a403-893de752fcf3", "node_type": "4", "metadata": {}, "hash": "7fade527e81b76d5c9abd77a53cca38b037d0de96d71311fb9ae35c5c423de88", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1896b52-027c-4984-8126-64b79817d501", "node_type": "1", "metadata": {}, "hash": "474a3c38b1014005de2a8138d6e2cfc491f58ac26920acccf061da8700d4f738", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b7bac35-bf25-4cc2-a98e-e63a74320183", "node_type": "1", "metadata": {}, "hash": "128c0e4e324688207e8be72d4f73b937c1e7c686d697ef1adff4f6ae38a656e8", "class_name": "RelatedNodeInfo"}}, "text": "#### Multiple contracts filter\n\nFor example, if you want to index all the contracts from AstroDAO, where there is an account created\nfor each and every different DAO, you should define `*.sputnik-dao.near` as the contract filter.\nLikewise, if you want to get events from every contract on the blockchain, simply define `*` as the filter.\n\n## Feed-indexer logic\n\nThen we call context.graphql, which allows us to make arbitrary mutations and queries\nto our database that we provision for you.\nIf you're interested in how to create GraphQL queries, there's a whole bunch of resources\nonline.\nIn this case, we are passing in our mutation data, which has a post object, and it's inserting\nit inside Postgres, I mean, inside of Postgres using GraphQL.\nBut it's very easy to create these mutations.\n\n## Mutations in GraphQL\n\nIf you go to the GraphiQL tab, you can access the GraphiQL Explorer that provides a user friendly GraphQL playground, where you can view and create queries and mutations based on the DB schema that you defined for the indexer.\n\n![QueryAPI Indexer Dashboard](/docs/assets/QAPIgraphiql.png)\n\nYou can easily set some fields and select the returning data\nthat you want, and the tool will build a query on the mutation panel on the right.\nThen you can copy the resulting query, either in your JavaScript code so that you pass actual\ndata manually, or you pass in the mutation data object as a second parameter.\n\nFor example, if you go and add a new mutation, click <kbd>+</kbd>, then you can do a bunch of actions here, such as creating, deleting, or inserting posts into your table.\n\n![Playground](/docs/assets/QAPIScreen.gif)\n\nIf you want to test your mutation, using [Debug Mode](#local-debug-mode) you can add a specific\nblock to the list, and then play it to see how it works. \nBased on the indexer logic you defined, you'll get a call to the GraphQL mutation with the object\nand data passed into it.\n\n:::tip Video Walkthrough\n\n**Tip:** watch the video on how to [create mutations in GraphQL](https://www.youtube.com/watch?v=VwO6spk8D58&t=781s).\n\n:::", "mimetype": "text/plain", "start_char_idx": 3804, "end_char_idx": 5872, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b7bac35-bf25-4cc2-a98e-e63a74320183": {"__data__": {"id_": "7b7bac35-bf25-4cc2-a98e-e63a74320183", "embedding": null, "metadata": {"file_path": "./near_dist/index-function.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f9b74a36-ea47-4086-a403-893de752fcf3", "node_type": "4", "metadata": {}, "hash": "7fade527e81b76d5c9abd77a53cca38b037d0de96d71311fb9ae35c5c423de88", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ae0a3eb-5abd-4189-84c9-d0472b176d72", "node_type": "1", "metadata": {}, "hash": "35389492746e60a327b01428c061ccbdcd112f1f6090826a9da2e8f0a3b15f1d", "class_name": "RelatedNodeInfo"}}, "text": "## Create a NEAR component from query\n\nCreating a NEAR component from a GraphQL query is simple when using the GraphQL Playground. Just follow these steps:\n\n- go to the GraphiQL tab\n- select the query that you want to use\n- click on the <kbd>Show GraphiQL Code Exporter</kbd> button\n- get some default code here, copy it,\n- go to the NEAR sandbox, paste it.\n\n\nThis will set up some boilerplate code to execute the GraphQL query, add the query that you had\nin your playground and then call that query, extract the data and render it using the\nrender data function.\n\nOnce you have the NEAR component code, you can test it out by going to [the sandbox](https://dev.near.org/sandbox),\npasting the generated code, and then selecting <kbd>Component Preview</kbd>.\nNext, you can create a nice UI over this boilerplate code, and publish your new NEAR component.", "mimetype": "text/plain", "start_char_idx": 5875, "end_char_idx": 6728, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c2698b3-452b-41f2-8345-e5dde674de71": {"__data__": {"id_": "6c2698b3-452b-41f2-8345-e5dde674de71", "embedding": null, "metadata": {"file_path": "./near_dist/sybil.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4155770-74c7-42ab-826e-8e8f2ccaf453", "node_type": "4", "metadata": {}, "hash": "5202d210f447222832a917a0c39698d292831a0452de75c7d5d26d0c3b00fc39", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: sybil\ntitle: Sybil Attacks\n---\n\nWhile developing your smart contract, keep in mind that an individual can potentially create multiple NEAR accounts. This is especially relevant in ecosystems involving crowd decisions, such as [DAOs](../../../2.build/5.primitives/dao.md). \n\nImagine that you open the voting to anyone in the community. If each account can cast a vote, a malicious actor could span multiple accounts and gain a disproportionately large influence on the result.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 483, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0bd4cdf5-3a5b-4a97-bc43-9d16fd36defe": {"__data__": {"id_": "0bd4cdf5-3a5b-4a97-bc43-9d16fd36defe", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5121a86c-5613-4174-8342-88fde5782729", "node_type": "1", "metadata": {}, "hash": "62f25dc855c56dd20631c72e325f4733c29510468aaed455f9faf5f2710df14a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: faq\ntitle: FAQ for NEAR JavaScript API\nsidebar_label: FAQ\n---\n\nA collection of Frequently Asked Questions by the community.\n\n\n## General {#general}\n\n### Can I use `near-api-js` on a static html page? {#can-i-use-near-api-js-on-a-static-html-page}\n\nYou can load the script from a CDN.\n\n```html\n<script src=\"https://cdn.jsdelivr.net/npm/near-api-js@0.45.1/dist/near-api-js.min.js\"></script>\n```\n\n:::note\nMake sure you load the latest version.\n\nVersions list is on [npmjs.com](https://www.npmjs.com/package/near-api-js)\n:::\n\n<details>\n<summary>Example Implementation</summary>\n<p>\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n</head>\n\n<body>\n  <ul id=\"messages\"></ul>\n  <textarea id=\"text\" placeholder=\"Add Message\"></textarea>\n  <button id=\"add-text\">Add Text</button>\n  <script src=\"https://cdn.jsdelivr.net/npm/near-api-js@0.45.1/dist/near-api-js.min.js\"></script>\n  <script>\n    // connect to NEAR\n    const near = new nearApi.Near({\n      keyStore: new nearApi.keyStores.BrowserLocalStorageKeyStore(),\n      networkId: 'testnet',\n      nodeUrl: 'https://rpc.testnet.near.org',\n      walletUrl: 'https://testnet.mynearwallet.com/'\n    });\n    \n    // connect to the NEAR Wallet\n    const wallet = new nearApi.WalletConnection(near, 'my-app');\n\n    // connect to a NEAR smart contract\n    const contract = new nearApi.Contract(wallet.account(), 'guest-book.testnet', {\n      viewMethods: ['getMessages'],\n      changeMethods: ['addMessage']\n    });\n\n    const button = document.getElementById('add-text');\n    if (!wallet.isSignedIn()) {\n      button.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1744, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5121a86c-5613-4174-8342-88fde5782729": {"__data__": {"id_": "5121a86c-5613-4174-8342-88fde5782729", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0bd4cdf5-3a5b-4a97-bc43-9d16fd36defe", "node_type": "1", "metadata": {}, "hash": "64208ff0247f8b9b820c18a0477861f55f087b98f1af0d92a1b7e19d2846a4c0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b2af4060-f95c-4fa5-b03d-204ee1f51e70", "node_type": "1", "metadata": {}, "hash": "bee11c791fdd2788c5ba8b34fbd02f9724e74e9385ed7678bde3cb46508c52c5", "class_name": "RelatedNodeInfo"}}, "text": "textContent = 'SignIn with NEAR'\n    }\n\n    // call the getMessages view method\n    contract.getMessages()\n      .then(messages => {\n        const ul = document.getElementById('messages');\n        messages.forEach(message => {\n          const li = document.createElement('li');\n          li.textContent = `${message.sender} - ${message.text}`;\n          ul.appendChild(li);\n        })\n      });\n\n    // Either sign in or call the addMessage change method on button click\n    document.getElementById('add-text').addEventListener('click', () => {\n      if (wallet.isSignedIn()) {\n        contract.addMessage({\n          args: { text: document.getElementById('text').value },\n          amount: nearApi.utils.format.parseNearAmount('1')\n        })\n      } else {\n        wallet.requestSignIn({\n          contractId: 'guest-book.testnet',\n          methodNames: ['getMessages', 'addMessage']\n        });\n      }\n    });\n  </script>\n</body>\n\n</html>\n```\n\n</p>\n</details>\n\n---\n\n### What front-end frameworks can I use the JavaScript API with?\n\nThe JavaScript API is framework-agnostic. You can include it in any front-end framework, such as React, Vue, Angular, and others.\n\nYou can use [`create-near-app`](https://github.com/near/create-near-app) to quickly bootstrap projects with different templates:\n\n    npx create-near-app\n\n### Can I use the JavaScript API with mobile JavaScript frameworks such as React Native?\n\nThe JavaScript API can be used in most JavaScript runtimes, and under the hood, it\u2019s an abstraction over NEAR\u2019s [RPC API](/api/rpc/introduction). However, notice that the Wallet can\u2019t be used everywhere. For example, in React Native apps you\u2019ll be able to use the Wallet in web versions of the apps, but it won\u2019t work in the native app deployments.\n\nYou can use the Wallet in `WebView` components in iOS or Android, however be aware that it uses `LocalStorage` for `KeyStore`, and it\u2019s your responsibility to persist the storage when you manage loading of `WebView` components.\n\n---\n\n## Transactions {#transactions}\n\n### How to check the status of transaction\n\nPlease refer to examples about transactions in the [Cookbook](/tools/near-api-js/cookbook).", "mimetype": "text/plain", "start_char_idx": 1744, "end_char_idx": 3909, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b2af4060-f95c-4fa5-b03d-204ee1f51e70": {"__data__": {"id_": "b2af4060-f95c-4fa5-b03d-204ee1f51e70", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5121a86c-5613-4174-8342-88fde5782729", "node_type": "1", "metadata": {}, "hash": "62f25dc855c56dd20631c72e325f4733c29510468aaed455f9faf5f2710df14a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "95d3dbb6-4587-4569-b970-bc05e8d756fc", "node_type": "1", "metadata": {}, "hash": "bc35d90629e44f3880604f2385471ddf038bc50547b9ef9c19db35353d902bdb", "class_name": "RelatedNodeInfo"}}, "text": "### How transactions are signed and sent by near-api-js\n\nThere are a few steps involved before transaction data is communicated to the network and eventually included in a block. The following steps are taken when creating, signing and ultimately a transaction from a user's account:\n\n1. The user creates a transaction object using the [`account.signAndSendTransaction` method](https://github.com/near/near-api-js/blob/f78616480ba84c73f681211fe6266bd2ed2b9da1/packages/near-api-js/src/account.ts#L200). This method accepts an array of actions and returns an object for the outcome of the transaction.\n2. The transaction is signed using the [`account.signTransaction` method](https://github.com/near/near-api-js/blob/f78616480ba84c73f681211fe6266bd2ed2b9da1/packages/near-api-js/src/account.ts#L204). This method accepts an array of actions and returns a signed transaction object.\n3. The signed transaction object is sent to the network using the [`account.connection.provider.sendTransaction` method](https://github.com/near/near-api-js/blob/f78616480ba84c73f681211fe6266bd2ed2b9da1/packages/near-api-js/src/account.ts#L208). This method accepts a signed transaction object and returns a transaction hash. This step [performs the borsh serialization of the transaction object](https://github.com/near/near-api-js/blob/f78616480ba84c73f681211fe6266bd2ed2b9da1/packages/near-api-js/src/providers/json-rpc-provider.ts#L80) and calls the [`broadcast_tx_commit` JSON RPC method with the serialized transaction object encoded in base64](https://github.com/near/near-api-js/blob/f78616480ba84c73f681211fe6266bd2ed2b9da1/packages/near-api-js/src/providers/json-rpc-provider.ts#L81).\n\n### How to send batch transactions\n\nYou may batch send transactions by using the `signAndSendTransaction({})` method from `account`. This method takes an array of transaction actions, and if one fails, the entire operation will fail. Here's a simple example:\n\n```js\nconst { connect, transactions,", "mimetype": "text/plain", "start_char_idx": 3911, "end_char_idx": 5884, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "95d3dbb6-4587-4569-b970-bc05e8d756fc": {"__data__": {"id_": "95d3dbb6-4587-4569-b970-bc05e8d756fc", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b2af4060-f95c-4fa5-b03d-204ee1f51e70", "node_type": "1", "metadata": {}, "hash": "bee11c791fdd2788c5ba8b34fbd02f9724e74e9385ed7678bde3cb46508c52c5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b485e16b-627c-497d-82cf-219d87da78cc", "node_type": "1", "metadata": {}, "hash": "0839e34c7fd8577069d42ad2046e3cdd968028ab7d4c5509ecb4ea09b5ddaddc", "class_name": "RelatedNodeInfo"}}, "text": "keyStores } = require(\"near-api-js\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst homedir = require(\"os\").homedir();\n\nconst CREDENTIALS_DIR = \".near-credentials\";\nconst CONTRACT_NAME = \"spf.idea404.testnet\";\nconst WASM_PATH = path.join(__dirname, \"./build/uninitialized_nft.wasm\");\n\nconst credentialsPath = path.join(homedir, CREDENTIALS_DIR);\nconst keyStore = new keyStores.UnencryptedFileSystemKeyStore(credentialsPath);\n\nconst config = {\n  keyStore,\n  networkId: \"testnet\",\n  nodeUrl: \"https://rpc.testnet.near.org\",\n};\n\nsendTransactions();\n\nasync function sendTransactions() {\n  const near = await connect({ .config, keyStore });\n  const account = await near.account(CONTRACT_NAME);\n  const args = { some_field: 1, another_field: \"hello\" };\n\n  const balanceBefore = await account.getAccountBalance();\n  console.log(\"Balance before:\", balanceBefore);\n\n  try {\n    const result = await account.signAndSendTransaction({\n      receiverId: CONTRACT_NAME,\n      actions: [\n        transactions.deployContract(fs.readFileSync(WASM_PATH)),  // Contract does not get deployed\n        transactions.functionCall(\"new\", Buffer.from(JSON.stringify(args)), 10000000000000, \"0\"),  // this call fails\n        transactions.transfer(\"1\" + \"0\".repeat(24)), // 1 NEAR is not transferred either\n      ],\n    });\n    console.log(result);\n  } catch (e) {\n    console.log(\"Error:\", e);\n  }\n\n  const balanceAfter = await account.getAccountBalance();\n  console.log(\"Balance after:\", balanceAfter);\n}\n```\n\n```\nBalance before: {\n  total: '49987878054959838200000000',\n  stateStaked: '4555390000000000000000000',\n  staked: '0',", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b485e16b-627c-497d-82cf-219d87da78cc": {"__data__": {"id_": "b485e16b-627c-497d-82cf-219d87da78cc", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "95d3dbb6-4587-4569-b970-bc05e8d756fc", "node_type": "1", "metadata": {}, "hash": "bc35d90629e44f3880604f2385471ddf038bc50547b9ef9c19db35353d902bdb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "88d94d75-eef8-40a9-934e-6a2ebcb3b60a", "node_type": "1", "metadata": {}, "hash": "c258bb0165eaadd6920dd2ec8d7c7f3d52ee835b1a550a4a0ee940e73d57ea19", "class_name": "RelatedNodeInfo"}}, "text": "available: '45432488054959838200000000'\n}\nReceipts: 2PPueY6gnA4YmmQUzc8DytNBp4PUpgTDhmEjRSHHVHBd, 3isLCW9SBH1MrPjeEPAmG9saHLj9Z2g7HxzfBdHmaSaG\n\tFailure [spf.idea404.testnet]: Error: {\"index\":1,\"kind\":{\"ExecutionError\":\"Smart contract panicked: panicked at 'Failed to deserialize input from JSON.: Error(\\\"missing field `owner_id`\\\", line: 1, column: 40)', nft/src/lib.rs:47:1\"}}\nError: ServerTransactionError: {\"index\":1,\"kind\":{\"ExecutionError\":\"Smart contract panicked: panicked at 'Failed to deserialize input from JSON.: Error(\\\"missing field `owner_id`\\\", line: 1, column: 40)', nft/src/lib.rs:47:1\"}}\n    at parseResultError (/Users/dennis/Code/naj-test/node_modules/near-api-js/lib/utils/rpc_errors.js:31:29)\n    at Account.<anonymous> (/Users/dennis/Code/naj-test/node_modules/near-api-js/lib/account.js:156:61)\n    at Generator.next (<anonymous>)\n    at fulfilled (/Users/dennis/Code/naj-test/node_modules/near-api-js/lib/account.js:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\n  type: 'FunctionCallError',\n  context: undefined,\n  index: 1,\n  kind: {\n    ExecutionError: 'Smart contract panicked: panicked at \\'Failed to deserialize input from JSON.", "mimetype": "text/plain", "start_char_idx": 7511, "end_char_idx": 8706, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "88d94d75-eef8-40a9-934e-6a2ebcb3b60a": {"__data__": {"id_": "88d94d75-eef8-40a9-934e-6a2ebcb3b60a", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b485e16b-627c-497d-82cf-219d87da78cc", "node_type": "1", "metadata": {}, "hash": "0839e34c7fd8577069d42ad2046e3cdd968028ab7d4c5509ecb4ea09b5ddaddc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5ef725c7-a32b-4d59-b3b4-3af2927ddba0", "node_type": "1", "metadata": {}, "hash": "8b940555eadd6ce8d7939a388f30b71858d7185c001b30a29df9e560847ca859", "class_name": "RelatedNodeInfo"}}, "text": ": Error(\"missing field `owner_id`\", line: 1, column: 40)\\', nft/src/lib.rs:47:1'\n  },\n  transaction_outcome: {\n    block_hash: '5SUhYcXjXR1svCxL5BhCuw88XNdEjKXqWgA9X4XZW1dW',\n    id: 'SKQqAgnSN27fyHpncaX3fCUxWknBrMtxxytWLRDQfT3',\n    outcome: {\n      executor_id: 'spf.idea404.testnet',\n      gas_burnt: 4839199843770,\n      logs: [],\n      metadata: [Object],\n      receipt_ids: [Array],\n      status: [Object],\n      tokens_burnt: '483919984377000000000'\n    },\n    proof: [ [Object], [Object], [Object], [Object], [Object] ]\n  }\n}\nBalance after: {\n  total: '49985119959346682700000000',\n  stateStaked: '4555390000000000000000000',\n  staked: '0',\n  available: '45429729959346682700000000'\n}\n\n```\n\nYou may also find an example of batch transactions in the [Cookbook](/tools/near-api-js/cookbook).\n\n---\n\n## Accounts {#accounts}\n\n### What\u2019s the difference between `Account` and `ConnectedWalletAccount`?\n\nInteraction with the wallet is only possible in a web-browser environment because NEAR\u2019s Wallet is web-based.\nThe difference between `Account` and `ConnectedWalletAccount` is mostly about the way it signs transactions. The `ConnectedWalletAccount` uses the wallet to approve transactions.\nUnder the hood the `ConnectedWalletAccount` inherits and overrides some methods of `Account`.\n\n### How to create implicit accounts?\n\nYou can read about it in the article about [Implicit Accounts](https://docs.near.org/integrations/implicit-accounts).\n\n---\n\n## Contracts {#contracts}\n\n### How do I attach gas / a deposit? {#how-do-i-attach-gas--a-deposit}\n\nAfter [contract is instantiated](/tools/near-api-js/quick-reference#load-contract) you can then call the contract and specify the amount of attached gas.", "mimetype": "text/plain", "start_char_idx": 8706, "end_char_idx": 10408, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5ef725c7-a32b-4d59-b3b4-3af2927ddba0": {"__data__": {"id_": "5ef725c7-a32b-4d59-b3b4-3af2927ddba0", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "88d94d75-eef8-40a9-934e-6a2ebcb3b60a", "node_type": "1", "metadata": {}, "hash": "c258bb0165eaadd6920dd2ec8d7c7f3d52ee835b1a550a4a0ee940e73d57ea19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e82569ea-93ed-4245-bb9e-e31596ccb64a", "node_type": "1", "metadata": {}, "hash": "f111cb3292fd90e4e63ad2dc9c758f14904a033e9d32822aa6c844985113ef62", "class_name": "RelatedNodeInfo"}}, "text": "```js\nawait contract.method_name(\n  {\n    arg_name: \"value\", // argument name and value - pass empty object if no args required\n  },\n  \"300000000000000\", // attached GAS (optional)\n  \"1000000000000000000000000\" // attached deposit in yoctoNEAR (optional)\n);\n```\n\n---\n\n## Common Errors {#common-errors}\n\n### RPC Errors\n\nRefer to the exhaustive [list of error messages](https://github.com/near/near-api-js/blob/16ba17251ff7d9c8454261001cd6b87e9a994789/packages/near-api-js/src/res/error_messages.json)\nthat RPC endpoints throws and JavaScript API propagates.\n\n### Missing contract methods {#missing-contract-method}\n\nWhen constructing a `Contract` instance on the client-side, you need to specify\nthe contract's methods. If you misspell, mismatch, or miss method names - you'll\nreceive errors about missing methods.\n\nThere are a few cases of missing or wrong methods:\n- When you call a method you didn't specify in the constructor.\n- When you call a method that doesn't exist on the blockchain's contract (but you did specify it in the client-side constructor).\n- When you mismatch between `viewMethods` and `changeMethods`.\n\nFor example, let's look at the following contract code.", "mimetype": "text/plain", "start_char_idx": 10410, "end_char_idx": 11589, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e82569ea-93ed-4245-bb9e-e31596ccb64a": {"__data__": {"id_": "e82569ea-93ed-4245-bb9e-e31596ccb64a", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5ef725c7-a32b-4d59-b3b4-3af2927ddba0", "node_type": "1", "metadata": {}, "hash": "8b940555eadd6ce8d7939a388f30b71858d7185c001b30a29df9e560847ca859", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d", "node_type": "1", "metadata": {}, "hash": "4a6816381678df8b7239c4476fed7a477f1a92e9e78974b5b74e6753d1c211bf", "class_name": "RelatedNodeInfo"}}, "text": "It contains one `view` and one `call` method:\n\n```js\n@NearBindgen\nclass MyContract extends NearContract {\n  constructor() { super(); }\n\n  @view\n  method_A_view(): string {\n    return 'Hi';\n  }\n\n  @call\n  method_B_call(): void {}\n}\n```\n\n#### Client-side errors for missing methods\n\n##### `TypeError: contract.METHOD_NAME is not a function`\n\nThe following contract constructor declares only `method_A_view`, it doesn't declare `method_B_call`\n```js\nconst contract = await new nearAPI.Contract(\n  walletConnection.account(), 'guest-book.testnet',\n  {\n    viewMethods: ['method_A_view'], // <=== Notice this\n    changeMethods: [], // <=== Notice this\n    sender: walletConnection.getAccountId(),\n  }\n);\n\n// This will work because we declared `method_A_view` in constructor\nawait contract.method_A_view();\n\n// This will throw `TypeError: contract.method_B_call is not a function` \n// because we didn't declare `method_B_call` in constructor, \n// even if it exists in the real contract.\nawait contract.method_B_call();\n\n// This will also throw `TypeError: contract.method_C is not a function`,\n// not because `method_C` doesn't exist on the contract, but because we didn't declare it\n// in the client-side constructor.\nawait contract.method_C();\n```\n\n#### RPC errors for missing methods\n\n##### `wasm execution failed with error: FunctionCallError(MethodResolveError(MethodNotFound))`\n\nIn this example we specify and call a method, but this method doesn't exist on the blockchain:\n```js\nconst contract = await new nearAPI.Contract(\n  // ...\n  {\n    viewMethods: [\"method_C\"], // <=== method_C doesn't exist on the contract above\n    changeMethods: [],\n    // ...\n  }\n);\n// We did specify `method_C` name in constructor, so this function exists on client-side `contract` instance,\n// but a method with this name does not exist on the actual contract on the blockchain.\n// This will return an error from RPC call `FunctionCallError(MethodResolveError(MethodNotFound))`\n// and will throw it on the client-side\nawait contract.method_C();\n\n// Notice: if we call `method_A_view` we get `TypeError: contract.method_A_view is not a function`.", "mimetype": "text/plain", "start_char_idx": 11590, "end_char_idx": 13717, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d": {"__data__": {"id_": "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e82569ea-93ed-4245-bb9e-e31596ccb64a", "node_type": "1", "metadata": {}, "hash": "f111cb3292fd90e4e63ad2dc9c758f14904a033e9d32822aa6c844985113ef62", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b2e0b9e-3c78-4fe8-8b03-9242afd2f962", "node_type": "1", "metadata": {}, "hash": "3af28b3d59e03360165da54dea3a46aebd71edd0f30dea8397807e8d4f578fc3", "class_name": "RelatedNodeInfo"}}, "text": "// Even though the method exists on the actual blockchain contract,\n// we didn't specify `method_A_view` in the contract's client-side constructor.\nawait contract.method_A_view();\n```\n\n##### `wasm execution failed with error: FunctionCallError(HostError(ProhibitedInView { method_name: \"storage_write\" }))`\n\nLast case is when you mismatch `viewMethods` and `changeMethods`.\n\nIn the contract above we declared:\n- A `@view` method named `method_A_view`\n- A `@call` method named `method_B_call`\n\nIn a client-side constructor, the contract's `@view` method names must be specified under `viewMethods`,\nand the contract's `@call` method names must be specified under `changeMethods`.\nIf we mismatch between the types we will receive errors.\n\nFor example:\n```js\nconst contract = await new nearAPI.Contract(\n  // ...\n  {\n    viewMethods: ['method_B_call'], // <=== here should be `method_A_view`\n    changeMethods: ['method_A_view'], // <=== and here should be `method_B_call`\n    // ...\n  }\n);\n\n// This will return an error from RPC call and throw:\n// `wasm execution failed with error: FunctionCallError(HostError(ProhibitedInView { method_name: \"storage_write\" }))`\n// This error indicates that we are trying to call a state-changing method but declare it as a read-only method in client-side.\nawait contract.method_B_call();\n\n// The following behavior is undefined and might not work as expected.\n// `method_A_veiw` should be declared under `viewMethods` and in our example here we declare it under `changeMethods`.\nawait contract.method_A_view();\n```\n\n### Class `{X}` is missing in schema: publicKey\n\nThere is currently a known issue with the JavaScript API library, when you `import` it more than once\nit might cause a namespace collision.\n\nA temporary workaround: make sure you don't re-import it, for example when running tests.\n\n---\n\n### `regeneratorRuntime` is not defined {#regeneratorruntime-is-not-defined}\n\nYou are probably using [Parcel](https://parceljs.org/) like we do in [other examples](https://github.com/near-examples). Please make sure you have this line at the top of your main JS file.", "mimetype": "text/plain", "start_char_idx": 13718, "end_char_idx": 15821, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b2e0b9e-3c78-4fe8-8b03-9242afd2f962": {"__data__": {"id_": "2b2e0b9e-3c78-4fe8-8b03-9242afd2f962", "embedding": null, "metadata": {"file_path": "./near_dist/faq.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5", "node_type": "4", "metadata": {}, "hash": "5b3f158e49d1e9b3d97a7c80ecc3bb166ea83e96d5234c51dd0e53ca2fa83196", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d", "node_type": "1", "metadata": {}, "hash": "4a6816381678df8b7239c4476fed7a477f1a92e9e78974b5b74e6753d1c211bf", "class_name": "RelatedNodeInfo"}}, "text": "(Most likely `index.js`):\n\n```js\nimport \"regenerator-runtime/runtime\";\n```\n\n- Also, ensure the dependencies for this are added to the project by checking the dev dependencies in your `package.json`. If not found you can install this by running the following in your terminal:\n\n```bash\nnpm install regenerator-runtime --save-dev\n```\n\n---\n\n### Window error using `Node.js` {#window-error-using-nodejs}\n\nYou're maybe using a KeyStore that's for the browser. Instead, use a [filesystem key](/tools/near-api-js/quick-reference#key-store) or private key string.\n\n**Browser KeyStore:**\n\n```js\nconst { keyStores } = require(\"near-api-js\");\nconst keyStore = new keyStores.BrowserLocalStorageKeyStore();\n```\n\n**FileSystem KeyStore:**\n\n```js\nconst { keyStores } = require(\"near-api-js\");\nconst KEY_PATH = \"~./near-credentials/testnet/example-account.json\";\nconst keyStore = new keyStores.UnencryptedFileSystemKeyStore(KEY_PATH);\n```", "mimetype": "text/plain", "start_char_idx": 15822, "end_char_idx": 16743, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2ca07d9a-60a2-4340-8a70-55d2fc3f298a": {"__data__": {"id_": "2ca07d9a-60a2-4340-8a70-55d2fc3f298a", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "de742ca7-c84b-468c-95ed-e88bba3eccd7", "node_type": "1", "metadata": {}, "hash": "f7e50399b332763f461eb8b7dc970592f97f3167d639e6096a255c560ddc0d73", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: basic-auction\ntitle: Basic Auction\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nIn this section, we will analyze a simple auction contract, which allows users to place bids and track the highest bidder. After, we will cover how to test the contract, as well as how to deploy it on  `testnet`.\n\n:::info Documentation\n\nDuring this tutorial we will be relying on the [Smart Contract Documentation](../../2.build/2.smart-contracts/quickstart.md) and its different sections\n\n:::\n\n:::tip Prerequisites\n\nMake sure to read the [Prerequisites](./0-intro.md) section and install the necessary tools before starting this tutorial\n\n:::\n\n---\n\n## Cloning the contract\n\nTo get started we'll clone the [tutorial's repository](https://github.com/near-examples/auctions-tutorial) from Github. The repository contains the same smart contracts written in JavaScript (`./contract-ts`) and Rust (`./contract-rs`).\n\nNavigate to the folder of the language you prefer, and then to the `01-basic-auction` folder.\n\n<Tabs groupId=\"code-tabs\">\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        ```bash\n        git clone git@github.com:near-examples/auctions-tutorial.git\n\n        cd contract-ts/01-basic-auction\n        ```\n\n    </TabItem>\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        ```bash\n        git clone git@github.com:near-examples/auctions-tutorial.git\n\n        cd contract-rs/01-basic-auction\n        ```\n\n    </TabItem>\n</Tabs>\n\n\n:::info Frontend\n\nThe repository also contains a frontend application that interacts with the contract. You can find it in the `frontend` folder. We will cover the frontend in a future section\n\n:::\n\n---\n\n## The Contract's State\n\nThe contract allows users to place bids using $NEAR tokens and keeps track of the highest bidder. Lets start by looking at how we define the contract's state, this is, the data that the contract will store.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1960, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "de742ca7-c84b-468c-95ed-e88bba3eccd7": {"__data__": {"id_": "de742ca7-c84b-468c-95ed-e88bba3eccd7", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2ca07d9a-60a2-4340-8a70-55d2fc3f298a", "node_type": "1", "metadata": {}, "hash": "2a09efed74de63357c128e2134fb76a1231646f79639d66a283ab3edf75964a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c9300df6-3a2b-4902-ab9b-08cdf48f1eba", "node_type": "1", "metadata": {}, "hash": "b36c8ce8893cf7d275462eb8bf0bd3851cb47c3eb4f8afa92019bc964e0a0f90", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n       <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/src/contract.ts#L4-L12\"\n                start=\"4\" end=\"12\" />\n\n        #### Decorator\n        A first thing to notice is that the main class of the contract is marked using the `@NearBindgen` decorator, which allows also to further specify that the contract **must be initialized** before being used.\n\n        #### Storage (aka State)\n        Another important information revealed by the code is that a contract can store different types of data, in this case:\n\n        - `highest_bid` is an instance of a `Bid` which stores:\n                - `bid`: a `BigInt` representing an amount of $NEAR tokens in `yoctonear` (`1\u24c3 = 10^24 y\u24c3`)\n                - `bidder`: an `AccountId` that represents which account placed the bid\n        - `auction_end_time` a `BigInt` representing a `unix timestamp` in **nanoseconds**\n\n    </TabItem>\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/src/lib.rs#L5-L17\"\n                start=\"5\" end=\"17\" />\n\n        #### Macros\n        A first thing to notice is the use of the `#[near(contract_state)]` macro to denote the main structure, and derive the `PanicOnDefault` to specify that the contract **must be initialized** before being used.\n\n        We also use the `#[near(serializers = [json, borsh])]` macro to enable both `borsh` and `JSON` (de)serialization of the `Bid` structure. As a rule of thumb: use the `json` serializer for structs that will be used as input / output of functions, and `borsh` for those that will be saved to state.\n\n        #### Storage (aka State)\n        Another important information revealed by the code is that the contract can store different types of data.", "mimetype": "text/plain", "start_char_idx": 1962, "end_char_idx": 3982, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c9300df6-3a2b-4902-ab9b-08cdf48f1eba": {"__data__": {"id_": "c9300df6-3a2b-4902-ab9b-08cdf48f1eba", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "de742ca7-c84b-468c-95ed-e88bba3eccd7", "node_type": "1", "metadata": {}, "hash": "f7e50399b332763f461eb8b7dc970592f97f3167d639e6096a255c560ddc0d73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67871355-25d7-432f-966b-ae9f05fd927a", "node_type": "1", "metadata": {}, "hash": "901bb28a17fd257f3aedd529de5e13c8fc3585fa1ddefc042059981e65f70b7f", "class_name": "RelatedNodeInfo"}}, "text": "- `highest_bid` is an instance of a `Bid` which stores:\n                - `bid`: a `NearToken` which simplifies handling $NEAR token amounts\n                - `bidder`: the `AccountId` that placed the bid\n        - `auction_end_time` is a `U64` representing a `unix timestamp` in **nanoseconds**\n\n    </TabItem>\n</Tabs>\n\n\n:::tip Learn More\n\nYou can read more about the contract's structure and type of data it can store in the following documentation pages:\n- [Basic Contract's Anatomy](../../2.build/2.smart-contracts/anatomy/anatomy.md)\n- [Contract's State](../../2.build/2.smart-contracts/anatomy/storage.md)\n- [Data Types](../../2.build/2.smart-contracts/anatomy/types.md)\n\n:::\n\n---\n\n## Initialization Function\n\nLets now take a look at the initialization function, which we need to call to determine the time at which the auction will end.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/src/contract.ts\"\n                start=\"14\" end=\"18\" />\n\n        #### Decorator\n        We denote the initialization function using the `@initialize({ privateFunction: true })` decorator. The `privateFunction:true` denotes that the function can only be called by the account on which the contract is deployed.\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/src/lib.rs\"\n                start=\"19\" end=\"31\" />\n\n        #### Macros\n        We denote the initialization function using the `#[init]` macro. Notice that the initialization function needs to return a instance of `Self`, i.e. the contract's structure.\n        \n        Meanwhile, the `#[private]` denotes that the function can only be called by the account on which the contract is deployed.", "mimetype": "text/plain", "start_char_idx": 3993, "end_char_idx": 6003, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "67871355-25d7-432f-966b-ae9f05fd927a": {"__data__": {"id_": "67871355-25d7-432f-966b-ae9f05fd927a", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c9300df6-3a2b-4902-ab9b-08cdf48f1eba", "node_type": "1", "metadata": {}, "hash": "b36c8ce8893cf7d275462eb8bf0bd3851cb47c3eb4f8afa92019bc964e0a0f90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45", "node_type": "1", "metadata": {}, "hash": "47a6ad73cc6e70ca87318b58a9f83700542bf3ff9683a71564bf5f4d54ff6107", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n</Tabs>\n\n#### End Time\nThe end time is represented using a `unix timestamp` in **nano seconds**, and needs to be given as a `String` when calling the initialization function. This is because smart contracts cannot receive numbers larger than `52 bits` and `unix timestamps` are represented in `64 bits`.\n\n#### Initial Bid\nNotice that we initialize the contract with a `1 yoctonear` bid, made from the `current account id`. This mean that, after the contract is initialized, the first bid will be placed by the contract at 10^-24 NEAR.\n\n:::tip Learn More\n\nYou can read more about the contract's interface in our [contract functions documentation](../../2.build/2.smart-contracts/anatomy/functions.md), and learn about data types on the [data types documentation](../../2.build/2.smart-contracts/anatomy/types.md).\n\n:::\n\n---\n\n## Read-only Functions\n\nThe contract implements two functions to give access to its stored data, i.e. the time at which the auction ends, and the highest bid so far.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/src/contract.ts\"\n                start=\"42\" end=\"50\" />\n\n        Functions that do not change the contract's state (i.e. that only read from it) are called `view` functions, and are decorated using the `@view` decorator.\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/src/lib.rs\"\n                start=\"61\" end=\"67\" />\n\n        Functions that do not change the contract's state (i.e. that only read from it) are called `view` functions, and take a non-mutable reference to `self` (`&self`).\n\n    </TabItem>\n\n</Tabs>\n\nView functions are **free to call**, and do **not require** a NEAR account to sign a transaction in order to call them.", "mimetype": "text/plain", "start_char_idx": 6009, "end_char_idx": 8063, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45": {"__data__": {"id_": "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67871355-25d7-432f-966b-ae9f05fd927a", "node_type": "1", "metadata": {}, "hash": "901bb28a17fd257f3aedd529de5e13c8fc3585fa1ddefc042059981e65f70b7f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "049e4e98-e659-4042-9e02-c30422c9682b", "node_type": "1", "metadata": {}, "hash": "6d906e3c00460179f7a0a46e6a99ab231786db338d960df1e1df163765951823", "class_name": "RelatedNodeInfo"}}, "text": ":::tip Learn More\n\nYou can read more about the contract's interface in our [contract functions documentation](../../2.build/2.smart-contracts/anatomy/functions.md), and learn about data types on the [data types documentation](../../2.build/2.smart-contracts/anatomy/types.md).\n\n:::\n\n\n---\n\n## Bidding Function\n\nAn auction is not an auction if you can't place a bid! For this, the contract includes a `bid` function, which users will call attaching some $NEAR tokens.\n\nThe function is quite simple: it verifies if the auction is still active and compares the attached deposit with the current highest bid. If the bid is higher, it updates the `highest_bid` and refunds the previous bidder.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/01-basic-auction/src/contract.ts\"\n                start=\"20\" end=\"40\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/01-basic-auction/src/lib.rs\"\n                start=\"33\" end=\"59\" />\n\n    </TabItem>\n\n</Tabs>\n\n#### Payable Functions\nThe first thing to notice is that the function changes the state, and thus is marked with a `@call` decorator in JS, while taking as input a mutable reference to self (`&mut self`) on Rust. To call this function, a NEAR account needs to sign a transaction and expend GAS.\n\nSecond, the function is marked as `payable`, this is because by default **functions do not accept $NEAR tokens**! If a user attaches tokens while calling a function that is not marked as `payable`, the transaction will fail.  \n\n#### The Environment\nNotice that the function can access information about the environment in which it is running, such as who called the function (`predecessor account`), how much tokens they attached as deposit (`attached deposit`), and the approximate `unix timestamp` at which the function is executing (`block timestamp`).", "mimetype": "text/plain", "start_char_idx": 8066, "end_char_idx": 10201, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "049e4e98-e659-4042-9e02-c30422c9682b": {"__data__": {"id_": "049e4e98-e659-4042-9e02-c30422c9682b", "embedding": null, "metadata": {"file_path": "./near_dist/1.1-basic.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f516634-b11e-4c56-a18c-e49419d6a440", "node_type": "4", "metadata": {}, "hash": "b2631277ab94c22dbf4e6c94cf4f6bd218e14c15f1a0077580bed0bf403ea544", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45", "node_type": "1", "metadata": {}, "hash": "47a6ad73cc6e70ca87318b58a9f83700542bf3ff9683a71564bf5f4d54ff6107", "class_name": "RelatedNodeInfo"}}, "text": "#### Token Transfer\nThe function finishes by creating a `Promise` to transfer tokens to the previous bidder. This token amount will be deducted immediately and transferred in the next block after the current function has finished executing.\n\nNote that on the first bid the contract will send 1 yoctonear to itself, this is fine as we can safely assume that the contract will have the lowest denomination of $NEAR available to send to itself.\n\n<details>\n\n<summary> Handling Funds </summary>\n\nWhen a user attaches tokens to a call, the tokens are deposited on the contract's account before the function is executed. However, if the function raises an error during its execution, the tokens are immediately refunded to the user.\n\n</details>\n\n:::tip Learn More\n\nYou can read more about the environment variables, payable functions and which actions the contract can perform here:\n- [Environment Variables](../../2.build/2.smart-contracts/anatomy/environment.md)\n- [Payable Functions](../../2.build/2.smart-contracts/anatomy/functions.md)\n- [Transfers and Actions](../../2.build/2.smart-contracts/anatomy/actions.md)\n\n:::\n\n---\n\n## Conclusion \n\nIn this part of the tutorial, we've seen how a smart contract stores data, mutates the stored data, and views the data. In the next part, we will cover how to test the contract, so we can ensure it works as expected before deploying it to `testnet`.", "mimetype": "text/plain", "start_char_idx": 10203, "end_char_idx": 11591, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6966597d-4228-4642-9dce-e08ec743eb3b": {"__data__": {"id_": "6966597d-4228-4642-9dce-e08ec743eb3b", "embedding": null, "metadata": {"file_path": "./near_dist/credentials.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ac5571c1-3315-4451-b568-600adad50f33", "node_type": "4", "metadata": {}, "hash": "94110c2abf1e800fdfce34dc380cf47e63e35fff836c835bf2188c96d6c2610b", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: \"Credentials\"\n---\n\n# Credentials\n\nTo access the data provided by [NEAR Lake](../near-lake.md) you need to provide valid AWS credentials in order to be charged by the AWS for the S3 usage.\n\n:::info AWS credentials\n\nPlease note that using your own AWS Credentials is the only way to access the data provided by [NEAR Lake](../near-lake.md) ecosystem.\n\n:::\n\n### AWS S3 Credentials\n\nTo be able to get objects from the AWS S3 bucket you need to provide your AWS credentials.\n\nAWS default profile configuration with aws configure looks similar to the following:\n\n```\n~/.aws/credentials\n```\n\n```\n[default]\naws_access_key_id=<YOUR_AWS_ACCESS_KEY_ID>\naws_secret_access_key=<YOUR_AWS_ACCESS_KEY>\n```\n\n[AWS docs: Configuration and credential file settings](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html)\n\n#### Environment variables\n\nAlternatively, you can provide your AWS credentials via environment variables with constant names:\n\n```\n$ export AWS_ACCESS_KEY_ID=<YOUR_AWS_ACCESS_KEY_ID>\n$ AWS_SECRET_ACCESS_KEY=<YOUR_AWS_ACCESS_KEY>\n$ AWS_DEFAULT_REGION=eu-central-1\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1108, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "080d5df9-3b4c-4377-8c7f-34d31865883d": {"__data__": {"id_": "080d5df9-3b4c-4377-8c7f-34d31865883d", "embedding": null, "metadata": {"file_path": "./near_dist/callbacks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150fef70-038b-41d6-bb58-6f9bb4801f04", "node_type": "4", "metadata": {}, "hash": "5e5c62d020c49db4089df9a5a76e40a87103e159038f253bda5aaa3aa09f0237", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb6491e2-bd70-4e35-bf9f-a2bb1c554b08", "node_type": "1", "metadata": {}, "hash": "818544668723834adb89811e84e3b447c8483d5f445826843f7bd8efaf19d2da", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: callbacks\ntitle: Cross-Contract Calls\n---\n\nWhile writing cross-contract calls there is a significant aspect to keep in mind: all the calls are **independent** and **asynchronous**. In other words:\n\n- The method in which you make the call and method for the callback are **independent**.\n- Between the call and the callback, people could interact with the contract.\n\nThis has important implications on how you should handle the callbacks. Particularly:\n\n1. Your callback method needs to be public, but you want to make sure only your contract can call it.\n2. Make sure you don't leave the contract in a exploitable state between the call and the callback.\n3. Manually rollback any changes to the state in the callback if the external call failed.\n\n---\n\n## Private Callbacks\nIn order for your contract to call itself when a cross-contract call is done, you need to make the callback method public. However, most of the times you would want it to be private. You can make it private while keeping it public by asserting that the `predecessor` is `current_account`. In rust this is done automatically by adding the `#[private]` decorator.\n\n---\n\n## User's Money\nWhen a method panics, the money attached to that transaction returns to the `predecessor`. This means that, if you make a cross-contract call and it fails, then the money **returns to your contract**. If the money came from a user calling your contract, then you should transfer it back during the callback.\n\n![img](https://miro.medium.com/max/1400/1*Hp4TOcaBqm9LS0wkgWw3nA.png)\n*If the user attached money, we need to manually return it in the callback*\n\n:::caution\nMake sure you pass have enough GAS in the callback to make the transfer\n:::\n\n---\n\n## Async Callbacks\nBetween a cross-contract call and its callback **any method of your contract can be executed**. Not taking this into account is one of the main sources of exploits. It is so common that it has its own name: reentrancy attacks.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1959, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb6491e2-bd70-4e35-bf9f-a2bb1c554b08": {"__data__": {"id_": "bb6491e2-bd70-4e35-bf9f-a2bb1c554b08", "embedding": null, "metadata": {"file_path": "./near_dist/callbacks.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "150fef70-038b-41d6-bb58-6f9bb4801f04", "node_type": "4", "metadata": {}, "hash": "5e5c62d020c49db4089df9a5a76e40a87103e159038f253bda5aaa3aa09f0237", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "080d5df9-3b4c-4377-8c7f-34d31865883d", "node_type": "1", "metadata": {}, "hash": "73d61a6dd425e19722248e9ae00108e8e8ceaaf37871ba978947370010d1c148", "class_name": "RelatedNodeInfo"}}, "text": "Imagine that we develop a `deposit_and_stake` with the following **wrong logic**: (1) The user sends us money, (2) we add it to its balance, (3) we try to stake it in a validator, (4) if the staking fails, we remove the balance in the callback. Then, a user could schedule a call to withdraw between (2) and (4), and, if the staking failed, we would send money twice to the user.\n\n![img](https://miro.medium.com/max/1400/1*VweWHQYGLBa70uceiWHLQA.png)\n*Between a cross-contract call and the callback anything could happen*\n\nLuckily for us the solution is rather simple. Instead of immediately adding the money to our user\u2019s balance, we wait until the callback. There we check, and if the staking went well, then we add it to their balance.\n\n![img](https://miro.medium.com/max/1400/1*o0YVDCp_7l-L3njJMGhU4w.png)\n*Correct way to handle deposits in a cross-contract call*", "mimetype": "text/plain", "start_char_idx": 1961, "end_char_idx": 2828, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7bfa00ed-5c91-4571-bc9a-ec47a4b007d6": {"__data__": {"id_": "7bfa00ed-5c91-4571-bc9a-ec47a4b007d6", "embedding": null, "metadata": {"file_path": "./near_dist/unit-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf535fd0-7eb1-437a-ae3e-e7249c9a965e", "node_type": "4", "metadata": {}, "hash": "eefa92e2fe978fe60a193dcc423e6ccc24b320d66b447ca6625b20ad1fc896ff", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "261af660-2033-4b92-a1ce-29397e24f4a6", "node_type": "1", "metadata": {}, "hash": "eb8cbfbb554833f28f3a75f68bebd6ece67f87270c08ad8a5e2c3f12ac957b26", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: unit-test\ntitle: Unit Testing\n#sidebar_label: \ud83e\uddeb Unit Testing\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nUnit tests allow you to test the contract methods individually. They are suitable to check the storage is updated correctly, and that methods return their expected values. They are written in the contract's language and execute locally.\n\nIf you used one of our [examples](https://github.com/near-examples/docs-examples) as template, then you simply need to navigate to the contract's folder, and use `yarn test`. In case you didn't, then we recommend you copy the necessary node files (e.g. `package.json`) from one of our templates.\n\n:::tip\nYou can run `yarn test` from the root folder of each project to run both unit and [integration](integration-test.md) tests.\n:::\n\n---\n\n## Snippet I: Testing a Counter\n\nThe tests in the [Counter Example](https://github.com/near-examples/counters) rely on basic functions to check that the `increment`, `decrement`, and `reset` methods work properly.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/counters/blob/main/contract-rs/src/lib.rs\"\n            start=\"47\" end=\"68\" />\n    <Github fname=\"Cargo.toml\"\n            url=\"https://github.com/near-examples/counters/blob/main/contract-rs/Cargo.toml\"\n            start=\"18\" end=\"19\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## Snippet II: Modifying the Context\n\nWhile doing unit testing you can modify the [Environment variables](../anatomy/environment.md) through the `VMContextBuilder`. This will enable you to, for example, simulate calls from different users, with specific attached deposit and GAS. Here we present a snippet on how we test the `donate` method from our [Donation Example](https://github.com/near-examples/donation-examples) by manipulating the `predecessor` and `attached_deposit`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1915, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "261af660-2033-4b92-a1ce-29397e24f4a6": {"__data__": {"id_": "261af660-2033-4b92-a1ce-29397e24f4a6", "embedding": null, "metadata": {"file_path": "./near_dist/unit-test.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf535fd0-7eb1-437a-ae3e-e7249c9a965e", "node_type": "4", "metadata": {}, "hash": "eefa92e2fe978fe60a193dcc423e6ccc24b320d66b447ca6625b20ad1fc896ff", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7bfa00ed-5c91-4571-bc9a-ec47a4b007d6", "node_type": "1", "metadata": {}, "hash": "283b4cab60f08fd3d77725f7d27f574c06b10da675757dbce80006827fb6f68d", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/donation-examples/blob/main/contract-rs/src/lib.rs\"\n            start=\"58\" end=\"105\" />\n    <Github fname=\"Cargo.toml\"\n            url=\"https://github.com/near-examples/donation-examples/blob/main/contract-rs/Cargo.toml\"\n            start=\"18\" end=\"19\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## \u26a0\ufe0f Limitations\n\nUnit tests are useful to check for code integrity, and detect basic errors on isolated methods. However, since unit tests do not run on a blockchain, there are many things which they cannot detect. Unit tests are not suitable for:\n\n- Testing [gas](../anatomy/environment.md) and [storage](../anatomy/storage.md) usage\n- Testing [transfers](../anatomy/actions.md)\n- Testing [cross-contract calls](../anatomy/crosscontract.md)\n- Testing complex interactions, i.e. multiple users depositing money on the contract\n\nFor all these cases it is necessary to **complement** unit tests with [integration tests](integration-test.md).", "mimetype": "text/plain", "start_char_idx": 1917, "end_char_idx": 2976, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b29cb879-2aa6-4f75-8baa-a5f2dcc06e06": {"__data__": {"id_": "b29cb879-2aa6-4f75-8baa-a5f2dcc06e06", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08f13a68-9ec9-4687-8da9-b24d872b9d81", "node_type": "1", "metadata": {}, "hash": "266b2ad6df83019e2067cb919fb7930267157be1968702456969855eaf24fd00", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: linkdrop\ntitle: Linkdrops\nhide_table_of_contents: false\n---\nimport {FeatureList, Column, Feature} from \"@site/src/components/featurelist\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n\nLinkdrops allow users to distribute assets and onboard people to Web3 apps through a simple web link.\n\n![Linkdrop](/docs/primitives/linkdrop.png)\n\nThey work by storing assets and linking [AccessKeys](../../1.concepts/protocol/access-keys.md) to them. The `AccessKeys` are then distributed to users in the form of web links. These links take users to a website that automatically uses the keys to call the `claim` method in the `linkdrop` contract.\n\nIn order for a contract to be considered a Linkdrop-contract it has to follow the [**NEP-452 standard**](https://github.com/near/NEPs/blob/master/neps/nep-0452.md). The **NEP-452** explains the **minimum interface** required to be implemented, as well as the expected functionality.\n\n---\n\n## [Keypom](https://keypom.xyz/)\n\nThe simplest way to create Linkdrops is by using [Keypom](https://keypom.xyz/). Keypom is a community project that allows you to create Linkdrops for NEAR tokens and NFTs in a few clicks.\n\n![keypom](/docs/primitives/keypom.png)\n\n---\n\n## AccessKeys\n\nIn order to create any kind of drop, you need to first generate key pairs. You will need to create **one key per drop**.\n\n- The `linkdrop` contract will store the **`public`** part of the key.\n- You will give the `private` part of the key to the user you want to receive the drop.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n<Tabs className=\"file-tabs\">\n\n<TabItem value=\"Keypom API\" label=\"Keypom API\">\n\n```js\nconst dropsNumber = \"2\";\nconst keysGeneratorUrl = \"https://keypom.sctuts.com/keypair/\";\nconst rootEntrophy = \"my-password\"; //If not provided, the keypair will be completely random. see: https://docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1896, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08f13a68-9ec9-4687-8da9-b24d872b9d81": {"__data__": {"id_": "08f13a68-9ec9-4687-8da9-b24d872b9d81", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b29cb879-2aa6-4f75-8baa-a5f2dcc06e06", "node_type": "1", "metadata": {}, "hash": "a0b988c619025b88d95a87613a7857a64c8dba7515ba30aced4ba944302e77f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97102952-ee29-409d-86a1-442d3246e6aa", "node_type": "1", "metadata": {}, "hash": "e8ff2bc04952ea96cc29e94da7e31fb15e0cf3ebae4b8dcef9ec0c90e4930a73", "class_name": "RelatedNodeInfo"}}, "text": "keypom.xyz/docs/next/keypom-sdk/Core/modules\nasyncFetch(keysGeneratorUrl + dropsNumber + \"/\" + rootEntrophy).then((res) => {\n  const keyPairs = JSON.parse(res.body);\n  const pubKeys = [];\n  const privKeys = [];\n\n  keyPairs.forEach((e) => {\n    pubKeys.push(e.pub);\n    privKeys.push(e.priv);\n  });\n\n  const obj = {\n    publicKeys: pubKeys,\n    privKeys: privKeys,\n  };\n\n  State.update(obj);\n});\n```\n\n</TabItem>\n\n</Tabs>\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n<Tabs className=\"file-tabs\">\n\n<TabItem value=\"near-api-js\" label=\"near-api-js\">\n\n```js\nimport { KeyPair } from 'near-api-js';\n\nconst newKeyPair = KeyPair.fromRandom('ed25519');\nnewKeyPair.public_key = newKeyPair.publicKey.toString();\n```\n\n</TabItem>\n\n<TabItem value=\"Keypom API\" label=\"Keypom API\">\n\n```js\nconst state = {};\n\nconst dropsNumber = \"2\";\nconst keysGeneratorUrl = \"https://keypom.sctuts.com/keypair/\";\n\nfetch(keysGeneratorUrl + dropsNumber + \"/rootEntrophy\").then((res) => {\n  const keyPairs = JSON.parse(res.body);\n  const pubKeys = [];\n  const privKeys = [];\n\n  keyPairs.forEach((e) => {\n    pubKeys.push(e.pub);\n    privKeys.push(e.priv);\n  });\n\n  state.publicKeys = pubKeys;\n  state.privKeys = privKeys;\n});\n```\n\n</TabItem>\n\n</Tabs>\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n<Tabs className=\"file-tabs\">\n\n<TabItem value=\"Near CLI\" label=\"Near CLI\">\n\n```bash\n# This command creates a key pair locally in .", "mimetype": "text/plain", "start_char_idx": 1896, "end_char_idx": 3311, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97102952-ee29-409d-86a1-442d3246e6aa": {"__data__": {"id_": "97102952-ee29-409d-86a1-442d3246e6aa", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08f13a68-9ec9-4687-8da9-b24d872b9d81", "node_type": "1", "metadata": {}, "hash": "266b2ad6df83019e2067cb919fb7930267157be1968702456969855eaf24fd00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dca08142-6c37-4fba-ae7c-07457fa7362a", "node_type": "1", "metadata": {}, "hash": "1a8c5e78fdcc15c12f5cdcfe49c1459871047c0698197f0c46beeb0be46ea6c4", "class_name": "RelatedNodeInfo"}}, "text": "near-credentials with an implicit account as the accountId (hash representation of the public key)\n\nnear generate-key\n```\n\n**Example response:**\n\n```bash\nKey pair with ed25519:33Vn9VtNEtWQPPd1f4jf5HzJ5weLcvGHU8oz7o5UnPqy public key for an account \"1e5b1346bdb4fc5ccd465f6757a9082a84bcacfd396e7d80b0c726252fe8b3e8\"\n```\n\n</TabItem>\n\n<TabItem value=\"Keypom API\" label=\"Keypom API\">\n\n```bash\nexport NUMBER_OF_DROPS=2\n\ncurl https://keypom.sctuts.com/keypair/$NUMBER_OF_DROPS/rootEntrophy\n```\n\n</TabItem>\n\n</Tabs>\n\n  </TabItem>\n</Tabs>\n\n---\n\n## $NEAR Drops\n\nTo create a $NEAR drop you will ask the contract to create a drop (`create_drop`), passing the public part of the keys you generated, and how much you want to drop on each key use (`deposit_per_use`).\n\nThe contract will create a drop and **return the numerical ID** that identifies it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nconst keypomContract = \"v2.keypom.near\";\nconst dropAmount = \"10000000000000000000000\";\n\nNear.call([\n  {\n    contractName: keypomContract,\n    methodName: \"create_drop\",\n    args: {\n      public_keys: state.publicKeys,\n      deposit_per_use: dropAmount,\n    },\n    deposit: \"23000000000000000000000\", // state.publicKeys.length * dropAmount + 3000000000000000000000,\n    gas: \"100000000000000\",\n  },\n]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";", "mimetype": "text/plain", "start_char_idx": 3311, "end_char_idx": 4810, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dca08142-6c37-4fba-ae7c-07457fa7362a": {"__data__": {"id_": "dca08142-6c37-4fba-ae7c-07457fa7362a", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97102952-ee29-409d-86a1-442d3246e6aa", "node_type": "1", "metadata": {}, "hash": "e8ff2bc04952ea96cc29e94da7e31fb15e0cf3ebae4b8dcef9ec0c90e4930a73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d0854254-cffa-42ff-8d81-220c0b800b5d", "node_type": "1", "metadata": {}, "hash": "a3b5d14f6e250d6095f4ab2fd296587d311f28fe919fd4634ef20e5d64216e06", "class_name": "RelatedNodeInfo"}}, "text": "const DROP_AMOUNT = \"10000000000000000000000\"; // 0.1 NEAR\n\nconst wallet = new Wallet({ createAccessKeyFor: KEYPOM_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"create_drop\",\n  contractId: KEYPOM_CONTRACT_ADDRESS,\n  args: {\n    public_keys: state.publicKeys,\n    deposit_per_use: DROP_AMOUNT,\n  },\n  deposit: \"23000000000000000000000\" // state.publicKeys.length * dropAmount + 3000000000000000000000,\n  gas: \"100000000000000\",\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call v2.keypom.near create_drop '{\"public_keys\": <PUBLIC_KEYS>, \"deposit_per_use\": \"10000000000000000000000\"}' --depositYocto 23000000000000000000000 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n:::info\nTo claim the drop, you will need to send the user a [link with the private key](#building-drop-links)\n:::\n\n---\n\n## NFT Drops\n\nTo drop an existing NFT, you will (1) create a drop, and then (2) **transfer the NFT** to keypom.\n\n#### 1. Creating the Drop\n\nTo create an NFT drop, you will call the `create_drop` method, now passing a `nft` argument, which will tell the linkdrop contract to wait for an NFT to be transferred.\n\nThe contract will then create a drop and **return the numerical ID** that identifies it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nconst accountId = context.accountId ?? props.accountId;\nconst keypomContract = \"v2.keypom.near\";\nconst nftContract = \"nft.", "mimetype": "text/plain", "start_char_idx": 4811, "end_char_idx": 6440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d0854254-cffa-42ff-8d81-220c0b800b5d": {"__data__": {"id_": "d0854254-cffa-42ff-8d81-220c0b800b5d", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dca08142-6c37-4fba-ae7c-07457fa7362a", "node_type": "1", "metadata": {}, "hash": "1a8c5e78fdcc15c12f5cdcfe49c1459871047c0698197f0c46beeb0be46ea6c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "060737b6-e4f5-4ff9-8023-237b257ef78a", "node_type": "1", "metadata": {}, "hash": "b218cea09481de98ca6a296ccadf74c1391bba6b5cc90b4bab4f71a1a6609a1b", "class_name": "RelatedNodeInfo"}}, "text": "primitives.near\";\nconst dropAmount = \"10000000000000000000000\";\n\n Near.call([\n  {\n    contractName: keypomContract,\n    methodName: \"create_drop\",\n    args: {\n      public_keys: state.publicKeys,\n      deposit_per_use: dropAmount,\n      nft: {\n        // Who will be sending the NFTs to the Keypom contract\n        sender_id: accountId,\n        // NFT Contract Id that the tokens will come from\n        contract_id: nftContract,\n      },\n    },\n    deposit: \"23000000000000000000000\" // state.publicKeys.length * dropAmount + 3000000000000000000000,\n    gas: \"100000000000000\",\n  },\n]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";\nconst NFT_CONTRACT_ADDRESS = \"nft.primitives.near\";\nconst DROP_AMOUNT = \"10000000000000000000000\";\n\nconst keypomConnectedWallet = new Wallet({ createAccessKeyFor: KEYPOM_CONTRACT_ADDRESS });\nconst nftConnectedWallet = new Wallet({ createAccessKeyFor: NFT_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"create_drop\",\n  contractId: KEYPOM_CONTRACT_ADDRESS,\n  args: {\n    public_keys: state.publicKeys,\n    deposit_per_use: DROP_AMOUNT,\n    nft: {\n      // Who will be sending the NFTs to the Keypom contract\n      sender_id: accountId, // TODO How to get it\n      // NFT Contract Id that the tokens will come from\n      contract_id: NFT_CONTRACT_ADDRESS,\n    },\n  },\n  deposit: \"23000000000000000000000\" // state.publicKeys.length * dropAmount + 3000000000000000000000,\n  gas: \"100000000000000\",\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.", "mimetype": "text/plain", "start_char_idx": 6440, "end_char_idx": 8077, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "060737b6-e4f5-4ff9-8023-237b257ef78a": {"__data__": {"id_": "060737b6-e4f5-4ff9-8023-237b257ef78a", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d0854254-cffa-42ff-8d81-220c0b800b5d", "node_type": "1", "metadata": {}, "hash": "a3b5d14f6e250d6095f4ab2fd296587d311f28fe919fd4634ef20e5d64216e06", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f65ec99f-e1df-4dd8-a1a7-38ab82354eef", "node_type": "1", "metadata": {}, "hash": "be63206a3b55ac9ca4d968c69d0ee95b46fc21bbdbe02ee9c7eabeecf983078b", "class_name": "RelatedNodeInfo"}}, "text": "com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call v2.keypom.near create_drop '{\"public_keys\": <PUBLIC_KEYS>, \"deposit_per_use\": \"10000000000000000000000\", \"nft\": {\"sender_id\": \"bob.near\", \"contract_id\": \"nft.primitives.near\"}}' --depositYocto 23000000000000000000000 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n#### 2. Transferring the NFT\n\nHaving the Drop ID, you now need to transfer the NFT to the linkdrop contract, specifying to which drop you want to add it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nconst nftTokenId = \"1\";\n\nNear.call([{\n  contractName: nftContract,\n  methodName: 'nft_transfer_call',\n  args: {\n    receiver_id: keypomContract,\n    token_id: nftTokenId,\n    msg: dropId.toString()\n  },\n  deposit: \"1\",\n  gas: \"300000000000000\"\n}]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";\nconst NFT_CONTRACT_ADDRESS = \"nft.primitives.near\";\nconst NFT_TOKEN_ID = \"1\";\nconst DROP_AMOUNT = \"10000000000000000000000\";\n\nconst nftConnectedWallet = new Wallet({ createAccessKeyFor: NFT_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"nft_transfer_call\",\n  contractId: NFT_CONTRACT_ADDRESS,\n  args: {\n    receiver_id: keypomContract,\n    token_id: nftTokenId,\n    msg: dropId.toString()\n  },", "mimetype": "text/plain", "start_char_idx": 8077, "end_char_idx": 9585, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f65ec99f-e1df-4dd8-a1a7-38ab82354eef": {"__data__": {"id_": "f65ec99f-e1df-4dd8-a1a7-38ab82354eef", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "060737b6-e4f5-4ff9-8023-237b257ef78a", "node_type": "1", "metadata": {}, "hash": "b218cea09481de98ca6a296ccadf74c1391bba6b5cc90b4bab4f71a1a6609a1b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "45700907-2315-4e78-a862-2cb1f1dc45a5", "node_type": "1", "metadata": {}, "hash": "174244c74900bee72d2cbb997809f032c25b20e7ba7311e4f693cb85b9add047", "class_name": "RelatedNodeInfo"}}, "text": "deposit: 1,\n  gas: \"100000000000000\",\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call nft.primitives.near nft_transfer_call '{\"receiver_id\": \"v2.keypom.near\", \"token_id\": <YOUR TOKEN ID>, \"msg\": <YOUR DROP ID>}' --depositYocto 1 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n:::tip\nThe `linkdrop` contract will validate that you are transferring the NFT to a drop that belongs to you\n:::\n\n---\n\n## FT Drops\n\nThe process to drop a Fungible Token is very similar to that of creating an [NFT drop](#nft-drop). You will first create the drop, and then fund it with FTs.\n\n#### 1.Creating a drop\n\nTo create a FT drop you will call the `create_drop` method, now passing a `ftData` argument, which will tell the linkdrop contract to wait for a certain amount of FT to be transferred.\n\nThe contract will then create a drop and **return the numerical ID** that identifies it.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nconst keypomContract = \"v2.keypom.near\";\nconst ftContract = \"ft.primitives.near\";\nconst dropAmount = \"10000000000000000000000\";\n\nNear.call([\n  {\n    contractName: keypomContract,\n    methodName: \"create_drop\",\n    args: {\n      public_keys: state.publicKeys,\n      deposit_per_use: dropAmount,\n      ftData: {\n\t    \tcontractId: ftContract,\n\t    \tsenderId: accountId,\n\t    \t// This balance per use is balance of human readable FTs per use.\n\t    \tamount: \"1\"\n        // Alternatively, you could use absoluteAmount, which is dependant on the decimals value of the FT\n        // ex.", "mimetype": "text/plain", "start_char_idx": 9588, "end_char_idx": 11340, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "45700907-2315-4e78-a862-2cb1f1dc45a5": {"__data__": {"id_": "45700907-2315-4e78-a862-2cb1f1dc45a5", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f65ec99f-e1df-4dd8-a1a7-38ab82354eef", "node_type": "1", "metadata": {}, "hash": "be63206a3b55ac9ca4d968c69d0ee95b46fc21bbdbe02ee9c7eabeecf983078b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "11841e9e-0e39-49ab-af72-3271eda71d37", "node_type": "1", "metadata": {}, "hash": "9eb1cd1b78704458969fbceebe27726d4b8e165e542c6fbb8da919c6adba73e8", "class_name": "RelatedNodeInfo"}}, "text": "if decimals of an ft = 8, then 1 FT token would be absoluteAmount = 100000000\n\t    },\n    },\n    deposit: \"23000000000000000000000\", // state.publicKeys.length * dropAmount + 3000000000000000000000,\n    gas: \"100000000000000\"\n  },\n]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";\nconst FT_CONTRACT_ADDRESS = \"ft.primitives.near\";\nconst DROP_AMOUNT = \"10000000000000000000000\";\n\nconst wallet = new Wallet({ createAccessKeyFor: KEYPOM_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"create_drop\",\n  contractId: KEYPOM_CONTRACT_ADDRESS,\n  args: {\n    public_keys: state.publicKeys,\n    deposit_per_use: DROP_AMOUNT,\n    ftData: {\n      contractId: FT_CONTRACT_ADDRESS,\n      senderId: accountId, // TODO How to get account id\n      // This balance per use is balance of human readable FTs per use.\n      amount: \"1\"\n      // Alternatively, you could use absoluteAmount, which is dependant on the decimals value of the FT\n      // ex.", "mimetype": "text/plain", "start_char_idx": 11341, "end_char_idx": 12399, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "11841e9e-0e39-49ab-af72-3271eda71d37": {"__data__": {"id_": "11841e9e-0e39-49ab-af72-3271eda71d37", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "45700907-2315-4e78-a862-2cb1f1dc45a5", "node_type": "1", "metadata": {}, "hash": "174244c74900bee72d2cbb997809f032c25b20e7ba7311e4f693cb85b9add047", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "030070d8-0960-4991-a22f-9ca300558503", "node_type": "1", "metadata": {}, "hash": "971245cb5360c31d347e19aae7dbec93a154705646bc8cd21c38011a562fa8f0", "class_name": "RelatedNodeInfo"}}, "text": "if decimals of an ft = 8, then 1 FT token would be absoluteAmount = 100000000\n    },\n  },\n  deposit: \"23000000000000000000000\" // state.publicKeys.length * dropAmount + 3000000000000000000000,\n  gas: \"100000000000000\",\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call v2.keypom.near create_drop '{\"public_keys\": <PUBLIC_KEYS>, \"deposit_per_use\": \"10000000000000000000000\", \"ftData\": {\"contractId\": \"ft.primitives.near\",\"senderId\": \"bob.near\", \"amount\": \"1\"}}}' --depositYocto 23000000000000000000000 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n#### 2. Transferring FT\n\nHaving the Drop ID, you now need to transfer the fungible tokens to the linkdrop contract.\n\n:::note\nTo transfer FTs to an account, you need to first [register](./ft#register-user) the receiver account (e.g. the keypom contract) on the FT contract.", "mimetype": "text/plain", "start_char_idx": 12400, "end_char_idx": 13429, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "030070d8-0960-4991-a22f-9ca300558503": {"__data__": {"id_": "030070d8-0960-4991-a22f-9ca300558503", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "11841e9e-0e39-49ab-af72-3271eda71d37", "node_type": "1", "metadata": {}, "hash": "9eb1cd1b78704458969fbceebe27726d4b8e165e542c6fbb8da919c6adba73e8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03", "node_type": "1", "metadata": {}, "hash": "1003d287c20a3359031caf19654a51d41dd15522502710305b6af529f5f4e824", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nNear.call([\n  {\n    contractName: ftContract,\n    methodName: \"ft_transfer\",\n    args: {\n      receiver_id: keypomContract,\n      amount: \"1\",\n    },\n    deposit: \"1\",\n    gas: \"300000000000000\",\n  },\n]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";\nconst FT_CONTRACT_ADDRESS = \"ft.primitives.near\";\n\nconst wallet = new Wallet({ createAccessKeyFor: FT_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"ft_transfer\",\n  contractId: FT_CONTRACT_ADDRESS,\n  args: {\n    receiver_id: KEYPOM_CONTRACT_ADDRESS,\n    amount: \"1\"\n  },\n  deposit: \"1\",\n  gas: \"100000000000000\"\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call ft.primitives.near ft_transfer '{\"receiver_id\": \"v2.keypom.near\", \"amount\": \"1\"}' --depositYocto 1 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n---\n\n## Function Call Drop\nLinkdrop contracts allow to create `function call` drops. These drops will execute one or more methods on a contract when the user claims the drop.\n\n:::tip\nFunction call drops can be thought as the abstract version of other drops: you can create a drop that will mint an NFT, register a user in a DAO, or pay for a service.\n:::\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"\u269b\ufe0f Component\" label=\"\u269b\ufe0f Component\" default>\n\n```js\nconst accountId = context.accountId ??", "mimetype": "text/plain", "start_char_idx": 13430, "end_char_idx": 15117, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03": {"__data__": {"id_": "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "030070d8-0960-4991-a22f-9ca300558503", "node_type": "1", "metadata": {}, "hash": "971245cb5360c31d347e19aae7dbec93a154705646bc8cd21c38011a562fa8f0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97", "node_type": "1", "metadata": {}, "hash": "729bd17ec1d6ff8c8ccfdc4635a922a3c7154e5b174c276ed510c2c35f5f1038", "class_name": "RelatedNodeInfo"}}, "text": "props.accountId;\nconst keypomContract = \"v2.keypom.near\";\nconst nftContract = \"nft.primitives.near\";\nconst nftTokenId = \"1\";\nconst dropAmount = \"10000000000000000000000\";\n\nNear.call([\n  {\n    contractName: keypomContract,\n    methodName: \"create_drop\",\n    args: {\n      public_keys: state.publicKeys,\n      deposit_per_use: dropAmount,\n      fcData: {\n        // 2D array of function calls. In this case, there is 1 function call to make for a key use\n        // By default, if only one array of methods is present, this array of function calls will be used for all key uses\n        methods: [\n          // Array of functions for Key use 1.", "mimetype": "text/plain", "start_char_idx": 15118, "end_char_idx": 15759, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97": {"__data__": {"id_": "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03", "node_type": "1", "metadata": {}, "hash": "1003d287c20a3359031caf19654a51d41dd15522502710305b6af529f5f4e824", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c477cb9-7594-41e3-8686-498d9cdd35b8", "node_type": "1", "metadata": {}, "hash": "9d1f29536a39c6a71bfcd0ab1ac0d480b57e685d5f8a5cd1c165dfbdc53fcd2a", "class_name": "RelatedNodeInfo"}}, "text": "[{\n              receiverId: nftContract,\n              methodName: \"nft_mint\",\n              args: JSON.stringify({\n              // Change this token_id if it already exists -> check explorer transaction\n                  token_id: nftTokenId,\n                  metadata: {\n                    title: \"My NFT drop\",\n                    description: \"\",\n                    media: \"\",\n                  }\n              }),\n              accountIdField: \"receiver_id\",\n              // Attached deposit for when the receiver makes this function call\n              attachedDeposit: \"10000000000000000000000\"\n            }]\n        ]\n      }\n    },\n    deposit: \"23000000000000000000000\", // state.publicKeys.length * dropAmount + 3000000000000000000000,\n    gas: \"100000000000000\",\n  },\n]);\n```\n\n  </TabItem>\n  <TabItem value=\"\ud83c\udf10 WebApp\" label=\"\ud83c\udf10 WebApp\">\n\n```js\nimport { Wallet } from './near-wallet';\n\nconst KEYPOM_CONTRACT_ADDRESS = \"v2.keypom.near\";\nconst NFT_CONTRACT_ADDRESS = \"nft.primitives.near\";\nconst NFT_TOKEN_ID = \"1\";\nconst DROP_AMOUNT = \"10000000000000000000000\";\n\nconst wallet = new Wallet({ createAccessKeyFor: DAO_CONTRACT_ADDRESS });\n\nawait wallet.callMethod({\n  method: \"create_drop\",\n  contractId: KEYPOM_CONTRACT_ADDRESS,\n  args: {\n    public_keys: state.publicKeys,\n    deposit_per_use: DROP_AMOUNT,\n    fcData: {\n      // 2D array of function calls. In this case, there is 1 function call to make for a key use\n      // By default, if only one array of methods is present, this array of function calls will be used for all key uses\n      methods: [\n        // Array of functions for Key use 1.\n          [{\n            receiverId: NFT_CONTRACT_ADDRESS,\n            methodName: \"nft_mint\",\n            args: JSON.stringify({\n            // Change this token_id if it already exists -> check explorer transaction\n                token_id: NFT_TOKEN_ID,\n                metadata: {\n                  title: \"My NFT drop\",\n                  description: \"\",\n                  media: \"\",\n                }\n            }),\n            accountIdField: \"receiver_id\",", "mimetype": "text/plain", "start_char_idx": 15772, "end_char_idx": 17853, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c477cb9-7594-41e3-8686-498d9cdd35b8": {"__data__": {"id_": "2c477cb9-7594-41e3-8686-498d9cdd35b8", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97", "node_type": "1", "metadata": {}, "hash": "729bd17ec1d6ff8c8ccfdc4635a922a3c7154e5b174c276ed510c2c35f5f1038", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c239c2d-85d5-48c9-ad95-001abe0281ac", "node_type": "1", "metadata": {}, "hash": "f099e2932d9054f793abd1301778910d4943a5510ef5efd4caddbf940ae65cbb", "class_name": "RelatedNodeInfo"}}, "text": "// Attached deposit for when the receiver makes this function call\n            attachedDeposit: \"10000000000000000000000\"\n          }]\n      ]\n    }\n  },\n  deposit: \"23000000000000000000000\" // state.publicKeys.length * dropAmount + 3000000000000000000000,\n  gas: \"100000000000000\",\n});\n```\n\n_The `Wallet` object comes from our [quickstart template](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js)_\n\n  </TabItem>\n  <TabItem value=\"\ud83d\udda5\ufe0f CLI\" label=\"\ud83d\udda5\ufe0f CLI\">\n\n```bash\nnear call v2.keypom.near create_drop '{\"public_keys\": <PUBLIC_KEYS>, \"deposit_per_use\": \"10000000000000000000000\", \"fcData\": {\"methods\": [[{\"receiverId\": \"nft.primitives.near\",\"methodName\": \"nft_mint\",\"args\": {\"token_id\": \"1\", \"metadata\": {\"title\": \"My NFT drop\",\"description\": \"\",\"media\": \"\"}, \"accountIdField\": \"receiver_id\", \"attachedDeposit\": \"10000000000000000000000\"}]]}}' --depositYocto 23000000000000000000000 --gas 100000000000000 --accountId bob.near\n```\n\n  </TabItem>\n</Tabs>\n\n---\n\n## Building drop links\n\n```js\nconst getLinks = () => {\n  const links = [];\n\n  // It assumes that private keys have been already stored in State by using State.init() and State.update() method\n  state.privKeys.map((e, i) => {\n    const link =\n      \"https://app.mynearwallet.com\" + \"/linkdrop/v2.keypom.near/\" + e;\n    links.push(link);\n  });\n\n  return links;\n};\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```js\n[\n  'https://app.mynearwallet.com/linkdrop/v2.keypom.", "mimetype": "text/plain", "start_char_idx": 17866, "end_char_idx": 19345, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c239c2d-85d5-48c9-ad95-001abe0281ac": {"__data__": {"id_": "5c239c2d-85d5-48c9-ad95-001abe0281ac", "embedding": null, "metadata": {"file_path": "./near_dist/linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4", "node_type": "4", "metadata": {}, "hash": "e72f7eb27e1259d670a1c7409ec59d857c6a47f5a62fa776148ca163a3d640fe", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c477cb9-7594-41e3-8686-498d9cdd35b8", "node_type": "1", "metadata": {}, "hash": "9d1f29536a39c6a71bfcd0ab1ac0d480b57e685d5f8a5cd1c165dfbdc53fcd2a", "class_name": "RelatedNodeInfo"}}, "text": "near/ed25519:2H32THYM8ob336yk81cZUxpidvKi34zLck6a97ypmCY8bbSAuEfrCTu9LWmWGiG9df2C6vkg2FGKGZzY9qE4aEcj',\n  'https://app.mynearwallet.com/linkdrop/v2.keypom.near/ed25519:3eoMcqKmmY9Q6qgBy3hZy65HisZ8NXQd9aGGYUGe6RRsmNpGJS5YN64MgZaBVVYJJhbFXhQ2ca3DRRBiKh1rYM48'\n]\n```\n\n</p>\n\n</details>\n\n:::note\nIf you didn't save your linkdrop links before closing NEAR App, you can always find them on [Keypom app](https://keypom.xyz/drops).\n:::\n\n---\n\n## Additional Resources\n\n1. [Linkdrop plus](https://near.org/near/widget/ComponentDetailsPage?src=cuongdcdev.near/widget/linkdrop_plus) allows to create a Simple Drop. Powered by [Keypom](https://keypom.xyz/)\n2. [Keypom Drop Viewer](https://near.org/near/widget/ComponentDetailsPage?src=kiskesis.near/widget/Keypom-Drop-Viewer-fork) shows drops created by current logged in user.", "mimetype": "text/plain", "start_char_idx": 19345, "end_char_idx": 20157, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "925b4e2c-233b-4b66-8bf1-19a4b02ea924": {"__data__": {"id_": "925b4e2c-233b-4b66-8bf1-19a4b02ea924", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "68b68355-0b7c-494a-9440-0dd7ccb7cf2f", "node_type": "4", "metadata": {}, "hash": "598c6927eb3fb18bace018f9111479c00d3cbd91a31a07a5a6117f57e1e7c8ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58ce9913-faa0-4016-a75b-15c3961f4778", "node_type": "1", "metadata": {}, "hash": "dceac0f1e43d3f51bca1aa36eb62d0cd4b291b97e79c1fde2edff21d9e2d4044", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: near-lake\nsidebar_label: Lake Overview\ntitle: NEAR Lake Indexer\n---\n\nNEAR Lake is an indexer built on top of [NEAR Indexer Framework](/concepts/advanced/near-indexer-framework) to watch the network and store all the event logs such as [FT Events](https://nomicon.io/Standards/Tokens/FungibleToken/Event) and [NFT Events](https://nomicon.io/Standards/Tokens/NonFungibleToken/Event) as JSON files on AWS S3.\n\n:::info GitHub repo\n\nYou can find the Lake Indexer source code in [this GitHub repository](https://github.com/near/near-lake-indexer/).\n\n:::\n\n### How it works\n\n:::tip\n\n[Pagoda Inc.](https://pagoda.co) runs NEAR Lake nodes to store the data in JSON format on AWS S3.\nThere is no need to run your own NEAR Lake unless you have specific reasons to do that.\n\n:::\n\nThere are AWS S3 buckets created:\n\n- `near-lake-data-testnet` (`eu-central-1` region)\n- `near-lake-data-mainnet` (`eu-central-1` region)\n\nAll the buckets are set up the way the requester pays for the access. Anyone can read from these buckets by connecting to them with their own AWS credentials to be charged by Amazon.\n\n### Data structure\n\nThe data structure used by Lake Indexer is the following:\n\n```\n    <block_height>/\n      block.json\n      shard_0.json\n      shard_1.json\n      ...\n      shard_N.json\n```\n\n`<block_height>` is a 12-character-long [`u64`](https://doc.rust-lang.org/std/primitive.u64.html) string with leading zeros (e.g \"000042839521\"). See [this issue for reasoning](https://github.com/near/near-lake/issues/23).\n\n`block_json` contains JSON-serialized `BlockView` struct. **NB!** this struct might change in the future, we will announce it\n\n`shard_N.json` where N is [`u64`](https://doc.rust-lang.org/std/primitive.u64.html) starting from `0`. Represents the index number of the shard.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1784, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58ce9913-faa0-4016-a75b-15c3961f4778": {"__data__": {"id_": "58ce9913-faa0-4016-a75b-15c3961f4778", "embedding": null, "metadata": {"file_path": "./near_dist/near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "68b68355-0b7c-494a-9440-0dd7ccb7cf2f", "node_type": "4", "metadata": {}, "hash": "598c6927eb3fb18bace018f9111479c00d3cbd91a31a07a5a6117f57e1e7c8ae", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "925b4e2c-233b-4b66-8bf1-19a4b02ea924", "node_type": "1", "metadata": {}, "hash": "020b32ebdd5b49ad9449020ebb1e76517fc713297c33536fbdb0e6e1145757ff", "class_name": "RelatedNodeInfo"}}, "text": "In order to find out the expected number of shards in the block you can look in `block.json` at `.header.chunks_included`\n\n\n### How to use it\n\nWe have created the [NEAR Lake Framework](/concepts/advanced/near-lake-framework) to have a simple straightforward way to create an indexer on top of the data stored by NEAR Lake itself.\n\n:::info NEAR Lake Framework\n\nYou can check the NEAR Lake Framework release announcement on the [NEAR Governance Forum](https://gov.near.org/t/announcement-near-lake-framework-brand-new-word-in-indexer-building-approach/17668).\n\n:::\n\nWe have prepared this video tutorial with a simple example to give you an overview and some practical ideas.\n\n<iframe\n width=\"560\"\n height=\"315\"\n src=\"https://www.youtube.com/embed/GsF7I93K-EQ\"\n title=\"NEAR Lake Indexer\"\n frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n allowfullscreen>\n</iframe>", "mimetype": "text/plain", "start_char_idx": 1785, "end_char_idx": 2711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cc8b957e-da2b-48be-8f61-e4f28f9f9fe5": {"__data__": {"id_": "cc8b957e-da2b-48be-8f61-e4f28f9f9fe5", "embedding": null, "metadata": {"file_path": "./near_dist/swap.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d347f514-1d9d-43bb-b154-b4daf983c05f", "node_type": "4", "metadata": {}, "hash": "0520011eb0a3d46a57da4a8f0e4f67c1bd3cbe1f1ff5c5088f29a10ce8cf2252", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call v2.ref-finance.near swap \"{\\\"actions\\\": [{\\\"pool_id\\\": 79, \\\"token_in\\\": \\\"token.v2.ref-finance.near\\\", \\\"amount_in\\\": \\\"100000000000000000\\\", \\\"token_out\\\": \\\"wrap.near\\\", \\\"min_amount_out\\\": \\\"1\\\"}]}\" --gas 300000000000000 --depositYocto 1\n --accountId bob.near\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n'5019606679394603179450'\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 392, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b1e4779-8b55-4168-9217-5a1b59bdceec": {"__data__": {"id_": "1b1e4779-8b55-4168-9217-5a1b59bdceec", "embedding": null, "metadata": {"file_path": "./near_dist/providers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebfed4f8-1982-4fa5-846e-5e2a9a63ea9b", "node_type": "4", "metadata": {}, "hash": "03199b72851a3132d936c46d1e317ab108454d73bac4487a5172fa0a4fb77311", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "962166a7-b5e4-402e-bec8-9d5adcf4cb6f", "node_type": "1", "metadata": {}, "hash": "1b5e9c15cfafc9895ee5372e64667642d3f13e02d9036e8e4146db7c29cb0e5e", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: providers\ntitle: RPC Providers\n---\n\nThere are multiple RPC providers from which you can choose from. These providers will work as intermediaries to help you interact with the NEAR network.\nYou'll experience different latency levels depending on the provider's location. You can potentially use multiple providers for redundancy and\nbalancing.\n\n:::tip\n\nIf you want to use a custom RPC provider with NEAR Wallet Selector, [check this example](../../2.build/4.web3-apps/integrate-contracts.md#setting-customs-rpc-endpoints).\n\n:::\n\n## Mainnet\n\n| Provider                                                                   | Endpoint Root                                                |\n| -------------------------------------------------------------------------- | ------------------------------------------------------------ |\n| [NEAR](setup.md)                                                           | `https://rpc.mainnet.near.org`                               |\n| [Pagoda](https://www.pagoda.co/console)                                    | `https://rpc.mainnet.pagoda.co`                              |\n| [1RPC](https://docs.1rpc.io/overview/about-1rpc)                           | `https://1rpc.io/near`                                       |\n| [All That Node](https://docs.allthatnode.com/protocols/near/)              | `https://near-mainnet-rpc.allthatnode.com:3030`              |\n| [ankr.com](https://www.ankr.com/docs/rpc-service/chains/chains-list/#near) | `https://rpc.ankr.com/near`                                  |\n| [BlockPI Network](https://blockpi.io)                                      | `https://near.blockpi.network/v1/rpc/public`                 |\n| [dRPC](https://drpc.org/)                                                  | `https://near.drpc.org`                                      |\n| [fast-near web4](https://github.com/vgrichina/fast-near)                   | `https://rpc.web4.near.page`                                 |\n| [FASTNEAR](https://fastnear.com)                                           | `https://free.rpc.fastnear.com`                              |\n| [Gateway.fm](https://gateway.fm/)                                          | `https://rpc.near.gateway.fm/`                               |\n| [GetBlock](https://getblock.io/nodes/near/)                                | `https://getblock.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2349, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "962166a7-b5e4-402e-bec8-9d5adcf4cb6f": {"__data__": {"id_": "962166a7-b5e4-402e-bec8-9d5adcf4cb6f", "embedding": null, "metadata": {"file_path": "./near_dist/providers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebfed4f8-1982-4fa5-846e-5e2a9a63ea9b", "node_type": "4", "metadata": {}, "hash": "03199b72851a3132d936c46d1e317ab108454d73bac4487a5172fa0a4fb77311", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b1e4779-8b55-4168-9217-5a1b59bdceec", "node_type": "1", "metadata": {}, "hash": "04e93d79068fd7d14759c0c8d0c8c07e2f6f1b4e31d4affd3f5339030f51e2d3", "class_name": "RelatedNodeInfo"}}, "text": "io/nodes/near/`                            |\n| [Lava Network](https://www.lavanet.xyz/get-started/near)                   | `https://near.lava.build`                                    |\n| [Lavender.Five Nodes](https://lavenderfive.com/)                           | `https://near.lavenderfive.com/`                             |\n| [NodeReal](https://nodereal.io)                                            | `https://nodereal.io/api-marketplace/near-rpc`               |\n| [NOWNodes](https://nownodes.io/)                                           | `https://near.nownodes.io/`                                  |\n| [OMNIA](https://omniatech.io)                                              | `https://endpoints.omniatech.io/v1/near/mainnet/public`      |\n| [QuickNode](https://www.quicknode.com/chains/near)                         | -                                                            |\n| [Seracle](https://docs.seracle.com/)                                       | `https://api.seracle.com/saas/baas/rpc/near/mainnet/public/` |\n| [Zeeve](https://www.zeeve.io/)                                             | -                                                            |\n\n## Testnet\n\n| Provider                                                                   | Endpoint Root                                                |\n| -------------------------------------------------------------------------- | ------------------------------------------------------------ |\n| [NEAR](setup.md)                                                           | `https://rpc.testnet.near.org`                               |\n| [Pagoda](https://www.pagoda.co/console)                                    | `https://rpc.testnet.pagoda.co`                              |\n| [FASTNEAR](https://fastnear.com)                                           | `https://test.rpc.fastnear.com`                              |\n\n## RPC Failover\n\nIn `near-api-js` you can use [`FailoverRpcProvider`](././4.tools/near-api-js/quick-reference.md#rpc-failover) to automatically switch RPC providers when one provider is experiencing downtime, or implement an RPC selection widget that allows users to add their own RPC provider.\n\nAs a user, if a dApp or wallet doesn't support RPC failover and the primary provider is down, you can use an RPC Selector browser extension to redirect all requests to an RPC provider of your choice.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "16102dec-67ef-49b3-982a-c089c12b801c": {"__data__": {"id_": "16102dec-67ef-49b3-982a-c089c12b801c", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b5c54497-8a1f-42ae-aa94-cb243b5ff62d", "node_type": "1", "metadata": {}, "hash": "4b5e21e11a5974396a99e441a935b3141a74681ed48a181831109e0a97d30228", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: quickstart\ntitle: Hello Contract\nsidebar_label: Quickstart \u2728\n---\n\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nWelcome! [NEAR accounts](../../1.concepts/protocol/account-model.md) can store small apps known as smart contracts. In this quick tutorial, we will guide you in creating your first contract in the NEAR **testnet**!\n\nJoin us in creating a friendly contract that stores a greeting, and exposes functions to interact with it.\n\n---\n\n## Prerequisites\n\nBefore starting, make sure to setup your development environment.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 611, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b5c54497-8a1f-42ae-aa94-cb243b5ff62d": {"__data__": {"id_": "b5c54497-8a1f-42ae-aa94-cb243b5ff62d", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16102dec-67ef-49b3-982a-c089c12b801c", "node_type": "1", "metadata": {}, "hash": "3ddbddebf9326740dc4ce48a11da1f9c9df1cd70a63d08bb21958d9280386a19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d668064-d797-4070-935d-cfb37db6ede6", "node_type": "1", "metadata": {}, "hash": "74535326e49f2b728d6cd4ce71e42ad84a86a245e7fdf648b26a4505af8b0adf", "class_name": "RelatedNodeInfo"}}, "text": "<details>\n<summary>Working on Windows?</summary>\n\n  See our blog post [getting started on NEAR using Windows](/blog/getting-started-on-windows) for a step-by-step guide on how to setup WSL and your environment\n\n</details>\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n# Install Node.js using nvm (more option in: https://nodejs.org/en/download)\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\nnvm install latest\n\n# Install NEAR CLI to deploy and interact with the contract\nnpm install -g near-cli-rs@latest\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n# Install Rust: https://www.rust-lang.org/tools/install\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n\n# Contracts will be compiled to wasm, so we need to add the wasm target\nrustup target add wasm32-unknown-unknown\n\n# Install NEAR CLI-RS to deploy and interact with the contract\ncurl --proto '=https' --tlsv1.2 -LsSf https://github.com/near/near-cli-rs/releases/latest/download/near-cli-rs-installer.sh | sh\n\n# Install cargo near to help building the contract\ncurl --proto '=https' --tlsv1.2 -LsSf https://github.com/near/cargo-near/releases/latest/download/cargo-near-installer.sh | sh\n```\n\n</TabItem>\n\n</Tabs>\n\n:::note\nSome `near-cli` commands have two versions - a **full** one and a **short** one. If you want to explore all options provided by `near-cli` use [the interactive mode](../../4.tools/cli.md#interactive-mode).\n:::\n\n:::tip Testnet Account\n\nThere is no need to have a `testnet` account to follow this tutorial.\n\nHowever, if you want to create one, you can do so through [a wallet](https://testnet.mynearwallet.com), and use it from the `near-cli` by invoking `near login`.", "mimetype": "text/plain", "start_char_idx": 613, "end_char_idx": 2356, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d668064-d797-4070-935d-cfb37db6ede6": {"__data__": {"id_": "1d668064-d797-4070-935d-cfb37db6ede6", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b5c54497-8a1f-42ae-aa94-cb243b5ff62d", "node_type": "1", "metadata": {}, "hash": "4b5e21e11a5974396a99e441a935b3141a74681ed48a181831109e0a97d30228", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97bbf3de-0f0e-459a-86c3-8cfbdb560e23", "node_type": "1", "metadata": {}, "hash": "2ee3e1c2c9c43a88f07310ae15aa3380ed979c55d0ce3e345691bc5671061656", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Creating the Contract\n\nCreate a smart contract by using one of the scaffolding tools and following their instructions:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n\n```bash\n  npx create-near-app@latest\n```\n\n![img](@site/static/docs/hello-near-ts.gif)\n_Creating a project using `create-near-app`_\n\nThis will generate a project with the following structure:\n\n```bash\n\u251c\u2500\u2500 sandbox-test    # sanbox testing\n\u2502   \u2514\u2500\u2500 main.ava.js\n\u251c\u2500\u2500 src             # contract's code\n\u2502   \u2514\u2500\u2500 contract.ts\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 package.json    # package manager\n\u2514\u2500\u2500 tsconfig.json\n```\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n  cargo near new <project_name>\n```\n\n![img](@site/static/docs/hello-near-rs.gif)\n_Creating a project using `cargo near new`_\n\nThis will generate a project with the following structure:\n\n```bash\n\u251c\u2500\u2500 src        # contract's code\n\u2502   \u2514\u2500\u2500 lib.rs \n\u251c\u2500\u2500 tests      # sandbox testing\n\u2502   \u2514\u2500\u2500 test_basics.rs \n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n</TabItem>\n\n</Tabs>\n\n\n---\n\n## The Contract\n\nThe `Hello World` smart contract stores a greeting on its state, and exposes two functions to interact with it:\n1. `set_greeting`: to change the greeting\n2.", "mimetype": "text/plain", "start_char_idx": 2358, "end_char_idx": 3589, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97bbf3de-0f0e-459a-86c3-8cfbdb560e23": {"__data__": {"id_": "97bbf3de-0f0e-459a-86c3-8cfbdb560e23", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d668064-d797-4070-935d-cfb37db6ede6", "node_type": "1", "metadata": {}, "hash": "74535326e49f2b728d6cd4ce71e42ad84a86a245e7fdf648b26a4505af8b0adf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96325d19-f025-4b32-815a-5a923e46dc67", "node_type": "1", "metadata": {}, "hash": "3ebf4ec2342c868def93a3b070a7edc3da978414b62171a0ca822daaffc58f72", "class_name": "RelatedNodeInfo"}}, "text": "`get_greeting`: to fetch the greeting \n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    <Github fname=\"index.js\" language=\"js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-ts/src/contract.ts\"\n            start=\"4\" end=\"18\" />\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n    <Github fname=\"lib.rs\" language=\"rust\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/contract-rs/src/lib.rs\"\n            start=\"4\" end=\"32\" />\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\n\nAfter finishing this tutorial, check our [contract's anatomy](./anatomy/anatomy.md) page to learn more about the contract's structure\n\n:::\n\n---\n\n## Test the Contract\n\nBuilding and testing the contract is as simple as running the `test` command. The contract will be compiled and the tests will be executed.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    ```bash\n    npm run test\n    ````\n\n    <details>\n    <summary> Failing tests? </summary>\n\n    Make sure that you are using `node v18`, `v20` or `v22`. You can always use: `nvm use 18` to switch to `node v20`\n\n    </details>\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n  ```bash\n  cargo test\n  ```\n\n  </TabItem>\n\n</Tabs>\n\nIn the background, these commands are calling the build tools for each language and using a [Sandbox](./testing/integration-test.md) to test the contract.\n\n:::tip Sandbox\nTesting the contracts within a Sandbox allows you to understand how the contract will behave once deployed to the network while having total control over the testing environment.\n:::\n\n---\n\n## Create a Testnet Account\n\nNow that you know the contract is passing the tests, let's create a `testnet` account in which to deploy the contract. [`near-cli`](../../4.tools/cli.md) supports two versions of some commands - full and short one.", "mimetype": "text/plain", "start_char_idx": 3590, "end_char_idx": 5476, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96325d19-f025-4b32-815a-5a923e46dc67": {"__data__": {"id_": "96325d19-f025-4b32-815a-5a923e46dc67", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97bbf3de-0f0e-459a-86c3-8cfbdb560e23", "node_type": "1", "metadata": {}, "hash": "2ee3e1c2c9c43a88f07310ae15aa3380ed979c55d0ce3e345691bc5671061656", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b9853aae-2f7d-483a-b91d-74a895edcf31", "node_type": "1", "metadata": {}, "hash": "b4a46768f58c3f91325553d381f5e13b3e95569263381c0ba839be6cba5f45cf", "class_name": "RelatedNodeInfo"}}, "text": "It's up to you which format you prefer, but full version provides more features.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n    ```bash\n    # Replace <your-account-id.testnet> with a custom name\n    near create-account <your-account-id.testnet> --useFaucet\n    ```\n\n    <details>\n    <summary> Example Result </summary>\n\n    ```bash\n    $> near create-account lovely-event.testnet --useFaucet\n    # New account \"lovely-event.testnet\" created successfully\n    ```\n\n    </details>\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    # Replace <your-account-id.testnet> with a custom name\n    near account create-account sponsor-by-faucet-service <your-account-id.testnet> autogenerate-new-keypair save-to-keychain network-config testnet create\n    ````\n\n    <details>\n    <summary> Example Result </summary>\n\n    ```bash\n    $> near account create-account sponsor-by-faucet-service lovely-event.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n\n    # New account \"lovely-event.testnet\" created successfully\n    ```\n\n    </details>\n\n  </TabItem>\n\n</Tabs>\n\n\n:::tip\n\nRemember that you can create a named account through any wallet (i.e. [MyNearWallet](https://testnet.mynearwallet.com)) and then use it from the `near-cli` by invoking `near login`.\n\n:::\n\n---\n\n## Build the Contract\n\nWhen you are ready to create a build of the contract run a one-line command depending on your environment.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  ```bash\n  npm run build\n  ```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n  ```bash\n  cargo near build\n  ```\n\n  :::tip\n\n  You can also build the contract with `cargo build --release`.", "mimetype": "text/plain", "start_char_idx": 5477, "end_char_idx": 7204, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b9853aae-2f7d-483a-b91d-74a895edcf31": {"__data__": {"id_": "b9853aae-2f7d-483a-b91d-74a895edcf31", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96325d19-f025-4b32-815a-5a923e46dc67", "node_type": "1", "metadata": {}, "hash": "3ebf4ec2342c868def93a3b070a7edc3da978414b62171a0ca822daaffc58f72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e726651-7774-4e43-8276-e24244d023f1", "node_type": "1", "metadata": {}, "hash": "53a392cf088e5201568dd383fd989c0ea2cd90a0907821bc11815af32b3446dc", "class_name": "RelatedNodeInfo"}}, "text": "This will compile the contract, but without metadata or the Contract Application Binary Interface (ABI)\n\n  :::\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Deploy the Contract\n\nHaving our account created, we can now deploy the contract:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near deploy <created-account> build/release/hello.wasm\n  ```\n\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract deploy <created-account> use-file ./target/wasm32-unknown-unknown/release/hello.wasm without-init-call network-config testnet sign-with-keychain send\n  ```\n\n  :::tip\n  You can also build the contract with `cargo build --release`. This will compile the contract, but without metadata or the Contract Application Binary Interface (ABI)\n  :::\n\n  </TabItem>\n\n</Tabs>\n\n**Congrats**! your contract now lives in the NEAR testnet network.\n\n---\n\n## Interacting with the Contract\n\nTo interact with your deployed smart contract, you can call its functions through the command line.\n\n<hr class=\"subsection\" />\n\n#### Get Greeting\n\nThe `get_greeting` function only reads from the contract's state, and can thus be called for **free**.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n    ```bash\n    > near view <created-account> get_greeting\n    # \"Hello\"\n    ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    > near contract call-function as-read-only <created-account> get_greeting json-args {} network-config testnet now\n    # \"Hello\"\n    ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Set Greeting\n\nThe `set_greeting` method writes on the contract's [storage](./anatomy/storage.md), and thus requires a user to sign a transaction in order to be executed.", "mimetype": "text/plain", "start_char_idx": 7205, "end_char_idx": 8948, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e726651-7774-4e43-8276-e24244d023f1": {"__data__": {"id_": "3e726651-7774-4e43-8276-e24244d023f1", "embedding": null, "metadata": {"file_path": "./near_dist/quickstart.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78", "node_type": "4", "metadata": {}, "hash": "f81626feecadb21d2f92888f65d15e64726234e5db5e373f1d1647d4e09b59c7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9853aae-2f7d-483a-b91d-74a895edcf31", "node_type": "1", "metadata": {}, "hash": "b4a46768f58c3f91325553d381f5e13b3e95569263381c0ba839be6cba5f45cf", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  > near call <created-account> set_greeting '{\"greeting\": \"Hola\"}' --accountId <created-account>\n  # Log: Saving greeting \"Hola\"\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    > near contract call-function as-transaction <created-account> set_greeting json-args '{\"greeting\": \"Hola\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as <created-account> network-config testnet sign-with-keychain send\n    #Log: Saving greeting \"Hola\"\n    ```\n  </TabItem>\n</Tabs>\n\n:::tip\n\nNotice that we are signing the transaction using `<created-account>`, so in this case, we are asking the contract's account to call its own function\n\n:::\n\n\n---\n\n## Moving Forward\n\nThat's it for the quickstart tutorial. You have now seen a fully functional contract with a minimal user interface and testing.\n\nTo better understand the contract's structure, check our [contract's anatomy](./anatomy/anatomy.md) page.\n\nIf you prefer to see more examples, check our [examples](/tutorials/examples/count-near) page.\n\nDo not hesitate to reach out on [Discord](https://near.chat) with any questions you have. We regularly host Office Hours, in which you can join our voice channel and ask questions.\n\nHappy coding! \ud83d\ude80\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n- near-cli-rs: `0.8.1`\n- cargo-near: `0.6.1`\n\n:::", "mimetype": "text/plain", "start_char_idx": 8950, "end_char_idx": 10468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "06b6cc14-609e-4a67-8f75-c8b50dca54a4": {"__data__": {"id_": "06b6cc14-609e-4a67-8f75-c8b50dca54a4", "embedding": null, "metadata": {"file_path": "./near_dist/update.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a3fbdbe7-f7f6-479b-9c06-1af0142e0662", "node_type": "4", "metadata": {}, "hash": "dda2080c7acfa94dfcbf86c6ec93fbfe4efba1fefdc9589519a1f574521f8f12", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7a0b69da-9bec-43e0-9824-b624997bb73a", "node_type": "1", "metadata": {}, "hash": "aa8cdf3ad94698dc01deca2feedd6f693737fe0f338a83ac8b94c1005004d54e", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: update-contract-migrate-state\ntitle: Self Upgrade & State Migration\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThree examples on how to handle updates and [state migration](../../2.build/2.smart-contracts/release/upgrade.md):\n1. [State Migration](https://github.com/near-examples/update-migrate-rust/tree/main/basic-updates): How to implement a `migrate` method to migrate state between contract updates.\n2. [State Versioning](https://github.com/near-examples/update-migrate-rust/tree/main/enum-updates): How to use readily use versioning on a state, to simplify updating it later.\n3. [Self Update](https://github.com/near-examples/update-migrate-rust/tree/main/self-updates): How to implement a contract that can update itself.\n\n---\n\n## State Migration\nThe [State Migration example](https://github.com/near-examples/update-migrate-rust/tree/main/basic-updates) shows how to handle state-breaking changes\nbetween contract updates.\n\nIt is composed by 2 contracts:\n1. Base: A Guest Book where people can write messages.\n2. Update: An update in which we remove a parameter and change the internal structure.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"migrate.rs\"\n            url=\"https://github.com/near-examples/update-migrate-rust/blob/main/basic-updates/update/src/migrate.rs\"\n            start=\"18\" end=\"45\" />\n  </Language>\n</CodeTabs>\n\n#### The Migration Method\nThe migration method deserializes the current state (`OldState`) and iterates through the messages, updating them\nto the new `PostedMessage` that includes the `payment` field.\n\n:::tip\nNotice that migrate is actually an [initialization method](../../2.build/2.smart-contracts/anatomy/anatomy.md#initialization-method) that ignores the existing state (`[#init(ignore_state)]`), thus being able to execute and rewrite the state.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1933, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7a0b69da-9bec-43e0-9824-b624997bb73a": {"__data__": {"id_": "7a0b69da-9bec-43e0-9824-b624997bb73a", "embedding": null, "metadata": {"file_path": "./near_dist/update.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a3fbdbe7-f7f6-479b-9c06-1af0142e0662", "node_type": "4", "metadata": {}, "hash": "dda2080c7acfa94dfcbf86c6ec93fbfe4efba1fefdc9589519a1f574521f8f12", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "06b6cc14-609e-4a67-8f75-c8b50dca54a4", "node_type": "1", "metadata": {}, "hash": "b5db8667946346b4b1984b2b9f4ceea7a4be3aac14156ea7f106ce637db600b1", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## State Versioning\nThe [State Versioning example](https://github.com/near-examples/update-migrate-rust/tree/main/enum-updates) shows how to use\n[Enums](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html) to implement state versioning on a contract.\n\nVersioning simplifies updating the contract since you only need to add a new version of the structure.\nAll versions can coexist, thus you will not need to change previously existing structures. \n\nThe example is composed by 2 contracts:\n1. Base: The Guest Book contract using versioned `PostedMessages` (`PostedMessagesV1`).\n2. Update: An update that adds a new version of `PostedMessages` (`PostedMessagesV2`).\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"versioned_msg.rs\"\n            url=\"https://github.com/near-examples/update-migrate-rust/blob/main/enum-updates/update/src/versioned_msg.rs\"\n            start=\"18\" end=\"36\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## Self Update\nThe [Self Update example](https://github.com/near-examples/update-migrate-rust/tree/main/self-updates) shows how to implement a contract\nthat can update itself.\n\nIt is composed by 2 contracts:\n1. Base: A Guest Book were people can write messages, implementing a `update_contract` method.\n2. Update: An update in which we remove a parameter and change the internal structure.\n\n<CodeTabs>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"update.rs\"\n            url=\"https://github.com/near-examples/update-migrate-rust/blob/main/self-updates/base/src/update.rs\"\n            start=\"10\" end=\"31\" />\n  </Language>\n</CodeTabs>", "mimetype": "text/plain", "start_char_idx": 1934, "end_char_idx": 3543, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2977b61-8383-474e-af9d-d67a317b1932": {"__data__": {"id_": "c2977b61-8383-474e-af9d-d67a317b1932", "embedding": null, "metadata": {"file_path": "./near_dist/notifications.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9", "node_type": "4", "metadata": {}, "hash": "5a3c56901a4c346a883c6cafc22b7a55fa1e863d57058da15bce91255d96f15b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b1adb98-8d36-4545-afc6-1d43c01459ee", "node_type": "1", "metadata": {}, "hash": "13003c6939f1e58a7503f2419d66be380304efeff3bda49dfac8632664496040", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: notifications\ntitle: Social Notifications\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nApplications such as [NEAR Social](https://near.social) and the [NEAR Dev Portal](https://dev.near.org/) allow components to send notifications to their users.\n\nNotifications are great to inform users in real time that something has happened, and can be [easily incorporated into any web app](../../../3.tutorials/near-components/push-notifications.md).\n\n---\n\n## Sending Notifications \n\nNotifications are implemented as a particular case of [indexed actions](./social.md#socialindex).\n\nThis means that to send a notification we just need to `index` the `notify` action for the indexer, with a `key` and a `value`.\n\n- The `key` tells **which account** to notify.\n- The `value` includes the [notification type](#notification-types) and the item being notified of.\n\n<WidgetEditor>\n\n```js\nconst notifyMe = () => {\n  Social.set({\n    index: {\n      notify: JSON.stringify({\n        key: context.accountId,\n        value: \"docs notification\"\n      })\n    }\n  });\n}\n\nreturn <>\n  {context.accountId?\n  <button onClick={notifyMe}> Get Notification </button>\n  :\n  <p> Please login to be notified</p>\n  }\n</>\n```\n\n</WidgetEditor>\n\n\nIn this example, the account executing the code is notifying `mob.near` that they liked their social post created at the block height `102169725`.\n\n---\n\n## Notification Types\n\nSince notifications are indexed actions, anyone can create their own kind of notification.\n\nWhile there is no standard for notifications, we recommend using the following types:\n\n<Tabs>\n  <TabItem value=\"Custom\" default>\n\n```js\n  Social.set({\n    index: JSON.stringify({\n      notify: {\n        key: \"mob.near\",\n        value: {\n          type: \"custom\",\n          message: \"A message in the notification\",\n          widget: \"The widget to open when clicking on the notification\",\n          params: { parameters: \"to pass to the widget\", . },\n        },\n      }\n    })\n  });\n```\n\n**Note**: currently, only dev.near.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b1adb98-8d36-4545-afc6-1d43c01459ee": {"__data__": {"id_": "3b1adb98-8d36-4545-afc6-1d43c01459ee", "embedding": null, "metadata": {"file_path": "./near_dist/notifications.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9", "node_type": "4", "metadata": {}, "hash": "5a3c56901a4c346a883c6cafc22b7a55fa1e863d57058da15bce91255d96f15b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2977b61-8383-474e-af9d-d67a317b1932", "node_type": "1", "metadata": {}, "hash": "4bf6b412bbd02349b4ba820974ece95f92e9e3d8106f719edc8e4d317a911dae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c0126df7-1d96-49a2-ac02-d0f1bbad6cb2", "node_type": "1", "metadata": {}, "hash": "d6c96c0ef0116545ac18ca8f2d0c1a142f642809bf6d4dccf1d88c1583bf7fa7", "class_name": "RelatedNodeInfo"}}, "text": "org implements custom notifications\n\n</TabItem>\n\n<TabItem value=\"Like\">\n\n```js\n  Social.set({\n    index: JSON.stringify({\n      notify: {\n        key: \"mob.near\",\n        value: {\n          type: \"like\",\n          item: {\n            type: \"social\",\n            path: \"mob.near/post/main\",\n            blockHeight: 102169725\n          }\n        }\n      }\n    })\n  })\n```\n\n**Reference**: [LikeButton](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/LikeButton&tab=source)\n\n</TabItem>\n\n<TabItem value=\"Comment\">\n\n```js\n  Social.set({\n    index: JSON.stringify({\n      notify: {\n        key: \"nearhacks.near\",\n        value: {\n          type: \"comment\",\n          item: {\n            type: \"social\",\n            path: \"nearhacks.near/post/main\",\n            blockHeight: 102224773\n          }\n        }\n      }\n    })\n  })\n```\n\n**Reference**: [CommentButton](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/Comments.Compose&tab=source)\n\n</TabItem>\n\n<TabItem value=\"Follow\">\n\n```js\n  Social.set({\n    index: JSON.stringify({\n      notify: {\n        key: \"mob.near\",\n        value: {\n          type: \"follow\",\n        }\n      }\n    })\n  })\n```\n\n**Reference**: [FollowButton](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/FollowButton&tab=source)\n\n</TabItem>\n\n</Tabs>\n\n:::caution\nThere is no standard for notifications, but you can contribute to create one [in this public discussion](https://github.com/NearSocial/standards/pull/19/files).\n:::\n\n---\n\n## Parsing Notifications\n\nIn order to get all notifications for an user, we make a call to the Social indexer.", "mimetype": "text/plain", "start_char_idx": 2104, "end_char_idx": 3715, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0126df7-1d96-49a2-ac02-d0f1bbad6cb2": {"__data__": {"id_": "c0126df7-1d96-49a2-ac02-d0f1bbad6cb2", "embedding": null, "metadata": {"file_path": "./near_dist/notifications.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9", "node_type": "4", "metadata": {}, "hash": "5a3c56901a4c346a883c6cafc22b7a55fa1e863d57058da15bce91255d96f15b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b1adb98-8d36-4545-afc6-1d43c01459ee", "node_type": "1", "metadata": {}, "hash": "13003c6939f1e58a7503f2419d66be380304efeff3bda49dfac8632664496040", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor id='1' height=\"190px\">\n\n```js\n// login to see your notifications\nconst accountId = context.accountId || 'influencer.testnet'\n\nconst index = Social.index(\"notify\", accountId, {limit: 2, order: \"desc\", subscribe: true});\n\nreturn <>\n  <h4> Notifications for {accountId} </h4>\n  {index.map(e => <> {JSON.stringify(e, null, 2)} <br/></>) }\n</>\n```\n\n</WidgetEditor>\n\n:::caution\nPlease notice that anyone can create a notification for the user, and thus some form of filtering might be needed.\n:::\n\n:::tip\nYou can also check how the [Notifications Page](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/NotificationsPage&tab=source) is implemented.\n:::", "mimetype": "text/plain", "start_char_idx": 3717, "end_char_idx": 4393, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "db764be4-5fd7-47d1-b8e3-6f4e2a6e8a56": {"__data__": {"id_": "db764be4-5fd7-47d1-b8e3-6f4e2a6e8a56", "embedding": null, "metadata": {"file_path": "./near_dist/naj-wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fdfd6610-e999-41d7-b705-955b70dd7c93", "node_type": "4", "metadata": {}, "hash": "fb9678770574cd57c6926a189151d04544353a1d89465da60b78413786ba9017", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d4efaf7c-8087-4e48-b490-51eeaaf48117", "node_type": "1", "metadata": {}, "hash": "27e59b858b0b9d1476e09ad6df290d6f30e91fb6c46a89ed97d59ac4b8c78092", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: wallet\ntitle: Interacting with the Wallet\nsidebar_label: Wallet\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nWallet interaction is possible only in the browser, because NEAR's Wallet is web-based.\n\nMost frequent action is Sign In. Your user is redirected to the Wallet page to authorize your application.\nOnce the user has Signed In, an access key is saved in browser's LocalStorage.\nAll following actions that require the access key will be allowed.\nIn case a user needs to authorize a transaction that has a deposit attached, your user will be automatically redirected to the Wallet again.\n\n### Creating Wallet Connection {#wallet-connection}\n\nIn Wallet connection you use a LocalStorage [`KeyStore`](/tools/near-api-js/quick-reference#key-store).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 788, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d4efaf7c-8087-4e48-b490-51eeaaf48117": {"__data__": {"id_": "d4efaf7c-8087-4e48-b490-51eeaaf48117", "embedding": null, "metadata": {"file_path": "./near_dist/naj-wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fdfd6610-e999-41d7-b705-955b70dd7c93", "node_type": "4", "metadata": {}, "hash": "fb9678770574cd57c6926a189151d04544353a1d89465da60b78413786ba9017", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "db764be4-5fd7-47d1-b8e3-6f4e2a6e8a56", "node_type": "1", "metadata": {}, "hash": "100e8df980d085d3b036cf713899d942d9e5d01dd6b59a344926e25e9208e885", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27aa804b-b7f3-4fc3-9efc-85716dae04b1", "node_type": "1", "metadata": {}, "hash": "836151cfaf5ff091c1f5fb0a018667290a52faec4db94110f7ec0f1756be57b5", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"testnet\" label=\"TestNet\" default>\n\n```js\nconst { connect, keyStores, WalletConnection } = nearAPI;\n\nconst connectionConfig = {\n  networkId: \"testnet\",\n  keyStore: new keyStores.BrowserLocalStorageKeyStore(),\n  nodeUrl: \"https://rpc.testnet.near.org\",\n  walletUrl: \"https://testnet.mynearwallet.com/\",\n  helperUrl: \"https://helper.testnet.near.org\",\n  explorerUrl: \"https://testnet.nearblocks.io\",\n};\n\n// connect to NEAR\nconst nearConnection = await connect(connectionConfig);\n\n// create wallet connection\nconst walletConnection = new WalletConnection(nearConnection);\n```\n\n</TabItem>\n<TabItem value=\"mainnet\" label=\"MainNet\">\n\n```js\nconst { connect, keyStores, WalletConnection } = nearAPI;\n\nconst connectionConfig = {\n  networkId: \"mainnet\",\n  keyStore: new keyStores.BrowserLocalStorageKeyStore(),\n  nodeUrl: \"https://rpc.mainnet.near.org\",\n  walletUrl: \"https://wallet.mainnet.near.org\",\n  helperUrl: \"https://helper.mainnet.near.org\",\n  explorerUrl: \"https://nearblocks.io\",\n};\n\n// connect to NEAR\nconst nearConnection = await connect(connectionConfig);\n\n// create wallet connection\nconst walletConnection = new WalletConnection(nearConnection);\n```\n\n</TabItem>\n\n</Tabs>\n\n[<span className=\"typedoc-icon typedoc-icon-module\"></span> Module `browserConnect`](https://near.github.io/near-api-js/modules/near_api_js.browserConnect.html)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `WalletConnection`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html)\n\n### Ask your user to Sign In {#sign-in}\n\nYou first create a [WalletConnection](#wallet-connection), and then call `requestSignIn`.\nThis will redirect the current page to the Wallet authentication page.\nYou can configure success and failure redirect URLs.\n\nThis action creates an access key that will be stored in the browser's local storage.\nYou can optionally list `methodNames` you want to allow for the access key.", "mimetype": "text/plain", "start_char_idx": 790, "end_char_idx": 2776, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "27aa804b-b7f3-4fc3-9efc-85716dae04b1": {"__data__": {"id_": "27aa804b-b7f3-4fc3-9efc-85716dae04b1", "embedding": null, "metadata": {"file_path": "./near_dist/naj-wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fdfd6610-e999-41d7-b705-955b70dd7c93", "node_type": "4", "metadata": {}, "hash": "fb9678770574cd57c6926a189151d04544353a1d89465da60b78413786ba9017", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d4efaf7c-8087-4e48-b490-51eeaaf48117", "node_type": "1", "metadata": {}, "hash": "27e59b858b0b9d1476e09ad6df290d6f30e91fb6c46a89ed97d59ac4b8c78092", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "df5c4245-1232-4370-9a5a-5966cd31074f", "node_type": "1", "metadata": {}, "hash": "64b82fa05ff83f2e1fa7678f6c87f2b5d198c1db5d7448f0004bea12168ac853", "class_name": "RelatedNodeInfo"}}, "text": "If you don't specify `methodNames` or pass an empty array, then all methods are allowed to be called (the access key will be created with permissions to call all methods).\n\n```js\n// const walletConnection = new WalletConnection(nearConnection);\nwalletConnection.requestSignIn({\n  contractId: \"example-contract.testnet.REPLACE_ME\",\n  methodNames: [], // optional\n  successUrl: \"REPLACE_ME://.com/success\", // optional redirect URL on success\n  failureUrl: \"REPLACE_ME://.com/failure\", // optional redirect URL on failure\n});\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `WalletConnection.requestSignIn`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html#requestSignIn)\n\n:::tip\nSign In is **_not required_** if you are using an alternative key store to local storage, or you are not signing transactions (meaning - you are only calling read-only _view_ methods on a contract)\n:::\n\n### Sign Out your user {#sign-out}\n\n```js\n// const walletConnection = new WalletConnection(nearConnection);\nwalletConnection.signOut();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `WalletConnection.signOut`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html#signOut)\n\n### Check if Signed In {#check-if-signed-in}\n\n```js\n// const walletConnection = new WalletConnection(nearConnection);\nif (walletConnection.isSignedIn()) {\n  // user is signed in\n}\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `WalletConnection.isSignedId`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html#isSignedIn)\n\n### Get Wallet Account {#get-authorized-account}\n\nGet the [Account](naj-account.md) your user has signed in with in the Wallet.", "mimetype": "text/plain", "start_char_idx": 2777, "end_char_idx": 4611, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "df5c4245-1232-4370-9a5a-5966cd31074f": {"__data__": {"id_": "df5c4245-1232-4370-9a5a-5966cd31074f", "embedding": null, "metadata": {"file_path": "./near_dist/naj-wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fdfd6610-e999-41d7-b705-955b70dd7c93", "node_type": "4", "metadata": {}, "hash": "fb9678770574cd57c6926a189151d04544353a1d89465da60b78413786ba9017", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "27aa804b-b7f3-4fc3-9efc-85716dae04b1", "node_type": "1", "metadata": {}, "hash": "836151cfaf5ff091c1f5fb0a018667290a52faec4db94110f7ec0f1756be57b5", "class_name": "RelatedNodeInfo"}}, "text": "#### Get Account ID (as string) {#get-authorized-account-id}\n\n```js\n// const walletConnection = new WalletConnection(nearConnection);\nconst walletAccountId = walletConnection.getAccountId();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `WalletConnection.getAccountId`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html#getAccountId)\n\n#### Get Account Object {#get-authorized-account-object}\n\n```js\n// const walletConnection = new WalletConnection(nearConnection);\nconst walletAccountObj = walletConnection.account();\n```\n\n[<span className=\"typedoc-icon typedoc-icon-method\"></span> Method `WalletConnection.account`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.WalletConnection.html#account)\n&nbsp;&nbsp;&nbsp;\n[<span className=\"typedoc-icon typedoc-icon-class\"></span> Class `ConnectedWalletAccount`](https://near.github.io/near-api-js/classes/_near_js_wallet_account.walletAccount.ConnectedWalletAccount.html)", "mimetype": "text/plain", "start_char_idx": 4613, "end_char_idx": 5641, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7af0a191-06d0-49c8-8644-a18f5dd3c10f": {"__data__": {"id_": "7af0a191-06d0-49c8-8644-a18f5dd3c10f", "embedding": null, "metadata": {"file_path": "./near_dist/coin-flip.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27", "node_type": "4", "metadata": {}, "hash": "4d754b0e4716b84f4205036d3a47f86d423613d4ab357864188993892dfd10e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d070f11c-1b55-4c93-b04d-cebe6708a026", "node_type": "1", "metadata": {}, "hash": "48cbaa7e753e5baf7759c405320402b7bae5343484b4066713ec66f979d1611b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: coin-flip\ntitle: Coin Flip\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nCoin Flip is a game where the player tries to guess the outcome of a coin flip. It is one of the simplest contracts implementing random numbers.\n\n![img](/docs/assets/examples/coin-flip.png)\n\n---\n\n## Starting the Game\nYou have two options to start the example:\n1. **Recommended:** use the app through Gitpod (a web-based interactive environment)\n2. Clone the project locally.\n\n| Gitpod                                                                                                                                                            | Clone locally                                          |\n| ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------------------------------------  |\n| <a href=\"https://gitpod.io/#https://github.com/near-examples/coin-flip-examples.git\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https://gitpod.io/button/open-in-gitpod.svg\" alt=\"Open in Gitpod\" /></a> | `https://github.com/near-examples/coin-flip-examples.git` |\n\n\nIf you choose Gitpod, a new browser window will open automatically with the code. Give it a minute, and the front-end will pop up (ensure the pop-up window is not blocked).\n\nIf you are running the app locally, you should build and deploy a contract (JavaScript or Rust version) and a client manually.\n\n---\n\n## Interacting With the Counter\nGo ahead and log in with your NEAR account. If you don't have one, you can create one on the fly. Once logged in, use the `tails` and `heads` buttons to try to guess the next coin flip outcome.\n\n![img](/docs/assets/examples/coin-flip.png)\n*Frontend of the Game*\n\n---\n\n## Structure of a dApp\n\nNow that you understand what the dApp does, let us take a closer look to its structure:\n\n1. The frontend code lives in the `/frontend` folder.\n2. The smart contract code in Rust is in the `/contract-rs` folder.\n3. The smart contract code in JavaScript is in the `/contract-ts` folder.\n\n:::note\nBoth Rust and JavaScript versions of the contract implement the same functionality.\n:::\n\n### Contract\nThe contract presents 2 methods: `flip_coin`, and `points_of`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2370, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d070f11c-1b55-4c93-b04d-cebe6708a026": {"__data__": {"id_": "d070f11c-1b55-4c93-b04d-cebe6708a026", "embedding": null, "metadata": {"file_path": "./near_dist/coin-flip.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27", "node_type": "4", "metadata": {}, "hash": "4d754b0e4716b84f4205036d3a47f86d423613d4ab357864188993892dfd10e9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7af0a191-06d0-49c8-8644-a18f5dd3c10f", "node_type": "1", "metadata": {}, "hash": "33c44a181c7c2dee7d620df55ef770687b2067a97331b3a48103b4347e44fea1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af08e70d-2e19-463a-82fc-4be3e9a56334", "node_type": "1", "metadata": {}, "hash": "9c71986dabc3e099a4bef4416753dbdfa17d38a76c9bd87a0a3b7640c895a46e", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\" \n            url=\"https://github.com/near-examples/coin-flip-examples/blob/main/contract-ts/src/contract.ts\"\n            start=\"23\" end=\"56\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\" \n            url=\"https://github.com/near-examples/coin-flip-examples/blob/main/contract-rs/src/lib.rs\"\n            start=\"46\" end=\"70\" />\n  </Language>\n</CodeTabs>\n\n### Running the Frontend\n\nTo start the frontend you will need to install the dependencies and start the server.\n\n```bash\ncd frontend\nyarn\nyarn dev\n```\n\n<hr class=\"subsection\" />\n\n### Understanding the Frontend\n\nThe frontend is a [Next.JS](https://nextjs.org/) project generated by [create-near-app](https://github.com/near/create-near-app). Check `_app.js` and `index.js` to understand how components are displayed and interacting with the contract.\n\n<Language value=\"js\" language=\"js\">\n  <Github fname=\"_app.js\"\n          url=\"https://github.com/near-examples/coin-flip-workshop-js/blob/main/frontend/src/pages/_app.js\"/>\n  <Github fname=\"index.js\"\n          url=\"https://github.com/near-examples/coin-flip-workshop-js/blob/main/frontend/src/pages/index.js\"/>                        \n</Language>\n\n---\n\n## Testing\n\nWhen writing smart contracts, it is very important to test all methods exhaustively. In this\nproject you have integration tests. Before digging into them, go ahead and perform the tests present in the dApp through the command `yarn test` for the JavaScript version, or `./test.sh` for the Rust version.\n\n### Integration test\n\nIntegration tests can be written in both Rust and JavaScript. They automatically deploy a new\ncontract and execute methods on it. In this way, integration tests simulate interactions\nfrom users in a realistic scenario. You will find the integration tests for the `coin-flip`\nin `contract-ts/sandbox-ts` (for the JavaScript contract) and `contract-rs/tests` (for the Rust contract).", "mimetype": "text/plain", "start_char_idx": 2372, "end_char_idx": 4368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af08e70d-2e19-463a-82fc-4be3e9a56334": {"__data__": {"id_": "af08e70d-2e19-463a-82fc-4be3e9a56334", "embedding": null, "metadata": {"file_path": "./near_dist/coin-flip.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27", "node_type": "4", "metadata": {}, "hash": "4d754b0e4716b84f4205036d3a47f86d423613d4ab357864188993892dfd10e9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d070f11c-1b55-4c93-b04d-cebe6708a026", "node_type": "1", "metadata": {}, "hash": "48cbaa7e753e5baf7759c405320402b7bae5343484b4066713ec66f979d1611b", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"main.test.js\"\n            url=\"https://github.com/near-examples/coin-flip-examples/blob/main/contract-ts/sandbox-test/main.ava.js\"\n            start=\"32\" end=\"57\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\" \n            url=\"https://github.com/near-examples/coin-flip-examples/blob/main/contract-rs/tests/tests.rs\"\n            start=\"25\" end=\"82\" />\n  </Language>\n</CodeTabs>\n\n---\n\n## A Note On Randomness\n\nRandomness in the blockchain is a complex subject. We recommend you to read and investigate about it.\nYou can start with our [security page on it](../../2.build/2.smart-contracts/security/random.md).\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 4370, "end_char_idx": 5264, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "854ddee7-7011-476a-accf-5ad04855fc8f": {"__data__": {"id_": "854ddee7-7011-476a-accf-5ad04855fc8f", "embedding": null, "metadata": {"file_path": "./near_dist/02-structs-enums.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a5422d23-3757-4e79-9197-090661ae0b9b", "node_type": "4", "metadata": {}, "hash": "2ff37c2c5115fad178a70e5911056a900f0ff7ab14a41f87060e204657414d6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d404e82-1fd8-41b4-aa3e-0deab0883f9b", "node_type": "1", "metadata": {}, "hash": "0406dae771a1b29dab366305bc83a073c516be5246b44b6ab40f0cdbbd918590", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: \"Using structs and enums\"\ntitle: \"How to think about structs and enums when writing a Rust smart contract on NEAR\"\n---\n\nimport basicCrossword from '/docs/assets/crosswords/basics-crossword.jpg';\nimport enumBox from '/docs/assets/crosswords/enum-a-d-block--eizaconiendo.near--eiza_coniendo.png';\n\n# Structs and enums\n\n## Overview\n\n### Structs\n\nIf you're not familiar with Rust, it may be confusing that there are no classes or inheritance like other programming languages. We'll be exploring how to [use structs](https://doc.rust-lang.org/book/ch05-01-defining-structs.html), which are someone similar to classes, but perhaps simpler.\n\nRemember that there will be only one struct that gets the [`#[near]` macro](../../../2.build/2.smart-contracts/anatomy/anatomy.md) placed on it; our primary struct or singleton if you wish. Oftentimes the primary struct will contain additional structs that may, in turn, contain more structs in a neat and orderly way. You may also have structs that are used to return data to an end user, like a frontend. We'll be covering both of these cases in this chapter.\n\n### Enums\n\nEnums are short for enumerations, and can be particularly useful if you have entities in your smart contract that transition to different states. For example, say you have a series of blockchain games where players can join, battle, and win. There might be an enumeration for  `AcceptingPlayers`, `GameInProgress`, and `GameCompleted`. Enums are also used to define discrete types of concept, like months in a year.\n\nFor our crossword puzzle, one example of an enum is the direction of the clue: either across (A) or down (D) as illustrated below. These are the only two options.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1727, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d404e82-1fd8-41b4-aa3e-0deab0883f9b": {"__data__": {"id_": "9d404e82-1fd8-41b4-aa3e-0deab0883f9b", "embedding": null, "metadata": {"file_path": "./near_dist/02-structs-enums.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a5422d23-3757-4e79-9197-090661ae0b9b", "node_type": "4", "metadata": {}, "hash": "2ff37c2c5115fad178a70e5911056a900f0ff7ab14a41f87060e204657414d6d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "854ddee7-7011-476a-accf-5ad04855fc8f", "node_type": "1", "metadata": {}, "hash": "bf0b8e9e6b23d252b61a8d69011e56ae97541003b13b7112b045c0810b82cefd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0659dae3-4c5a-4997-a22b-3b436cdcd312", "node_type": "1", "metadata": {}, "hash": "6c79a345735baf2eb9a9a60f280faa479db58a4561e7b1992335a508b1c8ead8", "class_name": "RelatedNodeInfo"}}, "text": "<figure>\n    <img src={enumBox} alt=\"Children's toy of a box that has blocks that only fit certain shapes, resembling the letters A and D. Art created by eizaconiendo.near\" width=\"600\"/>\n    <figcaption>Art by <a href=\"https://twitter.com/eiza_coniendo\" target=\"_blank\" rel=\"noopener noreferrer\">eizaconiendo.near</a></figcaption>\n</figure>\n<br/>\n\nRust has an interesting feature where enums can contain additional data. You can see [examples of that here](https://doc.rust-lang.org/rust-by-example/custom_types/enum.html).\n\n## Using structs\n\n### Storing contract state\n\nWe're going to introduce several structs all at once. These structs are addressing a need from the previous chapter, where the puzzle itself was hardcoded and looked like this:\n\n<img src={basicCrossword} alt=\"Basic crossword puzzle from chapter 1\" width=\"600\" />\n\nIn this chapter, we want the ability to add multiple, custom crossword puzzles. This means we'll be storing information about the clues in the contract state. Think of a grid where there are x and y coordinates for where a clue starts. We'll also want to specify:\n\n1. Clue number\n2. Whether it's **across** or **down**\n3. The length, or number of letters in the answer\n\nLet's dive right in, starting with our primary struct:\n\n```rust\n#[near(contract_state)]\n#[derive(PanicOnDefault)]\npub struct Crossword {\n    puzzles: LookupMap<String, Puzzle>,  // \u27f5 Puzzle is a struct we're defining\n    unsolved_puzzles: UnorderedSet<String>,\n}\n```\n\n:::note Let's ignore a couple of things\u2026\nFor now, let's ignore the macros about the structs that begin with `derive` and `near`.\n:::\n\nLook at the fields inside the `Crossword` struct above, and you'll see a couple types.", "mimetype": "text/plain", "start_char_idx": 1729, "end_char_idx": 3422, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0659dae3-4c5a-4997-a22b-3b436cdcd312": {"__data__": {"id_": "0659dae3-4c5a-4997-a22b-3b436cdcd312", "embedding": null, "metadata": {"file_path": "./near_dist/02-structs-enums.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a5422d23-3757-4e79-9197-090661ae0b9b", "node_type": "4", "metadata": {}, "hash": "2ff37c2c5115fad178a70e5911056a900f0ff7ab14a41f87060e204657414d6d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d404e82-1fd8-41b4-aa3e-0deab0883f9b", "node_type": "1", "metadata": {}, "hash": "0406dae771a1b29dab366305bc83a073c516be5246b44b6ab40f0cdbbd918590", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e18c85d3-8e44-4126-85ab-f4558a756c24", "node_type": "1", "metadata": {}, "hash": "cd2fe9c728716afba804e63ba893207391e12737912b614bf660f7fdd1ec67ff", "class_name": "RelatedNodeInfo"}}, "text": "`String` is a part of Rust's standard library, but `Puzzle` is something we've created:\n\n```rust\n#[near(serializers = [borsh])]\n#[derive(Debug)]\npub struct Puzzle {\n    status: PuzzleStatus,  // \u27f5 An enum we'll get to soon\n    /// Use the CoordinatePair assuming the origin is (0, 0) in the top left side of the puzzle.\n    answer: Vec<Answer>,  // \u27f5 Another struct we've defined\n}\n```\n\nLet's focus on the `answer` field here, which is a vector of `Answer`s. (A vector is nothing fancy, just a bunch of items or a \"growable array\" as described in the [standard Rust documentation](https://doc.rust-lang.org/std/vec/struct.Vec.html).\n\n```rust\n#[near(serializers = [json, borsh])]\n#[derive(Debug)]\npub struct Answer {\n    num: u8,\n    start: CoordinatePair,  // \u27f5 Another struct we've defined\n    direction: AnswerDirection,  // \u27f5 An enum we'll get to soon\n    length: u8,\n    clue: String,\n}\n```\n\nNow let's take a look at the last struct we'e defined, that has cascaded down from fields on our primary struct: the `CoordinatePair`.\n\n```rust\n#[near(serializers = [json, borsh])]\n#[derive(Debug)]\npub struct CoordinatePair {\n    x: u8,\n    y: u8,\n}\n```\n\n:::info Summary of the structs shown\nThere are a handful of structs here, and this will be a typical pattern when we use structs to store contract state.\n\n```\nCrossword \u27f5 primary struct with #[near(contract_state)]\n\u2514\u2500\u2500 Puzzle\n   \u2514\u2500\u2500 Answer\n      \u2514\u2500\u2500 CoordinatePair\n```\n:::\n\n### Returning data\n\nSince we're going to have multiple crossword puzzles that have their own, unique clues and positions in a grid, we'll want to return puzzle objects to a frontend.\n\n:::tip Quick note on return values\nBy default, return values are serialized in JSON unless explicitly directed to use Borsh for binary serialization.\n\nFor example, if we call this function:\n\n```rust\npub fn return_some_words() -> Vec<String> {\n    vec!", "mimetype": "text/plain", "start_char_idx": 3423, "end_char_idx": 5283, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e18c85d3-8e44-4126-85ab-f4558a756c24": {"__data__": {"id_": "e18c85d3-8e44-4126-85ab-f4558a756c24", "embedding": null, "metadata": {"file_path": "./near_dist/02-structs-enums.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a5422d23-3757-4e79-9197-090661ae0b9b", "node_type": "4", "metadata": {}, "hash": "2ff37c2c5115fad178a70e5911056a900f0ff7ab14a41f87060e204657414d6d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0659dae3-4c5a-4997-a22b-3b436cdcd312", "node_type": "1", "metadata": {}, "hash": "6c79a345735baf2eb9a9a60f280faa479db58a4561e7b1992335a508b1c8ead8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "deac0977-1ce9-4c0c-b464-a2040c5f53bc", "node_type": "1", "metadata": {}, "hash": "dda148552d85b4c485d8fc28287e43429519ffdf01da632ca5e1c516b3d2a920", "class_name": "RelatedNodeInfo"}}, "text": "[\"crossword\".to_string(), \"puzzle\".to_string()]\n}\n```\n\nThe return value would be a JSON array:\n\n`[\"crossword\", \"puzzle\"]`\n\nWhile somewhat advanced, you can learn more about [changing the serialization here](../../../2.build/2.smart-contracts/anatomy/serialization-interface.md).\n:::\n\nWe have a struct called `JsonPuzzle` that differs from the `Puzzle` struct we've shown. It has one difference: the addition of the `solution_hash` field.\n\n```rust\n#[near(serializers = [json])]\npub struct JsonPuzzle {\n    /// The human-readable (not in bytes) hash of the solution\n    solution_hash: String,  // \u27f5 this field is not contained in the Puzzle struct\n    status: PuzzleStatus,\n    answer: Vec<Answer>,\n}\n```\n\nThis is handy because our primary struct has a key-value pair where the key is the solution hash (as a `String`) and the value is the `Puzzle` struct.\n\n```rust\npub struct Crossword {\n    puzzles: LookupMap<String, Puzzle>,\n    //               key \u2197        \u2196 value\n    \u2026\n```\n\nOur `JsonPuzzle` struct returns the information from both the key and the value.\n\nWe can move on from this topic, but suffice it to say, sometimes it's helpful to have structs where the intended use is to return data in a more meaningful way than might exist from the structs used to store contract data.\n\n### Using returned objects in a callback\n\nDon't be alarmed if this section feels confusing at this point, but know we'll cover Promises and callbacks later.\n\nWithout getting into detail, a contract may want to make a cross-contract call and \"do something\" with the return value. Sometimes this return value is an object we're expecting, so we can define a struct with the expected fields to capture the value. In other programming languages this may be referred to as \"casting\" or \"marshaling\" the value.\n\nA real-world example of this might be the [Storage Management standard](https://nomicon.io/Standards/StorageManagement.html), as used in a [fungible token](https://github.com/near-examples/FT).\n\nLet's say a smart contract wants to determine if `alice.near` is \"registered\" on the `nDAI` token.", "mimetype": "text/plain", "start_char_idx": 5283, "end_char_idx": 7368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "deac0977-1ce9-4c0c-b464-a2040c5f53bc": {"__data__": {"id_": "deac0977-1ce9-4c0c-b464-a2040c5f53bc", "embedding": null, "metadata": {"file_path": "./near_dist/02-structs-enums.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a5422d23-3757-4e79-9197-090661ae0b9b", "node_type": "4", "metadata": {}, "hash": "2ff37c2c5115fad178a70e5911056a900f0ff7ab14a41f87060e204657414d6d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e18c85d3-8e44-4126-85ab-f4558a756c24", "node_type": "1", "metadata": {}, "hash": "cd2fe9c728716afba804e63ba893207391e12737912b614bf660f7fdd1ec67ff", "class_name": "RelatedNodeInfo"}}, "text": "More technically, does `alice.near` have a key-value pair for herself in the fungible token contract.\n\n```rust\n#[near(serializers = [json])]\npub struct StorageBalance {\n    pub total: U128,\n    pub available: U128,\n}\n\n// \u2026\n// Logic that calls the nDAI token contract, asking for alice.near's storage balance.\n// \u2026\n\n#[private]\npub fn my_callback(&mut self, #[callback] storage_balance: StorageBalance) {\n    // \u2026\n}\n```\n\nThe crossword puzzle will eventually use a cross-contract call and callback, so we can look forward to that. For now just know that if your contract expects to receive a return value that's not a primitive (unsigned integer, string, etc.) and is more complex, you may use a struct to give it the proper type.\n\n## Using enums\n\nIn the section above, we saw two fields in the structs that had an enum type:\n\n1.`AnswerDirection` \u2014 this is the simplest type of enum, and will look familiar from other programming languages. It provides the only two options for how a clue in oriented in a crossword puzzle: across and down.\n\n```rust\n#[near(serializers = [json, borsh])]\n#[derive(Debug)]\npub enum AnswerDirection {\n    Across,\n    Down,\n}\n```\n\n2. `PuzzleStatus` \u2014 this enum can actually store a string inside the `Solved` structure. (Note that we could have simply stored a string instead of having a structure, but a structure might make this easier to read.)\n\nAs we improve our crossword puzzle, the idea is to give the winner of the crossword puzzle (the first person to solve it) the ability to write a memo. (For example: \"Took me forever to get clue six!\", \"Alice rules!\" or whatever.)\n\n```rust\n#[near(serializers = [json, borsh])]\n#[derive(Debug)]\npub enum PuzzleStatus {\n    Unsolved,\n    Solved { memo: String },\n}\n```", "mimetype": "text/plain", "start_char_idx": 7369, "end_char_idx": 9109, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0390b584-58eb-4e88-922b-3413d4f2f369": {"__data__": {"id_": "0390b584-58eb-4e88-922b-3413d4f2f369", "embedding": null, "metadata": {"file_path": "./near_dist/documentation-request.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e03cfc6-d600-4d8f-a893-2728090b05c0", "node_type": "4", "metadata": {}, "hash": "0c7a546f8f28c7e262e8984584e60a5e3898eff3a149c26c401125c3b11f5553", "class_name": "RelatedNodeInfo"}}, "text": "---\nname: Documentation request \u270f\ufe0f \nabout: Suggest an idea for a new document propose an enhancement of an existing document.\ntitle: \"[DOC] \"\nlabels: enhancement\nassignees: ''\n\n---\n<!-- \u26a0\ufe0f Do Not Delete This! documentation_request_template \u26a0\ufe0f -->\n<!-- Please search existing issues to avoid creating duplicates. -->\n\n**Is your feature request related to a problem? Please describe.**\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\n\n**Describe the solution you'd like**\nA clear and concise description of what you want to happen.\n\n**Additional context**\nAdd any other context or screenshots about the feature request here.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 667, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5a5872eb-e559-4e88-b4c2-af44b12a2bfb": {"__data__": {"id_": "5a5872eb-e559-4e88-b4c2-af44b12a2bfb", "embedding": null, "metadata": {"file_path": "./near_dist/get-deposit-balances.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "79775fbe-4a22-4d12-8e27-487d879c5b7c", "node_type": "4", "metadata": {}, "hash": "f1284c8fd232e8d4f494b070a093df48507e860b9e8b3bd7ddd253f15df34d20", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view v2.ref-finance.near get_deposits '{\"account_id\": \"bob.near\"}'\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n{\n  'token.v2.ref-finance.near': '0',\n  'wrap.near': \"0\"\n}\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 224, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c3e6101-1683-496c-95d6-954fac594b61": {"__data__": {"id_": "6c3e6101-1683-496c-95d6-954fac594b61", "embedding": null, "metadata": {"file_path": "./near_dist/05-logging-in.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd", "node_type": "4", "metadata": {}, "hash": "afb5582d691d35a6368ed6807b49d3eb0f10967f6496f2d1b99a728c77b89074", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe3aec9a-9a31-4992-ba6a-2295090a20f9", "node_type": "1", "metadata": {}, "hash": "f1be08b19fe0d466bef168eb60114962bdb1efcfa5c252e98b8c03c0694f6b28", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 5\nsidebar_label: \"Access keys and login 1/2\"\ntitle: \"Covering access keys and login\"\n---\n\nimport chapter1Correct from '/docs/assets/crosswords/chapter-1-crossword-correct.gif';\nimport accessKeys from '/docs/assets/crosswords/keys-cartoon-good--alcantara_gabriel.near--Bagriel_5_10.png';\nimport functionCallAction from '/docs/assets/crosswords/function-call-action.png';\nimport tutorialAccessKeys from '/docs/assets/crosswords/access-keys.png';\n\n# Logging in with NEAR\n\n## Previously\u2026\n\nIn the previous chapter we simply displayed whether the crossword puzzle was solved or not, by checking the solution hash against the user's answers.\n\n<img src={chapter1Correct} width=\"600\"/><br/><br/>\n\n## Updates to transfer prize money\n\nIn this chapter, our smart contract will send 5 \u24c3 to the first person who solves the puzzle. For this, we're going to require the user to have a NEAR account and log in.\n\n:::note Better onboarding to come\nLater in this tutorial we won't require the user to have a NEAR account.\n\nSince logging in is important for many decentralized apps, we'll show how this is done in NEAR and how it's incredibly unique compared to other blockchains.\n:::\n\nThis transfer will occur when the first user to solve the puzzle calls the `submit_solution` method with the solution. During the execution of that function it will check that the user submitted the correct answer, then transfer the prize.\n\nWe'll be able to see this transfer (and other steps that occurred) in [NearBlocks Explorer](https://testnet.nearblocks.io).\n\nBut first let's talk about one of the most interesting superpowers of NEAR: access keys.\n\n## Access keys\n\nYou might be familiar with other blockchains where your account name is a long string of numbers and letters. NEAR has an account system where your name is human-readable, like `friend.testnet` for testnet or `friend.near` for mainnet.\n\nYou can add (and remove) keys to your account on NEAR. There are two types of keys: full and function-call access keys.\n\nThe illustration below shows a keychain with a full-access key (the large, gold one) and two function-call access keys.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2136, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe3aec9a-9a31-4992-ba6a-2295090a20f9": {"__data__": {"id_": "fe3aec9a-9a31-4992-ba6a-2295090a20f9", "embedding": null, "metadata": {"file_path": "./near_dist/05-logging-in.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd", "node_type": "4", "metadata": {}, "hash": "afb5582d691d35a6368ed6807b49d3eb0f10967f6496f2d1b99a728c77b89074", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c3e6101-1683-496c-95d6-954fac594b61", "node_type": "1", "metadata": {}, "hash": "90fcc68f42332fde9f4505f86e05ea8e167d0c94538e665bff1f2cba297ce061", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb", "node_type": "1", "metadata": {}, "hash": "a2f4b6062ece59f39698536eb741f616b8ee71f66ea2a5d7d6b1c40a61d9b573", "class_name": "RelatedNodeInfo"}}, "text": "<figure>\n    <img src={accessKeys} width=\"600\" alt=\"A keychain with three keys. A large, gold key represents the full-access keys on NEAR. The two other keys are gray and smaller, and have detachable latches on them. They represent function-call access key. Art created by alcantara_gabriel.near\" />\n    <figcaption>Art by <a href=\"https://twitter.com/Bagriel_5_10\" target=\"_blank\" rel=\"noopener noreferrer\">alcantara_gabriel.near</a></figcaption>\n</figure>\n\n### Full-access keys\n\nFull-access keys are the ones you want to protect the most. They can transfer all the funds from your account, delete the account, or perform any of the other [Actions on NEAR](03-actions.md).\n\nWhen we used the `near login` command in the [previous chapter](../01-basics/01-set-up-skeleton.md#creating-a-new-key-on-your-computer), that command asked the full-access key in the NEAR Wallet to use the `AddKey` Action to create another full-access key: the one we created locally on our computer. NEAR CLI uses that new key to deploy, make function calls, etc.\n\n### Function-call access keys\n\nFunction-call access keys are sometimes called \"limited access keys\" because they aren't as powerful as the full access keys.\n\nA Function-call access key will specify:\n\n- What contract it's allowed to call\n- What method name(s) it's allowed to call (you can also specify all functions)\n- How much allowance it's allowed to use on these function calls\n\nIt's only allowed to perform the `FunctionCall` Action.\n\n<img src={functionCallAction} alt=\"List of NEAR Actions with a highlight on the FunctionCall Action\" width=\"600\"/>\n\n### Example account with keys\n\nLet's look at this `testnet` account that has one full-access key and two function-call access keys. As you can see, we use the [NEAR CLI](../../../4.tools/cli.md) to print this info.", "mimetype": "text/plain", "start_char_idx": 2138, "end_char_idx": 3949, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb": {"__data__": {"id_": "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb", "embedding": null, "metadata": {"file_path": "./near_dist/05-logging-in.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd", "node_type": "4", "metadata": {}, "hash": "afb5582d691d35a6368ed6807b49d3eb0f10967f6496f2d1b99a728c77b89074", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe3aec9a-9a31-4992-ba6a-2295090a20f9", "node_type": "1", "metadata": {}, "hash": "f1be08b19fe0d466bef168eb60114962bdb1efcfa5c252e98b8c03c0694f6b28", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3f959881-2812-4401-9f63-3c6529cc2f4e", "node_type": "1", "metadata": {}, "hash": "df723eca08630a2a742f143676806f56a3409cff786a5475ca816c32da5631f4", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear account list-keys friend.testnet network-config testnet now\n```\n\n```\n+----+------------------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| #  | Public Key                                           | Nonce           | Permissions                                                                                                                                                                                        |\n+----+------------------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| 1  | ed25519:QqggnQNPRh5rqxL5PCPSS8qbZyrm6KHBbjne3U9TDGN  | 72772126000000  | do any function calls on puzzle.testnet with an allowance of 777 NEAR                                                                                                        |\n| 2  | ed25519:FgsZoPqnSkuvoR6BZzXUY48tb5UfaCrRfg8kf4vyRg4F | 72777733000000  | only do [\"foo\", \"bar\"] function calls on puzzle.testnet with an allowance of 0.250 NEAR                                                                                  |\n| 3  | ed25519:Hht8gURhPpDB2muhZhkEgxbdy4c2CPiQdUDMVuK7zDLd | 72770704000019  | full access                                                                                                                                                                                        |\n+----+------------------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n```\n\nLet's look deeper into each key.\n\n#### First key\n\n```sh\n| 1  | ed25519:QqggnQNPRh5rqxL5PCPSS8qbZyrm6KHBbjne3U9TDGN  | 72772126000000  | do any function calls on puzzle.testnet with an allowance of 777 NEAR                                                                                                        |\n```\n\nThe first key in the image above is a function-call access key that can call the smart contract `puzzle.testnet` on **any method**. If you don't specify which methods it's allowed to call, it is allowed to call them all. Note the empty array (`[]`) next to `method_names`, which indicates this.\n\nWe won't discuss the nonce too much, but know that in order to prevent the possibility of [replay attacks](https://en.wikipedia.org/wiki/Replay_attack), the nonce for a newly-created key is large and includes info on the block height as well as a random number.", "mimetype": "text/plain", "start_char_idx": 3951, "end_char_idx": 6802, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3f959881-2812-4401-9f63-3c6529cc2f4e": {"__data__": {"id_": "3f959881-2812-4401-9f63-3c6529cc2f4e", "embedding": null, "metadata": {"file_path": "./near_dist/05-logging-in.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd", "node_type": "4", "metadata": {}, "hash": "afb5582d691d35a6368ed6807b49d3eb0f10967f6496f2d1b99a728c77b89074", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb", "node_type": "1", "metadata": {}, "hash": "a2f4b6062ece59f39698536eb741f616b8ee71f66ea2a5d7d6b1c40a61d9b573", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf58b6ba-b2e7-4f59-af3a-c0a2eadb9ece", "node_type": "1", "metadata": {}, "hash": "2f5950f49f1f00e7a7cd625e0851c53caabb642af1e9acb4cbec45f80a7142fe", "class_name": "RelatedNodeInfo"}}, "text": "The allowance is the amount, in yoctoNEAR, that this key is allowed to use during function calls. This **cannot** be used to transfer NEAR. It can only be used in gas for function calls.\n\nThe allowance on this key is intentionally large for demonstration purposes. `777000000000000000000000000` yoctoNEAR is `777` NEAR, which is unreasonably high for an access key. So high, in fact, that it exceeded the amount of NEAR on the contract itself when created. This shows that you can create an access key that exceeds the account balance, and that it doesn't subtract the allowance at the time of creation.\n\nSo the key is simply allowed to use the allowance in NEAR on gas, deducting from the account for each function call.\n\n#### Second key\n\n```sh\n| 2  | ed25519:FgsZoPqnSkuvoR6BZzXUY48tb5UfaCrRfg8kf4vyRg4F | 72777733000000  | only do [\"foo\", \"bar\"] function calls on puzzle.testnet with an allowance of 0.250 NEAR                                                                                  |\n```\n\nThis second key specifies which methods can be called, and has a lower allowance.\n\nNote that the allowance for this key (a quarter of a NEAR) is the default allowance when a person \"logs in\" in with the NEAR Wallet.\n\nIn NEAR, \"logging in\" typically means adding a key like this to your account. We'll cover this more in a moment.\n\n#### Third key\n\n```sh\n| 3  | ed25519:Hht8gURhPpDB2muhZhkEgxbdy4c2CPiQdUDMVuK7zDLd | 72770704000019  | full access                                                                                                                                                                                        |\n```\n\nThe third key is a full-access key.\n\nSince this key can perform all the Actions, there aren't additional details or restrictions like the function-call access keys we saw.\n\n## What does \"log in\" mean in a blockchain context?\n\nLet's take a step back from NEAR and talk about how login works broadly using web3 wallets.\n\nA web3 wallet (like Ethereum's MetaMask, Cosmos's Keplr, or the NEAR Wallet) stores a private key for an account.", "mimetype": "text/plain", "start_char_idx": 6804, "end_char_idx": 8873, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf58b6ba-b2e7-4f59-af3a-c0a2eadb9ece": {"__data__": {"id_": "cf58b6ba-b2e7-4f59-af3a-c0a2eadb9ece", "embedding": null, "metadata": {"file_path": "./near_dist/05-logging-in.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd", "node_type": "4", "metadata": {}, "hash": "afb5582d691d35a6368ed6807b49d3eb0f10967f6496f2d1b99a728c77b89074", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3f959881-2812-4401-9f63-3c6529cc2f4e", "node_type": "1", "metadata": {}, "hash": "df723eca08630a2a742f143676806f56a3409cff786a5475ca816c32da5631f4", "class_name": "RelatedNodeInfo"}}, "text": "When interacting with decentralized apps, a user will typically use the wallet to sign transactions and send them to the blockchain for processing.\n\nHowever, web3 wallets can also be used to sign any kind of message, and it doesn't need to send anything to the blockchain. This is sometimes called \"offline signing\" and protocols will sometimes create standards around how to sign data.\n\nIn other ecosystems, the idea of \"logging in\" with a web3 wallet uses this offline signing. A user is asked to sign a structured message and a backend can confirm that the message was signed by a given account.\n\nNEAR keys can also sign and verify messages in this manner. In fact, there are a couple simple examples of how to achieve this in the [`near-api-js` cookbook](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/verify-signature.js).\n\nThere are potential drawbacks to this offline signing technique, particularly if a signed message gets intercepted by a malicious party. They might be able to send this signature to a backend and log in on your behalf. Because this all takes place offline, there's no mechanism on-chain to revoke your login or otherwise control access. We quickly see that using a web3 wallet for signed typed data runs into limitations.\n\nSo signing a message is fine, but what if we could do better?\n\nWith NEAR, we can leverage access keys to improve a user's login experience and give the power back to the user.\n\nIf I log into the [Guest Book example site](https://github.com/near-examples/guest-book-examples/tree/main/frontend), I create a unique key just for that dApp, adding it to my account. When I'm done I can remove the key myself. If I suspect someone has control of my key (if a laptop is stolen, for example) I can remove the key as long as I have a full-access key in my control.\n\nLogging in with NEAR truly gives the end user control of their account and how they interact with dApps, and does so on the protocol level.\n\n---\n\nThe concept of access keys is so important that we've spent longer than usual on the topic without actually implementing code for our improved crossword puzzle.\n\nLet's move to the next section and actually add the login button.", "mimetype": "text/plain", "start_char_idx": 8874, "end_char_idx": 11082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ef818610-a6bf-40ea-a5fd-491ecf6895b6": {"__data__": {"id_": "ef818610-a6bf-40ea-a5fd-491ecf6895b6", "embedding": null, "metadata": {"file_path": "./near_dist/2-upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625", "node_type": "4", "metadata": {}, "hash": "56eec8232ff802e9ff106319581070bfbd4748dfb50c6fd80f3b2487ebd2da4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "13e85bb5-1698-4b3e-9105-2c71f8914881", "node_type": "1", "metadata": {}, "hash": "4c5f84b2db4ad18c642e8956cdf1f03ff8789a38b30a8b3f81aa9518039a9238", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: upgrade-contract\ntitle: Upgrading the Contract\nsidebar_label: Upgrade a Contract\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\nIn this tutorial, you'll build off the work you previously did to implement the [minting functionality](/tutorials/nfts/js/minting) on a skeleton smart contract. You got to the point where NFTs could be minted, however, the wallet had no way of displaying the tokens since your contract didn't implement the method that the wallet was trying to call.\n\n\n\n\n## Introduction\n\nToday you'll learn about deploying patch fixes to smart contracts and you'll use that knowledge to implement the `nft_tokens_for_owner` function on the contract you deployed in the previous tutorial.\n\n## Upgrading contracts overview {#upgrading-contracts}\n\nUpgrading contracts, when done right, can be an immensely powerful tool. If done wrong, it can lead to a lot of headaches. It's important to distinguish between the code and state of a smart contract. When a contract is deployed on top of an existing contract, the only thing that changes is the code. The state will remain the same and that's where a lot of developer's issues come to fruition.\n\nThe NEAR Runtime will read the serialized state from disk and it will attempt to load it using the current contract code. When your code changes, it might not be able to figure out how to do this.\n\nYou need to strategically upgrade your contracts and make sure that the runtime will be able to read your current state with the new contract code. For more information about upgrading contracts and some best practices, see the NEAR SDK's [upgrading contracts](../../../2.build/2.smart-contracts/release/upgrade.md) write-up.\n\n## Modifications to our contract {#modifications-to-contract}\n\nIn order for the wallet to properly display your NFTs, you need to implement the `nft_tokens_for_owner` method. This will allow anyone to query for a paginated list of NFTs owned by a given account ID.\n\nTo accomplish this, let's break it down into some smaller subtasks. First, you need to get access to a list of all token IDs owned by a user. This information can be found in the `tokensPerOwner` data structure.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2175, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "13e85bb5-1698-4b3e-9105-2c71f8914881": {"__data__": {"id_": "13e85bb5-1698-4b3e-9105-2c71f8914881", "embedding": null, "metadata": {"file_path": "./near_dist/2-upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625", "node_type": "4", "metadata": {}, "hash": "56eec8232ff802e9ff106319581070bfbd4748dfb50c6fd80f3b2487ebd2da4c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ef818610-a6bf-40ea-a5fd-491ecf6895b6", "node_type": "1", "metadata": {}, "hash": "f750adfebe01c623b11a517b66d6d1941ccea5cd4e8f97aa4a1b84d603b504d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "51998384-ca33-4df7-8e1c-38aefa871f03", "node_type": "1", "metadata": {}, "hash": "d87dc9baaa6953de01e5f7fbed89694bb6736737286b0279a4a044fe48ce925e", "class_name": "RelatedNodeInfo"}}, "text": "Now that you have a set of token IDs, you need to convert them into `JsonToken` objects as that's what you'll be returning from the function.\n\nLuckily, you wrote a function `nft_token` which takes a token ID and returns a `JsonToken` in the `nft_core.ts` file. As you can guess, in order to get a list of `JsonToken` objects, you would need to iterate through the token IDs owned by the user and then convert each token ID into a `JsonToken` and store that in a list.\n\nAs for the pagination, you can use some basic JavaScript to get that done. Let's move over to the `enumeration.ts` file and implement that logic:\n\n<Github language=\"js\" start=\"47\" end=\"82\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/enumeration.ts\" />\n\n## Redeploying the contract {#redeploying-contract}\n\nNow that you've implemented the necessary logic for `nft_tokens_for_owner`, it's time to build and re-deploy the contract to your account. Using the build script, deploy the contract as you did in the previous tutorial:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $NFT_CONTRACT_ID\n```\n\nThis should output a warning saying that the account has a deployed contract and will ask if you'd like to proceed. Simply type `y` and hit enter.\n\n```bash\nThis account already has a deployed contract [ AKJK7sCysrWrFZ976YVBnm6yzmJuKLzdAyssfzK9yLsa ]. Do you want to proceed? (y/n)\n```\n\nOnce the contract has been redeployed, let's test and see if the state migrated correctly by running a simple view function:\n\n```bash\nnear view $NFT_CONTRACT_ID nft_metadata\n```\n\nThis should return an output similar to the following:\n\n```bash\n{ spec: 'nft-1.0.0', name: 'NFT Tutorial Contract', symbol: 'GOTEAM' }\n```\n\n**Go team!** At this point, you can now test and see if the new function you wrote works correctly.", "mimetype": "text/plain", "start_char_idx": 2176, "end_char_idx": 4012, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "51998384-ca33-4df7-8e1c-38aefa871f03": {"__data__": {"id_": "51998384-ca33-4df7-8e1c-38aefa871f03", "embedding": null, "metadata": {"file_path": "./near_dist/2-upgrade.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625", "node_type": "4", "metadata": {}, "hash": "56eec8232ff802e9ff106319581070bfbd4748dfb50c6fd80f3b2487ebd2da4c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "13e85bb5-1698-4b3e-9105-2c71f8914881", "node_type": "1", "metadata": {}, "hash": "4c5f84b2db4ad18c642e8956cdf1f03ff8789a38b30a8b3f81aa9518039a9238", "class_name": "RelatedNodeInfo"}}, "text": "Let's query for the list of tokens that you own:\n\n```bash\nnear view $NFT_CONTRACT_ID nft_tokens_for_owner '{\"account_id\": \"'$NFT_CONTRACT_ID'\", \"limit\": 5}'\n```\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```bash\n[\n  {\n    token_id: 'token-1',\n    owner_id: 'goteam.examples.testnet',\n    metadata: {\n      title: 'My Non Fungible Team Token',\n      description: 'The Team Most Certainly Goes :)',\n      media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif'\n    }\n  }\n]\n```\n\n</p>\n</details>\n\n## Viewing NFTs in the wallet {#viewing-nfts-in-wallet}\n\nNow that your contract implements the necessary functions that the wallet uses to display NFTs, you should be able to see your tokens on display in the [collectibles tab](https://testnet.mynearwallet.com//?tab=collectibles).\n\n![filled-nft-in-wallet](/docs/assets/nfts/filled-nft-in-wallet.png)\n\n## Conclusion\n\nIn this tutorial, you learned about the basics of [upgrading contracts](#upgrading-contracts). Then, you implemented the necessary [modifications to your smart contract](#modifications-to-contract) and [redeployed it](#redeploying-contract). Finally you navigated to the wallet collectibles tab and [viewed your NFTs](#viewing-nfts-in-wallet).\n\nIn the [next tutorial](/tutorials/nfts/js/enumeration), you'll implement the remaining functions needed to complete the [enumeration](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration) standard.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 4013, "end_char_idx": 5731, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5f497b26-0d1b-417f-8e0b-a124b6c20f65": {"__data__": {"id_": "5f497b26-0d1b-417f-8e0b-a124b6c20f65", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6d5376d6-6470-41eb-9431-86331cfd8c9d", "node_type": "1", "metadata": {}, "hash": "5addc56c2e42b52d221fcd74c6c10c0fa95b60f1890d05e1f0596938f97d5909", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 3\nsidebar_label: \"Add basic code, create a subaccount, and call methods\"\ntitle: \"Alter the smart contract, learning about basics of development\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport teachingDeployment from '/docs/assets/crosswords/teaching--jeheycell.near--artcultureac.jpeg';\nimport createAccount from '/docs/assets/crosswords/creating account with text--seanpineda.near--_seanpineda.png';\nimport chalkboardErase from '/docs/assets/crosswords/erasing-subaccount-chalkboard--iambon.near--JohnreyBona.mp4';\n\n# Modifying the contract\n\nThis section will modify the smart contract skeleton from the previous section. This tutorial will start by writing a contract in a somewhat useless way in order to learn the basics. Once we've got a solid understanding, we'll iterate until we have a crossword puzzle.\n\n## Add a const, a field, and functions\n\nLet's modify the contract to be:\n\n<Github language=\"rust\" start=\"1\" end=\"28\" url=\"https://github.com/near-examples/crossword-snippets/blob/master/src/lib.rs\" />\n\nWe've done a few things here:\n1. Set a constant for the puzzle number.\n2. Added the field `crossword_solution` to our main struct.\n3. Implemented three functions: one that's view-only and two that are mutable, meaning they have the ability to change state.\n4. Used logging, which required the import of `env` from our `near_sdk` crate.\n\nBefore moving on, let's talk about these changes and how to think about them, beginning with the constant:\n\n```rust\nconst PUZZLE_NUMBER: u8 = 1;\n```\n\nThis is an in-memory value, meaning that when the smart contract is spun up and executed in the virtual machine, the value `1` is contained in the contract code. This differs from the next change, where a field is added to the struct containing the `#[near]` macro. The field `crossword_solution` has the type of `String` and, like any other fields added to this struct, the value will live in **persistent storage**.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2030, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6d5376d6-6470-41eb-9431-86331cfd8c9d": {"__data__": {"id_": "6d5376d6-6470-41eb-9431-86331cfd8c9d", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5f497b26-0d1b-417f-8e0b-a124b6c20f65", "node_type": "1", "metadata": {}, "hash": "15e02abbbadb7012053fd470fe976047f6faf9e8cc01515d069012d882f44cd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98", "node_type": "1", "metadata": {}, "hash": "e60dc2c64cb2c718c08f3f10ddeda7fd49dce363f30388fc1a1a82ddf50189ad", "class_name": "RelatedNodeInfo"}}, "text": "With NEAR, storage is \"paid for\" via the native NEAR token (\u24c3). It is not \"state rent\" but storage staking, paid once, and returned when storage is deleted. This helps incentivize users to keep their state clean, allowing for a more healthy chain. Read more about [storage staking here](https://docs.near.org/concepts/storage/storage-staking).\n\nLet's now look at the three new functions:\n\n```rust\npub fn get_puzzle_number(&self) -> u8 {\n    PUZZLE_NUMBER\n}\n```\n\nAs is covered in the [function section of these docs](../../../2.build/2.smart-contracts/anatomy/functions.md), a \"view-only\" function will have open parenthesis around `&self` while \"change methods\" or mutable functions will have `&mut self`. In the function above, the `PUZZLE_NUMBER` is returned. A user may call this method using the proper RPC endpoint without signing any transaction, since it's read-only. Think of it like a GET request, but using RPC endpoints that are [documented here](https://docs.near.org/api/rpc/contracts#call-a-contract-function).\n\nMutable functions, on the other hand, require a signed transaction. The first example is a typical approach where the user supplies a parameter that's assigned to a field:\n\n```rust\npub fn set_solution(&mut self, solution: String) {\n    self.crossword_solution = solution;\n}\n```\n\nThe next time the smart contract is called, the contract's field `crossword_solution` will have changed.\n\nThe second example is provided for demonstration purposes:\n\n```rust\npub fn guess_solution(&mut self, solution: String) {\n    if solution == self.crossword_solution {\n        env::log_str(\"You guessed right!\")\n    } else {\n        env::log_str(\"Try again.\")\n    }\n}\n```\n\nNotice how we're not saving anything to state and only logging? Why does this need to be mutable?\n\nWell, logging is ultimately captured inside blocks added to the blockchain. (More accurately, transactions are contained in chunks and chunks are contained in blocks. More info in the [Nomicon spec](https://nomicon.io/Architecture.html?highlight=chunk#blockchain-layer-concepts).)", "mimetype": "text/plain", "start_char_idx": 2031, "end_char_idx": 4091, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98": {"__data__": {"id_": "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d5376d6-6470-41eb-9431-86331cfd8c9d", "node_type": "1", "metadata": {}, "hash": "5addc56c2e42b52d221fcd74c6c10c0fa95b60f1890d05e1f0596938f97d5909", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "606cea10-884c-49f7-8bca-a69c3e606bce", "node_type": "1", "metadata": {}, "hash": "da2257f4448e1ec324f17f2b1c51e7f79711b0a75c035ead91fb85ad44d65571", "class_name": "RelatedNodeInfo"}}, "text": "So while it is not changing the data in the fields of the struct, it does cost some amount of gas to log, requiring a signed transaction by an account that pays for this gas.\n\n---\n\n## Building and deploying\n\nHere's what we'll want to do:\n\n<figure>\n    <img src={teachingDeployment} alt=\"Teacher shows chalkboard with instructions on how to properly deploy a smart contract. 1. Build smart contract. 2. Create a subaccount (or delete and recreate if it exists) 3. Deploy to subaccount. 4. Interact. Art created by jeheycell.near\"/>\n    <figcaption className=\"full-width\">Art by <a href=\"https://twitter.com/artcultureac\" target=\"_blank\" rel=\"noopener noreferrer\">jeheycell.near</a></figcaption>\n</figure>\n\n### Build the contract\n\nTo build the contract, we'll be using [`cargo-near`](https://github.com/near/cargo-near).\n\nInstall `cargo-near` first:\n\n```bash\ncargo install cargo-near\n```\n\nRun the following commands and expect to see the compiled Wasm file copied to the `target/near` folder.\n\n```bash\ncd contract\ncargo near build\n```\n\n### Create a subaccount\n\nIf you've followed from the previous section, you have NEAR CLI installed and a full-access key on your machine. While developing, it's a best practice to create a subaccount and deploy the contract to it. This makes it easy to quickly delete and recreate the subaccount, which wipes the state swiftly and starts from scratch.", "mimetype": "text/plain", "start_char_idx": 4092, "end_char_idx": 5477, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "606cea10-884c-49f7-8bca-a69c3e606bce": {"__data__": {"id_": "606cea10-884c-49f7-8bca-a69c3e606bce", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98", "node_type": "1", "metadata": {}, "hash": "e60dc2c64cb2c718c08f3f10ddeda7fd49dce363f30388fc1a1a82ddf50189ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff7a588e-ee40-4ede-9093-30085c05c9f2", "node_type": "1", "metadata": {}, "hash": "08b9137fac180159f590035b62f26a771c42988f62e002a2d3819b664fd50447", "class_name": "RelatedNodeInfo"}}, "text": "Let's use NEAR CLI to create a subaccount and fund with 1 NEAR:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nIf you look again in your home directory's `.near-credentials`, you'll see a new key for the subaccount with its own key pair. This new account is, for all intents and purposes, completely distinct from the account that created it. It might as well be `alice.testnet`, as it has, by default, no special relationship with the parent account. To be clear, `friend.testnet` cannot delete or deploy to `crossword.friend.testnet` unless it's done in a single transaction using Batch Actions, which we'll cover later.\n\n:::info Subaccount nesting\nIt's possible to have the account `another.crossword.friend.testnet`, but this account must be created by `crossword.friend.testnet`.\n\n`friend.testnet` **cannot** create `another.crossword.friend.testnet` because accounts may only create a subaccount that's \"one level deeper.\"\n\nSee this visualization where two keys belonging to `mike.near` are able to create `new.mike.near`. We'll get into concepts around access keys later.\n\n<figure>\n    <img src={createAccount} alt=\"Depiction of create account where two figures put together a subaccount. Art created by seanpineda.near\"/>\n    <figcaption className=\"full-width\">Art by <a href=\"https://twitter.com/_seanpineda\" target=\"_blank\" rel=\"noopener noreferrer\">seanpineda.near</a></figcaption>\n</figure>\n\n:::\n\nWe won't get into top-level accounts or implicit accounts, but you may read more [about that here](https://docs.near.org/docs/concepts/account).", "mimetype": "text/plain", "start_char_idx": 5478, "end_char_idx": 7468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ff7a588e-ee40-4ede-9093-30085c05c9f2": {"__data__": {"id_": "ff7a588e-ee40-4ede-9093-30085c05c9f2", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "606cea10-884c-49f7-8bca-a69c3e606bce", "node_type": "1", "metadata": {}, "hash": "da2257f4448e1ec324f17f2b1c51e7f79711b0a75c035ead91fb85ad44d65571", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e920fa46-1880-4fd8-85b2-1810fa08f50c", "node_type": "1", "metadata": {}, "hash": "e3d78b999fad6544b385e0babb2e89a095b7c794015090c284aa89d179d77727", "class_name": "RelatedNodeInfo"}}, "text": "Now that we have a key pair for our subaccount, we can deploy the contract to `testnet` and interact with it!\n\n#### What's a codehash?\n\nWe're almost ready to deploy the smart contract to the account, but first let's take a look at the account we're going to deploy to. Remember, this is the subaccount we created earlier. To view the state easily with NEAR CLI, you may run this command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near state crossword.friend.testnet --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account view-account-summary crossword.friend.testnet network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nWhat you'll see is something like this:\n\n```bash\n------------------------------------------------------------------------------------------\n crossword.friend.testnet         At block #167331831\n                                  (Evjnf29LuqFE7FUf97VQZzNfnUgPFLNyyiUk9qr4Wjri)\n------------------------------------------------------------------------------------------\n Native account balance           10.01 NEAR\n------------------------------------------------------------------------------------------\n Validator stake                  0 NEAR\n------------------------------------------------------------------------------------------\n Storage used by the account      182 B\n------------------------------------------------------------------------------------------\n Contract (SHA-256 checksum hex)  No contract code\n------------------------------------------------------------------------------------------\n Access keys                      1 full access keys and 0 function-call-only access keys\n------------------------------------------------------------------------------------------\n```\n\nNote the `Contract` SHA-256 checksum is missing. This indicates that there is no contract deployed to this account.\n\nLet's deploy the contract (to the subaccount we created) and then check this again.\n\n### Deploy the contract\n\nEnsure that in your command line application, you're in the directory that contains the `Cargo.toml` file, then run:\n\n```bash\ncargo near deploy crossword.friend.testnet without-init-call network-config testnet sign-with-keychain send\n```\n\nCongratulations, you've deployed the smart contract! Note that NEAR CLI will output a link to [NEAR Explorer](https://nearblocks.io/) where you can inspect details of the transaction.\n\nLastly, let's run this command again and notice that the `Contract` has a SHA-256 checksum. This is the hash of the smart contract deployed to the account.", "mimetype": "text/plain", "start_char_idx": 7470, "end_char_idx": 10082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e920fa46-1880-4fd8-85b2-1810fa08f50c": {"__data__": {"id_": "e920fa46-1880-4fd8-85b2-1810fa08f50c", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff7a588e-ee40-4ede-9093-30085c05c9f2", "node_type": "1", "metadata": {}, "hash": "08b9137fac180159f590035b62f26a771c42988f62e002a2d3819b664fd50447", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77", "node_type": "1", "metadata": {}, "hash": "378409c88dce7c14cd1777d30b6ee50cbff0d3cee117ec01989f71644ef2cdea", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near state crossword.friend.testnet --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account view-account-summary crossword.friend.testnet network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n:::note\n\nDeploying a contract is often done on the command line. While it may be _technically_ possible to deploy via a frontend, the CLI is likely the best approach. If you're aiming to use a factory model, (where a smart contract deploys contract code to a subaccount) this isn't covered in the tutorial, but you may reference the [contracts in SputnikDAO](https://github.com/near-daos/sputnik-dao-contract).\n\n:::\n\n### Call the contract methods (interact!)\n\nLet's first call the method that's view-only:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view crossword.friend.testnet get_puzzle_number '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only crossword.friend.testnet get_puzzle_number json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nYour command prompt will show the result is `1`. Since this method doesn't take any arguments, we don't pass any.", "mimetype": "text/plain", "start_char_idx": 10084, "end_char_idx": 11412, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77": {"__data__": {"id_": "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e920fa46-1880-4fd8-85b2-1810fa08f50c", "node_type": "1", "metadata": {}, "hash": "e3d78b999fad6544b385e0babb2e89a095b7c794015090c284aa89d179d77727", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc287291-1817-4d29-acd6-aa8c207fd2e4", "node_type": "1", "metadata": {}, "hash": "39d2ae5d2414c687aeec9957f78408dbd77c8bb9b8b0382cf7cf95cb69cb1dcd", "class_name": "RelatedNodeInfo"}}, "text": "Next, we'll add a crossword solution as a string (later we'll do this in a better way) argument:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call crossword.friend.testnet set_solution '{\"solution\": \"near nomicon ref finance\"}' --gas 100000000000000 --accountId friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction crossword.friend.testnet set_solution json-args '{\"solution\": \"near nomicon ref finance\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as friend.testnet network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNote that we used NEAR CLI's [`view` command](https://docs.near.org/docs/tools/near-cli#call), and didn't include an `--accountId` flag. As mentioned earlier, this is because we are not signing a transaction. This second method uses the NEAR CLI [`call` command](https://docs.near.org/docs/tools/near-cli#call) which does sign a transaction and requires the user to specify a NEAR account that will sign it, using the credentials files we looked at.\n\nThe last method we have will check the argument against what is stored in state and write a log about whether the crossword solution is correct or incorrect.\n\nCorrect:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call crossword.friend.testnet guess_solution '{\"solution\": \"near nomicon ref finance\"}' --gas 100000000000000 --accountId friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction crossword.friend.testnet guess_solution json-args '{\"solution\": \"near nomicon ref finance\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as friend.testnet network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou'll see something like this:\n\n!", "mimetype": "text/plain", "start_char_idx": 11414, "end_char_idx": 13328, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc287291-1817-4d29-acd6-aa8c207fd2e4": {"__data__": {"id_": "fc287291-1817-4d29-acd6-aa8c207fd2e4", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77", "node_type": "1", "metadata": {}, "hash": "378409c88dce7c14cd1777d30b6ee50cbff0d3cee117ec01989f71644ef2cdea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "474d006b-4c66-4e27-9157-f890242d7aa1", "node_type": "1", "metadata": {}, "hash": "b0aa4dcb14c5588676a33757a80faf9e65233a365e87f2fca5a2eeecda81d986", "class_name": "RelatedNodeInfo"}}, "text": "[Command line shows log for successful solution guess](/docs/assets/crosswords/cli-guess-solution.png)\n\nNotice the log we wrote is output as well as a link to NEAR Explorer.\n\nIncorrect:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call crossword.friend.testnet guess_solution '{\"solution\": \"wrong answers here\"}' --gas 100000000000000 --accountId friend.testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction crossword.friend.testnet guess_solution json-args '{\"solution\": \"wrong answers here\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as friend.testnet network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nAs you can imagine, the above command will show something similar, except the logs will indicate that you've given the wrong solution.\n\n## Reset the account's contract and state\n\nWe'll be iterating on this smart contract during this tutorial, and in some cases it's best to start fresh with the NEAR subaccount we created. The pattern to follow is to **delete** the account (sending all remaining testnet \u24c3 to a recipient) and then **create the account** again.\n\n<video autoPlay controls loop>\n    <source src={chalkboardErase} type=\"video/mp4\" />\n    Sorry, your browser doesn't support embedded videos.", "mimetype": "text/plain", "start_char_idx": 13328, "end_char_idx": 14690, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "474d006b-4c66-4e27-9157-f890242d7aa1": {"__data__": {"id_": "474d006b-4c66-4e27-9157-f890242d7aa1", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc287291-1817-4d29-acd6-aa8c207fd2e4", "node_type": "1", "metadata": {}, "hash": "39d2ae5d2414c687aeec9957f78408dbd77c8bb9b8b0382cf7cf95cb69cb1dcd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02b1cdc1-f715-4480-b686-5a375940a489", "node_type": "1", "metadata": {}, "hash": "e1597e1aaf4f84782bbdfc7aaf53d4c0c54e699db4d5407a349aa1af39aada09", "class_name": "RelatedNodeInfo"}}, "text": "</video>\n\n<figure>\n    <figcaption>Deleting a recreating a subaccount will clear the state and give us a fresh start.<br/>Animation by <a href=\"https://twitter.com/JohnreyBona\" target=\"_blank\" rel=\"noopener noreferrer\">iambon.near</a></figcaption>\n</figure>\n\nUsing NEAR CLI, the commands will look like this:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # deleting an account\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n\n  # creating an account\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # deleting an account\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # creating an account\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nThe first command deletes `crossword.friend.testnet` and sends the rest of its NEAR to `friend.testnet`.\n\n## Wrapping up\n\nSo far, we're writing a simplified version of smart contract and approaching the crossword puzzle in a novice way. Remember that blockchain is an open ledger, meaning everyone can see the state of smart contracts and transactions taking place.\n\n:::info How would you do that?\nYou may hit an RPC endpoint corresponding to `view_state` and see for yourself. Note: this quick example serves as demonstration purposes, but note that the string being returned is Borsh-serialized and contains more info than just the letters.\n\n```bash\n    curl -d '{\"jsonrpc\": \"2.0\", \"method\": \"query\", \"id\": \"see-state\", \"params\": {\"request_type\": \"view_state\", \"finality\": \"final\", \"account_id\": \"crossword.friend.testnet\", \"prefix_base64\": \"\"}}' -H 'Content-Type: application/json' https://rpc.testnet.near.org\n```\n\n!", "mimetype": "text/plain", "start_char_idx": 14691, "end_char_idx": 16713, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02b1cdc1-f715-4480-b686-5a375940a489": {"__data__": {"id_": "02b1cdc1-f715-4480-b686-5a375940a489", "embedding": null, "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7", "node_type": "4", "metadata": {}, "hash": "626b969329e3f3e1a89ab34cd9c2ee1943afa37f892d491ad2ed9164235458a1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "474d006b-4c66-4e27-9157-f890242d7aa1", "node_type": "1", "metadata": {}, "hash": "b0aa4dcb14c5588676a33757a80faf9e65233a365e87f2fca5a2eeecda81d986", "class_name": "RelatedNodeInfo"}}, "text": "[Screenshot of a terminal screen showing a curl request to an RPC endpoint that returns state of a smart contract](/docs/assets/crosswords/rpc-api-view-state.png)\n\nMore on this RPC endpoint in the [NEAR docs](https://docs.near.org/docs/api/rpc/contracts#view-contract-state).\n:::\n\nIn this section, we saved the crossword solution as plain text, which is likely not a great idea if we want to hide the solution to players of this crossword puzzle. Even though we don't have a function called `show_solution` that returns the struct's `crossword_solution` field, the value is stored transparently in state. We won't get into viewing contract state at this moment, but know it's rather easy [and documented here](https://docs.near.org/docs/api/rpc/contracts#view-contract-state).\n\nThe next section will explore hiding the answer from end users playing the crossword puzzle.", "mimetype": "text/plain", "start_char_idx": 16713, "end_char_idx": 17583, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b81c56b7-c2bd-4967-95b8-6e667d1f549c": {"__data__": {"id_": "b81c56b7-c2bd-4967-95b8-6e667d1f549c", "embedding": null, "metadata": {"file_path": "./near_dist/create-dao.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "381524ae-35da-43aa-9c32-9fca5fe9b4fe", "node_type": "4", "metadata": {}, "hash": "3d5fcb9f725b8cb0a56c13d0db885f7496062ee2ade53aaa1b1d8a0536df70b5", "class_name": "RelatedNodeInfo"}}, "text": "```bash\n\nexport COUNCIL='[\"bob.near\"]'\nexport ARGS=`echo '{\"config\": {\"name\": \"Primitives\", \"purpose\": \"Building primitives on NEAR\", \"metadata\":\"\"}, \"policy\": '$COUNCIL'}' | base64`\n\nnear call sputnikv2.testnet create \"{\\\"name\\\": \\\"primitives\\\", \\\"args\\\": \\\"$ARGS\\\"}\" --accountId bob.near --amount 6 --gas 150000000000000\n```\n\n:::note\nThe full list of roles and permissions you can find [here](https://github.com/near-daos/sputnik-dao-contract#roles-and-permissions).\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 472, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9971ecd6-2fe2-40d4-be3e-ee127014fbbd": {"__data__": {"id_": "9971ecd6-2fe2-40d4-be3e-ee127014fbbd", "embedding": null, "metadata": {"file_path": "./near_dist/1.3-deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0", "node_type": "4", "metadata": {}, "hash": "f17f94a0ca71e0c79bd911c84b2542290bee515e366da4abeccc8f118fdce881", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9dbc864c-3018-4c42-ac77-8afdfd4b01de", "node_type": "1", "metadata": {}, "hash": "a769e252f808940e15713c9c0145a7e127f331a55dedf51eaeec22cd1f7873f5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: deploy\ntitle: Deploying to Testnet\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nIn the previous sections we saw how a simple auction smart contract is implemented, and checked its correctness using sandbox testing.\n\nThe time has come to release it on the actual blockchain and interact with it! In this section, we will show you how to create a simple testnet account, deploy the contract and interact with it from the CLI.\n\n:::info Networks\n\nNEAR has two main networks for you to use: `testnet` and `mainnet`. The `testnet` network behaves exactly as the main network, but uses test tokens with no real value\n\n:::\n\n---\n\n## Testnet Account\n\nTo deploy a contract, you need a testnet account. If you don't have one, you can create one using the following command:\n\n```bash\n# create-account using near-cli (contractId has end with .testnet)\nnear create <contractId> --useFaucet\n```\n\nReplace `<contractId>` with the name you want to give to your account, and make sure it ends with `.testnet`.\n\nThe account will be created with **10 NEAR** (these are test tokens).\n\n:::info Testnet Faucet\n\nNotice that we are using the `--useFaucet` flag to automatically request test tokens from the NEAR faucet.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1294, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9dbc864c-3018-4c42-ac77-8afdfd4b01de": {"__data__": {"id_": "9dbc864c-3018-4c42-ac77-8afdfd4b01de", "embedding": null, "metadata": {"file_path": "./near_dist/1.3-deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0", "node_type": "4", "metadata": {}, "hash": "f17f94a0ca71e0c79bd911c84b2542290bee515e366da4abeccc8f118fdce881", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9971ecd6-2fe2-40d4-be3e-ee127014fbbd", "node_type": "1", "metadata": {}, "hash": "ce1f126139069998c2513216bd508241b15a42cd7fc10f8285780b4a3759c786", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30509f7b-46a6-46ed-aef4-fb2c91859f58", "node_type": "1", "metadata": {}, "hash": "05ab3ac2aae43df177dfc86730af36f15e3ca3b991a3b48f4f4d1de16adc3437", "class_name": "RelatedNodeInfo"}}, "text": "The faucet is only available on the testnet network - which is the default network for the CLI\n\n:::\n\n---\n\n## Deploying the Contract\n\nTo deploy the contract, you need to compile the contract code into WebAssembly (WASM) and then deploy it to the network\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    ```bash\n    # compile the contract\n    npm run build\n\n    # deploy the contract\n    near deploy <contractId> ./build/auction.wasm\n\n    # initialize the contract, it finishes in 2 minutes\n    MINUTE_FROM_NOW=$(date -v+2M +%s000000000)\n    near call <contractId> init '{\"end_time\": \"'$MINUTE_FROM_NOW'\"}' --accountId <contractId>\n    ```\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n    ```bash\n    # compile the contract using cargo-near\n    cargo near build\n\n    # deploy the contract\n    near deploy <contractId> ./target/near/contract_rs.wasm\n\n    # initialize the contract, it finishes in 2 minutes\n    MINUTE_FROM_NOW=$(date -v+2M +%s000000000)\n    near call <contractId> init '{\"end_time\": \"'$MINUTE_FROM_NOW'\"}' --accountId <contractId>\n    ```\n\n    </TabItem>\n\n</Tabs>", "mimetype": "text/plain", "start_char_idx": 1297, "end_char_idx": 2420, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30509f7b-46a6-46ed-aef4-fb2c91859f58": {"__data__": {"id_": "30509f7b-46a6-46ed-aef4-fb2c91859f58", "embedding": null, "metadata": {"file_path": "./near_dist/1.3-deploy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0", "node_type": "4", "metadata": {}, "hash": "f17f94a0ca71e0c79bd911c84b2542290bee515e366da4abeccc8f118fdce881", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9dbc864c-3018-4c42-ac77-8afdfd4b01de", "node_type": "1", "metadata": {}, "hash": "a769e252f808940e15713c9c0145a7e127f331a55dedf51eaeec22cd1f7873f5", "class_name": "RelatedNodeInfo"}}, "text": "Now that the contract is deployed and initialized we can send transactions to it using the CLI. \n\n:::tip Interactive CLI\nNEAR's CLI is interactive meaning you can type `near` and click through all the possible options without having to remember certain commands\n:::\n\n---\n\n## Interacting with the Contract\nWe are now ready to start bidding by calling the `bid` function on the contract. We recommend you to create **two new accounts** to simulate different bidders.\n\n```bash\n# call the contract to bid \nnear call <contractId> bid --accountId <bidderId> --amount 1\n\n# get the highest bid\nnear view <contractId> get_highest_bid\n```\n\nNotice that we call the `bid` function without arguments, but attach 1 NEAR to the transaction. This is the amount we are bidding.\n\nFor the `get_highest_bid` function, we don't need to specify which user is calling it, as it is a view function and does not require gas to be executed.\n\n---\n\n## Conclusion \n\nWe have now seen how to deploy a contract to `testnet` and interact with it using the NEAR CLI.\n\nA word of advice before moving forward. When people learn how to use the CLI, they get lazy and start testing new contract features directly on the testnet. While this is tempting, it is not recommended.\n\nDo not use testnet as your **only way** to test contracts. Always test your contracts on the **sandbox environment first**, and only deploy to the testnet when you are confident that everything is working as expected.\n\n:::tip Frontend\n\nGenerally you will use the CLI only to deploy and initialize the contract. After, all interactions will be made from a frontend\n\nWe will cover this topic in the future, after we have finished adding more features to the auction contract\n\n:::", "mimetype": "text/plain", "start_char_idx": 2423, "end_char_idx": 4139, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "da51e0c7-f947-42cb-9afd-9a384de63b92": {"__data__": {"id_": "da51e0c7-f947-42cb-9afd-9a384de63b92", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32", "node_type": "1", "metadata": {}, "hash": "00263ae0bd0d0cc746475d5474a605446ddd8d59758f4429659c77defb6a8823", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: accounts\ntitle: Accounts\nsidebar_label: Accounts\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n## Introduction {#introduction}\n\nPlease see the [documentation for accounts](/concepts/protocol/account-model) for basic information.\n\n- For exchanges, NEAR supports [implicit account](https://nomicon.io/DataStructures/Account.html#implicit-account-ids) creation which allows the creation of accounts without paying for transactions.\n- You can create an implicit account by following the steps in [this guide](/integrations/implicit-accounts).\n- Accounts must have enough tokens to cover its storage which currently costs `0.0001 NEAR` per byte. This equates to a minimum balance of `0.00182 NEAR` for an account with one access key. You can query the live storage price using the [`protocol-config`](https://docs.near.org/api/rpc/setup#protocol-config) RPC endpoint. For more details on storage fees see [this section of the economics paper](https://pages.near.org/papers/economics-in-sharded-blockchain/#transaction-and-storage-fees).\n\n## Transfer from Function Call {#transfer-from-function-call}\n\nNEAR allows transfers to happen within a function call. More importantly, when an account is deployed with some contract, it is possible that the only way to transfer tokens from that account is through a function call. Therefore, exchanges need to support transfers through function calls as well. We recommend the following approach:\n\nExchange can [query block by height](/api/rpc/setup#block) to get blocks on each height, and for every block,\n[query its chunk](/api/rpc/setup#chunk) to obtain the transactions included in the block. For each transaction,\n[query its status](/api/rpc/setup#transaction-status-with-receipts) to see the receipts generated from\ntransactions. Since exchanges are only interested in transfers to their addresses, they only need to filter receipts that\nonly contain `Transfer` action and whose `predecessor_id` is not `system` (receipts with `predecessor_id` equal to `system`\nare [refunds](https://nomicon.io/RuntimeSpec/Refunds.html)).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2102, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32": {"__data__": {"id_": "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da51e0c7-f947-42cb-9afd-9a384de63b92", "node_type": "1", "metadata": {}, "hash": "324d0e2e7ea2261f6af7d38dd17ad488ae4ff457c2453eeff1ea756751ea8042", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46", "node_type": "1", "metadata": {}, "hash": "bb193e9cf1e3df6e0458dfb57662d4a0015dea1bd238d3029f90fc5e9d515949", "class_name": "RelatedNodeInfo"}}, "text": "Then, to check whether the receipt succeeds, it is sufficient\nto look for the `receipt_id` in `receipts_outcome` and see if its status is `SuccessValue`.\n\nAlternatively, exchange can use [the indexer framework](https://github.com/near/nearcore/tree/master/chain/indexer)\nto help index on-chain data which include receipts. An example usage of the indexer can be found [here](https://github.com/near/nearcore/tree/master/tools/indexer/example).\n\nBelow we include examples from the contracts that are likely to be used to perform transfers through function calls.\n\n**Example of transfer from a lockup contract**\n\nA contract `evgeny.lockup.near` is deployed and we can check its owner by\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view evgeny.lockup.near get_owner_account_id\n  # View call: evgeny.lockup.near.get_owner_account_id()\n  # 'evgeny.near'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only evgeny.lockup.near get_owner_account_id json-args '{}' network-config testnet now\n  # View call: evgeny.lockup.near.get_owner_account_id()\n  # 'evgeny.near'\n  ```\n  </TabItem>\n</Tabs>\n\nNow we want to transfer some unlocked tokens (1 NEAR) with the following call\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call evgeny.lockup.near transfer '{\"amount\":\"1000000000000000000000000\", \"receiver_id\": \"evgeny.near\"}' --accountId=evgeny.near\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction evgeny.lockup.near transfer json-args '{\"amount\":\"1000000000000000000000000\", \"receiver_id\": \"evgeny.near\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as evgeny.", "mimetype": "text/plain", "start_char_idx": 2103, "end_char_idx": 3874, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46": {"__data__": {"id_": "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32", "node_type": "1", "metadata": {}, "hash": "00263ae0bd0d0cc746475d5474a605446ddd8d59758f4429659c77defb6a8823", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b493a6c-e46b-47d8-b11d-914ba5571336", "node_type": "1", "metadata": {}, "hash": "04477faf007d323b09fd480879848fce77a313a6a277b962e12e214995f1bb92", "class_name": "RelatedNodeInfo"}}, "text": "near network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n**Note**: the response below can be obtained by hitting the RPC with the transaction hash and NEAR account like this:\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=txstatus method=EXPERIMENTAL_tx_status \\\n  params:='[ \"GXP8YaSonoN2eBY6dB3FbMN2NyYD2JeJJvKdvbL4Jmb2\", \"evgeny.near\"]'\n```\n\n<details>\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"123\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"evgeny.near\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"FunctionCall\": {\n                  \"args\": \"eyJhbW91bnQiOiIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwicmVjZWl2ZXJfaWQiOiJldmdlbnkubmVhciJ9\",\n                  \"deposit\": \"0\",\n                  \"gas\": 100000000000000,\n                  \"method_name\": \"transfer\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"evgeny.near\",\n            \"signer_public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\"\n          }\n        },\n        \"receipt_id\": \"CyJL22SYqt26qgh2XVnk9MGfvzgyiiq5Lny7DdbTdTWU\",\n        \"receiver_id\": \"evgeny.lockup.near\"\n      },\n      {\n        \"predecessor_id\": \"evgeny.lockup.near\",", "mimetype": "text/plain", "start_char_idx": 3874, "end_char_idx": 5285, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b493a6c-e46b-47d8-b11d-914ba5571336": {"__data__": {"id_": "2b493a6c-e46b-47d8-b11d-914ba5571336", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46", "node_type": "1", "metadata": {}, "hash": "bb193e9cf1e3df6e0458dfb57662d4a0015dea1bd238d3029f90fc5e9d515949", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "37feae50-62fe-474d-a274-037aff0e8aba", "node_type": "1", "metadata": {}, "hash": "d5b192c806dfeb174430e7a48ec0fcd764bcfd8766950fd41f31dcadcdd8410b", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"1000000000000000000000000\"\n                }\n              }\n            ],\n            \"gas_price\": \"186029458\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"evgeny.near\",\n            \"signer_public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\"\n          }\n        },\n        \"receipt_id\": \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\",\n        \"receiver_id\": \"evgeny.near\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"19200274886926125000\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"evgeny.near\",\n            \"signer_public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\"\n          }\n        },\n        \"receipt_id\": \"J1bBKH43nXHYg4NuS97R1PFzdZchrJboVAdRsK5NRrAv\",\n        \"receiver_id\": \"evgeny.near\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"18655658845681462514128\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"evgeny.near\",", "mimetype": "text/plain", "start_char_idx": 5294, "end_char_idx": 6923, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "37feae50-62fe-474d-a274-037aff0e8aba": {"__data__": {"id_": "37feae50-62fe-474d-a274-037aff0e8aba", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b493a6c-e46b-47d8-b11d-914ba5571336", "node_type": "1", "metadata": {}, "hash": "04477faf007d323b09fd480879848fce77a313a6a277b962e12e214995f1bb92", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "91c824ff-45dd-4e10-8c84-5e4ee130af08", "node_type": "1", "metadata": {}, "hash": "d6a83940a4c08440c37e773bff4c2c1ec143da4e8fd2e633d96411e76ab5ec11", "class_name": "RelatedNodeInfo"}}, "text": "\"signer_public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\"\n          }\n        },\n        \"receipt_id\": \"6PFaxnNvK5r6qxBq5WfV9uGjoNM6qjhHwLehLP1qak9d\",\n        \"receiver_id\": \"evgeny.near\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"9boEKq9G1UFsEuzmuQrxh5dkRc8xsv8PSPGEkYiTyRLj\",\n        \"id\": \"CyJL22SYqt26qgh2XVnk9MGfvzgyiiq5Lny7DdbTdTWU\",\n        \"outcome\": {\n          \"executor_id\": \"evgeny.lockup.near\",\n          \"gas_burnt\": 3574640311481,\n          \"logs\": [\n            \"Transferring 1000000000000000000000000 to account @evgeny.near\"\n          ],\n          \"receipt_ids\": [\n            \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\",\n            \"6PFaxnNvK5r6qxBq5WfV9uGjoNM6qjhHwLehLP1qak9d\"\n          ],\n          \"status\": {\n            \"SuccessReceiptId\": \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\"\n          },\n          \"tokens_burnt\": \"357464031148100000000\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"7qn4BjmMD4QbyVvMa8QEzm7h5YuhoGTFTgLeNMUp85UQ\",\n        \"id\": \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\",", "mimetype": "text/plain", "start_char_idx": 6936, "end_char_idx": 8041, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "91c824ff-45dd-4e10-8c84-5e4ee130af08": {"__data__": {"id_": "91c824ff-45dd-4e10-8c84-5e4ee130af08", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "37feae50-62fe-474d-a274-037aff0e8aba", "node_type": "1", "metadata": {}, "hash": "d5b192c806dfeb174430e7a48ec0fcd764bcfd8766950fd41f31dcadcdd8410b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5aa5811-25fd-4a4c-8d35-9e33eb15671b", "node_type": "1", "metadata": {}, "hash": "93a82369b80d108cfd9ca1842a561626219c4aa9d8dac2087ada4b2d5c3e814e", "class_name": "RelatedNodeInfo"}}, "text": "\"outcome\": {\n          \"executor_id\": \"evgeny.near\",\n          \"gas_burnt\": 223182562500,\n          \"logs\": [],\n          \"receipt_ids\": [\"J1bBKH43nXHYg4NuS97R1PFzdZchrJboVAdRsK5NRrAv\"],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"22318256250000000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"AwHdk5dushTSXHFBt3R5MiexjiXybwdnEaB7L9iJ5F6t\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"46788Ay85YGnQaH5tfbboQNWJs3gyXsPbcWzRyxqw56K\",\n        \"id\": \"J1bBKH43nXHYg4NuS97R1PFzdZchrJboVAdRsK5NRrAv\",\n        \"outcome\": {\n          \"executor_id\": \"evgeny.near\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"7qn4BjmMD4QbyVvMa8QEzm7h5YuhoGTFTgLeNMUp85UQ\",\n        \"id\": \"6PFaxnNvK5r6qxBq5WfV9uGjoNM6qjhHwLehLP1qak9d\",\n        \"outcome\": {\n          \"executor_id\": \"evgeny.near\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",", "mimetype": "text/plain", "start_char_idx": 8050, "end_char_idx": 9388, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5aa5811-25fd-4a4c-8d35-9e33eb15671b": {"__data__": {"id_": "d5aa5811-25fd-4a4c-8d35-9e33eb15671b", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "91c824ff-45dd-4e10-8c84-5e4ee130af08", "node_type": "1", "metadata": {}, "hash": "d6a83940a4c08440c37e773bff4c2c1ec143da4e8fd2e633d96411e76ab5ec11", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f01159e-3989-41ad-beff-6e40e434f9b3", "node_type": "1", "metadata": {}, "hash": "5771eb486651a59214107721bef9544ff2899d0b47bcae55fa0b950c89baa398", "class_name": "RelatedNodeInfo"}}, "text": "\"hash\": \"9RRJpH5VdDxsHpp323EshcAauV5wUNDyW9FpEJBRXXq8\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJhbW91bnQiOiIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwicmVjZWl2ZXJfaWQiOiJldmdlbnkubmVhciJ9\",\n            \"deposit\": \"0\",\n            \"gas\": 100000000000000,\n            \"method_name\": \"transfer\"\n          }\n        }\n      ],\n      \"hash\": \"GXP8YaSonoN2eBY6dB3FbMN2NyYD2JeJJvKdvbL4Jmb2\",\n      \"nonce\": 6,\n      \"public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\",\n      \"receiver_id\": \"evgeny.lockup.near\",\n      \"signature\": \"ed25519:4nfzTMpQJKCY3KaqUTFig4Xy9uxwbMeQpMJjtNKsXmwiVqgcVSWRguZEgZM8L2x1jvdpZHsYjLCxc9cSBamXuXPH\",\n      \"signer_id\": \"evgeny.near\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"4u7maz2U43W4DPxqQE8KoRNi5dTRHrAsKsFk2qDQsQEw\",\n      \"id\": \"GXP8YaSonoN2eBY6dB3FbMN2NyYD2JeJJvKdvbL4Jmb2\",\n      \"outcome\": {\n        \"executor_id\": \"evgeny.near\",\n        \"gas_burnt\": 2428086459116,\n        \"logs\": [],", "mimetype": "text/plain", "start_char_idx": 9401, "end_char_idx": 10491, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9f01159e-3989-41ad-beff-6e40e434f9b3": {"__data__": {"id_": "9f01159e-3989-41ad-beff-6e40e434f9b3", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5aa5811-25fd-4a4c-8d35-9e33eb15671b", "node_type": "1", "metadata": {}, "hash": "93a82369b80d108cfd9ca1842a561626219c4aa9d8dac2087ada4b2d5c3e814e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f9d1c655-698d-4a26-bf09-aec1f659edd6", "node_type": "1", "metadata": {}, "hash": "05a19fe6e6369d0a26e280b8b29844fe0940cdcea69c5641c2ebb231542de90b", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_ids\": [\"CyJL22SYqt26qgh2XVnk9MGfvzgyiiq5Lny7DdbTdTWU\"],\n        \"status\": {\n          \"SuccessReceiptId\": \"CyJL22SYqt26qgh2XVnk9MGfvzgyiiq5Lny7DdbTdTWU\"\n        },\n        \"tokens_burnt\": \"242808645911600000000\"\n      },\n      \"proof\": []\n    }\n  }\n}\n```\n</details>\n\nAs we can see, there are four receipts generated in this function call. If we apply the criteria mentioned above, we can\nfind in `receipts` field this object\n\n```json\n{\n  \"predecessor_id\": \"evgeny.lockup.near\",\n  \"receipt\": {\n    \"Action\": {\n      \"actions\": [\n        {\n          \"Transfer\": {\n            \"deposit\": \"1000000000000000000000000\"\n          }\n        }\n      ],\n      \"gas_price\": \"186029458\",\n      \"input_data_ids\": [],\n      \"output_data_receivers\": [],\n      \"signer_id\": \"evgeny.near\",\n      \"signer_public_key\": \"ed25519:BVRTxEEMx3gFceSgJtnvPFbSnPDwwUzHe6KGduRh5Byq\"\n    }\n  },\n  \"receipt_id\": \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\",\n  \"receiver_id\": \"evgeny.near\"\n}\n```\n\nwhich contains only `Transfer` action and whose `predecessor_id` is not `system`.", "mimetype": "text/plain", "start_char_idx": 10500, "end_char_idx": 11558, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f9d1c655-698d-4a26-bf09-aec1f659edd6": {"__data__": {"id_": "f9d1c655-698d-4a26-bf09-aec1f659edd6", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9f01159e-3989-41ad-beff-6e40e434f9b3", "node_type": "1", "metadata": {}, "hash": "5771eb486651a59214107721bef9544ff2899d0b47bcae55fa0b950c89baa398", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d86f0df7-bb65-4182-8227-0208f5a9e18c", "node_type": "1", "metadata": {}, "hash": "56df7dfe891f394b8bc3392e3937c9d01f43023e9cf1d121ab6c72e7207d6816", "class_name": "RelatedNodeInfo"}}, "text": "Now we can check the status of the\nexecution by looking for the same receipt id `EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC` in `receipts_outcome` field\nof the rpc return result, this leads us to this execution outcome\n\n```json\n{\n  \"block_hash\": \"7qn4BjmMD4QbyVvMa8QEzm7h5YuhoGTFTgLeNMUp85UQ\",\n  \"id\": \"EvHfj4fUyVuLBRKNdCZmFGr4WfqwYf7YCbzFsRGFTFJC\",\n  \"outcome\": {\n    \"executor_id\": \"evgeny.near\",\n    \"gas_burnt\": 223182562500,\n    \"logs\": [],\n    \"receipt_ids\": [\"J1bBKH43nXHYg4NuS97R1PFzdZchrJboVAdRsK5NRrAv\"],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"tokens_burnt\": \"22318256250000000000\"\n  },\n  \"proof\": [\n    {\n      \"direction\": \"Right\",\n      \"hash\": \"AwHdk5dushTSXHFBt3R5MiexjiXybwdnEaB7L9iJ5F6t\"\n    }\n  ]\n}\n```\n\nand its status contains `SuccessValue`, which indicates that the receipt has succeeded. Therefore we know that\n`1000000000000000000000000` yoctoNEAR, or 1 NEAR has been successfully transferred.\n\n**Example of transfer from a multisig contract**\n\nMutisig contract, as the name suggests, uses multiple signatures to confirm a transaction and therefore, actions performed\nby the multisig contract involves multiple transactions. In the following example, we will show how a transfer is done from\na multisig contract that requires two confirmations.\n\n- First step: `add_request_and_confirm`. This initiates the action that the multisig contract wants to perform with one\n  confirmation.", "mimetype": "text/plain", "start_char_idx": 11559, "end_char_idx": 12979, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d86f0df7-bb65-4182-8227-0208f5a9e18c": {"__data__": {"id_": "d86f0df7-bb65-4182-8227-0208f5a9e18c", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f9d1c655-698d-4a26-bf09-aec1f659edd6", "node_type": "1", "metadata": {}, "hash": "05a19fe6e6369d0a26e280b8b29844fe0940cdcea69c5641c2ebb231542de90b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0f588659-8650-4f00-9097-2cb22d19791a", "node_type": "1", "metadata": {}, "hash": "d3e8f25743d49efa935745eeb4ddb5213750e73545bffe8bfd44c5c835771b55", "class_name": "RelatedNodeInfo"}}, "text": "The multisig contract `multsigtest.testnet` wants to transfer 1 NEAR to `bowen` and it first\n  sends a transaction that calls `add_request_and_confirm` with a request\n\n```json\n{\n  \"request\": {\n    \"receiver_id\": \"bowen\",\n    \"actions\": [\n      {\n        \"type\": \"Transfer\",\n        \"amount\": \"1000000000000000000000000\"\n      }\n    ]\n  }\n}\n```\n\nthat indicates it wants to transfer 1 NEAR to `bowen`. Notice that this transaction only records the action\nbut does not perform the actual transfer. The transaction result is as follows:\n\n<details>\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"123\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"3069687780141648922140\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"multisigtest.testnet\",\n            \"signer_public_key\": \"ed25519:JDewsbE7nz6orFD4zJ3mVzqhfcaoSD6Hmi5as3AHHiTt\"\n          }\n        },\n        \"receipt_id\": \"4qgDptd7Wm6vswAhWMCsVpTjBEkmLJEUxSNVQS1wu3rD\",\n        \"receiver_id\": \"multisigtest.testnet\"\n      }\n    ],\n    \"receipts_outcome\": [\n      {\n        \"block_hash\": \"6uJWHTvUrtFQAurUyfuAfy9EdoR9FhLodGh44aHJta6m\",\n        \"id\": \"94LiYwKJEDherHMNg9fqLy9ShFTDiQiUN3nDaGmLZwth\",\n        \"outcome\": {\n          \"executor_id\": \"multisigtest.", "mimetype": "text/plain", "start_char_idx": 12980, "end_char_idx": 14526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0f588659-8650-4f00-9097-2cb22d19791a": {"__data__": {"id_": "0f588659-8650-4f00-9097-2cb22d19791a", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d86f0df7-bb65-4182-8227-0208f5a9e18c", "node_type": "1", "metadata": {}, "hash": "56df7dfe891f394b8bc3392e3937c9d01f43023e9cf1d121ab6c72e7207d6816", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "19d87901-3be5-47cd-9753-8ab392452c50", "node_type": "1", "metadata": {}, "hash": "9a5c3bbd33423b120ae6b03d32be0bc753f709da53faf0439c93123c15718ad3", "class_name": "RelatedNodeInfo"}}, "text": "testnet\",\n          \"gas_burnt\": 8024094920263,\n          \"logs\": [],\n          \"receipt_ids\": [\"4qgDptd7Wm6vswAhWMCsVpTjBEkmLJEUxSNVQS1wu3rD\"],\n          \"status\": {\n            \"SuccessValue\": \"OA==\"\n          },\n          \"tokens_burnt\": \"802409492026300000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"GedzmwRkxA5VkT8GLBCnrPUmnEhWPXadPmiq4Ho1s9pH\"\n          },\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"GirkzdS9YpsAz5fXuL5T3rXd93aRcnXNAdXYi241qpWK\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"4JyQ6guJKeWZxxXrKndLDuSa5URuirmBi6RzsbKYFsBE\",\n        \"id\": \"4qgDptd7Wm6vswAhWMCsVpTjBEkmLJEUxSNVQS1wu3rD\",\n        \"outcome\": {\n          \"executor_id\": \"multisigtest.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"OA==\"\n    },", "mimetype": "text/plain", "start_char_idx": 14526, "end_char_idx": 15570, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "19d87901-3be5-47cd-9753-8ab392452c50": {"__data__": {"id_": "19d87901-3be5-47cd-9753-8ab392452c50", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0f588659-8650-4f00-9097-2cb22d19791a", "node_type": "1", "metadata": {}, "hash": "d3e8f25743d49efa935745eeb4ddb5213750e73545bffe8bfd44c5c835771b55", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8930a01f-cffa-44c2-b3e6-05392d83c23b", "node_type": "1", "metadata": {}, "hash": "35fe27fecabf552937711e355bf5962265ad5b3c2a24306de967fae8b909cee4", "class_name": "RelatedNodeInfo"}}, "text": "\"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZXF1ZXN0Ijp7InJlY2VpdmVyX2lkIjoiYm93ZW4iLCJhY3Rpb25zIjpbeyJ0eXBlIjoiVHJhbnNmZXIiLCJhbW91bnQiOiIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIn1dfX0=\",\n            \"deposit\": \"0\",\n            \"gas\": 30000000000000,\n            \"method_name\": \"add_request_and_confirm\"\n          }\n        }\n      ],\n      \"hash\": \"FGREJkC1e8y95Rc35iD1LVRiDy1WcAZhAxxkSinfb2mL\",\n      \"nonce\": 10,\n      \"public_key\": \"ed25519:JDewsbE7nz6orFD4zJ3mVzqhfcaoSD6Hmi5as3AHHiTt\",\n      \"receiver_id\": \"multisigtest.testnet\",\n      \"signature\": \"ed25519:3NUKXd4uj2eEBqGQtRAxkTFW7UfG44tjvQNNHBDvN9ZswTTMRsDrMJSd1U3GqWF7QToqWQR9J8atNEVTemSWYw41\",\n      \"signer_id\": \"multisigtest.testnet\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"6uJWHTvUrtFQAurUyfuAfy9EdoR9FhLodGh44aHJta6m\",\n      \"id\": \"FGREJkC1e8y95Rc35iD1LVRiDy1WcAZhAxxkSinfb2mL\",\n      \"outcome\": {\n        \"executor_id\": \"multisigtest.testnet\",\n        \"gas_burnt\": 2428204963618,\n        \"logs\": [],", "mimetype": "text/plain", "start_char_idx": 15575, "end_char_idx": 16608, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8930a01f-cffa-44c2-b3e6-05392d83c23b": {"__data__": {"id_": "8930a01f-cffa-44c2-b3e6-05392d83c23b", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "19d87901-3be5-47cd-9753-8ab392452c50", "node_type": "1", "metadata": {}, "hash": "9a5c3bbd33423b120ae6b03d32be0bc753f709da53faf0439c93123c15718ad3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "31a986a3-7f6d-47df-aa79-ae40521a6795", "node_type": "1", "metadata": {}, "hash": "412c47fbbf9357d239912a1b8a0fe763aa2bb7b4050a50e53d3b4d9e4f6c7fcb", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_ids\": [\"94LiYwKJEDherHMNg9fqLy9ShFTDiQiUN3nDaGmLZwth\"],\n        \"status\": {\n          \"SuccessReceiptId\": \"94LiYwKJEDherHMNg9fqLy9ShFTDiQiUN3nDaGmLZwth\"\n        },\n        \"tokens_burnt\": \"242820496361800000000\"\n      },\n      \"proof\": [\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"AsNAQabPFkmaugRGhCbzcEcR8Gnd22WXxPM2fb2cwHiv\"\n        },\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"GirkzdS9YpsAz5fXuL5T3rXd93aRcnXNAdXYi241qpWK\"\n        }\n      ]\n    }\n  }\n}\n```\n</details>\n\n- Second step: `confirm`. A second transaction is sent to confirm the transfer. This transaction takes the request id\n  returned by the first transaction and does the actual transfer. The transaction result is as follows\n\n<details>\n<summary>**Example Response:**</summary>\n\n```json\n{\n  \"id\": \"123\",\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"receipts\": [\n      {\n        \"predecessor_id\": \"multisigtest.testnet\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"1000000000000000000000000\"\n                }\n              }\n            ],\n            \"gas_price\": \"451542320\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"multisigtest.testnet\",\n            \"signer_public_key\": \"ed25519:BmVX32jhvEd8d8outiQdjf66GGYV3pb7kaxrKTdNisCz\"\n          }\n        },", "mimetype": "text/plain", "start_char_idx": 16617, "end_char_idx": 18036, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31a986a3-7f6d-47df-aa79-ae40521a6795": {"__data__": {"id_": "31a986a3-7f6d-47df-aa79-ae40521a6795", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8930a01f-cffa-44c2-b3e6-05392d83c23b", "node_type": "1", "metadata": {}, "hash": "35fe27fecabf552937711e355bf5962265ad5b3c2a24306de967fae8b909cee4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b08a2609-10a6-4ec6-a7f6-a117e1bac89b", "node_type": "1", "metadata": {}, "hash": "9c2dfd990d0130863d3f2d0b358c2e04fd503b9272f5451819e3d0a0d05b56cb", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_id\": \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\",\n        \"receiver_id\": \"bowen\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"78458115804795000000\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"multisigtest.testnet\",\n            \"signer_public_key\": \"ed25519:BmVX32jhvEd8d8outiQdjf66GGYV3pb7kaxrKTdNisCz\"\n          }\n        },\n        \"receipt_id\": \"6SxC9GfYdjqm7Ao5EAw51XUAjgoN8Lj2X9xJfxjDQYXd\",\n        \"receiver_id\": \"multisigtest.testnet\"\n      },\n      {\n        \"predecessor_id\": \"system\",\n        \"receipt\": {\n          \"Action\": {\n            \"actions\": [\n              {\n                \"Transfer\": {\n                  \"deposit\": \"112870156274913516718240\"\n                }\n              }\n            ],\n            \"gas_price\": \"0\",\n            \"input_data_ids\": [],\n            \"output_data_receivers\": [],\n            \"signer_id\": \"multisigtest.testnet\",\n            \"signer_public_key\": \"ed25519:BmVX32jhvEd8d8outiQdjf66GGYV3pb7kaxrKTdNisCz\"\n          }\n        },\n        \"receipt_id\": \"CHfzz6NLcQMyiLHBQoczhgm5BFjLVfv9B7eCyXKLhhcT\",\n        \"receiver_id\": \"multisigtest.testnet\"\n      }\n    ],", "mimetype": "text/plain", "start_char_idx": 18045, "end_char_idx": 19454, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b08a2609-10a6-4ec6-a7f6-a117e1bac89b": {"__data__": {"id_": "b08a2609-10a6-4ec6-a7f6-a117e1bac89b", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31a986a3-7f6d-47df-aa79-ae40521a6795", "node_type": "1", "metadata": {}, "hash": "412c47fbbf9357d239912a1b8a0fe763aa2bb7b4050a50e53d3b4d9e4f6c7fcb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3a6d952e-409c-4752-8659-7ae15deb47e8", "node_type": "1", "metadata": {}, "hash": "59abd07b363193c8c14ff2c28531deffa85ba51bd6305c6fab75c2ac0bb9fa14", "class_name": "RelatedNodeInfo"}}, "text": "\"receipts_outcome\": [\n      {\n        \"block_hash\": \"9JEiMrZ1SpAUEbQswde3Diptzwy35Vrvd41VZWG9hYVE\",\n        \"id\": \"FfuhYhsgFL7sLC8pk1tuRnMHJdqycE6gEcfgZLW9fmFB\",\n        \"outcome\": {\n          \"executor_id\": \"multisigtest.testnet\",\n          \"gas_burnt\": 10109796553814,\n          \"logs\": [],\n          \"receipt_ids\": [\n            \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\",\n            \"CHfzz6NLcQMyiLHBQoczhgm5BFjLVfv9B7eCyXKLhhcT\"\n          ],\n          \"status\": {\n            \"SuccessReceiptId\": \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\"\n          },\n          \"tokens_burnt\": \"1010979655381400000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",\n            \"hash\": \"9e2UcG6qBRahBh3V2Z8bGJLh5c4jXfZdP3WBJkCpJCfj\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"4LkVfqyhhrxDdVFmow6NxLf1jTaj6XVr7CVcUxxySd1R\",\n        \"id\": \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\",\n        \"outcome\": {\n          \"executor_id\": \"bowen\",\n          \"gas_burnt\": 223182562500,\n          \"logs\": [],", "mimetype": "text/plain", "start_char_idx": 19459, "end_char_idx": 20502, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3a6d952e-409c-4752-8659-7ae15deb47e8": {"__data__": {"id_": "3a6d952e-409c-4752-8659-7ae15deb47e8", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b08a2609-10a6-4ec6-a7f6-a117e1bac89b", "node_type": "1", "metadata": {}, "hash": "9c2dfd990d0130863d3f2d0b358c2e04fd503b9272f5451819e3d0a0d05b56cb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "55262e08-452d-4578-b6ee-a605289bc835", "node_type": "1", "metadata": {}, "hash": "fde55a848c92dc72669a21b8d3fc3034ead8ad27a71874b4d11611c503143722", "class_name": "RelatedNodeInfo"}}, "text": "\"receipt_ids\": [\"6SxC9GfYdjqm7Ao5EAw51XUAjgoN8Lj2X9xJfxjDQYXd\"],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"22318256250000000000\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Right\",\n            \"hash\": \"FFWaWUFt6sNx5XNHzGYsYBSYFWtGPoww5XQz1QmLVc8i\"\n          }\n        ]\n      },\n      {\n        \"block_hash\": \"G6LDdnAa2b38TB4KZ89HAyVgfgyiRPDDgSxoZypbUYpx\",\n        \"id\": \"6SxC9GfYdjqm7Ao5EAw51XUAjgoN8Lj2X9xJfxjDQYXd\",\n        \"outcome\": {\n          \"executor_id\": \"multisigtest.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": []\n      },\n      {\n        \"block_hash\": \"4LkVfqyhhrxDdVFmow6NxLf1jTaj6XVr7CVcUxxySd1R\",\n        \"id\": \"CHfzz6NLcQMyiLHBQoczhgm5BFjLVfv9B7eCyXKLhhcT\",\n        \"outcome\": {\n          \"executor_id\": \"multisigtest.testnet\",\n          \"gas_burnt\": 0,\n          \"logs\": [],\n          \"receipt_ids\": [],\n          \"status\": {\n            \"SuccessValue\": \"\"\n          },\n          \"tokens_burnt\": \"0\"\n        },\n        \"proof\": [\n          {\n            \"direction\": \"Left\",", "mimetype": "text/plain", "start_char_idx": 20513, "end_char_idx": 21747, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "55262e08-452d-4578-b6ee-a605289bc835": {"__data__": {"id_": "55262e08-452d-4578-b6ee-a605289bc835", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3a6d952e-409c-4752-8659-7ae15deb47e8", "node_type": "1", "metadata": {}, "hash": "59abd07b363193c8c14ff2c28531deffa85ba51bd6305c6fab75c2ac0bb9fa14", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c08b169e-e762-4fb4-ac12-7838f3bbf11c", "node_type": "1", "metadata": {}, "hash": "fd17237bd01cd96c36e482ecc1975f88906ae998fdea56dd38ece0900066fad3", "class_name": "RelatedNodeInfo"}}, "text": "\"hash\": \"DpDYAEKZTtSomgyeNcJ2i4qjvfqnCtf1CXa83Cz5wvEy\"\n          }\n        ]\n      }\n    ],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"transaction\": {\n      \"actions\": [\n        {\n          \"FunctionCall\": {\n            \"args\": \"eyJyZXF1ZXN0X2lkIjo4fQ==\",\n            \"deposit\": \"0\",\n            \"gas\": 250000000000000,\n            \"method_name\": \"confirm\"\n          }\n        }\n      ],\n      \"hash\": \"Fu39vwxC4mu9ks1DZA5Cib63RnBMHpFonk2DcbpioEYc\",\n      \"nonce\": 9,\n      \"public_key\": \"ed25519:BmVX32jhvEd8d8outiQdjf66GGYV3pb7kaxrKTdNisCz\",\n      \"receiver_id\": \"multisigtest.testnet\",\n      \"signature\": \"ed25519:2raQq7t3cmzSL2krE2xaNqXhAw7cKMoXrBjT2ZhAGfCVtGwzbbQ8zkB17vrCSFZDbFmPWSJpoqsw8qPZZiorwSzS\",\n      \"signer_id\": \"multisigtest.testnet\"\n    },\n    \"transaction_outcome\": {\n      \"block_hash\": \"9JEiMrZ1SpAUEbQswde3Diptzwy35Vrvd41VZWG9hYVE\",\n      \"id\": \"Fu39vwxC4mu9ks1DZA5Cib63RnBMHpFonk2DcbpioEYc\",\n      \"outcome\": {\n        \"executor_id\": \"multisigtest.testnet\",\n        \"gas_burnt\": 2427972426482,\n        \"logs\": [],\n        \"receipt_ids\": [\"FfuhYhsgFL7sLC8pk1tuRnMHJdqycE6gEcfgZLW9fmFB\"],", "mimetype": "text/plain", "start_char_idx": 21760, "end_char_idx": 22878, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c08b169e-e762-4fb4-ac12-7838f3bbf11c": {"__data__": {"id_": "c08b169e-e762-4fb4-ac12-7838f3bbf11c", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "55262e08-452d-4578-b6ee-a605289bc835", "node_type": "1", "metadata": {}, "hash": "fde55a848c92dc72669a21b8d3fc3034ead8ad27a71874b4d11611c503143722", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86cd6a8e-d2b7-4a10-8b80-068317b17901", "node_type": "1", "metadata": {}, "hash": "ecab0a27f7ed9e871c1dcc037b668ac7725c035e376f65ad9c4ef8a9b84887e7", "class_name": "RelatedNodeInfo"}}, "text": "\"status\": {\n          \"SuccessReceiptId\": \"FfuhYhsgFL7sLC8pk1tuRnMHJdqycE6gEcfgZLW9fmFB\"\n        },\n        \"tokens_burnt\": \"242797242648200000000\"\n      },\n      \"proof\": [\n        {\n          \"direction\": \"Right\",\n          \"hash\": \"B6hN48qeVP8J3hP8XGcANShM264QkNjgJAfMtsuknqex\"\n        }\n      ]\n    }\n  }\n}\n```\n</details>\n\nNotice that similar to the transfer from lockup contract, there is also one receipt in the `receipts` field that meet\nour requirements:\n\n```json\n{\n  \"predecessor_id\": \"multisigtest.testnet\",\n  \"receipt\": {\n    \"Action\": {\n      \"actions\": [\n        {\n          \"Transfer\": {\n            \"deposit\": \"1000000000000000000000000\"\n          }\n        }\n      ],\n      \"gas_price\": \"451542320\",\n      \"input_data_ids\": [],\n      \"output_data_receivers\": [],\n      \"signer_id\": \"multisigtest.testnet\",\n      \"signer_public_key\": \"ed25519:BmVX32jhvEd8d8outiQdjf66GGYV3pb7kaxrKTdNisCz\"\n    }\n  },\n  \"receipt_id\": \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\",\n  \"receiver_id\": \"bowen\"\n}\n```\n\nand we can find its outcome in `receipts_outcome`:\n\n```json\n{\n  \"block_hash\": \"4LkVfqyhhrxDdVFmow6NxLf1jTaj6XVr7CVcUxxySd1R\",\n  \"id\": \"DZbHTEf3i3XznK4oJHQfcrteoiCL6WykRiA8vsn4LmAy\",\n  \"outcome\": {\n    \"executor_id\": \"bowen\",", "mimetype": "text/plain", "start_char_idx": 22887, "end_char_idx": 24122, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86cd6a8e-d2b7-4a10-8b80-068317b17901": {"__data__": {"id_": "86cd6a8e-d2b7-4a10-8b80-068317b17901", "embedding": null, "metadata": {"file_path": "./near_dist/accounts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158", "node_type": "4", "metadata": {}, "hash": "16971a29c09b3ea9608faeee167ee3730c6f46cedc7dd71ed2086cc8d5fd1e13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c08b169e-e762-4fb4-ac12-7838f3bbf11c", "node_type": "1", "metadata": {}, "hash": "fd17237bd01cd96c36e482ecc1975f88906ae998fdea56dd38ece0900066fad3", "class_name": "RelatedNodeInfo"}}, "text": "\"gas_burnt\": 223182562500,\n    \"logs\": [],\n    \"receipt_ids\": [\"6SxC9GfYdjqm7Ao5EAw51XUAjgoN8Lj2X9xJfxjDQYXd\"],\n    \"status\": {\n      \"SuccessValue\": \"\"\n    },\n    \"tokens_burnt\": \"22318256250000000000\"\n  },\n  \"proof\": [\n    {\n      \"direction\": \"Right\",\n      \"hash\": \"FFWaWUFt6sNx5XNHzGYsYBSYFWtGPoww5XQz1QmLVc8i\"\n    }\n  ]\n}\n```\n\nwhich indicates that the transaction is successful.\n\n:::tip Got a question?\n<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"> Ask it on StackOverflow! </a>\n:::", "mimetype": "text/plain", "start_char_idx": 24127, "end_char_idx": 24678, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52195a62-8b1f-4a98-aeb7-310160caccb2": {"__data__": {"id_": "52195a62-8b1f-4a98-aeb7-310160caccb2", "embedding": null, "metadata": {"file_path": "./near_dist/storage.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f70e6ea-c9e2-43ae-911b-28ed21871c24", "node_type": "4", "metadata": {}, "hash": "f6b3f414bfb05847f280c79586ac055390168d49c8c8f1a67c9a2f55ff98e801", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: storage\ntitle: Million Small Deposits\n---\n\nOn NEAR, your contract pays for the storage it uses. This means that the more data you store, the more balance you need to cover for storage. If you don't handle these costs correctly (e.g. asking the user to cover their storage usage), then a million little deposits can drain your contract of its funds.\n\nLet's walk through an example:\n\n1. You launch [a guest book app](https://examples.near.org/guest-book-js), deploying your app's smart contract to the account `example.near`\n2. Visitors to your app can add messages to the guest book. This means your users will pay a small gas fee to **store** their message to your contract.\n3. When a new message comes in, NEAR will check if `example.near` has enough balance to cover the new storage needs. If it does not, the transaction will fail.\n\nNote that this can create an attack surface. If sending data to your guest book is inexpensive to the user while costing the contract owner significantly more, a malicious user can exploit the imbalance to make maintaining the contract prohibitively expensive.\n\nOne possible way to tackle this problem is asking the user to attach money to the call to cover the storage used by their message.\n\n:::tip\nRemember that you can release the *balance locked for storage* by simply deleting data from the contract.\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1354, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bbfb8d40-ac36-4a54-a645-8bf1c4d91fb1": {"__data__": {"id_": "bbfb8d40-ac36-4a54-a645-8bf1c4d91fb1", "embedding": null, "metadata": {"file_path": "./near_dist/00-overview.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ca7db7e5-0dd3-491e-b7e0-5c6cd5a2397d", "node_type": "4", "metadata": {}, "hash": "d3ff5918537e80183b7aaf953359502e03cf54626543833cbd77a6785684c746", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 1\nsidebar_label: \"Overview\"\ntitle: \"Intermediate concepts (cross-contract calls and more)\"\n---\n\nimport accessKeys from '/docs/assets/crosswords/keys-cartoon-good--alcantara_gabriel.near--Bagriel_5_10.png';\n\n# Intermediate concepts\n\nThis chapter will go a bit faster than the previous ones.\n\nWe're going to be covering an important part of smart contract development: cross-contract calls.\n\n## Cross-contract calls\n\nA cross-contract call is when a smart contract calls another smart contract. For instance, if `alice.near` calls contract A, and contract A makes a call to contract B.\n\nNEAR has asynchronous transactions, and some cross-contract calls will have callbacks in order to determine the result of the call. This works a bit different from other blockchains, as we'll explain more in this chapter.\n\n## Access keys\n\nLast chapter covered access keys, and we implemented a login system where a user \"logs in\" by adding a function-call access key to their account which is tied to the crossword puzzle dApp.\n\nLogin is a common use case for access keys, but let's think bigger!\n\nRemember the two (smaller, gray) function-call access keys from the keychain illustration?\n\n<figure>\n    <img src={accessKeys} width=\"600\" alt=\"A keychain with three keys. A large, gold key represents the full-access keys on NEAR. The two other keys are gray and smaller, and have detachable latches on them. They represent function-call access key. Art created by alcantara_gabriel.near\" />\n    <figcaption>Art by <a href=\"https://twitter.com/Bagriel_5_10\" target=\"_blank\" rel=\"noopener noreferrer\">alcantara_gabriel.near</a></figcaption>\n</figure><br/>\n\nNotice that they have a clasp to make them removable.\n\nWhile it's unlikely you'll want to give another person a full-access key, there are times when you could give a function-call access key to another person or make it public. Why? This can help enable a smooth onboarding experience, as we'll do soon.\n\n## Completed project\n\nHere's the final code for this chapter:\n\nhttps://github.com/near-examples/crossword-tutorial-chapter-3", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2090, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ec7ea482-5a24-4d7a-b3b0-221a9a0c1d97": {"__data__": {"id_": "ec7ea482-5a24-4d7a-b3b0-221a9a0c1d97", "embedding": null, "metadata": {"file_path": "./near_dist/account-model.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f62a28fa-bd4b-44a9-8943-44507213a291", "node_type": "4", "metadata": {}, "hash": "3ce4809c7881d0171b0f9236bb3cda6271f9d38c3eb1670258338b142986c6ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9ce84305-69bd-4ce6-93aa-58e15296ca96", "node_type": "1", "metadata": {}, "hash": "71f983c8b72996157a04f70ff1868d1df5366deda3f0d683dbfd6a3fd8337834", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: account-model\ntitle: NEAR Accounts\nsidebar_label: Overview\n---\n\nUsers participate in the NEAR ecosystem through their NEAR accounts. These accounts are identified by a [unique address](./account-id.md), can optionally hold a [smart contract](../../2.build/2.smart-contracts/what-is.md), and are controlled through [Access Keys](./access-keys.md).\n\nBy signing [transactions](./transactions.md) with their account, users can:\n\n1. Send and receive **digital assets** (such as tokens or collectibles)\n2. Create and interact with on-chain applications known as **smart contracts**\n3. Control accounts in **other chains** (such as Ethereum or Bitcoin) \u2728\n4. Help onboard new users by **covering the costs** of their transactions (gas fees)\n\n:::tip Want to create an account?\nYou have multiple ways to create an account, you can [sign-up using your email](https://dev.near.org/signup) (note: email-based accounts currently have limited ability to transfer funds or sign transactions), get a mobile wallet through [telegram](https://web.telegram.org/k/#@herewalletbot), or create a [web wallet](https://app.mynearwallet.com).\n:::\n\n---\n\n## Account Model Overview \n\nLet's take a closer look at the different elements that compose the NEAR account model.\n\n![img](@site/static/docs/assets/welcome-pages/accounts.png)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1311, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9ce84305-69bd-4ce6-93aa-58e15296ca96": {"__data__": {"id_": "9ce84305-69bd-4ce6-93aa-58e15296ca96", "embedding": null, "metadata": {"file_path": "./near_dist/account-model.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f62a28fa-bd4b-44a9-8943-44507213a291", "node_type": "4", "metadata": {}, "hash": "3ce4809c7881d0171b0f9236bb3cda6271f9d38c3eb1670258338b142986c6ae", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ec7ea482-5a24-4d7a-b3b0-221a9a0c1d97", "node_type": "1", "metadata": {}, "hash": "7e05f143ca67fd4d054e1429cceb4ecada51e4b9682cac785b768fd072544ebb", "class_name": "RelatedNodeInfo"}}, "text": "#### [Account ID](account-id.md)\nNEAR implements two types of accounts IDs: **named accounts** such as `alice.near`, which are simple to remember and share, and the classic alphanumeric IDs (`fb9243ce...`) that other chains also implement.\n\n#### [Permissions Through Access Keys](access-keys.md)\nNEAR accounts can have multiple [keys](access-keys.md), each with their own set of permissions. This allows to easily swap keys if one gets compromised, and to use keys as authorization tokens for third-parties.\n\n#### [Simple to Develop Smart Contracts](../../2.build/2.smart-contracts/what-is.md)\nNEAR accounts can optionally hold a simple program, known as a [smart contract](../../2.build/2.smart-contracts/what-is.md). In NEAR, developers can create smart contracts using languages such as Javascript or Rust. \n\n---\n\n## Comparison With Ethereum {#compared-to-ethereum}\n\nIf you're familiar with development on Ethereum, it's worth making a quick note about how accounts are different. The table below summarizes some key differences:\n\n|                   | Ethereum Wallet                                                                             | NEAR Account                                                                            |\n|-------------------|---------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|\n| Public Identifier | Public Key (`0x123...`)                                                                     | Named IDs (`alice.near`) and implicit accounts (Public Key `0x123...`)                  |\n| Secret Key        | Private Key (`0x456...`)                                                                    | Multiple key-pairs with permissions:<br />- `FullAccess` key<br />- `FunctionCall` key  |\n| Characteristics   | - Private key gives full access<br />- Account doesn't have to be created via a transaction | - Permission-based keypair<br />- Account ID must be created via blockchain transaction |", "mimetype": "text/plain", "start_char_idx": 1314, "end_char_idx": 3377, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b6b0844-4221-4b5b-b0a7-3f1357d628db": {"__data__": {"id_": "3b6b0844-4221-4b5b-b0a7-3f1357d628db", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f136fc55-0061-4788-a173-29cd3ffbc57e", "node_type": "1", "metadata": {}, "hash": "4f02ea4239feac13e0b55e76a4830bc2f717aab1bbaa02c57a2b2fc86d205e43", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: integrate-contracts\ntitle: Integrating Contracts\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nTo integrate NEAR to your frontend, you will leverage two tools:\n\n1. `Wallet Selector`: Enables the user to select their preferred NEAR wallet in your dApp.\n2. `NEAR API JS`: A suit of tools to interact with the NEAR RPC.\n\nUsing those tools you will implement the following flow:\n\n1. **Setup** a wallet selector.\n1. Load the wallet selector **on start-up**.\n2. Ask the user to **sign-in** using a NEAR wallet.\n2. **Call methods** in the contract.\n\n### Naxios\n\nYou can optionally use [Naxios](https://wpdas.gitbook.io/naxios). A promise-based NEAR Contract and NEAR Wallet Client for browser.\n\nNaxios was designed to facilitate the React / Next.js integration with NEAR Blockchain and avoid the boilerplate of setting up a wallet and contract.\n\n---\n\n## Adding NEAR API JS and Wallet Selector\n\nIn order to use `near-api-js` and the `wallet-selector` you will need to first add them to your project.\n\nThe wallet selector has multiple wallet packages to select from, [see in their website](https://github.com/near/wallet-selector#installation-and-usage).\n\n```bash\nnpm install \\\n  near-api-js \\\n  @near-wallet-selector/core \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/modal-ui\n```\n---\n\n## Create a Wallet Object\n\nIn our examples we implement a [`./wallets/near.js`](https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js) module, where we abstracted the `wallet selector` into a `Wallet` object to simplify using it.\n\nTo create a wallet, simply import the `Wallet` object from the module and initialize it. This `wallet` will later allows the user to call any contract in NEAR.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1870, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f136fc55-0061-4788-a173-29cd3ffbc57e": {"__data__": {"id_": "f136fc55-0061-4788-a173-29cd3ffbc57e", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b6b0844-4221-4b5b-b0a7-3f1357d628db", "node_type": "1", "metadata": {}, "hash": "117d115b1ade97aa5bdfa946c394b2cc4f8f16e7d63f1a87f55788808abc26f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5bf058e9-4cce-4fec-936d-91046838389a", "node_type": "1", "metadata": {}, "hash": "cfcd03e401d5792f37395ae5ca4345d2bdc1a381effd8b726be53d492d1fc7b7", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"_app.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/pages/_app.js\"\n            start=\"7\" end=\"23\" />\n\n    <Github fname=\"near.js\"\n        url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js\"\n        start=\"15\" end=\"142\" />\n\n  </Language>\n</CodeTabs>\n\nUnder the hood (check the `near` tab) you can see that we are actually setting up the wallet selector, and asking it if the user logged-in already. During the setup, we pass a hook to the wallet selector, which will be called each time a user logs in or out.\n\n<details markdown=\"1\" id=\"setting-customs-rpc-endpoints\">\n\n<summary> Setting customs RPC endpoints </summary>\n\nIf you want to use a user-defined RPC endpoint with the Wallet Selector, you need to setup a [network options](https://github.com/near/wallet-selector/tree/main/packages/core#options) object with the custom URLs.\nFor example:\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n\n```js title=\"index.js\"\nconst CONTRACT_ADDRESS = process.env.CONTRACT_NAME;\n\nconst my_network = {\n    networkId: \"my-custom-network\",\n    nodeUrl: \"https://rpc.custom-rpc.com\",\n    helperUrl: \"https://helper.custom-helper.com\",\n    explorerUrl: \"https://custom-explorer.com\",\n    indexerUrl: \"https://api.custom-indexer.com\",\n  };\n\nconst wallet = new Wallet({ createAccessKeyFor: CONTRACT_ADDRESS, network: my_network });\n```\n\n</Language>\n\n</CodeTabs>\n\n:::tip\n\nYou can find the entire Wallet Selector [API reference here](https://github.com/near/wallet-selector/blob/main/packages/core/docs/api/selector.md).\n\n:::\n\n</details>\n\n#### Function Call Key\nWhen instantiating the wallet you can choose if you want to **create a [FunctionCall Key](../../1.concepts/protocol/access-keys.md#function-call-keys-function-call-keys)**.\n\nIf you create the key, then your dApp will be able to **automatically sign non-payable transactions** for the user on the specified contract.", "mimetype": "text/plain", "start_char_idx": 1872, "end_char_idx": 3898, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5bf058e9-4cce-4fec-936d-91046838389a": {"__data__": {"id_": "5bf058e9-4cce-4fec-936d-91046838389a", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f136fc55-0061-4788-a173-29cd3ffbc57e", "node_type": "1", "metadata": {}, "hash": "4f02ea4239feac13e0b55e76a4830bc2f717aab1bbaa02c57a2b2fc86d205e43", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a33f9d62-8a2b-4130-b415-4ceefcdd13b6", "node_type": "1", "metadata": {}, "hash": "bb393bf3cb08d668d4d16ac508dd6098e651c286884b1f4940ce242565b3f9ee", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n## Calling View Methods\n\nOnce the wallet is up we can start calling view methods, i.e. the methods that perform read-only operations.\n\nBecause of their read-only nature, view methods are **free** to call, and do **not require** the user to be **logged in**.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"index.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/pages/hello-near/index.js\"\n            start=\"12\" end=\"25\" />\n\n    <Github fname=\"near.js\"\n        url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js\"\n        start=\"74\" end=\"94\" />\n\n</Language>\n\n</CodeTabs>\n\nThe snippet above shows how we call view methods in our examples. Switch to the `near-wallet` tab to see under the hood: we are actually making a **direct call to the RPC** using `near-api-js`.\n\n:::tip\n\nView methods have by default 200 TGAS for execution\n\n:::\n\n---\n\n## User Sign-In / Sign-Out\n\nIn order to interact with non-view methods it is necessary for the user to first sign in using a NEAR wallet.\n\nSigning in is as simple as requesting the `wallet` object to `signIn`, the same simplicity applies to signing-out.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"index.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/components/navigation.js\"\n            start=\"9\" end=\"23\" />\n\n    <Github fname=\"near.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js\"\n            start=\"58\" end=\"72\" />\n\n  </Language>\n</CodeTabs>\n\nWhen the user clicks in the button, it will be asked to select a wallet and use it to login.", "mimetype": "text/plain", "start_char_idx": 3900, "end_char_idx": 5636, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a33f9d62-8a2b-4130-b415-4ceefcdd13b6": {"__data__": {"id_": "a33f9d62-8a2b-4130-b415-4ceefcdd13b6", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5bf058e9-4cce-4fec-936d-91046838389a", "node_type": "1", "metadata": {}, "hash": "cfcd03e401d5792f37395ae5ca4345d2bdc1a381effd8b726be53d492d1fc7b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "78ec8fe5-de66-4097-92c2-a136a6369255", "node_type": "1", "metadata": {}, "hash": "4fe856d07e951a76d0937251443d3a7283194f81c3cc9ccafc22060bea35ee3e", "class_name": "RelatedNodeInfo"}}, "text": "<hr className=\"subsection\" />\n\n### Function Call Key\n\nIf you instantiated the `Wallet` passing an account for the `createAccessKeyFor` parameter, then the wallet will create a [FunctionCall Key](../../1.concepts/protocol/access-keys.md#function-call-keys-function-call-keys) and store it in the web's local storage.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"_app.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/pages/_app.js\"\n            start=\"10\" end=\"10\" />\n  </Language>\n</CodeTabs>\n\nBy default, such key enables to expend a maximum of `0.25\u24c3` on GAS calling methods in **the specified** contract **without prompting** the user to sign them.\n\nIf, on the contrary, you do not create an access key, then the user will be asked to sign every single transaction (except calls to `view methods`, since those are always free).\n\n:::tip\n\nPlease notice that this only applies for **non-payable** methods, if you attach money to any call the user will **always** be redirected to the wallet to confirm the transaction.\n\n:::\n\n---\n\n## Calling Change Methods\n\nOnce the user logs-in they can start calling change methods. Programmatically, calling change methods is similar to calling view methods, only that now you can attach money to the call, and specify how much GAS you want to use.\n\nIt is important to notice that, if you ask for money to be attached in the call, then the user will be redirected to the NEAR wallet to accept the transaction.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"index.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/pages/hello-near/index.js\"\n            start=\"33\" end=\"33\" />\n\n    <Github fname=\"near.js\"\n        url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js\"\n        start=\"97\" end=\"126\" />\n\n</Language>\n\n</CodeTabs>\n\nUnder the hood (see `near-wallet` tab) we can see that we are actually asking the **wallet** to **sign a FunctionCall transaction** for us.", "mimetype": "text/plain", "start_char_idx": 5638, "end_char_idx": 7721, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78ec8fe5-de66-4097-92c2-a136a6369255": {"__data__": {"id_": "78ec8fe5-de66-4097-92c2-a136a6369255", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a33f9d62-8a2b-4130-b415-4ceefcdd13b6", "node_type": "1", "metadata": {}, "hash": "bb393bf3cb08d668d4d16ac508dd6098e651c286884b1f4940ce242565b3f9ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73f2a114-09bc-4a87-8bf7-5c566c0c4319", "node_type": "1", "metadata": {}, "hash": "863d55bd81e3404e404ba1976c4fcb75a7d0407776ecccbf799b2c0908aa49bf", "class_name": "RelatedNodeInfo"}}, "text": ":::tip\n\nRemember that you can use the `wallet` to call methods in **any** contract. If you did not asked for a function key to be created, the user will simply be prompt to confirm the transaction.\n\n:::\n\n<hr className=\"subsection\" />\n\n### Wallet Redirection\n\nIf you attach money to a change call, then the user will be redirected to their wallet to accept the transaction. After accepting, the user will be brought back to your website, with the resulting transaction hash being pass as part of the url (i.e. `your-website.com/?transactionHashes=...`).\n\nIf the method invoked returned a result, you can use the transaction hash to retrieve the result from the network. Assuming you created the `near` object as in the [example above](#connecting-to-a-contract), then you query the result by utilizing:\n\n<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n\n    <Github fname=\"near.js\"\n            url=\"https://github.com/near-examples/hello-near-examples/blob/main/frontend/src/wallets/near.js\"\n            start=\"128\" end=\"141\" />\n\n</Language>\n\n</CodeTabs>\n\n---\n\n## Handling Data Types\n\nWhen calling methods in a contract, or receiving results from them, you will need to correctly encode/decode parameters. For this, it is important to know how the contracts encode timestamps (u64) and money amounts (u128).\n\n##### Time\n\nThe block timestamp in a smart contract is encoded using nanoseconds (i.e. 19 digits: `1655373910837593990`). In contrast, `Date.now()` from javascript returns a timestamp in milliseconds (i.e 13 digits: `1655373910837`). Make sure to convert between milliseconds and nanoseconds to properly handle time variables.\n\n##### Money\n\nSmart contracts speak in yocto NEAR, where 1\u24c3 = 10^24yocto, and the values are always encoded as `strings`.\n\n- Convert from NEAR to yocto before sending it to the contract using `near-api-js.utils.format.parseNearAmount(amount.toString())`.", "mimetype": "text/plain", "start_char_idx": 7723, "end_char_idx": 9612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73f2a114-09bc-4a87-8bf7-5c566c0c4319": {"__data__": {"id_": "73f2a114-09bc-4a87-8bf7-5c566c0c4319", "embedding": null, "metadata": {"file_path": "./near_dist/integrate-contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "80c063a6-6e2d-434f-950c-07be1b8711ae", "node_type": "4", "metadata": {}, "hash": "f165fa7e89ca6dc8056e7e33b8264ff0ae7c42be73e748fcd89cb1929ea58234", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "78ec8fe5-de66-4097-92c2-a136a6369255", "node_type": "1", "metadata": {}, "hash": "4fe856d07e951a76d0937251443d3a7283194f81c3cc9ccafc22060bea35ee3e", "class_name": "RelatedNodeInfo"}}, "text": "- Convert a response in yoctoNEAR to NEAR using `near-api-js.utils.format.formatNearAmount(amount)`\n\n:::tip\n\nIf the contract returns a `Balance` instead of a `U128`, you will get a \"scientific notation\" `number` instead of a `string` (e.g. `10^6` instead of `\"1000000\"`). In this case, you can convert the value to NEAR by doing:\n\n```js\nfunction formatAmount(amount) {\n  let formatted = amount.toLocaleString('fullwide', { useGrouping: false })\n  formatted = utils.format.formatNearAmount(formatted)\n  return Math.floor(formatted * 100) / 100\n}\n```\n\n:::\n\n---\n\n## Leveraging NEAR API JS\n\nNEAR API JS does not limit itself to simply calling methods in a contract. In fact, you can use it to transform your web-app into a rich user experience. While we will not cover these topics in depth, it is important for you to know that with NEAR API JS you can also:\n\n- **[Sign and verify messages](https://github.com/near/near-api-js/blob/master/packages/cookbook/utils/verify-signature.js)**: this is very useful to prove that a message was created by the user.\n- **[Create batch transactions](https://github.com/near/near-api-js/tree/master/packages/cookbook/transactions/batch-transactions.js)**: this enables to link multiple [actions](../../1.concepts/protocol/transaction-anatomy.md#actions) (e.g. multiple function calls). If one of the transactions fails, then they are all reverted.\n- **[Create accounts](https://github.com/near/near-api-js/tree/master/packages/cookbook/accounts/create-testnet-account.js)**: deploy accounts for your users!\n\nCheck the [cookbook](/tools/near-api-js/cookbook) to learn how to supercharge your webapp.", "mimetype": "text/plain", "start_char_idx": 9613, "end_char_idx": 11245, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e1c33e8f-df20-4636-bf38-67bbd2a0bc74": {"__data__": {"id_": "e1c33e8f-df20-4636-bf38-67bbd2a0bc74", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36d76552-4f54-4d19-9d4b-0494fa5238ab", "node_type": "1", "metadata": {}, "hash": "ceceb78d92928e6d80eb8e150309f7ed25e24e78709c035adbfb1e5944715e13", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: run-lake-indexer\nsidebar_label: Running Lake Indexer\n---\n\n# Running NEAR Lake Indexer\n\n:::info\n\nNEAR Lake is a blockchain indexer built on top of [NEAR Indexer microframework](https://github.com/nearprotocol/nearcore/tree/master/chain/indexer)\nto watch the network and store all the events as JSON files on AWS S3.\n\n:::\n\n## How to start\n\nThe Lake Indexer setup consists of the following components:\n\n- AWS S3 Bucket as a storage\n- NEAR Lake binary that operates as a regular NEAR Protocol peer-to-peer node, so you will operate it as\n  any other [Regular/RPC Node in NEAR](https://near-nodes.io/rpc/hardware-rpc)\n\n### Prepare Development Environment\n\nBefore you proceed, make sure you have the following software installed:\n\n- [Rust compiler](https://rustup.rs/) of the version that is mentioned in `rust-toolchain` file in the root of\n  [nearcore](https://github.com/nearprotocol/nearcore) project.\n- Ensure you have [AWS Credentials configured](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html)\n  From AWS Docs:\n\n  > For example, the files generated by the AWS CLI for a default profile configured with aws configure looks similar to the following.\n  >\n  > ~/.aws/credentials\n  >\n  > ```\n  > [default]\n  > aws_access_key_id=AKIAIOSFODNN7EXAMPLE\n  > aws_secret_access_key=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\n  > ```\n\n### Compile NEAR Lake\n\n```bash\n$ cargo build --release\n```\n\n### Configure NEAR Lake\n\nTo connect NEAR Lake to the specific chain you need to have necessary configs, you can generate it as follows:\n\n```bash\n$ ./target/release/near-lake --home ~/.near/testnet init --chain-id testnet --download-config --download-genesis\n```\n\nThe above code will download the official genesis config and generate necessary configs. You can replace `testnet` in the command above to different network ID (`betanet`, `mainnet`).\n\n:::info nearcore configuration\n\nAccording to changes in `nearcore` config generation we don't fill all the necessary fields in the config file.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2007, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36d76552-4f54-4d19-9d4b-0494fa5238ab": {"__data__": {"id_": "36d76552-4f54-4d19-9d4b-0494fa5238ab", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1c33e8f-df20-4636-bf38-67bbd2a0bc74", "node_type": "1", "metadata": {}, "hash": "e19dafdaa30383e4e9e36c53a822986254a8857c07af173071245a148d1477af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc1df270-4858-42aa-96a8-08dda24fc22a", "node_type": "1", "metadata": {}, "hash": "1280a4471b60bf3080fbe1a43541c49ea5b4b1d5b4382f685c7e2b9a35b5ebae", "class_name": "RelatedNodeInfo"}}, "text": "While [this issue is open](https://github.com/nearprotocol/nearcore/issues/3156) you need to download config you want and replace the generated one manually.\n\n- [testnet config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json)\n- [betanet config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/betanet/config.json)\n- [mainnet config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json)\n\n:::\n\nConfigs for the specified network are in the `--home` provided folder. We need to ensure that NEAR Lake follows\nall the necessary shards, so `\"tracked_shards\"` parameters in `~/.near/testnet/config.json` needs to be configured properly.\nCurrently, `nearcore` treats empty value for `\"tracked_shards\"` as \"do not track any shard\" and **any value** as \"track all shards\".", "mimetype": "text/plain", "start_char_idx": 2008, "end_char_idx": 2899, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc1df270-4858-42aa-96a8-08dda24fc22a": {"__data__": {"id_": "bc1df270-4858-42aa-96a8-08dda24fc22a", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36d76552-4f54-4d19-9d4b-0494fa5238ab", "node_type": "1", "metadata": {}, "hash": "ceceb78d92928e6d80eb8e150309f7ed25e24e78709c035adbfb1e5944715e13", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "04c72e6e-2a0a-49cd-8b6c-2a20faffd622", "node_type": "1", "metadata": {}, "hash": "cccfe4b0a7dafa13721f55ab14c9d05d61dc4d3e7c9c9a7ecd21ea39771660dc", "class_name": "RelatedNodeInfo"}}, "text": "For example, in order to track all shards, you just add the shard #0 to the list:\n\n```\n...\n\"tracked_shards\": [0],\n...\n```\n\n### Run NEAR Lake\n\nCommands to run NEAR Lake, after `./target/release/near-lake`\n\n| Command | Key/Subcommand                | Required/Default                                                       | Responsible for                                                                                                                                                                                                                                                                                                                                                               |\n| ------- | ----------------------------- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n|         | `--home`                      | Default <br />`~/.near`                                                | Tells the node where too look for necessary files: <br />`config.json`<br />, <br />`genesis.json`<br />, <br />`node_key.json`<br />, and <br />`data`<br /> folder                                                                                                                                                                                                          |\n| `init`  |                               |                                                                        | Tells the node to generate config files in `--home-dir`                                                                                                                                                                                                                                                                                                                       |\n|         | `--chain-id`                  | Required<br /><br /> _ `localnet`<br /> _ `testnet`<br /> \\* `mainnet` | Defines the chain to generate config files for                                                                                                                                                                                                                                                                                                                                |\n|         | `--download-config`           | Optional                                                               | If provided tells the node to download `config.json` from the public URL. You can download them manually<br /><br /> - [testnet config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json)<br /> - [mainnet config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json)      |\n|         | `--download-genesis`          | Optional                                                               | If provided tells the node to download `genesis.json` from the public URL. You can download them manually<br /><br /> - [testnet genesis.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/genesis.json)<br /> - [mainnet genesis.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/genesis.", "mimetype": "text/plain", "start_char_idx": 2900, "end_char_idx": 6492, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "04c72e6e-2a0a-49cd-8b6c-2a20faffd622": {"__data__": {"id_": "04c72e6e-2a0a-49cd-8b6c-2a20faffd622", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc1df270-4858-42aa-96a8-08dda24fc22a", "node_type": "1", "metadata": {}, "hash": "1280a4471b60bf3080fbe1a43541c49ea5b4b1d5b4382f685c7e2b9a35b5ebae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5af4d52-a764-46df-9b9a-a645341f885b", "node_type": "1", "metadata": {}, "hash": "977f69e3604cb99d4a00453ba49ebf19b55d486c099d9905bdd505041e5565f4", "class_name": "RelatedNodeInfo"}}, "text": "json) |\n|         | TODO:<br />Other `neard` keys |                                                                        |                                                                                                                                                                                                                                                                                                                                                                               |\n| `run`   |                               |                                                                        | Runs the node                                                                                                                                                                                                                                                                                                                                                                 |\n|         | `--bucket`                    | Required                                                               | AWS S3 Bucket name                                                                                                                                                                                                                                                                                                                                                            |\n|         | `--region`                    | Required                                                               | AWS S3 Bucket region                                                                                                                                                                                                                                                                                                                                                          |\n|         | `--fallback-region`           | Default eu-central-1                                                   | AWS S3 Fallback region                                                                                                                                                                                                                                                                                                                                                        |\n|         | `--endpoint`                  | Optional                                                               | AWS S3 compatible API endpoint                                                                                                                                                                                                                                                                                                                                                |\n|         | `--stream-while-syncing`      | Optional                                                               | If provided Indexer streams blocks while they appear on the node instead of waiting the node to be fully synced                                                                                                                                                                                                                                                               |\n|         | `--concurrency`               | Default 1                                                              | Defines the concurrency for the process of saving block data to AWS S3                                                                                                                                                                                                                                                                                                        |\n|         | `sync-from-latest`            | One of the `sync-` subcommands is required                             | Tells the node to start indexing from the latest block in the network                                                                                                                                                                                                                                                                                                         |\n|         | `sync-from-interruption`      | One of the `sync-` subcommands is required                             | Tells the node to start indexing from the block the node was interrupted on (if it is a first start it will fallback to `sync-from-latest`)                                                                                                                                                                                                                                   |\n|         | `sync-from-block --height N`  | One of the <br />`sync-`<br /> subcommands is required                 | Tells the node to start indexing from the specified block height `N` (**Ensure** you node data has the block you want to start from)                                                                                                                                                                                                                                          |\n\n```bash\n$ ./target/release/near-lake --home ~/.near/testnet run --stream-while-syncing --concurrency 50 sync-from-latest\n```\n\nAfter the network is synced, you should see logs of every block height currently received by NEAR Lake.\n\n## Syncing\n\nWhenever you run NEAR Lake for any network except localnet you'll need to sync with the network.\nThis is required because it's a natural behavior of `nearcore` node and NEAR Lake is a wrapper\nfor the regular `nearcore` node.", "mimetype": "text/plain", "start_char_idx": 6492, "end_char_idx": 12303, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5af4d52-a764-46df-9b9a-a645341f885b": {"__data__": {"id_": "d5af4d52-a764-46df-9b9a-a645341f885b", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "04c72e6e-2a0a-49cd-8b6c-2a20faffd622", "node_type": "1", "metadata": {}, "hash": "cccfe4b0a7dafa13721f55ab14c9d05d61dc4d3e7c9c9a7ecd21ea39771660dc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6500a5d5-ae5f-4e38-a60f-80913814dd81", "node_type": "1", "metadata": {}, "hash": "bb29744453da9326d784d1974cc464911fa220865e6696bb2c52e200ec41a5b5", "class_name": "RelatedNodeInfo"}}, "text": "In order to work and index the data your node must be synced\nwith the network. This process can take a while, so we suggest to download a fresh backup of\nthe `data` folder and put it in you `--home-dir` of your choice (by default it is `~/.near`)\n\n:::tip\nRunning your NEAR Lake node on top of a backup data will reduce the time of syncing process\nbecause your node will download only the data after the backup was cut and it takes reasonable amount time.\n:::\n\nAll the backups can be downloaded from the public S3 bucket which contains latest daily snapshots:\n\nYou will need [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html) to be installed in order to download the backups.\n\n### Mainnet\n\n```\n$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/mainnet/rpc/latest .\n$ LATEST=$(cat latest)\n$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/mainnet/rpc/$LATEST ~/.near/data\n```\n\n### Testnet\n\n```\n$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/rpc/latest .\n$ LATEST=$(cat latest)\n$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/rpc/$LATEST ~/.near/data\n```\n\n## Running NEAR Lake as an archival node\n\nIt's not necessary but in order to index everything in the network it is better to do it from the genesis.\n`nearcore` node is running in non-archival mode by default. That means that the node keeps data only\nfor [5 last epochs](https://docs.near.org/concepts/basics/epoch). In order to index data from the genesis\nyou need to turn the node in archival mode.\n\nTo do it you need to update `config.json` located in `--home-dir` (by default it is `~/.near`).", "mimetype": "text/plain", "start_char_idx": 12304, "end_char_idx": 14021, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6500a5d5-ae5f-4e38-a60f-80913814dd81": {"__data__": {"id_": "6500a5d5-ae5f-4e38-a60f-80913814dd81", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5af4d52-a764-46df-9b9a-a645341f885b", "node_type": "1", "metadata": {}, "hash": "977f69e3604cb99d4a00453ba49ebf19b55d486c099d9905bdd505041e5565f4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b2433ca5-4aa6-4234-bd75-1b52fd94130e", "node_type": "1", "metadata": {}, "hash": "d1b7510f881c224a76e7a647162cbc669398ec19f65f11851ba961859ba08780", "class_name": "RelatedNodeInfo"}}, "text": "Find next keys in the config and update them as following:\n\n```json\n{\n  ...\n  \"archive\": true,\n  \"tracked_shards\": [0],\n  ...\n}\n```\n\nThe syncing process in archival mode can take a lot of time, so it's better to download a backup provided by NEAR\nand put it in your `data` folder. After that your node will download only the data after the backup was cut and it\ntakes reasonable amount time.\n\nAll the backups can be downloaded from the public [S3 bucket](https://near-nodes.io/intro/node-data-snapshots) which contains the latest daily snapshots.\n\nSee [this link](https://near-nodes.io/archival/run-archival-node-with-nearup) for reference\n\n## Using the data\n\nWe write all the data to AWS S3 buckets:\n\n- `near-lake-data-testnet` (`eu-central-1` region) for testnet\n- `near-lake-data-mainnet` (`eu-central-1` region) for mainnet\n\n## Custom S3 storage\n\nIn case you want to run you own `near-lake` instance and store data in some S3 compatible storage ([Minio](https://min.io/) or [Localstack](https://localstack.cloud/) as example)\nYou can override default S3 API endpoint by using `--endpoint` option\n\n- run `minio`\n\n```bash\n$ mkdir -p /data/near-lake-custom && minio server /data\n```\n\n- run `near-lake`\n\n```bash\n$ ./target/release/near-lake --home ~/.near/testnet run --endpoint http://127.0.0.1:9000 --bucket near-lake-custom sync-from-latest\n```\n\n### Data structure\n\nThe data structure we use is the following:\n\n```\n<block_height>/\n  block.json\n  shard_0.json\n  shard_1.json\n  ...\n  shard_N.json\n```\n\n- `<block_height>` is a 12-character-long `u64` string with leading zeros (e.g `000042839521`).", "mimetype": "text/plain", "start_char_idx": 14023, "end_char_idx": 15621, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b2433ca5-4aa6-4234-bd75-1b52fd94130e": {"__data__": {"id_": "b2433ca5-4aa6-4234-bd75-1b52fd94130e", "embedding": null, "metadata": {"file_path": "./near_dist/run-near-lake.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce", "node_type": "4", "metadata": {}, "hash": "4d0e07f02b2381abf7e41b056f5adf87648ecb84f69d0a748270f9e15d0ddbee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6500a5d5-ae5f-4e38-a60f-80913814dd81", "node_type": "1", "metadata": {}, "hash": "bb29744453da9326d784d1974cc464911fa220865e6696bb2c52e200ec41a5b5", "class_name": "RelatedNodeInfo"}}, "text": "[See this issue for a reasoning](https://github.com/near/near-lake/issues/23)\n- `block_json` contains JSON-serialized [`BlockView`](https://github.com/near/nearcore/blob/e9a28c46c2bea505b817abf484e6015a61ea7d01/core/primitives/src/views.rs#L711-L716) struct. **Note:** this struct might change in the future, we will announce it\n- `shard_N.json` where `N` is `u64` starting from `0`. Represents the index number of the shard. In order to find out the expected number of shards in the block you can look in `block.json` at `.header.chunks_included`\n\n### Access the data\n\nAll NEAR Lake AWS S3 buckets have [Request Payer](https://docs.aws.amazon.com/AmazonS3/latest/userguide/RequesterPaysBuckets.html) enabled. It means that anyone with their own AWS credentials can List and Read the bucket's content and **be charged for it by AWS**. Connections to the bucket have to be done with AWS credentials provided. See [NEAR Lake Framework](https://github.com/near/near-lake-framework) for a reference.\n\n### NEAR Lake Framework\n\nOnce we [set up the public access to the buckets](https://github.com/near/near-lake/issues/22) anyone will be able to build their own code to read it through.\n\nFor our own needs we are working on [NEAR Lake Framework](https://github.com/near/near-lake-framework) to have a simple way to create an indexer on top of the data stored by NEAR Lake itself.\n\n:::note\nSee the official NEAR Lake Framework [announcement on the NEAR Gov Forum](https://gov.near.org/t/announcement-near-lake-framework-brand-new-word-in-indexer-building-approach/17668).\n:::", "mimetype": "text/plain", "start_char_idx": 15622, "end_char_idx": 17190, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00d82153-021c-49a8-b1e6-78a9a863f227": {"__data__": {"id_": "00d82153-021c-49a8-b1e6-78a9a863f227", "embedding": null, "metadata": {"file_path": "./near_dist/transaction-anatomy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "575ece65-56ba-4add-9ea6-add2655db980", "node_type": "4", "metadata": {}, "hash": "cf282f4700ea1d44db2b78c20152af953fe103987070c987ed65a5d0f6f8a455", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b56ead6-c3c1-478d-88d4-cbd656e41fc2", "node_type": "1", "metadata": {}, "hash": "39e2a2a80f8651d604cc209ea168576f930bb94059c0f0c071137965680fa4da", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: transaction-anatomy\ntitle: Anatomy of a Transaction\n---\n\nA transaction is a request from a user to the network to perform a set of actions. To create a transaction, the user must specify the following fields:\n\n- `Signer`: the account that signs the transaction\n- `Actions`: the set of actions to be performed (see below)\n- `Receiver`: the account on which to perform the actions\n\nIn addition, a transaction has the following fields to ensure its integrity and validity:\n\n- `PublicKey`: the public key used to sign the transaction (so the network can verify the signature)\n- `Nonce`: a number that is incremented for each transaction sent by the `Signer`\n- `BlockHash`: the hash of a recent block, to limit the time-validity of the transaction\n\nUsers create transactions and sign them with their private keys. Then, the **transaction and its signature** are broadcast together to the network, where they are validated and processed.\n\n:::tip\nEach transaction has exactly one `Signer` and `Receiver`, but can have multiple `Actions`\n:::\n\n---\n\n## Actions\nEach transaction can have **one or multiple** `Actions`, which are the actual operations to be performed on the `Receiver` account. There are 9 types of actions that can be performed:\n\n1. `FunctionCall`: to invoke a function on a contract (optionally attaching NEAR to the call)\n2. `Transfer`: to transfer tokens to another account\n3. `DeployContract`: to deploy a contract in the account\n4. `CreateAccount`: to create a new sub-account (e.g. `ana.near` can create `sub.ana.near`)\n5. `DeleteAccount`: to delete the account (transferring the remaining balance to a beneficiary)\n6. `AddKey`: to add a new key to the account (either `FullAccess` or `FunctionCall` access)\n7. `DeleteKey`: to delete an existing key from the account\n8. `DelegateActions`: to create a meta-transaction\n9.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1840, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b56ead6-c3c1-478d-88d4-cbd656e41fc2": {"__data__": {"id_": "2b56ead6-c3c1-478d-88d4-cbd656e41fc2", "embedding": null, "metadata": {"file_path": "./near_dist/transaction-anatomy.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "575ece65-56ba-4add-9ea6-add2655db980", "node_type": "4", "metadata": {}, "hash": "cf282f4700ea1d44db2b78c20152af953fe103987070c987ed65a5d0f6f8a455", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "00d82153-021c-49a8-b1e6-78a9a863f227", "node_type": "1", "metadata": {}, "hash": "fa9354f607cbf4be727669799921b63703a2ce368e455094c5fa8bd804b06ef8", "class_name": "RelatedNodeInfo"}}, "text": "`Stake`: special action to express interest in becoming a network validator\n\nFor example, `bob.near` can bundle the following actions in a single transaction:\n- Create the account `contract.bob.near`\n- Transfer 5 NEAR to `contract.bob.near`\n- Deploy a contract in `contract.bob.near`\n- Call the function `init` in `contract.bob.near`\n\nThe `Actions` are executed in the **order they are specified in the transaction**. If any of the **actions fails**, the transaction is discarded and none of the actions take effect.\n\n:::warning One Receiver\nNotice that all actions are performed on the same account. It is **not possible** to perform actions on multiple accounts in a single transaction, because transactions can have **only one receiver**\n:::", "mimetype": "text/plain", "start_char_idx": 1841, "end_char_idx": 2585, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1c3efea0-674a-4275-a035-6b4d44b6e885": {"__data__": {"id_": "1c3efea0-674a-4275-a035-6b4d44b6e885", "embedding": null, "metadata": {"file_path": "./near_dist/LOCALIZATION.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3f98e224-883d-448a-830f-b6ef894f464c", "node_type": "4", "metadata": {}, "hash": "dcea722b38bbfb6bde4f11b2257eeee2aae9f53707ab2d9d1f485cc96559b271", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "977401f1-3a1e-42da-afb7-486ea47cbbfd", "node_type": "1", "metadata": {}, "hash": "52a0ec9b61b7ce4336a0c4402adfb4d7e43792797480ad5e76f7599a5151f7a2", "class_name": "RelatedNodeInfo"}}, "text": "# Docs Localization\n\n## Introduction\n\nWelcome to the [NEAR Dev Docs](https://docs.near.org/) translation project.\nThis article is aimed to community members that want to help in the localization of NEAR's documentation.\nIf you feel comfortable translating from English into your local language, you're more than welcome to contribute with this project.\n\n### Roles\n\nFor simplicity, the translation project is hosted on [Crowdin](https://crowdin.com/project/near-docs) and anyone is free to register and join.\nThere are 3 basic roles across the Crowdin project:\n\n1. **Translator:** translates documentation\n2. **Proof Reader:** helps proof reading localized documents\n3. **Manager:** manages memberships and helps with technical issues", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 733, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "977401f1-3a1e-42da-afb7-486ea47cbbfd": {"__data__": {"id_": "977401f1-3a1e-42da-afb7-486ea47cbbfd", "embedding": null, "metadata": {"file_path": "./near_dist/LOCALIZATION.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3f98e224-883d-448a-830f-b6ef894f464c", "node_type": "4", "metadata": {}, "hash": "dcea722b38bbfb6bde4f11b2257eeee2aae9f53707ab2d9d1f485cc96559b271", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1c3efea0-674a-4275-a035-6b4d44b6e885", "node_type": "1", "metadata": {}, "hash": "749e3228f1f96349a8e2ba7e164c8f183a27457727b542e352f55298b019dd2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6bce0611-0e10-485c-91de-35b5b7c2eafe", "node_type": "1", "metadata": {}, "hash": "a9443f8b8f4f814b1e5e3ffd60a1426fb05ee59961ddcf3ad7eab1abed41e4b1", "class_name": "RelatedNodeInfo"}}, "text": "### How to become a Translator\n\nTo become a certified NEAR docs translator, you need to pass a pre-translation test by working on a selected document translation. A proof reader will review your document, and if your translation proves to be high-quality, your application will be accepted and you'll be accepted as a NEAR Certified Translator.\n\n> To become a certified translator, please join our [Crowdin project](https://crowdin.com/project/near-docs) and [create a new topic](https://crowdin.com/project/near-docs/discussions) with your application.\n> The NEAR team will review your request, assign a test, and follow up with you as needed.\n>\n> If you have questions, please contact us on [Discord](https://near.chat). \n\n## How to translate\n\nBefore you start working on the translation of an article, you need to get pre-approval from the community first. The reason is to make sure the plans are transparent in the community, and the proof-readers can help to review and approve the translation once it's ready.\n\nYou can check the current translation plans available for each language on the [Tasks section](https://crowdin.com/project/near-docs/tasks):\n\n![image](website/static/docs/assets/crowdin-tasks.png)\n\nIf there's no active plan for your language, you can submit a proposal by opening a thread on the [Discussions section](https://crowdin.com/project/near-docs/discussions).\nOnce your plan is pre-approved by the community, you can just go to the [Crowdin project](https://crwd.in/near-docs) and work on the translation of the specific markdown file.\n\n### Translation plan\n\nFor each language, the current plan is to translate all the documents with the following priorities.\n\n**Website**\n\n1. `website` (except the `docusaurus-plugin-content-blog` folder)\n\n\n**Developer**\n\n1. `concepts`\n2. `develop`\n3. `tutorials`\n4. `tools`\n5. `api`\n6. `intergrator`", "mimetype": "text/plain", "start_char_idx": 736, "end_char_idx": 2599, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bce0611-0e10-485c-91de-35b5b7c2eafe": {"__data__": {"id_": "6bce0611-0e10-485c-91de-35b5b7c2eafe", "embedding": null, "metadata": {"file_path": "./near_dist/LOCALIZATION.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3f98e224-883d-448a-830f-b6ef894f464c", "node_type": "4", "metadata": {}, "hash": "dcea722b38bbfb6bde4f11b2257eeee2aae9f53707ab2d9d1f485cc96559b271", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "977401f1-3a1e-42da-afb7-486ea47cbbfd", "node_type": "1", "metadata": {}, "hash": "52a0ec9b61b7ce4336a0c4402adfb4d7e43792797480ad5e76f7599a5151f7a2", "class_name": "RelatedNodeInfo"}}, "text": "**Exchanges & Integration**\n\n1. `roles`\n2. `faq`\n\n![image](website/static/docs/assets/crowdin-list.png)\n\n### Proof reading and go-to Production\n\nFor each document, expect no less than two proof readers to review the translations. The translator or proof reader can propose different translations if he/she doesn't agree the existing ones, the translations that receive the most votes will be accepted and displayed in the production version.\n\n> Please pay attention to the maintainer's feedback, since its a necessary step to keep up with the standards NEAR attains to.\n\n## Questions?\n\nIf you have any questions feel free to post them to our [Discord channel](http://near.chat).\n\nThanks for your time and translations!\n\n> Got a question? [Ask it on StackOverflow!](https://stackoverflow.com/questions/tagged/nearprotocol)", "mimetype": "text/plain", "start_char_idx": 2602, "end_char_idx": 3423, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f39d1b2f-6456-4318-b167-a97ec02f110c": {"__data__": {"id_": "f39d1b2f-6456-4318-b167-a97ec02f110c", "embedding": null, "metadata": {"file_path": "./near_dist/wallet-selector.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4b9fefa8-1157-480a-932b-5e482b59de76", "node_type": "4", "metadata": {}, "hash": "4cc06f78b8006f602b657517f403b394446df1252c538cd368c892ea54773e89", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2bfbff1f-8323-4e62-89c3-531267fc11ca", "node_type": "1", "metadata": {}, "hash": "e516106e03d01fa44aa1a0c6eedb8fb677ba651981818b24598147a775412d1f", "class_name": "RelatedNodeInfo"}}, "text": "# Wallet Selector\n\nAn easy-to-navigate modal that allows users to select their preferred wallet to easily interact with the NEAR protocol.\n\nLaunched in March 2022 by the NEAR Foundation, this simple modal will appear whenever users are given the option to \u201cConnect Wallet\u201d to the NEAR blockchain.\n\n![Preview](/docs/assets/wallet-selector-preview.png)\n*Initial screen of [Wallet Selector](https://near.github.io/wallet-selector/)*\n\n---\n\n## Framework agnostic\n\n[React](https://reactjs.org/) / [Next.js](https://nextjs.org/) and [Angular](https://angular.io/) variations of the [Guest Book](https://github.com/near-examples/guest-book-examples/) dApp can be found in the [`examples`](https://github.com/near/wallet-selector/tree/main/examples) directory. Developers can use these to gain a concrete understanding of how to integrate NEAR Wallet Selector into their own dApp.\n\n### Unlocking the wallet ecosystem\n\nWallet Selector makes it easy for users to interact with dApps by providing an abstraction over various wallets and wallet types within the NEAR ecosystem.\n\n:::info\n\nYou can check the current list of supported wallets in the [README.md](https://github.com/near/wallet-selector/blob/main/README.md) file of near/wallet-selector repository.\n\n:::\n\nThanks to NEAR\u2019s open and inclusive approach, other wallet developers can contribute to the NEAR ecosystem by following the documentation and instructions on the\u00a0[NEAR Github repository](https://github.com/near/wallet-selector) on how to add a new wallets to the Wallet Selector.\n\n:::tip\n\nTo learn more on how to include new wallets for Wallet Selector you can check the listing criteria for third party wallets on this [link](https://github.com/near/wallet-selector/blob/main/CONTRIBUTING.md#listing-criteria-for-third-party-wallet-on-wallet-selector).\n\n:::\n\n## Install\n\nThe easiest way to use NEAR Wallet Selector is to install the core package from the NPM registry, some packages may require near-api-js v0.44.2 or above check them at packages.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2002, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2bfbff1f-8323-4e62-89c3-531267fc11ca": {"__data__": {"id_": "2bfbff1f-8323-4e62-89c3-531267fc11ca", "embedding": null, "metadata": {"file_path": "./near_dist/wallet-selector.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4b9fefa8-1157-480a-932b-5e482b59de76", "node_type": "4", "metadata": {}, "hash": "4cc06f78b8006f602b657517f403b394446df1252c538cd368c892ea54773e89", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f39d1b2f-6456-4318-b167-a97ec02f110c", "node_type": "1", "metadata": {}, "hash": "cf52b7338892e4eb2eb3be83593566c8a3f35dcc119c395dd01453d63eb0bfb4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "929c9895-ea8d-4c93-8415-b3f95285224e", "node_type": "1", "metadata": {}, "hash": "b3c95ecce0c03da2d3ae7af4f6722e9082f61599d9375a14d2d846d19d80cd5c", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnpm install near-api-js@^0.44.2\n```\n\n```bash\nnpm install @near-wallet-selector/core\n```\n\nNext, you'll need to install the wallets you want to support:\n\n```bash\nnpm install \\\n  @near-wallet-selector/near-wallet \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/nearfi \\\n  @near-wallet-selector/here-wallet \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/nightly \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/wallet-connect \\\n  @near-wallet-selector/nightly-connect \\\n  @near-wallet-selector/default-wallets \\\n  @near-wallet-selector/coin98-wallet\n```\n\n## Setup Wallet Selector\n\nOptionally, you can install our [`modal-ui`](https://www.npmjs.com/package/@near-wallet-selector/modal-ui) or [`modal-ui-js`](https://www.npmjs.com/package/@near-wallet-selector/modal-ui-js) package for a pre-built interface that wraps the `core` API and presents the supported wallets:\n\n```bash\nnpm install @near-wallet-selector/modal-ui\n```\n\nThen use it in your dApp:\n\n```ts\nimport { setupWalletSelector } from \"@near-wallet-selector/core\";\nimport { setupModal } from \"@near-wallet-selector/modal-ui\";\nimport { setupNearWallet } from \"@near-wallet-selector/near-wallet\";\n\nconst selector = await setupWalletSelector({\n  network: \"testnet\",\n  modules: [setupNearWallet()],\n});\n\nconst modal = setupModal(selector, {\n  contractId: \"test.testnet\",\n});\n\nmodal.show();\n```\n\n:::info Required CSS\n\nTo integrate the Wallet Selector, you also need to include the required CSS:\n\n```\nimport \"@near-wallet-selector/modal-ui/styles.css\"\n```\n\n:::\n\n## API Reference\n\nThe API reference of the selector can be found [`here`](https://github.com/near/wallet-selector/blob/main/packages/core/docs/api/selector.md)\n\n## Wallet API\n\n### Sign in\n\n```ts\n// NEAR Wallet.", "mimetype": "text/plain", "start_char_idx": 2004, "end_char_idx": 3852, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "929c9895-ea8d-4c93-8415-b3f95285224e": {"__data__": {"id_": "929c9895-ea8d-4c93-8415-b3f95285224e", "embedding": null, "metadata": {"file_path": "./near_dist/wallet-selector.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4b9fefa8-1157-480a-932b-5e482b59de76", "node_type": "4", "metadata": {}, "hash": "4cc06f78b8006f602b657517f403b394446df1252c538cd368c892ea54773e89", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2bfbff1f-8323-4e62-89c3-531267fc11ca", "node_type": "1", "metadata": {}, "hash": "e516106e03d01fa44aa1a0c6eedb8fb677ba651981818b24598147a775412d1f", "class_name": "RelatedNodeInfo"}}, "text": "(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  const accounts = await wallet.signIn({ contractId: \"test.testnet\" });\n})();\n```\n\n### Sign out\n\n```ts\n(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  await wallet.signOut();\n})();\n```\n\n### Get accounts\n\n```ts\n(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  const accounts = await wallet.getAccounts();\n  console.log(accounts); // [{ accountId: \"test.testnet\" }]\n})();\n```\n\n### Verify Owner\n\n```ts\n// MyNearWallet\n(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  await wallet.verifyOwner({\n    message: \"Test message\",\n  });\n})();\n```\n\n### Sign and send transaction\n\n```ts\n(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  await wallet.signAndSendTransaction({\n    actions: [\n      {\n        type: \"FunctionCall\",\n        params: {\n          methodName: \"addMessage\",\n          args: { text: \"Hello World!\" },\n          gas: \"30000000000000\",\n          deposit: \"10000000000000000000000\",\n        },\n      },\n    ],\n  });\n})();\n```\n\n### Sign and send transactions\n\n```ts\n(async () => {\n  const wallet = await selector.wallet(\"my-near-wallet\");\n  await wallet.signAndSendTransactions({\n    transactions: [\n      {\n        receiverId: \"guest-book.testnet\",\n        actions: [\n          {\n            type: \"FunctionCall\",\n            params: {\n              methodName: \"addMessage\",\n              args: { text: \"Hello World!\" },\n              gas: \"30000000000000\",\n              deposit: \"10000000000000000000000\",\n            },\n          },\n        ],\n      },\n    ],\n  });\n})();\n```", "mimetype": "text/plain", "start_char_idx": 3853, "end_char_idx": 5516, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "89cfe3d0-72aa-4e76-869d-c070b1bf67bd": {"__data__": {"id_": "89cfe3d0-72aa-4e76-869d-c070b1bf67bd", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18d8d8d3-7a00-439b-9e92-73a80b56315c", "node_type": "1", "metadata": {}, "hash": "47f2213393cd57dc3944ee3f44ed2efc562534ccbdf5eb9802e0fdabfabe5911", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: social\ntitle: Social Interactions\n---\n\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nNEAR components can natively communicate with the [SocialDB smart contract](https://github.com/NearSocial/social-db) (currently deployed at [social.near](https://nearblocks.io/address/social.near)).\n\nThe `SocialDB` is a contract that stores `key-value` pairs, and is used mostly to store social-related data, such as `posts`, `likes`, or `profiles`.\n\n:::tip\nBesides user data, the `SocialDB` contract stores **all existing NEAR components**.\n:::\n\n---\n\n## Social.get\n\n`Social.get` queries a key from the SocialDB contract and returns the data. The key being queried can contain wildcards.\n\nFor example:\n\n  - `alice.near/profile/**`  will match the entire profile data of account alice.near.\n  - `alice.near/profile/*` will match all the fields of the profile, but not the nested objects.\n  - `alice.near/profile/name` will match only the name field of the profile.\n  - `*/widget/*` will match all the widgets of all the accounts.\n\n<br />\n\n<WidgetEditor>\n\n```js\n// Ask for the `profile` key of the influencer.testnet account\nconst profile = Social.get(\"influencer.testnet/profile/*\");\n\n// Ask a component from the influencer.testnet account\nconst widget = Social.get(\"influencer.testnet/widget/Greeter\");\n\nif(profile === null || widget === null) return \"Loading ...\"\n\nreturn (\n  <div>\n    <p>Profile: {JSON.stringify(profile)}</p>\n    <p>Widgets: {JSON.stringify(widget)} </p>\n  </div>\n);\n```\n\n</WidgetEditor>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1519, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "18d8d8d3-7a00-439b-9e92-73a80b56315c": {"__data__": {"id_": "18d8d8d3-7a00-439b-9e92-73a80b56315c", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "89cfe3d0-72aa-4e76-869d-c070b1bf67bd", "node_type": "1", "metadata": {}, "hash": "1ae50a33a5712efd45f7f9b2ee368032bb34fd9e288093532f794e08ed5fb91a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6503cb14-7bf7-4156-bf5f-6899c273e8e9", "node_type": "1", "metadata": {}, "hash": "ff1759a2eb5a01f85076776fd49c2ec50b1d354cee755f0a2927ce4eb15c9348", "class_name": "RelatedNodeInfo"}}, "text": "<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param      | required     | type               | description                  |\n|------------|--------------|--------------------|------------------------------|\n| `patterns` | **required** | string / string[]  | the path pattern(s)          |\n| `finality` | _optional_   | `\"final\"` / number | the block height or finality |\n| `options`  | _optional_   | object             | the `options` object.        |\n\n:::info options object\n\n- `subscribe` _(optional)_: if true, the data will be refreshed every 5 seconds.\n- `return_deleted` _(optional)_: whether to return deleted values (as `null`). Default is `false`.\n\n:::\n\nThe block height or finality can be used to get the data at a specific block height or finality.\nIf the block height or finality is not specified, the data will be fetched at the `optimistic` finality (the latest block height).\n\nFor block height and finality `final`, instead of calling the NEAR RPC directly, the VM uses the Social API Server to fetch the data.\n\nSocial API server indexes the data for SocialDB and allows to fetch the data at any block height with additional options.\n\nIt also allows returning more data than an RPC call because it's not restricted by the gas limit.\nIn general, the API server also serves data faster than the NEAR RPC, because it doesn't execute the contract code in a virtual machine.\n\n</details>\n\n:::tip\nWhile the data is fetching, `Social.get` returns `null`.\n:::\n\n\n---\n\n## Social.getr\n`Social.getr` is just a wrapper helper for `Social.get`, it appends `**` to each of the path pattern.", "mimetype": "text/plain", "start_char_idx": 1522, "end_char_idx": 3125, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6503cb14-7bf7-4156-bf5f-6899c273e8e9": {"__data__": {"id_": "6503cb14-7bf7-4156-bf5f-6899c273e8e9", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18d8d8d3-7a00-439b-9e92-73a80b56315c", "node_type": "1", "metadata": {}, "hash": "47f2213393cd57dc3944ee3f44ed2efc562534ccbdf5eb9802e0fdabfabe5911", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f160bbd5-fa14-40c3-9898-6f740c424d55", "node_type": "1", "metadata": {}, "hash": "a0843e59393d7f01924daccc81474099dce22b8a8173cc7d1717ecfc12aa2055", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor>\n\n```js\nconst profile = Social.getr(\"influencer.testnet/profile\");\n\nreturn (\n  <div>\n    <p>Profile: {JSON.stringify(profile)}</p>\n  </div>\n);\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param      | required     | type               | description                  |\n|------------|--------------|--------------------|------------------------------|\n| `patterns` | **required** | string / string[]  | the path pattern(s)          |\n| `finality` | _optional_   | `\"final\"` / number | the block height or finality |\n| `options`  | _optional_   | object             | the `options` object.        |\n\n:::info options object\n\n- `subscribe` _(optional)_: if true, the data will be refreshed every 5 seconds.\n- `return_deleted` _(optional)_: whether to return deleted values (as `null`). Default is `false`.\n\n:::\n\n</details>\n\n---\n\n## Social.keys\n\nThe `keys` method allows to get the list of keys that match a pattern. It's useful for querying the data without reading values.\n\nIt also has an additional `options` field that can be used to specify the return type and whether to return deleted keys.\n\n<WidgetEditor height=\"80\">\n\n```js\nconst data = Social.keys(`influencer.testnet/profile/*`, \"final\");\n\nreturn JSON.stringify(data)\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n`Social.keys` takes up to 3 arguments:\n\n| param      | required     | type               | description                  |\n|------------|--------------|--------------------|------------------------------|\n| `patterns` | **required** | string / string[]  | the path pattern(s)          |\n| `finality` | _optional_   | `\"final\"` / number | the block height or finality |\n| `options`  | _optional_   | object             | the `options` object.        |\n\n:::info options object\n\n- `subscribe` _(optional)_: if true, the data will be refreshed every 5 seconds.\n- `return_type` _(optional)_: either `\"History\"`, `\"True\"`, or `\"BlockHeight\"`. If not specified, it will return the `\"True\"`.", "mimetype": "text/plain", "start_char_idx": 3127, "end_char_idx": 5159, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f160bbd5-fa14-40c3-9898-6f740c424d55": {"__data__": {"id_": "f160bbd5-fa14-40c3-9898-6f740c424d55", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6503cb14-7bf7-4156-bf5f-6899c273e8e9", "node_type": "1", "metadata": {}, "hash": "ff1759a2eb5a01f85076776fd49c2ec50b1d354cee755f0a2927ce4eb15c9348", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d2b65d9-1ab4-49b7-8294-4a4add3bd209", "node_type": "1", "metadata": {}, "hash": "a630e778e9371822bbc1e4a709e1d07ee342cdf1a1097631bd6cbfbaffe6188a", "class_name": "RelatedNodeInfo"}}, "text": "- `return_deleted` _(optional)_: whether to return deleted values (as `null`). Default is `false`.\n- `values_only` _(optional)_: whether to return only values (don't include objects). Default is `false`.\n\n:::\n\n</details>\n\n:::tip\nThe Social API server supports custom options `return_type: \"History\"`. For each matching key, it will return an array containing all the block heights when the value was changed in ascending order.\nIt can be used for building a feed, where the values are overwritten. \n:::\n\n---\n\n## Social.set\n\nTakes a `data` object and commits it to SocialDB. The data object can contain multiple keys, and each key can contain multiple values.\n\nImportantly, a user can only commit to **their own** space in `SocialDB` (e.g. `alice.near` can only write in `alice.near/**`), except if [**given explicit permission**](https://github.com/NearSocial/social-db#permissions) by the owner of another space. \n\nEach time a user wants to commit data, they will be prompted to confirm the action. On confirming, the user can choose to not be asked again in the future.\n\n<WidgetEditor>\n\n```js\nconst onClick = () => {\n  Social.set({\n    post: {\n      main: JSON.stringify({\n        type: \"md\",\n        text: \"I've read the docs!\"\n      })\n    }\n  })\n}\n\nif(!context.accountId) return \"Please login...\";\n\nreturn <>\n  <p> Save a message showing some love to the NEAR Docs </p>\n  <button onClick={onClick}> Save the Message </button>\n</>\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n`Social.set` arguments:\n\n | param     | required     | type   | description                                                                                        |\n |-----------|--------------|--------|----------------------------------------------------------------------------------------------------|\n | `data`    | **required** | object | the data object to be committed. Similar to `CommitButton`, it shouldn't start with an account ID. |\n | `options` | _optional_   | object | optional object.                                                                                   |\n\n:::info options object\n\n- `force` _(optional)_: whether to overwrite the data.\n- `onCommit` _(optional)_: function to trigger on successful commit.", "mimetype": "text/plain", "start_char_idx": 5160, "end_char_idx": 7406, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d2b65d9-1ab4-49b7-8294-4a4add3bd209": {"__data__": {"id_": "7d2b65d9-1ab4-49b7-8294-4a4add3bd209", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f160bbd5-fa14-40c3-9898-6f740c424d55", "node_type": "1", "metadata": {}, "hash": "a0843e59393d7f01924daccc81474099dce22b8a8173cc7d1717ecfc12aa2055", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50826074-5006-472e-9493-ea02241e1dd7", "node_type": "1", "metadata": {}, "hash": "a416ab3f2a6ef6c0c3859daba6f432e13ec427aa38a62a76536c5cf609921690", "class_name": "RelatedNodeInfo"}}, "text": "Will pass the\ndata that was written (including `accountID`).\n- `onCancel` _(optional)_: function to trigger if the user cancels the commit.\n\n:::\n\n</details>\n\n:::tip\nBy default `Social.set` will omit saving data that is already saved (e.g. if the user already liked a post, it won't save the like again). To force saving the data, pass the `force` option.\n:::\n\n---\n\n## Social.index\nNEAR Social readily provides an indexer - a service that listen to actions in SocialDB, and caches them so they can be retrieved without needing to interact with the contract.\n\nThe indexer is very useful, for example, to rapidly store and retrieve information on all comments for a post. Without the indexer, we would need to check all entries in the contract to see who answered, surely running out of GAS before completion.\n\n<hr className=\"subsection\" />\n\n### Indexing an Action\nTo index an action we need to add the `index` key to the data being saved, within the `index` key we will save the `action` being indexed, alongside a `key` and a `value` that identifies this specific instance.\n\n<WidgetEditor>\n\n```js\n// General form of an indexed action\n// {\n//   index: {\n//     actionName: JSON.stringify({ key, value })\n//   }\n// }\n\nconst onClick = () => {\n  Social.set({\n    index: {\n      readDocs: JSON.stringify({key: \"docs\", value: \"like\"})\n    } ,\n  })\n}\n\nreturn <>\n  {context.accountId ?\n  <>\n    <p> Index an action showing some love to the NEAR Docs </p>\n    <button onClick={onClick}> Index Action </button>\n  </> :\n  <p> Login to index an action </p>}\n</>\n```\n\n</WidgetEditor>\n\nIn the example above we index a `docs` action. In this case the `action` is `docs`, and the `key` that identifies it is `\"read\"`.\n\n<details markdown=\"1\">\n\n<summary> Standards </summary>\n\n#### Indexing a Post\nTo index a post, the standard is to save the action `post`, with `{key: \"main\", value: {type: \"md\"}`.", "mimetype": "text/plain", "start_char_idx": 7407, "end_char_idx": 9287, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "50826074-5006-472e-9493-ea02241e1dd7": {"__data__": {"id_": "50826074-5006-472e-9493-ea02241e1dd7", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7d2b65d9-1ab4-49b7-8294-4a4add3bd209", "node_type": "1", "metadata": {}, "hash": "a630e778e9371822bbc1e4a709e1d07ee342cdf1a1097631bd6cbfbaffe6188a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98a0a7c0-167a-4971-b5bf-63c5c74de982", "node_type": "1", "metadata": {}, "hash": "f30e2da24c5eb8ee3a9b7687e6f4f3406b76c298f85d2981f522887919594634", "class_name": "RelatedNodeInfo"}}, "text": "```js\n{\n  index: {\n    post: JSON.stringify({\n      key: \"main\",\n      value: {type: \"md\"}\n    })\n  }\n}\n```\n\n#### Indexing a Like\nTo index a like, the standard is to save the action `like`, with `{key: object-representing-the-post, value: {type: \"like\" }}`\n\n```js\n{\n  index: {\n    like: JSON.stringify({\n      key: {type: 'social', path: 'influencer.testnet/post/main', blockHeight: 152959480 },\n      value: {type: \"like\"}})\n  }\n}\n```\n\n</details>\n\n<hr className=\"subsection\" />\n\n### Retrieving Indexed Actions\n\nTo retrieve indexed actions we use the `Social.index` method. It takes the `action` and the `key` as arguments, and returns an array of all the indexed values alongside the `blockHeight` in which they were indexed, and which user made the action.\n\n\n<WidgetEditor>\n\n```js\nconst readDocs = Social.index(\"readDocs\", \"docs\")\n\nreturn <>\n  <p> Number of indexed \"readDocs\" actions with key \"docs\": {readDocs.length} </p>\n\n  <b>Indexed actions</b>\n  {JSON.stringify(readDocs)}\n</>\n```\n\n</WidgetEditor>", "mimetype": "text/plain", "start_char_idx": 9289, "end_char_idx": 10295, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "98a0a7c0-167a-4971-b5bf-63c5c74de982": {"__data__": {"id_": "98a0a7c0-167a-4971-b5bf-63c5c74de982", "embedding": null, "metadata": {"file_path": "./near_dist/social.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7a59e20-90be-406a-9dba-5de7dd950816", "node_type": "4", "metadata": {}, "hash": "f02d9c0e84ce36716c06c7d5dfaaa69b5c282f9f40fc8e02aa301ae165fcd9d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50826074-5006-472e-9493-ea02241e1dd7", "node_type": "1", "metadata": {}, "hash": "a416ab3f2a6ef6c0c3859daba6f432e13ec427aa38a62a76536c5cf609921690", "class_name": "RelatedNodeInfo"}}, "text": "<details markdown=\"1\">\n<summary> Parameters </summary>\n\n`Social.index` arguments:\n\n | param     | required     | type   | description                                                                                |\n |-----------|--------------|--------|--------------------------------------------------------------------------------------------|\n | `action`  | **required** | string | is the `index_type` from the standard, e.g. in the path `index/like` the action is `like`. |\n | `key`     | **required** | string | is the inner indexed value from the standard.                                              |\n | `options` | _optional_   | object | the `options` object.                                                                      |\n\n:::info options object\n\n- `subscribe` _(optional)_: if true, the data will be refreshed every 5 seconds.\n- `accountId` _(optional)_: If given, it should either be a string or an array of account IDs to filter values by them. Otherwise, not filters by account Id.\n- `order` _(optional)_: Either `asc` or `desc`. Defaults to `asc`.\n- `limit` _(optional)_: Defaults to `100`. The number of values to return. Index may return more than index values, if the last elements have the same block height.\n- `from` _(optional)_: Defaults to `0` or `Max` depending on order.\n\n:::\n\n</details>", "mimetype": "text/plain", "start_char_idx": 10298, "end_char_idx": 11621, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c87ce170-2b62-4538-bb0d-343371d46b0f": {"__data__": {"id_": "c87ce170-2b62-4538-bb0d-343371d46b0f", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "373b8370-3a6f-44a5-8159-d334d19198b7", "node_type": "1", "metadata": {}, "hash": "6513e151b1ca9a87f80d83a8cf287d50d7c8af658dbbb8eaff4f08b52d7ffd06", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_label: Migrating to NEAR Lake framework\n---\n\n# Migrating to NEAR Lake Framework\n\n\nWe encourage everyone who don't have a hard requirement to use [NEAR Indexer Framework](/concepts/advanced/near-indexer-framework) consider the migration to [NEAR Lake Framework](/concepts/advanced/near-lake-framework).\n\nIn this tutorial we'll show you how to migrate the project using [indexer-tx-watcher-example](https://github.com/near-examples/indexer-tx-watcher-example) as a showcase.\n\n:::info Source code\n\nThe source code for the migrated indexer can be found on GitHub https://github.com/near-examples/indexer-tx-watcher-example-lake/tree/0.4.0\n\n:::\n\n:::info Diffs\n\nWe've [posted the diffs for the reference in the end](#diffs) of the article, you can scroll down to them if diffs are all you need in order to migrate your indexer\n\n:::\n\n## Changing the dependencies\n\nFirst of all we'll start from the dependencies in `Cargo.toml`\n\n```toml title=src/Cargo.toml\n\n[package]\nname = \"indexer-tx-watcher-example\"\nversion = \"0.1.0\"\nauthors = [\"Near Inc <hello@nearprotocol.com>\"]\nedition = \"2018\"\n\n[dependencies]\nactix = \"=0.11.0-beta.2\"\nactix-rt = \"=2.2.0\"  # remove it once actix is upgraded to 0.11+\nbase64 = \"0.11\"\nclap = \"3.0.0-beta.1\"\nopenssl-probe = { version = \"0.1.2\" }\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1.0.55\"\ntokio = { version = \"1.1\", features = [\"sync\"] }\ntracing = \"0.1.13\"\ntracing-subscriber = \"0.2.4\"\n\nnear-indexer = { git = \"https://github.com/near/nearcore\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1501, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "373b8370-3a6f-44a5-8159-d334d19198b7": {"__data__": {"id_": "373b8370-3a6f-44a5-8159-d334d19198b7", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c87ce170-2b62-4538-bb0d-343371d46b0f", "node_type": "1", "metadata": {}, "hash": "1426f5bc48449630db510a5a13b736a519f0e40467c5cd4c960e1dbea299ef81", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9", "node_type": "1", "metadata": {}, "hash": "6f1f2b925a4b5a26413804e80fe4e0d55fb67ce4008deaf83326625072711341", "class_name": "RelatedNodeInfo"}}, "text": "rev = \"25b000ae4dd9fe784695d07a3f2e99d82a6f10bd\" }\n```\n\n- Update `edition` to `2021`\n- Drop `actix` crates\n- Drop `openssl-probe` crate\n- Add `futures` and `itertools`\n- Add features to `tokio` as we will be using tokio runtime\n- Add `tokio-stream` crate\n- Replace `near-indexer` with `near-lake-framework`\n\nSo in the end we'll have this after all:\n\n```toml title=src/Cargo.toml\n[package]\nname = \"indexer-tx-watcher-example\"\nversion = \"0.1.0\"\nauthors = [\"Near Inc <hello@nearprotocol.com>\"]\nedition = \"2021\"\n\n[dependencies]\nbase64 = \"0.11\"\nclap = { version = \"3.1.6\", features = [\"derive\"] }\nfutures = \"0.3.5\"\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1.0.55\"\nitertools = \"0.9.0\"\ntokio = { version = \"1.1\", features = [\"sync\", \"time\", \"macros\", \"rt-multi-thread\"] }\ntokio-stream = { version = \"0.1\" }\ntracing = \"0.1.13\"\ntracing-subscriber = \"0.2.4\"\n\nnear-lake-framework = \"0.4.0\"\n\n```\n\n## Change the clap configs\n\nCurrently we have structure `Opts` that has a subcommand with `Run` and `Init` command. Since [NEAR Lake Framework](/concepts/advanced/near-lake-framework) doesn't need `data` and config files we don't need `Init` at all. So we need to combine some structures into `Opts` itself.\n\n```rust title=src/config.rs\n...\n/// NEAR Indexer Example\n/// Watches for stream of blocks from the chain\n#[derive(Clap, Debug)]\n#[clap(version = \"0.1\", author = \"Near Inc. <hello@nearprotocol.com>\")]\npub(crate) struct Opts {\n    /// Sets a custom config dir.", "mimetype": "text/plain", "start_char_idx": 1502, "end_char_idx": 2976, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9": {"__data__": {"id_": "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "373b8370-3a6f-44a5-8159-d334d19198b7", "node_type": "1", "metadata": {}, "hash": "6513e151b1ca9a87f80d83a8cf287d50d7c8af658dbbb8eaff4f08b52d7ffd06", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "69618108-fe66-4978-ad52-4ca7afe74964", "node_type": "1", "metadata": {}, "hash": "9a82a7db7ff64698adfefadb1bc2d6cc4dab2166c85b478925579f69166e03dd", "class_name": "RelatedNodeInfo"}}, "text": "Defaults to ~/.near/\n    #[clap(short, long)]\n    pub home_dir: Option<std::path::PathBuf>,\n    #[clap(subcommand)]\n    pub subcmd: SubCommand,\n}\n\n#[derive(Clap, Debug)]\npub(crate) enum SubCommand {\n    /// Run NEAR Indexer Example. Start observe the network\n    Run(RunArgs),\n    /// Initialize necessary configs\n    Init(InitConfigArgs),\n}\n\n#[derive(Clap, Debug)]\npub(crate) struct RunArgs {\n    /// account ids to watch for\n    #[clap(long)]\n    pub accounts: String,\n}\n\n#[derive(Clap, Debug)]\npub(crate) struct InitConfigArgs {\n    ...\n}\n...\n```\n\nWe are going:\n\n- Drop `InitConfigArgs` completely\n- Move the content from `RunArgs` to `Opts` and then drop `RunArgs`\n- Drop `home_dir` from `Opts`\n- Add `block_height` to `Opts` to know from which block height to start indexing\n- Refactor `SubCommand` to have to variants: mainnet and testnet to define what chain to index\n- And add `Clone` detive to the structs for later\n\n```rust title=src/config.rs\n/// NEAR Indexer Example\n/// Watches for stream of blocks from the chain\n#[derive(Clap, Debug, Clone)]\n#[clap(version = \"0.1\", author = \"Near Inc. <hello@nearprotocol.com>\")]\npub(crate) struct Opts {\n    /// block height to start indexing from\n    #[clap(long)]\n    pub block_height: u64,\n    /// account ids to watch for\n    #[clap(long)]\n    pub accounts: String,\n    #[clap(subcommand)]\n    pub subcmd: SubCommand,\n}\n\n#[derive(Clap, Debug, Clone)]\npub(crate) enum SubCommand {\n    Mainnet,\n    Testnet,\n}\n```\n\nIn the end of the file we have one implementation we need to replace.\n\n```rust title=src/config.rs\n...\nimpl From<InitConfigArgs> for near_indexer::InitConfigArgs {\n    ...\n}\n```\n\nWe want to be able to cast `Opts` to `near_lake_framework::LakeConfig`. So we're going to create a new implementation.", "mimetype": "text/plain", "start_char_idx": 2977, "end_char_idx": 4741, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "69618108-fe66-4978-ad52-4ca7afe74964": {"__data__": {"id_": "69618108-fe66-4978-ad52-4ca7afe74964", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9", "node_type": "1", "metadata": {}, "hash": "6f1f2b925a4b5a26413804e80fe4e0d55fb67ce4008deaf83326625072711341", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855", "node_type": "1", "metadata": {}, "hash": "e30442074089d90fcb2adea2e3c406212c647f65b1ad4043d3f66bc83a4ba094", "class_name": "RelatedNodeInfo"}}, "text": "```rust title=src/config.rs\nimpl From<Opts> for near_lake_framework::LakeConfig {\n    fn from(opts: Opts) -> Self {\n        let mut lake_config =\n            near_lake_framework::LakeConfigBuilder::default().start_block_height(opts.block_height);\n\n        match &opts.subcmd {\n            SubCommand::Mainnet => {\n                lake_config = lake_config.mainnet();\n            }\n            SubCommand::Testnet => {\n                lake_config = lake_config.testnet();\n            }\n        };\n\n        lake_config.build().expect(\"Failed to build LakeConfig\")\n    }\n}\n```\n\nAnd the final move is to change `init_logging` function to remove redundant log subscriptions:\n\n```rust title=src/config.rs\n\n...\npub(crate) fn init_logging() {\n    let env_filter = EnvFilter::new(\n        \"tokio_reactor=info,near=info,stats=info,telemetry=info,indexer_example=info,indexer=info,near-performance-metrics=info\",\n    );\n    tracing_subscriber::fmt::Subscriber::builder()\n        .with_env_filter(env_filter)\n        .with_writer(std::io::stderr)\n        .init();\n}\n...\n```\n\nReplace it with\n\n```rust title=src/config.rs\n...\npub(crate) fn init_logging() {\n    let env_filter = EnvFilter::new(\"near_lake_framework=info\");\n    tracing_subscriber::fmt::Subscriber::builder()\n        .with_env_filter(env_filter)\n        .with_writer(std::io::stderr)\n        .init();\n}\n...\n```\n\nFinally we're done with `src/config.rs` and now we can move on to `src/main.rs`\n\n## Replacing the indexer instantiation\n\nSince we can use `tokio` runtime and make our `main` function asynchronous it's shorted to show the recreating of the `main` function than the process of refactoring.\n\nLet's start from import section\n\n### Imports before\n\n```rust title=src/main.rs\nuse std::str::FromStr;\n\nuse std::collections::{HashMap, HashSet};\n\nuse clap::Clap;\nuse tokio::sync::mpsc;\nuse tracing::info;\n\nuse configs::{init_logging, Opts, SubCommand};\n\nmod configs;\n```\n\n### Imports after\n\nWe're adding `near_lake_framework` imports and remove redundant import from `configs`.", "mimetype": "text/plain", "start_char_idx": 4743, "end_char_idx": 6770, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855": {"__data__": {"id_": "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69618108-fe66-4978-ad52-4ca7afe74964", "node_type": "1", "metadata": {}, "hash": "9a82a7db7ff64698adfefadb1bc2d6cc4dab2166c85b478925579f69166e03dd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d", "node_type": "1", "metadata": {}, "hash": "0eea11d4316fd6d574758ac324fbbd12b37f45d2578157d3cad612d6da5107ad", "class_name": "RelatedNodeInfo"}}, "text": "```rust title=src/main.rs\nuse std::str::FromStr;\n\nuse std::collections::{HashMap, HashSet};\n\nuse clap::Clap;\nuse tokio::sync::mpsc;\nuse tracing::info;\n\nuse near_lake_framework::near_indexer_primitives;\nuse near_lake_framework::LakeConfig;\n\nuse configs::{init_logging, Opts};\n```\n\n### Creating `main()`\n\nLet's create an async `main()` function, call `init_logging` and read the `Opts`.\n\n```rust title=src/main.rs\n#[tokio::main]\nasync fn main() -> Result<(), tokio::io::Error> {\n    init_logging();\n\n    let opts: Opts = Opts::parse();\n\n```\n\nLet's cast `LakeConfig` from `Opts` and instantiate [NEAR Lake Framework](/concepts/advanced/near-lake-framework)'s `stream`\n\n```rust title=src/main.rs\n#[tokio::main]\nasync fn main() -> Result<(), tokio::io::Error> {\n    init_logging();\n\n    let opts: Opts = Opts::parse();\n\n    let config: LakeConfig = opts.clone().into();\n\n    let (_, stream) = near_lake_framework::streamer(config);\n\n```\n\nCopy/paste the code of reading `accounts` arg to `Vec<AccountId`> from the old `main()`\n\n```rust title=src/main.rs\n#[tokio::main]\nasync fn main() -> Result<(), tokio::io::Error> {\n    init_logging();\n\n    let opts: Opts = Opts::parse();\n\n    let config: LakeConfig = opts.clone().into();\n\n    let (_, stream) = near_lake_framework::streamer(config);\n\n    let watching_list = opts\n        .accounts\n        .split(',')\n        .map(|elem| {\n            near_indexer_primitives::types::AccountId::from_str(elem).expect(\"AccountId is invalid\")\n        })\n        .collect();\n```\n\nNow we can call `listen_blocks` function we have used before in our indexer while it was built on top of [NEAR Indexer Framework](/concepts/advanced/near-indexer-framework). And return `Ok(())` so our `main()` would be happy.", "mimetype": "text/plain", "start_char_idx": 6772, "end_char_idx": 8507, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d": {"__data__": {"id_": "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855", "node_type": "1", "metadata": {}, "hash": "e30442074089d90fcb2adea2e3c406212c647f65b1ad4043d3f66bc83a4ba094", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c", "node_type": "1", "metadata": {}, "hash": "58a820dacafe5fc8d612dda80f404d8bff6f394aad16d01a35aa33de93cccb3e", "class_name": "RelatedNodeInfo"}}, "text": "### Final async main with NEAR Lake Framework stream\n```rust title=src/main.rs\n#[tokio::main]\nasync fn main() -> Result<(), tokio::io::Error> {\n    init_logging();\n\n    let opts: Opts = Opts::parse();\n\n    let config: LakeConfig = opts.clone().into();\n\n    let (_, stream) = near_lake_framework::streamer(config);\n\n    let watching_list = opts\n        .accounts\n        .split(',')\n        .map(|elem| {\n            near_indexer_primitives::types::AccountId::from_str(elem).expect(\"AccountId is invalid\")\n        })\n        .collect();\n\n    listen_blocks(stream, watching_list).await;\n\n    Ok(())\n}\n```\n\nWe're done. That's pretty much entire `main()` function. Drop the old one if you haven't yet.\n\n## Changes in other function related to data types\n\nAlong with [NEAR Lake Framework](/concepts/advanced/near-lake-framework) release we have extracted the structures created for indexers into a separate crate. This was done in order to avoid dependency on `nearcore` as now you can depend on a separate crate that is already [published on crates.io](https://crates.io/crates/near-indexer-primitives) or on NEAR Lake Framework that exposes that crate.", "mimetype": "text/plain", "start_char_idx": 8510, "end_char_idx": 9659, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c": {"__data__": {"id_": "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d", "node_type": "1", "metadata": {}, "hash": "0eea11d4316fd6d574758ac324fbbd12b37f45d2578157d3cad612d6da5107ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0dff6c25-6065-4c39-a86d-eba728f37510", "node_type": "1", "metadata": {}, "hash": "9e335d33c1dc878e413c8145379de7f570a6169855872956259d5e131b3334bd", "class_name": "RelatedNodeInfo"}}, "text": "### `listen_blocks`\n\nA function signature needs to be changed to point to new place for data types\n\n```rust title=src/main.rs\nasync fn listen_blocks(\n    mut stream: mpsc::Receiver<near_indexer::StreamerMessage>,\n    watching_list: Vec<near_indexer::near_primitives::types::AccountId>,\n ) {\n```\n\n```rust title=src/main.rs\nasync fn listen_blocks(\n    mut stream: mpsc::Receiver<near_indexer_primitives::StreamerMessage>,\n    watching_list: Vec<near_indexer_primitives::types::AccountId>,\n ) {\n```\n\nAnd another 3 places where `near_indexer::near_primitives` needs to be replaced with `near_indexer_primitives`\n\n```rust title=src/main.rs\n\nif let near_indexer_primitives::views::ReceiptEnumView::Action {\n```\n\n```rust title=src/main.rs\nif let near_indexer_primitives::views::ReceiptEnumView::Action {\n```\n\n```rust title=src/main.rs\nif let near_indexer_primitives::views::ActionView::FunctionCall {\n```\n\n## `is_tx_receiver_watched()`\n\nAnd final change for data types in the function `is_tx_receiver_watched()`\n\n```rust title=src/main.rs\nfn is_tx_receiver_watched(\n    tx: &near_indexer_primitives::IndexerTransactionWithOutcome,\n    watching_list: &[near_indexer_primitives::types::AccountId],\n) -> bool {\n    watching_list.contains(&tx.transaction.receiver_id)\n}\n```\n\n## Credentials\n[Configure the Credentials](./running-near-lake/credentials.md) in order to access the data from NEAR Lake Framework\n\n## Conclusion\n\nAnd now we have a completely migrated to [NEAR Lake Framework](/concepts/advanced/near-lake-framework) indexer.", "mimetype": "text/plain", "start_char_idx": 9661, "end_char_idx": 11184, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0dff6c25-6065-4c39-a86d-eba728f37510": {"__data__": {"id_": "0dff6c25-6065-4c39-a86d-eba728f37510", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c", "node_type": "1", "metadata": {}, "hash": "58a820dacafe5fc8d612dda80f404d8bff6f394aad16d01a35aa33de93cccb3e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b", "node_type": "1", "metadata": {}, "hash": "2d8001321f22a69e807691aa431e08b0cb711c9ba6056d9dacf68497633c7f4e", "class_name": "RelatedNodeInfo"}}, "text": "We are posting the complete diffs for the reference\n\n## Diffs\n\n```diff title=Cargo.toml\n--- a/Cargo.toml\n+++ b/Cargo.toml\n@@ -2,18 +2,18 @@\n name = \"indexer-tx-watcher-example\"\n version = \"0.1.0\"\n authors = [\"Near Inc <hello@nearprotocol.com>\"]\n-edition = \"2018\"\n+edition = \"2021\"\n\n [dependencies]\n-actix = \"=0.11.0-beta.2\"\n-actix-rt = \"=2.2.0\"  # remove it once actix is upgraded to 0.11+\n base64 = \"0.11\"\n-clap = \"3.0.0-beta.1\"\n-openssl-probe = { version = \"0.1.2\" }\n+clap = { version = \"3.1.6\", features = [\"derive\"] }\n+futures = \"0.3.5\"\n serde = { version = \"1\", features = [\"derive\"] }\n serde_json = \"1.0.55\"\n-tokio = { version = \"1.1\", features = [\"sync\"] }\n+itertools = \"0.9.0\"\n+tokio = { version = \"1.1\", features = [\"sync\", \"time\", \"macros\", \"rt-multi-thread\"] }\n+tokio-stream = { version = \"0.1\" }\n tracing = \"0.1.13\"\n tracing-subscriber = \"0.2.4\"\n\n-near-indexer = { git = \"https://github.com/near/nearcore\", rev = \"25b000ae4dd9fe784695d07a3f2e99d82a6f10bd\" }\n+near-lake-framework = \"0.4.0\"\n```\n\n```diff title=src/configs.rs\n--- a/src/configs.rs\n+++ b/src/configs.rs\n@@ -1,99 +1,50 @@\n-use clap::Clap;\n+use clap::Parser;\n\n use tracing_subscriber::EnvFilter;\n\n /// NEAR Indexer Example\n /// Watches for stream of blocks from the chain\n-#[derive(Clap, Debug)]\n+#[derive(Parser, Debug, Clone)]\n #[clap(version = \"0.1\", author = \"Near Inc.", "mimetype": "text/plain", "start_char_idx": 11186, "end_char_idx": 12531, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b": {"__data__": {"id_": "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0dff6c25-6065-4c39-a86d-eba728f37510", "node_type": "1", "metadata": {}, "hash": "9e335d33c1dc878e413c8145379de7f570a6169855872956259d5e131b3334bd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f9ac36af-472c-4d94-915a-b4e65fafbc9f", "node_type": "1", "metadata": {}, "hash": "74ee477d40c72842b5867c5ac4bd5ccf9604dae73a57f8a1b00f00310e888bd9", "class_name": "RelatedNodeInfo"}}, "text": "<hello@nearprotocol.com>\")]\n pub(crate) struct Opts {\n-    /// Sets a custom config dir. Defaults to ~/.near/\n-    #[clap(short, long)]\n-    pub home_dir: Option<std::path::PathBuf>,\n-    #[clap(subcommand)]\n-    pub subcmd: SubCommand,\n-}\n-\n-#[derive(Clap, Debug)]\n-pub(crate) enum SubCommand {\n-    /// Run NEAR Indexer Example. Start observe the network\n-    Run(RunArgs),\n-    /// Initialize necessary configs\n-    Init(InitConfigArgs),\n-}\n-\n-#[derive(Clap, Debug)]\n-pub(crate) struct RunArgs {\n+    /// block height to start indexing from\n+    #[clap(long)]\n+    pub block_height: u64,\n     /// account ids to watch for\n     #[clap(long)]\n     pub accounts: String,\n+    #[clap(subcommand)]\n+    pub subcmd: SubCommand,\n }\n\n-#[derive(Clap, Debug)]\n-pub(crate) struct InitConfigArgs {\n-    /// chain/network id (localnet, testnet, devnet, betanet)\n-    #[clap(short, long)]\n-    pub chain_id: Option<String>,\n-    /// Account ID for the validator key\n-    #[clap(long)]\n-    pub account_id: Option<String>,\n-    /// Specify private key generated from seed (TESTING ONLY)\n-    #[clap(long)]\n-    pub test_seed: Option<String>,\n-    /// Number of shards to initialize the chain with\n-    #[clap(short, long, default_value = \"1\")]\n-    pub num_shards: u64,\n-    /// Makes block production fast (TESTING ONLY)\n-    #[clap(short, long)]\n-    pub fast: bool,\n-    /// Genesis file to use when initialize testnet (including downloading)\n-    #[clap(short, long)]\n-    pub genesis: Option<String>,\n-    /// Download the verified NEAR genesis file automatically.\n-    #[clap(long)]\n-    pub download_genesis: bool,\n-    /// Specify a custom download URL for the genesis file.\n-    #[clap(long)]\n-    pub download_genesis_url: Option<String>,\n-    /// Download the verified NEAR config file automatically.", "mimetype": "text/plain", "start_char_idx": 12532, "end_char_idx": 14331, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f9ac36af-472c-4d94-915a-b4e65fafbc9f": {"__data__": {"id_": "f9ac36af-472c-4d94-915a-b4e65fafbc9f", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b", "node_type": "1", "metadata": {}, "hash": "2d8001321f22a69e807691aa431e08b0cb711c9ba6056d9dacf68497633c7f4e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1f6f617d-79b4-4302-ab2a-16747208a051", "node_type": "1", "metadata": {}, "hash": "86cab6de92e5f0b92707db98f6f8f1dfe3c8f93d06df35ea6b6fa68ce68c517c", "class_name": "RelatedNodeInfo"}}, "text": "-    #[clap(long)]\n-    pub download_config: bool,\n-    /// Specify a custom download URL for the config file.\n-    #[clap(long)]\n-    pub download_config_url: Option<String>,\n-    /// Specify the boot nodes to bootstrap the network\n-    #[clap(long)]\n-    pub boot_nodes: Option<String>,\n-    /// Specify a custom max_gas_burnt_view limit.\n-    #[clap(long)]\n-    pub max_gas_burnt_view: Option<u64>,\n+#[derive(Parser, Debug, Clone)]\n+pub(crate) enum SubCommand {\n+    Mainnet,\n+    Testnet,\n }\n\n pub(crate) fn init_logging() {\n-    let env_filter = EnvFilter::new(\n-        \"tokio_reactor=info,near=info,stats=info,telemetry=info,indexer_example=info,indexer=info,near-performance-metrics=info\",\n-    );\n+    let env_filter = EnvFilter::new(\"near_lake_framework=info\");\n     tracing_subscriber::fmt::Subscriber::builder()\n         .with_env_filter(env_filter)\n         .with_writer(std::io::stderr)\n         .init();\n }\n\n-impl From<InitConfigArgs> for near_indexer::InitConfigArgs {\n-    fn from(config_args: InitConfigArgs) -> Self {\n-        Self {\n-            chain_id: config_args.chain_id,\n-            account_id: config_args.account_id,\n-            test_seed: config_args.test_seed,\n-            num_shards: config_args.num_shards,\n-            fast: config_args.fast,\n-            genesis: config_args.genesis,\n-            download_genesis: config_args.download_genesis,\n-            download_genesis_url: config_args.download_genesis_url,\n-            download_config: config_args.download_config,\n-            download_config_url: config_args.download_config_url,\n-            boot_nodes: config_args.boot_nodes,\n-            max_gas_burnt_view: config_args.max_gas_burnt_view,", "mimetype": "text/plain", "start_char_idx": 14332, "end_char_idx": 16024, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1f6f617d-79b4-4302-ab2a-16747208a051": {"__data__": {"id_": "1f6f617d-79b4-4302-ab2a-16747208a051", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f9ac36af-472c-4d94-915a-b4e65fafbc9f", "node_type": "1", "metadata": {}, "hash": "74ee477d40c72842b5867c5ac4bd5ccf9604dae73a57f8a1b00f00310e888bd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5fe3eae1-b15b-4585-92f9-18a4beda394f", "node_type": "1", "metadata": {}, "hash": "87843efbdbf536ce60c6202cbadeb4fbad591699e4dd406d5696b6431c489549", "class_name": "RelatedNodeInfo"}}, "text": "-        }\n+impl From<Opts> for near_lake_framework::LakeConfig {\n+    fn from(opts: Opts) -> Self {\n+        let mut lake_config =\n+            near_lake_framework::LakeConfigBuilder::default().start_block_height(opts.block_height);\n+\n+        match &opts.subcmd {\n+            SubCommand::Mainnet => {\n+                lake_config = lake_config.mainnet();\n+            }\n+            SubCommand::Testnet => {\n+                lake_config = lake_config.testnet();\n+            }\n+        };\n+\n+        lake_config.build().expect(\"Failed to build LakeConfig\")\n     }\n }\n```\n\n```diff title=src/main.rs\n--- a/src/main.rs\n+++ b/src/main.rs\n@@ -2,11 +2,14 @@\n\n use std::collections::{HashMap, HashSet};\n\n-use clap::Clap;\n+use clap::Parser;\n use tokio::sync::mpsc;\n use tracing::info;\n\n-use configs::{init_logging, Opts, SubCommand};\n+use near_lake_framework::near_indexer_primitives;\n+use near_lake_framework::LakeConfig;\n+\n+use configs::{init_logging, Opts};\n\n mod configs;\n\n@@ -15,60 +18,34 @@\n /// We want to catch all *successful* transactions sent to one of the accounts from the list.\n /// In the demo we'll just look for them and log them but it might and probably should be extended based on your needs.", "mimetype": "text/plain", "start_char_idx": 16025, "end_char_idx": 17232, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5fe3eae1-b15b-4585-92f9-18a4beda394f": {"__data__": {"id_": "5fe3eae1-b15b-4585-92f9-18a4beda394f", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1f6f617d-79b4-4302-ab2a-16747208a051", "node_type": "1", "metadata": {}, "hash": "86cab6de92e5f0b92707db98f6f8f1dfe3c8f93d06df35ea6b6fa68ce68c517c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1feb9dd2-cc60-4afe-8d54-090e39753069", "node_type": "1", "metadata": {}, "hash": "36e73c6a5705a781105118834cde878990790104ab6aea70a85f4d5918d0dd1f", "class_name": "RelatedNodeInfo"}}, "text": "-fn main() {\n-    // We use it to automatically search the for root certificates to perform HTTPS calls\n-    // (sending telemetry and downloading genesis)\n-    openssl_probe::init_ssl_cert_env_vars();\n+#[tokio::main]\n+async fn main() -> Result<(), tokio::io::Error> {\n     init_logging();\n\n     let opts: Opts = Opts::parse();\n\n-    let home_dir = opts.home_dir.unwrap_or_else(near_indexer::get_default_home);\n+    let config: LakeConfig = opts.clone().into();\n\n-    match opts.subcmd {\n-        SubCommand::Run(args) => {\n-            // Create the Vec of AccountId from the provided ``--accounts`` to pass it to `listen_blocks`\n-            let watching_list = args\n-                .accounts\n-                .split(',')\n-                .map(|elem| {\n-                    near_indexer::near_primitives::types::AccountId::from_str(elem)\n-                        .expect(\"AccountId is invalid\")\n-                })\n-                .collect();\n-\n-            // Inform about indexer is being started and what accounts we're watching for\n-            eprintln!(\n-                \"Starting indexer transaction watcher for accounts: \\n {:#?}\",\n-                &args.accounts\n-            );\n-\n-            // Instantiate IndexerConfig with hardcoded parameters\n-            let indexer_config = near_indexer::IndexerConfig {\n-                home_dir,\n-                sync_mode: near_indexer::SyncModeEnum::FromInterruption,\n-                await_for_node_synced: near_indexer::AwaitForNodeSyncedEnum::WaitForFullSync,\n-            };\n+    let (_, stream) = near_lake_framework::streamer(config);\n\n-            // Boilerplate code to start the indexer itself\n-            let sys = actix::System::new();\n-            sys.block_on(async move {\n-                eprintln!", "mimetype": "text/plain", "start_char_idx": 17234, "end_char_idx": 19006, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1feb9dd2-cc60-4afe-8d54-090e39753069": {"__data__": {"id_": "1feb9dd2-cc60-4afe-8d54-090e39753069", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5fe3eae1-b15b-4585-92f9-18a4beda394f", "node_type": "1", "metadata": {}, "hash": "87843efbdbf536ce60c6202cbadeb4fbad591699e4dd406d5696b6431c489549", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b92567c5-0164-4c0a-8a6c-f152f6a5b505", "node_type": "1", "metadata": {}, "hash": "e544ee71b0cd81aedff8e94dbcd2909f4a2eda5c7a53ac3f8364e5ca3b45e23e", "class_name": "RelatedNodeInfo"}}, "text": "(\"Actix\");\n-                let indexer = near_indexer::Indexer::new(indexer_config);\n-                let stream = indexer.streamer();\n-                actix::spawn(listen_blocks(stream, watching_list));\n-            });\n-            sys.run().unwrap();\n-        }\n-        SubCommand::Init(config) => near_indexer::indexer_init_configs(&home_dir, config.into()),\n-    }\n+    let watching_list = opts\n+        .accounts\n+        .split(',')\n+        .map(|elem| {\n+            near_indexer_primitives::types::AccountId::from_str(elem).expect(\"AccountId is invalid\")\n+        })\n+        .collect();\n+\n+    listen_blocks(stream, watching_list).await;\n+\n+    Ok(())\n }\n\n /// The main listener function the will be reading the stream of blocks `StreamerMessage`\n /// and perform necessary checks\n async fn listen_blocks(\n-    mut stream: mpsc::Receiver<near_indexer::StreamerMessage>,\n-    watching_list: Vec<near_indexer::near_primitives::types::AccountId>,\n+    mut stream: mpsc::Receiver<near_indexer_primitives::StreamerMessage>,\n+    watching_list: Vec<near_indexer_primitives::types::AccountId>,\n ) {\n     eprintln!(\"listen_blocks\");\n     // This will be a map of correspondence between transactions and receipts\n@@ -120,7 +97,7 @@\n                         &execution_outcome.receipt.receiver_id,\n                         execution_outcome.execution_outcome.outcome.status\n                     );\n-                    if let near_indexer::near_primitives::views::ReceiptEnumView::Action {\n+                    if let near_indexer_primitives::views::ReceiptEnumView::Action {\n                         signer_id,\n                         ..\n                     } = &execution_outcome.receipt.receipt\n@@ -128,19 +105,20 @@\n                         eprintln!", "mimetype": "text/plain", "start_char_idx": 19006, "end_char_idx": 20765, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b92567c5-0164-4c0a-8a6c-f152f6a5b505": {"__data__": {"id_": "b92567c5-0164-4c0a-8a6c-f152f6a5b505", "embedding": null, "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76", "node_type": "4", "metadata": {}, "hash": "d26df9313a3ba1d1cb16e7839dba6b0678dd510b31b16cdbeb8ebba8961809e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1feb9dd2-cc60-4afe-8d54-090e39753069", "node_type": "1", "metadata": {}, "hash": "36e73c6a5705a781105118834cde878990790104ab6aea70a85f4d5918d0dd1f", "class_name": "RelatedNodeInfo"}}, "text": "(\"{}\", signer_id);\n                     }\n\n-                    if let near_indexer::near_primitives::views::ReceiptEnumView::Action {\n-                        actions,\n-                        ..\n+                    if let near_indexer_primitives::views::ReceiptEnumView::Action {\n+                        actions, ..\n                     } = execution_outcome.receipt.receipt\n                     {\n                         for action in actions.iter() {\n-                            if let near_indexer::near_primitives::views::ActionView::FunctionCall {\n+                            if let near_indexer_primitives::views::ActionView::FunctionCall {\n                                 args,\n                                 ..\n                             } = action\n                             {\n                                 if let Ok(decoded_args) = base64::decode(args) {\n-                                    if let Ok(args_json) = serde_json::from_slice::<serde_json::Value>(&decoded_args) {\n+                                    if let Ok(args_json) =\n+                                        serde_json::from_slice::<serde_json::Value>(&decoded_args)\n+                                    {\n                                         eprintln!(\"{:#?}\", args_json);\n                                     }\n                                 }\n@@ -156,8 +134,8 @@\n }\n\n fn is_tx_receiver_watched(\n-    tx: &near_indexer::IndexerTransactionWithOutcome,\n-    watching_list: &[near_indexer::near_primitives::types::AccountId],\n+    tx: &near_indexer_primitives::IndexerTransactionWithOutcome,\n+    watching_list: &[near_indexer_primitives::types::AccountId],\n ) -> bool {\n     watching_list.contains(&tx.transaction.receiver_id)\n }\n```", "mimetype": "text/plain", "start_char_idx": 20765, "end_char_idx": 22500, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aad78407-875d-4804-84d6-b4adf8135747": {"__data__": {"id_": "aad78407-875d-4804-84d6-b4adf8135747", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3682b739-496d-43f7-8751-45f384ea91b6", "node_type": "1", "metadata": {}, "hash": "a8830f13f219fbc2f06bc2a8261dcd8a26500d024e3358511874f6df1bb18f47", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: winning-an-nft\ntitle: Winning an NFT\nsidebar_label: Winning an NFT\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nNo one will enter an auction if there's nothing to win, so let's add a prize. Why not an [NFT](../../2.build/5.primitives/nft.md)? NFTs are uniquely identifiable, easily swappable and their logic comes from an external contract so the prize will exist without the auction contract. Let's get to work!\n\n---\n\n## Listing the NFT\n\nWhen we create an auction we need to list the NFT. To specify which NFT is being auctioned off we need the account ID of the NFT contract and the token ID of the NFT. We will specify these when the contract is initialized; amend `init` to add `nft_contract` and `token_id` as such:  \n\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/03-owner-claims-winner-gets-nft/src/contract.ts#L22-L28\"\n                start=\"22\" end=\"28\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/src/lib.rs#L32-L49\"\n                start=\"32\" end=\"49\" />\n\n        Note that `token_id` is of type `TokenId` which is a String type alias that the NFT standards use for future-proofing.\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Transferring the NFT to the winner\n\nWhen the method `claim` is called the NFT needs to be transferred to the highest bidder. Operations regarding NFTs live on the NFT contract, so we make a cross-contract call to the NFT contract telling it to swap the owner of the NFT to the highest bidder.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1896, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3682b739-496d-43f7-8751-45f384ea91b6": {"__data__": {"id_": "3682b739-496d-43f7-8751-45f384ea91b6", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aad78407-875d-4804-84d6-b4adf8135747", "node_type": "1", "metadata": {}, "hash": "999b3d4eac6706e8febd4e54598e5b92a71ff92891a98899282d3ee3ce4c823e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "edde16c5-885e-44b9-83b2-8aad7a1dcb53", "node_type": "1", "metadata": {}, "hash": "42354ec95ff52203fbc67e5c8262e8007584273d88180466722306e399ccf661", "class_name": "RelatedNodeInfo"}}, "text": "The method on the NFT contract to do this is `nft_transfer`.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/03-owner-claims-winner-gets-nft/src/contract.ts#L68-L70\"\n                start=\"68\" end=\"70\" />\n\n        In near-sdk-js we cannot transfer the NFT and send the $NEAR independently so we will chain the promises.\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        We will create a new file in our source folder named `ext.rs`; here we are going to define the interface for the `nft_transfer` method. We define this interface as a `trait` and use the `ext_contract` macro to convert the NFT trait into a module with the method `nft_transfer`. Defining external methods in a separate file helps improve the readability of our code. \n        \n        We then use this method in our `lib.rs` file to transfer the NFT.\n\n        <Language value=\"rust\" language=\"rust\">\n            <Github fname=\"lib.rs\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/src/lib.rs#L93-L96\"\n                start=\"93\" end=\"96\" />\n            <Github fname=\"ext.rs\" \n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/src/ext.rs\"\n                start=\"2\" end=\"10\" />\n        </Language>\n\n    </TabItem>\n\n</Tabs>\n\nWhen calling this method we specify the NFT contract name, that we are attaching 30 Tgas to the call, that we are attaching a deposit of 1 YoctoNEAR to the call, and give the arguments `receiver_id` and `token_id`. The NFT requires that we attach 1 YoctoNEAR for [security reasons](../../2.build/2.smart-contracts/security/one_yocto.md).", "mimetype": "text/plain", "start_char_idx": 1897, "end_char_idx": 3780, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "edde16c5-885e-44b9-83b2-8aad7a1dcb53": {"__data__": {"id_": "edde16c5-885e-44b9-83b2-8aad7a1dcb53", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3682b739-496d-43f7-8751-45f384ea91b6", "node_type": "1", "metadata": {}, "hash": "a8830f13f219fbc2f06bc2a8261dcd8a26500d024e3358511874f6df1bb18f47", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "abec586d-6b89-4544-be32-03708c348be4", "node_type": "1", "metadata": {}, "hash": "62ec95d8997288055a453e1fb0bb0b4b6a9b1aa43c206dc55aad89e95e9b3efb", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n## NFT ownership problems\n\nIn our contract, we perform no checks to verify whether the contract actually owns the specified NFT. A bad actor could set up an auction where the NFT being auctioned doesn't belong to the auction contract, causing `nft_transfer` to fail and the winning bidder to lose their bid funds with nothing in return. We could make a cross-contract call to the NFT contract to verify ownership on initialization but this would become quite complex. Instead, we will do this check off-chain and validate the auction in the frontend. \n\n---\n\n## Testing with multiple contracts\n\nIn our tests, we're now going to be using two contracts; the auction contract and an NFT contract. Sandbox testing is great as it allows us to test multiple contracts in a realistic environment.\n\nIn our tests folder, we need the WASM for an NFT contract. For this tutorial, we compiled an example NFT contract from [this repo](https://github.com/near-examples/NFT/tree/master).\n\nTo deploy the NFT contract, this time we're going to use `dev deploy` which creates an account with a random ID and deploys the contract to it by specifying the path to the WASM file. After deploying we will initialize the contract with default metadata and specify an account ID which will be the owner of the NFT contract (though the owner of the NFT contract is irrelevant in this example). Default metadata sets information such as the name and symbol of the NFT contract to default values.", "mimetype": "text/plain", "start_char_idx": 3782, "end_char_idx": 5254, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "abec586d-6b89-4544-be32-03708c348be4": {"__data__": {"id_": "abec586d-6b89-4544-be32-03708c348be4", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "edde16c5-885e-44b9-83b2-8aad7a1dcb53", "node_type": "1", "metadata": {}, "hash": "42354ec95ff52203fbc67e5c8262e8007584273d88180466722306e399ccf661", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4fafbfb1-5164-47fd-b2b1-3db77d168583", "node_type": "1", "metadata": {}, "hash": "ba659f44cb512f53d45283780e22a5b3e2a42382ce0840a635d664e9b5d0940a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/03-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L24-L25\"\n                start=\"24\" end=\"25\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/tests/test_basics.rs#L23-L24\"\n                start=\"23\" end=\"32\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Minting an NFT\n\nTo start a proper auction the auction contract should own an NFT. To do this the auction account calls the NFT contract to mint a new NFT providing information such as the image for the NFT.  \n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/03-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L28-L39\"\n                start=\"28\" end=\"39\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/tests/test_basics.rs#L35-L53\"\n                start=\"35\" end=\"53\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Verifying ownership of an NFT\n\nAfter `claim` is called, the test should verify that the auction winner now owns the NFT. This is done by calling `nft_token` on the NFT contract and specifying the token ID which will return the account ID that the token belongs to.", "mimetype": "text/plain", "start_char_idx": 5256, "end_char_idx": 7082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4fafbfb1-5164-47fd-b2b1-3db77d168583": {"__data__": {"id_": "4fafbfb1-5164-47fd-b2b1-3db77d168583", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "abec586d-6b89-4544-be32-03708c348be4", "node_type": "1", "metadata": {}, "hash": "62ec95d8997288055a453e1fb0bb0b4b6a9b1aa43c206dc55aad89e95e9b3efb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0413d080-c340-4c30-9893-32787e0db95a", "node_type": "1", "metadata": {}, "hash": "6fd3d4b4fa76a07dff3fca292769d2ca2a8b595037c5325f185acfb638d7f1d4", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/03-owner-claims-winner-gets-nft/sandbox-test/main.ava.js#L105-L106\"\n                start=\"105\" end=\"106\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/03-owner-claims-winner-gets-nft/tests/test_basics.rs#L144-L157\"\n                start=\"144\" end=\"157\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Getting an NFT\n\nIf you would like to interact with the new contract via the CLI you can mint an NFT from a pre-deployed NFT contract \n\n```\nnear contract call-function as-transaction nft.examples.testnet nft_mint json-args '{\"token_id\": \"TYPE_A_UNIQUE_VALUE_HERE\", \"receiver_id\": \"<accountId>\", \"metadata\": { \"title\": \"GO TEAM\", \"description\": \"The Team Goes\", \"media\": \"https://bafybeidl4hjbpdr6u6xvlrizwxbrfcyqurzvcnn5xoilmcqbxfbdwrmp5m.ipfs.dweb.link/\", \"copies\": 1}}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as <accountId> network-config testnet\n```\n\nYou can also just buy an NFT with testnet $NEAR on a testnet marketplace like [Mintbase](https://testnet.mintbase.xyz/explore/new/0).\n\n---\n\n## Conclusion \n\nIn this part of the tutorial we have added NFTs as a reward which has taught us how to interact with NFT standards, make cross-contract calls and test multiple contracts that interact with each other in workspaces. In the [next part](./4-ft.md) we'll learn how to interact with fungible token standards by adapting the auction to receive bids in FTs.", "mimetype": "text/plain", "start_char_idx": 7084, "end_char_idx": 8846, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0413d080-c340-4c30-9893-32787e0db95a": {"__data__": {"id_": "0413d080-c340-4c30-9893-32787e0db95a", "embedding": null, "metadata": {"file_path": "./near_dist/3-nft.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8", "node_type": "4", "metadata": {}, "hash": "6aa1d1ba26252908773dcbe2a30ba16ede2b34bd44c7f6a5a411280f963ecb9a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4fafbfb1-5164-47fd-b2b1-3db77d168583", "node_type": "1", "metadata": {}, "hash": "ba659f44cb512f53d45283780e22a5b3e2a42382ce0840a635d664e9b5d0940a", "class_name": "RelatedNodeInfo"}}, "text": "This will allow users to launch auctions in different tokens, including stablecoins.", "mimetype": "text/plain", "start_char_idx": 8847, "end_char_idx": 8931, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a266fc35-1787-4591-a952-958a35c57cdb": {"__data__": {"id_": "a266fc35-1787-4591-a952-958a35c57cdb", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c4479d57-d4bb-490a-98e8-69e3e0a90a8d", "node_type": "1", "metadata": {}, "hash": "eac3655dca0365245952c3fedac3a78bb06ad73151fc484cf1f58f1ead005bec", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: create-transactions\ntitle: Create Transactions\nsidebar_label: Create a Transaction\n---\n\nTo construct & process transactions you will need our API JavaScript library: [`near-api-js`](/build/web3-apps/integrate-contracts). There are many ways to create transactions but for this example we'll show you two ways to create a simple token transfer transaction.\n\n- [HIGH LEVEL](#high-level----create-a-transaction) - _easiest way to create a transaction_\n- [LOW LEVEL](#low-level----create-a-transaction) - _performs the exact same transaction as above, but deconstructs the entire process for those curious about each step_\n\nAt the core, all transactions require the following:\n\n- `signerId` _(account ID of the transaction originator)_\n- `signerPublicKey`\n- `receiverId` _(account ID of the transaction recipient)_\n- `nonceForPublicKey` _(each time a key is used the nonce value should be incremented by 1)_\n- `actions` _( [[click here]](/concepts/protocol/transactions#action) for supported arguments)_\n- `blockHash` _(a current block hash (within 24hrs) to prove the transaction was recently created)_\n\nSee [Transaction Class](https://near.github.io/near-api-js/classes/near_api_js.transaction.Transaction.html) for a more in depth outline.\n\n---\n\n## HIGH LEVEL -- Create a transaction\n\n### Setup\n\n1. Clone the [transaction-examples](https://github.com/near-examples/transaction-examples) repository by running:\n\n```bash\ngit clone https://github.com/near-examples/transaction-examples.git\n```\n\n2. Follow [setup instructions](https://github.com/near-examples/transaction-examples/blob/master/README.md#prerequisites)\n\n### Imports\n\nIn [`send-tokens-easy.js`](https://github.com/near-examples/transaction-examples/blob/9e999253aafa2c3e3b537810a0b8ce7596c3506c/send-tokens-easy.js#L1-L5) we use two dependencies:\n\n1. [NEAR API JavaScript library](https://github.com/near/near-api-js)\n2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1887, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c4479d57-d4bb-490a-98e8-69e3e0a90a8d": {"__data__": {"id_": "c4479d57-d4bb-490a-98e8-69e3e0a90a8d", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a266fc35-1787-4591-a952-958a35c57cdb", "node_type": "1", "metadata": {}, "hash": "ee5c520d33f5c313172906022204b505fe9a9b06542221ec8600b08100d5a3fe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781", "node_type": "1", "metadata": {}, "hash": "9f50b0d7a364e615cd6189ac461972b723be7026c1b18ff0ef394e07aa72b242", "class_name": "RelatedNodeInfo"}}, "text": "[`dotenv`](https://www.npmjs.com/package/dotenv) (used to load environment variables for private key)\n\n```js\nconst nearAPI = require(\"near-api-js\");\nconst { connect, KeyPair, keyStores, utils } = nearAPI;\nrequire(\"dotenv\").config();\n```\n\nThe second line above deconstructs several utilities from nearAPI that you will use to interact with the blockchain.\n\n- `connect` - create a connection to NEAR passing configuration variables\n- `KeyPair` - creates a keyPair from the private key you'll provide in an `.env` file\n- `keyStores` - stores the keyPair that you will create from the private key and used to sign Transactions\n- `utils` - used to format NEAR amounts\n\n### Accounts & Network\n\nNext, you'll need to enter the `accountId` of the `sender` and `receiver`, as well as the `networkId` (`betanet`, `testnet`, or `mainnet`).\n\n```js\nconst sender = \"sender.testnet\";\nconst receiver = \"receiver.testnet\";\nconst networkId = \"testnet\";\n```\n\n### Formatting Token Amounts\n\nWhen sending NEAR tokens (\u24c3) during a transaction, the amount needs to be converted into [Yocto](https://en.wikipedia.org/wiki/Yocto-) \u24c3 or (10^-24).\n\n- To perform this you will use the [`near-api-js`](https://github.com/near/near-api-js) method [`parseNearAmount()`](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/format.ts#L53-L63) (located in `utils/format`)\n\n```js\nconst amount = nearAPI.utils.format.parseNearAmount(\"1.5\");\n```\n\n### Create a Key Store\n\nIn order to sign transactions you will need to create a \"Key Store\" that will hold a [full access key](/concepts/protocol/access-keys#full-access-keys) to sign your transactions. There are several ways to accomplish this, but for this example we will use a private key stored in either an `.env` file in your project or an environment variable exported globally.", "mimetype": "text/plain", "start_char_idx": 1888, "end_char_idx": 3722, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781": {"__data__": {"id_": "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c4479d57-d4bb-490a-98e8-69e3e0a90a8d", "node_type": "1", "metadata": {}, "hash": "eac3655dca0365245952c3fedac3a78bb06ad73151fc484cf1f58f1ead005bec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "31db45ac-33be-4d95-aa80-07a25748ea9f", "node_type": "1", "metadata": {}, "hash": "3f62c8a626b167720f9eeb0351b21dc1ae812b5b16b4d59a967cf243d657c65a", "class_name": "RelatedNodeInfo"}}, "text": "- If you created the account using [`near-cli`](../4.tools/cli.md) or ran [`near login`](../4.tools/cli.md#import) in your terminal, your private key can be found in the your machine's keychain.\n- If you created an account using [NEAR Wallet](https://testnet.mynearwallet.com/), your key will be found in your browser's `Local Storage`.\n  - In your browser's dev tools... `Application` >> `Storage` >> `Local Storage`\n\n```js\n// sets up an empty keyStore object in memory using near-api-js\nconst keyStore = new keyStores.InMemoryKeyStore();\n// creates a keyPair from the private key provided in your .env file\nconst keyPair = KeyPair.fromString(process.env.SENDER_PRIVATE_KEY);\n// adds the key you just created to your keyStore which can hold multiple keys (must be inside an async function)\nawait keyStore.setKey(networkId, sender, keyPair);\n```\n\n### Setting up a connection to NEAR\n\nNow create a connection to NEAR using a configuration object that will contain your `networkId` setup earlier as well as your `keyStore`.\n\n```js\n// configuration used to connect to NEAR\nconst prefix = (networkId === \"testnet\") ? \"testnet\" : \"www\";\n\nconst config = {\n  networkId,\n  keyStore,\n  nodeUrl: `https://rpc.${networkId}.near.org`,\n  walletUrl: `https://wallet.${networkId}.near.org`,\n  helperUrl: `https://helper.${networkId}.near.org`,\n  explorerUrl: `https://${prefix}.nearblocks.io`,\n};\n\n// connect to NEAR! :)\nconst near = await connect(config);\n// create a NEAR account object\nconst senderAccount = await near.account(sender);\n```\n\nYou'll notice the last line uses your NEAR connection to create a `senderAccount` object that you'll use to perform the transaction.\n\n### Create, Sign, & Send Transaction\n\nNow that everything is setup, creating the transaction is a single line of code.\n\n```js\nconst result = await senderAccount.sendMoney(receiver, amount);\n```\n\nThis simple command constructs, signs, and sends a token transfer transaction on the NEAR blockchain.", "mimetype": "text/plain", "start_char_idx": 3724, "end_char_idx": 5683, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31db45ac-33be-4d95-aa80-07a25748ea9f": {"__data__": {"id_": "31db45ac-33be-4d95-aa80-07a25748ea9f", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781", "node_type": "1", "metadata": {}, "hash": "9f50b0d7a364e615cd6189ac461972b723be7026c1b18ff0ef394e07aa72b242", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2", "node_type": "1", "metadata": {}, "hash": "f09195924fe0f7346982a95f48d38b54a68170f74d6638da15c2cbcece17eaff", "class_name": "RelatedNodeInfo"}}, "text": "There is no need to create a `result` variable aside from inspecting the response details from your transaction and even create a link to [NearBlocks Explorer](https://testnet.nearblocks.io/) to view a GUI version of the transaction details.\n\n---\n\n## LOW LEVEL -- Create a Transaction\n\n### Setup\n\n1. Clone the [transaction-examples](https://github.com/near-examples/transaction-examples) repository by running:\n\n```bash\ngit clone https://github.com/near-examples/transaction-examples.git\n```\n\n2. Follow [setup instructions](https://github.com/near-examples/transaction-examples/blob/master/README.md#prerequisites)\n\n---\n\n### Imports\n\nIn [`send-tokens-deconstructed.js`](https://github.com/near-examples/transaction-examples/blob/master/send-tokens-deconstructed.js#L1-L4) we use three dependencies:\n\n1. [NEAR API JavaScript library](https://github.com/near/near-api-js)\n2. [`js-sha256`](https://www.npmjs.com/package/js-sha256) (cryptographic hashing algorithm)\n3. [`dotenv`](https://www.npmjs.com/package/dotenv) (used to load environment variables)\n\n```js\nconst nearAPI = require(\"near-api-js\");\nconst sha256 = require(\"js-sha256\");\nrequire(\"dotenv\").config();\n```\n\n---\n\n### Accounts & Network\n\nNext, you'll need to enter the `accountId` of the `sender` and `receiver`, as well as the `networkId` (`betanet`, `testnet`, or `mainnet`).\n\n```js\nconst sender = \"sender.testnet\";\nconst receiver = \"receiver.testnet\";\nconst networkId = \"testnet\";\n```\n\n---\n\n### Formatting Token Amounts\n\nWhen sending NEAR tokens (\u24c3) during a transaction, the amount needs to be converted into [Yocto](https://en.wikipedia.org/wiki/Yocto-) \u24c3 or (10^-24).", "mimetype": "text/plain", "start_char_idx": 5684, "end_char_idx": 7316, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2": {"__data__": {"id_": "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31db45ac-33be-4d95-aa80-07a25748ea9f", "node_type": "1", "metadata": {}, "hash": "3f62c8a626b167720f9eeb0351b21dc1ae812b5b16b4d59a967cf243d657c65a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8adf3ef0-5403-48fd-80cd-2a83499fca95", "node_type": "1", "metadata": {}, "hash": "f04ccf8ff19d3d8566e946bf73345df1cef23564ce99b9992f272e2b44ac3bc2", "class_name": "RelatedNodeInfo"}}, "text": "- To perform this you will use the [`near-api-js`](https://github.com/near/near-api-js) method [`parseNearAmount()`](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/format.ts#L53-L63) (located in `utils/format`)\n\n```js\nconst amount = nearAPI.utils.format.parseNearAmount(\"1.5\");\n```\n\n---\n\n### Setting up a connection to NEAR\n\nIn this example, we will create a NEAR RPC `provider` that allows us to interact with the chain via [RPC endpoints](/api/rpc/introduction).\n\n```js\nconst provider = new nearAPI.providers.JsonRpcProvider(\n  `https://rpc.${networkId}.near.org`\n);\n```\n\n---\n\n### Access Keys\n\nTo sign a transaction to send NEAR \u24c3, we will need a `FullAccess` key to the sender's account.\n\n- If you created the account using [`near-cli`](../4.tools/cli.md) or ran [`near login`](../4.tools/cli.md#import) in your terminal, your private key can be found in your machine's keychain.\n- If you created an account using [NEAR Wallet](https://testnet.mynearwallet.com/), your key will be found in your browser's `Local Storage`.\n  - In your browser's dev tools... `Application` >> `Storage` >> `Local Storage`\n\nOnce you have access to the private key of the sender's account, create an environment variable `SENDER_PRIVATE_KEY` or hard code it as a string on [line 18](https://github.com/near-examples/transaction-examples/blob/master/send-tokens-deconstructed.js#L18) of `send-tokens.js`.\n\n- With this `privateKey`, we can now construct a `keyPair` object to sign transactions.\n\n```js\nconst privateKey = process.env.SENDER_PRIVATE_KEY;\nconst keyPair = nearAPI.KeyPair.fromString(privateKey);\n```\n\n---\n\n### Transaction Requirements\n\nAs stated before, all transactions require six parts:\n\n1. [`signerId`](#1-signerid)\n2. [`signerPublicKey`](#2-signerpublickey)\n3. [`receiverId`](#3-receiverid)\n4.", "mimetype": "text/plain", "start_char_idx": 7318, "end_char_idx": 9154, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8adf3ef0-5403-48fd-80cd-2a83499fca95": {"__data__": {"id_": "8adf3ef0-5403-48fd-80cd-2a83499fca95", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2", "node_type": "1", "metadata": {}, "hash": "f09195924fe0f7346982a95f48d38b54a68170f74d6638da15c2cbcece17eaff", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7", "node_type": "1", "metadata": {}, "hash": "ee67f32439d9e1e7fd2a012cc98d9b11d0b8fa6cc5114ecd192c73dbe32fbb70", "class_name": "RelatedNodeInfo"}}, "text": "[`nonceForPublicKey`](#4-nonceforpublickey)\n5. [`actions`](/concepts/protocol/transactions#action)\n6. [`blockHash`](#6-blockhash)\n\n### 1 `signerId`\n\n- The `signerId` is the account ID of the transaction originator.\n- This value is passed as a string (ex. `'example.testnet'` or `'bob.near'`)\n\n### 2 `signerPublicKey`\n\n- The `signerPublicKey` is required to be an object with two key value pairs: `keyType` and `data`.\n\n```js\nPublicKey = {\n  keyType: 0,\n  data: Uint8Array(32)[\n    (190,\n    150,\n    152,\n    145,\n    232,\n    248,\n    128,\n    151,\n    167,\n    165,\n    128,\n    46,\n    20,\n    231,\n    103,\n    142,\n    39,\n    56,\n    152,\n    46,\n    135,\n    1,\n    161,\n    180,\n    94,\n    212,\n    195,\n    201,\n    73,\n    190,\n    70,\n    242)\n  ],\n};\n```\n\n- This can be constructed by calling `getPublicKey()` using the `keyPair` we [setup earlier](#access-keys).\n\n```js\nconst publicKey = keyPair.getPublicKey();\n```\n\n### 3 `receiverId`\n\n- The `receiverId` is the account ID of the transaction recipient.\n- This value is passed as a string (ex. `'example.testnet'` or `'bob.near'`)\n- The certain cases, the `signerId` and the `receiverId` can be the same account.\n\n### 4 `nonceForPublicKey`\n\n- A unique number or `nonce` is required for each transaction signed with an access key.\n- To ensure a unique number is created for each transaction, the current `nonce` should be queried and then incremented by 1.\n- Current nonce can be retrieved using the `provider` we [created earlier](#setting-up-a-connection-to-near).", "mimetype": "text/plain", "start_char_idx": 9155, "end_char_idx": 10684, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7": {"__data__": {"id_": "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8adf3ef0-5403-48fd-80cd-2a83499fca95", "node_type": "1", "metadata": {}, "hash": "f04ccf8ff19d3d8566e946bf73345df1cef23564ce99b9992f272e2b44ac3bc2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ad22a3b-287f-40f3-8097-c84bd800994f", "node_type": "1", "metadata": {}, "hash": "cff186ecaa72f3626d54bdc76a5ac7341cbe6d6e0bb0eef56066c1bee1178cdb", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst accessKey = await provider.query(\n  `access_key/${sender}/${publicKey.toString()}`,\n  \"\"\n);\n```\n\n- now we can create a unique number for our transaction by incrementing the current `nonce`.\n\n```js\nconst nonce = ++accessKey.nonce;\n```\n\n### 5 `actions`\n\n- There are currently eight supported `Action` types. [[see here]](/concepts/protocol/transactions#action)\n- For this example, we are using `Transfer`\n- This transfer action can be created using the [imported `nearAPI` object](#imports) and the [formatted \u24c3 amount](#formatting-token-amounts) created earlier.\n\n```js\nconst actions = [nearAPI.transactions.transfer(amount)];\n```\n\n[[click here]](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L70-L72) to view source for `transfer()`.\n\n### 6 `blockHash`\n\n- Each transaction requires a current block hash (within 24hrs) to prove that the transaction was created recently.\n- Hash must be converted to an array of bytes using the `base_decode` method found in [`nearAPI`](#imports).\n\n```js\nconst recentBlockHash = nearAPI.utils.serialize.base_decode(\n  accessKey.block_hash\n);\n```\n\n[[click here]](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/serialize.ts#L16-L17) to view source for `base_decode()`.\n\n---\n\n### Constructing the Transaction\n\nWith all of our [required arguments](#transaction-requirements), we can construct the transaction.\n\n- Using [`nearAPI`](#imports), we call on `createTransaction()` to perform this task.", "mimetype": "text/plain", "start_char_idx": 10686, "end_char_idx": 12221, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ad22a3b-287f-40f3-8097-c84bd800994f": {"__data__": {"id_": "6ad22a3b-287f-40f3-8097-c84bd800994f", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7", "node_type": "1", "metadata": {}, "hash": "ee67f32439d9e1e7fd2a012cc98d9b11d0b8fa6cc5114ecd192c73dbe32fbb70", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23cc9541-c961-4b8d-bb66-14a1717db31b", "node_type": "1", "metadata": {}, "hash": "1a28f4837b5bf01b8c7c61f1dab344879dc8a89eb3f6a656e0526ba359cee0c8", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst transaction = nearAPI.transactions.createTransaction(\n  sender,\n  publicKey,\n  receiver,\n  nonce,\n  actions,\n  recentBlockHash\n);\n```\n\n[[click here]](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L95-L110) to view source code for the Transaction class\n\n---\n\n### Sign Transaction\n\nNow that the transaction is created, we sign it before sending it to the NEAR blockchain. At the lowest level, there are four steps to this process.\n\n1. Using [`nearAPI`](#imports), we call on `serialize()` to serialize the transaction in [Borsh](https://borsh.io/).\n\n```js\nconst serializedTx = nearAPI.utils.serialize.serialize(\n  nearAPI.transactions.SCHEMA.Transaction,\n  transaction\n);\n```\n\n2. Hash the serialized transaction using a `sha256` cryptographic hashing algorithm.\n\n```js\nconst serializedTxHash = new Uint8Array(sha256.sha256.array(serializedTx));\n```\n\n3. Create a signature with the `keyPair`.\n\n```js\nconst signature = keyPair.sign(serializedTxHash);\n```\n\n4. Construct the signed transaction using `near-api-js` [SignedTransaction class](https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L112-L123).\n\n```js\nconst signedTransaction = new nearAPI.transactions.SignedTransaction({\n  transaction,\n  signature: new nearAPI.transactions.Signature({\n    keyType: transaction.publicKey.keyType,\n    data: signature.signature,\n  }),\n});\n```\n\n### Send Transaction\n\nFinal step is to encode and send the transaction.\n\n- First we serialize transaction into [Borsh](https://borsh.io/), and store the result as `signedSerializedTx`. _(required for all transactions)_\n- Then we send the transaction via [RPC call](/api/rpc/introduction) using the `sendJsonRpc()` method nested inside [`near`](#setting-up-connection-to-near).\n\n```js\n// encodes transaction to serialized Borsh (required for all transactions)\nconst signedSerializedTx = signedTransaction.encode();", "mimetype": "text/plain", "start_char_idx": 12223, "end_char_idx": 14183, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23cc9541-c961-4b8d-bb66-14a1717db31b": {"__data__": {"id_": "23cc9541-c961-4b8d-bb66-14a1717db31b", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ad22a3b-287f-40f3-8097-c84bd800994f", "node_type": "1", "metadata": {}, "hash": "cff186ecaa72f3626d54bdc76a5ac7341cbe6d6e0bb0eef56066c1bee1178cdb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e77d16f9-4ec4-4c06-8260-ac4682820aa7", "node_type": "1", "metadata": {}, "hash": "2e2077b2555fa8e466aa2612575f039392a435ffd9d9f2f7ee6bbe9dacadc438", "class_name": "RelatedNodeInfo"}}, "text": "// sends transaction to NEAR blockchain via JSON RPC call and records the result\nconst result = await provider.sendJsonRpc(\"broadcast_tx_commit\", [\n  Buffer.from(signedSerializedTx).toString(\"base64\"),\n]);\n```\n\n### Transaction Results\n\nDetailed transaction results of the transaction are returned in the following format:\n\n```bash\n{\n  status: { SuccessValue: '' },\n  transaction: {\n    signer_id: 'sender.testnet',\n    public_key: 'ed25519:8RazSLHvzj4TBSKGUo5appP7wVeqZNQYjP9hvhF4ZKS2',\n    nonce: 57,\n    receiver_id: 'receiver.testnet',\n    actions: [ [Object] ],\n    signature: 'ed25519:2sK53w6hybSxX7qWShXz6xKnjnYRUW7Co3evEaaggNW6pGSCNPvx7urY4akwnzAbxZGwsKjx8dcVm73qbitntJjz',\n    hash: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j'\n  },\n  transaction_outcome: {\n    proof: [ [Object] ],\n    block_hash: 'J6cFDzAFkuknHMCEYW2uPQXDvCfSndkJmADVEWJbtTwV',\n    id: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j',\n    outcome: {\n      logs: [],\n      receipt_ids: [Array],\n      gas_burnt: 223182562500,\n      tokens_burnt: '22318256250000000000',\n      executor_id: 'sender.testnet',\n      status: [Object]\n    }\n  },\n  receipts_outcome: [\n    {\n      proof: [Array],\n      block_hash: 'FSS7UzTpMr4mUm6aw8MmzP6Q7wnQs35VS8vYm1R461dM',", "mimetype": "text/plain", "start_char_idx": 14184, "end_char_idx": 15417, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e77d16f9-4ec4-4c06-8260-ac4682820aa7": {"__data__": {"id_": "e77d16f9-4ec4-4c06-8260-ac4682820aa7", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23cc9541-c961-4b8d-bb66-14a1717db31b", "node_type": "1", "metadata": {}, "hash": "1a28f4837b5bf01b8c7c61f1dab344879dc8a89eb3f6a656e0526ba359cee0c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a81f5dfa-e6bf-48c9-ad0f-0ea0e248e432", "node_type": "1", "metadata": {}, "hash": "ab5a08fdc144435c0c8ee1644b439cb6465de60db2efe2b689ad634b1f061220", "class_name": "RelatedNodeInfo"}}, "text": "id: '3LjBxe2jq1s7XEPrYxihp4rPVdyHAbYfkcdJjUEVijhJ',\n      outcome: [Object]\n    },\n    {\n      proof: [Array],\n      block_hash: '4XBio5dM5UGYjJgzZjgckfVgMZ9uKGbTkt8zZi5webxw',\n      id: 'AXFA4kwiYfruKQ4LkD1qZA8P7HoAvtFwGqwQYdWtWNaW',\n      outcome: [Object]\n    }\n  ]\n}\nTransaction Results:  {\n  signer_id: 'sender.testnet',\n  public_key: 'ed25519:8RazSLHvzj4TBSKGUo5appP7wVeqZNQYjP9hvhF4ZKS2',\n  nonce: 57,\n  receiver_id: 'receiver.testnet',\n  actions: [ { Transfer: [Object] } ],\n  signature: 'ed25519:2sK53w6hybSxX7qWShXz6xKnjnYRUW7Co3evEaaggNW6pGSCNPvx7urY4akwnzAbxZGwsKjx8dcVm73qbitntJjz',\n  hash: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j'\n}\n```\n\nFor detailed information on transaction receipts [[click here]](https://nomicon.io/RuntimeSpec/Receipts.html)\n\n- To view the transaction in [NearBlocks Explorer](https://testnet.nearblocks.io/), enter the `hash` located under `transaction` / `Transaction Results`.\n- In addition, you can create a link in JS using the `networkId` and `result.transaction.hash`.\n\n```js\nconst prefix = (networkId === \"testnet\") ? \"testnet.\" : \"\";\nconst transactionLink = `https://${prefix}nearblocks.io/txns/${result.transaction.hash}`;\n```\n\n:::tip Got a question?", "mimetype": "text/plain", "start_char_idx": 15424, "end_char_idx": 16627, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a81f5dfa-e6bf-48c9-ad0f-0ea0e248e432": {"__data__": {"id_": "a81f5dfa-e6bf-48c9-ad0f-0ea0e248e432", "embedding": null, "metadata": {"file_path": "./near_dist/create-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958", "node_type": "4", "metadata": {}, "hash": "c6789ea81eed4f5bf554f7dbc40ce51870d031ec8178ff66d5baa0cabd5bdcb5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e77d16f9-4ec4-4c06-8260-ac4682820aa7", "node_type": "1", "metadata": {}, "hash": "2e2077b2555fa8e466aa2612575f039392a435ffd9d9f2f7ee6bbe9dacadc438", "class_name": "RelatedNodeInfo"}}, "text": "<a href=\"https://stackoverflow.com/questions/tagged/nearprotocol\" target=\"_blank\" rel=\"noopener noreferrer\"><h8>Ask it on StackOverflow!</h8></a>\n:::\n\nHappy Coding! \ud83d\ude80", "mimetype": "text/plain", "start_char_idx": 16628, "end_char_idx": 16794, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77ad553f-14b1-433a-b2d4-5c06d0223be8": {"__data__": {"id_": "77ad553f-14b1-433a-b2d4-5c06d0223be8", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "19190b14-38e6-4aee-bdc1-08d7b03338f0", "node_type": "1", "metadata": {}, "hash": "73bb2b58f760dc0ade3f7d7dfd7b0377a4265e207aaefff5d069bb7b3cee2624", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: series\ntitle: Customizing the NFT Contract\nsidebar_label: Lazy Minting, Collections, and More!\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial, you'll learn how to take the [existing NFT contract](https://github.com/near-examples/nft-tutorial) you've been working with and modify it to meet some of the most common needs in the ecosystem. This includes:\n- [Lazy Minting NFTs](#lazy-minting)\n- [Creating Collections](#nft-collections-and-series)\n- [Restricting Minting Access](#restricted-access)\n- [Highly Optimizing Storage](#modifying-view-calls-for-optimizations)\n- Hacking Enumeration Methods\n\n---\n\n## Introduction\n\nNow that you have a deeper understanding of basic NFT smart contracts, we can start to get creative and implement more unique features. The basic contract works really well for simple use-cases but as you begin to explore the potential of NFTs, you can use it as a foundation to build upon.\n\nA fun analogy would be that you now have a standard muffin recipe and it's now up to you to decide how to alter it to create your own delicious varieties, may I suggest blueberry perhaps.\n\nBelow we've created a few of these new varieties by showing potential solutions to the problems outlined above. As we demonstrate how to customize the basic NFT contract, we hope it activates your ingenuity thus introducing you to what's possible and helping you discover the true potential of NFTs. \ud83d\udcaa\n\n<hr class=\"subsection\" />\n\n### NFT Collections and Series\n\nNFT Collections help solve two common problems when dealing with the basic NFT contract:\n- Storing repeated data.\n- Organizing data and code.\n\nThe concept of a collection in the NFT space has a very loose meaning and can be interpreted in many different ways. In our case, we'll define a collection as a set of tokens that share **similar metadata**. For example, you could create a painting and want 100 identical copies to be put for sale. In this case, all one hundred pieces would be part of the same *collection*. Each piece would have the same artist, title, description, media etc.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2157, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "19190b14-38e6-4aee-bdc1-08d7b03338f0": {"__data__": {"id_": "19190b14-38e6-4aee-bdc1-08d7b03338f0", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77ad553f-14b1-433a-b2d4-5c06d0223be8", "node_type": "1", "metadata": {}, "hash": "4d4271ed9ae821d84f17237be875867d9dd12ab72f72ee294102933909761940", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3aed713-8e59-4a4d-9655-2a2a9c3696b3", "node_type": "1", "metadata": {}, "hash": "67d317d11826c3ca38a9776bbb424ae6b5ce10f81a90f410758efd7b63a112d0", "class_name": "RelatedNodeInfo"}}, "text": "One of the biggest problems with the basic NFT contract is that you store similar data many times. If you mint NFTs, the contract will store the metadata individually for **every single token ID**. We can fix this by introducing the idea of NFT series, or NFT collection.\n\nA series can be thought of as a bucket of token IDs that *all* share similar information. This information is specified when the series is **created** and can be the metadata, royalties, price etc. Rather than storing this information for **every token ID**, you can simply store it once in the series and then associate token IDs with their respective buckets.\n\n<hr class=\"subsection\" />\n\n### Restricted Access\n\nCurrently, the NFT contract allows anyone to mint NFTs. While this works well for some projects, the vast majority of dApps and creators want to restrict who can create NFTs on the contract. This is why you'll introduce an allowlist functionality for both series and for NFTs. You'll have two data structures customizable by the contract owner:\n- Approved Minters\n- Approved Creators\n\nIf you're an approved minter, you can freely mint NFTs for any given series. You cannot, however, create new series.\n\nOn the other hand, you can also be an approved creator. This allows you to define new series that NFTs can be minted from. It's important to note that if you're an approved creator, you're not automatically an approved minter as well. Each of these permissions need to be given by the owner of the contract and they can be revoked at any time.\n\n<hr class=\"subsection\" />\n\n### Lazy Minting\n\nLazy minting allows users to mint *on demand*. Rather than minting all the NFTs and spending $NEAR on storage, you can instead mint the tokens **when they are purchased**. This helps to avoid burning unnecessary Gas and saves on storage for when not all the NFTs are purchased. Let's look at a common scenario to help solidify your understanding:\n\nBenji has created an amazing digital painting of the famous Go Team gif. He wants to sell 1000 copies of it for 1 $NEAR each. Using the traditional approach, he would have to mint each copy individually and pay for the storage himself.", "mimetype": "text/plain", "start_char_idx": 2159, "end_char_idx": 4321, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3aed713-8e59-4a4d-9655-2a2a9c3696b3": {"__data__": {"id_": "b3aed713-8e59-4a4d-9655-2a2a9c3696b3", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "19190b14-38e6-4aee-bdc1-08d7b03338f0", "node_type": "1", "metadata": {}, "hash": "73bb2b58f760dc0ade3f7d7dfd7b0377a4265e207aaefff5d069bb7b3cee2624", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e156f276-0995-4219-82df-3abc24cfcfd1", "node_type": "1", "metadata": {}, "hash": "c0eb46c134902099b38c81d1daadb141f2276b20d626d9fa428c27d6701ade29", "class_name": "RelatedNodeInfo"}}, "text": "He would then need to either find or deploy a marketplace contract and pay for the storage to put 1000 copies up for sale. He would need to burn Gas putting each token ID up for sale 1 by 1.\n\nAfter that, people would purchase the NFTs, and there would be no guarantee that all or even any would be sold. There's a real possibility that nobody buys a single piece of his artwork, and Benji spent all that time, effort and money on nothing.\n\nLazy minting would allow the NFTs to be *automatically minted on-demand*. Rather than having to purchase NFTs from a marketplace, Benji could specify a price on the NFT contract and a user could directly call the `nft_mint` function whereby the funds would be distributed to Benji's account directly.\n\nUsing this model, NFTs would **only** be minted when they're actually purchased and there wouldn't be any upfront fee that Benji would need to pay in order to mint all 1000 NFTs. In addition, it removes the need to have a separate marketplace contract.\n\nWith this example laid out, a high level overview of lazy minting is that it gives the ability for someone to mint \"on-demand\" - they're lazily minting the NFTs instead of having to mint everything up-front even if they're unsure if there's any demand for the NFTs. With this model, you don't have to waste Gas or storage fees because you're only ever minting when someone actually purchases the artwork.\n\n---\n\n## New Contract File Structure\n\nLet's now take a look at how we've implemented solutions to the issues we've discussed so far.\n\t\nIn your locally cloned example of the [`nft-tutorial`](https://github.com/near-examples/nft-tutorial) check out the `main` branch and be sure to pull the most recent version.\n\n```bash\ngit checkout main && git pull\n```\n\nYou'll notice that there's a folder at the root of the project called `nft-series`. This is where the smart contract code lives.", "mimetype": "text/plain", "start_char_idx": 4322, "end_char_idx": 6205, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e156f276-0995-4219-82df-3abc24cfcfd1": {"__data__": {"id_": "e156f276-0995-4219-82df-3abc24cfcfd1", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3aed713-8e59-4a4d-9655-2a2a9c3696b3", "node_type": "1", "metadata": {}, "hash": "67d317d11826c3ca38a9776bbb424ae6b5ce10f81a90f410758efd7b63a112d0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0993496-2f1a-4520-b405-35bfbacf9c4a", "node_type": "1", "metadata": {}, "hash": "a46b91cb409c7ab9bddc6d5182c66f580e5ec52d10a22bc7dad3f0ecb8dc27a3", "class_name": "RelatedNodeInfo"}}, "text": "If you open the `src` folder, it should look similar to the following:\n\n```\nsrc\n\u251c\u2500\u2500 approval.rs\n\u251c\u2500\u2500 enumeration.rs\n\u251c\u2500\u2500 events.rs\n\u251c\u2500\u2500 internal.rs\n\u251c\u2500\u2500 lib.rs\n\u251c\u2500\u2500 metadata.rs\n\u251c\u2500\u2500 nft_core.rs\n\u251c\u2500\u2500 owner.rs\n\u251c\u2500\u2500 royalty.rs\n\u251c\u2500\u2500 series.rs\n```\n\n---\n\n## Differences\n\nYou'll notice that most of this code is the same, however, there are a few differences between this contract and the basic NFT contract.\n\n### Main Library File\n\nStarting with `lib.rs`, you'll notice that the contract struct has been modified to now store the following information.\n\n```diff\npub owner_id: AccountId,\n+ pub approved_minters: LookupSet<AccountId>,\n+ pub approved_creators: LookupSet<AccountId>,\npub tokens_per_owner: LookupMap<AccountId, UnorderedSet<TokenId>>,\npub tokens_by_id: UnorderedMap<TokenId, Token>,\n- pub token_metadata_by_id: UnorderedMap<TokenId, TokenMetadata>,\n+ pub series_by_id: UnorderedMap<SeriesId, Series>,\npub metadata: LazyOption<NFTContractMetadata>,\n```\n\nAs you can see, we've replaced `token_metadata_by_id` with `series_by_id` and added two lookup sets:\n\n- **series_by_id**: Map a series ID (u64) to its Series object.\n- **approved_minters**: Keeps track of accounts that can call the `nft_mint` function.\n- **approved_creators**: Keeps track of accounts that can create new series.\n\n<hr class=\"subsection\" />\n\n### Series Object {#series-object}\nIn addition, we're now keeping track of a new object called a `Series`.\n\n```rust\npub struct Series {\n    // Metadata including title, num copies etc.. that all tokens will derive from\n    metadata: TokenMetadata,\n    // Royalty used for all tokens in the collection\n    royalty: Option<HashMap<AccountId, u32>>,\n    // Set of tokens in the collection\n    tokens: UnorderedSet<TokenId>,\n    // What is the price of each token in this series? If this is specified, when minting,\n    // Users will need to attach enough $NEAR to cover the price.", "mimetype": "text/plain", "start_char_idx": 6206, "end_char_idx": 8091, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0993496-2f1a-4520-b405-35bfbacf9c4a": {"__data__": {"id_": "e0993496-2f1a-4520-b405-35bfbacf9c4a", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e156f276-0995-4219-82df-3abc24cfcfd1", "node_type": "1", "metadata": {}, "hash": "c0eb46c134902099b38c81d1daadb141f2276b20d626d9fa428c27d6701ade29", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18989de8-18a5-42f6-9d92-ceda02ac9b58", "node_type": "1", "metadata": {}, "hash": "896eb9ad34443f74f54b83d02b00aeeb43500b09871c6e2f2b578a4c2021a752", "class_name": "RelatedNodeInfo"}}, "text": "price: Option<Balance>,\n    // Owner of the collection\n    owner_id: AccountId,\n}\n```\n\nThis object stores information that each token will inherit from. This includes:\n- The [metadata](2-minting.md#metadata-and-token-info).\n- The [royalties](6-royalty.md).\n- The price.\n\n:::caution\nIf a price is specified, there will be no restriction on who can mint tokens in the series. In addition, if the `copies` field is specified in the metadata, **only** that number of NFTs can be minted. If the field is omitted, an unlimited amount of tokens can be minted.\n:::\n\nWe've also added a field `tokens` which keeps track of all the token IDs that have been minted for this series. This allows us to deal with the potential `copies` cap by checking the length of the set. It also allows us to paginate through all the tokens in the series.\n\n<hr class=\"subsection\" />\n\n### Creating Series\n\n`series.rs` is a new file that replaces the old [minting](2-minting.md) logic. This file has been created to combine both the series creation and minting logic into one.\n\n<Github language=\"rust\" start=\"10\" end=\"56\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/series.rs\" />\n\nThe function takes in a series ID in the form of a [u64](https://doc.rust-lang.org/std/primitive.u64.html), the metadata, royalties, and the price for tokens in the series. It will then create the [Series object](#series-object) and insert it into the contract's series_by_id data structure. It's important to note that the caller must be an approved creator and they must attach enough $NEAR to cover storage costs.\n\n<hr class=\"subsection\" />\n\n### Minting NFTs\n\nNext, we'll look at the minting function. If you remember from before, this used to take the following parameters:\n- Token ID\n- Metadata\n- Receiver ID\n- Perpetual Royalties\n\nWith the new and improved minting function, these parameters have been changed to just two:\n- The series ID\n- The receiver ID.", "mimetype": "text/plain", "start_char_idx": 8096, "end_char_idx": 10042, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "18989de8-18a5-42f6-9d92-ceda02ac9b58": {"__data__": {"id_": "18989de8-18a5-42f6-9d92-ceda02ac9b58", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e0993496-2f1a-4520-b405-35bfbacf9c4a", "node_type": "1", "metadata": {}, "hash": "a46b91cb409c7ab9bddc6d5182c66f580e5ec52d10a22bc7dad3f0ecb8dc27a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c2680c37-82cc-4457-b4d2-a68e4e3ac520", "node_type": "1", "metadata": {}, "hash": "de5cac4b47c98822df82ecd72090f73ead9085b4df9bb21747cc6b15e425c355", "class_name": "RelatedNodeInfo"}}, "text": "The mint function might look complicated at first but let's break it down to understand what's happening. The first thing it does is get the [series object](#series-object) from the specified series ID. From there, it will check that the number of copies won't be exceeded if one is specified in the metadata.\n\nIt will then store the token information on the contract as explained in the [minting section](2-minting.md#storage-implications) of the tutorial and map the token ID to the series. Once this is finished, a mint log will be emitted and it will ensure that enough deposit has been attached to the call. This amount differs based on whether or not the series has a price.\n\n#### Required Deposit\n\nAs we went over in the [minting section](2-minting.md#storage-implications) of this tutorial, all information stored on the contract costs $NEAR. When minting, there is a required deposit to pay for this storage. For *this contract*, a series price can also be specified by the owner when the series is created. This price will be used for **all** NFTs in the series when they are minted. If the price is specified, the deposit must cover both the storage as well as the price.\n\nIf a price **is specified** and the user attaches more deposit than what is necessary, the excess is sent to the **series owner**. There is also *no restriction* on who can mint tokens for series that have a price. The caller does **not** need to be an approved minter.\n\nIf **no price** was specified in the series and the user attaches more deposit than what is necessary, the excess is *refunded to them*. In addition, the contract makes sure that the caller is an approved minter in this case.\n\n:::info\nNotice how the token ID isn't required? This is because the token ID is automatically generated when minting. The ID stored on the contract is `${series_id}:${token_id}` where the token ID is a nonce that increases each time a new token is minted in a series. This not only reduces the amount of information stored on the contract but it also acts as a way to check the specific edition number.", "mimetype": "text/plain", "start_char_idx": 10044, "end_char_idx": 12128, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2680c37-82cc-4457-b4d2-a68e4e3ac520": {"__data__": {"id_": "c2680c37-82cc-4457-b4d2-a68e4e3ac520", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18989de8-18a5-42f6-9d92-ceda02ac9b58", "node_type": "1", "metadata": {}, "hash": "896eb9ad34443f74f54b83d02b00aeeb43500b09871c6e2f2b578a4c2021a752", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8", "node_type": "1", "metadata": {}, "hash": "ba8819db5a35c706581e96bb0b2e0fac2b8a8a22bcb9c0de6f6245b116d3f5b0", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n<Github language=\"rust\" start=\"60\" end=\"147\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/series.rs\" />\n\n<hr class=\"subsection\" />\n\n### View Functions\n\nNow that we've introduced the idea of series, more view functions have also been added.\n\n:::info\nNotice how we've also created a new struct `JsonSeries` instead of returning the regular `Series` struct. This is because the `Series` struct contains an `UnorderedSet` which cannot be serialized.\n\nThe common practice is to return everything **except** the `UnorderedSet` in a separate struct and then have entirely different methods for accessing the data from the `UnorderedSet` itself.\n<!-- TODO: add a learn more here call to action -->\n:::\n\n<Github language=\"rust\" start=\"6\" end=\"17\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\nThe view functions are listed below.\n- **[get_series_total_supply](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L92)**: Get the total number of series currently on the contract.\n  - Arguments: None.\n\n<Github language=\"rust\" start=\"92\" end=\"96\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\n- **[get_series](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L97)**: Paginate through all the series in the contract and return a vector of `JsonSeries` objects.\n  - Arguments: `from_index: String | null`, `limit: number | null`.\n\n<Github language=\"rust\" start=\"97\" end=\"113\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\n- **[get_series_details](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L115)**: Get the `JsonSeries` details for a specific series.\n  - Arguments: `id: number`.", "mimetype": "text/plain", "start_char_idx": 12129, "end_char_idx": 13994, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8": {"__data__": {"id_": "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2680c37-82cc-4457-b4d2-a68e4e3ac520", "node_type": "1", "metadata": {}, "hash": "de5cac4b47c98822df82ecd72090f73ead9085b4df9bb21747cc6b15e425c355", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a01fd0d7-1b43-4e72-8035-0921193917e2", "node_type": "1", "metadata": {}, "hash": "b2427bc9a0879a4b81b8e160875f79ed37abc94dfe21a4718c2016937bd8a315", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"115\" end=\"131\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\n- **[nft_supply_for_series](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L133)**: View the total number of NFTs minted for a specific series.\n  - Arguments: `id: number`.\n\n<Github language=\"rust\" start=\"133\" end=\"144\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\n- **[nft_tokens_for_series](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L146)**: Paginate through all NFTs for a specific series and return a vector of `JsonToken` objects.\n  - Arguments: `id: number`, `from_index: String | null`, `limit: number | null`.\n\n<Github language=\"rust\" start=\"146\" end=\"183\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs\" />\n\n:::info\nNotice how with every pagination function, we've also included a getter to view the total supply. This is so that you can use the `from_index` and `limit` parameters of the pagination functions in conjunction with the total supply so you know where to end your pagination.\n:::\n\n<hr class=\"subsection\" />\n\n### Modifying View Calls for Optimizations\n\nStoring information on-chain can be very expensive. As you level up in your smart contract development skills, one area to look into is reducing the amount of information stored. View calls are a perfect example of this optimization.\n\nFor example, if you wanted to relay the edition number for a given NFT in its title, you don't necessarily need to store this on-chain for every token. Instead, you could modify the view functions to manually append this information to the title before returning it.\n\nTo do this, here's a way of modifying the `nft_token` function as it's central to all enumeration methods.", "mimetype": "text/plain", "start_char_idx": 13996, "end_char_idx": 15899, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a01fd0d7-1b43-4e72-8035-0921193917e2": {"__data__": {"id_": "a01fd0d7-1b43-4e72-8035-0921193917e2", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8", "node_type": "1", "metadata": {}, "hash": "ba8819db5a35c706581e96bb0b2e0fac2b8a8a22bcb9c0de6f6245b116d3f5b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e61e2d84-2246-4ebe-9b86-b5a4fa40145a", "node_type": "1", "metadata": {}, "hash": "605e3f64fc18eb5b1434b0ad473d84b80003d2a180580672af44a4280d492c94", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"156\" end=\"192\" url=\"https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/nft_core.rs\" />\n\nFor example if a token had a title `\"My Amazing Go Team Gif\"` and the NFT was edition 42, the new title returned would be `\"My Amazing Go Team Gif - 42\"`. If the NFT didn't have a title in the metadata, the series and edition number would be returned in the form of `Series {} : Edition {}`.\n\nWhile this is a small optimization, this idea is extremely powerful as you can potentially save on a ton of storage. As an example: most of the time NFTs don't utilize the following fields in their metadata.\n- `issued_at`\n- `expires_at`\n- `starts_at`\n- `updated_at`\n\nAs an optimization, you could change the token metadata that's **stored** on the contract to not include these fields but then when returning the information in `nft_token`, you could simply add them in as `null` values.\n\n<hr class=\"subsection\" />\n\n### Owner File\n\nThe last file we'll look at is the owner file found at `owner.rs`. This file simply contains all the functions for getting and setting approved creators and approved minters which can only be called by the contract owner.\n\n:::info\nThere are some other smaller changes made to the contract that you can check out if you'd like. The most notable are:\n- The `Token` and `JsonToken` objects have been [changed](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/metadata.rs#L40) to reflect the new series IDs.\n- All references to `token_metadata_by_id` have been [changed](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/enumeration.rs#L23) to `tokens_by_id`\n- Royalty functions [now](https://github.com/near-examples/nft-tutorial/blob/main/nft-series/src/royalty.rs#L43) calculate the payout objects by using the series' royalties rather than the token's royalties.\n:::\n\n---\n\n## Building the Contract\n\nNow that you hopefully have a good understanding of the contract, let's get started building it. Run the following build command to compile the contract to wasm.", "mimetype": "text/plain", "start_char_idx": 15901, "end_char_idx": 17968, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e61e2d84-2246-4ebe-9b86-b5a4fa40145a": {"__data__": {"id_": "e61e2d84-2246-4ebe-9b86-b5a4fa40145a", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a01fd0d7-1b43-4e72-8035-0921193917e2", "node_type": "1", "metadata": {}, "hash": "b2427bc9a0879a4b81b8e160875f79ed37abc94dfe21a4718c2016937bd8a315", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b8d976c5-5905-471b-807d-bfd42ebdef64", "node_type": "1", "metadata": {}, "hash": "c693267e86c0ec85c0fa67665cce25083003552cd1f82aae456bcdb459d0e97a", "class_name": "RelatedNodeInfo"}}, "text": "```bash\ncargo near build\n```\n\n---\n\n## Deployment and Initialization\n\nNext, you'll deploy this contract to the network.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  export NFT_CONTRACT_ID=<accountId>\n  near create-account $NFT_CONTRACT_ID --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  export NFT_CONTRACT_ID=<accountId>\n  near account create-account sponsor-by-faucet-service $NFT_CONTRACT_ID autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nCheck if this worked correctly by echoing the environment variable.\n```bash\necho $NFT_CONTRACT_ID\n```\nThis should return your `<accountId>`. The next step is to initialize the contract with some default metadata.\n\n```bash\ncargo near deploy $NFT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nIf you now query for the metadata of the contract, it should return our default metadata.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $NFT_CONTRACT_ID nft_metadata '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $NFT_CONTRACT_ID nft_metadata json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Creating The Series\n\nThe next step is to create two different series. One will have a price for lazy minting and the other will simply be a basic series with no price.", "mimetype": "text/plain", "start_char_idx": 17970, "end_char_idx": 19601, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b8d976c5-5905-471b-807d-bfd42ebdef64": {"__data__": {"id_": "b8d976c5-5905-471b-807d-bfd42ebdef64", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e61e2d84-2246-4ebe-9b86-b5a4fa40145a", "node_type": "1", "metadata": {}, "hash": "605e3f64fc18eb5b1434b0ad473d84b80003d2a180580672af44a4280d492c94", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e5cb992f-29e0-458b-8d3e-9589f13ba41d", "node_type": "1", "metadata": {}, "hash": "cf8558ae953d171d21b15cfcbc1ff9b98e36bdef70377417a8a0335fae58e460", "class_name": "RelatedNodeInfo"}}, "text": "The first step is to create an owner [sub-account](../../4.tools/cli.md#accounts) that you can use to create both series\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  export SERIES_OWNER=owner.$NFT_CONTRACT_ID\n\n  near create-account $SERIES_OWNER --use-account $NFT_CONTRACT_ID --initial-balance 3 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  export SERIES_OWNER=owner.$NFT_CONTRACT_ID\n\n  near account create-account fund-myself $SERIES_OWNER '3 NEAR' autogenerate-new-keypair save-to-keychain sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n### Basic Series\n\nYou'll now need to create the simple series with no price and no royalties. If you try to run the following command before adding the owner account as an approved creator, the contract should throw an error.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID create_series '{\"id\": 1, \"metadata\": {\"title\": \"SERIES!\", \"description\": \"testing out the new series contract\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}}' --gas 100000000000000 --deposit 1 --accountId $SERIES_OWNER --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID create_series json-args '{\"id\": 1, \"metadata\": {\"title\": \"SERIES!", "mimetype": "text/plain", "start_char_idx": 19602, "end_char_idx": 21114, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e5cb992f-29e0-458b-8d3e-9589f13ba41d": {"__data__": {"id_": "e5cb992f-29e0-458b-8d3e-9589f13ba41d", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b8d976c5-5905-471b-807d-bfd42ebdef64", "node_type": "1", "metadata": {}, "hash": "c693267e86c0ec85c0fa67665cce25083003552cd1f82aae456bcdb459d0e97a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "31f24550-f232-4993-9797-8eedf898624c", "node_type": "1", "metadata": {}, "hash": "ca7aab594322d46dfb755a94eb4c00a0aa9d9671513c355d0c45a405588afbb0", "class_name": "RelatedNodeInfo"}}, "text": "\", \"description\": \"testing out the new series contract\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}}' prepaid-gas '100.0 Tgas' attached-deposit '1 NEAR' sign-as $SERIES_OWNER network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nThe expected output is an error thrown: `ExecutionError: 'Smart contract panicked: only approved creators can add a type`. If you now add the series owner as a creator, it should work.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID add_approved_creator '{\"account_id\": \"'$SERIES_OWNER'\"}' --gas 100000000000000 --accountId $SERIES_OWNER --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID add_approved_creator json-args '{\"account_id\": \"'$SERIES_OWNER'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID create_series '{\"id\": 1, \"metadata\": {\"title\": \"SERIES!", "mimetype": "text/plain", "start_char_idx": 21114, "end_char_idx": 22358, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "31f24550-f232-4993-9797-8eedf898624c": {"__data__": {"id_": "31f24550-f232-4993-9797-8eedf898624c", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e5cb992f-29e0-458b-8d3e-9589f13ba41d", "node_type": "1", "metadata": {}, "hash": "cf8558ae953d171d21b15cfcbc1ff9b98e36bdef70377417a8a0335fae58e460", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b35ba429-f391-45d1-8712-1dbac6a55085", "node_type": "1", "metadata": {}, "hash": "d8a8a1c3f0450f998441966870b2545517b8e8e496caad2229320172e1ed139a", "class_name": "RelatedNodeInfo"}}, "text": "\", \"description\": \"testing out the new series contract\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}}' --gas 100000000000000 --deposit 1 --accountId $SERIES_OWNER --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID create_series json-args '{\"id\": 1, \"metadata\": {\"title\": \"SERIES!\", \"description\": \"testing out the new series contract\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}}' prepaid-gas '100.0 Tgas' attached-deposit '1 NEAR' sign-as $SERIES_OWNER network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nIf you now query for the series information, it should work!\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $NFT_CONTRACT_ID get_series '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $NFT_CONTRACT_ID get_series json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nWhich should return something similar to:\n\n```js\n[\n  {\n    series_id: 1,\n    metadata: {\n      title: 'SERIES!", "mimetype": "text/plain", "start_char_idx": 22358, "end_char_idx": 23646, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b35ba429-f391-45d1-8712-1dbac6a55085": {"__data__": {"id_": "b35ba429-f391-45d1-8712-1dbac6a55085", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31f24550-f232-4993-9797-8eedf898624c", "node_type": "1", "metadata": {}, "hash": "ca7aab594322d46dfb755a94eb4c00a0aa9d9671513c355d0c45a405588afbb0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe229d58-d503-4f02-9143-9733d0775ae5", "node_type": "1", "metadata": {}, "hash": "7d19e7ff1402f495f6af61927ec2369240a36708ace5fb23c6ee2ffc48a92dab", "class_name": "RelatedNodeInfo"}}, "text": "',\n      description: 'testing out the new series contract',\n      media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif',\n      media_hash: null,\n      copies: null,\n      issued_at: null,\n      expires_at: null,\n      starts_at: null,\n      updated_at: null,\n      extra: null,\n      reference: null,\n      reference_hash: null\n    },\n    royalty: null,\n    owner_id: 'owner.nft_contract.testnet'\n  }\n]\n```\n\n<hr class=\"subsection\" />\n\n### Series With a Price\n\nNow that you've created the first, simple series, let's create the second one that has a price of 1 $NEAR associated with it.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID create_series '{\"id\": 2, \"metadata\": {\"title\": \"COMPLEX SERIES!\", \"description\": \"testing out the new contract with a complex series\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"price\": \"500000000000000000000000\"}' --gas 100000000000000 --deposit 1 --accountId $SERIES_OWNER --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID create_series json-args '{\"id\": 2, \"metadata\": {\"title\": \"COMPLEX SERIES!", "mimetype": "text/plain", "start_char_idx": 23646, "end_char_idx": 24961, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe229d58-d503-4f02-9143-9733d0775ae5": {"__data__": {"id_": "fe229d58-d503-4f02-9143-9733d0775ae5", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b35ba429-f391-45d1-8712-1dbac6a55085", "node_type": "1", "metadata": {}, "hash": "d8a8a1c3f0450f998441966870b2545517b8e8e496caad2229320172e1ed139a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7bf996a7-aa40-4f7f-bd57-319a28ed06f4", "node_type": "1", "metadata": {}, "hash": "e6c8209493d731092c6a251d34907e14b962cb1587b86861643d8edc20559f0f", "class_name": "RelatedNodeInfo"}}, "text": "\", \"description\": \"testing out the new contract with a complex series\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"price\": \"500000000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 NEAR' sign-as $SERIES_OWNER network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nIf you now paginate through the series again, you should see both appear.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $NFT_CONTRACT_ID get_series '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $NFT_CONTRACT_ID get_series json-args {} network-config testnet now\n  ```\n  </TabItem>\n  \n</Tabs>\n\nWhich has\n\n```js\n[\n  {\n    series_id: 1,\n    metadata: {\n      title: 'SERIES!',\n      description: 'testing out the new series contract',\n      media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif',\n      media_hash: null,\n      copies: null,\n      issued_at: null,\n      expires_at: null,\n      starts_at: null,\n      updated_at: null,\n      extra: null,\n      reference: null,\n      reference_hash: null\n    },\n    royalty: null,\n    owner_id: 'owner.nft_contract.testnet'\n  },\n  {\n    series_id: 2,\n    metadata: {\n      title: 'COMPLEX SERIES!", "mimetype": "text/plain", "start_char_idx": 24961, "end_char_idx": 26363, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7bf996a7-aa40-4f7f-bd57-319a28ed06f4": {"__data__": {"id_": "7bf996a7-aa40-4f7f-bd57-319a28ed06f4", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe229d58-d503-4f02-9143-9733d0775ae5", "node_type": "1", "metadata": {}, "hash": "7d19e7ff1402f495f6af61927ec2369240a36708ace5fb23c6ee2ffc48a92dab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af631a0d-99b1-438d-ad40-f0e1785ec530", "node_type": "1", "metadata": {}, "hash": "935dd0fbde51a0579b0d5d9a980bfb428f23177d11c6613f3dbb95598bac18e5", "class_name": "RelatedNodeInfo"}}, "text": "',\n      description: 'testing out the new contract with a complex series',\n      media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif',\n      media_hash: null,\n      copies: null,\n      issued_at: null,\n      expires_at: null,\n      starts_at: null,\n      updated_at: null,\n      extra: null,\n      reference: null,\n      reference_hash: null\n    },\n    royalty: null,\n    owner_id: 'owner.nft_contract.testnet'\n  }\n]\n```\n\n---\n\n## Minting NFTs\n\nNow that you have both series created, it's time to now mint some NFTs. You can either login with an existing NEAR wallet using [`near login`](../../4.tools/cli.md#near-login) or you can create a sub-account of the NFT contract. In our case, we'll use a sub-account.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  export BUYER_ID=buyer.$NFT_CONTRACT_ID\n\n  near create-account $BUYER_ID --use-account $NFT_CONTRACT_ID --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  export BUYER_ID=buyer.$NFT_CONTRACT_ID\n\n  near account create-account fund-myself $BUYER_ID '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n### Lazy Minting\n\nThe first workflow you'll test out is [lazy minting](#lazy-minting) NFTs. If you remember, the second series has a price associated with it of 1 $NEAR. This means that there are no minting restrictions and anyone can try and purchase the NFT. Let's try it out.\n \nIn order to view the NFT in the NEAR wallet, you'll want the `receiver_id` to be an account you have currently available in the wallet site.", "mimetype": "text/plain", "start_char_idx": 26363, "end_char_idx": 28088, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af631a0d-99b1-438d-ad40-f0e1785ec530": {"__data__": {"id_": "af631a0d-99b1-438d-ad40-f0e1785ec530", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7bf996a7-aa40-4f7f-bd57-319a28ed06f4", "node_type": "1", "metadata": {}, "hash": "e6c8209493d731092c6a251d34907e14b962cb1587b86861643d8edc20559f0f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ec10c6d-3947-4a4c-94e5-a4c4639845a6", "node_type": "1", "metadata": {}, "hash": "0c8eefd26e19ca5d690bc6d4b0396aeca237e314cc138480ca5147391cebd68b", "class_name": "RelatedNodeInfo"}}, "text": "Let's export it to an environment variable. Run the following command but replace `YOUR_ACCOUNT_ID_HERE` with your actual NEAR account ID.\n\n```bash\nexport NFT_RECEIVER_ID=YOUR_ACCOUNT_ID_HERE\n```\nNow if you try and run the mint command but don't attach enough $NEAR, it should throw an error.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"id\": \"2\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' --gas 100000000000000 --accountId $BUYER_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"id\": \"2\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nRun the command again but this time, attach 1.5 $NEAR.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"id\": \"2\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' --gas 100000000000000 --deposit 1.5 --accountId $BUYER_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"id\": \"2\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '1.5 NEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nThis should output the following logs.", "mimetype": "text/plain", "start_char_idx": 28089, "end_char_idx": 29643, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ec10c6d-3947-4a4c-94e5-a4c4639845a6": {"__data__": {"id_": "0ec10c6d-3947-4a4c-94e5-a4c4639845a6", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af631a0d-99b1-438d-ad40-f0e1785ec530", "node_type": "1", "metadata": {}, "hash": "935dd0fbde51a0579b0d5d9a980bfb428f23177d11c6613f3dbb95598bac18e5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e8ad128-bc0d-4659-acce-e78183df4d3f", "node_type": "1", "metadata": {}, "hash": "829a42c7ac19dbcfed79a82346d760fa9384ed5f2c2f48e0ff0d91d05c33d03b", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nReceipts: BrJLxCVmxLk3yNFVnwzpjZPDRhiCinNinLQwj9A7184P, 3UwUgdq7i1VpKyw3L5bmJvbUiqvFRvpi2w7TfqmnPGH6\n\tLog [nft_contract.testnet]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"nft-1.0.0\",\"event\":\"nft_mint\",\"data\":[{\"owner_id\":\"benjiman.testnet\",\"token_ids\":[\"2:1\"]}]}\nTransaction Id FxWLFGuap7SFrUPLskVr7Uxxq8hpDtAG76AvshWppBVC\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/FxWLFGuap7SFrUPLskVr7Uxxq8hpDtAG76AvshWppBVC\n''\n```\n\nIf you check the explorer link, it should show that the owner received on the order of `0.59305 $NEAR`.\n\n<img width=\"80%\" src=\"/docs/assets/nfts/explorer-payout-series-owner.png\" />\n\n<hr class=\"subsection\" />\n\n### Becoming an Approved Minter\n\nIf you try to mint the NFT for the simple series with no price, it should throw an error saying you're not an approved minter.", "mimetype": "text/plain", "start_char_idx": 29645, "end_char_idx": 30524, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e8ad128-bc0d-4659-acce-e78183df4d3f": {"__data__": {"id_": "6e8ad128-bc0d-4659-acce-e78183df4d3f", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ec10c6d-3947-4a4c-94e5-a4c4639845a6", "node_type": "1", "metadata": {}, "hash": "0c8eefd26e19ca5d690bc6d4b0396aeca237e314cc138480ca5147391cebd68b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "52fef8e1-92ac-48d0-9cc8-15ddda180959", "node_type": "1", "metadata": {}, "hash": "700cf7895e86a8dc7c0d8db2c18628ded10f2f078de468a71d142c3b9060a078", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"id\": \"1\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' --gas 100000000000000 --deposit 0.1 --accountId $BUYER_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"id\": \"1\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nGo ahead and run the following command to add the buyer account as an approved minter.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID add_approved_minter '{\"account_id\": \"'$BUYER_ID'\"}' --gas 100000000000000 --accountId $NFT_CONTRACT_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID add_approved_minter json-args '{\"account_id\": \"'$BUYER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nIf you now run the mint command again, it should work.", "mimetype": "text/plain", "start_char_idx": 30526, "end_char_idx": 31832, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52fef8e1-92ac-48d0-9cc8-15ddda180959": {"__data__": {"id_": "52fef8e1-92ac-48d0-9cc8-15ddda180959", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e8ad128-bc0d-4659-acce-e78183df4d3f", "node_type": "1", "metadata": {}, "hash": "829a42c7ac19dbcfed79a82346d760fa9384ed5f2c2f48e0ff0d91d05c33d03b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bf27a250-7d2f-4543-b11f-4acf97115d80", "node_type": "1", "metadata": {}, "hash": "5df5828170ccf2435ec4a67e6c80d2bd881237423be722013c4bc0f297bb97be", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"id\": \"1\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' --gas 100000000000000 --deposit 0.1 --accountId $BUYER_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"id\": \"1\", \"receiver_id\": \"'$NFT_RECEIVER_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $BUYER_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Viewing the NFTs in the Wallet\n\nNow that you've received both NFTs, they should show up in the NEAR wallet. Open the collectibles tab and search for the contract with the title `NFT Series Contract` and you should own two NFTs. One should be the complex series and the other should just be the simple version. Both should have ` - 1` appended to the end of the title because the NFTs are the first editions for each series.\n\n<img width=\"80%\" src=\"/docs/assets/nfts/series-wallet-collectibles.png\" />\n\nHurray! You've successfully deployed and tested the series contract! **GO TEAM!**.\n\n---\n\n## Conclusion\n\nIn this tutorial, you learned how to take the basic NFT contract and iterate on it to create a complex and custom version to meet the needs of the community. You optimized the storage, introduced the idea of collections, created a lazy minting functionality, hacked the enumeration functions to save on storage, and created an allowlist functionality.\n\nYou then built the contract and deployed it on chain. Once it was on-chain, you initialized it and created two sets of series. One was complex with a price and the other was a regular series. You lazy minted an NFT and purchased it for `1.5 $NEAR` and then added yourself as an approved minter.", "mimetype": "text/plain", "start_char_idx": 31834, "end_char_idx": 33708, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf27a250-7d2f-4543-b11f-4acf97115d80": {"__data__": {"id_": "bf27a250-7d2f-4543-b11f-4acf97115d80", "embedding": null, "metadata": {"file_path": "./near_dist/9-series.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "933fff30-0240-4e90-82f0-2259fce8b134", "node_type": "4", "metadata": {}, "hash": "166b74c00e797214c158051cc8f8eedf35a0e17c8ab1ee993c8b819746809b45", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "52fef8e1-92ac-48d0-9cc8-15ddda180959", "node_type": "1", "metadata": {}, "hash": "700cf7895e86a8dc7c0d8db2c18628ded10f2f078de468a71d142c3b9060a078", "class_name": "RelatedNodeInfo"}}, "text": "You then minted an NFT from the regular series and viewed them both in the NEAR wallet.\n\nThank you so much for going through this journey with us! I wish you all the best and am eager to see what sorts of neat and unique use-cases you can come up with. If you have any questions, feel free to ask on our [Discord](https://near.chat) or any other social media channels we have. If you run into any issues or have feedback, feel free to use the `Feedback` button on the right.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-cli-rs: `0.11.0`\n- cargo-near `0.6.1`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 33709, "end_char_idx": 34468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53616b96-c019-405a-b7a5-1e9289202e1a": {"__data__": {"id_": "53616b96-c019-405a-b7a5-1e9289202e1a", "embedding": null, "metadata": {"file_path": "./near_dist/ai-assistant.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f", "node_type": "4", "metadata": {}, "hash": "ca7b20ef03a7d01e18dea5f83762e5f8bddec7dad013e5063932339a5f846084", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3", "node_type": "1", "metadata": {}, "hash": "43051eb79be377f29dc27d77f24af2eb2aeb4d0559346be8936313415c398d1b", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: ai-assistant\ntitle: AI Assistant\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nWelcome! In this guide, you'll discover an AI chatbot that can interact with the NEAR ecosystem\n\nThis AI agent can:\n\n- Explore and explain what happened in a transaction when given a transaction hash\n- Request tokens from the testnet faucet\n- Mint and send a special NFT though a wallet it controls to a user\n- Answer general questions about the NEAR architecture (powered by realtime search results)\n\n:::tip Community Project \n\nCreated by our community member [Reza](https://x.com/RezaRahemtola), this project was one of our AI track winners at the [ETHGlobal Brussels 2024 hackathon](https://ethglobal.com/events/brussels) \n\n:::\n\n---\n\n## Prerequisites\n\nLet's start by setting up the environment to run the AI assistant locally.\n\n<hr class=\"subsection\" />\n\n### Tools\nBefore starting, make sure you have the following tools installed:\n\n- [Python >= 3.12](https://www.python.org/downloads/)\n- [NodeJS >= 20](https://nodejs.org/en)\n- [llama.cpp](https://github.com/ggerganov/llama.cpp)\n\n<Tabs>\n  <TabItem value=\"Mac\">\n    \n    ```sh\n    # Install Node.js using nvm (more option in: https://nodejs.org/en/download)\n    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n    nvm install latest\n\n    # Install python using miniconda (includes the package manager pip)\n    brew install --cask miniconda\n    conda init \"$(basename \"${SHELL}\")\"\n    pip install poetry\n\n    # Install llama.cpp\n    brew install llama.cpp\n    ```\n\n  </TabItem>\n  <TabItem value=\"Linux\">\n    Please help by contributing these steps for Linux!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1659, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3": {"__data__": {"id_": "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3", "embedding": null, "metadata": {"file_path": "./near_dist/ai-assistant.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f", "node_type": "4", "metadata": {}, "hash": "ca7b20ef03a7d01e18dea5f83762e5f8bddec7dad013e5063932339a5f846084", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53616b96-c019-405a-b7a5-1e9289202e1a", "node_type": "1", "metadata": {}, "hash": "3c059e87ec5bdff41150e2130183e6c87ab42032c208139d57fe543579f6881b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5999e17a-87b3-406d-970c-43fd5d75886e", "node_type": "1", "metadata": {}, "hash": "df45547f6ee67c6b4c883a67120a218a6c7ab4fa0af33e9f3a9ca793e3b974cc", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### AI Model\nIn this tutorial we will be using the [NousResearch/Hermes-2-Pro-Mistral-7B-GGUF](https://huggingface.co/squeeze-ai-lab/TinyAgent-1.1B-GGUF) model, which is hosted on [Hugging Face](https://huggingface.co/login).\n\n```sh\n# Install the Hugging Face library\npip install huggingface_hub\n\n# Login to your Hugging Face account\nhuggingface-cli login\n\n# get the model from Hugging Face\nhuggingface-cli download huggingface-cli download NousResearch/Hermes-2-Pro-Mistral-7B-GGUF Hermes-2-Pro-Mistral-7B.Q3_K_M.gguf --local-dir model\n```\n\n:::info Q3_K_M Model\n\nThe `Q3_K_M` model is one of the smallest models available (`Q2` is smaller), it is used in this tutorial to reduce the time and resources needed to run the AI agent\n\n:::\n\n<hr class=\"subsection\" />\n\n### Execute the Model\nYou should now have a folder named `./model` with the [GGUF file](https://huggingface.co/docs/hub/en/gguf) `./model/Hermes-2-Pro-Mistral-7B.Q3_K_M.gguf`, lets use `llama.cpp` to run it.\n\n```bash\n# run the model with llama.cpp\nllama-server -m ./model/Hermes-2-Pro-Mistral-7B.Q3_K_M.gguf\n```\n\nOpen your browser at `http://localhost:8080`, if you see an interface similar to this one you are ready to go \ud83d\ude80\n![llama.cpp UI](@site/static/docs/assets/llama-cpp.png)\n\n:::tip\n\nYou can use a different model with llama.cpp if you wish!", "mimetype": "text/plain", "start_char_idx": 1662, "end_char_idx": 3020, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5999e17a-87b3-406d-970c-43fd5d75886e": {"__data__": {"id_": "5999e17a-87b3-406d-970c-43fd5d75886e", "embedding": null, "metadata": {"file_path": "./near_dist/ai-assistant.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f", "node_type": "4", "metadata": {}, "hash": "ca7b20ef03a7d01e18dea5f83762e5f8bddec7dad013e5063932339a5f846084", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3", "node_type": "1", "metadata": {}, "hash": "43051eb79be377f29dc27d77f24af2eb2aeb4d0559346be8936313415c398d1b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86a953a2-7a4b-4a74-8b5f-f6dfc4b2e904", "node_type": "1", "metadata": {}, "hash": "ce644c393e8b0d6bdf96dc2a3541b8d0186d1697d827c74d20d3a8c537cba495", "class_name": "RelatedNodeInfo"}}, "text": "Just make sure it supports [function calling](https://docs.mistral.ai/capabilities/function_calling)\n\n:::\n\n<!-- - Update the `model.max_prompt_tokens` config according to the context length of the new model\n- Update the ChatML config variables to match those of the new model -->\n\n---\n\n### Project Setup\n\nStart by cloning the repository of the project, in which you will find the AI agent and a basic frontend to interact with it:\n\n```sh\ngit clone git@github.com:RezaRahemtola/near-ai-assistant.git\n```\n\n<hr class=\"subsection\" />\n\n### AI\n\nLet's configure the AI agent, first, we install all python dependencies on the project \n\n```sh\ncd ai/\n\n# Important: Create a virtual environment\nconda create -n ai-assistant python=3.12\nconda activate ai-assistant\n\n# Install the dependencies\npip install poetry\npoetry install\n```\n\nThen you can create a `.env` file and fill it with values inspired from the `.env.example` file:\n- `NEAR_ACCOUNT_ID`: The NEAR account id (i.e. account name) of your bot\n- `NEAR_ACCOUNT_PRIVATE_KEY`: The private key to control the account\n- `NEAR_RPC_URL`: can also be set in case you want to use a different RPC\n\nOnce you've done all this, you are ready to launch the code \ud83d\ude80\n\n```sh\npython src/main.py\n```\n\n<details> \n\n<summary> Optional: Google Search </summary>\n\n`OXYLABS_USERNAME` and `OXYLABS_PASSWORD` are API credential used to access an SERP API to search information on Google\n\n</details>\n\n<hr class=\"subsection\" />\n\n### Frontend\n\nNow that your AI agent is ready to go, let's quickly launch a basic frontend to interact with it:\n\n```sh\ncd front/\n# Install the dependencies\nyarn\n# Start the frontend\nyarn dev\n```\n\n----\n\n## Usage\n\nYou can now head to `http://localhost:5173`, where you'll find an interface like this one to interact with the AI:\n![img](@site/static/docs/assets/ai-assistant.png)\n\nHere are a few example questions you can ask it:\n- What is NEAR?\n- What are the different transaction actions on NEAR?", "mimetype": "text/plain", "start_char_idx": 3021, "end_char_idx": 4962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86a953a2-7a4b-4a74-8b5f-f6dfc4b2e904": {"__data__": {"id_": "86a953a2-7a4b-4a74-8b5f-f6dfc4b2e904", "embedding": null, "metadata": {"file_path": "./near_dist/ai-assistant.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f", "node_type": "4", "metadata": {}, "hash": "ca7b20ef03a7d01e18dea5f83762e5f8bddec7dad013e5063932339a5f846084", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5999e17a-87b3-406d-970c-43fd5d75886e", "node_type": "1", "metadata": {}, "hash": "df45547f6ee67c6b4c883a67120a218a6c7ab4fa0af33e9f3a9ca793e3b974cc", "class_name": "RelatedNodeInfo"}}, "text": "- Can I please have an ETHGlobal Brussels NFT sent to me at random.testnet? Thanks\n- I want to start using NEAR, can you send me some tokens on my testnet address random.testnet?\n- I don't understand what this transaction is doing, can you help me? The transaction hash is `hash` and it was send by someone.testnet.\n\n---\n\n## Moving Forward\n\nThat's it for the quickstart tutorial. You have now seen an open-source AI agent interacting with NEAR and controlling a wallet to make transactions.\n\nTo better understand how it works, check the [`agent.py` file](https://github.com/RezaRahemtola/near-ai-assistant/blob/main/ai/src/agent/agent.py) and the [Function Calling explanation on HuggingFace](https://huggingface.co/NousResearch/Hermes-2-Pro-Llama-3-8B#prompt-format-for-function-calling).\n\nA lot of things could be built by leveraging this PoC, some ideas could be:\n- A chatbot integrated to the explorer to summarize transactions directly in the page\n- Interactive tutorials in the documentation through a chatbot\n  - \"How to create an NFT?\"\n  - Multiple chats with explanations and code to complete given by the AI\n  - In the end, the AI publish the smart contract, mint an NFT and send it to you on testnet\n- An AI trader reacting to on-chain or off-chain events to buy/sell some tokens with its wallet\n- The only limit is your imagination!\n\nHappy coding! \ud83d\ude80", "mimetype": "text/plain", "start_char_idx": 4963, "end_char_idx": 6324, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "60531d1f-6e49-4e37-b6cc-f92c46e394e6": {"__data__": {"id_": "60531d1f-6e49-4e37-b6cc-f92c46e394e6", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "880fbdc7-8413-40d9-beff-fd0abab4aeb2", "node_type": "1", "metadata": {}, "hash": "3bc1098abf2c4c3c93deb04171fd54f9e997986ed28354184ea83527ace565d3", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: collections\ntitle: Collections\n---\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nWhen deciding on data structures it is important to understand their tradeoffs. Choosing the wrong structure can create a bottleneck as the application scales, and migrating the state to the new data structures will come at a cost.\n\nYou can choose between two types of collections:\n\n1. Native collections (e.g. `Array`, `Map`, `Set`), provided by the the language\n2. SDK collections (e.g. `IterableMap`, `Vector`), provided by the NEAR SDK\n\nUnderstanding how the contract stores and loads both types of collections is crucial to decide which one to use.\n\n:::tip\n\nUse native collections for small amounts of data that need to be accessed all together, and SDK collections for large amounts of data that do not need to be accessed all together\n\n:::\n\n:::info How the State is Handled\n\nEach time the contract is executed, the first thing it will do is to read the values and [deserialize](./serialization.md) them into memory, and after the function finishes, it will [serialize](./serialization.md) and write the values back to the database.\n\n:::\n\n---\n\n## Native Collections\n\nNative collections are those provided by the language:\n- JS: `Array`, `Set`, `Map`, `Object` ...\n- Rust: `Vector`, `HashMap`, `Set` ...\n\nAll entries in a native collection are **serialized into a single value** and **stored together** into the state. This means that every time a function execute, the SDK will read and **deserialize all entries** in the native collection.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1633, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "880fbdc7-8413-40d9-beff-fd0abab4aeb2": {"__data__": {"id_": "880fbdc7-8413-40d9-beff-fd0abab4aeb2", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "60531d1f-6e49-4e37-b6cc-f92c46e394e6", "node_type": "1", "metadata": {}, "hash": "12b47cddbc47ea7a2277fa79652f31510d0900dfa5fdc84f779d5161f597bac0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "25fe93fe-4b10-4680-8bc3-42016de9675e", "node_type": "1", "metadata": {}, "hash": "0bb3055483ddb2680bc556d92b74f6fc85862b847b583ac1893b976bc36b7203", "class_name": "RelatedNodeInfo"}}, "text": "<details>\n\n<summary> Serialization & Storage Example </summary>\n\nThe array `[1,2,3,4]` will be serialized into the JSON string `\"[1,2,3,4]\"` in Javascript, and the Borsh byte-stream `[0,0,0,4,1,2,3,4]` in Rust before being stored\n\n</details>\n\n:::tip When to use them\n\nNative collections are useful if you are planning to store smalls amounts of data that need to be accessed all together\n\n:::\n\n:::danger Keep Native Collections Small\n\nAs the native collection grows, deserializing it from memory will cost more and more gas. If the collections grows too large, your contract might expend all the gas trying to read its state, making it fail on each function call\n\n:::\n\n---\n\n## SDK Collections\n\nThe NEAR SDKs expose collections that are optimized for random access of large amounts of data. SDK collections are instantiated using a \"prefix\", which is used as an index to split the data into chunks. This way, SDK collections can defer reading and writing to the store until needed.\n\nThese collections are built to have an interface similar to native collections.\n\n<details>\n\n<summary> Serialization & Storage Example </summary>\n\nThe sdk array `[1,2,3,4]` with prefix `\"p\"` will be stored as the string `\"p\"` in the contract's attribute, and create four entries in the contract's storage: `p-0:1`, `p-1:2`...\n\n</details>\n\n\n:::tip when to use them\n\nSDK collections are useful when you are planning to store large amounts of data that do not need to be accessed all together\n\n:::\n\n<hr class=\"subsection\" />\n\n### Exposed Collections\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n| SDK Collection | Native Equivalent | Description                                                                                                                                                                                      |\n|----------------|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `Vector`       | `Array`           | A growable array type. The values are sharded in memory and can be used for iterable and indexable values that are dynamically sized.                                                            |\n| `LookupSet`    | `Set`             | A set, which is similar to `LookupMap` but without storing values, can be used for checking the unique existence of values.", "mimetype": "text/plain", "start_char_idx": 1635, "end_char_idx": 4100, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "25fe93fe-4b10-4680-8bc3-42016de9675e": {"__data__": {"id_": "25fe93fe-4b10-4680-8bc3-42016de9675e", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "880fbdc7-8413-40d9-beff-fd0abab4aeb2", "node_type": "1", "metadata": {}, "hash": "3bc1098abf2c4c3c93deb04171fd54f9e997986ed28354184ea83527ace565d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5b888102-b5b1-4543-b20a-ed55eb8a42fe", "node_type": "1", "metadata": {}, "hash": "4b1b7fa8d99537787a944507b9bd43c7d126c943646041f5e89a62fc71b96c95", "class_name": "RelatedNodeInfo"}}, "text": "This structure is not iterable and can only be used for lookups.     |\n| `UnorderedSet` | `Set`             | An iterable equivalent of `LookupSet` which stores additional metadata for the elements contained in the set.                                                                                    |\n| `LookupMap`    | `Map`             | This structure behaves as a thin wrapper around the key-value storage available to contracts. This structure does not contain any metadata about the elements in the map, so it is not iterable. |\n| `UnorderedMap` | `Map`             | Similar to `LookupMap`, except that it stores additional data to be able to iterate through elements in the data structure.                                                                      |\n\n</TabItem>\n\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n| SDK collection                                | `std`&nbsp;equivalent             | Description                                                                                                                                                                                       |\n|-----------------------------------------------|-----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `store::Vector<T>`                            | `Vec<T>`                          | A growable array type. The values are sharded in memory and can be used for iterable and indexable values that are dynamically sized.                                                             |\n| <code>store::LookupMap`<K,&nbsp;V>`</code>    | <code>HashMap`<K,&nbsp;V>`</code> | This structure behaves as a thin wrapper around the key-value storage available to contracts. This structure does not contairn any metadata about the elements in the map, so it is not iterable. |\n| <code>store::IterableMap`<K,&nbsp;V>`</code>  | <code>HashMap`<K,&nbsp;V>`</code> | Similar to `LookupMap`, except that it stores additional data to be able to iterate through elements in the data structure.                                                                       |\n| <code>store::UnorderedMap`<K,&nbsp;V>`</code> | <code>HashMap`<K,&nbsp;V>`</code> | Similar to `LookupMap`, except that it stores additional data to be able to iterate through elements in the data structure.                                                                       |\n| `store::LookupSet<T>`                         | `HashSet<T>`                      | A set, which is similar to `LookupMap` but without storing values, can be used for checking the unique existence of values. This structure is not iterable and can only be used for lookups.", "mimetype": "text/plain", "start_char_idx": 4101, "end_char_idx": 6892, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5b888102-b5b1-4543-b20a-ed55eb8a42fe": {"__data__": {"id_": "5b888102-b5b1-4543-b20a-ed55eb8a42fe", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "25fe93fe-4b10-4680-8bc3-42016de9675e", "node_type": "1", "metadata": {}, "hash": "0bb3055483ddb2680bc556d92b74f6fc85862b847b583ac1893b976bc36b7203", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b505d21-15dc-47bb-9d38-fc303801281f", "node_type": "1", "metadata": {}, "hash": "5803ec5a08e7edacc75a8e51da75d453a91177ee570e06a64e4972f7f6de3404", "class_name": "RelatedNodeInfo"}}, "text": "|\n| `store::IterableSet<T>`                       | `HashSet<T>`                      | An iterable equivalent of `LookupSet` which stores additional metadata for the elements contained in the set.                                                                                     |\n| `store::UnorderedSet<T>`                      | `HashSet<T>`                      | An iterable equivalent of `LookupSet` which stores additional metadata for the elements contained in the set.                                                                                     |\n\n</TabItem>\n\n<TabItem value=\"rust-legacy\" label=\"\ud83e\udd80 Rust (legacy)\">\n\n:::info Note\n\nThe `near_sdk::collections` is now deprecated in favor of `near_sdk::store`. To use `near_sdk::collections` you will have to use the [`legacy` feature](https://github.com/near-examples/storage-examples/blob/2a138a6e8915e08ce76718add3e36c04c2ea2fbb/collections-rs/legacy/Cargo.toml#L11).\n\n:::\n\n| SDK collection                                     | `std`&nbsp;equivalent              | Description                                                                                                                                                                                                                                        |\n|----------------------------------------------------|------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `collections::Vector<T>`                            | `Vec<T>`                           | A growable array type. The values are sharded in memory and can be used for iterable and indexable values that are dynamically sized.                                                                                                              |\n| <code>collections::LookupMap`<K,&nbsp;V>`</code>    | <code>HashMap`<K,&nbsp;V>`</code>  | This structure behaves as a thin wrapper around the key-value storage available to contracts. This structure does not contairn any metadata about the elements in the map, so it is not iterable.                                                  |\n| <code>collections::UnorderedMap`<K,&nbsp;V>`</code> | <code>HashMap`<K,&nbsp;V>`</code>  | Similar to `LookupMap`, except that it stores additional data to be able to iterate through elements in the data structure.                                                                                                                        |\n| <code>collections::TreeMap`<K,&nbsp;V>`</code>      | <code>BTreeMap`<K,&nbsp;V>`</code> | An ordered equivalent of `UnorderedMap`. The underlying implementation is based on an [AVL tree](https://en.wikipedia.org/wiki/AVL_tree).", "mimetype": "text/plain", "start_char_idx": 6898, "end_char_idx": 9757, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b505d21-15dc-47bb-9d38-fc303801281f": {"__data__": {"id_": "9b505d21-15dc-47bb-9d38-fc303801281f", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5b888102-b5b1-4543-b20a-ed55eb8a42fe", "node_type": "1", "metadata": {}, "hash": "4b1b7fa8d99537787a944507b9bd43c7d126c943646041f5e89a62fc71b96c95", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "74e8f08e-9305-4cd2-92e1-a2068429210a", "node_type": "1", "metadata": {}, "hash": "42033b7ef5f216a50dd1f5a6d185fe86e56ba000e11d8cee2cbeae409c4f3392", "class_name": "RelatedNodeInfo"}}, "text": "This structure should be used when a consistent order is needed or accessing the min/max keys is needed. |\n| `collections::LookupSet<T>`                         | `HashSet<T>`                       | A set, which is similar to `LookupMap` but without storing values, can be used for checking the unique existence of values. This structure is not iterable and can only be used for lookups.                                                       |\n| `collections::UnorderedSet<T>`                      | `HashSet<T>`                       | An iterable equivalent of `LookupSet` which stores additional metadata for the elements contained in the set.                                                                                                                                      |\n| `collections::LazyOption<T>`                       | `Option<T>`                        | Optional value in storage. This value will only be read from storage when interacted with. This value will be `Some<T>` when the value is saved in storage, and `None` if the value at the prefix does not exist.                                  |\n</TabItem>\n\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### Features\n| Type           | Iterable | Clear All Values | Preserves Insertion Order | Range Selection |\n|----------------|:--------:|:----------------:|:-------------------------:|:---------------:|\n| `Vector`       |    \u2705     |        \u2705         |             \u2705             |        \u2705        |\n| `LookupSet`    |          |                  |                           |                 |\n| `UnorderedSet` |    \u2705     |        \u2705         |                           |        \u2705        |\n|", "mimetype": "text/plain", "start_char_idx": 9758, "end_char_idx": 11415, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "74e8f08e-9305-4cd2-92e1-a2068429210a": {"__data__": {"id_": "74e8f08e-9305-4cd2-92e1-a2068429210a", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b505d21-15dc-47bb-9d38-fc303801281f", "node_type": "1", "metadata": {}, "hash": "5803ec5a08e7edacc75a8e51da75d453a91177ee570e06a64e4972f7f6de3404", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e38fd8fe-d65b-400e-897b-c370e73a4e31", "node_type": "1", "metadata": {}, "hash": "5f91f5e5a5240f35f6d2d3d77ab3debc5c70987ebde031767d5ff72bc4c4b3ad", "class_name": "RelatedNodeInfo"}}, "text": "`IterableSet`  |    \u2705     |        \u2705         |                           |        \u2705        |\n| `LookupMap`    |          |                  |                           |                 |\n| `UnorderedMap` |    \u2705     |        \u2705         |                           |        \u2705        |\n| `IterableMap`  |    \u2705     |        \u2705         |                           |        \u2705        |\n| `TreeMap`      |    \u2705     |        \u2705         |             \u2705             |        \u2705        |\n\n<hr class=\"subsection\" />\n\n### Complexity\n\n| Type           | Access |  Insert  |  Delete  |  Search  | Traverse | Clear |\n|----------------|:------:|:--------:|:--------:|:--------:|:--------:|:-----:|\n| `Vector`       |  O(1)  |  O(1)\\*  | O(1)\\*\\* |", "mimetype": "text/plain", "start_char_idx": 11416, "end_char_idx": 12142, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e38fd8fe-d65b-400e-897b-c370e73a4e31": {"__data__": {"id_": "e38fd8fe-d65b-400e-897b-c370e73a4e31", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "74e8f08e-9305-4cd2-92e1-a2068429210a", "node_type": "1", "metadata": {}, "hash": "42033b7ef5f216a50dd1f5a6d185fe86e56ba000e11d8cee2cbeae409c4f3392", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90c2fec4-3b52-468b-9e09-7222d3676d66", "node_type": "1", "metadata": {}, "hash": "9bedcbefa1243f812f7105986ee2ab167286669c05bfa05c96988371df6feeb6", "class_name": "RelatedNodeInfo"}}, "text": "O(n)   |   O(n)   | O(n)  |\n| `LookupSet`    |  O(1)  |   O(1)   |   O(1)   |   O(1)   |   N/A    |  N/A  |\n| `UnorderedSet` |  O(1)  |   O(1)   |   O(1)   |   O(1)   |   O(n)   | O(n)  |\n| `IterableSet`  |  O(1)  |   O(1)   |   O(1)   |   O(1)   |   O(n)   | O(n)  |\n| `LookupMap`    |  O(1)  |   O(1)   |   O(1)   |   O(1)   |   N/A    |  N/A  |\n| `IterableMap`  |  O(1)  |   O(1)   |   O(1)   |   O(1)   |   O(n)   | O(n)  |\n| `TreeMap`      |  O(1)  | O(log n) | O(log n) | O(log n) |   O(n)   | O(n)  |\n\n_\\* - to insert at the end of the vector using `push_back` (or `push_front` for deque)_\n_\\*\\* - to delete from the end of the vector using `pop` (or `pop_front` for deque), or delete using `swap_remove` which swaps the element with the last element of the vector and then removes it._\n\n---\n\n## SDK Collections Cookbook\n\nLet's see how to use the SDK collections in practice\n\n<hr class=\"subsection\" />\n\n### Instantiation\n\nAll structures need to be initialized using a **unique `prefix`**,", "mimetype": "text/plain", "start_char_idx": 12145, "end_char_idx": 13140, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90c2fec4-3b52-468b-9e09-7222d3676d66": {"__data__": {"id_": "90c2fec4-3b52-468b-9e09-7222d3676d66", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e38fd8fe-d65b-400e-897b-c370e73a4e31", "node_type": "1", "metadata": {}, "hash": "5f91f5e5a5240f35f6d2d3d77ab3debc5c70987ebde031767d5ff72bc4c4b3ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4bcfed2-5f52-41a4-8ad7-ede8e8683871", "node_type": "1", "metadata": {}, "hash": "abd40c73998e81b5d7e9822387551e8fc7637429e2317d4a466594a17ee409b3", "class_name": "RelatedNodeInfo"}}, "text": "which will be used to index the collection's values in the account's state\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    \n    <Github fname=\"contract.ts\" language=\"js\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n          start=\"6\" end=\"21\" />\n\n:::tip\n\nDo not forget to use the `schema` to define how your contract's state is structured\n\n:::\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"lib.rs\" language=\"rust\" \n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/lib.rs\"\n          start=\"24\" end=\"47\"/>\n\n  :::tip\n\n  Notice how we use `enums` to ensure all collections have a different prefix. Another advantage of using `enums` is that they are serialized into a single `byte` prefix. \n\n  :::\n\n  </TabItem>\n\n  <TabItem value=\"rust-legacy\" label=\"\ud83e\udd80 Rust (legacy)\">\n    <Github fname=\"lib.rs\" language=\"rust\" \n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/legacy/src/lib.rs\" start=\"33\" end=\"62\"/>\n\n  :::tip\n\n  Notice how we use `enums` to ensure all collections have a different prefix. Another advantage of using `enums` is that they are serialized into a single `byte` prefix. \n\n  :::\n\n  </TabItem>\n\n</Tabs>\n\n:::danger\n\nBe careful of not using the same prefix in two collections, otherwise, their storage space will collide, and you might overwrite information from one collection when writing in the other\n\n:::\n\n<hr className=\"subsection\" />\n\n### Vector\n\nImplements a [vector/array](https://en.wikipedia.org/wiki/Array_data_structure) which persists in the contract's storage. Please refer to the Rust and JS SDK's for a full reference on their interfaces.", "mimetype": "text/plain", "start_char_idx": 13141, "end_char_idx": 14915, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4bcfed2-5f52-41a4-8ad7-ede8e8683871": {"__data__": {"id_": "f4bcfed2-5f52-41a4-8ad7-ede8e8683871", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90c2fec4-3b52-468b-9e09-7222d3676d66", "node_type": "1", "metadata": {}, "hash": "9bedcbefa1243f812f7105986ee2ab167286669c05bfa05c96988371df6feeb6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aba05a1e-e4e4-421b-9cfe-a02985e1e42e", "node_type": "1", "metadata": {}, "hash": "ef3df44d359c3f8ba0d39f4de66bf616a1e7e87f3b89b02aba0fc3c5c8a9c84a", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    <Github fname=\"contract.ts\" language=\"js\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n            start=\"34\" end=\"58\" />\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"vector.rs\" language=\"rust\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/vector.rs\" start=\"4\" end=\"29\"/>\n  </TabItem>\n  <TabItem value=\"rust-legacy\" label=\"\ud83e\udd80 Rust (legacy)\">\n    <Github fname=\"vector.rs\" language=\"rust\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/legacy/src/vector.rs\" start=\"6\" end=\"31\"/>\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### LookupMap\n\nImplements a [map/dictionary](https://en.wikipedia.org/wiki/Associative_array) which persists in the contract's storage. Please refer to the Rust and JS SDK's for a full reference on their interfaces.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    <Github fname=\"contract.ts\" language=\"js\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n          start=\"97\" end=\"116\" />\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"lookup_map.rs\" language=\"rust\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/lookup_map.rs\" start=\"4\" end=\"22\"/>\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### UnorderedMap / IterableMap\n\nImplements a [map/dictionary](https://en.wikipedia.org/wiki/Associative_array) which persists in the contract's storage. Please refer to the Rust and JS SDK's for a full reference on their interfaces.", "mimetype": "text/plain", "start_char_idx": 14917, "end_char_idx": 16713, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aba05a1e-e4e4-421b-9cfe-a02985e1e42e": {"__data__": {"id_": "aba05a1e-e4e4-421b-9cfe-a02985e1e42e", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4bcfed2-5f52-41a4-8ad7-ede8e8683871", "node_type": "1", "metadata": {}, "hash": "abd40c73998e81b5d7e9822387551e8fc7637429e2317d4a466594a17ee409b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ab832f2e-1547-4687-b38b-93c03b2b229b", "node_type": "1", "metadata": {}, "hash": "16ea08ed715794e68f09c2140c04a5966495c673487e0f7cd9326ec387900424", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    <Github fname=\"contract.ts\" language=\"js\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n          start=\"118\" end=\"137\" />\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"iterable_map.rs\" language=\"rust\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/iterable_map.rs\" start=\"4\" end=\"29\"/>\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### LookupSet\n\nImplements a [set](https://en.wikipedia.org/wiki/Set_(abstract_data_type)) which persists in the contract's storage. Please refer to the Rust and JS SDK's for a full reference on their interfaces.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    <Github fname=\"contract.ts\" language=\"js\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n          start=\"60\" end=\"74\" />\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n      <Github fname=\"lookup_set.rs\" language=\"rust\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/lookup_set.rs\" start=\"4\" end=\"18\"/>\n  </TabItem>\n\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### UnorderedSet / IterableSet\n\nImplements a [map/dictionary](https://en.wikipedia.org/wiki/Associative_array) which persists in the contract's storage. Please refer to the Rust and JS SDK's for a full reference on their interfaces.", "mimetype": "text/plain", "start_char_idx": 16715, "end_char_idx": 18269, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ab832f2e-1547-4687-b38b-93c03b2b229b": {"__data__": {"id_": "ab832f2e-1547-4687-b38b-93c03b2b229b", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aba05a1e-e4e4-421b-9cfe-a02985e1e42e", "node_type": "1", "metadata": {}, "hash": "ef3df44d359c3f8ba0d39f4de66bf616a1e7e87f3b89b02aba0fc3c5c8a9c84a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6deb9200-5ce7-4516-9139-4d6fd10ccdc9", "node_type": "1", "metadata": {}, "hash": "c0d44822f9b79f3f1a9b5674b543e4b3bded58e92c92261bee670f49f568b9c0", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    <Github fname=\"contract.ts\" language=\"js\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\"\n          start=\"76\" end=\"95\" />\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"iterable_set.rs\" language=\"rust\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/iterable_set.rs\" start=\"4\" end=\"26\"/>\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Tree\n\nAn ordered equivalent of Map. The underlying implementation is based on an [AVL](https://en.wikipedia.org/wiki/AVL_tree). You should use this structure when you need to: have a consistent order, or access the min/max keys.\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    <Github fname=\"tree.rs\" language=\"rust\"\n          url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/legacy/src/tree.rs\" start=\"6\" end=\"24\"/>\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n### LazyOption (Legacy)\n\nLazyOptions are great to store large values (i.e. a wasm file), since its value will not be read from storage until it is interacted with.\n\nIt acts like an `Option` that can either hold a value or not and also requires a unique prefix (a key in this case)\nlike other persistent collections.\n\nCompared to other collections, `LazyOption` only allows you to initialize the value during initialization.\n\n---\n\n## Nesting Collections\n\nWhen nesting SDK collections, be careful to **use different prefixes** for all collections, including the nested ones.", "mimetype": "text/plain", "start_char_idx": 18271, "end_char_idx": 19921, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6deb9200-5ce7-4516-9139-4d6fd10ccdc9": {"__data__": {"id_": "6deb9200-5ce7-4516-9139-4d6fd10ccdc9", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ab832f2e-1547-4687-b38b-93c03b2b229b", "node_type": "1", "metadata": {}, "hash": "16ea08ed715794e68f09c2140c04a5966495c673487e0f7cd9326ec387900424", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "21cf8d5d-a6f6-4a85-a732-1eb8680fd240", "node_type": "1", "metadata": {}, "hash": "22c6806992da4a6c1180c229d19e7fb6c56e34c6a544c0fb989782fcef2bf7ed", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n    <Github fname=\"nested.ts\" language=\"js\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-js/src/contract.ts\" start=\"140\" end=\"182\"/>\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n    <Github fname=\"nested.ts\" language=\"rust\"\n            url=\"https://github.com/near-examples/storage-examples/blob/main/collections-rs/store/src/nested.rs\" start=\"4\" end=\"30\"/>\n\n  :::tip\n\n  Notice how we use `enums` that take a `String` argument to ensure all collections have a different prefix\n\n  :::\n\n  </TabItem>\n</Tabs>\n\n\n---\n\n## Error prone patterns\n\nBecause the values are not kept in memory and are lazily loaded from storage, it's important to make sure if a collection is replaced or removed, that the storage is cleared. In addition, it is important that if the collection is modified, the collection itself is updated in state because most collections will store some metadata.\n\nSome error-prone patterns to avoid that cannot be restricted at the type level are:\n\n<Tabs>\n<TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```rust\nuse near_sdk::store::UnorderedMap;\n\nlet mut m = UnorderedMap::<u8, String>::new(b\"m\");\nm.insert(1, \"test\".to_string());\nassert_eq!(m.len(), 1);\nassert_eq!(m.get(&1), Some(&\"test\".to_string()));\n\n// Bug 1: Should not replace any collections without clearing state, this will reset any\n// metadata, such as the number of elements, leading to bugs. If you replace the collection\n// with something with a different prefix, it will be functional, but you will lose any\n// previous data and the old values will not be removed from storage.\nm = UnorderedMap::new(b\"m\");\nassert!(m.is_empty());\nassert_eq!(m.get(&1), Some(&\"test\".to_string()));\n\n// Bug 2: Should not use the same prefix as another collection\n// or there will be unexpected side effects.\nlet m2 = UnorderedMap::<u8, String>::new(b\"m\");\nassert!", "mimetype": "text/plain", "start_char_idx": 19923, "end_char_idx": 21861, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "21cf8d5d-a6f6-4a85-a732-1eb8680fd240": {"__data__": {"id_": "21cf8d5d-a6f6-4a85-a732-1eb8680fd240", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6deb9200-5ce7-4516-9139-4d6fd10ccdc9", "node_type": "1", "metadata": {}, "hash": "c0d44822f9b79f3f1a9b5674b543e4b3bded58e92c92261bee670f49f568b9c0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "048b6afe-2206-4ed2-a597-c841a58cb8d8", "node_type": "1", "metadata": {}, "hash": "19e321f9e4d80b090287b5529163a95d7bb48f3768e55cb2c71490d08d4189a8", "class_name": "RelatedNodeInfo"}}, "text": "(m2.is_empty());\nassert_eq!(m2.get(&1), Some(&\"test\".to_string()));\n\n// Bug 3: forgetting to save the collection in storage. When the collection is attached to\n// the contract state (`self` in `#[near]`) this will be done automatically, but if\n// interacting with storage manually or working with nested collections, this is relevant.\nuse near_sdk::store::Vector;\n\n// Simulate roughly what happens during a function call that initializes state.\n{\n    let v = Vector::<u8>::new(b\"v\");\n    near_sdk::env::state_write(&v);\n}\n\n// Simulate what happens during a function call that just modifies the collection\n// but does not store the collection itself.\n{\n    let mut v: Vector<u8> = near_sdk::env::state_read().unwrap();\n    v.push(1);\n    // The bug is here that the collection itself if not written back\n}\n\nlet v: Vector<u8> = near_sdk::env::state_read().unwrap();\n// This will report as if the collection is empty, even though the element exists\nassert!(v.get(0).is_none());\nassert!(\n    near_sdk::env::storage_read(&[b\"v\".as_slice(), &0u32.to_le_bytes()].concat()).is_some()\n);\n\n// Bug 4 (only relevant for `near_sdk::store`): These collections will cache writes as well\n// as reads, and the writes are performed on [`Drop`](https://doc.rust-lang.org/std/ops/trait.Drop.html)\n// so if the collection is kept in static memory or something like `std::mem::forget` is used,\n// the changes will not be persisted.\nuse near_sdk::store::IterableSet;\n\nlet mut m: IterableSet<u8> = IterableSet::new(b\"l\");\nm.insert(1);\nassert!(m.contains(&1));\n\n// This would be the fix, manually flushing the intermediate changes to storage.\n// m.flush();\nstd::mem::forget(m);\n\nm = IterableSet::new(b\"l\");\nassert!", "mimetype": "text/plain", "start_char_idx": 21861, "end_char_idx": 23550, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "048b6afe-2206-4ed2-a597-c841a58cb8d8": {"__data__": {"id_": "048b6afe-2206-4ed2-a597-c841a58cb8d8", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "21cf8d5d-a6f6-4a85-a732-1eb8680fd240", "node_type": "1", "metadata": {}, "hash": "22c6806992da4a6c1180c229d19e7fb6c56e34c6a544c0fb989782fcef2bf7ed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1b1aed04-447e-47ef-a103-45a1b64cd549", "node_type": "1", "metadata": {}, "hash": "06e2523db2a01037a8792118f8685fd0cd40aecf08140f3ee8fb95779db6010f", "class_name": "RelatedNodeInfo"}}, "text": "(!m.contains(&1));\n```\n\n<hr class=\"subsection\" />\n\n### Nesting Errors\n\nBy extension of the error-prone patterns to avoid mentioned in the [collections section](./collections.md#error-prone-patterns), it is important to keep in mind how these bugs can easily be introduced into a contract when using nested collections.\n\nSome issues for more context:\n- https://github.com/near/near-sdk-rs/issues/560\n- https://github.com/near/near-sdk-rs/issues/703\n\nThe following cases are the most commonly encountered bugs that cannot be restricted at the type level (only relevant for `near_sdk::collections`, not `near_sdk::store`):\n\n```rust\nuse near_sdk::borsh::{self, BorshSerialize};\nuse near_sdk::collections::{LookupMap, UnorderedSet};\nuse near_sdk::BorshStorageKey;\n\n#[derive(BorshStorageKey, BorshSerialize)]\npub enum StorageKey {\n    Root,\n    Nested(u8),\n}\n\n// Bug 1: Nested collection is removed without clearing it's own state.\nlet mut root: LookupMap<u8, UnorderedSet<String>> = LookupMap::new(StorageKey::Root);\nlet mut nested = UnorderedSet::new(StorageKey::Nested(1));\nnested.insert(&\"test\".to_string());\nroot.insert(&1, &nested);\n\n// Remove inserted collection without clearing it's sub-state.\nlet mut _removed = root.remove(&1).unwrap();\n\n// This line would fix the bug:\n// _removed.clear();\n\n// This collection will now be in an inconsistent state if an empty UnorderedSet is put\n// in the same entry of `root`.\nroot.insert(&1, &UnorderedSet::new(StorageKey::Nested(1)));\nlet n = root.get(&1).unwrap();\nassert!(n.is_empty());\nassert!(n.contains(&\"test\".to_string()));\n\n// Bug 2: Nested collection is modified without updating the collection itself in the outer collection.\n//\n// This is fixed at the type level in `near_sdk::store` because the values are modified\n// in-place and guarded by regular Rust borrow-checker rules.", "mimetype": "text/plain", "start_char_idx": 23550, "end_char_idx": 25380, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b1aed04-447e-47ef-a103-45a1b64cd549": {"__data__": {"id_": "1b1aed04-447e-47ef-a103-45a1b64cd549", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "048b6afe-2206-4ed2-a597-c841a58cb8d8", "node_type": "1", "metadata": {}, "hash": "19e321f9e4d80b090287b5529163a95d7bb48f3768e55cb2c71490d08d4189a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dbf483e-d146-4726-9c8b-15d2fe44c62e", "node_type": "1", "metadata": {}, "hash": "484eb773b60a02f0b9dabc390ef2160c0e5a77a635aefdd1b0f97d13ae59a3ea", "class_name": "RelatedNodeInfo"}}, "text": "root.insert(&2, &UnorderedSet::new(StorageKey::Nested(2)));\n\nlet mut nested = root.get(&2).unwrap();\nnested.insert(&\"some value\".to_string());\n\n// This line would fix the bug:\n// root.insert(&2, &nested);\n\nlet n = root.get(&2).unwrap();\nassert!(n.is_empty());\nassert!(n.contains(&\"some value\".to_string()));\n```\n\n</TabItem>\n</Tabs>\n\n---\n\n## Pagination\n\nPersistent collections such as `IterableMap/UnorderedMap`, `IterableSet/UnorderedSet` and `Vector` may\ncontain more elements than the amount of gas available to read them all.\nIn order to expose them all through view calls, we can use pagination.\n\n\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n    With JavaScript this can be done using iterators with [`toArray`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Iterator/toArray) and [`slice`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice).\n\n    ```ts\n      /// Returns multiple elements from the `UnorderedMap`.\n      /// - `from_index` is the index to start from.\n      /// - `limit` is the maximum number of elements to return.\n      @view({})\n      get_updates({ from_index, limit }: { from_index: number, limit:number }) {\n        return this.status_updates.toArray().slice(from_index, limit);\n      }\n    ```\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n    With Rust this can be done using iterators with [`Skip`](https://doc.rust-lang.org/std/iter/struct.Skip.html) and [`Take`](https://doc.rust-lang.org/std/iter/struct.Take.html). This will only load elements from storage within the range.\n\n    ```rust\n      #[near(contract_state)]\n      #[derive(PanicOnDefault)]\n      pub struct Contract {\n          pub status_updates: IterableMap<AccountId, String>,\n      }\n\n      #[near]\n      impl Contract {\n          /// Retrieves multiple elements from the `IterableMap`.\n          /// - `from_index` is the index to start from.\n          /// - `limit` is the maximum number of elements to return.", "mimetype": "text/plain", "start_char_idx": 25381, "end_char_idx": 27403, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dbf483e-d146-4726-9c8b-15d2fe44c62e": {"__data__": {"id_": "8dbf483e-d146-4726-9c8b-15d2fe44c62e", "embedding": null, "metadata": {"file_path": "./near_dist/collections.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46", "node_type": "4", "metadata": {}, "hash": "336eccdabe3f50308a1ce345e6e67d9bfea451b57c388dd44cc538ebde09adc3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b1aed04-447e-47ef-a103-45a1b64cd549", "node_type": "1", "metadata": {}, "hash": "06e2523db2a01037a8792118f8685fd0cd40aecf08140f3ee8fb95779db6010f", "class_name": "RelatedNodeInfo"}}, "text": "pub fn get_updates(&self, from_index: usize, limit: usize) -> Vec<(AccountId, String)> {\n              self.status_updates\n                  .iter()\n                  .skip(from_index)\n                  .take(limit)\n                  .collect()\n          }\n      }\n    ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Storage Cost\nYour contract needs to lock a portion of their balance proportional to the amount of data they stored in the blockchain. This means that:\n- If more data is added and the **storage increases \u2191**, then your contract's **balance decreases \u2193**.\n- If data is deleted and the **storage decreases \u2193**, then your contract's **balance increases \u2191**. \n\nCurrently, it cost approximately **1 \u24c3** to store **100kb** of data.\n\n:::info\n\nYou can save on smart contract storage if using NEAR Account IDs by encoding them using base32. Since they consist of `[a-z.-_]` characters with a maximum length of 64 characters, they can be encoded using 5 bits per character, with terminal `\\0`. Going to a size of 65 * 5 = 325 bits from the original (64 + 4) * 8 = 544 bits. This is a 40% reduction in storage costs\n\n:::\n\n:::caution\n\nYour contract will panic if you try to store data but don't have NEAR to cover its storage cost\n\n:::\n\n:::warning\n\nBe mindful of potential [small deposit attacks](../security/storage.md)\n\n:::\n\n---\n\n## Storage Constraints on NEAR\n\nFor storing data on-chain it\u2019s important to keep in mind the following:\n\n- There is a 4mb limit on how much you can upload at once\n\nLet\u2019s say for example, someone wants to put an NFT purely on-chain (rather than IPFS or some other decentralized storage solution) you\u2019ll have almost an unlimited amount of storage but will have to pay 1 $NEAR per 100kb of storage used.\n\nUsers will be limited to 4MB per contract call upload due to MAX_GAS constraints. The maximum amount of gas one can attach to a given functionCall is 300TGas.", "mimetype": "text/plain", "start_char_idx": 27414, "end_char_idx": 29296, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b0325023-1fbb-4932-8d67-dafe7a03de1e": {"__data__": {"id_": "b0325023-1fbb-4932-8d67-dafe7a03de1e", "embedding": null, "metadata": {"file_path": "./near_dist/03-linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "52de68ef-2841-4e50-8110-2cf411412210", "node_type": "4", "metadata": {}, "hash": "df570921242e68547f6acf9cdd5eda2da83d4b86c2eacae3f3341ff00578676a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9b48adbd-4990-4f93-939e-5a1b5525a218", "node_type": "1", "metadata": {}, "hash": "2fa2e75e2cb76d494783382d6eb5eff91ef71d26f7d646522ddb4db661d69e34", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 4\nsidebar_label: \"Linkdrop contract\"\ntitle: \"Introducing the linkdrop contract we can use\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport createMainnetAccount from '/docs/assets/crosswords/create-mainnet-account.png';\nimport createTestnetAccount from '/docs/assets/crosswords/create-testnet-wallet-account.png';\n\n# The linkdrop contract\n\nWe're going to take a small detour to talk about the linkdrop smart contract.  It's best that we first understand this contract and its purpose, then discuss calling a method on this contract.\n\n[The linkdrop contract](https://github.com/near/near-linkdrop) is deployed to the accounts `testnet` and `near`, which are known as the top-level accounts of the testnet and mainnet network, respectively. (Anyone can create a linkdrop-style contract elsewhere, but the one shown here is the main one that others are patterned off of.)\n\n## Testnet\n\nThere\u2019s nothing special about testnet accounts; there is no real-world cost to you as a developer when creating testnet accounts, so feel free to create or delete at your convenience.\n\nWhen a user signs up for a testnet account on NEAR Wallet, they'll see this:\n\n<img src={createTestnetAccount} width=\"400\" />\n\nLet's discuss how this testnet account gets created.\n\nNotice the new account will end in `.testnet`. This is because the account `testnet` will create a subaccount (like we learned about [earlier in this tutorial](../01-basics/02-add-functions-call.md#create-a-subaccount)) called `vacant-name.testnet`.\n\nThere are two ways to create this subaccount:\n\n1. Use a full-access key for the account `testnet` to sign a transaction with the `CreateAccount` Action.\n2. In a smart contract deployed to the `testnet` account, call the `CreateAccount` Action, which is an async method that returns a Promise.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1899, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9b48adbd-4990-4f93-939e-5a1b5525a218": {"__data__": {"id_": "9b48adbd-4990-4f93-939e-5a1b5525a218", "embedding": null, "metadata": {"file_path": "./near_dist/03-linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "52de68ef-2841-4e50-8110-2cf411412210", "node_type": "4", "metadata": {}, "hash": "df570921242e68547f6acf9cdd5eda2da83d4b86c2eacae3f3341ff00578676a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b0325023-1fbb-4932-8d67-dafe7a03de1e", "node_type": "1", "metadata": {}, "hash": "771419ed89aace62048f85c000f0e46b6fcc63c09ba81f313a51813bb1949ad9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9548e629-7c81-4155-acf5-5229c83e1591", "node_type": "1", "metadata": {}, "hash": "7da98c800b3f34099ff674f22f92627de2768826fc15be2b8cff863047edda68", "class_name": "RelatedNodeInfo"}}, "text": "(More info about writing a [`CreateAccount` Promise](../../../2.build/2.smart-contracts/anatomy/actions.md#create-a-sub-account))\n\n(In the example below that uses NEAR CLI to create a new account, it's calling `CreateAccount` on the linkdrop contract that is deployed to the top level \"near\" account on mainnet.)\n\n\n## Mainnet\n\nOn mainnet, the account `near` also has the linkdrop contract deployed to it.\n\nUsing NEAR CLI, a person can create a `mainnet` account by calling the linkdrop contract, like shown below:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call near create_account '{\"new_account_id\": \"aloha.near\", \"new_public_key\": \"3cQ...tAT\"}' --gas 300000000000000 --deposit 15 --accountId mike.near --networkId mainnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction near create_account json-args '{\"new_account_id\": \"aloha.near\", \"new_public_key\": \"3cQ...tAT\"}' prepaid-gas '300.0 Tgas' attached-deposit '15 NEAR' sign-as mike.near network-config mainnet sign-with-keychain\n    ```\n  </TabItem>\n</Tabs>\n\nThe above command calls the `create_account` method on the account `near`, and would create `aloha.near` **if it's available**, funding it with 15 \u24c3.\n\nWe'll want to write a smart contract that calls that same method. However, things get interesting because it's possible `aloha.near` is already taken, so we'll need to learn how to handle that.\n\n## A simple callback\n\n### The `create_account` method\n\nHere, we'll show the implementation of the `create_account` method. Note the `#[payable]` macro, which allows this function to accept an attached deposit. (Remember in the CLI command we were attaching 15 \u24c3.)", "mimetype": "text/plain", "start_char_idx": 1900, "end_char_idx": 3632, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9548e629-7c81-4155-acf5-5229c83e1591": {"__data__": {"id_": "9548e629-7c81-4155-acf5-5229c83e1591", "embedding": null, "metadata": {"file_path": "./near_dist/03-linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "52de68ef-2841-4e50-8110-2cf411412210", "node_type": "4", "metadata": {}, "hash": "df570921242e68547f6acf9cdd5eda2da83d4b86c2eacae3f3341ff00578676a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9b48adbd-4990-4f93-939e-5a1b5525a218", "node_type": "1", "metadata": {}, "hash": "2fa2e75e2cb76d494783382d6eb5eff91ef71d26f7d646522ddb4db661d69e34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a44c0960-e966-48b6-82b8-51ad44ab343a", "node_type": "1", "metadata": {}, "hash": "1b85610eb9d595f1888636ede83bbe9fc654c59b58450cce5d27b600e4940ee0", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"128\" end=\"152\" url=\"https://github.com/near/near-linkdrop/blob/master/src/lib.rs\" />\n\nThe most important part of the snippet above is around the middle where there's:\n\n```rust\nPromise::new(...)\n    ...\n    .then(\n        Self::ext(env::current_account_id())\n            .on_account_created(...)\n    )\n```\n\nThis translates to, \"we're going to attempt to perform an Action, and when we're done, please call myself at the method `on_account_created` so we can see how that went.\"\n\n:::caution This doesn't work\n\nNot infrequently, developers will attempt to do this in a smart contract:\n\n```rust\nlet creation_result = Promise::new(\"aloha.mike.near\")\n  .create_account();\n\n// Check creation_result variable (can't do it!)\nif creation_result {...}\n\n```\n\nIn other programming languages promises might work like this, but we must use callbacks instead.\n:::\n\n### The callback\n\nNow let's look at the callback:\n\n<Github language=\"rust\" start=\"199\" end=\"212\" url=\"https://github.com/near/near-linkdrop/blob/master/src/lib.rs\" />\n\nThis calls the private helper method `is_promise_success`, which basically checks to see that there was only one promise result, because we only attempted one Promise:\n\n<Github language=\"rust\" start=\"35\" end=\"45\" url=\"https://github.com/near/near-linkdrop/blob/master/src/lib.rs\" />\n\nNote that the callback returns a boolean. This means when we modify our crossword puzzle to call the linkdrop contract on `testnet`, we'll be able to determine if the account creation succeeded or failed.\n\nAnd that's it! Now we've seen a method and a callback in action for a simple contract.\n\n:::tip This is important\nUnderstanding cross-contract calls and callbacks is quite important in smart contract development.\n\nSince NEAR's transactions are asynchronous, the use of callbacks may be a new paradigm shift for smart contract developers from other ecosystems.\n\nFeel free to dig into the linkdrop contract and play with the ideas presented in this section.\n\nThere are two additional examples that are helpful to look at:\n1.", "mimetype": "text/plain", "start_char_idx": 3634, "end_char_idx": 5693, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a44c0960-e966-48b6-82b8-51ad44ab343a": {"__data__": {"id_": "a44c0960-e966-48b6-82b8-51ad44ab343a", "embedding": null, "metadata": {"file_path": "./near_dist/03-linkdrop.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "52de68ef-2841-4e50-8110-2cf411412210", "node_type": "4", "metadata": {}, "hash": "df570921242e68547f6acf9cdd5eda2da83d4b86c2eacae3f3341ff00578676a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9548e629-7c81-4155-acf5-5229c83e1591", "node_type": "1", "metadata": {}, "hash": "7da98c800b3f34099ff674f22f92627de2768826fc15be2b8cff863047edda68", "class_name": "RelatedNodeInfo"}}, "text": "[High-level cross-contract calls](https://github.com/near/near-sdk-rs/blob/master/examples/cross-contract-calls/high-level/src/lib.rs) \u2014 this is similar what we've seen in the linkdrop contract.\n2. [Low-level cross-contract calls](https://github.com/near/near-sdk-rs/blob/master/examples/cross-contract-calls/low-level/src/lib.rs) \u2014 a different approach where you don't use the traits we mentioned.\n:::\n\n---\n\nNext we'll modify the crossword puzzle contract to check for the signer's public key, which is how we now determine if they solved the puzzle correctly.", "mimetype": "text/plain", "start_char_idx": 5694, "end_char_idx": 6255, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f552deb9-310e-4793-ad7e-365bc3571b62": {"__data__": {"id_": "f552deb9-310e-4793-ad7e-365bc3571b62", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "adf43604-1969-4ea6-afc2-96dee021d606", "node_type": "1", "metadata": {}, "hash": "0e64521ae85eb08b3fda772e193c082b97a66da72044b41f8d2b145e30314697", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: guest-book\ntitle: Guest Book\n---\n\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nOur Guest Book example is a simple app composed by two main components:\n\n1. A smart contract that stores messages from users, allowing to attach money to them.\n2. A simple web-based frontend that displays the last 10 messages posted.\n\n![img](/docs/assets/examples/guest-book.png)\n\n---\n\n## Obtaining the Guest book Example\n\nYou have two options to start the Guest book Example.\n\n1. You can use the app through `GitHub Codespaces`, which will open a web-based interactive environment.\n2. Clone the repository locally and use it from your computer.\n\n| Codespaces                                                                                                                        | Clone locally                                             |\n| --------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- |\n| [![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/near-examples/guest-book-examples) | \ud83c\udf10 `https://github.com/near-examples/guest-book-examples` |\n\n---\n\n## Structure of the Example\n\nThe example is divided in two main components:\n\n1. The smart contract, available in two flavors: Rust and JavaScript\n2. The frontend, that interacts with an already deployed contract.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1532, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "adf43604-1969-4ea6-afc2-96dee021d606": {"__data__": {"id_": "adf43604-1969-4ea6-afc2-96dee021d606", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f552deb9-310e-4793-ad7e-365bc3571b62", "node_type": "1", "metadata": {}, "hash": "6205e124c641486991a38ba56ced902be3c0b244a28588aad11fd93076a5f123", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c67d5d35-335d-4c9f-a353-0d24bdb73860", "node_type": "1", "metadata": {}, "hash": "6ff15d1b2e1f7399b8f664c8234539e4fd88f6bbf51ba394c410fb90abbd5dd8", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"code-tabs\">\n\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n\u250c\u2500\u2500 sandbox-ts # sandbox testing\n\u2502    \u251c\u2500\u2500 src\n\u2502    \u2502    \u2514\u2500\u2500 main.ava.ts\n\u2502    \u251c\u2500\u2500 ava.config.cjs\n\u2502    \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 contract.ts\n\u2502    \u2514\u2500\u2500 model.ts\n\u251c\u2500\u2500 package.json # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tsconfig.json # test script\n```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n\u250c\u2500\u2500 tests # workspaces testing\n\u2502    \u251c\u2500\u2500 workspaces.rs\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u2514\u2500\u2500 lib.rs\n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Frontend\n\nThe guest book example includes a frontend that interacts with an already deployed smart contract, allowing user to sign a message.\n\n<hr class=\"subsection\" />\n\n### Running the Frontend\n\nTo start the frontend you will need to install the dependencies and start the server.\n\n```bash\ncd frontend\nyarn\nyarn dev\n```\n\nGo ahead and login with your NEAR account. If you don't have one, you will be able to create one in the moment. Once logged in, you will be able to sign a message in the guest book. You can further send some money alongside your message. If you attach more than 0.01\u24c3 then your message will be marked as \"premium\".\n\n<hr class=\"subsection\" />\n\n### Understanding the Frontend\n\nThe frontend is a [Next.JS](https://nextjs.org/) project generated by [create-near-app](https://github.com/near/create-near-app). Check `_app.js` and `index.js` to understand how components are displayed and interacting with the contract.", "mimetype": "text/plain", "start_char_idx": 1534, "end_char_idx": 3085, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c67d5d35-335d-4c9f-a353-0d24bdb73860": {"__data__": {"id_": "c67d5d35-335d-4c9f-a353-0d24bdb73860", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "adf43604-1969-4ea6-afc2-96dee021d606", "node_type": "1", "metadata": {}, "hash": "0e64521ae85eb08b3fda772e193c082b97a66da72044b41f8d2b145e30314697", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42fee34b-0f57-4e4b-b933-57c91876f56d", "node_type": "1", "metadata": {}, "hash": "b8b6ee504e671ea4b5003adc0e486324d8caba6ff61df4be4a5540e6abf3bbc0", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"js\" language=\"js\">\n  <Github fname=\"_app.js\" \n          url=\"https://github.com/near-examples/guest-book-examples/blob/main/frontend/src/pages/_app.js\"/>\n  <Github fname=\"index.js\" \n          url=\"https://github.com/near-examples/guest-book-examples/blob/main/frontend/src/pages/index.js\"/>\n</Language>\n\n---\n\n## Smart Contract\n\nThe contract presents 3 methods: `add_message`, `get_message` and `total_messages`.\n\n<CodeTabs>\n  <Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/guest-book-examples/blob/main/contract-ts/src/contract.ts\"\n            start=\"4\" end=\"27\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/guest-book-examples/blob/main/contract-rs/src/lib.rs\"\n            start=\"31\" end=\"64\" />\n  </Language>\n  \n</CodeTabs>\n\n<hr class=\"subsection\" />\n\n### Testing the Contract\n\nThe contract readily includes a set of unit and sandbox testing to validate its functionality. To execute the tests, run the following commands:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\ncd contract-ts\nyarn\nyarn test\n```\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n  \n  ```bash\n  cd contract-rs\n  cargo test\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n:::tip\nThe `integration tests` use a sandbox to create NEAR users and simulate interactions with the contract.\n:::\n\n<hr class=\"subsection\" />\n\n### Deploying the Contract to the NEAR network\n\nIn order to deploy the contract you will need to create a NEAR account.", "mimetype": "text/plain", "start_char_idx": 3087, "end_char_idx": 4695, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42fee34b-0f57-4e4b-b933-57c91876f56d": {"__data__": {"id_": "42fee34b-0f57-4e4b-b933-57c91876f56d", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c67d5d35-335d-4c9f-a353-0d24bdb73860", "node_type": "1", "metadata": {}, "hash": "6ff15d1b2e1f7399b8f664c8234539e4fd88f6bbf51ba394c410fb90abbd5dd8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a", "node_type": "1", "metadata": {}, "hash": "505eed7b809cbed63fa857b14d1be213339bc8f08c47ce1703857d3b1c8d6316", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nGo into the directory containing the smart contract (`cd contract-ts` or `cd contract-rs`), build and deploy it:\n\n```bash\ncargo near build\n\ncargo near deploy <accountId>\n```\n\n:::tip\nTo interact with your contract from the [frontend](#frontend), simply replace the variable `CONTRACT_NAME` in the `index.js` file.\n:::\n\n<hr class=\"subsection\" />\n\n### CLI: Interacting with the Contract\n\nTo interact with the contract through the console, you can use the following commands.", "mimetype": "text/plain", "start_char_idx": 4697, "end_char_idx": 5641, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a": {"__data__": {"id_": "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "42fee34b-0f57-4e4b-b933-57c91876f56d", "node_type": "1", "metadata": {}, "hash": "b8b6ee504e671ea4b5003adc0e486324d8caba6ff61df4be4a5540e6abf3bbc0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af0da971-9012-4fd9-8b4a-6dd30c57fb27", "node_type": "1", "metadata": {}, "hash": "d60d0447f5f2460fab63a0dc3a1d8757e5bcddad8eedc83ab3e94dcba1794b2d", "class_name": "RelatedNodeInfo"}}, "text": "#### Get messages\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view guestbook.near-examples.testnet get_messages '{\"from_index\": \"0\",\"limit\": \"10\"}'\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only guestbook.near-examples.testnet get_messages json-args '{\"from_index\": \"0\",\"limit\": \"10\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Get total number of messages\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near view guestbook.near-examples.testnet total_messages\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near contract call-function as-read-only guestbook.near-examples.testnet total_messages json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n#### Add a message\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  # Required a text\n  # Optional deposit to make the message premium\n  near call guestbook.near-examples.testnet add_message '{\"text\":\"Hello Near\"}' --accountId <accountId> --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Replace <accountId> with your account ID\n  # Required a text\n  # Optional deposit to make the message premium\n  near contract call-function as-transaction guestbook.near-examples.testnet add_message json-args '{\"text\":\"Hello Near\"}' prepaid-gas '30.0 Tgas' attached-deposit '0.1 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n<hr class=\"subsection\" />\n\n:::tip\nIf you're using your own account, replace `guestbook.near-examples.testnet` with your `accountId`.", "mimetype": "text/plain", "start_char_idx": 5643, "end_char_idx": 7456, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af0da971-9012-4fd9-8b4a-6dd30c57fb27": {"__data__": {"id_": "af0da971-9012-4fd9-8b4a-6dd30c57fb27", "embedding": null, "metadata": {"file_path": "./near_dist/guest-book.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e", "node_type": "4", "metadata": {}, "hash": "bee5db26405f938236bd80b9da965f67929c9e9dc48a260849f8a6cd106cdc6f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a", "node_type": "1", "metadata": {}, "hash": "505eed7b809cbed63fa857b14d1be213339bc8f08c47ce1703857d3b1c8d6316", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Moving Forward\n\nA nice way to learn is by trying to expand a contract. You can modify the guestbook example to incorporate a feature where users can give likes to messages. Additionally, implement a method to toggle the like.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 7457, "end_char_idx": 7873, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "025068da-5304-436d-a2a5-38e9b8f5c44e": {"__data__": {"id_": "025068da-5304-436d-a2a5-38e9b8f5c44e", "embedding": null, "metadata": {"file_path": "./near_dist/blog.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "24672da3-afbe-4b08-981c-3ae455b4d1db", "node_type": "4", "metadata": {}, "hash": "05e08aa80afb413b7c68252c35b4d865b2147308aad6eee7fca0c52f0bd9fdaf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c13dc6e6-cdf6-490f-8ab7-178a39195adb", "node_type": "1", "metadata": {}, "hash": "7410351048bdbde92e42c221b4f5c58ffb7b2b0f2bc84607ef9bc090be09a79c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: blog\ntitle: Onchain Blog\n---\n\n# Blogchain\n\n[![Demo](https://img.shields.io/badge/Demo-Visit%20Demo-brightgreen)](https://blogchain.mintbase.xyz/)\n[![Deploy](https://img.shields.io/badge/Deploy-on%20Vercel-blue)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FMintbase%2Ftemplates%2Ftree%2Fmain%2Fblogchain)\n\nBlogchain makes your content unstoppable. Transform your blogs into smart contracts and posts into NFTs.\n\n![img](https://i.imgur.com/oAVyr9o.png)\n\n:::tip Mintbase Templates\nThis is part of the [Mintbase Templates](https://templates.mintbase.xyz/), a collection of templates that you can use to scaffold your own project\n:::\n\n---\n\n## Project Walkthrough\n\nWithin the framework of blogchain, every blog manifests as an nft contract deployed from the Mintbase contract factory, while each individual blog post is uniquely represented as a non-fungible token (NFT).\n\n*NOTE: As a standard on Mintbase as we use the latest versions of Next.js we recommend using pnpm, but the package manager is up to your personal choice.*\n\n---\n\n## Run the project\n\n```bash\n# install\npnpm i\n#run project\npnpm run dev\n```\n\n---\n\n## Create a Blog (deploy contract)\n\n### Step 1: check if the contract (blog) name already exists\n\nUsing [@mintbase-js/data](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/data/api/checkstorename) checkStoreName method we can check if the store already exists.\n\n```typescript\nconst { data: checkStore } = await checkStoreName(\n  data.name,\n  NEAR_NETWORKS.TESTNET\n);\n\nif (checkStore?.nft_contracts.length === 0) {\n  (...)\n}\n```\n\n<hr class=\"subsection\" />\n\n### Step 2: if contract name doesn't exist execute the deploy contract action with the instantiated wallet\n\nCreate deploy contract args using [mintbase-js/sdk](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/sdk/deploycontract) deployContract method.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1848, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c13dc6e6-cdf6-490f-8ab7-178a39195adb": {"__data__": {"id_": "c13dc6e6-cdf6-490f-8ab7-178a39195adb", "embedding": null, "metadata": {"file_path": "./near_dist/blog.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "24672da3-afbe-4b08-981c-3ae455b4d1db", "node_type": "4", "metadata": {}, "hash": "05e08aa80afb413b7c68252c35b4d865b2147308aad6eee7fca0c52f0bd9fdaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "025068da-5304-436d-a2a5-38e9b8f5c44e", "node_type": "1", "metadata": {}, "hash": "0abfb43e40f10bd684b2aabcc6e36b7dc8c5624f09c7f0b2f6387278537f3023", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4c79da17-4608-4041-9f49-a5bb88876ed8", "node_type": "1", "metadata": {}, "hash": "ae7c6a48cffb163b7207468cdc17d99fecaafc7d8b0aa139ffe59576a56be5eb", "class_name": "RelatedNodeInfo"}}, "text": "This will deploy an NFT contract from the [mintbase contract factory](https://github.com/Mintbase/mb-contracts/tree/main/mb-factory-v1)\n\n```typescript\nconst wallet = await selector.wallet();\n\nconst deployArgs = deployContract({\n  name: data.name,\n  ownerId: activeAccountId,\n  factoryContractId: MINTBASE_CONTRACTS.testnet,\n  metadata: {\n    symbol: \"\",\n  },\n});\n```\n\nWe can then execute the deploy contract by passing in the wallet. If you wan't to learn about wallet connection check out the [wallet starter template](https://templates.mintbase.xyz/templates/starter-next)\n\n```typescript\n  await execute({ wallet }, deployArgs);\n```\n\n---\n\n## Create a Blog Post (mint an NFT)\n\n### Step 1: call storage method to upload file inserted by the user to arweave\n\nUsing [@mintbase-js/storage](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/storage#uploadreference-referenceobject-referenceobject-arweaveresponse) uploadReference method we upload the nft image to arweave.\n\n```typescript\nconst metadata = {\n  title: data.title,\n  media: data.media,\n};\nconst referenceJson = await uploadReference(metadata);\nconst reference = referenceJson.id;\n```\n\n<hr class=\"subsection\" />\n\n### Step 2: mint the nft in the contract (blog)\n\nCreate mint args using [mintbase-js/sdk](https://docs.mintbase.xyz/dev/mintbase-sdk-ref/sdk/mint) mint method.\n\n```typescript\nconst wallet = await selector.wallet();\n\nconst mintCall = mint({\n  noMedia: true,\n  metadata: {\n    reference: reference,\n    title: data.title,\n    description: postContent,\n    extra: \"blogpost\",\n  },\n  contractAddress: data.contract,\n  ownerId: activeAccountId,\n});\n```\n\nWe can then execute the mint nft method\n\n```typescript\n  await execute({ wallet }, mintCall);\n```\n\n:::note\nWe populate the 'extra' field with the value 'blogpost' to subsequently filter the displayed NFTs and blogs in blogchain, ensuring that only blogs are included.", "mimetype": "text/plain", "start_char_idx": 1849, "end_char_idx": 3733, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4c79da17-4608-4041-9f49-a5bb88876ed8": {"__data__": {"id_": "4c79da17-4608-4041-9f49-a5bb88876ed8", "embedding": null, "metadata": {"file_path": "./near_dist/blog.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "24672da3-afbe-4b08-981c-3ae455b4d1db", "node_type": "4", "metadata": {}, "hash": "05e08aa80afb413b7c68252c35b4d865b2147308aad6eee7fca0c52f0bd9fdaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c13dc6e6-cdf6-490f-8ab7-178a39195adb", "node_type": "1", "metadata": {}, "hash": "7410351048bdbde92e42c221b4f5c58ffb7b2b0f2bc84607ef9bc090be09a79c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "49201b1e-bd14-434d-b9e6-93f4146450fc", "node_type": "1", "metadata": {}, "hash": "75b646a28aa652d840e7fc60e94606c432ab26ea9d72d6e46c8246b4692c16f5", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## Get Data\n\n### Get blog posts (nfts) from a blog (smart contract)\n\nUsing [Mintbase GraphQL Indexer](https://docs.mintbase.xyz/dev/mintbase-graph) we can fetch the nfts from a specific smart contract - to filter by blog post we use 'blogpost' as an extra field as explained in the previous step.\n\n```typescript\nexport const GET_BLOG_POSTS =\n`\nquery GET_BLOG_POSTS($contractId: String!) {\n    mb_views_nft_tokens(\n      where: {extra: {_eq: \"blogpost\"}, _and: {nft_contract_id: {_eq: $contractId}}}\n    ) {\n      metadata_id\n      title\n      description\n      media\n      minted_timestamp\n    }\n  }\n  `;\n```\n\n<hr class=\"subsection\" />\n\n### Get user blog posts (nfts)\n\n```typescript\nexport const GET_USER_POSTS =\n`\nquery GET_USER_POSTS($accountId: String!) {\n    mb_views_nft_tokens(\n      where: {extra: {_eq: \"blogpost\"}, _and: {nft_contract_owner_id: {_eq: $accountId}}}\n    ) {\n      metadata_id\n      title\n      description\n      media\n      minted_timestamp\n    }\n  }\n  `;\n```\n\n<hr class=\"subsection\" />\n\n### Get user blogs (smart contracts)\n\n```typescript\nexport const GET_USER_BLOGS =\n`\nquery GET_USER_BLOGS($accountId: String!)", "mimetype": "text/plain", "start_char_idx": 3734, "end_char_idx": 4881, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "49201b1e-bd14-434d-b9e6-93f4146450fc": {"__data__": {"id_": "49201b1e-bd14-434d-b9e6-93f4146450fc", "embedding": null, "metadata": {"file_path": "./near_dist/blog.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "24672da3-afbe-4b08-981c-3ae455b4d1db", "node_type": "4", "metadata": {}, "hash": "05e08aa80afb413b7c68252c35b4d865b2147308aad6eee7fca0c52f0bd9fdaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4c79da17-4608-4041-9f49-a5bb88876ed8", "node_type": "1", "metadata": {}, "hash": "ae7c6a48cffb163b7207468cdc17d99fecaafc7d8b0aa139ffe59576a56be5eb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1f96e69a-2a17-4462-9cc5-fd707d0abfca", "node_type": "1", "metadata": {}, "hash": "ece038ffa766c7be381e2e15c3a598cf96763abc82c97c0d32fac8470cc591ea", "class_name": "RelatedNodeInfo"}}, "text": "{\n    nft_contracts(where: {owner_id: {_eq: $accountId}}) {\n      id\n    }\n  }\n  `;\n```\n\n<hr class=\"subsection\" />\n\n### Get latest blogs (smart contracts)\n\n```typescript\nexport const GET_LATEST_UPDATED_BLOGS =\n`\nquery GET_LATEST_UPDATED_BLOGS {\n  mb_views_nft_metadata(\n    where: {extra: {_eq: \"blogpost\"}}\n    distinct_on: [nft_contract_id, nft_contract_created_at]\n    limit: 6\n    order_by: [{nft_contract_created_at: desc}, {nft_contract_id: desc}]\n  ) {\n    nft_contract_id\n    nft_contract_owner_id\n  }\n  }\n  `;\n```\n\n<hr class=\"subsection\" />\n\n### Get latest blog posts (nfts)\n\n```typescript\nexport const GET_LATEST_POSTS =\n`\nquery GET_LATEST_POSTS {\n    mb_views_nft_tokens(\n      where: {extra: {_eq: \"blogpost\"}}\n      limit: 10\n      order_by: {minted_timestamp: desc}\n    ) {\n    metadata_id\n    title\n    description\n    media\n    minted_timestamp\n    minter\n    nft_contract_id\n    }\n  }`;\n```\n\n<hr class=\"subsection\" />\n\n### Get blog post (nft) data\n\n```typescript\nexport const GET_POST_METADATA =\n`\nquery GET_POST_METADATA($metadataId: String!) {\n    mb_views_nft_tokens(where: {metadata_id: {_eq: $metadataId}}) {\n      metadata_id\n      title\n      description\n      media\n      minted_timestamp\n      minter\n      nft_contract_id\n    }\n  }`;\n```\n\nPresently, this template exclusively functions within the testnet environment. To transition to a different network the configuration must be changed in ```<MintbaseWalletContextProvider>``` and every 'testnet' instance.\n\n---\n\n## Extending\n\nThis project is setup using Next.js + @mintbase/js\nYou can use this project as a reference to build your own, and use or remove any library you think it would suit your needs.", "mimetype": "text/plain", "start_char_idx": 4882, "end_char_idx": 6564, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1f96e69a-2a17-4462-9cc5-fd707d0abfca": {"__data__": {"id_": "1f96e69a-2a17-4462-9cc5-fd707d0abfca", "embedding": null, "metadata": {"file_path": "./near_dist/blog.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "24672da3-afbe-4b08-981c-3ae455b4d1db", "node_type": "4", "metadata": {}, "hash": "05e08aa80afb413b7c68252c35b4d865b2147308aad6eee7fca0c52f0bd9fdaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "49201b1e-bd14-434d-b9e6-93f4146450fc", "node_type": "1", "metadata": {}, "hash": "75b646a28aa652d840e7fc60e94606c432ab26ea9d72d6e46c8246b4692c16f5", "class_name": "RelatedNodeInfo"}}, "text": ":::info Get in touch\nYou can get in touch with the mintbase team using the following channels:\n\n- Support: [Join the Telegram](https://t.me/mintdev)\n- Twitter: [@mintbase](https://twitter.com/mintbase)\n:::", "mimetype": "text/plain", "start_char_idx": 6566, "end_char_idx": 6771, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c64fd44b-d449-41b3-886d-c4c35019b3b7": {"__data__": {"id_": "c64fd44b-d449-41b3-886d-c4c35019b3b7", "embedding": null, "metadata": {"file_path": "./near_dist/get-dao-list.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e59796b9-6244-4f53-8bd5-6b7eef09db3c", "node_type": "4", "metadata": {}, "hash": "d6600d7036b5e9d7598ea5983a8e98377080f48ec865b02934592dcb83e1b1ad", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view sputnik-dao.near get_dao_list '{}'\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n[\n  'ref-finance.sputnik-dao.near'\n  'gaming-dao.sputnik-dao.near',\n  ...\n]\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 214, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c3f0a9a-e744-4f3b-904e-4b35e72a1d99": {"__data__": {"id_": "3c3f0a9a-e744-4f3b-904e-4b35e72a1d99", "embedding": null, "metadata": {"file_path": "./near_dist/wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7969349f-0932-4054-b06a-1bb0a4013811", "node_type": "4", "metadata": {}, "hash": "5033a693a1adfa2940b15d8ddbad8dddb9bf747547f8d43e1a47fafe7e1e0ff0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "167c9395-3707-4d12-9417-373b682dde3f", "node_type": "1", "metadata": {}, "hash": "7d387ad2c581480464b93a741ce91223ad2b939797a2d9c9f862d94b29927ac0", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: wallet\ntitle: Wallet Chain Key Rules \n---\n\n## Overview\n\nIn this article you'll find details on how to parse and present multichain transactions to the user so they can take an informed decision about their wallet's assets, while minimizing the number of times the user has to consent.\nYou'll also learn how to ensure that a signature on one chain is not used to take a meaningful action on another chain.\n\n### Key derivation\n\nWhen signing using [chain signatures](./chain-signatures/chain-signatures.md) each account has an unlimited number of keys. Each key's public key is derived from the account name and the key extension which is an arbitrary string.\n\nUser's keys can be described as follow:\n\n```\n\"david.near,\"              A key with no extension\n\"david.near, \"             A key with an extension of \" \"\n\"david.near,cold_wallet\"   A key with an extension of \"cold_wallet\"\n```\n\n:::tip\nIf the keys aren't identical they have no relationship.\n:::\n\n### Ambiguous signatures\n\nYou're going to be potentially storing keys for users who hold assets on many chains. Different chains have different ways of serializing and signing transactions. Many chains take steps to ensure that their signatures are not valid signatures on other chains. EVM chains use `ChainID` to disambiguate signatures between different EVM chains. Dfinity uses a unique salt on the hash of the transaction.\n\nUnfortunately, while this is a best practice, you can't guarantee that all chains do this. As such, a user could receive an innocent looking transaction on one chain that could be used to take a destructive action on another chain.\n\nAn apocryphal example:\n\n```\nTransaction: \"7b73656e643a2022313030222c206e6f74652022227d\"\nParsed SOL: claim free NFT\nParsed BTC: send 100 BTC to Attacker\n```\n\nThe user would approve the `SOL` transaction but the attacker would also get the `BTC` transaction.\n\nThis can be solved by having unique keys for different chains. That way, even if an attacker makes you sign a transaction that is also valid in a foreign chain, no assets will be compromised.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2072, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "167c9395-3707-4d12-9417-373b682dde3f": {"__data__": {"id_": "167c9395-3707-4d12-9417-373b682dde3f", "embedding": null, "metadata": {"file_path": "./near_dist/wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7969349f-0932-4054-b06a-1bb0a4013811", "node_type": "4", "metadata": {}, "hash": "5033a693a1adfa2940b15d8ddbad8dddb9bf747547f8d43e1a47fafe7e1e0ff0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c3f0a9a-e744-4f3b-904e-4b35e72a1d99", "node_type": "1", "metadata": {}, "hash": "e2516addef031df4f531d5c13ef1567eaa8572b659ce8b708257b4b537b8e429", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4b83e89a-b7c4-4de8-8ab4-a4cb820af648", "node_type": "1", "metadata": {}, "hash": "e8043fbf40752bbdc534086ca28ec1b73d213168b56024476965427cf58c293f", "class_name": "RelatedNodeInfo"}}, "text": "## Serialization format\n\nWe're using the following format for our derivations paths.\n\n```typescript\n{\n   chain: number, // SLIP-44 coin type unsigned integer\n   domain: String, // The domain that owns this key\n   meta: any, // Catch all data structure\n}\n```\n\nThis is encoded in canonical [JSON RFC 8785](https://www.rfc-editor.org/rfc/rfc8785).\n\n:::info\nIf you are not using a field don't make it `null`, don't include the key instead.\n:::\n\n### User-defined fields\n\nFor user-defined fields, the `meta` field can include any data you like. \n\n:::tip\nDo not add any extra fields at the top level, as that may clash with future versions of this specification. If needed, put them in the `meta` field instead.\n:::\n\nFor example, a simple way of selecting alternate keys will be using an object with an `ID` field:\n\n```typescript\n{\n    meta: {id: 10}, // Pick the tenth bitcoin key\n    chain: 0,\n}\n```\n\n### Examples\n\n| Key | Description |\n|-----|-------------|\n| `{chain: 0, domain: \"near.org\"}` |  A bitcoin key used on `near.org` |\n| `{chain: 0, meta: {id: 3}}`      |  Use the third bitcoin key |\n\n\n## Example user flows\n\nIn the following examples, the messages are coming from the user's wallet frontend.\n\n- [Using a domains bitcoin key](#using-a-domains-bitcoin-key)\n- [Using a personal Bitcoin key](#using-a-personal-bitcoin-key)\n- [Using a personal EVM key to sign a Binance transaction](#using-a-personal-evm-key-to-sign-a-binance-transaction)\n- [Using an untyped domain key](#using-an-untyped-domain-key)\n- [Using another domain's Bitcoin key](#using-another-domains-bitcoin-key)\n\n:::tip\nWallet developers should follow this user flow format.\n:::\n\n### Using a domains bitcoin key\n\nAn application at `near.org` wants to sign the Bitcoin transaction `Send 100 BTC` using the key `david.near,bitcoin,near.org,`.\n\n```\nSigned \u2705\n```\n\nWe sign the transaction without confirmation because the key is owned by `near.org`.", "mimetype": "text/plain", "start_char_idx": 2075, "end_char_idx": 3989, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4b83e89a-b7c4-4de8-8ab4-a4cb820af648": {"__data__": {"id_": "4b83e89a-b7c4-4de8-8ab4-a4cb820af648", "embedding": null, "metadata": {"file_path": "./near_dist/wallet.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7969349f-0932-4054-b06a-1bb0a4013811", "node_type": "4", "metadata": {}, "hash": "5033a693a1adfa2940b15d8ddbad8dddb9bf747547f8d43e1a47fafe7e1e0ff0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "167c9395-3707-4d12-9417-373b682dde3f", "node_type": "1", "metadata": {}, "hash": "7d387ad2c581480464b93a741ce91223ad2b939797a2d9c9f862d94b29927ac0", "class_name": "RelatedNodeInfo"}}, "text": "### Using a personal Bitcoin key\n\nAn application at `near.org` wants to sign the Bitcoin transaction `Send 100 BTC` using the key `david.near,bitcoin,`.\n\n```\nnear.org would like to run the following Bitcoin transaction:\n\nSend 100 BTC\n[Accept] [Reject]\n```\n\nThe user must make an informed decision about whether this is an action they would like to take.\n\n```\nSigned \u2705\n```\n\n### Using a personal EVM key to sign a Binance transaction\n\nAn application at `near.org` wants to sign the Binance Smart Chain transaction `Send 100 BNB, ChainID 56` using the key `david.near,evm,`. The wallet knows this is a BSC transaction because of the corresponding `ChainID` (56) and because the `evm` key is being used.\n\n```\nnear.org would like to run the following Binance Smart Chain transaction:\n\nSend 100 BNB\n[Accept] [Reject]\n```\n\nThe user must make an informed decision about whether this is an action they would like to take.\n\n```\nSigned \u2705\n```\n\n### Using an untyped domain key\n\nAn application at `near.org` wants to sign the Bitcoin transaction `Send 100 BTC` using the key `david.near,,near.org,`.\n\n```\nSigned \u2705\n```\n\nWhile this is ill advised, it's still the domains key so the domain can still choose whether to sign something using it.\n\n### Using another domains Bitcoin key\n\nAn application at `attacker.com` wants to sign the Bitcoin transaction `Send 100 BTC` using the key `david.near,bitcoin,near.org,`.\n\n```\nAttacker.com would like to sign a transaction using your credentials from near.org\n\nSend 100 BTC\n\nThis is a suspicious transaction and likely not one you should accept\n[Reject] [Accept (Are you sure!)]\n```\n\nThe user must make an explicit decision to do something that is ill advised.\n\n```\nSigned \u2705\n```\n\nThe correct way for `attacker.com` to make this request is to somehow redirect the user to `near.org` and get the user to make a decision there.", "mimetype": "text/plain", "start_char_idx": 3991, "end_char_idx": 5841, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e40ca45-410b-4269-8b6d-ac1a7dcc325f": {"__data__": {"id_": "6e40ca45-410b-4269-8b6d-ac1a7dcc325f", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "13c70787-8c2f-40dc-bab5-f2f73add34e9", "node_type": "1", "metadata": {}, "hash": "89b95f8c759b724bd538e68412859be8e802e4bb8ff04339be969ae9055716ed", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: transfers\ntitle: Transferring Fungible Tokens\nsidebar_label: Transferring FTs\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial, you'll learn how to implement the [core standards](https://nomicon.io/Standards/Tokens/FungibleToken/Core) into your smart contract. You'll implement the logic that allows you to transfer and receive tokens. If you're joining us for the first time, feel free to clone [this repository](https://github.com/near-examples/ft-tutorial) and follow along in the `4.storage` folder.\n\n:::tip\n\nIf you wish to see the finished code for this _Core_ tutorial, you can find it in the [`5.transfers`](https://github.com/near-examples/ft-tutorial/blob/main/5.transfers) folder.\n\n:::\n\n---\n\n## Introduction {#introduction}\n\nUp until this point, you've created a simple FT smart contract that allows the owner to mint a total supply of tokens and view information about the Fungible Token itself. In addition, you've added the functionality to register accounts and emit events. Today, you'll expand your smart contract to allow for users to transfer and receive fungible tokens.\n\nThe logic for doing a simple transfer is quite easy to understand. Let's say Benji wants to transfer Mike 100 of his fungible tokens. The contract should do a few things:\n- Check if Benji owns at least 100 tokens.\n- Make sure Benji is calling the function.\n- Ensure Mike is registered on the contract.\n- Take 100 tokens out of Benji's account.\n- Put 100 tokens into Mike's account.\n\nAt this point, you're ready to move on and make the necessary modifications to your smart contract.\n\n---\n\n## Modifications to the contract\n\nLet's start our journey in the `src/ft_core.rs` file.\n\n### Transfer function {#transfer-function}\n\nYou'll start by implementing the `ft_transfer` logic which is found in the `src/ft_core.rs` file. This function will transfer the specified `amount` to the `receiver_id` with an optional `memo` such as `\"Happy Birthday Mike!\"`.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2045, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "13c70787-8c2f-40dc-bab5-f2f73add34e9": {"__data__": {"id_": "13c70787-8c2f-40dc-bab5-f2f73add34e9", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e40ca45-410b-4269-8b6d-ac1a7dcc325f", "node_type": "1", "metadata": {}, "hash": "7a50375da2852a54163b0fe4f23faef11f9b5c9b4715cc47f2699047629686db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e81fe0a7-50d4-4cac-b064-9d0655a324ec", "node_type": "1", "metadata": {}, "hash": "ac7b7bbab67ae917490b40166fec2b3b86a3fd86527deb0a774072d655101b3d", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"rust\" start=\"62\" end=\"70\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/5.transfers/src/ft_core.rs\" />\n\nThere are a couple things to notice here.\n\n1. We've introduced a new function called `assert_one_yocto()`. This method will ensure that the user is signing the transaction with a full access key by requiring a deposit of exactly 1 yoctoNEAR, the smallest possible amount of $NEAR that can be transferred. Since the transfer function is potentially transferring very valuable assets, you'll want to make sure that whoever is calling the function has a full access key.\n\n2. We've introduced an `internal_transfer` method. This will perform all the logic necessary to transfer the tokens internally.\n\n<hr className=\"subsection\" />\n\n### Internal helper functions\n\nLet's quickly move over to the `ft-contract/src/internal.rs` file so that you can implement the `internal_transfer` method which is the core of this tutorial. This function will take the following parameters:\n\n- **sender_id**: the account that's attempting to transfer the tokens.\n- **receiver_id**: the account that's receiving the tokens.\n- **amount**: the amount of FTs being transferred.\n- **memo**: an optional memo to include.\n\nThe first thing you'll want to do is make sure the sender isn't sending tokens to themselves and that they're sending a positive number. After that, you'll want to withdraw the tokens from the sender's balance and deposit them into the receiver's balance. You've already written the logic to deposit FTs by using the `internal_deposit` function.\n\nLet's use similar logic to implement `internal_withdraw`:\n\n<Github language=\"rust\" start=\"31\" end=\"41\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/5.transfers/src/internal.rs\" />\n\nIn this case, the contract will get the account's balance and ensure they are registered by calling the `internal_unwrap_balance_of` function. It will then subtract the amount from the user's balance and re-insert them into the map.\n\nUsing the `internal_deposit` and `internal_withdraw` functions together, the core of the `internal_transfer` function is complete.\n\nThere's only one more thing you need to do.", "mimetype": "text/plain", "start_char_idx": 2047, "end_char_idx": 4229, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e81fe0a7-50d4-4cac-b064-9d0655a324ec": {"__data__": {"id_": "e81fe0a7-50d4-4cac-b064-9d0655a324ec", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "13c70787-8c2f-40dc-bab5-f2f73add34e9", "node_type": "1", "metadata": {}, "hash": "89b95f8c759b724bd538e68412859be8e802e4bb8ff04339be969ae9055716ed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc139acf-0976-49ac-b49c-4b34e1e344c3", "node_type": "1", "metadata": {}, "hash": "f917ac8d1eba659057fd456e540d6a424e4e92bead9877086712938f6ec127b7", "class_name": "RelatedNodeInfo"}}, "text": "When transferring the tokens, you need to remember to emit a log as per the [events](https://nomicon.io/Standards/Tokens/FungibleToken/Event) standard:\n\n<Github language=\"rust\" start=\"44\" end=\"68\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/5.transfers/src/internal.rs\" />\n\nNow that this is finished, the simple transfer case is done! You can now transfer FTs between registered users!\n\n<hr className=\"subsection\" />\n\n### Transfer call function {#transfer-call-function}\n\nIn this section, you'll learn about a new function `ft_transfer_call`. This will transfer FTs to a receiver and also call a method on the receiver's contract all in the same transaction.\n\nLet's consider the following scenario. An account wants to transfer FTs to a smart contract for performing a service. The traditional approach would be to perform the service and then ask for the tokens in two separate transactions. If we introduce a \u201ctransfer and call\u201d workflow baked into a single transaction, the process can be greatly improved:\n\n<Github language=\"rust\" start=\"72\" end=\"100\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/5.transfers/src/ft_core.rs\" />\n\nThis function will do several things:\n\n1. Ensures the caller attached exactly 1 yocto for security purposes.\n2. Transfer the tokens using the `internal_transfer` you just wrote.\n3. Creates a promise to call the method `ft_on_transfer` on the `receiver_id`'s contract.\n4. After the promise finishes executing, the function `ft_resolve_transfer` is called.\n\n:::info\n\nThis is a very common workflow when dealing with cross contract calls. You first initiate the call and wait for it to finish executing. Then, you invoke a function that resolves the result of the promise and act accordingly.\n[Learn more here](../../2.build/2.smart-contracts/anatomy/crosscontract.md).\n\n:::\n\nWhen calling `ft_on_transfer`, it will return how many tokens the contract should refund the original sender.\n\nThis is important for a couple of reasons:\n1. If you send the receiver too many FTs and their contract wants to refund the excess.\n2. If any of the logic panics, all of the tokens should be refunded back to the sender.", "mimetype": "text/plain", "start_char_idx": 4230, "end_char_idx": 6396, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc139acf-0976-49ac-b49c-4b34e1e344c3": {"__data__": {"id_": "fc139acf-0976-49ac-b49c-4b34e1e344c3", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e81fe0a7-50d4-4cac-b064-9d0655a324ec", "node_type": "1", "metadata": {}, "hash": "ac7b7bbab67ae917490b40166fec2b3b86a3fd86527deb0a774072d655101b3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "04829d53-e19d-4a30-83f8-864ce7f72e09", "node_type": "1", "metadata": {}, "hash": "090b5c04f646372e7fa0c1111f5271cf51466a99f9102b9db16fb572dc61ba8f", "class_name": "RelatedNodeInfo"}}, "text": "This logic will all happen in the `ft_resolve_transfer` function:\n\n<Github language=\"rust\" start=\"170\" end=\"214\" url=\"https://github.com/near-examples/ft-tutorial/blob/main/5.transfers/src/ft_core.rs\" />\n\nThe first thing you'll do is check the status of the promise. If anything failed, you'll refund the sender for the full amount of tokens. If the promise succeeded, you'll extract the amount of tokens to refund the sender based on the value returned from `ft_on_transfer`. Once you have the amount needed to be refunded, you'll perform the actual refund logic by using the `internal_transfer` function you wrote previously.\n\nYou'll then return the net amount of tokens that were transferred to the receiver. If the sender transferred 100 tokens but 20 were refunded, this function should return 80.\n\nWith that finished, you've now successfully added the necessary logic to allow users to transfer FTs. It's now time to deploy and do some testing.\n\n---\n\n## Deploying the contract {#redeploying-contract}\n\nLet's create a new sub-account to deploy the contract to. Since these changes are only additive and non state breaking, you could have deployed a patch fix to the contract you deployed in the storage section as well. To learn more about upgrading contracts, see the [upgrading a contract](/tutorials/nfts/upgrade-contract) section in the NFT Zero to Hero tutorial.\n\n<hr className=\"subsection\" />\n\n### Creating a sub-account\n\nRun the following command to create a sub-account `transfer` of your main account with an initial balance of 3 NEAR which will be transferred from the original to your new account.", "mimetype": "text/plain", "start_char_idx": 6398, "end_char_idx": 8011, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "04829d53-e19d-4a30-83f8-864ce7f72e09": {"__data__": {"id_": "04829d53-e19d-4a30-83f8-864ce7f72e09", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc139acf-0976-49ac-b49c-4b34e1e344c3", "node_type": "1", "metadata": {}, "hash": "f917ac8d1eba659057fd456e540d6a424e4e92bead9877086712938f6ec127b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf41b625-bbd3-4999-b417-1077dc1c8704", "node_type": "1", "metadata": {}, "hash": "97c855c0d13cb08cc84e8f8cae37ea50c68da3c66a4112249eb39d3ac4965b42", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near create-account transfer.$FT_CONTRACT_ID --use-account $FT_CONTRACT_ID --initial-balance 3 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near account create-account fund-myself transfer.$FT_CONTRACT_ID '3 NEAR' autogenerate-new-keypair save-to-keychain sign-as $FT_CONTRACT_ID network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nNext, you'll want to export an environment variable for ease of development:\n\n```bash\nexport TRANSFER_FT_CONTRACT_ID=transfer.$FT_CONTRACT_ID\n```\n\nBuild the contract as you did in the previous tutorials:\n\n```bash\ncd 4.storage\ncargo near build\n```\n\n<hr className=\"subsection\" />\n\n### Deployment and Initialization\n\nIt's time to deploy the contract, initialize it and mint the total supply. Let's once again create an initial supply of 1000 `gtNEAR`.", "mimetype": "text/plain", "start_char_idx": 8013, "end_char_idx": 8946, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf41b625-bbd3-4999-b417-1077dc1c8704": {"__data__": {"id_": "cf41b625-bbd3-4999-b417-1077dc1c8704", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "04829d53-e19d-4a30-83f8-864ce7f72e09", "node_type": "1", "metadata": {}, "hash": "090b5c04f646372e7fa0c1111f5271cf51466a99f9102b9db16fb572dc61ba8f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8390c7e7-4b49-4925-b5e7-430138a6354c", "node_type": "1", "metadata": {}, "hash": "87f145aaaf240218cf38e3395cb8c7eda641cc3ede5d94f1b384552c161206c5", "class_name": "RelatedNodeInfo"}}, "text": "```bash\ncargo near deploy $TRANSFER_FT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$TRANSFER_FT_CONTRACT_ID'\", \"total_supply\": \"1000000000000000000000000000\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nYou can check if you own the FTs by running the following command:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $TRANSFER_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"'$TRANSFER_FT_CONTRACT_ID'\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $TRANSFER_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"'$TRANSFER_FT_CONTRACT_ID'\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Testing the transfer function\n\nLet's test the transfer function by transferring 1 `gtNEAR` from the owner account to the account `benjiman.testnet`\n\n:::warning Keep in mind\nThe Fungible tokens won't be recoverable unless the account `benjiman.testnet` transfers them back to you. If you don't want your FTs lost, make a new account and transfer the token to that account instead.\n:::\n\nYou'll first need to register the account `benjiman.testnet` by running the following command.", "mimetype": "text/plain", "start_char_idx": 8948, "end_char_idx": 10281, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8390c7e7-4b49-4925-b5e7-430138a6354c": {"__data__": {"id_": "8390c7e7-4b49-4925-b5e7-430138a6354c", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf41b625-bbd3-4999-b417-1077dc1c8704", "node_type": "1", "metadata": {}, "hash": "97c855c0d13cb08cc84e8f8cae37ea50c68da3c66a4112249eb39d3ac4965b42", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3", "node_type": "1", "metadata": {}, "hash": "462ae28b5f7604a9d9fd93c52dfad68d2730950591a15b6a7b0f3d02aebe1892", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $TRANSFER_FT_CONTRACT_ID storage_deposit '{\"account_id\": \"benjiman.testnet\"}' --gas 100000000000000 --deposit 0.01 --accountId $TRANSFER_FT_CONTRACT_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $TRANSFER_FT_CONTRACT_ID storage_deposit json-args '{\"account_id\": \"benjiman.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.01 NEAR' sign-as $TRANSFER_FT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nOnce the account is registered, you can transfer the FTs by running the following command. Take note that you're also attaching exactly 1 yoctoNEAR by using the `--depositYocto` flag.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $TRANSFER_FT_CONTRACT_ID ft_transfer '{\"receiver_id\": \"benjiman.testnet\", \"amount\": \"1000000000000000000000000\", \"memo\": \"Go Team :)\"}' --gas 100000000000000 --depositYocto 1 --accountId $TRANSFER_FT_CONTRACT_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $TRANSFER_FT_CONTRACT_ID ft_transfer json-args '{\"receiver_id\": \"benjiman.testnet\", \"amount\": \"1000000000000000000000000\", \"memo\": \"Go Team :)\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $TRANSFER_FT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nYou should see the `FtTransferEvent` being emitted in the console.", "mimetype": "text/plain", "start_char_idx": 10283, "end_char_idx": 11916, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3": {"__data__": {"id_": "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8390c7e7-4b49-4925-b5e7-430138a6354c", "node_type": "1", "metadata": {}, "hash": "87f145aaaf240218cf38e3395cb8c7eda641cc3ede5d94f1b384552c161206c5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f011698b-98a0-45ab-aebc-167eb7265ebe", "node_type": "1", "metadata": {}, "hash": "5b4852389c9ff6483ab5fd7339d3425b2d63ab1573902edf1e3a44095d9869ab", "class_name": "RelatedNodeInfo"}}, "text": "At this point, if you check for the total supply, it should still be 1000 `gtNEAR` but if you check both the balance of Benji and the balance of the owner, they should reflect the transfer.\n\n- Check owner balance:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $TRANSFER_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"'$TRANSFER_FT_CONTRACT_ID'\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $TRANSFER_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"'$TRANSFER_FT_CONTRACT_ID'\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n- Check `benjiman.testnet` balance:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $TRANSFER_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"benjiman.testnet\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $TRANSFER_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"benjiman.testnet\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n- Check total supply:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $TRANSFER_FT_CONTRACT_ID ft_total_supply '{}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $TRANSFER_FT_CONTRACT_ID ft_total_supply json-args {} network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\n<hr className=\"subsection\" />\n\n### Testing the transfer call function\n\nNow that you've tested the `ft_transfer` function, it's time to test the `ft_transfer_call` function.", "mimetype": "text/plain", "start_char_idx": 11917, "end_char_idx": 13648, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f011698b-98a0-45ab-aebc-167eb7265ebe": {"__data__": {"id_": "f011698b-98a0-45ab-aebc-167eb7265ebe", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3", "node_type": "1", "metadata": {}, "hash": "462ae28b5f7604a9d9fd93c52dfad68d2730950591a15b6a7b0f3d02aebe1892", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d694c27-0e0d-4c9a-b593-6db46c0e720c", "node_type": "1", "metadata": {}, "hash": "ebf4a271cc003f6129412cc8d4b962a8cb3c367c38a1f0ea96034d779b2816cc", "class_name": "RelatedNodeInfo"}}, "text": "If you try to transfer tokens to a receiver that does **not** implement the `ft_on_transfer` function, the contract will panic and the FTs will be **refunded**. Let's test this functionality below.\n\nYou can try to transfer the FTs to the account `no-contract.testnet` which, as the name suggests, doesn't have a contract. This means that the receiver doesn't implement the `ft_on_transfer` function and the FTs should remain yours after the transaction is complete. You'll first have to register the account, however.", "mimetype": "text/plain", "start_char_idx": 13649, "end_char_idx": 14166, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d694c27-0e0d-4c9a-b593-6db46c0e720c": {"__data__": {"id_": "2d694c27-0e0d-4c9a-b593-6db46c0e720c", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f011698b-98a0-45ab-aebc-167eb7265ebe", "node_type": "1", "metadata": {}, "hash": "5b4852389c9ff6483ab5fd7339d3425b2d63ab1573902edf1e3a44095d9869ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3cf26f6-5e46-4836-afb4-309181ae9819", "node_type": "1", "metadata": {}, "hash": "19038e0764b1e3b7049c9f94c2cb345ccc561e224fe2b4b68941de47caa2f386", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $TRANSFER_FT_CONTRACT_ID storage_deposit '{\"account_id\": \"no-contract.testnet\"}' --gas 100000000000000 --deposit 0.01 --accountId $TRANSFER_FT_CONTRACT_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $TRANSFER_FT_CONTRACT_ID storage_deposit json-args '{\"account_id\": \"no-contract.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.01 NEAR' sign-as $TRANSFER_FT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $TRANSFER_FT_CONTRACT_ID ft_transfer_call '{\"receiver_id\": \"no-contract.testnet\", \"amount\": \"1000000000000000000000000\", \"msg\": \"foo\"}' --gas 100000000000000 --depositYocto 1 --accountId $TRANSFER_FT_CONTRACT_ID --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $TRANSFER_FT_CONTRACT_ID ft_transfer_call json-args '{\"receiver_id\": \"no-contract.testnet\", \"amount\": \"1000000000000000000000000\", \"msg\": \"foo\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $TRANSFER_FT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nThe output response should be as follows.\n\n```bash\nScheduling a call: transfer.dev-1660680326316-91393402417293.ft_transfer_call({\"receiver_id\": \"no-contract.testnet\", \"amount\": \"1000000000000000000000000\", \"msg\": \"foo\"}) with attached 0.000000000000000000000001 NEAR\nDoing account.", "mimetype": "text/plain", "start_char_idx": 14168, "end_char_idx": 15838, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c3cf26f6-5e46-4836-afb4-309181ae9819": {"__data__": {"id_": "c3cf26f6-5e46-4836-afb4-309181ae9819", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d694c27-0e0d-4c9a-b593-6db46c0e720c", "node_type": "1", "metadata": {}, "hash": "ebf4a271cc003f6129412cc8d4b962a8cb3c367c38a1f0ea96034d779b2816cc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "649cfd30-52b2-48ef-94b5-3198b11cddd1", "node_type": "1", "metadata": {}, "hash": "9976abebb2f76e2165c9281dc5ae18b32f7981b40cd0c743493bd3ebbfaddb99", "class_name": "RelatedNodeInfo"}}, "text": "functionCall()\nReceipts: AJ3yWv7tSiZRLtoTkyTgfdzmQP1dpjX9DxJDiD33uwTZ, EKtpDFoJWNnbyxJ7SriAFQYX8XV9ZTzwmCF2qhSaYMAc, 21UzDZ791pWZRKAHv8WaRKN8mqDVrz8zewLWGTNZTckh\n\tLog [transfer.dev-1660680326316-91393402417293]: EVENT_JSON:{\"standard\":\"nep141\",\"version\":\"1.0.0\",\"event\":\"ft_transfer\",\"data\":[{\"old_owner_id\":\"transfer.dev-1660680326316-91393402417293\",\"new_owner_id\":\"no-contract.testnet\",\"amount\":\"1000000000000000000000000\"}]}\nReceipt: 5N2WV8picxwUNC5TYa3A3v4qGquQAhkU6P81tgRt1UFN\n\tFailure [transfer.dev-1660680326316-91393402417293]: Error: Cannot find contract code for account no-contract.testnet\nReceipt: AdT1bSZNCu9ACq7m6ynb12GgSb3zBenfzvvzRwfYPBmg\n\tLog [transfer.dev-1660680326316-91393402417293]: EVENT_JSON:{\"standard\":\"nep141\",\"version\":\"1.0.0\",\"event\":\"ft_transfer\",\"data\":[{\"old_owner_id\":\"no-contract.testnet\",\"new_owner_id\":\"transfer.dev-1660680326316-91393402417293\",\"amount\":\"1000000000000000000000000\",\"memo\":\"Refund\"}]}\nTransaction Id 2XVy8MZU8TWreW8C9zK6HSyBsxE5hyTbyUyxNdncxL8g\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.", "mimetype": "text/plain", "start_char_idx": 15838, "end_char_idx": 16953, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "649cfd30-52b2-48ef-94b5-3198b11cddd1": {"__data__": {"id_": "649cfd30-52b2-48ef-94b5-3198b11cddd1", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3cf26f6-5e46-4836-afb4-309181ae9819", "node_type": "1", "metadata": {}, "hash": "19038e0764b1e3b7049c9f94c2cb345ccc561e224fe2b4b68941de47caa2f386", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c28dfd6-3ba8-4ee2-9799-c305d99fd3e9", "node_type": "1", "metadata": {}, "hash": "a4d073119f778f3549e2889152c913d0fcab54e562fd415559d844248344ea31", "class_name": "RelatedNodeInfo"}}, "text": "io/txns/2XVy8MZU8TWreW8C9zK6HSyBsxE5hyTbyUyxNdncxL8g\n'0'\n```\n\nThere should be a transfer event emitted for the initial transfer of tokens and then also for the refund. In addition, `0` should have been returned from the function because the sender ended up transferring net 0 tokens to the receiver since all the tokens were refunded.\n\nIf you query for the balance of `no-contract.testnet`, it should still be 0.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  near view $TRANSFER_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"no-contract.testnet\"}' --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  near contract call-function as-read-only $TRANSFER_FT_CONTRACT_ID ft_balance_of json-args '{\"account_id\": \"no-contract.testnet\"}' network-config testnet now\n  ```\n  </TabItem>\n</Tabs>\n\nHurray! At this point, your FT contract is fully complete and all the functionality is working as expected. Go forth and experiment! The world is your oyster and don't forget, go team!\n\n---\n\n## Conclusion\n\nIn this tutorial, you learned how to expand a FT contract by adding ways for users to transfer FTs. You [broke down](#introduction) the problem into smaller, more digestible subtasks and took that information and implemented both the [FT transfer](#transfer-function) and [FT transfer call](#transfer-call-function) functions. In addition, you deployed another [contract](#redeploying-contract) and [tested](#testing-changes) the transfer functionality.\n\nIn the [next tutorial](/tutorials/fts/marketplace), you'll learn about how an NFT marketplace can operate to purchase NFTs by using Fungible Tokens.", "mimetype": "text/plain", "start_char_idx": 16953, "end_char_idx": 18624, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c28dfd6-3ba8-4ee2-9799-c305d99fd3e9": {"__data__": {"id_": "0c28dfd6-3ba8-4ee2-9799-c305d99fd3e9", "embedding": null, "metadata": {"file_path": "./near_dist/5.transfers.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408", "node_type": "4", "metadata": {}, "hash": "d6d8f4e4870d85e891a892bc7f222c5fabf781e3cf15fe768ce5e5b99c161439", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "649cfd30-52b2-48ef-94b5-3198b11cddd1", "node_type": "1", "metadata": {}, "hash": "9976abebb2f76e2165c9281dc5ae18b32f7981b40cd0c743493bd3ebbfaddb99", "class_name": "RelatedNodeInfo"}}, "text": "---\n\n:::note Versioning for this article\nAt the time of this writing, this example works with the following versions:\n\n- rustc: `1.77.1`\n- near-sdk-rs: `5.1.0` (with enabled `legacy` feature)\n- cargo-near: `0.6.1`\n- near-cli-rs: `0.11.0`\n:::", "mimetype": "text/plain", "start_char_idx": 18626, "end_char_idx": 18867, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5cdddecd-a33b-4725-9c05-8886e43cdc98": {"__data__": {"id_": "5cdddecd-a33b-4725-9c05-8886e43cdc98", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6f4f0ef-6227-434d-94d6-c58a560f1bc3", "node_type": "1", "metadata": {}, "hash": "33bcb37216a2fcfe7971ba3b01c586360c418ec81245f48f057d964021a9217a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: marketplace\ntitle: Marketplace\nsidebar_label: Marketplace\n---\nimport {Github} from \"@site/src/components/codetabs\"\n\nIn this tutorial, you'll learn the basics of an NFT marketplace contract where you can buy and sell non-fungible tokens for $NEAR. In the previous tutorials, you went through and created a fully fledged NFT contract that incorporates all the standards found in the [NFT standard](https://nomicon.io/Standards/NonFungibleToken). \n\n\n\n## Introduction\n\nThroughout this tutorial, you'll learn how a marketplace contract could work on NEAR. This is meant to be an example and there is no canonical implementation. Feel free to branch off and modify this contract to meet your specific needs.\n\nUsing the same repository as the previous tutorials, if you checkout the `8.marketplace` branch, you should have the necessary files to complete the tutorial.\n\n```bash\ngit checkout 8.marketplace\n```\n\n## File structure {#file-structure}\n\n```\nmarket-contract\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 internal.ts\n    \u251c\u2500\u2500 index.ts\n    \u251c\u2500\u2500 nft_callbacks.ts\n    \u251c\u2500\u2500 sale.ts\n    \u2514\u2500\u2500 sale_views.ts\n```\n\nUsually, when doing work on multiple smart contracts that all pertain to the same repository, it's a good idea to structure them in their own folders as done in this tutorial. To make your work easier when building the smart contracts, we've also modified the repository's `package.json` file so that building both smart contracts can be easily done by running the following command.\n\n```bash\nyarn build\n```\nThis will install the dependencies for both contracts and compile them to `wasm` files that are stored in the following directory.\n\n```\nnft-tutorial-js\n\u2514\u2500\u2500 build\n    \u251c\u2500\u2500 nft.wasm\n    \u2514\u2500\u2500 market.wasm\n```\n\n## Understanding the contract\n\nAt first, the contract can be quite overwhelming but if you strip away all the fluff and dig into the core functionalities, it's actually quite simple. This contract was designed for only one thing - to allow people to buy and sell NFTs for NEAR. This includes the support for paying royalties, updating the price of your sales, removing sales and paying for storage.\n\nLet's go through the files and take note of some of the important functions and what they do.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2186, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6f4f0ef-6227-434d-94d6-c58a560f1bc3": {"__data__": {"id_": "c6f4f0ef-6227-434d-94d6-c58a560f1bc3", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5cdddecd-a33b-4725-9c05-8886e43cdc98", "node_type": "1", "metadata": {}, "hash": "71828e10331f55c82450a907d5425658927793d8871291b734b07f9f96c2d43a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "833883dc-9c93-48a0-86ad-8b1e627bb377", "node_type": "1", "metadata": {}, "hash": "85148ef83cae8e96150a999f54f11bf3e1abd7c70091a3c3cd7b542efe399e74", "class_name": "RelatedNodeInfo"}}, "text": "## index.ts {#index-ts}\n\nThis file outlines what information is stored on the contract as well as some other crucial functions that you'll learn about below.\n\n### Constructor logic {#constructor-logic}\n\nThe first function you'll look at is the constructor function. This takes an `owner_id` as the only parameter and will default all the storage collections to their default values.\n\n<Github language=\"js\" start=\"40\" end=\"52\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/index.ts\" />\n\n### Storage management model {#storage-management-model}\n\nNext, let's talk about the storage management model chosen for this contract. On the NFT contract, users attached $NEAR to the calls that needed storage paid for. For example, if someone was minting an NFT, they would need to attach `x` amount of NEAR to cover the cost of storing the data on the contract. \n\nOn this marketplace contract, however, the storage model is a bit different. Users will need to deposit $NEAR onto the marketplace to cover the storage costs. Whenever someone puts an NFT for sale, the marketplace needs to store that information which costs $NEAR. Users can either deposit as much NEAR as they want so that they never have to worry about storage again or they can deposit the minimum amount to cover 1 sale on an as-needed basis. \n\nYou might be thinking about the scenario when a sale is purchased. What happens to the storage that is now being released on the contract? This is why we've introduced a storage withdrawal function. This allows users to withdraw any excess storage that is not being used. Let's go through some scenarios to understand the logic. The required storage for 1 sale is 0.01 NEAR on the marketplace contract.\n\n**Scenario A**\n\n- Benji wants to list his NFT on the marketplace but has never paid for storage. \n- He deposits exactly 0.01 NEAR using the `storage_deposit` method. This will cover 1 sale.\n- He lists his NFT on the marketplace and is now using up 1 out of his prepaid 1 sales and has no more storage left. If he were to call `storage_withdraw`, nothing would happen.\n- Dorian loves his NFT and quickly purchases it before anybody else can.", "mimetype": "text/plain", "start_char_idx": 2188, "end_char_idx": 4381, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "833883dc-9c93-48a0-86ad-8b1e627bb377": {"__data__": {"id_": "833883dc-9c93-48a0-86ad-8b1e627bb377", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6f4f0ef-6227-434d-94d6-c58a560f1bc3", "node_type": "1", "metadata": {}, "hash": "33bcb37216a2fcfe7971ba3b01c586360c418ec81245f48f057d964021a9217a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfd0b70c-979c-46c7-b602-3b5fe19e2b30", "node_type": "1", "metadata": {}, "hash": "a9ea46b5ad440db4e64f29a50a2c099ffecec876ece9010316c20df47f709655", "class_name": "RelatedNodeInfo"}}, "text": "This means that Benji's sale has now been taken down (since it was purchased) and Benji is using up 0 out of his prepaid 1 sales. In other words, he has an excess of 1 sale or 0.01 NEAR.\n- Benji can now call `storage_withdraw` and will be transferred his 0.01 NEAR back. On the contract's side, after withdrawing, he will have 0 sales paid for and will need to deposit storage before trying to list anymore NFTs.\n\n**Scenario B**\n\n- Dorian owns one hundred beautiful NFTs and knows that he wants to list all of them.\n- To avoid having to call `storage_deposit` everytime he wants to list an NFT, he calls it once. Since Dorian is a baller, he attaches 10 NEAR which is enough to cover 1000 sales. He now has an excess of 9 NEAR or 900 sales.\n- Dorian needs the 9 NEAR for something else but doesn't want to take down his 100 listings. Since he has an excess of 9 NEAR, he can easily withdraw and still have his 100 listings. After calling `storage_withdraw` and being transferred 9 NEAR, he will have an excess of 0 sales.\n\nWith this behavior in mind, the following two functions outline the logic.\n\n<Github language=\"js\" start=\"58\" end=\"121\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/index.ts\" />\n\nIn this contract, the storage required for each sale is 0.01 NEAR but you can query that information using the `storage_minimum_balance` function. In addition, if you wanted to check how much storage a given account has paid, you can query the `storage_balance_of` function.\n\nWith that out of the way, it's time to move onto the `nft_callbacks.ts` file where you'll look at how NFTs are put for sale.\n\n## nft_callbacks.ts {#nft_callbacks-ts}\n\nThis file is responsible for the logic used to put NFTs for sale.", "mimetype": "text/plain", "start_char_idx": 4382, "end_char_idx": 6139, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfd0b70c-979c-46c7-b602-3b5fe19e2b30": {"__data__": {"id_": "bfd0b70c-979c-46c7-b602-3b5fe19e2b30", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "833883dc-9c93-48a0-86ad-8b1e627bb377", "node_type": "1", "metadata": {}, "hash": "85148ef83cae8e96150a999f54f11bf3e1abd7c70091a3c3cd7b542efe399e74", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d765341-96a3-4740-9a66-dace6c50b460", "node_type": "1", "metadata": {}, "hash": "cb66b048f73731527c4c8239f3101a7ef43d06bd044eb64f89c352f4fbf82638", "class_name": "RelatedNodeInfo"}}, "text": "If you remember from the [marketplaces section](/tutorials/nfts/js/approvals#marketplace-integrations) of the approvals tutorial, when users call `nft_approve` and pass in a message, it will perform a cross-contract call to the `receiver_id`'s contract and call the method `nft_on_approve`. This `nft_callbacks.ts` file will implement that function.\n\n### Listing logic {#listing-logic}\n\nThe market contract is expecting the message that the user passes into `nft_approve` on the NFT contract to be JSON stringified sale arguments. This outlines the sale price in yoctoNEAR for the NFT that is listed.\n\nThe `nft_on_approve` function is called via a cross-contract call by the NFT contract. It will make sure that the signer has enough storage to cover adding another sale. It will then attempt to get the sale conditions from the message and create the listing.\n\n<Github language=\"js\" start=\"6\" end=\"73\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/nft_callbacks.ts\" />\n\n## sale.ts {#sale-ts}\n\nNow that you're familiar with the process of both adding storage and listing NFTs on the marketplace, let's go through what you can do once a sale has been listed. The `sale.ts` file outlines the functions for updating the price, removing, and purchasing NFTs.\n\n### Sale object {#sale-object}\n\nIt's important to understand what information the contract is storing for each sale object. Since the marketplace has many NFTs listed that come from different NFT contracts, simply storing the token ID would not be enough to distinguish between different NFTs. This is why you need to keep track of both the token ID and the contract by which the NFT came from. In addition, for each listing, the contract must keep track of the approval ID it was given to transfer the NFT. Finally, the owner and sale conditions are needed.", "mimetype": "text/plain", "start_char_idx": 6140, "end_char_idx": 8001, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d765341-96a3-4740-9a66-dace6c50b460": {"__data__": {"id_": "9d765341-96a3-4740-9a66-dace6c50b460", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfd0b70c-979c-46c7-b602-3b5fe19e2b30", "node_type": "1", "metadata": {}, "hash": "a9ea46b5ad440db4e64f29a50a2c099ffecec876ece9010316c20df47f709655", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50d7c084-8c60-4361-8d03-76866a07751a", "node_type": "1", "metadata": {}, "hash": "f9b32ae21e3b5526215318cfc4c629d1049d7c3f2896560a979d31e8aa53a01b", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"9\" end=\"42\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/sale.ts\" />\n\n### Removing sales {#removing-sales}\n\nIn order to remove a listing, the owner must call the `remove_sale` function and pass the NFT contract and token ID. Behind the scenes, this calls the `internallyRemoveSale` function which you can find in the `internal.ts` file. This will assert one yoctoNEAR for security reasons.\n\n<Github language=\"js\" start=\"44\" end=\"65\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/sale.ts\" />\n\n### Updating price {#updating-price}\n\nIn order to update the list price of a token, the owner must call the `update_price` function and pass in the contract, token ID, and desired price. This will get the sale object, change the sale conditions, and insert it back. For security reasons, this function will assert one yoctoNEAR.\n\n<Github language=\"js\" start=\"67\" end=\"96\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/sale.ts\" />\n\n### Purchasing NFTs {#purchasing-nfts}\n\nFor purchasing NFTs, you must call the `offer` function. It takes an `nft_contract_id` and `token_id` as parameters. You must attach the correct amount of NEAR to the call in order to purchase. Behind the scenes, this will make sure your deposit is greater than the list price and call a private method `processPurchase` which will perform a cross-contract call to the NFT contract to invoke the `nft_transfer_payout` function. This will transfer the NFT using the [approval management](https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement) standard that you learned about and it will return the `Payout` object which includes royalties.\n\nThe marketplace will then call `resolve_purchase` where it will check for malicious payout objects and then if everything went well, it will pay the correct accounts.", "mimetype": "text/plain", "start_char_idx": 8003, "end_char_idx": 9961, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "50d7c084-8c60-4361-8d03-76866a07751a": {"__data__": {"id_": "50d7c084-8c60-4361-8d03-76866a07751a", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d765341-96a3-4740-9a66-dace6c50b460", "node_type": "1", "metadata": {}, "hash": "cb66b048f73731527c4c8239f3101a7ef43d06bd044eb64f89c352f4fbf82638", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "19d33ac9-ccd2-46b3-bf97-6003fcb830b0", "node_type": "1", "metadata": {}, "hash": "c63d5e7ed980b7a92aa70176e50a2b5ed7ea26b0354c822dc7a1a6ed9c716288", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"98\" end=\"131\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/8.marketplace/src/market-contract/sale.ts\" />\n\n## sale_view.ts {#sale_view-ts}\n\nThe final file we'll go through is the `sale_view.ts` file. This is where some of the enumeration methods are outlined. It allows users to query for important information regarding sales.\n\n### Total supply {#total-supply}\n\nTo query for the total supply of NFTs listed on the marketplace, you can call the `get_supply_sales` function. An example can be seen below.\n\n```bash\nnear view $MARKETPLACE_CONTRACT_ID get_supply_sales\n```\n\n### Total supply by owner {#total-supply-by-owner}\n\nTo query for the total supply of NFTs listed by a specific owner on the marketplace, you can call the `get_supply_by_owner_id` function. An example can be seen below.\n\n```bash\nnear view $MARKETPLACE_CONTRACT_ID get_supply_by_owner_id '{\"account_id\": \"benji.testnet\"}'\n```\n\n### Total supply by contract {#total-supply-by-contract}\n\nTo query for the total supply of NFTs that belong to a specific contract, you can call the `get_supply_by_nft_contract_id` function. An example can be seen below.\n\n```bash\nnear view $MARKETPLACE_CONTRACT_ID get_supply_by_nft_contract_id '{\"nft_contract_id\": \"fayyr-nft.testnet\"}'\n```\n\n### Query for listing information {#query-listing-information}\n\nTo query for important information for a specific listing, you can call the `get_sale` function. This requires that you pass in the `nft_contract_token`. This is essentially the unique identifier for sales on the market contract as explained earlier. It consists of the NFT contract followed by a `DELIMITER` followed by the token ID. In this contract, the `DELIMITER` is simply a period: `.`.  An example of this query can be seen below.", "mimetype": "text/plain", "start_char_idx": 9963, "end_char_idx": 11745, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "19d33ac9-ccd2-46b3-bf97-6003fcb830b0": {"__data__": {"id_": "19d33ac9-ccd2-46b3-bf97-6003fcb830b0", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50d7c084-8c60-4361-8d03-76866a07751a", "node_type": "1", "metadata": {}, "hash": "f9b32ae21e3b5526215318cfc4c629d1049d7c3f2896560a979d31e8aa53a01b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed200732-cbc6-40dd-8784-8925d94b1e91", "node_type": "1", "metadata": {}, "hash": "81ac930f4abd365843c46db29c0df321b156fb12eb7f99e30666740931353780", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view $MARKETPLACE_CONTRACT_ID get_sale '{\"nft_contract_token\": \"fayyr-nft.testnet.token-42\"}'\n```\n\nIn addition, you can query for paginated information about the listings for a given owner by calling the `get_sales_by_owner_id` function.\n\n```bash\nnear view $MARKETPLACE_CONTRACT_ID get_sales_by_owner_id '{\"account_id\": \"benji.testnet\", \"from_index\": \"5\", \"limit\": 10}'\n```\n\nFinally, you can query for paginated information about the listings that originate from a given NFT contract by calling the `get_sales_by_nft_contract_id` function.\n\n```bash\nnear view $MARKETPLACE_CONTRACT_ID get_sales_by_nft_contract_id '{\"nft_contract_id\": \"fayyr-nft.testnet, \"from_index\": \"5\", \"limit\": 10}'\n```\n\n## Conclusion\n\nIn this tutorial, you learned about the basics of a marketplace contract and how it works. You went through the [index.ts](#index-ts) file and learned about the [initialization function](#initialization-function) in addition to the [storage management](#storage-management-model) model. \n\nYou then went through the [nft_callbacks](#nft_callbacks-ts) file to understand how to [list NFTs](#listing-logic). In addition, you went through some important functions needed for after you've listed an NFT. This includes [removing sales](#removing-sales), [updating the price](#updating-price), and [purchasing NFTs](#purchasing-nfts).\n\nFinally, you went through the enumeration methods found in the [`sale_view`](#sale_view-ts) file. These allow you to query for important information found on the marketplace contract. \n\nYou should now have a solid understanding of NFTs and marketplaces on NEAR. Feel free to branch off and expand on these contracts to create whatever cool applications you'd like. The world is your oyster! Thanks for joining on this journey and don't forget, **Go Team!", "mimetype": "text/plain", "start_char_idx": 11747, "end_char_idx": 13550, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ed200732-cbc6-40dd-8784-8925d94b1e91": {"__data__": {"id_": "ed200732-cbc6-40dd-8784-8925d94b1e91", "embedding": null, "metadata": {"file_path": "./near_dist/8-marketplace.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "94f103e9-fddd-4546-9829-c36e02b52ded", "node_type": "4", "metadata": {}, "hash": "d267909163aa14c0a5ed1cad19a38f020f8050f474d89d4fce6161d1d5244bf0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "19d33ac9-ccd2-46b3-bf97-6003fcb830b0", "node_type": "1", "metadata": {}, "hash": "c63d5e7ed980b7a92aa70176e50a2b5ed7ea26b0354c822dc7a1a6ed9c716288", "class_name": "RelatedNodeInfo"}}, "text": "**\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 13550, "end_char_idx": 13794, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2fa82bc8-d180-4ab4-a194-bf0f178e2147": {"__data__": {"id_": "2fa82bc8-d180-4ab4-a194-bf0f178e2147", "embedding": null, "metadata": {"file_path": "./near_dist/blog-posts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b", "node_type": "4", "metadata": {}, "hash": "95927754ec3bfd44bc04df9c1a85d45ae68ef08bde18a10ca9ca06508fe63d6b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "837c91d8-f42b-4eb3-b982-037fad5f102c", "node_type": "1", "metadata": {}, "hash": "9bff769c906f0869bce8b014a0c2e807a5227c64a7133e946db8f3a721874ddc", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: blog-posts\ntitle: Blog Posts\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThe Blog post components enable your gateway to promote regular Near Social posts into fully fledged blog posts.\nIn this article you'll learn how to set up the required components so you can define a custom URL to show a clean feed of blog posts.\n\n## Setup\n\nTo set up the Blog post features on your [`near-discovery`](https://github.com/near/near-discovery/) gateway:\n\n1. Add the [`Blog.Feed`](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/Blog.Feed) and [`BlogPostPage`](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/BlogPostPage) components\n2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 770, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "837c91d8-f42b-4eb3-b982-037fad5f102c": {"__data__": {"id_": "837c91d8-f42b-4eb3-b982-037fad5f102c", "embedding": null, "metadata": {"file_path": "./near_dist/blog-posts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b", "node_type": "4", "metadata": {}, "hash": "95927754ec3bfd44bc04df9c1a85d45ae68ef08bde18a10ca9ca06508fe63d6b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2fa82bc8-d180-4ab4-a194-bf0f178e2147", "node_type": "1", "metadata": {}, "hash": "b97ca9f44cbd2ecdac3c5360c8db27c9fff94a0023a2e143c5c91de85cf01ed2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b8c5105-0f69-484c-aae2-5188e7b37cf4", "node_type": "1", "metadata": {}, "hash": "f8502cbfcf526dea32c5c3d0fc32f58e217bc72672aea360976b72c36f4de501", "class_name": "RelatedNodeInfo"}}, "text": "Add `near/widget/Blog.Feed` and `near/widget/BlogPostPage` to your configuration\n\n<Tabs>\n<TabItem value=\"discovery\" label=\"near-discovery\" default>\n\n- Edit your `bos-components.ts` configuration file:\n\n<Github fname=\"bos-components.ts\" language=\"js\" value=\"near-discovery\"\n    url=\"https://github.com/near/near-discovery/blob/c275ab7d70a6ee7baf3a88ace1c2e02f605da644/src/data/bos-components.ts\"\n    start=\"160\" end=\"165\" />\n\n</TabItem>\n\n<TabItem value=\"viewer\" label=\"nearsocial viewer\">\n\n- Edit your `widgets.js` configuration file:\n\n```js title=\"src/data/widgets.js\"\nconst MainnetWidgets = {\n  blog: 'near/widget/Blog.Feed',\n  blogPost: 'near/widget/BlogPostPage',\n  image: \"mob.near/widget/Image\",\n  default: \"mob.near/widget/Homepage\",\n  viewSource: \"mob.near/widget/WidgetSource\",\n  widgetMetadataEditor: \"mob.near/widget/WidgetMetadataEditor\",\n```\n\n</TabItem>\n\n</Tabs>\n\n### Blog feed URL\n\nTo set a custom URL such as `/bosblog` for your Blog feed, and define which users will be shown on it, do the following changes on your `near-discovery` gateway:\n\n<Tabs>\n<TabItem value=\"discovery\" label=\"near-discovery\" default>\n\n1. Create a folder `src/pages/<customURL>` for your desired custom path (e.g., `/bosblog`)\n2. Add this [`index.tsx`](https://github.com/near/near-discovery/blob/c275ab7d70a6ee7baf3a88ace1c2e02f605da644/src/pages/bosblog/index.tsx) file to `src/pages/bosblog/`:\n\n<Github fname=\"index.tsx\" language=\"js\" value=\"near-discovery\"\n    url=\"https://github.com/near/near-discovery/blob/c275ab7d70a6ee7baf3a88ace1c2e02f605da644/src/pages/bosblog/index.tsx\"\n    start=\"1\" end=\"50\" />\n\n</TabItem>\n\n<TabItem value=\"viewer\" label=\"nearsocial viewer\">\n\n1.", "mimetype": "text/plain", "start_char_idx": 771, "end_char_idx": 2437, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b8c5105-0f69-484c-aae2-5188e7b37cf4": {"__data__": {"id_": "8b8c5105-0f69-484c-aae2-5188e7b37cf4", "embedding": null, "metadata": {"file_path": "./near_dist/blog-posts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b", "node_type": "4", "metadata": {}, "hash": "95927754ec3bfd44bc04df9c1a85d45ae68ef08bde18a10ca9ca06508fe63d6b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "837c91d8-f42b-4eb3-b982-037fad5f102c", "node_type": "1", "metadata": {}, "hash": "9bff769c906f0869bce8b014a0c2e807a5227c64a7133e946db8f3a721874ddc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8762e39f-af36-4ced-8238-076a9e3317aa", "node_type": "1", "metadata": {}, "hash": "f358fbb738a059623517aa7755b612df0e85cce4c0a3bb424295680e3dde0705", "class_name": "RelatedNodeInfo"}}, "text": "Add this `BlogPage.js` file to `src/pages/`:\n\n```js title=\"src/pages/BlogPage.js\"\nimport React, { useEffect, useState } from \"react\";\nimport { Widget } from \"near-social-vm\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery } from \"../hooks/useQuery\";\nimport { useHashRouterLegacy } from \"../hooks/useHashRouterLegacy\";\n\nexport default function BlogPage(props) {\n  useHashRouterLegacy();\n\n  const { widgetSrc } = useParams();\n  const query = useQuery();\n  const [widgetProps, setWidgetProps] = useState({});\n  const src = widgetSrc || props.widgets.default;\n  const contributors = ['near', 'jacksonthedev.near'];\n\n  useEffect(() => {\n    setWidgetProps(\n      [...query.entries()].reduce((props, [key, value]) => {\n        props[key] = value;\n        return props;\n      }, {})\n    );\n  }, [query]);\n\n  if (widgetProps.accountId && widgetProps.blockHeight) {\n    return (\n    <div className=\"d-inline-block position-relative overflow-hidden\">\n      <Widget src={props.widgets.blogPost} props={widgetProps} />{\" \"}\n    </div>\n    );\n  }\n\n  widgetProps.contributors = contributors;\n\n  return (\n    <div className=\"d-inline-block position-relative overflow-hidden\">\n      <Widget src={props.widgets.blog} props={widgetProps} />{\" \"}\n    </div>\n  );\n}\n```\n\n2. Update your `App.js` router file, adding the new route to your custom path (e.g., `/bosblog`):\n\n```js title=\"src/App.js\"\nimport BlogPage from \"./pages/BlogPage\";\n```\n\n```js title=\"src/App.js\"\n            <Route path={\"/signin\"}>\n              <NavigationWrapper {...passProps} />\n              <SignInPage {...passProps} />\n            </Route>\n            <Route path={\"/bosblog\"}>\n              <NavigationWrapper {...passProps} />\n              <BlogPage {...passProps} />\n            </Route>\n```\n\n</TabItem>\n\n</Tabs>\n\n3. Edit the `contributors` list, with the account(s) that you want to showcase on your blog feed:\n\n   ```js\n   const contributors = ['near', 'jacksonthedev.near'];\n   ```\n\nThat's all, your gateway setup is done and you're ready to show your blog feed.", "mimetype": "text/plain", "start_char_idx": 2438, "end_char_idx": 4483, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8762e39f-af36-4ced-8238-076a9e3317aa": {"__data__": {"id_": "8762e39f-af36-4ced-8238-076a9e3317aa", "embedding": null, "metadata": {"file_path": "./near_dist/blog-posts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b", "node_type": "4", "metadata": {}, "hash": "95927754ec3bfd44bc04df9c1a85d45ae68ef08bde18a10ca9ca06508fe63d6b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8b8c5105-0f69-484c-aae2-5188e7b37cf4", "node_type": "1", "metadata": {}, "hash": "f8502cbfcf526dea32c5c3d0fc32f58e217bc72672aea360976b72c36f4de501", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5c2a9a0-b11e-412d-8310-85a436df567d", "node_type": "1", "metadata": {}, "hash": "07bc9ff0f8c74af74012b13213752025197d4ab972593b05600ca5ede8f43fad", "class_name": "RelatedNodeInfo"}}, "text": "Check the next sections if you want to learn more about the blog post [content formatting](#blog-post-formatting) and how to promote social messages into blog posts.\n\n:::tip\n\nIn this code example, only promoted blog posts from users `near` and `jacksonthedev.near` will appear in the Blog feed when someone browses the `/bosblog` URL.\n\n:::\n\n### Promoting posts\n\nIf you're using `near-discovery` you're all set, the <kbd>Promote</kbd> menu is already available using the [`v1.Posts.Feed`](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/v1.Posts.Feed) component.\n\nIf you're using a different gateway or your own custom feed, and you want to allow users to promote social messages into blog posts, you can integrate this `promoteToBlog` code snippet:\n\n```js\nconst { accountId, blockHeight, item } = props;\n\nconst promoteToBlog = () => {\n  if (state.loading) {\n    return;\n  }\n\n  if (!context.accountId && props.requestAuthentication) {\n    props.requestAuthentication();\n    return;\n  } else if (!context.accountId) {\n    return;\n  }\n\n  State.update({\n    loading: true,\n  });\n\n  const data = {\n    index: {\n      promote: JSON.stringify({\n        key: context.accountId,\n        value: {\n          operation: \"add\",\n          type: \"blog\",\n          post: item,\n          blockHeight,\n        },\n      }),\n    },\n  };\n\n  Social.set(data, {\n    onCommit: () => State.update({ loading: false }),\n    onCancel: () =>\n      State.update({\n        loading: false,\n      }),\n  });\n};\n```\n\n:::tip\n\nCheck the [`Posts.Menu`](https://near.org/near/widget/ComponentDetailsPage?src=near/widget/Posts.Menu&tab=source) component for a complete implementation that includes a drop-down menu and a button to promote a blog post.\n\n:::\n\n---\n\n## Blog post formatting\n\nWhen writing blog posts, you can format the content using standard [Markdown syntax](https://www.markdownguide.org/basic-syntax/).\nMarkdown is an easy-to-read, easy-to-write language for formatting plain text.", "mimetype": "text/plain", "start_char_idx": 4484, "end_char_idx": 6459, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5c2a9a0-b11e-412d-8310-85a436df567d": {"__data__": {"id_": "d5c2a9a0-b11e-412d-8310-85a436df567d", "embedding": null, "metadata": {"file_path": "./near_dist/blog-posts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b", "node_type": "4", "metadata": {}, "hash": "95927754ec3bfd44bc04df9c1a85d45ae68ef08bde18a10ca9ca06508fe63d6b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8762e39f-af36-4ced-8238-076a9e3317aa", "node_type": "1", "metadata": {}, "hash": "f358fbb738a059623517aa7755b612df0e85cce4c0a3bb424295680e3dde0705", "class_name": "RelatedNodeInfo"}}, "text": "The only two special cases that you should keep in mind when writing a blog post are:\n- the blog post's title\n- an optional header image\n\n#### Header image\n\nTo define an image for your blog post, just add a markdown image link at the top of your post:\n\n```md\n![header-image](https://example.com/image.png)\n```\n\n#### Blog post title\n\nTo set the post's title, define it using a top heading tag:\n\n```md\n# This is the title of a demo blog post\n```\n\n:::tip\n\nIf you're new to Markdown, you might want to check this page about [basic writing and formatting syntax](https://www.markdownguide.org/basic-syntax/).\n\n:::\n\n---\n\n## Writing a blog post\n\nAdding a new blog post is simple. To publish a new blog post, you only need to:\n1. Write a regular Near Social message\n\n   <img src=\"/docs/bosblog/blog-promote1.png\" width=\"60%\" />\n\n2. Repost the message and convert it to a Blog post\n\n   Once the message has been posted, promoting it to a blog post is straight forward.\n   Just click on the repost button, and select the `Blog` option:\n\n   ![blog post](/docs/bosblog/blog-promote2.png)\n\n3. That's it, your blog post has been published, and you can find it under the `Blog` tab in your [social profile](https://dev.near.org/near/widget/ProfilePage?accountId=bucanero.near&tab=blog):\n\n   ![blog post](/docs/bosblog/blog-promote3.png)\n\n\n:::note\n\nYou can find the published blog post example in [this link](https://dev.near.org/near/widget/BlogPostPage?accountId=bucanero.near&blockHeight=117452680&returnLocation=/near/widget/ProfilePage?accountId=bucanero.near&tab=blog).\n\n:::", "mimetype": "text/plain", "start_char_idx": 6461, "end_char_idx": 8025, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "19cb0415-6b74-442f-89da-67355abbdd42": {"__data__": {"id_": "19cb0415-6b74-442f-89da-67355abbdd42", "embedding": null, "metadata": {"file_path": "./near_dist/web-methods.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea", "node_type": "4", "metadata": {}, "hash": "8c88daacb55405058c1b867b4012e2739e0bda0d11ef07ca8938f7f71fe7c141", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "363bf672-6994-43cc-9763-c2e3596abbf1", "node_type": "1", "metadata": {}, "hash": "c9eb1c8904b3f046e620c024670c2a525e73d3dc0413be68f9a098622f82a41c", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: web-methods\ntitle: Web Browser Methods\n---\n\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nNEAR Components have access to classic web methods that enable them to:\n- [Fetch](#fetch) data from external sources.\n- [Cache](#cache) values to avoid redundant computations.\n- Use [LocalStorage](#localstorage) to store data in the web browser.\n- Access to the [Clipboard](#clipboard).\n\n---\n\n## Fetch\n\n`fetch` allows to fetch data from the URL. It acts like a hook. It's a wrapper around the `fetch` function from the browser behind the caching layer. \n\nThe possible returned values are:\n- If the data is not cached, it returns `null` and fetches the data in the background.\n- If the data is cached, it returns the cached value and then revalidates it.\n\n<WidgetEditor height=\"80\">\n\n```js\nconst res = fetch(\"https://rpc.mainnet.near.org/status\");\n\nreturn res.body;\n```\n\n</WidgetEditor>\n\n<hr className=\"subsection\" />\n\n#### Async Version\n\n`asyncFetch` is the `async` version of [`fetch`](#fetch), meaning that it returns a promise instead of a value.\n\n<WidgetEditor height=\"80\">\n\n```js\nconst [uptime, setUptime] = useState(null);\n\nfunction reportUptime() {\n  const promise = asyncFetch(\"https://rpc.mainnet.near.org/status\")\n  \n  promise.then(\n    res => { setUptime(res.body.uptime_sec) }\n  );\n}\n\nreturn <>\n  <p> {uptime? `Uptime: ${uptime}s` : `Fetch a value` } </p>\n  <button onClick={reportUptime}>Fetch uptime</button>\n</>\n```\n\n</WidgetEditor>\n\n:::tip\nIn contrast with `fetch`, `asyncFetch` does **not** cache the resulting value, so it should only be used within a function to avoid frequent requests on every render.\n:::\n\n---\n\n## Cache\n\nThe `useCache` hook takes a promise through a generator function, fetches the data and caches it. It can be used to easily use and cache data from async data sources.\n\nThe cache is global for the VM, but each cached element is identified by a unique `dataKey` within each component.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1942, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "363bf672-6994-43cc-9763-c2e3596abbf1": {"__data__": {"id_": "363bf672-6994-43cc-9763-c2e3596abbf1", "embedding": null, "metadata": {"file_path": "./near_dist/web-methods.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea", "node_type": "4", "metadata": {}, "hash": "8c88daacb55405058c1b867b4012e2739e0bda0d11ef07ca8938f7f71fe7c141", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "19cb0415-6b74-442f-89da-67355abbdd42", "node_type": "1", "metadata": {}, "hash": "8d5c91310943435e734571889aefe704d89095eef7ddc0d0e28718dece3c4152", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e67db99c-df98-47d2-b438-f815b5f1ef41", "node_type": "1", "metadata": {}, "hash": "47664406dfb417d24b422f6d2dc33b8310dcdfbca3ed6f4d0132b7f09a29dd5a", "class_name": "RelatedNodeInfo"}}, "text": "The possible values returned are:\n- `null` if the cache is cold and data is fetching\n- the `cached value` while the data is being fetched \n- A new `value` if new data is fetched.\n\n<WidgetEditor>\n\n```js\nconst status = useCache(\n  () =>\n    asyncFetch(\"https://rpc.mainnet.near.org/status\").then((res) => res.body),\n  \"mainnetRpcStatus\",\n  { subscribe: true }\n);\n\nreturn status;\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n| param              | required     | type   | description                                                          |\n|--------------------|--------------|--------|----------------------------------------------------------------------|\n| `promiseGenerator` | **required** | object | a function that returns a promise, which generates data.             |\n| `dataKey`          | **required** | object | the unique name (within the current component) to identify the data. |\n| `options`          | _optional_   | object | optional argument.                                                   |\n\n:::info options object\n\n- `subscribe` _(optional)_: if `true`, the data refreshes periodically by invalidating cache.\n\n:::\n\n:::note\n- `promiseGenerator`: you don't return the promise directly, because it should only be fired once.\n:::\n\n</details>\n\n:::tip\nThe [fetch](#fetch) method is built on top of the `useCache` hook.\n:::\n\n:::note\nThe data is being cached and compared as JSON serialized objects.", "mimetype": "text/plain", "start_char_idx": 1945, "end_char_idx": 3391, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e67db99c-df98-47d2-b438-f815b5f1ef41": {"__data__": {"id_": "e67db99c-df98-47d2-b438-f815b5f1ef41", "embedding": null, "metadata": {"file_path": "./near_dist/web-methods.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea", "node_type": "4", "metadata": {}, "hash": "8c88daacb55405058c1b867b4012e2739e0bda0d11ef07ca8938f7f71fe7c141", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "363bf672-6994-43cc-9763-c2e3596abbf1", "node_type": "1", "metadata": {}, "hash": "c9eb1c8904b3f046e620c024670c2a525e73d3dc0413be68f9a098622f82a41c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b79b80ac-d3b7-4ae3-95cf-c4943f1df0d6", "node_type": "1", "metadata": {}, "hash": "46b39e8a68e3f1554fd0a733d700ce62fa1cf50747a542f470bb36dbbad513d9", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n---\n\n## LocalStorage\n\nNEAR Components have access to a simulated `localStorage` through the `Storage` object:\n\n- [`Storage.get`](#storageget)\n- [`Storage.set`](#storageset)\n- [`Storage.privateGet`](#storageprivateget)\n- [`Storage.privateSet`](#storageprivateset)\n\n<WidgetEditor>\n\n```jsx\nconst [time, setTime] = useState(stored || Date.now()) \n\nconst storeValue = () => {\n  const date = Date.now();\n  Storage.set('time_now', date)\n}\n\nreturn <>\n  <p> Time Now: {Date.now()} </p>\n  <p> Time Stored: {Storage.get('time_now')} </p>\n  <button onClick={storeValue}>Store Date.now()</button>\n</>\n```\n\n</WidgetEditor>\n\n<details markdown=\"1\">\n<summary> Parameters </summary>\n\n#### Storage.get\n\n`Storage.get(key, widgetSrc?)` - returns the public value for a given key under the given widgetSrc or the current component if `widgetSrc` is omitted. Can only read public values.\n\n | param       | required     | type   | description              |\n |-------------|--------------|--------|--------------------------|\n | `key`       | **required** | object | a user-defined key       |\n | `widgetSrc` | _optional_   | object | a user-defined component |\n\n---\n\n#### Storage.set\n\n`Storage.set(key, value)` - sets the public value for a given key under the current widget. The value will be public, so other widgets can read it.\n\n | param   | required     | type   | description          |\n |---------|--------------|--------|----------------------|\n | `key`   | **required** | object | a user-defined key   |\n | `value` | **required** | object | a user-defined value |\n\n---\n\n#### Storage.privateGet\n\n`Storage.privateGet(key)` - returns the private value for a given key under the current component.\n\n | param | required     | type   | description                                    |\n |-------|--------------|--------|------------------------------------------------|\n | `key` | **required** | object | a user-defined key under the current component |\n\n---\n\n#### Storage.privateSet\n\n`Storage.privateSet(key, value)` - sets the private value for a given key under the current component. The value is private, only the current component can read it.", "mimetype": "text/plain", "start_char_idx": 3392, "end_char_idx": 5526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b79b80ac-d3b7-4ae3-95cf-c4943f1df0d6": {"__data__": {"id_": "b79b80ac-d3b7-4ae3-95cf-c4943f1df0d6", "embedding": null, "metadata": {"file_path": "./near_dist/web-methods.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea", "node_type": "4", "metadata": {}, "hash": "8c88daacb55405058c1b867b4012e2739e0bda0d11ef07ca8938f7f71fe7c141", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e67db99c-df98-47d2-b438-f815b5f1ef41", "node_type": "1", "metadata": {}, "hash": "47664406dfb417d24b422f6d2dc33b8310dcdfbca3ed6f4d0132b7f09a29dd5a", "class_name": "RelatedNodeInfo"}}, "text": ":::note\nPrivate and public values can share the same key and don't conflict.\n:::\n\n | param   | required     | type   | description                                    |\n |---------|--------------|--------|------------------------------------------------|\n | `key`   | **required** | object | a user-defined key under the current component |\n | `value` | **required** | object | a user-defined value                           |\n\n</details>\n\n---\n\n## Clipboard\n\nNEAR Components can **write** data to the system's clipboard through the `clipboard.writeText` method.\n\nWriting to the clipboard is **only** allowed in **trusted actions**, for example, when the user clicks a button.\n\n<WidgetEditor>\n\n```js\nconst copyToClipboard = (test) => { clipboard.writeText(\"Hello World!\") }\n\nreturn <>\n    <button onClick={copyToClipboard}> Copy </button>\n    <textarea className=\"form-control mt-2\" placeholder=\"Test pasting here\" />\n</>\n```\n\n</WidgetEditor>", "mimetype": "text/plain", "start_char_idx": 5528, "end_char_idx": 6468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2bb4f0c-2acd-4195-a13b-31d4c2092a4b": {"__data__": {"id_": "e2bb4f0c-2acd-4195-a13b-31d4c2092a4b", "embedding": null, "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4", "node_type": "4", "metadata": {}, "hash": "27b918a6b3f0caa9332a91c689ba69d487bee435e0af9ed55a6a10783974ae14", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4673e718-4b36-4a9d-85b3-6565914361a4", "node_type": "1", "metadata": {}, "hash": "5d8b7f9c91c2e9f47e0b75e3c818357d87c27d7ba704cd87341db43d05e813d9", "class_name": "RelatedNodeInfo"}}, "text": "---\nsidebar_position: 5\nsidebar_label: \"Add simple frontend\"\ntitle: \"Add a simple frontend to the crossword puzzle that checks the solution's hash\"\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nimport nearReactFriends from '/docs/assets/crosswords/near-and-react--dakila.near--rodolf_dtbbx.png';\n\n# Add a simple frontend\n\nThis will be the final section in this chapter, where we'll add a simple frontend using React and [`near-api-js`](https://docs.near.org/tools/near-api-js/quick-reference) to communicate with the smart contract.\n\n<figure>\n    <img src={nearReactFriends} alt=\"Two characters hanging out, NEAR and React. Art created by dakila.near\" width=\"600\"/>\n    <figcaption>Dynamic duo of NEAR as the backend and React as a frontend.<br/>Art by <a href=\"https://twitter.com/rodolf_dtbbx\" target=\"_blank\" rel=\"noopener noreferrer\">dakila.near</a></figcaption>\n</figure>\n<br/>\n\nThere will be three main files we'll be working with:\n1. `src/index.js` will be the entry point, where NEAR network configuration will be set up, and the view-only call to `get_solution` will happen.\n2. `src/App.js` is then called and sets up the crossword table and checks to see if a solution has been found.\n3. `src/utils.js` is used to make a view-only call to the blockchain to get the solution, and other helper functions.\n\n## Entry point\n\nWe'll go over a pattern that may look familiar to folks who have surveyed the [NEAR examples site](https://github.com/near-examples). We'll start with an asynchronous JavaScript function that sets up desired logic, then pass that to the React app.\n\n<Github language=\"js\" start=\"3\" end=\"22\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/3e497b4815600b8382614f76c7812520710f704d/src/index.js\" />\n\nLet's talk through the code above, starting with the imports.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1895, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4673e718-4b36-4a9d-85b3-6565914361a4": {"__data__": {"id_": "4673e718-4b36-4a9d-85b3-6565914361a4", "embedding": null, "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4", "node_type": "4", "metadata": {}, "hash": "27b918a6b3f0caa9332a91c689ba69d487bee435e0af9ed55a6a10783974ae14", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2bb4f0c-2acd-4195-a13b-31d4c2092a4b", "node_type": "1", "metadata": {}, "hash": "f542891e97f98deac826edd54f0a08c6dda20840c86f6de6da51c624c850adb4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71816b2d-ad3d-4820-8489-7ac8deafa0e4", "node_type": "1", "metadata": {}, "hash": "553ed7ea136dfbd1849d7840d900505dbaf9be4b15242b6b15284a72f0ac28a5", "class_name": "RelatedNodeInfo"}}, "text": "We import from:\n\n- `config.js` which, at the moment, is a common pattern. This file contains details on the different networks. (Which RPC endpoint to hit, which NEAR Wallet site to redirect to, which NEAR Explorer as well\u2026)\n- `utils.js` for that view-only function call that will call `get_solution` to retrieve the correct solution hash when a person has completed the crossword puzzle correctly.\n- `hardcoded-data.js` is a file containing info on the crossword puzzle clues. This chapter has covered the crossword puzzle where the solution is **near nomicon ref finance**, and according to the chapter overview we've committed to serving *one* puzzle. We'll improve our smart contract later, allowing for multiple crossword puzzles, but for now it's hardcoded here.\n\nNext, we define an asynchronous function called `initCrossword` that will be called before passing data to the React app. It's often useful to set up a connection with the blockchain here, but in our case all we need to do is retrieve the crossword puzzle solution as a hash. Note that we're attempting to pass this environment variable `NEAR_ENV` into our configuration file. `NEAR_ENV` is used to designate the blockchain network (testnet, betanet, mainnet) and is also [used in NEAR CLI](../../../2.build/2.smart-contracts/release/deploy.md).\n\nLastly, we'll call `initCrossword` and, when everything is complete, pass data to the React app contained in `App.js`.\n\n## React app\n\nHere's a large portion of the `App.js` file, which will make use of a fork of a React crossword library by Jared Reisinger.\n\n<Github language=\"js\" start=\"3\" end=\"54\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/3e497b4815600b8382614f76c7812520710f704d/src/App.js\" />\n\nWe'll discuss a few key points in the code above, but seeing as we're here to focus on a frontend connection to the blockchain, will brush over other parts that are library-specific.\n\nThe two imports worth highlighting are:\n\n- `parseSolutionSeedPhrase` from the utility file we'll cover shortly.", "mimetype": "text/plain", "start_char_idx": 1897, "end_char_idx": 3938, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "71816b2d-ad3d-4820-8489-7ac8deafa0e4": {"__data__": {"id_": "71816b2d-ad3d-4820-8489-7ac8deafa0e4", "embedding": null, "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4", "node_type": "4", "metadata": {}, "hash": "27b918a6b3f0caa9332a91c689ba69d487bee435e0af9ed55a6a10783974ae14", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4673e718-4b36-4a9d-85b3-6565914361a4", "node_type": "1", "metadata": {}, "hash": "5d8b7f9c91c2e9f47e0b75e3c818357d87c27d7ba704cd87341db43d05e813d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cfad766a-2027-4e61-b3f2-e6ffcd3b380a", "node_type": "1", "metadata": {}, "hash": "6de09d77b151cb0fa36362be4e2193ecf5cddf0cd7d5892cdabdb06610f2b8e5", "class_name": "RelatedNodeInfo"}}, "text": "This will take the solution entered by the user and put it in the correct order according to the rules discussed in [the chapter overview](00-overview.md#how-it-works).\n- `sha256` will take the ordered solution from above and hash it. Then we'll compare that hash with the one retrieved from the smart contract.\n\n```js\nconst [solutionFound, setSolutionFound] = useState(false);\n```\n\nWe're using [React Hooks](https://reactjs.org/docs/hooks-state.html) here, setting up the variable `solutionFound` that will be changed when the player of the crossword puzzle enters the final letter of the crossword puzzle, having entries for all the letters on the board.\n\nThe `onCrosswordComplete` and `checkSolution` blocks of code fire events to check the final solution entered by the user, hash it, and compare it to the `solutionHash` that was passed in from the view-only call in `index.js` earlier.\n\nFinally, we return the [JSX](https://reactjs.org/docs/introducing-jsx.html) for our app and render the crossword puzzle! In this basic case we'll change this heading to indicate when the user has completed the puzzle successfully:\n\n```html\n<h3>Status: { solutionFound }</h3>\n```\n\n## Utility functions\n\nWe'll be using two utility functions here:\n\n- `parseSolutionSeedPhrase` which will take a completed crossword puzzle and place the answers in the proper order. (Ascending by number, across answers come before down ones.)\n- `viewMethodOnContract` makes the view-only call to the smart contract to retrieve the solution hash.\n\nWe'll only focus on the second method:\n\n<Github language=\"js\" start=\"8\" end=\"12\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/3e497b4815600b8382614f76c7812520710f704d/src/utils.js\" />\n\nThis API doesn't look warm and friendly yet. You caught us! We'd love some help to improve our API as [detailed in this issue](https://github.com/near/near-api-js/issues/612), but for now, this is a concise way to get data from a view-only method.\n\nWe haven't had the frontend call a mutable method for our project yet.", "mimetype": "text/plain", "start_char_idx": 3939, "end_char_idx": 5990, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cfad766a-2027-4e61-b3f2-e6ffcd3b380a": {"__data__": {"id_": "cfad766a-2027-4e61-b3f2-e6ffcd3b380a", "embedding": null, "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4", "node_type": "4", "metadata": {}, "hash": "27b918a6b3f0caa9332a91c689ba69d487bee435e0af9ed55a6a10783974ae14", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "71816b2d-ad3d-4820-8489-7ac8deafa0e4", "node_type": "1", "metadata": {}, "hash": "553ed7ea136dfbd1849d7840d900505dbaf9be4b15242b6b15284a72f0ac28a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dcb3fef0-09fc-4f92-8a61-7ef7fc4c0283", "node_type": "1", "metadata": {}, "hash": "a0369d2c61cd701aaeb848e80fa7f4520393374095ea7468893f3a5e6c87326b", "class_name": "RelatedNodeInfo"}}, "text": "We'll get into that in the coming chapters when we'll want to have a prize sent to the first person to solve the puzzle.\n\n## Run the React app\n\nLet's run our frontend on testnet! We won't add any new concepts at this point in the chapter, but note that the [near examples](https://github.com/near-examples) typically create an account for you automatically with a NodeJS command. We covered the important pattern of creating a subaccount and deploying the smart contract to it, so let's stick with that pattern as we start up our frontend.\n\nGo into the directory containing the Rust smart contract and build it:\n\n```bash\ncd contract\n\n# Build\ncargo near build\n```\n\nCreate fresh account if you wish, which is good practice:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n  \n  ```bash\n  # Delete an account\n  near delete-account crossword.friend.testnet friend.testnet --networkId testnet\n  \n  # Create an account again\n  near create-account crossword.friend.testnet --use-account friend.testnet --initial-balance 1 --network-id testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n  \n  ```bash\n  # Delete an account\n  near account delete-account crossword.friend.testnet beneficiary friend.testnet network-config testnet sign-with-keychain send\n\n  # Create an account again\n  near account create-account fund-myself crossword.friend.testnet '1 NEAR' autogenerate-new-keypair save-to-keychain sign-as friend.testnet network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\nDeploy the contract:\n\n```bash\ncargo near deploy crossword.friend.testnet with-init-call new json-args '{\"solution\": \"69c2feb084439956193f4c21936025f14a5a5a78979d67ae34762e18a7206a0f\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\nReturn to the project root and start the React app:\n\n```bash\ncd ..\nenv CONTRACT_NAME=crossword.friend.testnet npm run start\n```\n\nThe last line sends the environment variable `CONTRACT_NAME` into the NodeJS script.", "mimetype": "text/plain", "start_char_idx": 5991, "end_char_idx": 8013, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dcb3fef0-09fc-4f92-8a61-7ef7fc4c0283": {"__data__": {"id_": "dcb3fef0-09fc-4f92-8a61-7ef7fc4c0283", "embedding": null, "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4", "node_type": "4", "metadata": {}, "hash": "27b918a6b3f0caa9332a91c689ba69d487bee435e0af9ed55a6a10783974ae14", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cfad766a-2027-4e61-b3f2-e6ffcd3b380a", "node_type": "1", "metadata": {}, "hash": "6de09d77b151cb0fa36362be4e2193ecf5cddf0cd7d5892cdabdb06610f2b8e5", "class_name": "RelatedNodeInfo"}}, "text": "This is picked up in the `config.js` file that's used to set up the contract account and network configuration:\n\n<Github language=\"js\" start=\"1\" end=\"2\" url=\"https://github.com/near-examples/crossword-tutorial-chapter-1/blob/3e497b4815600b8382614f76c7812520710f704d/src/config.js\" />\n\nAfter running the last command to start the React app, you'll be given a link to a local website, like `https://localhost:1234`. When you visit the site you'll see the simple frontend that interacts with our smart contract:\n\n![Crossword puzzle frontend showing a filled out puzzle with clues on the right sidebar](/docs/assets/crosswords/basics-final-frontend.png)\n\nAgain, the full code for this chapter is [available here](https://github.com/near-examples/crossword-tutorial-chapter-1).", "mimetype": "text/plain", "start_char_idx": 8014, "end_char_idx": 8786, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cdf21c5a-ad02-4ff4-a60e-7981a3d95b51": {"__data__": {"id_": "cdf21c5a-ad02-4ff4-a60e-7981a3d95b51", "embedding": null, "metadata": {"file_path": "./near_dist/state.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "351e3a3b-8bd0-4722-ae19-a52bce152361", "node_type": "4", "metadata": {}, "hash": "48fbf097f1ea700dce94ec40d432317cc09630f273fc50176179409931211803", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01b242ab-eed3-44c6-a522-3847f0c5c782", "node_type": "1", "metadata": {}, "hash": "bd69d6863bc6ba329f4fdcfaa7966bbf42fe00b3b000cfad2ebcfec6ab91af37", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: state\ntitle: Basics\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {WidgetEditor} from \"@site/src/components/widget-editor\"\n\nBorrowing from React, Near Components use hooks such as [**`useState`**](#state) and [**`useEffect`**](#useeffect-hook) to handle the state's logic, and [**props**](#props) to receive parameters.\n\nNear Components are stored in the blockchain, for which you will use the `NEAR VM` to [retrieve and execute them in the browser](../../4.web3-apps/integrate-components.md).\n\nUsing a VM enforces components to be sandboxed, making them very secure since they cannot access your `LocalStorage` or other elements in the page they are incorporated to. However, because of this, components cannot import external libraries. However, they can [**import functions**](#import) from other components.\n\n---\n\n## State\nTo handle the component's state you can use `useState` hook. The `useState` hook returns a tuple of two values: the current state and a function that updates it.\n\n<WidgetEditor>\n\n```jsx\nconst [count, setCount] = useState(0);\n\nreturn (\n  <div>\n    <p>You clicked {count} times</p>\n    <button onClick={() => setCount(count + 1)}>Click me</button>\n  </div>\n);\n\n```\n\n</WidgetEditor>\n\nEach time a state variable is updated, the component will be **re-rendered**. This means that the **whole code will run again**.\n\n---\n\n## Props\nEach component has access to a local variable named `props` which holds the properties received as input when the component is composed.\n\n<WidgetEditor id='2'>\n\n```jsx\nreturn <>\n  <p> This component props: {JSON.stringify(props)} </p>\n  <Widget src=\"influencer.testnet/widget/Greeter\" \n          props={{name: \"Maria\", amount: 2}} />\n</>\n```\n\n</WidgetEditor>\n\n---\n\n## useEffect Hook\n\nThe [`useEffect` hook](https://react.dev/learn/synchronizing-with-effects) is used to handle side effects. It will execute each time one of the dependencies changes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1944, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01b242ab-eed3-44c6-a522-3847f0c5c782": {"__data__": {"id_": "01b242ab-eed3-44c6-a522-3847f0c5c782", "embedding": null, "metadata": {"file_path": "./near_dist/state.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "351e3a3b-8bd0-4722-ae19-a52bce152361", "node_type": "4", "metadata": {}, "hash": "48fbf097f1ea700dce94ec40d432317cc09630f273fc50176179409931211803", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cdf21c5a-ad02-4ff4-a60e-7981a3d95b51", "node_type": "1", "metadata": {}, "hash": "085658cf248b7140c6ce1609893a54f8644bdfbe668f4226b4deac2fc685f715", "class_name": "RelatedNodeInfo"}}, "text": "<WidgetEditor id='3'>\n\n```jsx\nconst [count, setCount] = useState(0);\nconst [visible, setVisible] = useState(false);\n\nuseEffect(() => {\n  if(count > 5) setVisible(true);\n}, [count]);\n\nreturn (\n  <div>\n    <p>You clicked {count} times</p>\n    <p className=\"alert alert-danger\" hidden={!visible}>\n      You clicked more than 5 times\n    </p>\n    <button onClick={() => setCount(count + 1)}>Click me</button>\n  </div>\n);  \n```\n</WidgetEditor>\n\n---\n\n## Import\n\nComponents can import functions from other components. This is useful to reuse code and to create libraries of components.\n\n<WidgetEditor id='4'>\n\n```jsx\nconst {add, multiply} = VM.require('influencer.testnet/widget/Math');\n\nreturn <>\n  <p> 2 + 3 = {add(2, 3)} </p>\n  <p> 2 * 3 = {multiply(2, 3)} </p>\n</>\n```\n\n</WidgetEditor>\n\nWhere the code of the `Math` component is:\n\n```js\nfunction add(a, b) {\n  return a + b;\n}\n\nfunction multiply(a, b) {\n  return a * b;\n}\n\nreturn { add, multiply };\n```", "mimetype": "text/plain", "start_char_idx": 1946, "end_char_idx": 2894, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d0f260d-9140-45a7-bb6a-2b62b5591248": {"__data__": {"id_": "7d0f260d-9140-45a7-bb6a-2b62b5591248", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "78677192-2503-4e9e-8534-1e55cd7718b1", "node_type": "1", "metadata": {}, "hash": "8d272d924582e0bea960debf8d4e455910a24217a028588fbd1c340c09ab2512", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: contracts\ntitle: Accounts / Contracts\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to view details about accounts and contracts as well as perform contract calls.\n\n---\n\n## View account {#view-account}\n\n> Returns basic account information.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 301, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78677192-2503-4e9e-8534-1e55cd7718b1": {"__data__": {"id_": "78677192-2503-4e9e-8534-1e55cd7718b1", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7d0f260d-9140-45a7-bb6a-2b62b5591248", "node_type": "1", "metadata": {}, "hash": "f8c7cf8b7db41ce41e6c5d4aad406be0c0618afec7695f5cc5fd5831ad88dd45", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e889a92f-7491-42ac-b5b2-29dce7ba71ca", "node_type": "1", "metadata": {}, "hash": "513cb3afcbb8847903c6220cfbd45e0fc90fc8107cac7e93845265986de2aa78", "class_name": "RelatedNodeInfo"}}, "text": "- method: `query`\n- params:\n  - `request_type`: `view_account`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: _`\"example.testnet\"`_\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"view_account\",\n    \"finality\": \"final\",\n    \"account_id\": \"nearkat.testnet\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"view_account\",\n  finality: \"final\",\n  account_id: \"nearkat.testnet\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_account\",\n    \"finality\": \"final\",\n    \"account_id\": \"nearkat.testnet\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"amount\": \"399992611103597728750000000\",\n    \"locked\": \"0\",\n    \"code_hash\": \"11111111111111111111111111111111\",\n    \"storage_usage\": 642,\n    \"storage_paid_at\": 0,\n    \"block_height\": 17795474,\n    \"block_hash\": \"9MjpcnwW3TSdzGweNfPbkx8M74q1XzUcT1PAN8G5bNDz\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?", "mimetype": "text/plain", "start_char_idx": 303, "end_char_idx": 1711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e889a92f-7491-42ac-b5b2-29dce7ba71ca": {"__data__": {"id_": "e889a92f-7491-42ac-b5b2-29dce7ba71ca", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "78677192-2503-4e9e-8534-1e55cd7718b1", "node_type": "1", "metadata": {}, "hash": "8d272d924582e0bea960debf8d4e455910a24217a028588fbd1c340c09ab2512", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c42c4006-3f9d-4219-a357-e2fba71c34cd", "node_type": "1", "metadata": {}, "hash": "8445b35b70c4c4f59aa77c2bf3fa839ff91abd660bc9aaac10b06d8b2c2a0649", "class_name": "RelatedNodeInfo"}}, "text": "{#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `view_account` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"5\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.", "mimetype": "text/plain", "start_char_idx": 1712, "end_char_idx": 3363, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c42c4006-3f9d-4219-a357-e2fba71c34cd": {"__data__": {"id_": "c42c4006-3f9d-4219-a357-e2fba71c34cd", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e889a92f-7491-42ac-b5b2-29dce7ba71ca", "node_type": "1", "metadata": {}, "hash": "513cb3afcbb8847903c6220cfbd45e0fc90fc8107cac7e93845265986de2aa78", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c56525d-1ea1-44f0-bf0f-184830e6d12a", "node_type": "1", "metadata": {}, "hash": "cd2a8b44f88ace70608ac5891392a3c2e71ffd722f7ff5c82a5c8471c77cbbe6", "class_name": "RelatedNodeInfo"}}, "text": "io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>\n          <li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to find the requested data because it does not track the shard where data is present</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 3363, "end_char_idx": 5028, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c56525d-1ea1-44f0-bf0f-184830e6d12a": {"__data__": {"id_": "2c56525d-1ea1-44f0-bf0f-184830e6d12a", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c42c4006-3f9d-4219-a357-e2fba71c34cd", "node_type": "1", "metadata": {}, "hash": "8445b35b70c4c4f59aa77c2bf3fa839ff91abd660bc9aaac10b06d8b2c2a0649", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96856653-95b4-4407-bc21-eb57aba40aee", "node_type": "1", "metadata": {}, "hash": "c68c953790e97bd53f5f5639e8a49b3b53208f75092532fbfc3352aaf11ad8fa", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View account changes {#view-account-changes}\n\n> Returns account changes from transactions in a given account.\n\n- method: `EXPERIMENTAL_changes`\n- params:\n  - `changes_type`: `account_changes`\n  - `account_ids`: [`\"example.testnet\"`]\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes\",\n  \"params\": {\n    \"changes_type\": \"account_changes\",\n    \"account_ids\": [\"your_account.testnet\"],\n    \"block_id\": 19703467\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes({\n  changes_type: \"account_changes\",\n  account_ids: [\"nearkat.testnet\"],\n  block_id: 19703467,\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.", "mimetype": "text/plain", "start_char_idx": 5028, "end_char_idx": 6632, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96856653-95b4-4407-bc21-eb57aba40aee": {"__data__": {"id_": "96856653-95b4-4407-bc21-eb57aba40aee", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c56525d-1ea1-44f0-bf0f-184830e6d12a", "node_type": "1", "metadata": {}, "hash": "cd2a8b44f88ace70608ac5891392a3c2e71ffd722f7ff5c82a5c8471c77cbbe6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8", "node_type": "1", "metadata": {}, "hash": "6477aa3f21a4c372600215cbd10de66259083340179cfe51fc3e93a2c84de58a", "class_name": "RelatedNodeInfo"}}, "text": "0 id=dontcare method=EXPERIMENTAL_changes \\\n  params:='{\n    \"changes_type\": \"account_changes\",\n    \"account_ids\": [\"your_account.testnet\"],\n    \"block_id\": 19703467\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"6xsfPSG89s6fCMShxxxQTP6D4ZHM9xkGCgubayTDRzAP\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"type\": \"transaction_processing\",\n          \"tx_hash\": \"HLvxLKFM7gohFSqXPp5SpyydNEVpAno352qJJbnddsz3\"\n        },\n        \"type\": \"account_update\",\n        \"change\": {\n          \"account_id\": \"your_account.testnet\",\n          \"amount\": \"499999959035075000000000000\",\n          \"locked\": \"0\",\n          \"code_hash\": \"11111111111111111111111111111111\",\n          \"storage_usage\": 182,\n          \"storage_paid_at\": 0\n        }\n      },\n      {\n        \"cause\": {\n          \"type\": \"receipt_processing\",\n          \"receipt_hash\": \"CPenN1dp4DNKnb9LiL5hkPmu1WiKLMuM7msDjEZwDmwa\"\n        },\n        \"type\": \"account_update\",\n        \"change\": {\n          \"account_id\": \"your_account.testnet\",\n          \"amount\": \"499999959035075000000000000\",\n          \"locked\": \"0\",\n          \"code_hash\": \"11111111111111111111111111111111\",\n          \"storage_usage\": 264,\n          \"storage_paid_at\": 0\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?", "mimetype": "text/plain", "start_char_idx": 6632, "end_char_idx": 8025, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8": {"__data__": {"id_": "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96856653-95b4-4407-bc21-eb57aba40aee", "node_type": "1", "metadata": {}, "hash": "c68c953790e97bd53f5f5639e8a49b3b53208f75092532fbfc3352aaf11ad8fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f690f46a-64b9-44ab-952e-29b42331acb1", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}}, "text": "{#what-could-go-wrong-1}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 8026, "end_char_idx": 8831, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f690f46a-64b9-44ab-952e-29b42331acb1": {"__data__": {"id_": "f690f46a-64b9-44ab-952e-29b42331acb1", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8", "node_type": "1", "metadata": {}, "hash": "6477aa3f21a4c372600215cbd10de66259083340179cfe51fc3e93a2c84de58a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "33ce5610-8a30-4be6-8077-8468142ba023", "node_type": "1", "metadata": {}, "hash": "46a2ecc4d72b891ec52611460f6ee52d849b8d32e5efb3187fef144581449cbe", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 8833, "end_char_idx": 10368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "33ce5610-8a30-4be6-8077-8468142ba023": {"__data__": {"id_": "33ce5610-8a30-4be6-8077-8468142ba023", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f690f46a-64b9-44ab-952e-29b42331acb1", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9494608e-ce09-4c80-9ae5-12200663cb68", "node_type": "1", "metadata": {}, "hash": "58c220fed7652bee9302d15099b3949acae6c6c9e4f70695e3a0de8ab4d93a70", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View contract code {#view-contract-code}\n\n> Returns the contract code (Wasm binary) deployed to the account. Please note that the returned code will be encoded in base64.", "mimetype": "text/plain", "start_char_idx": 10368, "end_char_idx": 11158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9494608e-ce09-4c80-9ae5-12200663cb68": {"__data__": {"id_": "9494608e-ce09-4c80-9ae5-12200663cb68", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "33ce5610-8a30-4be6-8077-8468142ba023", "node_type": "1", "metadata": {}, "hash": "46a2ecc4d72b891ec52611460f6ee52d849b8d32e5efb3187fef144581449cbe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6a74d468-382d-4915-8d3b-3c5dfea5fba8", "node_type": "1", "metadata": {}, "hash": "8c15b6623915d511e506bdf0ed1f0e53ddb7c4941f60833439fe8a80f97085e0", "class_name": "RelatedNodeInfo"}}, "text": "- method: `query`\n- params:\n  - `request_type`: `view_code`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: `\"guest-book.testnet\"`,\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"view_code\",\n    \"finality\": \"final\",\n    \"account_id\": \"guest-book.testnet\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"view_code\",\n  finality: \"final\",\n  account_id: \"guest-book.testnet\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_code\",\n    \"finality\": \"final\",\n    \"account_id\": \"guest-book.testnet\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"code_base64\": \"47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\",\n    \"hash\": \"7KoFshMQkdyo5iTx8P2LbLu9jQpxRn24d27FrKShNVXs\",\n    \"block_height\": 17814234,\n    \"block_hash\": \"GT1D8nweVQU1zyCUv399x8vDv2ogVq71w17MyR66hXBB\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?", "mimetype": "text/plain", "start_char_idx": 11160, "end_char_idx": 12525, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6a74d468-382d-4915-8d3b-3c5dfea5fba8": {"__data__": {"id_": "6a74d468-382d-4915-8d3b-3c5dfea5fba8", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9494608e-ce09-4c80-9ae5-12200663cb68", "node_type": "1", "metadata": {}, "hash": "58c220fed7652bee9302d15099b3949acae6c6c9e4f70695e3a0de8ab4d93a70", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1ad96e22-2867-4b73-9425-5cd871c859c5", "node_type": "1", "metadata": {}, "hash": "72fdd67b209ca9a48d4145f4b0e318bb6c9bfd814da57a3f05a877cf840c7206", "class_name": "RelatedNodeInfo"}}, "text": "{#what-could-go-wrong-2}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `view_code` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"6\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>", "mimetype": "text/plain", "start_char_idx": 12526, "end_char_idx": 14323, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1ad96e22-2867-4b73-9425-5cd871c859c5": {"__data__": {"id_": "1ad96e22-2867-4b73-9425-5cd871c859c5", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6a74d468-382d-4915-8d3b-3c5dfea5fba8", "node_type": "1", "metadata": {}, "hash": "8c15b6623915d511e506bdf0ed1f0e53ddb7c4941f60833439fe8a80f97085e0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "be1ab419-c0cc-428a-a12e-120c64e4a43a", "node_type": "1", "metadata": {}, "hash": "04eae5d134af3a3a8ddd30f9865f02d46d9406a11bf8185b2543d706da56c2e0", "class_name": "RelatedNodeInfo"}}, "text": "<td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>\n          <li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_CONTRACT_CODE</td>\n      <td>200</td>\n      <td>The account does not have any <code>contract</code> deployed on it</td>\n      <td>\n        <ul>\n          <li>Use different account</li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to find the requested data because it does not track the shard where data is present</td>\n      <td>", "mimetype": "text/plain", "start_char_idx": 14330, "end_char_idx": 15488, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "be1ab419-c0cc-428a-a12e-120c64e4a43a": {"__data__": {"id_": "be1ab419-c0cc-428a-a12e-120c64e4a43a", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1ad96e22-2867-4b73-9425-5cd871c859c5", "node_type": "1", "metadata": {}, "hash": "72fdd67b209ca9a48d4145f4b0e318bb6c9bfd814da57a3f05a877cf840c7206", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9fb6b280-4cd6-48ce-9146-418e5f79110f", "node_type": "1", "metadata": {}, "hash": "dfc9a61b597092ea136b393ecbe860cf5ff77efbf0ba078052321320a6c033b8", "class_name": "RelatedNodeInfo"}}, "text": "<ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View contract state {#view-contract-state}\n\n> Returns the state (key value pairs) of a contract based on the key prefix (base64 encoded).", "mimetype": "text/plain", "start_char_idx": 15497, "end_char_idx": 16927, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9fb6b280-4cd6-48ce-9146-418e5f79110f": {"__data__": {"id_": "9fb6b280-4cd6-48ce-9146-418e5f79110f", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "be1ab419-c0cc-428a-a12e-120c64e4a43a", "node_type": "1", "metadata": {}, "hash": "04eae5d134af3a3a8ddd30f9865f02d46d9406a11bf8185b2543d706da56c2e0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "398ef57e-536f-4d13-ac3e-91e1130167e0", "node_type": "1", "metadata": {}, "hash": "0ea30dac3e28f91f1df8816fb8b34e2340c9e7353036e33adea3f4bdcab6c16c", "class_name": "RelatedNodeInfo"}}, "text": "Pass an empty string for `prefix_base64` if you would like to return the entire state. Please note that the returned state will be base64 encoded as well.\n\n- method: `query`\n- params:\n  - `request_type`: `view_state`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: `\"guest-book.testnet\"`,\n  - `prefix_base64`: `\"\"`\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"view_state\",\n    \"finality\": \"final\",\n    \"account_id\": \"guest-book.testnet\",\n    \"prefix_base64\": \"\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"view_state\",\n  finality: \"final\",\n  account_id: \"guest-book.testnet\",\n  prefix_base64: \"\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_state\",\n    \"finality\": \"final\",\n    \"account_id\": \"guest-book.testnet\",\n    \"prefix_base64\": \"\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"values\": [\n      {\n        \"key\": \"bTo6MA==\",", "mimetype": "text/plain", "start_char_idx": 16928, "end_char_idx": 18305, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "398ef57e-536f-4d13-ac3e-91e1130167e0": {"__data__": {"id_": "398ef57e-536f-4d13-ac3e-91e1130167e0", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fb6b280-4cd6-48ce-9146-418e5f79110f", "node_type": "1", "metadata": {}, "hash": "dfc9a61b597092ea136b393ecbe860cf5ff77efbf0ba078052321320a6c033b8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fd72888a-3797-4837-a6d2-f7d306d3dae8", "node_type": "1", "metadata": {}, "hash": "df8321bdf40f94bdd4914b847aae9b0087ed14f333843ea659c8205f7f04c81e", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJqb3NoZm9yZC50ZXN0bmV0IiwidGV4dCI6ImhlbGxvIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MQ==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiY2hhZG9oIiwidGV4dCI6ImhlbGxvIGVyeWJvZHkifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTA=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoic2F0b3NoaWYudGVzdG5ldCIsInRleHQiOiJIaWxsbyEifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTE=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidmFsZW50aW5lc29rb2wudGVzdG5ldCIsInRleHQiOiJIaSEifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTI=\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJobngudGVzdG5ldCIsInRleHQiOiJoZWxsbyJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTM=\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJobngudGVzdG5ldCIsInRleHQiOiJzZCJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTQ=\",", "mimetype": "text/plain", "start_char_idx": 18314, "end_char_idx": 19287, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fd72888a-3797-4837-a6d2-f7d306d3dae8": {"__data__": {"id_": "fd72888a-3797-4837-a6d2-f7d306d3dae8", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "398ef57e-536f-4d13-ac3e-91e1130167e0", "node_type": "1", "metadata": {}, "hash": "0ea30dac3e28f91f1df8816fb8b34e2340c9e7353036e33adea3f4bdcab6c16c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32ed1467-361d-4545-88aa-cf7fba530e95", "node_type": "1", "metadata": {}, "hash": "af8e911cfbb056855105a8595f25e1376bfd585154b91fb8c3c0a16cb05210a4", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiamdoZy50ZXN0bmV0IiwidGV4dCI6IktoZyJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTU=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiYWNjb3VudC50ZXN0bmV0IiwidGV4dCI6IldoZW4gSUNPPyJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTY=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiYWNjb3VudC50ZXN0bmV0IiwidGV4dCI6IlRlc3QgMiJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTc=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidGVzdC1kcm9wLTEwLnRlc3RuZXQiLCJ0ZXh0IjoiRnJlZSBtZXNzYWdlcyBhcmUgdGhlIGJlc3QifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTg=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidGVzdC1kcm9wLTEwLnRlc3RuZXQiLCJ0ZXh0IjoiV2hlbiBJQ08/In0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MTk=\",", "mimetype": "text/plain", "start_char_idx": 19296, "end_char_idx": 20156, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "32ed1467-361d-4545-88aa-cf7fba530e95": {"__data__": {"id_": "32ed1467-361d-4545-88aa-cf7fba530e95", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd72888a-3797-4837-a6d2-f7d306d3dae8", "node_type": "1", "metadata": {}, "hash": "df8321bdf40f94bdd4914b847aae9b0087ed14f333843ea659c8205f7f04c81e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18fce0c3-5ecd-4d74-8bcf-50afcf71257d", "node_type": "1", "metadata": {}, "hash": "afa7ff95c510e83923abd43375312b00c203281242a1f6b9d2c9c7424cf465f0", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidGVzdC1kcm9wLTEwLnRlc3RuZXQiLCJ0ZXh0IjoiV2hlbiBJQ08/In0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Mg==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoibnVsbCIsInRleHQiOiJ1bmRlZmluZWQifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjA=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidGVzdC04NDEudGVzdG5ldCIsInRleHQiOiJXaGVuIElDTz8ifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjE=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidGVzdC04NDEudGVzdG5ldCIsInRleHQiOiJoZXkgaGV5IGhleSJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjI=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiam9zaGZvcmQudGVzdG5ldCIsInRleHQiOiJoaSJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjM=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiam9zaGZvcmQudGVzdG5ldCIsInRleHQiOiJoaSB4MiJ9\",\n        \"proof\": []\n      },", "mimetype": "text/plain", "start_char_idx": 20165, "end_char_idx": 21127, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "18fce0c3-5ecd-4d74-8bcf-50afcf71257d": {"__data__": {"id_": "18fce0c3-5ecd-4d74-8bcf-50afcf71257d", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "32ed1467-361d-4545-88aa-cf7fba530e95", "node_type": "1", "metadata": {}, "hash": "af8e911cfbb056855105a8595f25e1376bfd585154b91fb8c3c0a16cb05210a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "40e05d76-5a1c-416d-8beb-72e9cec47985", "node_type": "1", "metadata": {}, "hash": "e45b3d8c3772876087c3fdf96196e4274b14cf92180782ab43e46660c6934dd5", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"key\": \"bTo6MjQ=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoibWFzdGVydGh5c2VsZi50ZXN0bmV0IiwidGV4dCI6ImhhbmRzaGFrZS5oYWNrbWVkb21haW4vICJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjU=\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJtYXN0ZXJ0aHlzZWxmLnRlc3RuZXQiLCJ0ZXh0IjoiSGVsbG8gQ29zbW9zLCBob21lLmNvc21hdHJpeGNvbm5lY3Rpb25zLyJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MjY=\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJtYXN0ZXJ0aHlzZWxmLnRlc3RuZXQiLCJ0ZXh0IjoiYnVpbGQsIGJ1aWxkLCBidWlsZCBpIGNhbWUgdG8gYnVpbGQgYSBicmlkZ2UgaW4gUEVBQ0UsIHNvIGNvbWUgbGV0cyBidWlsZC4uLnNvbmcgYnkgXCJOYWhrbyBCZWFyXCIgIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Mjc=\",", "mimetype": "text/plain", "start_char_idx": 21134, "end_char_idx": 21873, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "40e05d76-5a1c-416d-8beb-72e9cec47985": {"__data__": {"id_": "40e05d76-5a1c-416d-8beb-72e9cec47985", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18fce0c3-5ecd-4d74-8bcf-50afcf71257d", "node_type": "1", "metadata": {}, "hash": "afa7ff95c510e83923abd43375312b00c203281242a1f6b9d2c9c7424cf465f0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1052f0ef-6f06-4986-acfc-6c47f7f1f235", "node_type": "1", "metadata": {}, "hash": "567c4385922f034f6e02f1f10c715f9f20f61dfb4cb42a0078a5a3bafd9a28c3", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJtYXN0ZXJ0aHlzZWxmLnRlc3RuZXQiLCJ0ZXh0IjoiYnVpbGQgYSBicmlkZ2UgKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vdXJsP3NhPXQmcmN0PWomcT0mZXNyYz1zJnNvdXJjZT13ZWImY2Q9JmNhZD1yamEmdWFjdD04JnZlZD0yYWhVS0V3ajA0ZGlnMTlqckFoV05tbGtLSGR5X0FnUVEzeXd3QUhvRUNBVVFBZyZ1cmw9aHR0cHMlM0ElMkYlMkZ3d3cueW91dHViZS5jb20lMkZ3YXRjaCUzRnYlM0Rlb1RYNWZmOVplMCZ1c2c9QU92VmF3MFoxZzFIMkZzeF85d3FJSmg5RTk2UCkifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Mjg=\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJtYXN0ZXJ0aHlzZWxmLnRlc3RuZXQiLCJ0ZXh0IjoiaHR0cDovL3RyaXBweS7wn42EbWFnaWMvIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Mjk=\",", "mimetype": "text/plain", "start_char_idx": 21882, "end_char_idx": 22555, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1052f0ef-6f06-4986-acfc-6c47f7f1f235": {"__data__": {"id_": "1052f0ef-6f06-4986-acfc-6c47f7f1f235", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "40e05d76-5a1c-416d-8beb-72e9cec47985", "node_type": "1", "metadata": {}, "hash": "e45b3d8c3772876087c3fdf96196e4274b14cf92180782ab43e46660c6934dd5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64", "node_type": "1", "metadata": {}, "hash": "ec2fa3bda9aa5bf8923a42f02c3821f4a1fd45cc9a3a96a052808882dc99370b", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJtYXN0ZXJ0aHlzZWxmLnRlc3RuZXQiLCJ0ZXh0IjoiaHR0cDovL3VuaXRlLnJhaW5ib3d0cmliZXMvIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Mw==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiam9zaGZvcmQudGVzdG5ldCIsInRleHQiOiJobW1tbW1tIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MzA=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiZXhlbXBsYXJ5LnRlc3RuZXQiLCJ0ZXh0IjoiaGVsbG8ifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MzE=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiYWRpMjMudGVzdG5ldCIsInRleHQiOiJobW0ifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MzI=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiYWRpMjMudGVzdG5ldCIsInRleHQiOiJ3aGF0In0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6MzM=\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoidmxhZGJhc2gudGVzdG5ldCIsInRleHQiOiJIaSJ9\",", "mimetype": "text/plain", "start_char_idx": 22564, "end_char_idx": 23513, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64": {"__data__": {"id_": "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1052f0ef-6f06-4986-acfc-6c47f7f1f235", "node_type": "1", "metadata": {}, "hash": "567c4385922f034f6e02f1f10c715f9f20f61dfb4cb42a0078a5a3bafd9a28c3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e9b050d1-94e9-47f6-9f08-18332b4a2bc1", "node_type": "1", "metadata": {}, "hash": "c4b17289a4767dec526dc7329b3ded4ee227211b7837ebcbf2889d6ec3f08053", "class_name": "RelatedNodeInfo"}}, "text": "\"proof\": []\n      },\n      {\n        \"key\": \"bTo6NA==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoibnVsbCIsInRleHQiOiIgIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6NQ==\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJ0ZXN0YWNjb3VudDEudGVzdG5ldCIsInRleHQiOiJ0ZXN0In0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Ng==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiZXVnZW5ldGhlZHJlYW0iLCJ0ZXh0IjoibnVsbCJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6Nw==\",\n        \"value\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiZGVtby50ZXN0bmV0IiwidGV4dCI6Ikkgb25seSB3cml0ZSBmcmVlIG1lc3NhZ2VzLiJ9\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6OA==\",\n        \"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJqb3NoZm9yZC50ZXN0bmV0IiwidGV4dCI6IkkgcHJlZmVyIHByZW1pdW0gbWVzc2FnZXMifQ==\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTo6OQ==\",", "mimetype": "text/plain", "start_char_idx": 23522, "end_char_idx": 24434, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e9b050d1-94e9-47f6-9f08-18332b4a2bc1": {"__data__": {"id_": "e9b050d1-94e9-47f6-9f08-18332b4a2bc1", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64", "node_type": "1", "metadata": {}, "hash": "ec2fa3bda9aa5bf8923a42f02c3821f4a1fd45cc9a3a96a052808882dc99370b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5be11002-2931-4632-8cce-f99377fee540", "node_type": "1", "metadata": {}, "hash": "b83a2f802f38a8fa8e1786786f73667f423b19b3ec65e16ffe21ad091c33ce26", "class_name": "RelatedNodeInfo"}}, "text": "\"value\": \"eyJwcmVtaXVtIjp0cnVlLCJzZW5kZXIiOiJuZXdsZWRnZXIzLnRlc3RuZXQiLCJ0ZXh0IjoiTGVkZ2VyIn0=\",\n        \"proof\": []\n      },\n      {\n        \"key\": \"bTpsZW4=\",\n        \"value\": \"MzQ=\",\n        \"proof\": []\n      }\n    ],\n    \"proof\": [],\n    \"block_height\": 17814234,\n    \"block_hash\": \"GT1D8nweVQU1zyCUv399x8vDv2ogVq71w17MyR66hXBB\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n</p>\n\n**Note**: Currently, the response includes a `proof` field directly in the\n`result`, and a `proof` fields on each element of the `values` list.  In\nthe future, the `result.proof` will be included only if the result is **not empty**,\nand the `proof` field will be removed from all `values`. When parsing the result, you\nshould accept objects with or without these fields set.\n\n</details>\n\n> **Heads up**\n>\n> There is a limitation on default RPC nodes. You won't be able to get the contract state if it is too big. The default limit of for contract state is 50kb of state size. You're able to change the limits if you [run your own RPC node](https://near-nodes.io/validator/compile-and-run-a-node) with adjusted `trie_viewer_state_size_limit` value in `config.json`\n\n#### What Could Go Wrong? {#what-could-go-wrong-3}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 24443, "end_char_idx": 25944, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5be11002-2931-4632-8cce-f99377fee540": {"__data__": {"id_": "5be11002-2931-4632-8cce-f99377fee540", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e9b050d1-94e9-47f6-9f08-18332b4a2bc1", "node_type": "1", "metadata": {}, "hash": "c4b17289a4767dec526dc7329b3ded4ee227211b7837ebcbf2889d6ec3f08053", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2af4df6b-fea7-4425-8ecd-5902d9fb7697", "node_type": "1", "metadata": {}, "hash": "2a9363870ddf07b482649b364469b43f8f81e356342e46c77ced997056887c69", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `view_state` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"7\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>", "mimetype": "text/plain", "start_char_idx": 25947, "end_char_idx": 27539, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2af4df6b-fea7-4425-8ecd-5902d9fb7697": {"__data__": {"id_": "2af4df6b-fea7-4425-8ecd-5902d9fb7697", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5be11002-2931-4632-8cce-f99377fee540", "node_type": "1", "metadata": {}, "hash": "b83a2f802f38a8fa8e1786786f73667f423b19b3ec65e16ffe21ad091c33ce26", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c2db8fd-2b89-4fa6-9958-65647a1561e6", "node_type": "1", "metadata": {}, "hash": "d1ba0aa9a451a1df33fc894767ad121dcf495e7b67d6ee995bbf0cee7e7dc8b3", "class_name": "RelatedNodeInfo"}}, "text": "<li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_CONTRACT_CODE</td>\n      <td>200</td>\n      <td>The account does not have any <code>contract</code> deployed on it</td>\n      <td>\n        <ul>\n          <li>Query and account with contract deployed</li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>TOO_LARGE_CONTRACT_STATE</td>\n      <td>200</td>\n      <td>The requested contract state is too large to be returned from this node (the default limit is 50kb of state size)</td>\n      <td>\n        <ul>\n          <li>Send the request to a node with larger limits in order to view the requested state</li>\n          <li>Spin up your own node where you can increase the limits to view state</li>", "mimetype": "text/plain", "start_char_idx": 27550, "end_char_idx": 28805, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7c2db8fd-2b89-4fa6-9958-65647a1561e6": {"__data__": {"id_": "7c2db8fd-2b89-4fa6-9958-65647a1561e6", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2af4df6b-fea7-4425-8ecd-5902d9fb7697", "node_type": "1", "metadata": {}, "hash": "2a9363870ddf07b482649b364469b43f8f81e356342e46c77ced997056887c69", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5e474c96-88b9-4a9f-ad55-f91edea5f6d3", "node_type": "1", "metadata": {}, "hash": "e4e88ea7db85d91abaaa2b7e64be522c5c7536b1050b45a0ff8562f55a402b47", "class_name": "RelatedNodeInfo"}}, "text": "</ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to find the requested data because it does not track the shard where data is present</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 4127, "end_char_idx": 5028, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5e474c96-88b9-4a9f-ad55-f91edea5f6d3": {"__data__": {"id_": "5e474c96-88b9-4a9f-ad55-f91edea5f6d3", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7c2db8fd-2b89-4fa6-9958-65647a1561e6", "node_type": "1", "metadata": {}, "hash": "d1ba0aa9a451a1df33fc894767ad121dcf495e7b67d6ee995bbf0cee7e7dc8b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9fea0b55-5e7b-470b-a88a-36be13f93541", "node_type": "1", "metadata": {}, "hash": "f2237f545123527fd26c004a20f3b746c533d4d98115a0abf1a9092a567c0dc6", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View contract state changes {#view-contract-state-changes}\n\n> Returns the state change details of a contract based on the key prefix (encoded to base64). Pass an empty string for this param if you would like to return all state changes.\n\n- method: `EXPERIMENTAL_changes`\n- params:\n  - `changes_type`: `data_changes`\n  - `account_ids`: `[\"example.testnet\"]`,\n  - `key_prefix_base64`: `\"base64 encoded key value\"`,\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes\",\n  \"params\": {\n    \"changes_type\": \"data_changes\",\n    \"account_ids\": [\"guest-book.testnet\"],\n    \"key_prefix_base64\": \"\",\n    \"block_id\": 19450732\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes({\n  changes_type: \"data_changes\",\n  account_ids: [\"guest-book.testnet\"],\n  key_prefix_base64: \"\",", "mimetype": "text/plain", "start_char_idx": 29715, "end_char_idx": 31409, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9fea0b55-5e7b-470b-a88a-36be13f93541": {"__data__": {"id_": "9fea0b55-5e7b-470b-a88a-36be13f93541", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5e474c96-88b9-4a9f-ad55-f91edea5f6d3", "node_type": "1", "metadata": {}, "hash": "e4e88ea7db85d91abaaa2b7e64be522c5c7536b1050b45a0ff8562f55a402b47", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b667088b-ff12-4eb7-9fab-83d0e54fc8eb", "node_type": "1", "metadata": {}, "hash": "59d0938a05f35b9547bbdccbd15d12151e0a1facc999e3cf7465a07f5e4b48b5", "class_name": "RelatedNodeInfo"}}, "text": "block_id: 19450732,\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes \\\n  params:='{\n    \"changes_type\": \"data_changes\",\n    \"account_ids\": [\"guest-book.testnet\"],\n    \"key_prefix_base64\": \"\",\n    \"block_id\": 19450732\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"6U8Yd4JFZwJUNfqkD4KaKgTKmpNSmVRTSggpjmsRWdKY\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"type\": \"receipt_processing\",\n          \"receipt_hash\": \"9ewznXgs2t7vRCssxW4thgaiwggnMagKybZ7ryLNTT2z\"\n        },\n        \"type\": \"data_update\",\n        \"change\": {\n          \"account_id\": \"guest-book.testnet\",\n          \"key_base64\": \"bTo6Mzk=\",\n          \"value_base64\": \"eyJwcmVtaXVtIjpmYWxzZSwic2VuZGVyIjoiZmhyLnRlc3RuZXQiLCJ0ZXh0IjoiSGkifQ==\"\n        }\n      },\n      {\n        \"cause\": {\n          \"type\": \"receipt_processing\",\n          \"receipt_hash\": \"9ewznXgs2t7vRCssxW4thgaiwggnMagKybZ7ryLNTT2z\"\n        },\n        \"type\": \"data_update\",\n        \"change\": {\n          \"account_id\": \"guest-book.testnet\",\n          \"key_base64\": \"bTpsZW4=\",\n          \"value_base64\": \"NDA=\"\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?", "mimetype": "text/plain", "start_char_idx": 31412, "end_char_idx": 32766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b667088b-ff12-4eb7-9fab-83d0e54fc8eb": {"__data__": {"id_": "b667088b-ff12-4eb7-9fab-83d0e54fc8eb", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fea0b55-5e7b-470b-a88a-36be13f93541", "node_type": "1", "metadata": {}, "hash": "f2237f545123527fd26c004a20f3b746c533d4d98115a0abf1a9092a567c0dc6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b989b7f-6606-4829-a5d5-efbca591252e", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}}, "text": "{#what-could-go-wrong-4}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 32767, "end_char_idx": 33572, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b989b7f-6606-4829-a5d5-efbca591252e": {"__data__": {"id_": "3b989b7f-6606-4829-a5d5-efbca591252e", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b667088b-ff12-4eb7-9fab-83d0e54fc8eb", "node_type": "1", "metadata": {}, "hash": "59d0938a05f35b9547bbdccbd15d12151e0a1facc999e3cf7465a07f5e4b48b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "daa63ccc-1319-455b-8c20-ebc10dc6bb7a", "node_type": "1", "metadata": {}, "hash": "828c73b0c04274d17dd3cf44d74076bf5e42846da80eba4bcc9e6f315ae242cf", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 8833, "end_char_idx": 10368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "daa63ccc-1319-455b-8c20-ebc10dc6bb7a": {"__data__": {"id_": "daa63ccc-1319-455b-8c20-ebc10dc6bb7a", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b989b7f-6606-4829-a5d5-efbca591252e", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b792b641-cef8-43f7-99cd-57d683923604", "node_type": "1", "metadata": {}, "hash": "16d22634777dc919a2be21c4c2eb1300ba9cfcdeb91dbc259bf68bebbc0f3786", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View contract code changes {#view-contract-code-changes}\n\n> Returns code changes made when deploying a contract. Change is returned is a base64 encoded WASM file.\n\n- method: `EXPERIMENTAL_changes`\n- params:\n  - `changes_type`: `contract_code_changes`\n  - `account_ids`: `[\"example.testnet\"]`,\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes\",\n  \"params\": {\n    \"changes_type\": \"contract_code_changes\",\n    \"account_ids\": [\"dev-1602714453032-7566969\"],\n    \"block_id\": 20046655\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes({\n  changes_type: \"contract_code_changes\",\n  account_ids: [\"dev-1602714453032-7566969\"],\n  block_id: 20046655,\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.", "mimetype": "text/plain", "start_char_idx": 35109, "end_char_idx": 36773, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b792b641-cef8-43f7-99cd-57d683923604": {"__data__": {"id_": "b792b641-cef8-43f7-99cd-57d683923604", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "daa63ccc-1319-455b-8c20-ebc10dc6bb7a", "node_type": "1", "metadata": {}, "hash": "828c73b0c04274d17dd3cf44d74076bf5e42846da80eba4bcc9e6f315ae242cf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d0b1d3ee-7d56-4b2a-9483-bb30389168b0", "node_type": "1", "metadata": {}, "hash": "9e958e83d2b1530235abd8d1e97e91ccc87dae1884b0c3726df005620293612a", "class_name": "RelatedNodeInfo"}}, "text": "testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes \\\n  params:='{\n    \"changes_type\": \"contract_code_changes\",\n    \"account_ids\": [\"dev-1602714453032-7566969\"],\n    \"block_id\": 20046655\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"3yLNV5zdpzRJ8HP5xTXcF7jdFxuHnmKNUwWcok4616WZ\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"type\": \"receipt_processing\",\n          \"receipt_hash\": \"CEm3NNaNdu9cijh9NvZMM1srbtEYSsBVwGbZxFQYKt5B\"\n        },\n        \"type\": \"contract_code_update\",\n        \"change\": {\n          \"account_id\": \"dev-1602714453032-7566969\",", "mimetype": "text/plain", "start_char_idx": 36773, "end_char_idx": 37450, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d0b1d3ee-7d56-4b2a-9483-bb30389168b0": {"__data__": {"id_": "d0b1d3ee-7d56-4b2a-9483-bb30389168b0", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b792b641-cef8-43f7-99cd-57d683923604", "node_type": "1", "metadata": {}, "hash": "16d22634777dc919a2be21c4c2eb1300ba9cfcdeb91dbc259bf68bebbc0f3786", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "430d6580-313b-4f58-babf-d3d527b31fe6", "node_type": "1", "metadata": {}, "hash": "0ca4bce507a6bf2c6f920d8e9921cf8efee6f9097154c0f1d723b60d6d5ed357", "class_name": "RelatedNodeInfo"}}, "text": "\"code_base64\": \"AGFzbQEAAAABpAM3YAF/AGAAAX9gAn9+AGADf35+AGAEf35+fgF+YAZ/fn5+fn4BfmADf35+AX5gAn9+AX5gAn9/AX9gAn9/AGADf39/AX9gAX8BfmACfn4AYAF+AX5gAX4AYAABfmADfn5+AGAAAGAIfn5+fn5+fn4BfmAJfn5+fn5+fn5+AX5gAn5+AX5gA35+fgF+YAd+fn5+fn5+AGAEfn5+fgBgCX5+fn5+fn5+fgBgBX5+fn5+AX5gA39/fwBgAX8Bf2ACf3wAYAR/f39+AGAFf39/fn8AYAV/f39/fwBgBH9/f38AYAN/f38BfmADf39+AGACf38BfmAFf39/f38Bf2AEf39/fwF/YAZ/f39/f38AYAV/f35/fwBgBH9+f38Bf2ACf34Bf2AHf35+f39+fwBgBX9/f39+AGAEf35+fgBgCX9+fn5+fn5+fgF+YAp/fn5+fn5+fn5+AX5gCH9+fn5+fn5+AGAFf35+fn4AYAp/fn5+fn5+fn5+AGAHf39/f39/fwBgBH98f38Bf2AGf39/f39.\"\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong? {#what-could-go-wrong-5}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "430d6580-313b-4f58-babf-d3d527b31fe6": {"__data__": {"id_": "430d6580-313b-4f58-babf-d3d527b31fe6", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d0b1d3ee-7d56-4b2a-9483-bb30389168b0", "node_type": "1", "metadata": {}, "hash": "9e958e83d2b1530235abd8d1e97e91ccc87dae1884b0c3726df005620293612a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "88ff04c8-706a-43f8-87ed-f1114f399a1a", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 2054, "end_char_idx": 2515, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "88ff04c8-706a-43f8-87ed-f1114f399a1a": {"__data__": {"id_": "88ff04c8-706a-43f8-87ed-f1114f399a1a", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "430d6580-313b-4f58-babf-d3d527b31fe6", "node_type": "1", "metadata": {}, "hash": "0ca4bce507a6bf2c6f920d8e9921cf8efee6f9097154c0f1d723b60d6d5ed357", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f8907831-93f8-44d3-bc79-477b259a01a4", "node_type": "1", "metadata": {}, "hash": "ee05c9839a68f181631ff4b822b5a0f0f98a0932a490346481ad3dfe447debd9", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 8833, "end_char_idx": 10368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f8907831-93f8-44d3-bc79-477b259a01a4": {"__data__": {"id_": "f8907831-93f8-44d3-bc79-477b259a01a4", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "88ff04c8-706a-43f8-87ed-f1114f399a1a", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c27c61ba-939b-4fff-94e3-783c4ba68ba7", "node_type": "1", "metadata": {}, "hash": "386db72efe69e845b04f79ed01f5975bc6914d151c11afeeac4605f04366b044", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Call a contract function {#call-a-contract-function}\n> Allows you to call a contract method as a [view function](../../4.tools/cli.md#near-view-near-view).", "mimetype": "text/plain", "start_char_idx": 40469, "end_char_idx": 41244, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c27c61ba-939b-4fff-94e3-783c4ba68ba7": {"__data__": {"id_": "c27c61ba-939b-4fff-94e3-783c4ba68ba7", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f8907831-93f8-44d3-bc79-477b259a01a4", "node_type": "1", "metadata": {}, "hash": "ee05c9839a68f181631ff4b822b5a0f0f98a0932a490346481ad3dfe447debd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "643d933f-93f7-41e0-bb16-5a77476bce56", "node_type": "1", "metadata": {}, "hash": "1278601c6fa21b7d59cfa16543363404da664b1babfdb4263e47850a02ec348c", "class_name": "RelatedNodeInfo"}}, "text": "- method: `query`\n- params:\n  - `request_type`: `call_function`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: _`\"example.testnet\"`_\n  - `method_name`: `name_of_a_example.testnet_method` (example [`view` methods](https://github.com/near/core-contracts/blob/master/staking-pool/src/lib.rs#L317)\n  - `args_base64`: `method_arguments_base_64_encoded`\n\nExample (`get_num`):\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"call_function\",\n    \"finality\": \"final\",\n    \"account_id\": \"dev-1588039999690\",\n    \"method_name\": \"get_num\",\n    \"args_base64\": \"e30=\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"call_function\",\n  finality: \"final\",\n  account_id: \"dev-1588039999690\",\n  method_name: \"get_num\",\n  args_base64: \"e30=\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"call_function\",\n    \"finality\": \"final\",\n    \"account_id\": \"dev-1588039999690\",\n    \"method_name\": \"get_num\",\n    \"args_base64\": \"e30=\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\nExample (`get_account_staked_balance`):\n\nThe `args_base64` in this example is decoded as `{\"account_id\":\"dev-1588039999690\"}`.  The `account_id` would likely be the validator and not the same account for this particular view function.", "mimetype": "text/plain", "start_char_idx": 41246, "end_char_idx": 42854, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "643d933f-93f7-41e0-bb16-5a77476bce56": {"__data__": {"id_": "643d933f-93f7-41e0-bb16-5a77476bce56", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c27c61ba-939b-4fff-94e3-783c4ba68ba7", "node_type": "1", "metadata": {}, "hash": "386db72efe69e845b04f79ed01f5975bc6914d151c11afeeac4605f04366b044", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e9579c81-d375-4c69-9e0e-07123c1a0b7a", "node_type": "1", "metadata": {}, "hash": "4efb0a9df8b8e8a3f236305091aec49b388ca07300b329dd39faabadcf916ed9", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"call_function\",\n    \"finality\": \"final\",\n    \"account_id\": \"dev-1588039999690\",\n    \"method_name\": \"get_account_staked_balance\",\n    \"args_base64\": \"eyJhY2NvdW50X2lkIjoiZGV2LTE1ODgwMzk5OTk2OTAifQ==\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"call_function\",\n  finality: \"final\",\n  account_id: \"dev-1588039999690\",\n  method_name: \"get_account_staked_balance\",\n  args_base64: \"eyJhY2NvdW50X2lkIjoiZGV2LTE1ODgwMzk5OTk2OTAifQ==\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"call_function\",\n    \"finality\": \"final\",\n    \"account_id\": \"dev-1588039999690\",\n    \"method_name\": \"get_account_staked_balance\",\n    \"args_base64\": \"eyJhY2NvdW50X2lkIjoiZGV2LTE1ODgwMzk5OTk2OTAifQ==\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"result\": [48],\n    \"logs\": [],\n    \"block_height\": 17817336,", "mimetype": "text/plain", "start_char_idx": 42856, "end_char_idx": 44130, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e9579c81-d375-4c69-9e0e-07123c1a0b7a": {"__data__": {"id_": "e9579c81-d375-4c69-9e0e-07123c1a0b7a", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "643d933f-93f7-41e0-bb16-5a77476bce56", "node_type": "1", "metadata": {}, "hash": "1278601c6fa21b7d59cfa16543363404da664b1babfdb4263e47850a02ec348c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4da8cf59-9a19-4b8c-9c66-3276d5c85446", "node_type": "1", "metadata": {}, "hash": "60b543b8cc9b3494637a3783d2ba409b4f801a6ff6b22ad67380c5acd4c21cbe", "class_name": "RelatedNodeInfo"}}, "text": "\"block_hash\": \"4qkA4sUUG8opjH5Q9bL5mWJTnfR4ech879Db1BZXbx6P\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n**Note**: `[48]` is an array of bytes, to be specific it is an ASCII code of `0`.`near-sdk-rs` and `near-sdk-js` return JSON-serialized results.\n\n</p>\n</details>\n\n#### What Could Go Wrong? {#what-could-go-wrong-6}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `call_function` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.", "mimetype": "text/plain", "start_char_idx": 44135, "end_char_idx": 45506, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4da8cf59-9a19-4b8c-9c66-3276d5c85446": {"__data__": {"id_": "4da8cf59-9a19-4b8c-9c66-3276d5c85446", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e9579c81-d375-4c69-9e0e-07123c1a0b7a", "node_type": "1", "metadata": {}, "hash": "4efb0a9df8b8e8a3f236305091aec49b388ca07300b329dd39faabadcf916ed9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d8811561-6e40-44a1-9bde-4f188cd0d163", "node_type": "1", "metadata": {}, "hash": "51d1c2c70481eda4b9646f6273dcb317a3eef58c888e95deec1db43aeeedbb07", "class_name": "RelatedNodeInfo"}}, "text": "name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"7\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.", "mimetype": "text/plain", "start_char_idx": 26690, "end_char_idx": 27254, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d8811561-6e40-44a1-9bde-4f188cd0d163": {"__data__": {"id_": "d8811561-6e40-44a1-9bde-4f188cd0d163", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4da8cf59-9a19-4b8c-9c66-3276d5c85446", "node_type": "1", "metadata": {}, "hash": "60b543b8cc9b3494637a3783d2ba409b4f801a6ff6b22ad67380c5acd4c21cbe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5640466-b63e-406f-8ced-8b08f27ec704", "node_type": "1", "metadata": {}, "hash": "b998cd6edf6a3e19dfba8949d3f82e85ef23d28c3448ed7b211be7ed00660bf7", "class_name": "RelatedNodeInfo"}}, "text": "io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>\n          <li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_CONTRACT_CODE</td>\n      <td>200</td>\n      <td>The requested <code>contract_code</code> has not been found while viewing</td>\n      <td>\n        <ul>\n          <li>Check the <code>public_key</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>CONTRACT_EXECUTION_ERROR</td>\n      <td>200</td>\n      <td>The execution of the view function call failed (crashed, run out of the default 200 TGas limit, etc)</td>\n      <td>\n        <ul>\n          <li>Check <code>error.cause.", "mimetype": "text/plain", "start_char_idx": 46070, "end_char_idx": 47456, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5640466-b63e-406f-8ced-8b08f27ec704": {"__data__": {"id_": "c5640466-b63e-406f-8ced-8b08f27ec704", "embedding": null, "metadata": {"file_path": "./near_dist/contracts.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d58db4ad-45c6-461a-b257-b72c55b489b3", "node_type": "4", "metadata": {}, "hash": "a32e1c6e2979fe1ce9673fe767d09dd6f29c4418fb6ceba8bf1ad79047881275", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d8811561-6e40-44a1-9bde-4f188cd0d163", "node_type": "1", "metadata": {}, "hash": "51d1c2c70481eda4b9646f6273dcb317a3eef58c888e95deec1db43aeeedbb07", "class_name": "RelatedNodeInfo"}}, "text": "info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to find the requested data because it does not track the shard where data is present</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 47456, "end_char_idx": 49014, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f1ece6e9-208c-4def-a90c-0ceb778e5de0": {"__data__": {"id_": "f1ece6e9-208c-4def-a90c-0ceb778e5de0", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5bf61445-6aac-441a-97bf-286fbf2d4dfe", "node_type": "1", "metadata": {}, "hash": "205e58834c303897e002b661f888cd04cbb29bc9d2f764af10679f5a5fd9a0da", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: block-chunk\ntitle: Block / Chunk\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to query the network and get details about specific blocks or chunks.\n\n---\n\n## Block details {#block-details}\n\n> Queries network and returns block for given height or hash. You can also use `finality` param to return latest block details.\n\n**Note**: You may choose to search by a specific block _or_ finality, you can not choose both.\n\n- method: `block`\n- params:\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\n`finality` example:\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"block\",\n  \"params\": {\n    \"finality\": \"final\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.block({\n  finality: \"final\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=block \\\n  params:='{\n    \"finality\": \"final\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n`[block_id]`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1189, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5bf61445-6aac-441a-97bf-286fbf2d4dfe": {"__data__": {"id_": "5bf61445-6aac-441a-97bf-286fbf2d4dfe", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f1ece6e9-208c-4def-a90c-0ceb778e5de0", "node_type": "1", "metadata": {}, "hash": "a6a5ece3deb158f5e05c8aa01930b4222f7057e764894aaf27bd6dc7d0304cb5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ec671d78-b941-4cbc-b18d-82aec43c474c", "node_type": "1", "metadata": {}, "hash": "c1ead922b353e20030a33cadd2d9b0f07f90a2e6138bd1bb7f0f01a8144418a9", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"block\",\n  \"params\": {\n    \"block_id\": 17821130\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.block({blockId: 17821130});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=block \\\n  params:='{\n    \"block_id\": 17821130\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n`[block_hash]`\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"block\",\n  \"params\": {\n    \"block_id\": \"7nsuuitwS7xcdGnD9JgrE22cRB2vf2VS4yh1N9S71F4d\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.block(\n  {blockId: \"7nsuuitwS7xcdGnD9JgrE22cRB2vf2VS4yh1N9S71F4d\"}\n);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=block \\\n  params:='{\n    \"block_id\": \"7nsuuitwS7xcdGnD9JgrE22cRB2vf2VS4yh1N9S71F4d\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response:</summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",", "mimetype": "text/plain", "start_char_idx": 1192, "end_char_idx": 2482, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ec671d78-b941-4cbc-b18d-82aec43c474c": {"__data__": {"id_": "ec671d78-b941-4cbc-b18d-82aec43c474c", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5bf61445-6aac-441a-97bf-286fbf2d4dfe", "node_type": "1", "metadata": {}, "hash": "205e58834c303897e002b661f888cd04cbb29bc9d2f764af10679f5a5fd9a0da", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c1f6285-16b5-477f-95c1-9d7ae0f599e1", "node_type": "1", "metadata": {}, "hash": "d55d2cb831d055f7e54c9b0da49582d909a79802fa3ce6f3ea195a9751b5c82d", "class_name": "RelatedNodeInfo"}}, "text": "\"result\": {\n    \"author\": \"bitcat.pool.f863973.m0\",\n    \"header\": {\n      \"height\": 17821130,\n      \"epoch_id\": \"7Wr3GFJkYeCxjVGz3gDaxvAMUzXuzG8MjFXTFoAXB6ZZ\",\n      \"next_epoch_id\": \"A5AdnxEn7mfHieQ5fRxx9AagCkHNJz6wr61ppEXiWvvh\",\n      \"hash\": \"CLo31YCUhzz8ZPtS5vXLFskyZgHV5qWgXinBQHgu9Pyd\",\n      \"prev_hash\": \"2yUTTubrv1gJhTUVnHXh66JG3qxStBqySoN6wzRzgdVD\",\n      \"prev_state_root\": \"5rSz37fySS8XkVgEy3FAZwUncX4X1thcSpuvCgA6xmec\",\n      \"chunk_receipts_root\": \"9ETNjrt6MkwTgSVMMbpukfxRshSD1avBUUa4R4NuqwHv\",\n      \"chunk_headers_root\": \"HMpEoBhPvThWZvppLwrXQSSfumVdaDW7WfZoCAPtjPfo\",\n      \"chunk_tx_root\": \"7tkzFg8RHBmMw1ncRJZCCZAizgq4rwCftTKYLce8RU8t\",\n      \"outcome_root\": \"7tkzFg8RHBmMw1ncRJZCCZAizgq4rwCftTKYLce8RU8t\",\n      \"chunks_included\": 1,\n      \"challenges_root\": \"11111111111111111111111111111111\",\n      \"timestamp\": 1601280114229875635,\n      \"timestamp_nanosec\": \"1601280114229875635\",", "mimetype": "text/plain", "start_char_idx": 2485, "end_char_idx": 3390, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c1f6285-16b5-477f-95c1-9d7ae0f599e1": {"__data__": {"id_": "5c1f6285-16b5-477f-95c1-9d7ae0f599e1", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ec671d78-b941-4cbc-b18d-82aec43c474c", "node_type": "1", "metadata": {}, "hash": "c1ead922b353e20030a33cadd2d9b0f07f90a2e6138bd1bb7f0f01a8144418a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f48a217d-4cfa-4cd7-bc36-744cb34622a5", "node_type": "1", "metadata": {}, "hash": "99fd57b559354101cd9ca4f8b9346f22c122cfd860e5fb777f6e272d909444a5", "class_name": "RelatedNodeInfo"}}, "text": "\"random_value\": \"ACdUSF3nehbMTwT7qjUB6Mm4Ynck5TVAWbNH3DR1cjQ7\",\n      \"validator_proposals\": [],\n      \"chunk_mask\": [true],\n      \"gas_price\": \"100000000\",\n      \"rent_paid\": \"0\",\n      \"validator_reward\": \"0\",\n      \"total_supply\": \"1042339182040791154864822502764857\",\n      \"challenges_result\": [],\n      \"last_final_block\": \"AaxTqjYND5WAKbV2UZaFed6DH1DShN9fEemtnpTsv3eR\",\n      \"last_ds_final_block\": \"2yUTTubrv1gJhTUVnHXh66JG3qxStBqySoN6wzRzgdVD\",\n      \"next_bp_hash\": \"3ZNEoFYh2CQeJ9dc1pLBeUd1HWG8657j2c1v72ENE45Q\",\n      \"block_merkle_root\": \"H3912Nkw6rtamfjsjmafe2uV2p1XmUKDou5ywgxb1gJr\",\n      \"approvals\": [\n        \"ed25519:4hNtc9vLhn2PQhktWtLKJV9g8SBfpm6NBT1w4syNFqoKE7ZMts2WwKA9x1ZUSBGVKYCuDGEqogLvwCF25G7e1UR3\",\n        \"ed25519:2UNmbTqysMMevVPqJEKSq57hkcxVFcAMdGq7CFhpW65yBKFxYwpoziiWsAtARusLn9Sy1eXM7DkGTXwAqFiSooS6\",\n        \"ed25519:4sumGoW9dnQCsJRpzkd4FQ5NSJypGQRCppWp7eQ9tpsEcJXjHZN8GVTCyeEk19WmbbMEJ5KBNypryyHzaH2gBxd4\",", "mimetype": "text/plain", "start_char_idx": 3397, "end_char_idx": 4340, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f48a217d-4cfa-4cd7-bc36-744cb34622a5": {"__data__": {"id_": "f48a217d-4cfa-4cd7-bc36-744cb34622a5", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c1f6285-16b5-477f-95c1-9d7ae0f599e1", "node_type": "1", "metadata": {}, "hash": "d55d2cb831d055f7e54c9b0da49582d909a79802fa3ce6f3ea195a9751b5c82d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01ccfb78-2a78-42ce-b28d-dadf553b774a", "node_type": "1", "metadata": {}, "hash": "a87520b788fb091a27d87500f3de30123397cf9f6469c74a2b338a7d366a17c1", "class_name": "RelatedNodeInfo"}}, "text": "\"ed25519:3fP2dri6GjYkmHgEqQWWP9GcoQEgakbaUtfr3391tXtYBgxmiJUEymRe54m7D8bQrSJ3LhKD8gTFT7qqdemRnizR\",\n        \"ed25519:3mwdqSWNm6RiuZAoZhD6pqsirC2cL48nEZAGoKixpqbrsBpAzqV3W2paH4KtQQ4JPLvk5pnzojaint2kNBCcUyq1\",\n        \"ed25519:D4hMnxqLyQW4Wo29MRNMej887GH46yJXDKNN4es8UDSi9shJ9Y4FcGqkxdV4AZhn1yUjwN5LwfgAgY6fyczk5L3\",\n        null,\n        \"ed25519:4WCVm4dn88VJxTkUgcvdS7vs34diBqtQY4XWMRctSN1NpbgdkwwVyxg7d2SbGC22SuED7w4nrToMhcpJXrkhkDmF\",\n        \"ed25519:JqtC7TFP7U14s7YhRKQEqwbc2RUxoctq75mrBdX91f7DuCWsPpe6ZTTnfHPmuJPjTzFHVZTsaQJWzwfSrrgNpnc\",\n        \"ed25519:ngGUpWc2SyHmMCkWGTNNNfvZAJQ5z7P92JCmDqB7JW3j8fNH6LobvFFXb2zVdssibJKgnjwBj8CRe6qiZtuYQZM\",", "mimetype": "text/plain", "start_char_idx": 4349, "end_char_idx": 4999, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01ccfb78-2a78-42ce-b28d-dadf553b774a": {"__data__": {"id_": "01ccfb78-2a78-42ce-b28d-dadf553b774a", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f48a217d-4cfa-4cd7-bc36-744cb34622a5", "node_type": "1", "metadata": {}, "hash": "99fd57b559354101cd9ca4f8b9346f22c122cfd860e5fb777f6e272d909444a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "63efe721-1a9a-4359-8488-156f687bbb89", "node_type": "1", "metadata": {}, "hash": "d583543c8d461a785fc6e3bbaae266dbf04b8dd087d39b87e82a2627b6db8ab9", "class_name": "RelatedNodeInfo"}}, "text": "\"ed25519:5kzW6RbjukyJZiw9NTzTPPsQdoqN6EecafjVFEoWmTxQ4uSv1uSXhQYcHK2eq4m84oMmPABQDz2mm73Qx8mDdCQX\",\n        \"ed25519:5wHnuuxwJJiZ4bXNq5cESnr4YovFU2yaUcuHRDUw3DnLoxkqc15CsegoyUSQKEwtCZ4yETv8Z9QcD6Wr9zHV4AUk\",\n        \"ed25519:3F9XzWBxto31e8RAcBShAJBzJPgSJQsWbPXR38AfQnJn6AiveGz3JjebQm9Ye63BrnNA57QrPshwknxpzSrcNEZW\",\n        \"ed25519:2g5s4SKsHt9PMdekkDqVtwwtz14v4edhqdBX1MYA8tB6nDpj3vDCDCTy9pEU8dX31PoQe5ygnf88aTZukMBMK1Yt\",\n        \"ed25519:3Xz4jqhdyS3qs6xTmWdgjwt5gJraU5czMA89hPhmvbAN4aA7SUKL1HkevpmutRQqqxe7c7uCFeGiDHvDcxhhmD8W\",\n        null,\n        \"ed25519:55xs3vwPEys39egf9Z8SNyn1JsHPRMgj9HCX1GE7GJsVTcAuutQUCo91E12ZdXkuToYRXb9KzoT8n9XQRCNuLpwY\",\n        null,", "mimetype": "text/plain", "start_char_idx": 5008, "end_char_idx": 5675, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "63efe721-1a9a-4359-8488-156f687bbb89": {"__data__": {"id_": "63efe721-1a9a-4359-8488-156f687bbb89", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01ccfb78-2a78-42ce-b28d-dadf553b774a", "node_type": "1", "metadata": {}, "hash": "a87520b788fb091a27d87500f3de30123397cf9f6469c74a2b338a7d366a17c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "425d31b9-5c57-4bbe-978e-b64da79ba6a3", "node_type": "1", "metadata": {}, "hash": "4623524fb54aabe542fb73e9413c90fc9c48e3d065920383f858f531ff21fcea", "class_name": "RelatedNodeInfo"}}, "text": "\"ed25519:28JrFw7KnhnQPN89qZnnw17KDBjS6CDN7zB1hTg7KGg8qQPoCzakz9DNnaSnx39ji7e2fQSpZt4cNJaD7K7Yu7yo\",\n        \"ed25519:41hAr5qhtvUYpdD2NK9qqTVnpG325ZoAiwrcmk1MJH7fdpxm7oSKXvXZqh7bTmPhv61hH2RpHnhcGuN4QqLzK2zt\",\n        \"ed25519:4QacMsQ5FJgvecAYDFq8QBh19BBjh4qU8oeD5bV7p6Zhhu3e6r2iSHTvDBU2Q62RZAaWQQkkEwDUC9rsXdkGVhAt\",\n        \"ed25519:27smtCZ3WobEvBuD5DggY6kkGxjB9qRVY6kPixgwqvBT1eKbRVoV8cLj1z51S8RTcp7YzAr1vhHJUHgksatR9Udz\",\n        \"ed25519:4wspCWoAbhYxb3th2eX6ZXvKep1Fsco7mFP5zBodXBR8Wr344ANXSUCri3gUgNCCSoQ2CKSdqDEsvE6Y2jQ9hmbB\",\n        \"ed25519:46XpYf9ZB9gjDfdnJLHqqhYJpQCuvCgB9tzKWS88GANMCb2j9BM3KXyjaEzynSsaPK8VrKFXQuTsTzgQSeo9cWGW\",\n        null,", "mimetype": "text/plain", "start_char_idx": 5684, "end_char_idx": 6337, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "425d31b9-5c57-4bbe-978e-b64da79ba6a3": {"__data__": {"id_": "425d31b9-5c57-4bbe-978e-b64da79ba6a3", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "63efe721-1a9a-4359-8488-156f687bbb89", "node_type": "1", "metadata": {}, "hash": "d583543c8d461a785fc6e3bbaae266dbf04b8dd087d39b87e82a2627b6db8ab9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c94d748-472f-4a07-93f6-4238e1830b67", "node_type": "1", "metadata": {}, "hash": "e29d7d8e0c99577891aec7a3082efd9d1be4feb8fa694af32c1620209ae9c0b0", "class_name": "RelatedNodeInfo"}}, "text": "\"ed25519:Y5ehsrhEpTRGjG6fHJHsEXj2NYPGMmKguiJHXP7TqsCWHBvNzaJbieR7UDp78hJ1ib7C18J5MB2kCzTXBCF9c3b\",\n        \"ed25519:3P9363Dc8Kqvgjt3TsNRncUrncCHid7aSRnuySjF4JYmQbApkAxomyMu8xm9Rgo3mj9rqXb16PM7Xjn7hKP6TyVr\",\n        null,\n        null,\n        \"ed25519:65ATjGsigZ3vMp7sGcp1c4ptxoqhHPkBeAaZ5GWJguVDLyrRLPJrtXhLGjH9DpXd7CZswjyMYq5aRtorLnmmJ7GW\",\n        null,\n        \"ed25519:5SvqSViXbtsLoFMdtCufyyDgZnrEK7LheFi38X5M2ic17gfV5cz37r85RyixjUv98MbAmgVdmkxVFDGfSbeoHW7X\",\n        null,\n        null,\n        \"ed25519:2n3fQiBEiDKkB84biXWyQmvnupKX7B8faugY37jVi8hVXuWLggJmaEjqub511RCYwFnwW1RBxYpuJQ455KaniCd4\",\n        \"ed25519:2K9xKFLJ2fW74tddXtghFGFurKWomAqaJmkKYVZKHQT6zHe5wNSYT3vzMotLQcez5JD1Ta57N9zQ4H1RysB2s5DZ\",\n        null,\n        null,", "mimetype": "text/plain", "start_char_idx": 6346, "end_char_idx": 7082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c94d748-472f-4a07-93f6-4238e1830b67": {"__data__": {"id_": "6c94d748-472f-4a07-93f6-4238e1830b67", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "425d31b9-5c57-4bbe-978e-b64da79ba6a3", "node_type": "1", "metadata": {}, "hash": "4623524fb54aabe542fb73e9413c90fc9c48e3d065920383f858f531ff21fcea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2df096b4-c325-4a75-9e1b-267d395e6346", "node_type": "1", "metadata": {}, "hash": "391bae055ecf7e9ab48100064e840f055d1583be034b05dd939aa6062a5cb238", "class_name": "RelatedNodeInfo"}}, "text": "\"ed25519:3qeCRtcLAqLtQ2YSQLcHDa26ykKX1BvAhP9jshLLYapxSEGGgZJY8sU72p9E78AkXwHP3X2Eq74jvts7gTRzNgMg\",\n        null,\n        \"ed25519:2czSQCF8wBDomEeSdDRH4gFoyJrp2ppZqR6JDaDGoYpaFkpWxZf2oGDkKfQLZMbfvU6LXkQjJssVHcLCJRMzG8co\"\n      ],\n      \"signature\": \"ed25519:58sdWd6kxzhQdCGvHzxqvdtDLJzqspe74f3gytnqdxDLHf4eesXi7B3nYq2YaosCHZJYmcR4HPHKSoFm3WE4MbxT\",\n      \"latest_protocol_version\": 35\n    },\n    \"chunks\": [\n      {\n        \"chunk_hash\": \"EBM2qg5cGr47EjMPtH88uvmXHDHqmWPzKaQadbWhdw22\",\n        \"prev_block_hash\": \"2yUTTubrv1gJhTUVnHXh66JG3qxStBqySoN6wzRzgdVD\",\n        \"outcome_root\": \"11111111111111111111111111111111\",\n        \"prev_state_root\": \"HqWDq3f5HJuWnsTfwZS6jdAUqDjGFSTvjhb846vV27dx\",\n        \"encoded_merkle_root\": \"9zYue7drR1rhfzEEoc4WUXzaYRnRNihvRoGt1BgK7Lkk\",\n        \"encoded_length\": 8,\n        \"height_created\": 17821130,\n        \"height_included\": 17821130,\n        \"shard_id\": 0,\n        \"gas_used\": 0,\n        \"gas_limit\": 1000000000000000,\n        \"rent_paid\": \"0\",", "mimetype": "text/plain", "start_char_idx": 7091, "end_char_idx": 8078, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2df096b4-c325-4a75-9e1b-267d395e6346": {"__data__": {"id_": "2df096b4-c325-4a75-9e1b-267d395e6346", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c94d748-472f-4a07-93f6-4238e1830b67", "node_type": "1", "metadata": {}, "hash": "e29d7d8e0c99577891aec7a3082efd9d1be4feb8fa694af32c1620209ae9c0b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e", "node_type": "1", "metadata": {}, "hash": "0b9d928215a47f13611324fe760d267f998d14ab7418fac0213b4f2bbf7849ea", "class_name": "RelatedNodeInfo"}}, "text": "\"validator_reward\": \"0\",\n        \"balance_burnt\": \"0\",\n        \"outgoing_receipts_root\": \"H4Rd6SGeEBTbxkitsCdzfu9xL9HtZ2eHoPCQXUeZ6bW4\",\n        \"tx_root\": \"11111111111111111111111111111111\",\n        \"validator_proposals\": [],\n        \"signature\": \"ed25519:4iPgpYAcPztAvnRHjfpegN37Rd8dTJKCjSd1gKAPLDaLcHUySJHjexMSSfC5iJVy28vqF9VB4psz13x2nt92cbR7\"\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?? {#what-could-go-wrong}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 8087, "end_char_idx": 9326, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e": {"__data__": {"id_": "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2df096b4-c325-4a75-9e1b-267d395e6346", "node_type": "1", "metadata": {}, "hash": "391bae055ecf7e9ab48100064e840f055d1583be034b05dd939aa6062a5cb238", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b7f82f91-f82e-4412-8bb5-48114dd314eb", "node_type": "1", "metadata": {}, "hash": "abe862f750769f42bf88f139bf114ba96d23eeb3ca2c8333e3d0ba36981dd15b", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `block` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 9328, "end_char_idx": 10848, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b7f82f91-f82e-4412-8bb5-48114dd314eb": {"__data__": {"id_": "b7f82f91-f82e-4412-8bb5-48114dd314eb", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e", "node_type": "1", "metadata": {}, "hash": "0b9d928215a47f13611324fe760d267f998d14ab7418fac0213b4f2bbf7849ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ea39dc5f-e065-41d9-a26a-e78bc209c26c", "node_type": "1", "metadata": {}, "hash": "d698106dcda34780c6deb2b8878e52ed612e012e794733b8509340acdb8e9629", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Changes in Block {#changes-in-block}\n\n> Returns changes in block for given block height or hash. You can also use `finality` param to return latest block details.\n\n**Note**: You may choose to search by a specific block _or_ finality, you can not choose both.\n\n- method: `EXPERIMENTAL_changes_in_block`\n- params:\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\n`finality`\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes_in_block\",\n  \"params\": {\n    \"finality\": \"final\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes_in_block({\n  finality: \"final\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes_in_block \\\n  params:='{\n    \"finality\": \"final\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n`[block_id]`", "mimetype": "text/plain", "start_char_idx": 10848, "end_char_idx": 12527, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ea39dc5f-e065-41d9-a26a-e78bc209c26c": {"__data__": {"id_": "ea39dc5f-e065-41d9-a26a-e78bc209c26c", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b7f82f91-f82e-4412-8bb5-48114dd314eb", "node_type": "1", "metadata": {}, "hash": "abe862f750769f42bf88f139bf114ba96d23eeb3ca2c8333e3d0ba36981dd15b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "77631eb6-9aa5-484a-9d9f-6ac6957649cd", "node_type": "1", "metadata": {}, "hash": "a2d6989ccf1677e83253540714140b931a3d9c7f837dd69842dc3894fbcda09b", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes_in_block\",\n  \"params\": {\n    \"block_id\": 17821135\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes_in_block(\n  17821135\n);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes_in_block \\\n  params:='{\n    \"block_id\": 17821135\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n`block_hash`", "mimetype": "text/plain", "start_char_idx": 12530, "end_char_idx": 13144, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77631eb6-9aa5-484a-9d9f-6ac6957649cd": {"__data__": {"id_": "77631eb6-9aa5-484a-9d9f-6ac6957649cd", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ea39dc5f-e065-41d9-a26a-e78bc209c26c", "node_type": "1", "metadata": {}, "hash": "d698106dcda34780c6deb2b8878e52ed612e012e794733b8509340acdb8e9629", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64", "node_type": "1", "metadata": {}, "hash": "2a69aeddb447453de98925955e43271baefdbd85cc754ecc54ca0904885cf204", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes_in_block\",\n  \"params\": {\n    \"block_id\": \"81k9ked5s34zh13EjJt26mxw5npa485SY4UNoPi6yYLo\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes_in_block(\n  \"81k9ked5s34zh13EjJt26mxw5npa485SY4UNoPi6yYLo\"\n);\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes_in_block \\\n  params:='{\n    \"block_id\": \"81k9ked5s34zh13EjJt26mxw5npa485SY4UNoPi6yYLo\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"81k9ked5s34zh13EjJt26mxw5npa485SY4UNoPi6yYLo\",\n    \"changes\": [\n      {\n        \"type\": \"account_touched\",\n        \"account_id\": \"lee.testnet\"\n      },\n      {\n        \"type\": \"contract_code_touched\",\n        \"account_id\": \"lee.testnet\"\n      },\n      {\n        \"type\": \"access_key_touched\",\n        \"account_id\": \"lee.testnet\"\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>", "mimetype": "text/plain", "start_char_idx": 13147, "end_char_idx": 14367, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64": {"__data__": {"id_": "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77631eb6-9aa5-484a-9d9f-6ac6957649cd", "node_type": "1", "metadata": {}, "hash": "a2d6989ccf1677e83253540714140b931a3d9c7f837dd69842dc3894fbcda09b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b", "node_type": "1", "metadata": {}, "hash": "3db6c73bf748394407526978db3f8ee0cf63f218052f61b021bf5e251bb033d5", "class_name": "RelatedNodeInfo"}}, "text": "#### What Could Go Wrong?? {#what-could-go-wrong-1}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 14370, "end_char_idx": 15202, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b": {"__data__": {"id_": "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64", "node_type": "1", "metadata": {}, "hash": "2a69aeddb447453de98925955e43271baefdbd85cc754ecc54ca0904885cf204", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed", "node_type": "1", "metadata": {}, "hash": "2c31ded27dcf4ccb10ae967d5183c79c5d6cf5ec4c4d73ded2d9c6485dc20560", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes_in_block` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 15204, "end_char_idx": 16748, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed": {"__data__": {"id_": "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b", "node_type": "1", "metadata": {}, "hash": "3db6c73bf748394407526978db3f8ee0cf63f218052f61b021bf5e251bb033d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18952842-9744-4c3f-8bd7-414eab6799c6", "node_type": "1", "metadata": {}, "hash": "b6afe4fa1d6dcdfc3567b8fd330076f1a71f96aed11f5f846ed41224dc6c7b3d", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## Chunk Details {#chunk-details}\n\n> Returns details of a specific chunk. You can run a [block details](/api/rpc/setup#block-details) query to get a valid chunk hash.\n\n- method: `chunk`\n- params:\n  - `chunk_id` _OR_ [`block_id`, `shard_id`](/api/rpc/setup#using-block_id-param)\n\n`chunk_id` example:", "mimetype": "text/plain", "start_char_idx": 16748, "end_char_idx": 17663, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "18952842-9744-4c3f-8bd7-414eab6799c6": {"__data__": {"id_": "18952842-9744-4c3f-8bd7-414eab6799c6", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed", "node_type": "1", "metadata": {}, "hash": "2c31ded27dcf4ccb10ae967d5183c79c5d6cf5ec4c4d73ded2d9c6485dc20560", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "92bb61fd-d4dc-415f-b4c0-40887ac4700d", "node_type": "1", "metadata": {}, "hash": "6a85fefecaad237205a98043a34d2be0df7ee67459806a32c70e8ead18e37497", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"chunk\",\n  \"params\": {\"chunk_id\": \"EBM2qg5cGr47EjMPtH88uvmXHDHqmWPzKaQadbWhdw22\"}\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.chunk({\n  chunk_id: \"EBM2qg5cGr47EjMPtH88uvmXHDHqmWPzKaQadbWhdw22\"\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=chunk params:='{\"chunk_id\": \"EBM2qg5cGr47EjMPtH88uvmXHDHqmWPzKaQadbWhdw22\"}' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n`block_id`, `shard_id` example:\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"chunk\",\n  \"params\": {\"block_id\": 58934027, \"shard_id\": 0}\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.chunk({\n  block_id: 58934027, shard_id: 0\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 method=chunk params:='{\"block_id\": 58934027, \"shard_id\": 0}' id=dontcare\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",", "mimetype": "text/plain", "start_char_idx": 17666, "end_char_idx": 18983, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "92bb61fd-d4dc-415f-b4c0-40887ac4700d": {"__data__": {"id_": "92bb61fd-d4dc-415f-b4c0-40887ac4700d", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18952842-9744-4c3f-8bd7-414eab6799c6", "node_type": "1", "metadata": {}, "hash": "b6afe4fa1d6dcdfc3567b8fd330076f1a71f96aed11f5f846ed41224dc6c7b3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86", "node_type": "1", "metadata": {}, "hash": "1a934410cb74f7ef0229e6625a4d171eca4c830ef13da8e63963fc48a9a658ee", "class_name": "RelatedNodeInfo"}}, "text": "\"result\": {\n    \"author\": \"bitcat.pool.f863973.m0\",\n    \"header\": {\n      \"chunk_hash\": \"EBM2qg5cGr47EjMPtH88uvmXHDHqmWPzKaQadbWhdw22\",\n      \"prev_block_hash\": \"2yUTTubrv1gJhTUVnHXh66JG3qxStBqySoN6wzRzgdVD\",\n      \"outcome_root\": \"11111111111111111111111111111111\",\n      \"prev_state_root\": \"HqWDq3f5HJuWnsTfwZS6jdAUqDjGFSTvjhb846vV27dx\",\n      \"encoded_merkle_root\": \"9zYue7drR1rhfzEEoc4WUXzaYRnRNihvRoGt1BgK7Lkk\",\n      \"encoded_length\": 8,\n      \"height_created\": 17821130,\n      \"height_included\": 17821130,\n      \"shard_id\": 0,\n      \"gas_used\": 0,\n      \"gas_limit\": 1000000000000000,\n      \"rent_paid\": \"0\",\n      \"validator_reward\": \"0\",\n      \"balance_burnt\": \"0\",\n      \"outgoing_receipts_root\": \"H4Rd6SGeEBTbxkitsCdzfu9xL9HtZ2eHoPCQXUeZ6bW4\",\n      \"tx_root\": \"11111111111111111111111111111111\",\n      \"validator_proposals\": [],\n      \"signature\": \"ed25519:4iPgpYAcPztAvnRHjfpegN37Rd8dTJKCjSd1gKAPLDaLcHUySJHjexMSSfC5iJVy28vqF9VB4psz13x2nt92cbR7\"\n    },\n    \"transactions\": [],\n    \"receipts\": []\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong??", "mimetype": "text/plain", "start_char_idx": 18986, "end_char_idx": 20069, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86": {"__data__": {"id_": "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "92bb61fd-d4dc-415f-b4c0-40887ac4700d", "node_type": "1", "metadata": {}, "hash": "6a85fefecaad237205a98043a34d2be0df7ee67459806a32c70e8ead18e37497", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a04b71bc-8440-438b-8606-6faacab14d13", "node_type": "1", "metadata": {}, "hash": "81478e708552260dfbe512cd0347d91fa62809a93f713a179d6db7786ddce9c0", "class_name": "RelatedNodeInfo"}}, "text": "{#what-could-go-wrong-2}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `chunk` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"4\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.", "mimetype": "text/plain", "start_char_idx": 20070, "end_char_idx": 21710, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a04b71bc-8440-438b-8606-6faacab14d13": {"__data__": {"id_": "a04b71bc-8440-438b-8606-6faacab14d13", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86", "node_type": "1", "metadata": {}, "hash": "1a934410cb74f7ef0229e6625a4d171eca4c830ef13da8e63963fc48a9a658ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "20be5359-5086-4d8c-9d24-96957a0eac0d", "node_type": "1", "metadata": {}, "hash": "3eaf0653f908155f6c7ac0fddd7fdbb2a121a9c07f0920f26286e0e40cee324d", "class_name": "RelatedNodeInfo"}}, "text": "io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_CHUNK</td>\n      <td>200</td>\n      <td>The requested chunk can't be found in a database</td>\n      <td>\n        <ul>\n          <li>Check that the requested chunk is legit</li>\n          <li>If the chunk had been produced more than 5 epochs ago, try to send your request to an archival node</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_SHARD_ID</td>\n      <td>200</td>\n      <td>Provided <code>shard_id</code> does not exist</td>\n      <td>\n        <ul>\n          <li>Provide <code>shard_id</code> for an existing shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested chunk is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 21710, "end_char_idx": 23008, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "20be5359-5086-4d8c-9d24-96957a0eac0d": {"__data__": {"id_": "20be5359-5086-4d8c-9d24-96957a0eac0d", "embedding": null, "metadata": {"file_path": "./near_dist/block-chunk.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a", "node_type": "4", "metadata": {}, "hash": "88c4d760308f6f9c230335697287af8c40cc3101fd19c8b3ce04784bf29e4b00", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a04b71bc-8440-438b-8606-6faacab14d13", "node_type": "1", "metadata": {}, "hash": "81478e708552260dfbe512cd0347d91fa62809a93f713a179d6db7786ddce9c0", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 10848, "end_char_idx": 11463, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0bf0ee60-402b-4684-ac11-822564cfe411": {"__data__": {"id_": "0bf0ee60-402b-4684-ac11-822564cfe411", "embedding": null, "metadata": {"file_path": "./near_dist/check-balance.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6251e44c-e1b6-4d5b-a30e-b8fe02b3f70e", "node_type": "4", "metadata": {}, "hash": "90107dfdc8c7c4ee31bdac5f6cc3517be6394d4a0c932b1f20c3aa1b786ad14c", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear view token.v2.ref-finance.near ft_balance_of '{\"account_id\": \"bob.near\"}'\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```bash\n'376224322825327177426'\n```\n\n</p>\n\n</details>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 196, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "229b044f-86f2-40be-b8a0-4d2612b11638": {"__data__": {"id_": "229b044f-86f2-40be-b8a0-4d2612b11638", "embedding": null, "metadata": {"file_path": "./near_dist/fastnear-api.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "da1b57c2-08d7-4d25-b282-c70c2ce5dd51", "node_type": "4", "metadata": {}, "hash": "937af4b59cefb4dab19f18e5511ce4d84ebc1353cc797cc78543ae8b44c933c5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: fastnear-api\ntitle: FastNEAR API\nsidebar_label: FastNEAR API\n---\n\nA fast RPC for the NEAR blockchain, based on [Redis](https://redis.io/) and [LMDB](https://www.symas.com/lmdb).\n\n## About FastNEAR\n\n[Fast-Near](https://github.com/fastnear/fast-near) aims to provide the fastest RPC implementation for NEAR Protocol using high-performance storage backends:\n - in-memory storage in Redis.\n - SSD optimized storage using LMDB.\n\nIt is optimized for `view` call performance and ease of deploy and scaling. \n\n\n:::info Note about data sync\nFastNear doesn't sync with the NEAR blockchain on its own. Data needs to be loaded either from [NEAR Lake](https://github.com/near/near-lake-indexer) or from [Near State Indexer](https://github.com/vgrichina/near-state-indexer).\n:::\n\n---\n\n\n\n## FastNEAR API\n\nThe [FastNEAR API server](https://github.com/fastnear/fastnear-api-server-rs) provides a low-latency RPC API for wallets and explorers.\n\n### Supported APIs\n\n#### Public Key\n\n- Public Key to Account ID mapping.\n- Full Access Public Key to Account ID mapping.\n- Any Public Key to Account ID mapping.\n\n#### Account ID\n\n- Account ID to delegated staking pools (validators).\n- Account ID to fungible tokens (FT contracts).\n- Account ID to non-fungible tokens (NFT contracts).\n\n#### Token ID\n\n- Token ID to top 100 accounts by balance (for FT contracts).\n\n\n:::tip V1 API\n\n[Click here](https://github.com/fastnear/fastnear-api-server-rs?tab=readme-ov-file#api-v1) to see the complete list of API endpoints and usage examples.\n\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1521, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c3b313a6-d17e-4610-8d6c-40c0ff29410c": {"__data__": {"id_": "c3b313a6-d17e-4610-8d6c-40c0ff29410c", "embedding": null, "metadata": {"file_path": "./near_dist/create.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5d7c14b2-a681-4d78-9fce-e4673c523ae4", "node_type": "4", "metadata": {}, "hash": "a3fb9fe0afe3bd6f7d4a1757b0714023c92d62eda381865e1fb6d4e6d6ddd311", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call tkn.near create_token '{\"args\":{\"owner_id\": \"bob.near\",\"total_supply\": \"1000000000\",\"metadata\":{\"spec\": \"ft-1.0.0\",\"name\": \"Test Token\",\"symbol\": \"TTTEST\",\"icon\": \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\",\"decimals\": 18}},\"account_id\": \"bob.near\"}' --gas 300000000000000 --depositYocto 2234830000000000000000000 --accountId bob.near\n```", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 393, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5eecfd57-98c3-4490-b69a-544b7ace82fe": {"__data__": {"id_": "5eecfd57-98c3-4490-b69a-544b7ace82fe", "embedding": null, "metadata": {"file_path": "./near_dist/get-price.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0c928975-f723-497d-ae68-b6f93dc417bb", "node_type": "4", "metadata": {}, "hash": "4ca799140ab57ef8a5b77de44713bdaa2c17b2a40e654546c027b36940298b3e", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst tokenContract = \"token.v2.ref-finance.near\";\nconst tokenPriceResult = fetch(\n  `https://indexer.ref.finance/get-token-price?token_id=${tokenContract}`\n).body;\nconst tokenPriceValue = JSON.parse(tokenPriceResult);\n```\n\n<details>\n<summary>Example response</summary>\n<p>\n\n```json\n{\n  \"token_contract_id\": \"token.v2.ref-finance.near\",\n  \"price\": \"0.08153090\"\n}\n```\n\n</p>\n\n</details>\n\n:::tip\nRef Finance has a method to [get all token prices at once](https://indexer.ref.finance/list-token-price).\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 508, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "076fbb71-57f8-4272-a0a6-bbf5009b5219": {"__data__": {"id_": "076fbb71-57f8-4272-a0a6-bbf5009b5219", "embedding": null, "metadata": {"file_path": "./near_dist/data-availability.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c", "node_type": "4", "metadata": {}, "hash": "84630f26e1e2140d6f141b0ad01539d8cf37c22a5ee7b3e767ba2d68abb13bf2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "10b669a7-6a81-4007-9400-70471121e386", "node_type": "1", "metadata": {}, "hash": "f2354ac1732cf666543b97a6e5771d72872d828280ddfa4e07602c64027c8c0a", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: data-availability\ntitle: Rollup Data Availability\n---\n\nEvery monolithic blockchain has a data availability layer. NEAR's Data Availability (DA) represents a pioneering initiative to modularize the data availability layer from the NEAR blockchain to make it available as a roll-up solution for builders on other chains. \n\nThis infrastructure consists of a smart contract, a light client, and a Remote Procedure Call (RPC) node. The smart contract is designed to accept blob data, which is then processed through NEAR's consensus. The RPC node functions as the serving node, where users can transmit their data. Lastly, the light client operates as a node that rollups can verify to ensure the availability of data.\n\n- [Blob Store Contract](#blob-store-contract): A contract that provides the store for arbitrary DA blobs.\n- [Light Client](#light-client): A trustless off-chain light client for NEAR with DA-enabled features.\n- [RPC Client](#da-rpc): The defacto client for submitting data blobs to NEAR.\n- [Integrations](#integrations): Proof of concept works for integrating with L2 rollups.\n\nNEAR DA is notably inexpensive due to several key factors:\n- NEAR offers a substantial amount of block space per shard, ensuring efficient utilization.\n- NEAR optimizes this space by avoiding unnecessary cryptographic bloat, ensuring that each 4MB allocated equals precisely 4MB of usable data.\n- NEAR's scalability is unmatched, as it can readily reshard and scale in response to increasing demand, unlike competitors who would need to resort to constructing rollups or sidechains, thus maintaining a consistently ample and cost-effective data availability solution.\n\n:::tip\nFor the latest information, please check the [Near DA](https://github.com/near/rollup-data-availability/) repository.\n:::\n\n---\n\n## System Context\n\nThis outlines the system components that we build and how it interacts with external components.\n\nRed lines denote external flow of commitments.\nWhite lines denote flow of blob data.\n\n\n:::note\n`Fisherman` is just an example how a rollup can work with the light client in the initial stage of DA, until we implement a more non-interactive approach, such as KZG.\n:::\n\n```mermaid \nC4Context\n    title NEAR Data Availability System Context\n\n    Enterprise_Boundary(b1, \"Ethereum\") {\n        System_Ext(SystemEth,", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2332, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "10b669a7-6a81-4007-9400-70471121e386": {"__data__": {"id_": "10b669a7-6a81-4007-9400-70471121e386", "embedding": null, "metadata": {"file_path": "./near_dist/data-availability.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c", "node_type": "4", "metadata": {}, "hash": "84630f26e1e2140d6f141b0ad01539d8cf37c22a5ee7b3e767ba2d68abb13bf2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "076fbb71-57f8-4272-a0a6-bbf5009b5219", "node_type": "1", "metadata": {}, "hash": "1e5793bb45f2153683cf36afa98832047161649b451affd7ad972ffb92801371", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3fe33f7c-9d54-467a-9713-1144d87e3ee2", "node_type": "1", "metadata": {}, "hash": "fd4aa678a2059ee24a6d41a1adb0bf98f38936dfbdc6900343cea94b7a91283e", "class_name": "RelatedNodeInfo"}}, "text": "\"Ethereum\")\n\n        System_Boundary(b2, \"Rollup\") {\n            System_Ext(SystemRollup, \"Rollup\", \"Derives blocks, execute transactions, posts commitments & sequence data\")\n            System(SystemNearDa, \"NEAR DA Client\", \"Submits/Gets blob data, creates commitments\")\n        }\n        BiRel(SystemRollup, SystemEth, \"Posts sequences, proofs of execution, DA frame references\")\n        BiRel(SystemRollup, SystemNearDa, \"Post batches, retrieves commitments\")\n        Rel(fisherman, SystemEth, \"Looks for commitments, posts results\")\n    }      \n    \n    Enterprise_Boundary(b0, \"NEAR\") {\n        \n        System(SystemLc, \"Light Client\", \"Syncs headers, provides inclusion proofs\")\n        System(SystemNear, \"NEAR Protocol\", \"NEAR validators, archival nodes\")\n        \n        Rel(SystemLc, SystemNear, \"Syncs headers\")    \n        Rel(SystemNearDa, SystemNear, \"Submits/Gets blob\")\n\n        %% This doesn't exist yet\n        %% System(SystemDas, \"Data Availability Sampling\", \"Data redundancy, retrieval, sample responses\")\n        %% BiRel(SystemDas, SystemLc, \"Commitments\")\n    }\n     \n    Person_Ext(fisherman, \"Fisherman\")\n    Rel(fisherman, SystemLc, \"Requests inclusion proofs, validates inclusion proofs\")\n      \n\n    UpdateRelStyle(fisherman, SystemEth, $offsetY=\"-10\" $lineColor=\"red\")\n    UpdateRelStyle(fisherman, SystemLc, $offsetY=\"-10\", $lineColor=\"red\")\n    UpdateRelStyle(SystemRollup, SystemEth, $offsetY=\"-30\", $lineColor=\"white\")\n    UpdateElementStyle(fisherman, $bgColor=\"grey\", $borderColor=\"red\")\n\n    UpdateRelStyle(SystemRollup, SystemNearDa, $offsetX=\"-200\", $lineColor=\"white\", $textColor=\"white\")\n    UpdateRelStyle(SystemNearDa, SystemNear, $textColor=\"white\", $lineColor=\"white\", $offsetY=\"10\")\n    UpdateRelStyle(SystemNearLc, SystemNear, $offsetX=\"30\")\n```\n\n---\n\n## [Blob Store Contract](https://github.com/near/rollup-data-availability/tree/main/contracts/blob-store)\n\nThe [blob store contract](https://github.", "mimetype": "text/plain", "start_char_idx": 2333, "end_char_idx": 4284, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3fe33f7c-9d54-467a-9713-1144d87e3ee2": {"__data__": {"id_": "3fe33f7c-9d54-467a-9713-1144d87e3ee2", "embedding": null, "metadata": {"file_path": "./near_dist/data-availability.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c", "node_type": "4", "metadata": {}, "hash": "84630f26e1e2140d6f141b0ad01539d8cf37c22a5ee7b3e767ba2d68abb13bf2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "10b669a7-6a81-4007-9400-70471121e386", "node_type": "1", "metadata": {}, "hash": "f2354ac1732cf666543b97a6e5771d72872d828280ddfa4e07602c64027c8c0a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a7c2ea5-c3a7-497e-b8ba-6808361853fa", "node_type": "1", "metadata": {}, "hash": "b16fbca3c3b9674bb51074abb439a6d52841785c5e33c6b7655f6b9fd3cdc94e", "class_name": "RelatedNodeInfo"}}, "text": "com/near/rollup-data-availability/tree/main/contracts/blob-store) provides the store for arbitrary DA blobs. In practice, these \"blobs\" are sequencing data from rollups, but they can be any data.\n\nNEAR blockchain state storage is pretty cheap. At the time of writing, 100KiB is a flat fee of 1NEAR. To limit the costs of NEAR storage even more, we don't store the blob data in the blockchain state.\n\nIt works by taking advantage of NEAR consensus around receipts. When a chunk producer processes a receipt, there is consensus around the receipt. However, once the chunk has been processed and included in the block, the receipt is no longer required for consensus and can be pruned. The pruning time is at least 3 NEAR epochs, where each epoch is 12 Hours; in practice, this is around five epochs. Once the receipt has been pruned, it is the responsibility of archival nodes to retain the transaction data, and we can even get the data from indexers.\n\nWe can validate that the blob was retrieved from ecosystem actors in the format submitted by checking the blob commitment. The blob commitment currently needs to be more efficient and will be improved, but it benefits us because anybody can build this with limited expertise and tooling. It is created by taking a blob, chunking it into 256-byte pieces, and creating a Merkle tree, where each leaf is a Sha-256 hash of the shard. The root of the Merkle tree is the blob commitment, which is provided as [transaction_id ++ commitment] to the L1 contract, which is 64 bytes.", "mimetype": "text/plain", "start_char_idx": 4284, "end_char_idx": 5808, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a7c2ea5-c3a7-497e-b8ba-6808361853fa": {"__data__": {"id_": "9a7c2ea5-c3a7-497e-b8ba-6808361853fa", "embedding": null, "metadata": {"file_path": "./near_dist/data-availability.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c", "node_type": "4", "metadata": {}, "hash": "84630f26e1e2140d6f141b0ad01539d8cf37c22a5ee7b3e767ba2d68abb13bf2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3fe33f7c-9d54-467a-9713-1144d87e3ee2", "node_type": "1", "metadata": {}, "hash": "fd4aa678a2059ee24a6d41a1adb0bf98f38936dfbdc6900343cea94b7a91283e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71c55302-e8cb-45ba-bf17-521899adb206", "node_type": "1", "metadata": {}, "hash": "6d1b0773fc4f3f872748ebf756f3542b7d216101b6bcfdbc85747918332977bc", "class_name": "RelatedNodeInfo"}}, "text": "What this means:\n- Consensus is provided around the submission of a blob by NEAR validators\n- The function input data is stored by full nodes for at least three days\n- Archival nodes can store the data for longer\n- We don't occupy consensus with more data than needs to be\n- Indexers can also be used, and this Data is currently indexed by all significant explorers in NEAR\n- The commitment is available for a long time, and the commitment is straightforward to create\n\n---\n\n## [Light Client](https://github.com/near/rollup-data-availability/tree/main/)\n\nA trustless off-chain light client for NEAR with DA-enabled features, Such as KZG commitments, Reed-Solomon erasure coding & storage connectors.\n\nThe light client provides easy access to transaction and receipt inclusion proofs within a block or chunk. This is useful for checking any dubious blobs which may not have been submitted or validating that a blob has been submitted to NEAR.\n\nA blob submission can be verified by:\n\n- Taking the NEAR transaction ID from Ethereum for the blob commitment.\n- Ask the light client for an inclusion proof for the transaction ID or the receipt ID if you're feeling specific; this will give you a Merkle inclusion proof for the transaction/receipt.\n- Once you have the inclusion proof, you can ask the light client to verify the proof for you, or advanced users can manually verify it themselves.\n- Armed with this knowledge, rollup providers can have advanced integration with light clients and build proving systems around it.\n\nIn the future, we will provide extensions to light clients such that non-interactive proofs can be supplied for blob commitments and other data availability features.\n\nIt's also possible that the light client may be on-chain for the header syncing and inclusion proof verification, but this is a low priority right now.\n\n---\n\n## DA RPC\nThis client is the defacto client for submitting blobs to NEAR. These crates allow a client to interact with the blob store. It can be treated as a \"black box\", where blobs go in, and `[transaction_id ++ commitment]` emerges.\n\nThere are multiple versions:\n- The [`da-rpc` crate](https://github.com/near/rollup-data-availability/tree/main/crates/da-rpc) is the rust client, which anyone can use if they prefer rust in their application.", "mimetype": "text/plain", "start_char_idx": 5810, "end_char_idx": 8104, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "71c55302-e8cb-45ba-bf17-521899adb206": {"__data__": {"id_": "71c55302-e8cb-45ba-bf17-521899adb206", "embedding": null, "metadata": {"file_path": "./near_dist/data-availability.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c", "node_type": "4", "metadata": {}, "hash": "84630f26e1e2140d6f141b0ad01539d8cf37c22a5ee7b3e767ba2d68abb13bf2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a7c2ea5-c3a7-497e-b8ba-6808361853fa", "node_type": "1", "metadata": {}, "hash": "b16fbca3c3b9674bb51074abb439a6d52841785c5e33c6b7655f6b9fd3cdc94e", "class_name": "RelatedNodeInfo"}}, "text": "The responsibility of this client is to provide a simple interface for interacting with NEAR DA.\n- The [`da-rpc-sys` crate](https://github.com/near/rollup-data-availability/tree/main/crates/da-rpc-sys) is the FFI client binding for use by non-rust applications. This calls through to `da-rpc` to interact with the blob store, with some additional black box functionality for dealing with pointers wrangling and such.\n- The [`da-rpc-go` package](https://github.com/near/rollup-data-availability/tree/main/gopkg/da-rpc) is the go client bindings for use by non-rust applications, and this calls through to `da-rpc-sys`, which provides another application-level layer for easy interaction with the bindings.\n\n:::info\nSee also [the diagram](https://github.com/near/rollup-data-availability/blob/main/docs/da_rpc_client.md)\n:::\n\n---\n\n## Integrations\n\nWe have developed some proof of concept works for integrating with L2 rollups:\n\n- [CDK Stack](https://github.com/firatNEAR/cdk-validium-node/tree/near): We have integrated with the Polygon CDK stack. Using the Sequence Sender for submissions to NEAR.\n- [Optimism](https://github.com/near/optimism): We have integrated with the Optimism OP stack. Using the `Batcher` for submissions to NEAR and the proposer for submitting NEAR commitment data to Ethereum.\n\n- [Arbitrum Nitro](https://github.com/near/nitro): We have integrated a small plugin into the DAC daserver. This is much like our http sidecar and provides a very modular integration into NEAR DA whilst supporting arbitrum DACs.\n\n:::info\nIn the future, the `Arbitrum Nitro` integration will likely be the easiest way to support NEAR DA as it acts as an independent sidecar which can be scaled as needed. This also means that the DAC can opt-in and out of NEAR DA, lowering their infrastructure burden. With this approach, the DAC committee members just need to have a \"dumb\" signing service, with the store backed by NEAR.\n:::", "mimetype": "text/plain", "start_char_idx": 8105, "end_char_idx": 10034, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "074e70c3-b309-4954-acab-64113cbfdad3": {"__data__": {"id_": "074e70c3-b309-4954-acab-64113cbfdad3", "embedding": null, "metadata": {"file_path": "./near_dist/js-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a", "node_type": "4", "metadata": {}, "hash": "346e4ca33322c3ad27cdaa85f01c0ae2f1ec64f824633341bd442befd7f7fdf5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6d48449-a2ec-41c6-9895-38dc453ea51c", "node_type": "1", "metadata": {}, "hash": "da3b2b6020e587d29078554d0fc5a08c683921b6a2c341738866af15e90fd9b4", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: js-lake-indexer\ntitle: JS basic tutorial\nsidebar_label: JS basic tutorial\n---\n\n# NEAR Lake indexer basic tutorial\n\n\n:::info Source code for the tutorial\n\n[`near-examples/near-lake-raw-printer-js`](https://github.com/near-examples/near-lake-raw-printer-js): source code for the tutorial on how to create an indexer that prints block height and number of shards\n\n:::\n\nRecently we have [published a JavaScript version of the NEAR Lake Framework](https://www.npmjs.com/package/near-lake-framework) on npmjs.org\n\nWe want to empower you with a basic tutorial on how to use the JavaScript Library. Let's get started!\n\n\n## Requirements\n\nBefore we get started, please, ensure you have:\n\n- [nodejs](https://nodejs.org/en/download/) installed\n\n## Create a project\n\nCreate an indexer project:\n\n```bash\nmkdir near-lake-raw-printer-js && cd near-lake-raw-printer-js\n```\n\nNow we're going to call `npm init`, we can continue with the default values pressing Enter on every question in the interactive mode:\n```bash\nnpm init\n```\n\n```\nversion: (1.0.0)\ndescription:\nentry point: (index.js)\ntest command:\ngit repository:\nkeywords:\nauthor:\nlicense: (ISC)\nAbout to write to /Users/near/projects/near-lake-raw-printer-js/package.json:\n\n{\n  \"name\": \"near-lake-raw-printer-js\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n\n\nIs this OK? (yes)\n```\n\n`package.json` is ready.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1490, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d6d48449-a2ec-41c6-9895-38dc453ea51c": {"__data__": {"id_": "d6d48449-a2ec-41c6-9895-38dc453ea51c", "embedding": null, "metadata": {"file_path": "./near_dist/js-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a", "node_type": "4", "metadata": {}, "hash": "346e4ca33322c3ad27cdaa85f01c0ae2f1ec64f824633341bd442befd7f7fdf5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "074e70c3-b309-4954-acab-64113cbfdad3", "node_type": "1", "metadata": {}, "hash": "957d4d69d09d759de95616f8af6c2261de58bea86aa9ff73f126a6e344f04502", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "619c66a2-618f-45d9-b469-e767421091af", "node_type": "1", "metadata": {}, "hash": "283934efa3edec41eb1bd04f31b061c506f01e48d214d34b0ba059fd6d7cb6da", "class_name": "RelatedNodeInfo"}}, "text": "Let's install `near-lake-framework`\n\n## Install dependencies\n\nInstall `near-lake-framework`\n\n```bash\nnpm install near-lake-framework --save\n```\n\nInstall `typescript` as dev dependency\n\n```bash\nnpm install typescript --save-dev\n```\n\n## Setup TypeScript\n\nNow we can create `tsconfig.json` for TypeScript settings:\n\n```bash\ntouch tsconfig.json\n```\n\nPaste the content to the file:\n\n```json title=tsconfig.json\n{\n  \"compilerOptions\": {\n    \"lib\": [\n      \"ES2018\",\n      \"dom\"\n    ]\n  }\n}\n```\n\nNow let's add the `scripts` section to the `package.json`\n\n```json\n\"scripts\": {\n  \"start\": \"tsc && node index.js\"\n}\n```\n\nAfter that your `package.json` should look similar to:\n\n```json title=package.json\n{\n  \"name\": \"near-lake-raw-printer\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"tsc && node index.js\"\n  },\n  \"dependencies\": {\n    \"near-lake-framework\": \"^1.0.1\"\n  },\n  \"devDependencies\": {\n    \"typescript\": \"^4.6.4\"\n  }\n}\n```\n\nNow let's create `index.ts`\n\n```bash\ntouch index.ts\n```\n\nOpen `index.ts` in your favorite editor to start coding.\n\n## Import `near-lake-framework`\n\nIn the `index.ts` file let's import the necessary dependencies:\n\n```ts\nimport { startStream, types } from 'near-lake-framework';\n```\n\nWe've imported the main function `startStream`, which will be called to actually run the indexer, and `types`, which hold the `LakeConfig` type we need to construct.\n\n## Create a config\n\nTo get indexer running we need to start it with a config.", "mimetype": "text/plain", "start_char_idx": 1491, "end_char_idx": 2990, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "619c66a2-618f-45d9-b469-e767421091af": {"__data__": {"id_": "619c66a2-618f-45d9-b469-e767421091af", "embedding": null, "metadata": {"file_path": "./near_dist/js-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a", "node_type": "4", "metadata": {}, "hash": "346e4ca33322c3ad27cdaa85f01c0ae2f1ec64f824633341bd442befd7f7fdf5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d6d48449-a2ec-41c6-9895-38dc453ea51c", "node_type": "1", "metadata": {}, "hash": "da3b2b6020e587d29078554d0fc5a08c683921b6a2c341738866af15e90fd9b4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b82a3f66-d60a-4ed3-a5db-fd9dad8ef939", "node_type": "1", "metadata": {}, "hash": "e9ee25c6f706eeae66172f6268e19c42fd35ecc197ae12f64d6fa77ac8878a14", "class_name": "RelatedNodeInfo"}}, "text": "We need to create an instance of `LakeConfig`\n\n```ts\nconst lakeConfig: types.LakeConfig = {\n    s3BucketName: \"near-lake-data-mainnet\",\n    s3RegionName: \"eu-central-1\",\n    startBlockHeight: 63804051,\n};\n```\n\n## Create indexer handler\n\nIndexer will be streaming the [`StreamerMessage`](/build/data-infrastructure/lake-data-structures/toc) instances we need to handle according to our needs.\n\nIn `near-lake-framework` JS library the handler have to be presented as a callback function. This function have to:\n- be asynchronous\n- accept an argument of type [`StreamerMessage`](/build/data-infrastructure/lake-data-structures/toc)\n- return nothing (`void`)\n\nCreating the callback:\n\n```ts\nasync function handleStreamerMessage(streamerMessage: types.StreamerMessage): Promise<void> {\n    //\n}\n```\n\nFor this tutorial our requirement is to log the block height and the numer of shards. That's simple:\n\n```ts\nasync function handleStreamerMessage(streamerMessage: types.StreamerMessage): Promise<void> {\n    console.log(`\n        Block #${streamerMessage.block.header.height}\n        Shards: ${streamerMessage.shards.length}\n    `);\n}\n```\n\n## Starting the stream\n\nAnd the last thing to write is the call to `startStream` with the config and pass the callback function.\n\n```ts\n(async () => {\n    await startStream(lakeConfig, handleStreamerMessage);\n})();\n```\n\nThat's it. Now we can compile the code and run it\n\n## Compile and run\n\n:::danger Credentials\n\nTo be able to access the data from [NEAR Lake](/build/data-infrastructure/lake-framework/near-lake) you need to provide credentials.", "mimetype": "text/plain", "start_char_idx": 2991, "end_char_idx": 4569, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b82a3f66-d60a-4ed3-a5db-fd9dad8ef939": {"__data__": {"id_": "b82a3f66-d60a-4ed3-a5db-fd9dad8ef939", "embedding": null, "metadata": {"file_path": "./near_dist/js-lake-indexer.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a", "node_type": "4", "metadata": {}, "hash": "346e4ca33322c3ad27cdaa85f01c0ae2f1ec64f824633341bd442befd7f7fdf5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "619c66a2-618f-45d9-b469-e767421091af", "node_type": "1", "metadata": {}, "hash": "283934efa3edec41eb1bd04f31b061c506f01e48d214d34b0ba059fd6d7cb6da", "class_name": "RelatedNodeInfo"}}, "text": "Please, see the [Credentials](../running-near-lake/credentials.md) article\n\n:::\n\nWe've added the `start` command to the `scripts`, so the compilation and run should as easy as\n\n```bash\nnpm run start\n```\n\nYou should see something like the following:\n\n```bash\nBlock #63804051 Shards: 4\nBlock #63804052 Shards: 4\nBlock #63804053 Shards: 4\nBlock #63804054 Shards: 4\nBlock #63804055 Shards: 4\nBlock #63804056 Shards: 4\nBlock #63804057 Shards: 4\nBlock #63804058 Shards: 4\nBlock #63804059 Shards: 4\nBlock #63804060 Shards: 4\n```\n\nYou can stop the indexer by pressing CTRL+C\n\n## What's next?\n\nYou can play around and change the content of the callback function [`handleStreamerMessage`](#create-indexer-handler) to handle the data differently.\n\nYou can find the [source code for this tutorial on the GitHub](https://github.com/near-examples/near-lake-raw-printer-js).", "mimetype": "text/plain", "start_char_idx": 4570, "end_char_idx": 5429, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4937d2a3-2ea1-4179-890b-480c6807b64a": {"__data__": {"id_": "4937d2a3-2ea1-4179-890b-480c6807b64a", "embedding": null, "metadata": {"file_path": "./near_dist/reproducible-builds.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "02aa9144-ddd0-4d46-9be5-3a21cd1ee053", "node_type": "4", "metadata": {}, "hash": "f9f4ed6f1371780f20e8d3aceee43962b20ab52ceab04561a300674e4d18e9de", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: reproducible-builds\ntitle: Reproducible Builds\n---\n\nReproducible builds let different people build the same program and get the exact same outputs as one another. It helps users trust that deployed contracts are built correctly and correspond to the source code. To verify your contract user can build it themselves and check that the binaries are identical.\n\n## Problem\nIf you will build your contract on two different machines, most likely you will get two similar but not identical binaries. Your build artifact can be affected by the locale, timezone, build path, and billion other factors in your build environment. Rust community has a long story of fighting this issue but still, [it is not achieved yet](https://github.com/rust-lang/rust/labels/A-reproducibility).\n\n## CI solution\nWe recommend you to build your contracts with the use of our [Contract Builder](https://github.com/near/near-sdk-rs/tree/master/contract-builder). It's is using Docker, controlled and sharable environment that can be used by both you and your users. Docker image is available [here](https://hub.docker.com/r/nearprotocol/contract-builder). The contract built in it will result in a binary that is the same if built on other machines.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1230, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d9609390-b918-4d26-a848-9fffc2c1d130": {"__data__": {"id_": "d9609390-b918-4d26-a848-9fffc2c1d130", "embedding": null, "metadata": {"file_path": "./near_dist/vote-for-proposal.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6ceab34-4c49-41a6-a67c-9b3edf2c3de4", "node_type": "4", "metadata": {}, "hash": "7a14be009839b6e1fa174b76c7328ed94421cdca10aa3af3d4f43b5ee84661aa", "class_name": "RelatedNodeInfo"}}, "text": "```bash\nnear call primitives.sputnik-dao.near act_proposal '{\"id\": 0, \"action\": \"VoteApprove\"}' --gas 300000000000000 --accountId bob.near\n```\n\n:::note\nAvailable vote options: `VoteApprove`, `VoteReject`, `VoteRemove`.\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa29eb04-958c-43ed-bef4-c88cea03c4ab": {"__data__": {"id_": "aa29eb04-958c-43ed-bef4-c88cea03c4ab", "embedding": null, "metadata": {"file_path": "./near_dist/serialization-interface.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "011d0571-89c4-4b95-85a0-e0972b09b129", "node_type": "4", "metadata": {}, "hash": "b6780b588824ef8057df9597a0a15bc4096c16321781847d8757f32a65ad3b77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f2804286-d204-495d-ba2e-75c2efe23c25", "node_type": "1", "metadata": {}, "hash": "174a377498339f6421ad8c853d089549c51016a80f71423df9f7f1f72aa70233", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: serialization-protocols\ntitle: Serialization Protocols\n---\n\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nSerialization formats within the SDK define how data structures are translated into bytes which are needed for passing data into methods of the smart contract or storing data in state. For the case of method parameters, [JSON](https://www.json.org/json-en.html) (default) and [Borsh](https://borsh.io/) are supported with the SDK and for storing data on-chain Borsh is used.\n\nThe qualities of JSON and Borsh are as follows:\n\nJSON:\n- Human-readable\n- Self-describing format (don't need to know the underlying type)\n- Easy interop with JavaScript\n- Less efficient size and (de)serialization\n\nBorsh:\n- Compact, binary format that's efficient for serialized data size\n- Need to know data format or have a schema to deserialize data\n- Strict and canonical binary representation\n- Fast and less overhead in most cases\n\nIn general, JSON will be used for contract calls and cross-contract calls for a better DevX, where Borsh can be used to optimize using less gas by having smaller parameter serialization and less deserialization computation within the contract.\n\n### Overriding Serialization Protocol Default\n\nThe result and parameter serialization can be opted into separately, but all parameters must be of the same format (can't serialize some parameters as borsh and others as JSON). An example of switching both the result and parameters to borsh is as follows:\n\n```rust\n#[result_serializer(borsh)]\npub fn sum_borsh(#[serializer(borsh)] a: u32, #[serializer(borsh)] b: u32) -> u32 {\n    a + b\n}\n```\n\nWhere the `result_serializer(borsh)` annotation will override the default result serialization protocol from JSON to borsh and the `serializer(borsh)` annotations will override the parameter serialization.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1898, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f2804286-d204-495d-ba2e-75c2efe23c25": {"__data__": {"id_": "f2804286-d204-495d-ba2e-75c2efe23c25", "embedding": null, "metadata": {"file_path": "./near_dist/serialization-interface.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "011d0571-89c4-4b95-85a0-e0972b09b129", "node_type": "4", "metadata": {}, "hash": "b6780b588824ef8057df9597a0a15bc4096c16321781847d8757f32a65ad3b77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa29eb04-958c-43ed-bef4-c88cea03c4ab", "node_type": "1", "metadata": {}, "hash": "b864f39e86d297946bda2aa33e8e5d76ceea4418579ba818bb3918c183b0e0f7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "661fa226-e3a3-4fbe-9053-acdc045bc5e9", "node_type": "1", "metadata": {}, "hash": "cf47230c783078499fff250b659f8ed64f403e0592f39175f5e33bc5cd2b1308", "class_name": "RelatedNodeInfo"}}, "text": "#### Example\n\nA simple demonstration of getting a [Borsh-serialized](https://borsh.io), base64-encoded value from a unit test:\n\n<Github language=\"rust\" start=\"93\" end=\"104\" url=\"https://github.com/mikedotexe/rust-status-message/blob/b83c5126fdbe0f19bc904e547fda0bb12c2ea133/src/lib.rs\" />\n\nThe following snippet shows a simple function that takes this value from a frontend or CLI. Note: this method doesn't have a return value, so the `#[result_serializer(borsh)]` isn't needed.\n\n<Github language=\"rust\" start=\"40\" end=\"42\" url=\"https://github.com/mikedotexe/rust-status-message/blob/b83c5126fdbe0f19bc904e547fda0bb12c2ea133/src/lib.rs\" />\n\nNote that this is using this simple struct:\n\n<Github language=\"rust\" start=\"13\" end=\"17\" url=\"https://github.com/mikedotexe/rust-status-message/blob/b83c5126fdbe0f19bc904e547fda0bb12c2ea133/src/lib.rs\" />\n\nTo call this with NEAR CLI, use a command similar to this:\n\n<Tabs groupId=\"cli-tabs\">\n<TabItem value=\"short\" label=\"Short\">\n\n```bash\nnear call rust-status-message.demo.testnet set_status_borsh --base64 'DAAAAEFsb2hhIGhvbnVhIQ==' --accountId demo.testnet\n```\n</TabItem>\n<TabItem value=\"full\" label=\"Full\">\n\n```bash\nnear contract call-function as-transaction rust-status-message.demo.testnet set_status_borsh base64-args 'DAAAAEFsb2hhIGhvbnVhIQ==' prepaid-gas '30 TeraGas' attached-deposit '0 NEAR' sign-as demo.testnet network-config testnet sign-with-keychain send\n```\n</TabItem>\n</Tabs>\n\n\nSee more details in [this GitHub gist](https://gist.github.com/mfornet/d8a94af333a68d67affd8cb78464c7c0) from [Marcelo](https://gist.github.com/mfornet).", "mimetype": "text/plain", "start_char_idx": 1900, "end_char_idx": 3491, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "661fa226-e3a3-4fbe-9053-acdc045bc5e9": {"__data__": {"id_": "661fa226-e3a3-4fbe-9053-acdc045bc5e9", "embedding": null, "metadata": {"file_path": "./near_dist/serialization-interface.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "011d0571-89c4-4b95-85a0-e0972b09b129", "node_type": "4", "metadata": {}, "hash": "b6780b588824ef8057df9597a0a15bc4096c16321781847d8757f32a65ad3b77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f2804286-d204-495d-ba2e-75c2efe23c25", "node_type": "1", "metadata": {}, "hash": "174a377498339f6421ad8c853d089549c51016a80f71423df9f7f1f72aa70233", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fded3ba9-26f6-4928-9683-a1318974627b", "node_type": "1", "metadata": {}, "hash": "d367455139524042c590dd7b34b768ee87888c0d33815b7497f7fc3d023ba57d", "class_name": "RelatedNodeInfo"}}, "text": "### JSON wrapper types\n\nTo help with serializing certain types to JSON which have unexpected or inefficient default formats, there are some wrapper types in [`near_sdk::json_types`](https://docs.rs/near-sdk/3.1.0/near_sdk/json_types/index.html) that can be used.\n\nBecause JavaScript only supports integers to value `2^53 - 1`, you will lose precision if deserializing the JSON integer is above this range. To counteract this, you can use the `I64`, `U64`, `I128`, and `U128` in place of the native types for these parameters or result to serialize the value as a string. By default, all integer types will serialize as an integer in JSON.\n\nYou can convert from `U64` to `u64` and back using `std::convert::Into`, e.g.", "mimetype": "text/plain", "start_char_idx": 3493, "end_char_idx": 4210, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fded3ba9-26f6-4928-9683-a1318974627b": {"__data__": {"id_": "fded3ba9-26f6-4928-9683-a1318974627b", "embedding": null, "metadata": {"file_path": "./near_dist/serialization-interface.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "011d0571-89c4-4b95-85a0-e0972b09b129", "node_type": "4", "metadata": {}, "hash": "b6780b588824ef8057df9597a0a15bc4096c16321781847d8757f32a65ad3b77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "661fa226-e3a3-4fbe-9053-acdc045bc5e9", "node_type": "1", "metadata": {}, "hash": "cf47230c783078499fff250b659f8ed64f403e0592f39175f5e33bc5cd2b1308", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32761152-3ab7-4175-a1b5-74e527207785", "node_type": "1", "metadata": {}, "hash": "050be5338f16eced610396d39f494ecb6acd9ea8c1d7d8f1ea14ed03b2f78604", "class_name": "RelatedNodeInfo"}}, "text": "```rust\n#[near]\nimpl Contract {\n    pub fn mult(&self, a: U64, b: U64) -> U128 {\n        let a: u64 = a.into();\n        let b: u64 = b.into();\n        let product = u128::from(a) * u128::from(b);\n        product.into()\n    }\n}\n```\n\nYou can also access inner values and using `.0`:\n\n```diff\n #[near]\n impl Contract {\n     pub fn mult(&self, a: U64, b: U64) -> U128 {\n-        let a: u64 = a.into();\n+        let a = a.0;\n-        let b: u64 = b.into();\n+        let b = b.0;\n         let product = u128::from(a) * u128::from(b);\n         product.into()\n     }\n }\n```\n\nAnd you can cast the lower-case `u` variants to upper-case `U` variants using `U64(...)` and `U128(...)`:\n\n```diff\n #[near]\n impl Contract {\n     pub fn mult(&self, a: U64, b: U64) -> U128 {\n         let a = a.0;\n         let b = b.0;\n         let product = u128::from(a) * u128::from(b);\n-        product.into()\n+        U128(product)\n     }\n }\n```\n\nCombining it all:\n\n```rust\n#[near]\nimpl Contract {\n    pub fn mult(&self, a: U64, b: U64) -> U128 {\n        U128(u128::from(a.0) * u128::from(b.0))\n    }\n}\n```\n\nAlthough there are these JSON wrapper types included with the SDK, any custom type can be used, as long as it implements [`serde`](https://serde.rs/) serialize and deserialize respectively. All of these types just override the JSON format and will have a consistent `borsh` serialization and deserialization as the inner types.\n\n### Base64VecU8\n\nAnother example of a type you may want to override the default serialization of is `Vec<u8>` which represents bytes in Rust. By default, this will serialize as an array of integers, which is not compact and very hard to use.", "mimetype": "text/plain", "start_char_idx": 4212, "end_char_idx": 5861, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "32761152-3ab7-4175-a1b5-74e527207785": {"__data__": {"id_": "32761152-3ab7-4175-a1b5-74e527207785", "embedding": null, "metadata": {"file_path": "./near_dist/serialization-interface.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "011d0571-89c4-4b95-85a0-e0972b09b129", "node_type": "4", "metadata": {}, "hash": "b6780b588824ef8057df9597a0a15bc4096c16321781847d8757f32a65ad3b77", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fded3ba9-26f6-4928-9683-a1318974627b", "node_type": "1", "metadata": {}, "hash": "d367455139524042c590dd7b34b768ee87888c0d33815b7497f7fc3d023ba57d", "class_name": "RelatedNodeInfo"}}, "text": "There is a wrapper type [`Base64VecU8`](https://docs.rs/near-sdk/3.1.0/near_sdk/json_types/struct.Base64VecU8.html) which serializes and deserializes to a [Base-64](https://en.wikipedia.org/wiki/Base64) string for more compact JSON serialization.\n\nExample here:\n\n```rust\n#[near(contract_state)]\n#[derive(PanicOnDefault)]\npub struct Contract {\n    // Notice, internally we store `Vec<u8>` \n    pub data: Vec<u8>,\n}\n\n#[near]\nimpl Contract {\n    #[init]\n    pub fn new(data: Base64VecU8) -> Self {\n        Self {\n            data: data.into(),\n        }\n    }\n    pub fn get_data(self) -> Base64VecU8 {\n        self.data.into()\n    }\n}\n```", "mimetype": "text/plain", "start_char_idx": 5862, "end_char_idx": 6498, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf31f39f-c5bf-4852-95a3-c2645d469c01": {"__data__": {"id_": "bf31f39f-c5bf-4852-95a3-c2645d469c01", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec", "node_type": "1", "metadata": {}, "hash": "6befe55d020ef9d20d96209a4ca2330f1c708e6dd7085bc4a82a0cb0c5ad5114", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: core\ntitle: Core\nsidebar_label: Core\n---\nimport {Github} from \"@site/src/components/codetabs\";\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nIn this tutorial you'll learn how to implement the [core standards](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core) into your smart contract. If you're joining us for the first time, feel free to clone [this repo](https://github.com/near-examples/nft-tutorial) and checkout the `3.enumeration` branch to follow along.\n\n\n```bash\ngit checkout 3.enumeration\n```\n\n:::tip\nIf you wish to see the finished code for this _Core_ tutorial, you can find it on the `4.core` branch.\n:::\n\n## Introduction {#introduction}\n\nUp until this point, you've created a simple NFT smart contract that allows users to mint tokens and view information using the [enumeration standards](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration). Today, you'll expand your smart contract to allow for users to not only mint tokens, but transfer them as well.\n\nAs we did in the [minting tutorial](/tutorials/nfts/js/minting), let's break down the problem into multiple subtasks to make our lives easier. When a token is minted, information is stored in 3 places:\n\n- **tokensPerOwner**: set of tokens for each account.\n- **tokensById**: maps a token ID to a `Token` object.\n- **tokenMetadataById**: maps a token ID to its metadata.\n\nLet's now consider the following scenario. If Benji owns token A and wants to transfer it to Mike as a birthday gift, what should happen? First of all, token A should be removed from Benji's set of tokens and added to Mike's set of tokens.\n\nIf that's the only logic you implement, you'll run into some problems. If you were to do a `view` call to query for information about that token after it's been transferred to Mike, it would still say that Benji is the owner.\n\nThis is because the contract is still mapping the token ID to the old `Token` object that contains the `owner_id` field set to Benji's account ID.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2010, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec": {"__data__": {"id_": "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bf31f39f-c5bf-4852-95a3-c2645d469c01", "node_type": "1", "metadata": {}, "hash": "2bc09d8ed42eebb1044acea0f4adf265e5447e88c5ed7face619d7870ce7ccf1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1", "node_type": "1", "metadata": {}, "hash": "821eb8b2644e7e1310d7c8ce7c1301a4f4309b5b3229eae6d4c29f72d390c987", "class_name": "RelatedNodeInfo"}}, "text": "You still have to change the `tokensById` data structure so that the token ID maps to a new `Token` object which has Mike as the owner.\n\nWith that being said, the final process for when an owner transfers a token to a receiver should be the following:\n\n- Remove the token from the owner's set.\n- Add the token to the receiver's set.\n- Map a token ID to a new `Token` object containing the correct owner.\n\n:::note\nYou might be curious as to why we don't edit the `tokenMetadataById` field. This is because no matter who owns the token, the token ID will always map to the same metadata. The metadata should never change and so we can just leave it alone.\n:::\n\nAt this point, you're ready to move on and make the necessary modifications to your smart contract.\n\n## Modifications to the contract\n\nLet's start our journey in the `nft-contract/src/nft_core.ts` file.\n\n### Transfer function {#transfer-function}\n\nYou'll start by implementing the `nft_transfer` logic. This function will transfer the specified `token_id` to the `receiver_id` with an optional `memo` such as `\"Happy Birthday Mike!\"`. The core logic will be found in the `internalNftTransfer` function.\n\n<Github language=\"js\" start=\"37\" end=\"64\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/nft_core.ts\" />\n\nThere are a couple things to notice here. Firstly, we've introduced a new function called `assertOneYocto()`. This method will ensure that the user has attached exactly one yoctoNEAR to the call. If a function requires a deposit, you need a full access key to sign that transaction. By adding the one yoctoNEAR deposit requirement, you're essentially forcing the user to sign the transaction with a full access key.\n\nSince the transfer function is potentially transferring very valuable assets, you'll want to make sure that whoever is calling the function has a full access key.\n\nSecondly, we've introduced an `internalTransfer` method. This will perform all the logic necessary to transfer an NFT.", "mimetype": "text/plain", "start_char_idx": 2011, "end_char_idx": 4015, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1": {"__data__": {"id_": "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec", "node_type": "1", "metadata": {}, "hash": "6befe55d020ef9d20d96209a4ca2330f1c708e6dd7085bc4a82a0cb0c5ad5114", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fb7d8f9f-c877-443d-afd1-053b0c8c0790", "node_type": "1", "metadata": {}, "hash": "87155a10aec0d77b12047c8534cbe09337915fde8298e587f6459adb037ac553", "class_name": "RelatedNodeInfo"}}, "text": "### Internal helper functions\n\nLet's quickly move over to the `nft-contract/src/internal.ts` file so that you can implement the `assertOneYocto()` and `internalTransfer` methods.\n\nLet's start with the easier one, `assertOneYocto()`.\n\n#### assertOneYocto\n\n<Github language=\"js\" start=\"38\" end=\"41\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/internal.ts\" />\n\n#### internal_transfer\n\nIt's now time to implement the `internalTransfer` function which is the core of this tutorial. This function will take the following parameters:\n\n- **senderId**: the account that's attempting to transfer the token.\n- **receiverId**: the account that's receiving the token.\n- **tokenId**: the token ID being transferred.\n- **memo**: an optional memo to include.\n\nThe first thing you'll want to do is to make sure that the sender is authorized to transfer the token. In this case, you'll just make sure that the sender is the owner of the token. You'll do that by getting the `Token` object using the `token_id` and making sure that the sender is equal to the token's `owner_id`.\n\nSecond, you'll remove the token ID from the sender's list and add the token ID to the receiver's list of tokens. Finally, you'll create a new `Token` object with the receiver as the owner and remap the token ID to that newly created object.\n\n<Github language=\"js\" start=\"80\" end=\"114\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/internal.ts\" />\n\nYou've previously implemented functionality for adding a token ID to an owner's set but you haven't created the functionality for removing a token ID from an owner's set. Let's do that now by created a new function called `internalRemoveTokenFromOwner` which we'll place right above our `internalTransfer` and below the `internalAddTokenToOwner` function.\n\nIn the remove function, you'll get the set of tokens for a given account ID and then remove the passed in token ID. If the account's set is empty after the removal, you'll simply remove the account from the `tokensPerOwner` data structure.", "mimetype": "text/plain", "start_char_idx": 4017, "end_char_idx": 6098, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fb7d8f9f-c877-443d-afd1-053b0c8c0790": {"__data__": {"id_": "fb7d8f9f-c877-443d-afd1-053b0c8c0790", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1", "node_type": "1", "metadata": {}, "hash": "821eb8b2644e7e1310d7c8ce7c1301a4f4309b5b3229eae6d4c29f72d390c987", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a037d2b-5ee6-4d07-8046-2339cc67cb81", "node_type": "1", "metadata": {}, "hash": "fc6332856f1d90d600b11f57c20bfed605c77330d99444b7d042690bcc3d261a", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"60\" end=\"78\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/internal.ts\" />\n\nWith these internal functions complete, the logic for transferring NFTs is finished. It's now time to move on and implement `nft_transfer_call`, one of the most integral yet complicated functions of the standard.\n\n### Transfer call function {#transfer-call-function}\n\nLet's consider the following scenario. An account wants to transfer an NFT to a smart contract for performing a service. The traditional approach would be to use an approval management system, where the receiving contract is granted the ability to transfer the NFT to themselves after completion. You'll learn more about the approval management system in the [approvals section](/tutorials/nfts/js/approvals) of the tutorial series.\n\nThis allowance workflow takes multiple transactions. If we introduce a \u201ctransfer and call\u201d workflow baked into a single transaction, the process can be greatly improved.\n\nFor this reason, we have a function `nft_transfer_call` which will transfer an NFT to a receiver and also call a method on the receiver's contract all in the same transaction.\n\n<Github language=\"js\" start=\"66\" end=\"125\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/nft_core.ts\" />\n\nThe function will first assert that the caller attached exactly 1 yocto for security purposes. It will then transfer the NFT using `internalTransfer` and start the cross contract call. It will call the method `nft_on_transfer` on the `receiver_id`'s contract which returns a promise. After the promise finishes executing, the function `nft_resolve_transfer` is called. This is a very common workflow when dealing with cross contract calls. You first initiate the call and wait for it to finish executing. You then invoke a function that resolves the result of the promise and act accordingly.\n\nIn our case, when calling `nft_on_transfer`, that function will return whether or not you should return the NFT to it's original owner in the form of a boolean. This is logic will be executed in the `internalResolveTransfer` function.", "mimetype": "text/plain", "start_char_idx": 6100, "end_char_idx": 8263, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a037d2b-5ee6-4d07-8046-2339cc67cb81": {"__data__": {"id_": "8a037d2b-5ee6-4d07-8046-2339cc67cb81", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fb7d8f9f-c877-443d-afd1-053b0c8c0790", "node_type": "1", "metadata": {}, "hash": "87155a10aec0d77b12047c8534cbe09337915fde8298e587f6459adb037ac553", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3abaa560-2c5a-4c92-830e-5269428c6b60", "node_type": "1", "metadata": {}, "hash": "a82f6f79516168b7c0a2bef9b73fd57d9e6d73b108e8236cd933a1620854e7dd", "class_name": "RelatedNodeInfo"}}, "text": "<Github language=\"js\" start=\"127\" end=\"187\" url=\"https://github.com/near-examples/nft-tutorial-js/blob/4.core/src/nft-contract/nft_core.ts\" />\n\nIf `nft_on_transfer` returned true, you should send the token back to it's original owner. On the contrary, if false was returned, no extra logic is needed. As for the return value of `nft_resolve_transfer`, the standard dictates that the function should return a boolean indicating whether or not the receiver successfully received the token or not.\n\nThis means that if `nft_on_transfer` returned true, you should return false. This is because if the token is being returned to its original owner. The `receiver_id` didn't successfully receive the token in the end. On the contrary, if `nft_on_transfer` returned false, you should return true since we don't need to return the token and thus the `receiver_id` successfully owns the token.\n\nWith that finished, you've now successfully added the necessary logic to allow users to transfer NFTs. It's now time to deploy and do some testing.\n\n## Redeploying the contract {#redeploying-contract}\n\nUsing the build script, build and deploy the contract as you did in the previous tutorials:\n\n```bash\nyarn build && near deploy --wasmFile build/nft.wasm --accountId $NFT_CONTRACT_ID\n```\n\nThis should output a warning saying that the account has a deployed contract and will ask if you'd like to proceed. Simply type `y` and hit enter.\n\n```\nThis account already has a deployed contract [ AKJK7sCysrWrFZ976YVBnm6yzmJuKLzdAyssfzK9yLsa ]. Do you want to proceed? (y/n)\n```\n\n:::tip\nIf you haven't completed the previous tutorials and are just following along with this one, simply create an account and login with your CLI using `near login`. You can then export an environment variable `export NFT_CONTRACT_ID=YOUR_ACCOUNT_ID_HERE`.\n:::\n\n## Testing the new changes {#testing-changes}\n\nNow that you've deployed a patch fix to the contract, it's time to move onto testing.", "mimetype": "text/plain", "start_char_idx": 8265, "end_char_idx": 10217, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3abaa560-2c5a-4c92-830e-5269428c6b60": {"__data__": {"id_": "3abaa560-2c5a-4c92-830e-5269428c6b60", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8a037d2b-5ee6-4d07-8046-2339cc67cb81", "node_type": "1", "metadata": {}, "hash": "fc6332856f1d90d600b11f57c20bfed605c77330d99444b7d042690bcc3d261a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "050bcd66-f3f6-43a3-a78a-8ceb04669d02", "node_type": "1", "metadata": {}, "hash": "6f4113e416bbc63362e0373e4d84e0601ff9252b2a4cb6128fab6a4bf4e59aa9", "class_name": "RelatedNodeInfo"}}, "text": "Using the previous NFT contract where you had minted a token to yourself, you can test the `nft_transfer` method. If you transfer the NFT, it should be removed from your account's collectibles displayed in the wallet. In addition, if you query any of the enumeration functions, it should show that you are no longer the owner.\n\nLet's test this out by transferring an NFT to the account `benjiman.testnet` and seeing if the NFT is no longer owned by you.\n\n### Testing the transfer function\n\n:::note\nThis means that the NFT won't be recoverable unless the account `benjiman.testnet` transfers it back to you. If you don't want your NFT lost, make a new account and transfer the token to that account instead.\n:::\n\nIf you run the following command, it will transfer the token `\"token-1\"` to the account `benjiman.testnet` with the memo `\"Go Team :)\"`. Take note that you're also attaching exactly 1 yoctoNEAR by using the `--depositYocto` flag. \n\n:::tip\nIf you used a different token ID in the previous tutorials, replace `token-1` with your token ID.\n:::\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_transfer '{\"receiver_id\": \"benjiman.testnet\", \"token_id\": \"token-1\", \"memo\": \"Go Team :)\"}' --accountId $NFT_CONTRACT_ID --depositYocto 1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT_ID nft_transfer json-args '{\"receiver_id\": \"benjiman.testnet\", \"token_id\": \"token-1\", \"memo\": \"Go Team :)\"}' prepaid-gas '100.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you now query for all the tokens owned by your account, that token should be missing.", "mimetype": "text/plain", "start_char_idx": 10218, "end_char_idx": 12007, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "050bcd66-f3f6-43a3-a78a-8ceb04669d02": {"__data__": {"id_": "050bcd66-f3f6-43a3-a78a-8ceb04669d02", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3abaa560-2c5a-4c92-830e-5269428c6b60", "node_type": "1", "metadata": {}, "hash": "a82f6f79516168b7c0a2bef9b73fd57d9e6d73b108e8236cd933a1620854e7dd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9df2d7f0-73a8-45aa-9684-9069fba1faeb", "node_type": "1", "metadata": {}, "hash": "811aa6e6df9596acb9b35508f660be7733e3c93925c004ee2f28f8e34345c6b3", "class_name": "RelatedNodeInfo"}}, "text": "Similarly, if you query for the list of tokens owned by `benjiman.testnet`, that account should now own your NFT.\n\n### Testing the transfer call function\n\nNow that you've tested the `nft_transfer` function, it's time to test the `nft_transfer_call` function. If you try to transfer an NFT to a receiver that does **not** implement the `nft_on_transfer` function, the contract will panic and the NFT will **not** be transferred. Let's test this functionality below.\n\nFirst mint a new NFT that will be used to test the transfer call functionality.", "mimetype": "text/plain", "start_char_idx": 12008, "end_char_idx": 12553, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9df2d7f0-73a8-45aa-9684-9069fba1faeb": {"__data__": {"id_": "9df2d7f0-73a8-45aa-9684-9069fba1faeb", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "050bcd66-f3f6-43a3-a78a-8ceb04669d02", "node_type": "1", "metadata": {}, "hash": "6f4113e416bbc63362e0373e4d84e0601ff9252b2a4cb6128fab6a4bf4e59aa9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "39d2b624-1f4b-472e-bd02-1bf43e2daa66", "node_type": "1", "metadata": {}, "hash": "01407c9c0201bd957b2eb3957c6f3dadd0a7ba75f2a088b6a9e31f6935272a83", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_mint '{\"token_id\": \"token-2\", \"metadata\": {\"title\": \"NFT Tutorial Token\", \"description\": \"Testing the transfer call function\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$NFT_CONTRACT_ID'\"}' --accountId $NFT_CONTRACT_ID --amount 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args '{\"token_id\": \"token-2\", \"metadata\": {\"title\": \"NFT Tutorial Token\", \"description\": \"Testing the transfer call function\", \"media\": \"https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif\"}, \"receiver_id\": \"'$NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nNow that you've minted the token, you can try to transfer the NFT to the account `no-contract.testnet` which as the name suggests, doesn't have a contract. This means that the receiver doesn't implement the `nft_on_transfer` function and the NFT should remain yours after the transaction is complete.", "mimetype": "text/plain", "start_char_idx": 12555, "end_char_idx": 13863, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "39d2b624-1f4b-472e-bd02-1bf43e2daa66": {"__data__": {"id_": "39d2b624-1f4b-472e-bd02-1bf43e2daa66", "embedding": null, "metadata": {"file_path": "./near_dist/4-core.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94", "node_type": "4", "metadata": {}, "hash": "9572cda5c5ab1ca91349aeb9f8f91605e411d1cb111bb7fc69793da9d9fb1aea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9df2d7f0-73a8-45aa-9684-9069fba1faeb", "node_type": "1", "metadata": {}, "hash": "811aa6e6df9596acb9b35508f660be7733e3c93925c004ee2f28f8e34345c6b3", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call $NFT_CONTRACT_ID nft_transfer_call '{\"receiver_id\": \"no-contract.testnet\", \"token_id\": \"token-2\", \"msg\": \"foo\"}' --accountId $NFT_CONTRACT_ID --depositYocto 1 --gas 200000000000000\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction $NFT_CONTRACT_ID nft_transfer_call json-args '{\"receiver_id\": \"no-contract.testnet\", \"token_id\": \"token-2\", \"msg\": \"foo\"}' prepaid-gas '200.0 Tgas' attached-deposit '1 yoctoNEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\nIf you query for your tokens, you should still have `token-2` and at this point, you're finished!\n\n## Conclusion\n\nIn this tutorial, you learned how to expand an NFT contract past the minting functionality and you added ways for users to transfer NFTs. You [broke down](#introduction) the problem into smaller, more digestible subtasks and took that information and implemented both the [NFT transfer](#transfer-function) and [NFT transfer call](#transfer-call-function) functions. In addition, you deployed another [patch fix](#redeploying-contract) to your smart contract and [tested](#testing-changes) the transfer functionality.\n\nIn the [next tutorial](/tutorials/nfts/js/approvals), you'll learn about the approval management system and how you can approve others to transfer tokens on your behalf.\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n- Enumeration standard: [NEP181](https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 13865, "end_char_idx": 15694, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c520cc71-d2a6-47d4-87d2-20a1e0e72aa0": {"__data__": {"id_": "c520cc71-d2a6-47d4-87d2-20a1e0e72aa0", "embedding": null, "metadata": {"file_path": "./near_dist/frontrunning.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "544eba91-9453-4121-a0f2-755d201028ec", "node_type": "4", "metadata": {}, "hash": "cc5c3cf5c1035e0957c31addc6257944552a18fd35da56ba7a487842522ad589", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: frontrunning\ntitle: Front Running\n---\n\nIn the NEAR network, validators have access to the transaction pool, and can therefore see them before they execute. This enables validators to analyze transactions for a potential profit and frontrun them with a transaction of their own.\n\nFor example, imagine that you make a game where users are paid for solving puzzles. If not handled carefully, a validator could swap a transaction with the valid answer for one of its own and claim the prize. You can read more about this in [this blog post](https://www.paradigm.xyz/2020/08/ethereum-is-a-dark-forest).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 605, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1e9574eb-622c-4959-912d-f8452a9c384d": {"__data__": {"id_": "1e9574eb-622c-4959-912d-f8452a9c384d", "embedding": null, "metadata": {"file_path": "./near_dist/bos-gateway.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5be484f4-b737-443f-9af1-269692746303", "node_type": "4", "metadata": {}, "hash": "e9e47c2216ebcc4fa9b43876c2622e67e9c1afe1322130148e05972bda9af720", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: bos-gateway\ntitle: Using components on WebApps\n---\n\nIn order to use the components you create in a WebApp you need to use what is known as the `NEAR VM`. This virtual machine helps you to easily fetch components from the blockchain and transform them into executable code.\n\nThere are two possible scenarios:\n- You want to start a WebApp [**from scratch**](#starting-a-webapp-from-scratch).\n- You want to integrate components into an [**existing WebApp**](#integrating-components-into-your-webapp)\n\n---\n\n## Starting a WebApp from scratch\n\nIf you want to start a WebApp from scratch, the simplest option is to use `create-near-app`. To use it, you only need to have [node.js](https://nodejs.org/en/) installed on your computer.\n\nSimply run the following command and follow the instructions:\n\n```bash\nnpx create-near-app@latest\n```\n\n:::tip Tutorial\nTo learn more about the template created by `create-near-app` see our [Quickstart a WebApp](../../2.build/4.web3-apps/quickstart.md) tutorial.\n:::\n\n---\n\n## Integrating Components into your WebApp\n\nIn order to integrate components into your WebApp you will leverage two libraries:\n- **Wallet Selector**: Allows user to login using their preferred NEAR wallet.\n- **NEAR VM**: Simplifies fetching NEAR components from the blockchain and rendering them.\n\nThe best way to learn how to integrate components into your WebApp is by following our tutorial:\n\n:::tip Tutorial\nTo learn step-by-step how to integrate them, please visit our [integrating components into a WebApp](../../2.build/4.web3-apps/integrate-components.md) tutorial.\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1584, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94de6880-e513-4047-ab78-ef62d8c4e64e": {"__data__": {"id_": "94de6880-e513-4047-ab78-ef62d8c4e64e", "embedding": null, "metadata": {"file_path": "./near_dist/0-predeployed.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436", "node_type": "4", "metadata": {}, "hash": "1c16c0d1e16674888b2326633b3abad5e0fb86e9a72d3326a17e964349ae9ace", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf153b09-3417-481e-a345-59b72fd3983b", "node_type": "1", "metadata": {}, "hash": "a5088f1cb02b2eec1c39ca82b20621b80066339ed479c4922dc06f3f7073d044", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: predeployed-contract\ntitle: Pre-deployed Contract\nsidebar_label: Pre-deployed Contract\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n> Learn how to easily create your own non-fungible tokens without doing any software development by using a readily-available NFT smart contract.\n\n\n## Prerequisites\n\nTo complete this tutorial successfully, you'll need:\n\n- [A NEAR Wallet](https://testnet.mynearwallet.com/create)\n- [NEAR-CLI](/tools/near-cli#installation)\n\n## Using the NFT contract\n\n### Setup\n\n- Log in to your newly created account with `near-cli` by running the following command in your terminal:\n\n<Tabs groupId=\"cli-tabs\">\n\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near login --networkId testnet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  near account import-account using-web-wallet network-config testnet\n  ```\n  </TabItem>\n</Tabs>\n\n - Set an environment variable for your account ID to make it easy to copy and paste commands from this tutorial:\n\n```bash\nexport NEARID=YOUR_ACCOUNT_NAME\n```\n:::note\n\nBe sure to replace `YOUR_ACCOUNT_NAME` with the account name you just logged in with including the `.testnet` (or `.near` for `mainnet`).\n\n:::\n\n- Test that the environment variable is set correctly by running:\n\n```bash\necho $NEARID\n```\n\n### Minting your NFTs\n\nNEAR has deployed an NFT contract to the account `nft.examples.testnet` which allows users to freely mint tokens. Using this pre-deployed contract, let's mint our first token! \n\n\n- Run this command in your terminal, however you **must replace the `token_id` value with an UNIQUE string**.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1633, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf153b09-3417-481e-a345-59b72fd3983b": {"__data__": {"id_": "cf153b09-3417-481e-a345-59b72fd3983b", "embedding": null, "metadata": {"file_path": "./near_dist/0-predeployed.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436", "node_type": "4", "metadata": {}, "hash": "1c16c0d1e16674888b2326633b3abad5e0fb86e9a72d3326a17e964349ae9ace", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "94de6880-e513-4047-ab78-ef62d8c4e64e", "node_type": "1", "metadata": {}, "hash": "b349615f7bb59f7b450d7b2fbe63f77bf89f60f58106cb609fb322587d493424", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33", "node_type": "1", "metadata": {}, "hash": "04d4d377c9cdc9d7b075abc5d490744e460d9118ff1dc4e7e5301d16fda92c9c", "class_name": "RelatedNodeInfo"}}, "text": "<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  near call nft.examples.testnet nft_mint '{\"token_id\": \"TYPE_A_UNIQUE_VALUE_HERE\", \"receiver_id\": \"'$NEARID'\", \"metadata\": { \"title\": \"GO TEAM\", \"description\": \"The Team Goes\", \"media\": \"https://bafybeidl4hjbpdr6u6xvlrizwxbrfcyqurzvcnn5xoilmcqbxfbdwrmp5m.ipfs.dweb.link/\", \"copies\": 1}}' --accountId $NEARID --deposit 0.1\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n    ```bash\n    near contract call-function as-transaction nft.examples.testnet nft_mint json-args '{\"token_id\": \"TYPE_A_UNIQUE_VALUE_HERE\", \"receiver_id\": \"'$NEARID'\", \"metadata\": { \"title\": \"GO TEAM\", \"description\": \"The Team Goes\", \"media\": \"https://bafybeidl4hjbpdr6u6xvlrizwxbrfcyqurzvcnn5xoilmcqbxfbdwrmp5m.ipfs.dweb.link/\", \"copies\": 1}}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NEARID network-config testnet sign-with-keychain send\n    ```\n  </TabItem>\n</Tabs>\n\n:::tip\nYou can also replace the `media` URL with a link to any image file hosted on your web server.", "mimetype": "text/plain", "start_char_idx": 1635, "end_char_idx": 2686, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33": {"__data__": {"id_": "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33", "embedding": null, "metadata": {"file_path": "./near_dist/0-predeployed.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436", "node_type": "4", "metadata": {}, "hash": "1c16c0d1e16674888b2326633b3abad5e0fb86e9a72d3326a17e964349ae9ace", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf153b09-3417-481e-a345-59b72fd3983b", "node_type": "1", "metadata": {}, "hash": "a5088f1cb02b2eec1c39ca82b20621b80066339ed479c4922dc06f3f7073d044", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f5f561c7-2d3e-4342-8538-949ae3b132c1", "node_type": "1", "metadata": {}, "hash": "017117cc5311984596e4897b8e10eb4ab494197f2e57f0dc48d9e7676a8a6e29", "class_name": "RelatedNodeInfo"}}, "text": ":::\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\nLog [nft.examples.testnet]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"nft-1.0.0\",\"event\":\"nft_mint\",\"data\":[{\"owner_id\":\"benjiman.testnet\",\"token_ids\":[\"TYPE_A_UNIQUE_VALUE_HERE\"]}]}\nTransaction Id 8RFWrQvAsm2grEsd1UTASKpfvHKrjtBdEyXu7WqGBPUr\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/8RFWrQvAsm2grEsd1UTASKpfvHKrjtBdEyXu7WqGBPUr\n''\n```\n\n</p>\n</details>\n\n- To view tokens owned by an account you can call the NFT contract with the following `near-cli` command:\n\n```bash\nnear view nft.examples.testnet nft_tokens_for_owner '{\"account_id\": \"'$NEARID'\"}'\n```\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n[\n  {\n    \"token_id\": \"0\",\n    \"owner_id\": \"dev-xxxxxx-xxxxxxx\",\n    \"metadata\": {\n      \"title\": \"Some Art\",\n      \"description\": \"My NFT media\",\n      \"media\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg\",\n      \"media_hash\": null,\n      \"copies\": 1,\n      \"issued_at\": null,\n      \"expires_at\": null,\n      \"starts_at\": null,\n      \"updated_at\": null,\n      \"extra\": null,\n      \"reference\": null,\n      \"reference_hash\": null\n    },\n    \"approved_account_ids\": {}\n  }\n]\n```\n\n</p>\n</details>\n\n***Congratulations! You just minted your first NFT token on the NEAR blockchain!*** \ud83c\udf89\n\n\ud83d\udc49 Now try going to your [NEAR Wallet](https://testnet.mynearwallet.com) and view your NFT in the \"Collectibles\" tab.", "mimetype": "text/plain", "start_char_idx": 2687, "end_char_idx": 4217, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f5f561c7-2d3e-4342-8538-949ae3b132c1": {"__data__": {"id_": "f5f561c7-2d3e-4342-8538-949ae3b132c1", "embedding": null, "metadata": {"file_path": "./near_dist/0-predeployed.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436", "node_type": "4", "metadata": {}, "hash": "1c16c0d1e16674888b2326633b3abad5e0fb86e9a72d3326a17e964349ae9ace", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33", "node_type": "1", "metadata": {}, "hash": "04d4d377c9cdc9d7b075abc5d490744e460d9118ff1dc4e7e5301d16fda92c9c", "class_name": "RelatedNodeInfo"}}, "text": "\ud83d\udc48 \n\n---\n\n## Final remarks\n\nThis basic example illustrates all the required steps to call an NFT smart contract on NEAR and start minting your own non-fungible tokens.\n\nNow that you're familiar with the process, you can jump to [Contract Architecture](/tutorials/nfts/js/skeleton) and learn more about the smart contract structure and how you can build your own NFT contract from the ground up.\n\n***Happy minting!*** \ud83e\ude99\n\n:::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `3.0.0`\n- NFT standard: [NEP171](https://nomicon.io/Standards/Tokens/NonFungibleToken/Core), version `1.0.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 4218, "end_char_idx": 4877, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "21044cd6-4e05-4a9a-bb51-a3476fbb47f2": {"__data__": {"id_": "21044cd6-4e05-4a9a-bb51-a3476fbb47f2", "embedding": null, "metadata": {"file_path": "./near_dist/one_yocto.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b24a98e1-9b82-43df-ae4c-f107128ff70e", "node_type": "4", "metadata": {}, "hash": "750247d26adb5bc284308b5a20a9bba68dba03378c6a5a111a5fea3ba04b5f7e", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: one-yocto\ntitle: Ensure it is the User (1y\u24c3)\n---\n\nNEAR uses a system of [Access Keys](../../../1.concepts/protocol/access-keys.md) to simplify handling accounts.\nThere are basically two type of keys: `Full Access`, that have full control over an account (i.e. can perform all [actions](../anatomy/actions.md)), and \n`Function Call`, that only have permission to call a specified smart contract's method(s) that _do not_ attach \u24c3 as a deposit.\n\nWhen a user [signs in on a website](../../4.web3-apps/integrate-contracts.md#user-sign-in--sign-out) to interact with your contract, what actually happens is\nthat a `Function Call` key is created and stored in the website. Since the website has access to the `Function Call` key, it can use it to\ncall the authorized methods as it pleases. While this is very user friendly for most cases, it is important to be careful in scenarios involving\ntransferring of valuable assets like [NFTs](../../../2.build/5.primitives/nft.md) or [FTs](../../../2.build/5.primitives/ft.md). In such cases, you need to ensure that\nthe person asking for the asset to be transfer is **actually the user**.\n\nOne direct and inexpensive way to ensure that the user is the one calling is by requiring to attach `1 y\u24c3`. In this case, the user will be\nredirected to the wallet and be asked to accept the transaction. This is because, once again, only the `Full Access` key can be used to send NEAR.\nSince the `Full Access` key is only in the user's wallet, you can trust that a transaction with `1 y\u24c3` was made by the user.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1546, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a416f0ff-fa92-4ac2-80bd-95213376600e": {"__data__": {"id_": "a416f0ff-fa92-4ac2-80bd-95213376600e", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui-tutorial.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb", "node_type": "4", "metadata": {}, "hash": "9d1bd6809bcf30e1202df5c08e2c04f8a77a9cc09e003aa50c4d381ff4b1e60a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90", "node_type": "1", "metadata": {}, "hash": "827093b83e92900b36d498606a5564107584762d2cb486e8c757f8fc0c7348e7", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: chain-hosted-ui-tutorial\ntitle: Chain Hosted UI tutorial\nsidebar_label: Chain Hosted UI Tutorial\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\";\n\n[Chain Hosted UI](chain-ui.md) lets you to deploy dApp frontends directly on the NEAR blockchain.\nIn this tutorial you'll learn how to build and deploy a simple [React](https://react.dev/) web app using Chain Hosted UI.\n\n:::warning\n\nThis experiment reached the MVP stage of functionality but no longer has a maintainer due to [Pagoda winding down](https://docs.near.org/blog/2024-08-13-pagoda-services).\nWe encourage interested parties to fork the project and carry it forward. The smart contract has not yet been audited.\n\n:::\n\n## Requirements\n\nTo build and deploy your web3 dApp, you'll need to have installed:\n\n- [NodeJS](https://nodejs.org)\n- [TypeScript](https://typescriptlang.org)\n- [pnpm](https://pnpm.io/)\n\nIf you already have NodeJS, installing TypeScript and `pnpm` is simple:\n\n#### TypeScript\n\n```sh\nnpm install -g typescript\n```\n\n#### pnpm\n\n```sh\nnpm install -g pnpm\n```\n\n## Getting Started\n\nLet's get started by cloning the [chain hosted repository](https://github.com/near/chain-hosted-ui/) from GitHub.\nYou'll take advantage of a demo React project in this monorepo to build your new React application.\n\n```sh\ngit clone https://github.com/near/chain-hosted-ui\n```\n\nAfter cloning, you need to install the dependencies from the `chain-hosted-ui` folder:\n\n#### Install\n\n```sh\ncd chain-hosted-ui\npnpm install\n```\n\nNext, it's time to build all the packages included in the Chain Hosted solution:\n\n#### Build all\n\n```sh\npnpm run build\n```\n\n## React App", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1716, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90": {"__data__": {"id_": "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui-tutorial.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb", "node_type": "4", "metadata": {}, "hash": "9d1bd6809bcf30e1202df5c08e2c04f8a77a9cc09e003aa50c4d381ff4b1e60a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a416f0ff-fa92-4ac2-80bd-95213376600e", "node_type": "1", "metadata": {}, "hash": "a058ea3ef3c0186252ff02ad69e6953368ba7974482708f08a01164c0f3f7b9e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad", "node_type": "1", "metadata": {}, "hash": "ca34acab49d290771b24d8194973b08aa2a4a777865aee7656bdb61960075b71", "class_name": "RelatedNodeInfo"}}, "text": "Now you can jump to the demo React project included in the `chain-hosted-ui` repository. This demo project provides the boilerplate code and preconfigured settings so you can start building your web app right away:\n\n```sh\ncd packages/react\n```\n\nIn this folder you can build, edit, add components, content, or `npm` dependecies to your React web app.\nFor example, you can edit `src/App.tsx` and add a \"Hello World!\" paragraph:\n\n<CodeTabs>\n  <TabItem value=\"App.tsx\">\n    <Github url=\"https://github.com/near/chain-hosted-ui/blob/35e3b518e2a1348eb94d85749a12a591616cc64e/packages/react/src/App.tsx\" start=\"16\" end=\"21\" language=\"jsx\" />\n  </TabItem>\n</CodeTabs>\n\n\nWhen ready, you can test your sample React dApp locally:\n\n#### Run web app\n\n```sh\nnpm run dev\n```\n\n## Blockchain Deployment\n\nIf you want to deploy your React frontend to the NEAR blockchain, you'll need to update the project's settings, and then run the deploy script.\n\n### Settings\n\nTo update the settings, configure the `nearDeployConfig` field in `package.json`:\n\n<CodeTabs>\n  <TabItem value=\"package.json\">\n    <Github url=\"https://github.com/near/chain-hosted-ui/blob/35e3b518e2a1348eb94d85749a12a591616cc64e/packages/react/package.json\" start=\"42\" end=\"46\" language=\"jsx\" />\n  </TabItem>\n</CodeTabs>\n\n#### Configuration parameters\n\n - `application` is developer-defined and will be used as part of the URL (names should match `[a-z_-]+`)\n - `deployerAccount` is the account paying for bundle storage and calling smart contract methods (must match `DEPLOYER_ACCOUNT.near` referenced above)\n - `filestoreContract` is the hosted storage contract\n   - `v1.chain-hosted-ui.testnet` on testnet\n`v1.chain-hosted-ui.near`\n   - or deployed and configured separately\n\n### Account login\n\nBefore you can deploy your app, you need to set credentials to your NEAR account.", "mimetype": "text/plain", "start_char_idx": 1719, "end_char_idx": 3545, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad": {"__data__": {"id_": "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui-tutorial.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb", "node_type": "4", "metadata": {}, "hash": "9d1bd6809bcf30e1202df5c08e2c04f8a77a9cc09e003aa50c4d381ff4b1e60a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90", "node_type": "1", "metadata": {}, "hash": "827093b83e92900b36d498606a5564107584762d2cb486e8c757f8fc0c7348e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53ad0a6c-e34f-4c80-8f78-3ccf4e5e2514", "node_type": "1", "metadata": {}, "hash": "e1ba17879edc01a58df60c0cf9bd2e4ba8c1fe1b484a3b577887811ef6a3e0e6", "class_name": "RelatedNodeInfo"}}, "text": "You can do it by [adding a new key](../../4.tools/cli.md#add-key) into your account and saving it into the legacy keychain.\n\n```bash\nnear account add-key <accountId> grant-full-access autogenerate-new-keypair save-to-legacy-keychain network-config testnet sign-with-keychain send\n```\n\nThe JSON file will be saved at the path `~/.near-credentials/mainnet/YOUR_ACCOUNT.near.json` (replace `mainnet` with `testnet` for testnet). Edit the created file to make sure it has following structure:\n\n```js\n{\n  \"account_id\":\"YOUR_ACCOUNT.near\",\n  \"public_key\":\"ed25519:44_CHARACTERS_BASE_58\",\n  \"private_key\":\"ed25519:88_CHARACTERS_BASE_58\"\n}\n```\n\n### Deploy\n\nAfter you've set up your account and contract settings, you can build the project bundle and deploy the application on chain by running:\n\n```sh\nnpm run deploy\n```\n\nThe deployment script will estimate the storage cost in NEAR tokens, and ask you to confirm the transaction:\n\n```\nreact-example deployment calculated to cost 4.08204 N {\n  appKey: '<YOUR_ACCOUNT_ID>/react-example',\n  newAppChars: 96,\n  fileKeyChars: 327,\n  partitionKeyChars: 339,\n  fileBytes: 388004\n}\n? Estimated cost to deploy is 4.08204 N. Continue? (y/N)\n```\n\nOnce you've deployed your frontend, you can load the web application at `https://chain-hosted-ui.near.dev//<FILE_CONTRACT>/<DEPLOYER_ACCOUNT.near>/<APPLICATION-NAME>`\n - `<FILE_CONTRACT>`: `v1.chain-hosted-ui.testnet` or `v1.chainui.near`\n - `<DEPLOYER_ACCOUNT.near>`: the NEAR account used to deploy, e.g. `myaccount.testnet`\n - `<APPLICATION-NAME>`: the application name you defined, e.g.", "mimetype": "text/plain", "start_char_idx": 3546, "end_char_idx": 5114, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53ad0a6c-e34f-4c80-8f78-3ccf4e5e2514": {"__data__": {"id_": "53ad0a6c-e34f-4c80-8f78-3ccf4e5e2514", "embedding": null, "metadata": {"file_path": "./near_dist/chain-ui-tutorial.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb", "node_type": "4", "metadata": {}, "hash": "9d1bd6809bcf30e1202df5c08e2c04f8a77a9cc09e003aa50c4d381ff4b1e60a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad", "node_type": "1", "metadata": {}, "hash": "ca34acab49d290771b24d8194973b08aa2a4a777865aee7656bdb61960075b71", "class_name": "RelatedNodeInfo"}}, "text": "`react-example`\n - [Check this deployed example](https://chain-hosted-ui.near.dev/v1.chain-hosted-ui.testnet/solops2.testnet/react-example)\n\n### Redeployment\n\nOnce deployed, new deployments can be made or the application can be removed (with any remaining storage being refunded):\n- To deploy a new version after making changes, run\n  ```sh\n  pnpm run deploy\n  ```\n  This will increment the application version, delete previous files, and refund any remaining available balance.\n- To delete application storage, refund storage-staked Near, and unregister the deployment account, run\n  ```sh\n  pnpm delete-and-unregister\n  ```\n- To drop and recreate the application, run\n  ```sh\n  pnpm clean-deploy\n  ```\n\nAlso note that in order to do a roll forward deployment, both sets of application files must exist simultaneously to avoid downtime.\nConsequently, storage must be paid ahead of each deployment to account for the new files, regardless\nof whether the application is already deployed. Once the deployment is live, the files from the previous deployment are deleted and storage is refunded as part of the deployment script.", "mimetype": "text/plain", "start_char_idx": 5115, "end_char_idx": 6239, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3c0d5e9-0672-4a99-ba2d-24f5193db13f": {"__data__": {"id_": "b3c0d5e9-0672-4a99-ba2d-24f5193db13f", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2365df1a-2d2e-447f-b542-c329badb0de5", "node_type": "1", "metadata": {}, "hash": "ca9d058d5ddfb7fe6e8107a4ee8119f1cde5cb3fe9a1c57a2bc39bc0c59070dc", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: meta-transactions\ntitle: Building a Meta Transaction Relayer\nsidebar_label: Meta Transaction Relayers\n---\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nRelayers serve to delegate gas fees to a web service, allowing users to transact on NEAR without the need to acquire the token themselves while still retaining the security of signing their own transactions. This guide will lead you through the components necessary to construct a relayer capable of handling meta transactions.\n\n:::tip\n\nIf you're already acquainted with the technology and you just want to run your own Relayer, you can fast track to a complete [Rust Relayer server](#rust-relayer-server) open-source implementation.\n\n:::\n\n## How it works\n\nA basic relayer consists of a web server housing a funded NEAR account. This account receives an encoded signed transaction, which can subsequently be decoded into a `SignedDelegate` format and transmitted on-chain.\n\nThe client can then generate a `SignedDelegateAction` (a signed message that hasn't yet been sent), encode it, and transmit it to this server, where it will be relayed onto the blockchain.\n\n![relayer-overview-technical](/docs/assets/welcome-pages/relayer-overview-technical.png)\n\n## Relayer (server)\n\n<Tabs groupId=\"code-tabs\">\n\n<TabItem value=\"near-api-js\">\n\nHere's a simple express endpoint that deserializes the body, instantiates the relayer account and then sends the transaction.\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay-example/blob/main/server.ts' start='16' end='27'/>\n\nYou can easily get the account object used to send the transactions from its private key using this snippet\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay-example/blob/main/util.ts' start='5' end='17'/>  \n\n\n:::info\n\n The code in the example only works from the following versions onwards\n\n```\n\"near-api-js\": \"3.0.4\"\n\"@near-js/transactions\": \"1.1.2\",\n\"@near-js/accounts\": \"1.0.4\"\n```\n\n:::", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2062, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2365df1a-2d2e-447f-b542-c329badb0de5": {"__data__": {"id_": "2365df1a-2d2e-447f-b542-c329badb0de5", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3c0d5e9-0672-4a99-ba2d-24f5193db13f", "node_type": "1", "metadata": {}, "hash": "45c41d66b82d54c11a83be05192e2a90e73ad9015446b081aad03f0eda3f3f87", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "157b41a0-516a-491b-844f-bd50f050fbbd", "node_type": "1", "metadata": {}, "hash": "05120af5961186bf2105e7c2e458a85280e5beae085ec9dcc7beac71ac074311", "class_name": "RelatedNodeInfo"}}, "text": "</TabItem>\n\n<TabItem value=\"@near-relay/server\">\n\n`@near-relay` simplifies meta transactions making it easier to get started for a beginner.\n\nTo start, call the relay method inside an endpoint to automatically deserialize the transaction and send it with the account defined in the environment variables.\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay/blob/main/server/server.ts' start='8' end='12'/>\n\nIf you're interested in relaying account creation as well, it's quite straightforward. Simply create another endpoint and directly call the createAccount method with the accountId and publicKey. These parameters are automatically included in the body when using the corresponding client library.\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay/blob/main/server/server.ts' start='14' end='18'/>\n  \n</TabItem>\n\n</Tabs>\n\n\n## Client\n\n<Tabs groupId=\"code-tabs\">\n\n<TabItem value=\"near-api-js\">\n\nIn this method we are creating an arbitrary smart contract call, instantiating an account and using it to sign but not send the transaction. We can then serialize it and send it to the relayer where it will be delegated via the previously created endpoint.\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay-example/blob/main/client.ts' start='10' end='30'/>\n\n</TabItem>\n\n<TabItem value=\"@near-relay/client\">\n\nAs mentioned in the above note in order to be able to relay on the client side it's necessary to have access to signing transactions directly on the client. Luckily leveraging the near biometric library it's possible to do so in a non custodial way.\n\nBy calling this method and passing in the URL for the account creation endpoint (mentioned in the server section) as well as the `accountId` everything is handled under the hood to successfully create an account.\n\n<Github language='typescript' url='https://github.com/SurgeCode/near-relay/blob/main/example/src/app/page.tsx' start='17' end='23'/>\n\nOn the client side, you just need to create an `Action` and pass it into the `relayTransaction` method along with the URL of the relayer endpoint discussed in the server section and the id of the `receiverId`.", "mimetype": "text/plain", "start_char_idx": 2066, "end_char_idx": 4257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "157b41a0-516a-491b-844f-bd50f050fbbd": {"__data__": {"id_": "157b41a0-516a-491b-844f-bd50f050fbbd", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2365df1a-2d2e-447f-b542-c329badb0de5", "node_type": "1", "metadata": {}, "hash": "ca9d058d5ddfb7fe6e8107a4ee8119f1cde5cb3fe9a1c57a2bc39bc0c59070dc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3a6c116f-7610-4ae6-9e88-99991fea484b", "node_type": "1", "metadata": {}, "hash": "ec9918281ea365821bec57e613ddf105f27e2dea72b91b17b570fa037af235e6", "class_name": "RelatedNodeInfo"}}, "text": "<Github language='typescript' url='https://github.com/SurgeCode/near-relay/blob/main/example/src/app/page.tsx' start='25' end='36'/>\n\n</TabItem>\n\n</Tabs>\n\n<details>\n<summary> Relaying with wallets </summary>\n\nAt the moment, wallet selector standard doesn't support signing transactions without immediately sending them. This functionality is essential for routing transactions to a relayer. Therefore, to smoothly integrate relaying on the client side, it's necessary to be able to sign transactions without relying on wallets.\nProgress is being made to make this possible in the future.\n\n</details>\n\n### High volume parallel processing\n\nWhen running a relayer that handles a large number of transactions, you will quickly run into a `nonce` collision problem. At the protocol level, transactions have a unique number that identifies them (nonce) that helps to mitigate reply attacks. Each key on an account has its own nonce, and the nonce is expected to increase with each signature the key creates.\n\nWhen multiple transactions are sent from the same access key simultaneously, their nonces might collide. Imagine the relayer creates 3 transactions `Tx1`, `Tx2`, `Tx3` and send them in very short distance from each other, and lets assume that `Tx3` has the largest nonce. If `Tx3` ends up being processed before `Tx1` (because of network delays, or a node picks `Tx3` first), then `Tx3` will execute, but `Tx1` and `Tx2` will fail, because they have smaller nonce!\n\nOne way to mitigate this is to sign each transaction with a different key. Adding multiple full access keys to the NEAR account used for relaying (up to 20 keys can make a significant difference) will help. \n\n<details> \n<summary> Adding keys </summary>\n\n```js\nconst keyPair = nearAPI.KeyPair.fromRandom(\"ed25519\");\n\nconst receipt = await account.addKey(keyPair.getPublicKey().toString())\n```\n\nAfter saving these keys, its possible to rotate the private keys randomly when instantiating accounts before relaying ensuring you won't create a nonce collision.\n\n</details>\n\n### Gating the relayer\n\nIn most production applications it's expected that you want to be able to gate the relayer to only be used in certain cases.", "mimetype": "text/plain", "start_char_idx": 4259, "end_char_idx": 6445, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3a6c116f-7610-4ae6-9e88-99991fea484b": {"__data__": {"id_": "3a6c116f-7610-4ae6-9e88-99991fea484b", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "157b41a0-516a-491b-844f-bd50f050fbbd", "node_type": "1", "metadata": {}, "hash": "05120af5961186bf2105e7c2e458a85280e5beae085ec9dcc7beac71ac074311", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4474b2ac-0251-4919-91a9-0c6bdb365bc8", "node_type": "1", "metadata": {}, "hash": "9aaea9c7cd5b822d0e81f6bb91308556d80e3f456fc607e832dcf48b82b0dc12", "class_name": "RelatedNodeInfo"}}, "text": "This can be easily accomplished by specifying constraints inside the `SignedDelegate.delegateAction` object.\n\n```typescript\nexport declare class DelegateAction extends Assignable {\n    senderId: string;\n    receiverId: string;\n    actions: Array<Action>;\n    nonce: BN;\n    maxBlockHeight: BN;\n    publicKey: PublicKey;\n}\n```\n\nYou can, for example, gate by some particular user or contract:\n\n```typescript\n  const serializedTx: Buffer = req.body;\n  const deserializedTx: SignedDelegate = deserialize(SCHEMA.SignedDelegate, Buffer.from(serializedTx)) as SignedDelegate;\n  const relayerAccount: Account = await getAccount(NETWORK_ID, RELAYER_ID, RELAYER_PRIVATE_KEY);\n  const delegateAction = deserializedTx?.delegateAction\n\n  if(delegateAction.senderId == 'someUserId' || delegateAction.receiverId == 'someContractId' ){\n       const receipt = await relayerAccount.signAndSendTransaction({\n       actions: [actionCreators.signedDelegate(deserializedTx)],\n       receiverId: deserializedTx.delegateAction.senderId\n  });\n  }\n```\n\nOther examples could be looking into the actions and seeing if there is deposit or gas and limiting them, gating by particular smart contract methods or even args.\n\nYou can decode the args using:\n\n```\nJSON.parse(Buffer.from(args_base64 || \"\", \"base64\").toString())\n```\n\n---\n\n## Rust Relayer Server\n\nThe open-source Rust [reference implementation of a Relayer server](https://github.com/near/pagoda-relayer-rs/) offers the following features:\n\n:::info\nFeatures can be combined as needed. Use of one feature does not preclude the use of any other feature unless specified.\n:::\n\n1. Sign and send Meta Transactions to the RPC to cover the gas costs of end users while allowing them to maintain custody of their funds and approve transactions (`/relay`, `/send_meta_tx`, `/send_meta_tx_async`, `/send_meta_tx_nopoll`)\n2. Sign Meta Transactions returning a Signed Meta Transaction to be sent to the RPC later - (`/sign_meta_tx`, `/sign_meta_tx_no_filter`)\n3. Only pay for users interacting with certain contracts by whitelisting contracts addresses (`whitelisted_contracts` in `config.toml`) \n4.", "mimetype": "text/plain", "start_char_idx": 6446, "end_char_idx": 8562, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4474b2ac-0251-4919-91a9-0c6bdb365bc8": {"__data__": {"id_": "4474b2ac-0251-4919-91a9-0c6bdb365bc8", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3a6c116f-7610-4ae6-9e88-99991fea484b", "node_type": "1", "metadata": {}, "hash": "ec9918281ea365821bec57e613ddf105f27e2dea72b91b17b570fa037af235e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1", "node_type": "1", "metadata": {}, "hash": "f02ed51785620ab59b1b6cab45753cef01d2074d93c7df030e0b38961a09e504", "class_name": "RelatedNodeInfo"}}, "text": "Specify gas cost allowances for all accounts (`/update_all_allowances`) or on a per-user account basis (`/create_account_atomic`, `/register_account`, `/update_allowance`) and keep track of allowances (`/get_allowance`)\n5. Specify the accounts for which the relayer will cover gas fees (`whitelisted_delegate_action_receiver_ids` in `config.toml`)\n6. Only allow users to register if they have a unique Oauth Token (`/create_account_atomic`, `/register_account`)\n7. Relayer Key Rotation: `keys_filenames` in `config.toml`\n8. Integrate with [FastAuth SDK](fastauth-sdk.md)\n9. Mix and Match configuration options\n\n:::tip\nCheck the [Use cases section](#use-cases) for example configuration files corresponding to different usage scenarios.\n:::\n\n### Basic Setup\n\nYou can follow these steps to set up your local Relayer server development environment:\n\n1. [Install Rust for NEAR Development](../2.smart-contracts/quickstart.md#prerequisites)\n2. If you don't have a NEAR account, [create one](../../1.concepts/protocol/account-model.md)\n3. With the account from step 2, create a JSON file in this directory in the format\n   ```js\n   [{\"account_id\":\"example.testnet\",\"public_key\":\"ed25519:98GtfFzez3opomVpwa7i4m3nptHtc7Ha514XHMWszLtQ\",\"private_key\":\"ed25519:YWuyKVQHE3rJQYRC3pRGV56o1qEtA1PnMYPDEtroc5kX4A4mWrJwF7XkzGe7JWNMABbtY4XFDBJEzgLyfPkwpzC\"}]\n   ```\n   using a [Full Access Key](../../1.concepts/protocol/access-keys.md#full-access-keys) from an account that has enough NEAR to cover the gas costs of transactions your server will be relaying. Usually, this will be a copy of the json file found in the `.near-credentials` directory. \n4. Update values in `config.toml`\n5. Open up the `port` from `config.toml` in your machine's network settings\n6.", "mimetype": "text/plain", "start_char_idx": 8563, "end_char_idx": 10308, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1": {"__data__": {"id_": "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4474b2ac-0251-4919-91a9-0c6bdb365bc8", "node_type": "1", "metadata": {}, "hash": "9aaea9c7cd5b822d0e81f6bb91308556d80e3f456fc607e832dcf48b82b0dc12", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ea4b032-f86c-4cff-b333-8a0be413a389", "node_type": "1", "metadata": {}, "hash": "6f217661c1a5cc3e184461294a2db53865f81ae49b450a2b151f7cb51f29a746", "class_name": "RelatedNodeInfo"}}, "text": "Run the server using `cargo run`. \n   > **(OPTIONAL)** To run with logs (tracing) enabled run `RUST_LOG=tower_http=debug cargo run`\n\n:::info Optional setup\n\nIf you're integrating with [FastAuth](fastauth-sdk.md) make sure to enable feature flags: \n```\ncargo build --features fastauth_features,shared_storage\n```\nIf you're using shared storage, make sure to enable feature flags:\n```\ncargo build --features shared_storage\n```\n\n:::\n\n### Redis Setup\n\n:::tip\nThis is only needed if you intend to use whitelisting, allowances, and OAuth functionality.\n:::\n\n1. [Install Redis](https://redis.io/docs/latest/get-started/).\n   > Steps 2 & 3 assume Redis was installed on machine instead of a Docker setup. If you're connecting to a Redis instance running in GCP, follow the above steps to connect to a VM that will forward requests from your local relayer server to [Redis running in GCP](https://cloud.google.com/memorystore/docs/redis/connect-redis-instance#connecting_from_a_local_machine_with_port_forwarding)\n2. Run `redis-server --bind 127.0.0.1 --port 6379` - make sure the port matches the `redis_url` in the `config.toml`.\n3. Run `redis-cli -h 127.0.0.1 -p 6379`\n\n\n### Advanced setup\n\n- [Multiple Key Generation](https://github.com/near/pagoda-relayer-rs/tree/main?tab=readme-ov-file#multiple-key-generation---optional-but-recommended-for-high-throughput-to-prevent-nonce-race-conditions): this is optional, but recommended for high throughput to prevent nonce race conditions.", "mimetype": "text/plain", "start_char_idx": 10309, "end_char_idx": 11786, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ea4b032-f86c-4cff-b333-8a0be413a389": {"__data__": {"id_": "6ea4b032-f86c-4cff-b333-8a0be413a389", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1", "node_type": "1", "metadata": {}, "hash": "f02ed51785620ab59b1b6cab45753cef01d2074d93c7df030e0b38961a09e504", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f91160c-d9a6-4fd0-bbe6-f55ad87e4b12", "node_type": "1", "metadata": {}, "hash": "8ee8190a2b738d9d762bd3b25c2a5e04d5cb38325e211895b04b797498f0d247", "class_name": "RelatedNodeInfo"}}, "text": "Check \n- [Docker Deployment](https://github.com/near/pagoda-relayer-rs/tree/main?tab=readme-ov-file#docker-deployment): instructions to deploy with Docker\n- [Cloud Deployment](https://github.com/near/pagoda-relayer-rs/tree/main?tab=readme-ov-file#cloud-deployment): instructions to deploy on Cloud providers\n\n### API Specifications\n\nYou can find the complete Relayer server API specification on the [GitHub repository](https://github.com/near/pagoda-relayer-rs/tree/main?tab=readme-ov-file#api-spec-).\n\n### Use cases\n\nThe [examples folder](https://github.com/near/pagoda-relayer-rs/tree/main/examples) on the GitHub repository contains example configuration files corresponding to different use cases. \n\n:::info\nThese files are for reference only and you should update the `config.toml` values before using it on your development environment.\n:::\n\n#### No filters\n\nThis is a config for a relayer that covers gas for all user transactions to all contracts with no filters. To prevent abuse, this should only be used if there's only a secure backend calling the relayer\n- [`no_filters.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/no_filters.toml)\n\n#### Basic whitelist\n\nThis is a configuration for a basic relayer that covers gas for user transactions to interact with a whitelisted set of contracts\n- [`basic_whitelist.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/basic_whitelist.toml)\n\n#### Redis\n\nThis is a configuration for a relayer that covers gas for user transactions up to a allowance specified in Redis to interact with a whitelisted set of contracts. \n- Allowances are on a per-account id basis and on signup (account creation in Redis and on-chain) an OAuth token is required to help with sybil resistance\n- [`redis.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/redis.toml)\n\n#### FastAuth\n\nThis is a configuration for use if you intend to integrate with [FastAuth SDK](fastauth-sdk.md)\n- It covers gas for user transactions up to a allowance specified in Redis to interact with a whitelisted set of contracts.", "mimetype": "text/plain", "start_char_idx": 11787, "end_char_idx": 13898, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7f91160c-d9a6-4fd0-bbe6-f55ad87e4b12": {"__data__": {"id_": "7f91160c-d9a6-4fd0-bbe6-f55ad87e4b12", "embedding": null, "metadata": {"file_path": "./near_dist/meta-transactions.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2", "node_type": "4", "metadata": {}, "hash": "296bf2784f5d88f40c71857f176fba7c74598742935c6900e8ad2fdfc91c75ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ea4b032-f86c-4cff-b333-8a0be413a389", "node_type": "1", "metadata": {}, "hash": "6f217661c1a5cc3e184461294a2db53865f81ae49b450a2b151f7cb51f29a746", "class_name": "RelatedNodeInfo"}}, "text": "- Allowances are on a per-account id basis and on signup (account creation in Redis and on-chain) an OAuth token is required to help with sybil resistance \n- This also makes use of a shared storage functionality on the Near Social DB contract \n- and a whitelisted sender (`whitelisted_delegate_action_receiver_ids`)\n- [`fastauth.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/fastauth.toml)\n\n#### Pay with fungible tokens\n\nThis is a configuration for a relayer that ensures there's FTs sent to a burn address used to cover the equivalent amount of gas for user transactions to interact with a whitelisted set of contracts \n- [`pay_with_ft.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/pay_with_ft.toml)\n\n#### Whitelist senders\n\nThis is a config for a relayer that covers gas for a whitelisted set of users' transactions to interact with a whitelisted set of contracts\n- [`whitelist_senders.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/whitelist_senders.toml) (`whitelisted_delegate_action_receiver_ids`)\n\n#### Shared storage\n\nThis is a configuration for a relayer that covers BOTH gas AND storage fees for user transactions to interact with a whitelisted set of contracts\n\n- be sure to include shared storage logic based on [`shared_storage.rs`](https://github.com/NearSocial/social-db/blob/master/contract/src/shared_storage.rs) in your contract that is being whitelisted\n- [`shared_storage.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/shared_storage.toml)\n\n#### Exchange withdraw\n\nThis is a configuration for a relayer where an exchange running the relayer covers user withdraw fees when they are withdrawing stablecoins on NEAR (e.g., `USDT` or `USDC`)\n\n- [`exchange_withdraw.toml`](https://github.com/near/pagoda-relayer-rs/blob/main/examples/configs/exchange_withdraw.toml)", "mimetype": "text/plain", "start_char_idx": 13900, "end_char_idx": 15799, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b07a285-56af-48c0-868c-c0589783e1e3": {"__data__": {"id_": "3b07a285-56af-48c0-868c-c0589783e1e3", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ba0a0f7-646e-4105-9f52-89b000027861", "node_type": "1", "metadata": {}, "hash": "7da51181f48f3b63f604c9aed75a31cfe0412d1516ef42c8eb687aa026be7643", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: creating-a-frontend\ntitle: Creating a frontend\nsidebar_label: Creating a frontend\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nNow that we have successfully created a contract, it's time to build a frontend to provide a user-friendly interface for interacting with it. Up until now, we have been using the CLI to send transactions and view the contract's state. However, frontends offer a more intuitive way for end users to interact with the contract. They can display all the relevant information in one place, allow users to make calls with a simple button click, and only require a wallet as a prerequisite.\n\n## Starting the frontend\n\nBefore we look at the code let's start up the frontend and have a peak at what it looks like. Feel free to interact with the application and place some bids. To place bids you will need to retrieve some testnet DAI from the [faucet](https://near-faucet.io/). \n\nNavigate to the `frontend` directory then install dependencies and start the frontend.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"yarn\" label=\"yarn\">\n\n        ```\n        yarn install\n        yarn dev\n        ```\n\n    </TabItem>\n\n    <TabItem value=\"npm\" label=\"npm\">\n\n        ```\n        npm install\n        npm run dev\n        ```\n\n    </TabItem>\n\n</Tabs>\n\n\n## Frontend structure\n\nIn our frontend directory, we have a simple Next.js frontend that we'll walk through to understand the basics of creating a frontend for a NEAR smart contract.\n\nFor starters, let's take a look at how the code in the frontend is structured by doing a quick overview of the important files.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1679, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ba0a0f7-646e-4105-9f52-89b000027861": {"__data__": {"id_": "4ba0a0f7-646e-4105-9f52-89b000027861", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b07a285-56af-48c0-868c-c0589783e1e3", "node_type": "1", "metadata": {}, "hash": "d9e660e5a0e4e81aeedab8fe10f803d136571a725455d22beaae2f2b8ff8ba2d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c092060-7ade-4ea1-872f-5c2bffa9ce4e", "node_type": "1", "metadata": {}, "hash": "1592de9160b4d0f6b2f413a221d165381e23c67a427710d0a08d0ff686401d86", "class_name": "RelatedNodeInfo"}}, "text": "| File                             | Description                                                                     |\n|----------------------------------|---------------------------------------------------------------------------------|\n| **_app.js**           | Responsible for rending the page, initiates the wallet object and adds it to global context  |\n| **index.js**          | The main page where most of the projects components are loaded into and contains most of the logic for the application like viewing the state of the contract and logic for placing a bid |\n| **near.js**           | Contains the wallet class that has methods to interact with the wallet and blockchain |\n| **context.js**        | Holds the global context - the wallet object and the signed in account ID - that can be accessed anywhere |\n| **config.js**         | Specifies the account ID of the auction contract |\n| **Navigation.jsx**    | A component that contains a button to sign users in and out of wallets |\n| **Bid.jsx**           | A component allowing a user to make a bid |\n| **LastBid.jsx**       | A component that displays the highest bid and when the highest bid will next refresh |\n| **AuctionItem.jsx**   | A component that displays information about the NFT being auctioned  |\n| **Timer.jsx**         | A component that shows how long till the auction is over, or, if over, displays a button to claim the auction and then states the auction is over |\n\n---\n\n## Specifying the contract\n\nWe have a config file that specifies the contract name of the auction that the frontend will interact with. The example given is a pre-deployed contract from [part 4 of the tutorial](4-ft.md). The example contract is set up to accept bids in DAI (dai.fakes.testnet), has an NFT token pre-minted and owned by the contract account, and has an end auction time far in the future. Feel free to change the specified contract to your own auction that you deploy.\n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"config.js\"\n            url=\"https://github.com/near-examples/auctions-tutorial/tree/main/frontend/src/config.js\"\n            />\n</Language>\n\n---\n\n## Setting up wallets\n\nTo be able to fully interact with the contract - send bids or claim the auction - you'll need a `wallet` to sign transactions. Wallets securely store your private keys and allow you to sign transactions without exposing your private key to the frontend.", "mimetype": "text/plain", "start_char_idx": 1681, "end_char_idx": 4140, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c092060-7ade-4ea1-872f-5c2bffa9ce4e": {"__data__": {"id_": "0c092060-7ade-4ea1-872f-5c2bffa9ce4e", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ba0a0f7-646e-4105-9f52-89b000027861", "node_type": "1", "metadata": {}, "hash": "7da51181f48f3b63f604c9aed75a31cfe0412d1516ef42c8eb687aa026be7643", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d550912-8725-482b-a17a-bf37118dc5f5", "node_type": "1", "metadata": {}, "hash": "da7a7c135e41ab5bf4e42dcc1c3f4e033088630ba38b9252d351b445c759f43d", "class_name": "RelatedNodeInfo"}}, "text": "The wallet selector allows users to choose between a selection of wallets.\n\nWe abstract the wallet selector in our `near.js` file by exposing methods to complete various tasks. Feel free to [explore the file](https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/wallets/near.js) to understand how the wallet selector is implemented. \n\nWe implement a sign-in and sign-out button in the navigation component to call the respective methods in the `near.js` file. When a wallet is signed in a function call access key is created. This allows the frontend to sign nonpayable transactions on behalf of the user, to the specified contract, without requiring the user to sign each transaction in the wallet; this allows for a better user experience. However, in this example, the main transaction we'll send is to make bids, which is payable so the wallet will prompt the user to sign each transaction.\n\n<Language value=\"javascript\" language=\"javascript\">\n    <Github fname=\"Navigation.jsx\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/components/Navigation.jsx\"\n        />\n    <Github fname=\"near.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/wallets/near.js#L58-L72\"\n        start=\"58\" end=\"72\" />\n</Language>\n\nWe add the wallet and the account ID that is signed in to the global context making it easier to access anywhere in the application.\n\n<Language value=\"javascript\" language=\"javascript\">\n    <Github fname=\"context.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/context.js\"\n        />\n    <Github fname=\"_app.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/_app.js#L13-L27\"\n        start=\"13\" end=\"27\" />\n</Language>\n\n---\n\n## Displaying the highest bid\n\nTo get all the information about the auction we call the method `get_auction_info`. This will be used to display the highest bidder, the auction end time, the NFT contract ID and token ID, and FT contract IDs.", "mimetype": "text/plain", "start_char_idx": 4141, "end_char_idx": 6212, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8d550912-8725-482b-a17a-bf37118dc5f5": {"__data__": {"id_": "8d550912-8725-482b-a17a-bf37118dc5f5", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c092060-7ade-4ea1-872f-5c2bffa9ce4e", "node_type": "1", "metadata": {}, "hash": "1592de9160b4d0f6b2f413a221d165381e23c67a427710d0a08d0ff686401d86", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d1f85f0-b966-4006-9329-c3643a850a5f", "node_type": "1", "metadata": {}, "hash": "2c13e8d8cda40f27b3da3c8d8037c3fd471f7f667307bbefd50b9cafada75d38", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"javascript\" language=\"javascript\">\n    <Github fname=\"index.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L29-L35\"\n        start=\"29\" end=\"35\" />\n    <Github fname=\"near.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/wallets/near.js#L82-L94\"\n        start=\"82\" end=\"94\" />\n</Language>\n\nIn the wallet file, you'll see that we make a query to the RPC provider, since we are not signing a transaction the wallet isn't required here. Here we are using https://rpc.testnet.near.org but note there are [many different providers available](../../5.api/rpc/providers.md). We are querying the RPC with optimistic finality, which queries the latest block recorded on the node. Alternatively, one could use final finality where the block has been validated by at least 66% of the validators on the network but this will provide slightly delayed information (only by a couple of seconds).\n\nWe then pass the information about the highest bidder into the `LastBid` component to display the bid amount and the bidder's account ID.\n\n<Language value=\"javascript\" language=\"javascript\">\n    <Github fname=\"index.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L129\"\n        start=\"129\" end=\"129\" />\n    <Github fname=\"LastBid.jsx\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/components/LastBid.jsx\"\n        />\n</Language>\n\nWhen we display the latest bid, instead of just showing the bid amount directly we divide the amount by the decimals of the FT. In this example, we are using DAI which has 18 decimals meaning that 1 DAI equals 10^18 units. We also display information about the token that is being used. We get this information from the FT contract by calling the `ft_metadata` method (remember that the FT contract ID is stored on the auction contract).", "mimetype": "text/plain", "start_char_idx": 6214, "end_char_idx": 8182, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d1f85f0-b966-4006-9329-c3643a850a5f": {"__data__": {"id_": "7d1f85f0-b966-4006-9329-c3643a850a5f", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d550912-8725-482b-a17a-bf37118dc5f5", "node_type": "1", "metadata": {}, "hash": "da7a7c135e41ab5bf4e42dcc1c3f4e033088630ba38b9252d351b445c759f43d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426", "node_type": "1", "metadata": {}, "hash": "1662ed3749a0b4068ce23d616591f097de5e68d16cdcbb6c78c06c9b2dca7f58", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"index.js\"\n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L75-L93\"\n        start=\"75\" end=\"93\" />\n</Language>\n\n---\n\n## Updating the highest bid\n\nWe want to know the highest bid at all times, someone else could have placed a higher bid since the page was loaded. To solve this we fetch the contract information every 5 seconds using `setInterval`.\n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"index.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L41-L55\"\n        start=\"41\" end=\"55\" />\n</Language>\n---\n\n## Auction end time\n\nThe contract stores the end time of the auction in the number of nanoseconds since the Unix epoch (1 January 1970 00:00:00 UTC). To make this look nicer we will display the time left in days, hours, minutes, and seconds.\n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"Timer.jsx\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/components/Timer.jsx#L11-L35\"\n        start=\"11\" end=\"35\" />\n</Language>\n---\n\n## Displaying the NFT\n\nWe want to show what NFT is being auctioned. To do this we will call `nft_token` on the NFT contract to get the NFT metadata. To call this method we need to specify the NFT `contractId` and the `token_id`, which can be found in the auction information. `nft_token` also returns the owner of the NFT, so we'll check this against the contract account to verify that the auction is valid.", "mimetype": "text/plain", "start_char_idx": 8184, "end_char_idx": 9866, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426": {"__data__": {"id_": "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7d1f85f0-b966-4006-9329-c3643a850a5f", "node_type": "1", "metadata": {}, "hash": "2c13e8d8cda40f27b3da3c8d8037c3fd471f7f667307bbefd50b9cafada75d38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "94dda322-bbe3-4722-b04d-2f9dbbc5ba99", "node_type": "1", "metadata": {}, "hash": "64ca36ca9b5e8247ff340fee6ec13603e8fe78a9aae958c24b21f30e03412e02", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"index.js\"\n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L57-L73\"\n        start=\"57\" end=\"73\" />\n</Language>\n\nNote that this effect will only run once the `auctionInfo` updates because we first need the NFT contract ID and token ID from `auctionInfo` to make a valid call to `nft_token`.\n\nIn the `AuctionItem` component we display the NFT image, name, and description.\n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n<Github fname=\"AuctionItem.jsx\"\n    url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/components/AuctionItem.jsx\"\n    />\n</Language>\n\nNote that an image caching service is used to display the NFT image for better performance.\n\n---\n\n## Making a bid\n\nTo make a bid we call the `ft_transfer_call` method on the FT contract which subsequently calls `ft_on_transfer` on the auction contract and attaches fungible tokens to the call.\n\n<Language value=\"javascript\" language=\"javascript\">\n    <Github fname=\"index.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L95-L105\"\n        start=\"95\" end=\"105\" />\n    <Github fname=\"near.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/wallets/near.js#L107-L126\"\n        start=\"107\" end=\"126\"/>\n</Language>\n\nWe now multiply the bid amount by the decimals of the FT to get the correct amount to send. Since this method requires a 1 yoctoNEAR deposit the wallet will prompt the user to sign the transaction.\n\n---\n\n## Claiming the auction\n\nOnce the auction is over (the current time is greater than the end time) the auction can be claimed. At this point, the timer will be hidden and a button to claim the auction will be displayed. Once clicked the `claim` method will be called on the auction contract to send the highest bidder the NFT and the auctioneer the FTs.", "mimetype": "text/plain", "start_char_idx": 9868, "end_char_idx": 11890, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94dda322-bbe3-4722-b04d-2f9dbbc5ba99": {"__data__": {"id_": "94dda322-bbe3-4722-b04d-2f9dbbc5ba99", "embedding": null, "metadata": {"file_path": "./near_dist/5-frontend.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0", "node_type": "4", "metadata": {}, "hash": "989d05a30009acb098ad58a8fa8701909709c1fffeb853e5dd18694ca2f824aa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426", "node_type": "1", "metadata": {}, "hash": "1662ed3749a0b4068ce23d616591f097de5e68d16cdcbb6c78c06c9b2dca7f58", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"index.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L107-L114\"\n        start=\"107\" end=\"114\" />\n</Language>\n\n---\n\n## Conclusion\n\nIn this part of the tutorial, we have implemented a simple frontend for a NEAR contract. Along the way, you have learned how to use the wallet selector to sign the user in and out, how to view the contract\u2019s state, how to sign and send transactions, and use `ft_transfer_call` from a frontend.\n\nWhile we can see the highest bid, we may want to see the auction's bidding history. Since the contract only stores the most recent bid, we need to use an indexer to pull historical data. In the [next part](./6-indexing.md) of the tutorial, we'll look at querying historical data using an API endpoint.", "mimetype": "text/plain", "start_char_idx": 11892, "end_char_idx": 12772, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "67fd2198-78c9-41e1-8b9f-56aa8398c297": {"__data__": {"id_": "67fd2198-78c9-41e1-8b9f-56aa8398c297", "embedding": null, "metadata": {"file_path": "./near_dist/2-locking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79", "node_type": "4", "metadata": {}, "hash": "efc66b3b858a153cf0b2332d60141d195c508fa5590394db1a5dff7bbe8fb5f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "63b227f9-bac4-4a03-bd62-3052f6486f53", "node_type": "1", "metadata": {}, "hash": "6b027962622549f2aa9615c0dc747e19d134f7ae25f556280649bc318ee63550", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: locking-the-contract\ntitle: Locking the contract\nsidebar_label: Locking the contract\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {Github} from \"@site/src/components/codetabs\"\n\nIn the basic contract, the auctioneer would claim the tokens from the final bid of the contract via logging into the contract accounts wallet using a key. It is a security issue for there to exist a key for a smart contract since the key holder can take the funds from the contract at any point, maliciously change the contract or just delete the contract as a whole. To stop exploitation we will [lock](../../1.concepts/protocol/access-keys.md#locked-accounts) the contract by removing all access keys and implementing a new method to `claim` the tokens.\n\n---\n\n## Adding an auctioneer\n\nWhen we introduce the `claim` method we want to make sure that the individual or entity that set up the auction receives the $NEAR tokens. To do this we now change the `init` method to initialize the contract with an `auctioneer`.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/02-owner-claims-money/src/contract.ts#L17-L21\"\n                start=\"17\" end=\"21\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/02-owner-claims-money/src/lib.rs#L25-L35\"\n                start=\"25\" end=\"35\" />\n\n    </TabItem>\n\n</Tabs>\n\nLet's also introduce a boolean field named `claimed` to track whether the tokens have been claimed by the auctioneer yet.\n\n---\n\n## Adding the claim method\n\nThe `claim` method should only be callable when the auction is over, can only be executed once and should transfer the tokens to the auctioneer.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "63b227f9-bac4-4a03-bd62-3052f6486f53": {"__data__": {"id_": "63b227f9-bac4-4a03-bd62-3052f6486f53", "embedding": null, "metadata": {"file_path": "./near_dist/2-locking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79", "node_type": "4", "metadata": {}, "hash": "efc66b3b858a153cf0b2332d60141d195c508fa5590394db1a5dff7bbe8fb5f8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67fd2198-78c9-41e1-8b9f-56aa8398c297", "node_type": "1", "metadata": {}, "hash": "2c478076d56f4058f0d174cfa50fba55a23e6908b56f332c20c4f02ab34c1acd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b4aa7f5a-d47b-45b5-b294-030caf5865b2", "node_type": "1", "metadata": {}, "hash": "de7c34632ea7ff29399a6a50fc4b1cd19640110cee4bc91e03c341f190a9031b", "class_name": "RelatedNodeInfo"}}, "text": "We'll implement this as so:\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n            <Github fname=\"contract.ts\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/02-owner-claims-money/src/contract.ts#L56-L61\"\n                start=\"56\" end=\"61\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"lib.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/02-owner-claims-money/src/lib.rs#L65-L76\"\n                start=\"65\" end=\"76\" />\n\n    </TabItem>\n\n</Tabs>\n\n---\n\n## Updating the tests\n\nIf we update our contract then we should update our tests accordingly. For example, the tests will now need to add `auctioneer` to the arguments of `init`.\n\nWe will now also test the `claim` method. The test will check that the `auctioneer` account has received the correct amount of $NEAR tokens.\n\n<Tabs groupId=\"code-tabs\">\n\n    <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n        <Github fname=\"main.ava.js\" language=\"javascript\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-ts/02-owner-claims-money/sandbox-test/main.ava.js#L70-L81\"\n                start=\"70\" end=\"81\" />\n\n    </TabItem>\n\n    <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n        <Github fname=\"test_basics.rs\" language=\"rust\"\n                url=\"https://github.com/near-examples/auctions-tutorial/blob/main/contract-rs/02-owner-claims-money/tests/test_basics.rs#L89-L105\"\n                start=\"89\" end=\"105\" />\n\n    </TabItem>\n\n</Tabs>\n\nNote that the test doesn't check that the auctioneer has exactly 12 $NEAR since the auctioneer uses tokens through gas fees when calling `claim`.\n\n---\n\n## Deploying and locking\n\nGo ahead and test, build, and deploy your new contract, as in part 1. Remember to add the `auctioneer` argument when initializing.", "mimetype": "text/plain", "start_char_idx": 1963, "end_char_idx": 3902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b4aa7f5a-d47b-45b5-b294-030caf5865b2": {"__data__": {"id_": "b4aa7f5a-d47b-45b5-b294-030caf5865b2", "embedding": null, "metadata": {"file_path": "./near_dist/2-locking.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79", "node_type": "4", "metadata": {}, "hash": "efc66b3b858a153cf0b2332d60141d195c508fa5590394db1a5dff7bbe8fb5f8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "63b227f9-bac4-4a03-bd62-3052f6486f53", "node_type": "1", "metadata": {}, "hash": "6b027962622549f2aa9615c0dc747e19d134f7ae25f556280649bc318ee63550", "class_name": "RelatedNodeInfo"}}, "text": "Now that we have the `claim` method, we can deploy the contract without keys. Later, we will introduce a factory contract that deploys auctions to a locked account, but for now, we can manually remove the keys using the CLI to lock the account.\n\n```\nnear account delete-keys \n```\n\nNext specify the contract account and click the right arrow \u2192 to delete all the keys. Make sure to select testnet \n\n:::caution\nBe extra careful to delete the keys from the correct account as you'll never be able to access the account again!\n:::\n\n---\n\n## Conclusion\n\nIn this part of the tutorial, you learned how to lock a contract by creating a new method to claim tokens, specify an account on initialization that will claim the tokens, and how to delete the contract account's keys with the CLI. \n\nIn the [next part](./3-nft.md), we'll add a prize to the auction by introducing a new primitive; spoiler, the primitive is an NFT. We'll look at how to use non-fungible token standards to send NFTs and interact with multiple interacting contracts in sandbox testing.", "mimetype": "text/plain", "start_char_idx": 3904, "end_char_idx": 4951, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e597305a-9364-45f7-adad-5d730cd5c73b": {"__data__": {"id_": "e597305a-9364-45f7-adad-5d730cd5c73b", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b823047c-63d8-4108-a8e9-2e122c307b46", "node_type": "1", "metadata": {}, "hash": "119c7b0f83628713a181cd17b599e89766b78ef74b265cca849f4cc0f3a3d3ac", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: xcc\ntitle: Cross Contract Call\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport {CodeTabs, Language, Github} from \"@site/src/components/codetabs\"\n\nThis example performs the simplest cross-contract call possible: it calls our [Hello NEAR](https://github.com/near-examples/hello-near-examples) example to set and retrieve a greeting.\nIt is one of the simplest examples on making a cross-contract call, and the perfect gateway to the world of interoperative contracts.\n\n:::info Advanced Cross-Contract Calls\nCheck the tutorial on how to perform cross-contract calls [in batches and in parallel](./advanced-xcc)\n:::\n\n---\n\n## Obtaining the Cross Contract Call Example\n\nYou have two options to start the project:\n\n1. You can use the app through `Github Codespaces`, which will open a web-based interactive environment.\n2. Clone the repository locally and use it from your computer.\n\n| Codespaces                                                                                                                                      | Clone locally                                              |\n| ----------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |\n| [!", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1340, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b823047c-63d8-4108-a8e9-2e122c307b46": {"__data__": {"id_": "b823047c-63d8-4108-a8e9-2e122c307b46", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e597305a-9364-45f7-adad-5d730cd5c73b", "node_type": "1", "metadata": {}, "hash": "6fa3d5f0fa07bf545c22f9638cf7ba9ff94cf11365e058145794320225a4c12b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc8ea404-1916-45fb-9919-ec89b4542ee9", "node_type": "1", "metadata": {}, "hash": "c9ee7fd807cd60facd4fd525c10a65c9da09ef391677a0a0a83dee77d88d5a59", "class_name": "RelatedNodeInfo"}}, "text": "[Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/near-examples/cross-contract-calls?quickstart=1) | \ud83c\udf10 `https://github.com/near-examples/cross-contract-calls` |\n\n---\n\n## Structure of the Example\n\nThe smart contract is available in two flavors: Rust and JavaScript\n\n<Tabs groupId=\"code-tabs\">\n\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n```bash\n\u250c\u2500\u2500 sandbox-ts # sandbox testing\n\u2502    \u251c\u2500\u2500 hello-near\n\u2502    \u2502    \u2514\u2500\u2500 hello-near.wasm\n\u2502    \u2514\u2500\u2500 main.ava.ts\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u2514\u2500\u2500 contract.ts\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tsconfig.json\n```\n\n  </TabItem>\n\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n\n```bash\n\u250c\u2500\u2500 tests # sandbox testing\n\u2502    \u251c\u2500\u2500 hello-near\n\u2502    \u2502    \u2514\u2500\u2500 hello-near.wasm\n\u2502    \u2514\u2500\u2500 tests.rs\n\u251c\u2500\u2500 src # contract's code\n\u2502    \u251c\u2500\u2500 external.rs\n\u2502    \u2514\u2500\u2500 lib.rs\n\u251c\u2500\u2500 Cargo.toml # package manager\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 rust-toolchain.toml\n```\n\n  </TabItem>\n\n</Tabs>\n\n---\n\n## Smart Contract\n\n### Contract\nThe contract exposes methods to query the greeting and change it. These methods do nothing but calling `get_greeting` and\n`set_greeting` in the `hello-near` example.", "mimetype": "text/plain", "start_char_idx": 1340, "end_char_idx": 2457, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc8ea404-1916-45fb-9919-ec89b4542ee9": {"__data__": {"id_": "dc8ea404-1916-45fb-9919-ec89b4542ee9", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b823047c-63d8-4108-a8e9-2e122c307b46", "node_type": "1", "metadata": {}, "hash": "119c7b0f83628713a181cd17b599e89766b78ef74b265cca849f4cc0f3a3d3ac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "605e54a2-169b-4171-99fd-8dbf73015725", "node_type": "1", "metadata": {}, "hash": "9b77cb0dda17691d37123df2971e78ff3651f752d17b684800dca894332513cd", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n<Language value=\"js\" language=\"ts\">\n    <Github fname=\"contract.ts\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-ts/src/contract.ts\"\n            start=\"17\" end=\"39\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/lib.rs\"\n            start=\"22\" end=\"51\" />\n            <Github fname=\"external.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/src/external.rs\"\n            start=\"2\" end=\"12\" />\n  </Language>\n</CodeTabs>\n\n### Testing the Contract\n\nThe contract readily includes a set of unit and sandbox testing to validate its functionality. To execute the tests, run the following commands:\n\n<Tabs groupId=\"code-tabs\">\n  <TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\">\n\n  ```bash\n  cd contract-simple-ts\n  yarn\n  yarn test\n  ```\n\n  </TabItem>\n  <TabItem value=\"rust\" label=\"\ud83e\udd80 Rust\">\n  \n  ```bash\n  cd contract-simple-rs\n  cargo test\n  ```\n  </TabItem>\n\n</Tabs>\n\n:::tip\nThe `integration tests` use a sandbox to create NEAR users and simulate interactions with the contract.\n:::\n\nIn this project in particular, the integration tests first deploy the `hello-near` contract. Then,\nthey test that the cross-contract call correctly sets and retrieves the message. You will find the integration tests\nin `sandbox-ts/` for the JavaScript version and in `tests/` for the Rust version.", "mimetype": "text/plain", "start_char_idx": 2459, "end_char_idx": 3987, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "605e54a2-169b-4171-99fd-8dbf73015725": {"__data__": {"id_": "605e54a2-169b-4171-99fd-8dbf73015725", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc8ea404-1916-45fb-9919-ec89b4542ee9", "node_type": "1", "metadata": {}, "hash": "c9ee7fd807cd60facd4fd525c10a65c9da09ef391677a0a0a83dee77d88d5a59", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e68d7c6b-99fd-43a6-922d-bdf8563222de", "node_type": "1", "metadata": {}, "hash": "54b1942809e594bfa1f818168103a0f170d57bcf975a76184fb5c6658c91357a", "class_name": "RelatedNodeInfo"}}, "text": "<CodeTabs>\n  <Language value=\"js\" language=\"js\">\n    <Github fname=\"main.ava.ts\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-ts/sandbox-ts/main.ava.ts\"\n            start=\"8\" end=\"52\" />\n  </Language>\n  <Language value=\"rust\" language=\"rust\">\n    <Github fname=\"lib.rs\"\n            url=\"https://github.com/near-examples/cross-contract-calls/blob/main/contract-simple-rs/tests/tests.rs\"\n            start=\"4\" end=\"77\" />\n  </Language>\n</CodeTabs>\n\n\n<hr class=\"subsection\" />\n\n### Deploying the Contract to the NEAR network\n\nIn order to deploy the contract you will need to create a NEAR account.\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near create-account <accountId> --useFaucet\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Create a new account pre-funded by a faucet\n  near account create-account sponsor-by-faucet-service <my-new-dev-account>.testnet autogenerate-new-keypair save-to-keychain network-config testnet create\n  ```\n  </TabItem>\n</Tabs>\n\nGo into the directory containing the smart contract (`cd contract-advanced-ts` or `cd contract-advanced-rs`), build and deploy it:\n\n```bash\ncargo near build\n\ncargo near deploy <accountId> with-init-call new json-args '{\"hello_account\":\"hello.near-example.testnet\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n```\n\n<hr class=\"subsection\" />\n\n### CLI: Interacting with the Contract\n\nTo interact with the contract through the console,", "mimetype": "text/plain", "start_char_idx": 3989, "end_char_idx": 5596, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e68d7c6b-99fd-43a6-922d-bdf8563222de": {"__data__": {"id_": "e68d7c6b-99fd-43a6-922d-bdf8563222de", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "605e54a2-169b-4171-99fd-8dbf73015725", "node_type": "1", "metadata": {}, "hash": "9b77cb0dda17691d37123df2971e78ff3651f752d17b684800dca894332513cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d49b3d1d-3a3f-4701-88d2-ea65e4e6c4cf", "node_type": "1", "metadata": {}, "hash": "45b6cb197beae4723e8be0fad44b162a1b6f0f1ad4434a72a25887bbf0f74f52", "class_name": "RelatedNodeInfo"}}, "text": "you can use the following commands:\n\n<Tabs groupId=\"cli-tabs\">\n  <TabItem value=\"short\" label=\"Short\">\n\n  ```bash\n  # Get message from the hello-near contract\n  # Replace <accountId> with your account ID\n  near call <accountId> query_greeting --accountId <accountId>\n\n  # Set a new message for the hello-near contract\n  # Replace <accountId> with your account ID\n  near call <accountId> change_greeting '{\"new_greeting\":\"XCC Hi\"}' --accountId <accountId>\n  ```\n  </TabItem>\n\n  <TabItem value=\"full\" label=\"Full\">\n\n  ```bash\n  # Get message from the hello-near contract\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction <accountId> query_greeting json-args '{}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n\n  # Set a new message for the hello-near contract\n  # Replace <accountId> with your account ID\n  near contract call-function as-transaction <accountId> change_greeting json-args '{\"new_greeting\":\"XCC Hi\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' sign-as <accountId> network-config testnet sign-with-keychain send\n  ```\n  </TabItem>\n</Tabs>\n\n---\n\n## Moving Forward\n\nA nice way to learn is by trying to expand a contract. Modify the cross contract example to use the [guest-book](guest-book.md)\ncontract!. In this way, you can try to make a cross-contract call that attaches money. Remember to correctly [handle the callback](../../2.build/2.smart-contracts/anatomy/crosscontract.md#callback-method),\nand to return the money to the user in case of error.\n\n### Advanced Cross Contract Calls\n\nYour contract can perform multiple cross-contract calls in simultaneous, creating promises that execute in parallel, or as a batch transaction. Check the [advanced cross contract calls\ntutorial](./advanced-xcc) to learn more.", "mimetype": "text/plain", "start_char_idx": 5597, "end_char_idx": 7442, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d49b3d1d-3a3f-4701-88d2-ea65e4e6c4cf": {"__data__": {"id_": "d49b3d1d-3a3f-4701-88d2-ea65e4e6c4cf", "embedding": null, "metadata": {"file_path": "./near_dist/xcc.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8", "node_type": "4", "metadata": {}, "hash": "bc3e644f5f6629b287ed30448c837ad2d707251201b021db7c51ae55bd1bd3e7", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e68d7c6b-99fd-43a6-922d-bdf8563222de", "node_type": "1", "metadata": {}, "hash": "54b1942809e594bfa1f818168103a0f170d57bcf975a76184fb5c6658c91357a", "class_name": "RelatedNodeInfo"}}, "text": ":::note Versioning for this article\n\nAt the time of this writing, this example works with the following versions:\n\n- near-cli: `4.0.13`\n- node: `18.19.1`\n- rustc: `1.77.0`\n\n:::", "mimetype": "text/plain", "start_char_idx": 7444, "end_char_idx": 7620, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0414f415-eb44-44a1-8141-ec6c8e820a11": {"__data__": {"id_": "0414f415-eb44-44a1-8141-ec6c8e820a11", "embedding": null, "metadata": {"file_path": "./near_dist/6-indexing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad", "node_type": "4", "metadata": {}, "hash": "9f8a812b7fe16737beb3adb25b73f3ff5602289ae8edf51e8592b648ec3f416c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7386bc0f-2a9c-4a51-8d53-39587165208d", "node_type": "1", "metadata": {}, "hash": "83e3b210270e9e5e2648c7b1421e64b65e3a3a3e13b65c9738b5907849141fa5", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: indexing-historical-data\ntitle: Indexing historical data\nsidebar_label: Indexing historical data\n---\n\nimport {Github, Language} from \"@site/src/components/codetabs\"\n\nIn our frontend, we can easily display the previous bid since it's stored in the contract's state. However, we're unable to see previous bids to the auction. An indexer is used to fetch historical data from the blockchain and store it in a database. Since indexers can take a while to set up and can be expensive to run, we will use a pre-defined API point provided by NEAR Blocks to query an indexer they run that will fetch us the data we need.\n\n---\n\n## NEAR Blocks API key\n\nNEAR Blocks provides a free tier that allows you to make 6 calls per minute, which will be plenty for our use case. To get an API key, head over to https://dash.nearblocks.io/user/overview and sign up. Once signed go to `API Keys` then click `Add key` and give it whatever name you like. \n\nWe'll create a new file named `.env.local` to store our API key.\n\n```env\nAPI_KEY=YOUR_API_KEY_GOES_HERE\n```\n\nWe put the API key in a `.env.local` file so the user cannot access it in the browser and use our key elsewhere. We should also add `.env.local` to our `.gitignore` file so it is not pushed to GitHub.\n\n---\n\n## Calling the API endpoint\n\nNextJS allows us to easily create server-side functions with API routes. We need to make this API call on the server-side rather than the client side so as to not expose our API key. We'll create a new file in src/pages/api named `getBidHistory.js`. Here we'll define our function to get the bid history.\n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"getBidHistory.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/api/getBidHistory.js#L1-L13\"\n        start=\"1\" end=\"13\" />\n</Language>\n\nHere we are retrieving the auction contract ID and fungible token contract ID from the API route call and then calling the NEAR Blocks API.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2009, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7386bc0f-2a9c-4a51-8d53-39587165208d": {"__data__": {"id_": "7386bc0f-2a9c-4a51-8d53-39587165208d", "embedding": null, "metadata": {"file_path": "./near_dist/6-indexing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad", "node_type": "4", "metadata": {}, "hash": "9f8a812b7fe16737beb3adb25b73f3ff5602289ae8edf51e8592b648ec3f416c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0414f415-eb44-44a1-8141-ec6c8e820a11", "node_type": "1", "metadata": {}, "hash": "8eb5e0ee417e3ed376084a03672a4e5866e56300609f5d2fd8be39f30c8f31b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b5e0200c-defa-48a4-8510-04fd278f0d84", "node_type": "1", "metadata": {}, "hash": "8172af9b1097c23a4d415fa59cf871d2a1f2a442d27a527f4408f8a69bc9ab48", "class_name": "RelatedNodeInfo"}}, "text": "This specific API endpoint allows us to retrieve transactions made to a specific contract calling a specific method. Some details are worth discussing here:\n\n- We pass the account ID of the auction contract, which is `auction-example.testnet` in the example repo.\n- We specify the method name on the auction contract that we want the transactions for, this will be `ft_on_transfer` as it will give all bids made to the auction.\n- We pass the fungible token account ID as the sender since we know only transactions from the correct FT contract will be successful.\n- We'll receive a JSON object of 25 transactions, ordered by the most recent first.\n- We pass our API key to authenticate the request.\n\n---\n\n## Filtering out invalid transactions\n\nThe API call itself does not filter out invalid transactions. A transaction may be rejected for example if the bid is lower than the current highest bid. To check whether a transaction was successful, therefore the bid was valid, we check that the `receipt outcome status` is `true`. If a transaction is valid we store the account ID of the bidder and the amount they bid, gathered from the args of the transaction. We loop through each transaction until we either have 5 valid transactions or we've looped through the whole page of 25. Note that, in our example, if the previous 25 bids were invalid the API will return an empty array. \n\n<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"getBidHistory.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/api/getBidHistory.js#L15-L43\"\n        start=\"15\" end=\"43\" />\n</Language>\n\n---\n\n## Using the API Route\n\nIn our main page, we'll define a function to call the API route we just created. This function will be called as soon as the fungible token account ID is set and each time the page timer reaches zero.", "mimetype": "text/plain", "start_char_idx": 2010, "end_char_idx": 3901, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b5e0200c-defa-48a4-8510-04fd278f0d84": {"__data__": {"id_": "b5e0200c-defa-48a4-8510-04fd278f0d84", "embedding": null, "metadata": {"file_path": "./near_dist/6-indexing.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad", "node_type": "4", "metadata": {}, "hash": "9f8a812b7fe16737beb3adb25b73f3ff5602289ae8edf51e8592b648ec3f416c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7386bc0f-2a9c-4a51-8d53-39587165208d", "node_type": "1", "metadata": {}, "hash": "83e3b210270e9e5e2648c7b1421e64b65e3a3a3e13b65c9738b5907849141fa5", "class_name": "RelatedNodeInfo"}}, "text": "<Language value=\"javascript\" language=\"javascript\" showSingleFName={true}>\n    <Github fname=\"getBidHistory.js\" \n        url=\"https://github.com/near-examples/auctions-tutorial/blob/main/frontend/src/pages/index.js#L114-L124\"\n        start=\"116\" end=\"124\" />\n</Language>\n\nThe `pastBids` will then be passed into the `Bid` component to be displayed.\n\n---\n\nYou may like to explore NEAR Blocks APIs further to see what other data you can retrieve from the blockchain. You can find the documentation at https://api.nearblocks.io/api-docs/\n\n---\n\n## Conclusion\n\nIn this short part of the tutorial, we've added the ability to display the previous 5 valid bids made to the auction contract. In doing this we learned how to interact with the NEAR Blocks APIs to retrieve historical data from the blockchain and how to make server-side calls in NextJS to not expose our API key. Now we have a pretty good frontend that displays all the information we need about the auction contract.\n\nIn the [final part](./7-factory.md) of this tutorial series you'll learn how to deploy a factory contract - a contract that deploys other contracts - to make it easier for anyone to launch a new auction.", "mimetype": "text/plain", "start_char_idx": 3903, "end_char_idx": 5081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "09ea9c5c-8a19-4de7-a2a1-e68c60895493": {"__data__": {"id_": "09ea9c5c-8a19-4de7-a2a1-e68c60895493", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d58031ee-986b-4729-9268-7b507f562c44", "node_type": "1", "metadata": {}, "hash": "789c424e71e6aa8cdfd7d83d4481e5c6b64c40dfbad74a583dcc778308eddd8d", "class_name": "RelatedNodeInfo"}}, "text": "---\nid: access-keys\ntitle: Access Keys\n---\n\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\nThe RPC API enables you to retrieve information about an account's access keys.\n\n---\n\n## View access key {#view-access-key}\n\nReturns information about a single access key for given account.\n\nIf `permission` of the key is `FunctionCall`, it will return more details such as the `allowance`, `receiver_id`, and `method_names`.\n\n- method: `query`\n- params:\n  - `request_type`: `view_access_key`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: _`\"example.testnet\"`_\n  - `public_key`: _`\"example.testnet's public key\"`_\n\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"view_access_key\",\n    \"finality\": \"final\",\n    \"account_id\": \"client.chainlink.testnet\",\n    \"public_key\": \"ed25519:H9k5eiU4xXS3M4z8HzKJSLaZdqGdGwBG49o7orNC4eZW\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1113, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d58031ee-986b-4729-9268-7b507f562c44": {"__data__": {"id_": "d58031ee-986b-4729-9268-7b507f562c44", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09ea9c5c-8a19-4de7-a2a1-e68c60895493", "node_type": "1", "metadata": {}, "hash": "6864f64d87041cd65d67041c98c4ec2308448c4d4f18f6a0b7e0aafc812ff38f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5edc9450-4492-4a8a-a316-18ab7a85e31e", "node_type": "1", "metadata": {}, "hash": "61b61bb0fa6b4c66de1057ca85fb26a0dceb964f6dc63a401cf55fcccee4df19", "class_name": "RelatedNodeInfo"}}, "text": "```js\nconst response = await near.connection.provider.query({\n  request_type: \"view_access_key\",\n  finality: \"final\",\n  account_id: \"client.chainlink.testnet\",\n  public_key: \"ed25519:H9k5eiU4xXS3M4z8HzKJSLaZdqGdGwBG49o7orNC4eZW\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_access_key\",\n    \"finality\": \"final\",\n    \"account_id\": \"client.chainlink.testnet\",\n    \"public_key\": \"ed25519:H9k5eiU4xXS3M4z8HzKJSLaZdqGdGwBG49o7orNC4eZW\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"nonce\": 85,\n    \"permission\": {\n      \"FunctionCall\": {\n        \"allowance\": \"18501534631167209000000000\",\n        \"receiver_id\": \"client.chainlink.testnet\",\n        \"method_names\": [\"get_token_price\"]\n      }\n    },\n    \"block_height\": 19884918,\n    \"block_hash\": \"GGJQ8yjmo7aEoj8ZpAhGehnq9BSWFx4xswHYzDwwAP2n\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:", "mimetype": "text/plain", "start_char_idx": 1116, "end_char_idx": 2521, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5edc9450-4492-4a8a-a316-18ab7a85e31e": {"__data__": {"id_": "5edc9450-4492-4a8a-a316-18ab7a85e31e", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d58031ee-986b-4729-9268-7b507f562c44", "node_type": "1", "metadata": {}, "hash": "789c424e71e6aa8cdfd7d83d4481e5c6b64c40dfbad74a583dcc778308eddd8d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6db69581-f9bf-43e7-99d1-288bdf77370c", "node_type": "1", "metadata": {}, "hash": "e29bdd57e2abdb01adc8e085876e719401d0239f7be0417de765a36c1e776453", "class_name": "RelatedNodeInfo"}}, "text": "```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `view_access_key` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"6\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>", "mimetype": "text/plain", "start_char_idx": 2524, "end_char_idx": 4121, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6db69581-f9bf-43e7-99d1-288bdf77370c": {"__data__": {"id_": "6db69581-f9bf-43e7-99d1-288bdf77370c", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5edc9450-4492-4a8a-a316-18ab7a85e31e", "node_type": "1", "metadata": {}, "hash": "61b61bb0fa6b4c66de1057ca85fb26a0dceb964f6dc63a401cf55fcccee4df19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e", "node_type": "1", "metadata": {}, "hash": "2dfba953d2272094e4578a5a65d7866b580cdba99a7a3b86a9f40e8d576c81db", "class_name": "RelatedNodeInfo"}}, "text": "<li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCESS_KEY</td>\n      <td>200</td>\n      <td>The requested <code>public_key</code> has not been found while viewing since the public key has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>public_key</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to found the requested data because it does not track the shard where data is present</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>", "mimetype": "text/plain", "start_char_idx": 4132, "end_char_idx": 5368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e": {"__data__": {"id_": "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6db69581-f9bf-43e7-99d1-288bdf77370c", "node_type": "1", "metadata": {}, "hash": "e29bdd57e2abdb01adc8e085876e719401d0239f7be0417de765a36c1e776453", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07fafbe5-b135-4c91-a6a6-3da116db23db", "node_type": "1", "metadata": {}, "hash": "eb0392247dc699c031c66154b40b3c5bea99e5afd4cab7eb8152fab5fdec1016", "class_name": "RelatedNodeInfo"}}, "text": "<tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.)</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View access key list {#view-access-key-list}\n\nYou can query <strong>all</strong> access keys for a given account.\n\n- method: `query`\n- params:\n  - `request_type`: `view_access_key_list`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n  - `account_id`: _`\"example.", "mimetype": "text/plain", "start_char_idx": 5373, "end_char_idx": 6863, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07fafbe5-b135-4c91-a6a6-3da116db23db": {"__data__": {"id_": "07fafbe5-b135-4c91-a6a6-3da116db23db", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e", "node_type": "1", "metadata": {}, "hash": "2dfba953d2272094e4578a5a65d7866b580cdba99a7a3b86a9f40e8d576c81db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "612bf934-aa87-4113-8abb-870dfa4c8ea3", "node_type": "1", "metadata": {}, "hash": "f055bdab3ffccffdfe45584b2fc36ee816dcee568fa407118ac4ba69779e6e7f", "class_name": "RelatedNodeInfo"}}, "text": "testnet\"`_\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"query\",\n  \"params\": {\n    \"request_type\": \"view_access_key_list\",\n    \"finality\": \"final\",\n    \"account_id\": \"example.testnet\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.query({\n  request_type: \"view_access_key_list\",\n  finality: \"final\",\n  account_id: \"example.testnet\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\n  params:='{\n    \"request_type\": \"view_access_key_list\",\n    \"finality\": \"final\",\n    \"account_id\": \"example.testnet\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"keys\": [\n      {\n        \"public_key\": \"ed25519:2j6qujbkPFuTstQLLTxKZUw63D5Wu3SG79Gop5JQrNJY\",\n        \"access_key\": {\n          \"nonce\": 17,\n          \"permission\": {\n            \"FunctionCall\": {\n              \"allowance\": \"9999203942481156415000\",\n              \"receiver_id\": \"place.meta\",\n              \"method_names\": []\n            }\n          }\n        }\n      },\n      {\n        \"public_key\": \"ed25519:46etzhzZHN4NSQ8JEQtbHCX7sT8WByS3vmSEb3fbmSgf\",\n        \"access_key\": {\n          \"nonce\": 2,\n          \"permission\": {\n            \"FunctionCall\": {\n              \"allowance\": \"9999930655034196535000\",", "mimetype": "text/plain", "start_char_idx": 6863, "end_char_idx": 8374, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "612bf934-aa87-4113-8abb-870dfa4c8ea3": {"__data__": {"id_": "612bf934-aa87-4113-8abb-870dfa4c8ea3", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07fafbe5-b135-4c91-a6a6-3da116db23db", "node_type": "1", "metadata": {}, "hash": "eb0392247dc699c031c66154b40b3c5bea99e5afd4cab7eb8152fab5fdec1016", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b041cd39-6677-406e-956d-841e2aff6844", "node_type": "1", "metadata": {}, "hash": "c26c60ff601b223761d25eeb35fa3b783fa72eac049df62648e81219398aabc4", "class_name": "RelatedNodeInfo"}}, "text": "\"receiver_id\": \"dev-1596616186817-8588944\",\n              \"method_names\": []\n            }\n          }\n        }\n      },\n      {\n        \"public_key\": \"ed25519:4F9TwuSqWwvoyu7JVZDsupPhC7oYbYNsisBV2yQvyXFn\",\n        \"access_key\": {\n          \"nonce\": 0,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:4bZqp6nm1btr92UfKbyADDzJ4oPK9JetHXqEYqbYZmkD\",\n        \"access_key\": {\n          \"nonce\": 2,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:6ZPzX7hS37jiU9dRxbV1Waf8HSyKKFypJbrnZXzNhqjs\",\n        \"access_key\": {\n          \"nonce\": 2,\n          \"permission\": {\n            \"FunctionCall\": {\n              \"allowance\": \"9999922083697042955000\",\n              \"receiver_id\": \"example.testnet\",\n              \"method_names\": []\n            }\n          }\n        }\n      },\n      {\n        \"public_key\": \"ed25519:81RKfuo7mBbsaviTmBsq18t6Eq4YLnSi3ye2CBLcKFUX\",\n        \"access_key\": {\n          \"nonce\": 8,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:B4W1oAYTcG8GxwKev8jQtsYWkGwGdqP24W7eZ6Fmpyzc\",\n        \"access_key\": {\n          \"nonce\": 0,\n          \"permission\": {\n            \"FunctionCall\": {\n              \"allowance\": \"10000000000000000000000\",\n              \"receiver_id\": \"dev-1594144238344\",\n              \"method_names\": []\n            }\n          }\n        }\n      },", "mimetype": "text/plain", "start_char_idx": 8389, "end_char_idx": 9811, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b041cd39-6677-406e-956d-841e2aff6844": {"__data__": {"id_": "b041cd39-6677-406e-956d-841e2aff6844", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "612bf934-aa87-4113-8abb-870dfa4c8ea3", "node_type": "1", "metadata": {}, "hash": "f055bdab3ffccffdfe45584b2fc36ee816dcee568fa407118ac4ba69779e6e7f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c3530de-fce5-464a-a0ef-efba2af46c68", "node_type": "1", "metadata": {}, "hash": "66b9d37a6b093d9def4fa649b7630b3fc1e95f2968a4fcca2a0670bf21da2c17", "class_name": "RelatedNodeInfo"}}, "text": "{\n        \"public_key\": \"ed25519:BA3AZbACoEzAsxKeToFd36AVpPXFSNhSMW2R6UYeGRwM\",\n        \"access_key\": {\n          \"nonce\": 0,\n          \"permission\": {\n            \"FunctionCall\": {\n              \"allowance\": \"10000000000000000000000\",\n              \"receiver_id\": \"new-corgis\",\n              \"method_names\": []\n            }\n          }\n        }\n      },\n      {\n        \"public_key\": \"ed25519:BRyHUGAJjRKVTc9ZqXTTSJnFmSca8WLj8TuVe1wXK3LZ\",\n        \"access_key\": {\n          \"nonce\": 17,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:DjytaZ1HZ5ZFmH3YeJeMCiC886K1XPYeGsbz2E1AZj2J\",\n        \"access_key\": {\n          \"nonce\": 31,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:DqJn5UCq6vdNAvfhnbpdAeuui9a6Hv9DKYDxeRACPUDP\",\n        \"access_key\": {\n          \"nonce\": 0,\n          \"permission\": \"FullAccess\"\n        }\n      },\n      {\n        \"public_key\": \"ed25519:FFxG8x6cDDyiErFtRsdw4dBNtCmCtap4tMTjuq3umvSq\",\n        \"access_key\": {\n          \"nonce\": 0,\n          \"permission\": \"FullAccess\"\n        }\n      }\n    ],\n    \"block_height\": 17798231,\n    \"block_hash\": \"Gm7YSdx22wPuciW1jTTeRGP9mFqmon69ErFQvgcFyEEB\"\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?", "mimetype": "text/plain", "start_char_idx": 9818, "end_char_idx": 11103, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c3530de-fce5-464a-a0ef-efba2af46c68": {"__data__": {"id_": "6c3530de-fce5-464a-a0ef-efba2af46c68", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b041cd39-6677-406e-956d-841e2aff6844", "node_type": "1", "metadata": {}, "hash": "c26c60ff601b223761d25eeb35fa3b783fa72eac049df62648e81219398aabc4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c67c1447-f67e-4d86-806f-2353a930e20e", "node_type": "1", "metadata": {}, "hash": "8445b35b70c4c4f59aa77c2bf3fa839ff91abd660bc9aaac10b06d8b2c2a0649", "class_name": "RelatedNodeInfo"}}, "text": "When API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.\n\nHere is the exhaustive list of the error variants that can be returned by `view_access_key_list` request type:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"5\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.", "mimetype": "text/plain", "start_char_idx": 11105, "end_char_idx": 12740, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c67c1447-f67e-4d86-806f-2353a930e20e": {"__data__": {"id_": "c67c1447-f67e-4d86-806f-2353a930e20e", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c3530de-fce5-464a-a0ef-efba2af46c68", "node_type": "1", "metadata": {}, "hash": "66b9d37a6b093d9def4fa649b7630b3fc1e95f2968a4fcca2a0670bf21da2c17", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a545831a-ff62-4fff-bc1d-5590b3767c35", "node_type": "1", "metadata": {}, "hash": "4cb1d671be77e0e3518c1361bfa739218cc74de44ebd09699995953b753ccca5", "class_name": "RelatedNodeInfo"}}, "text": "io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INVALID_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> is invalid</td>\n      <td>\n        <ul>\n          <li>Provide a valid <code>account_id</code></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNKNOWN_ACCOUNT</td>\n      <td>200</td>\n      <td>The requested <code>account_id</code> has not been found while viewing since the account has not been created or has been already deleted</td>\n      <td>\n        <ul>\n          <li>Check the <code>account_id</code></li>\n          <li>Specify a different block or retry if you request the latest state</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>UNAVAILABLE_SHARD</td>\n      <td>200</td>\n      <td>The node was unable to find the requested data because it does not track the shard where data is present</td>\n      <td>\n        <ul>\n          <li>Send a request to a different node which might track the shard</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NO_SYNCED_BLOCKS</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 12740, "end_char_idx": 14405, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a545831a-ff62-4fff-bc1d-5590b3767c35": {"__data__": {"id_": "a545831a-ff62-4fff-bc1d-5590b3767c35", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c67c1447-f67e-4d86-806f-2353a930e20e", "node_type": "1", "metadata": {}, "hash": "8445b35b70c4c4f59aa77c2bf3fa839ff91abd660bc9aaac10b06d8b2c2a0649", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f59f7a05-7b45-4528-87da-b936e060cf6c", "node_type": "1", "metadata": {}, "hash": "8ca2e5100077f88935270a5ddb9d0ad0e67be7d266375435f0761dbb955a6a4b", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View access key changes (single) {#view-access-key-changes-single}\n\nReturns individual access key changes in a specific block. You can query multiple keys by passing an array of objects containing the `account_id` and `public_key`.\n\n- method: `EXPERIMENTAL_changes`\n- params:\n  - `changes_type`: `single_access_key_changes`\n  - `keys`: `[{ account_id, public_key }]`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes\",\n  \"params\": {\n    \"changes_type\": \"single_access_key_changes\",\n    \"keys\": [\n      {\n        \"account_id\": \"example-acct.testnet\",\n        \"public_key\": \"ed25519:25KEc7t7MQohAJ4EDThd2vkksKkwangnuJFzcoiXj9oM\"\n      }\n    ],\n    \"finality\": \"final\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.", "mimetype": "text/plain", "start_char_idx": 14405, "end_char_idx": 16035, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f59f7a05-7b45-4528-87da-b936e060cf6c": {"__data__": {"id_": "f59f7a05-7b45-4528-87da-b936e060cf6c", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a545831a-ff62-4fff-bc1d-5590b3767c35", "node_type": "1", "metadata": {}, "hash": "4cb1d671be77e0e3518c1361bfa739218cc74de44ebd09699995953b753ccca5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc8a669f-def3-490b-bb43-a94290cadd00", "node_type": "1", "metadata": {}, "hash": "6bb6001df77b6d896f0e60a241d5309d7c2e36cba940fa6df196461378efc401", "class_name": "RelatedNodeInfo"}}, "text": "experimental_changes({\n  changes_type: \"single_access_key_changes\",\n  keys: [\n    {\n      account_id: \"example-acct.testnet\",\n      public_key: \"ed25519:25KEc7t7MQohAJ4EDThd2vkksKkwangnuJFzcoiXj9oM\",\n    },\n  ],\n  finality: \"final\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes \\\n  params:='{\n    \"changes_type\": \"single_access_key_changes\",\n    \"keys\": [\n      {\n        \"account_id\": \"example-acct.testnet\",\n        \"public_key\": \"ed25519:25KEc7t7MQohAJ4EDThd2vkksKkwangnuJFzcoiXj9oM\"\n      }\n    ],\n    \"finality\": \"final\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"4kvqE1PsA6ic1LG7S5SqymSEhvjqGqumKjAxnVdNN3ZH\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"type\": \"transaction_processing\",\n          \"tx_hash\": \"HshPyqddLxsganFxHHeH9LtkGekXDCuAt6axVgJLboXV\"\n        },\n        \"type\": \"access_key_update\",\n        \"change\": {\n          \"account_id\": \"example-acct.testnet\",\n          \"public_key\": \"ed25519:25KEc7t7MQohAJ4EDThd2vkksKkwangnuJFzcoiXj9oM\",\n          \"access_key\": {\n            \"nonce\": 1,\n            \"permission\": \"FullAccess\"\n          }\n        }\n      }\n    ]\n  },", "mimetype": "text/plain", "start_char_idx": 16035, "end_char_idx": 17348, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc8a669f-def3-490b-bb43-a94290cadd00": {"__data__": {"id_": "bc8a669f-def3-490b-bb43-a94290cadd00", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f59f7a05-7b45-4528-87da-b936e060cf6c", "node_type": "1", "metadata": {}, "hash": "8ca2e5100077f88935270a5ddb9d0ad0e67be7d266375435f0761dbb955a6a4b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "deaf647d-4cd5-40b7-90e3-7863debd9c48", "node_type": "1", "metadata": {}, "hash": "3db6c73bf748394407526978db3f8ee0cf63f218052f61b021bf5e251bb033d5", "class_name": "RelatedNodeInfo"}}, "text": "\"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?{#what-could-go-wrong-2}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 17351, "end_char_idx": 18222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "deaf647d-4cd5-40b7-90e3-7863debd9c48": {"__data__": {"id_": "deaf647d-4cd5-40b7-90e3-7863debd9c48", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc8a669f-def3-490b-bb43-a94290cadd00", "node_type": "1", "metadata": {}, "hash": "6bb6001df77b6d896f0e60a241d5309d7c2e36cba940fa6df196461378efc401", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "72654870-f4db-4bfb-b039-e5213ccaa82f", "node_type": "1", "metadata": {}, "hash": "b4bb40e342cdb19dd47930d61530c343bffd46631247ec0a3c6a1506e93b83a3", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes_in_block` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 18224, "end_char_idx": 19768, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "72654870-f4db-4bfb-b039-e5213ccaa82f": {"__data__": {"id_": "72654870-f4db-4bfb-b039-e5213ccaa82f", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "deaf647d-4cd5-40b7-90e3-7863debd9c48", "node_type": "1", "metadata": {}, "hash": "3db6c73bf748394407526978db3f8ee0cf63f218052f61b021bf5e251bb033d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d9562306-1890-4089-b802-0e83f82738f6", "node_type": "1", "metadata": {}, "hash": "b6ea7def9b1e9b74d689095ca662cbf372597733c5e5e17f4adb6cfe21badb14", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---\n\n## View access key changes (all) {#view-access-key-changes-all}\n\nReturns changes to <strong>all</strong> access keys of a specific block. Multiple accounts can be quereied by passing an array of `account_ids`.\n\n- method: `EXPERIMENTAL_changes`\n- params:\n  - `changes_type`: `all_access_key_changes`\n  - `account_ids`: `[ \"example.testnet\", \"example2.testnet\"]`\n  - [`finality`](/api/rpc/setup#using-finality-param) _OR_ [`block_id`](/api/rpc/setup#using-block_id-param)\n\nExample:\n\n<Tabs>\n<TabItem value=\"json\" label=\"JSON\" default>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"dontcare\",\n  \"method\": \"EXPERIMENTAL_changes\",\n  \"params\": {\n    \"changes_type\": \"all_access_key_changes\",\n    \"account_ids\": [\"example-acct.testnet\"],\n    \"block_id\": \"4kvqE1PsA6ic1LG7S5SqymSEhvjqGqumKjAxnVdNN3ZH\"\n  }\n}\n```\n\n</TabItem>\n<TabItem value=\"js\" label=\"\ud83c\udf10 JavaScript\" label=\"JavaScript\">\n\n```js\nconst response = await near.connection.provider.experimental_changes({\n  changes_type: \"all_access_key_changes\",\n  account_ids: \"example-acct.testnet\",", "mimetype": "text/plain", "start_char_idx": 19768, "end_char_idx": 21413, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d9562306-1890-4089-b802-0e83f82738f6": {"__data__": {"id_": "d9562306-1890-4089-b802-0e83f82738f6", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "72654870-f4db-4bfb-b039-e5213ccaa82f", "node_type": "1", "metadata": {}, "hash": "b4bb40e342cdb19dd47930d61530c343bffd46631247ec0a3c6a1506e93b83a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12", "node_type": "1", "metadata": {}, "hash": "0b20c00f8ccc421f5dbb44cfcdc9ea663294ec69a7a5f1494a73dead0f71d280", "class_name": "RelatedNodeInfo"}}, "text": "finality: \"final\",\n});\n```\n\n</TabItem>\n<TabItem value=\"http\" label=\"HTTPie\">\n\n```bash\nhttp post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=EXPERIMENTAL_changes \\\n  params:='{\n    \"changes_type\": \"all_access_key_changes\",\n    \"account_ids\": [\"example-acct.testnet\"],\n    \"block_id\": \"4kvqE1PsA6ic1LG7S5SqymSEhvjqGqumKjAxnVdNN3ZH\"\n  }'\n```\n\n</TabItem>\n</Tabs>\n\n<details>\n<summary>Example response: </summary>\n<p>\n\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"block_hash\": \"4kvqE1PsA6ic1LG7S5SqymSEhvjqGqumKjAxnVdNN3ZH\",\n    \"changes\": [\n      {\n        \"cause\": {\n          \"type\": \"transaction_processing\",\n          \"tx_hash\": \"HshPyqddLxsganFxHHeH9LtkGekXDCuAt6axVgJLboXV\"\n        },\n        \"type\": \"access_key_update\",\n        \"change\": {\n          \"account_id\": \"example-acct.testnet\",\n          \"public_key\": \"ed25519:25KEc7t7MQohAJ4EDThd2vkksKkwangnuJFzcoiXj9oM\",\n          \"access_key\": {\n            \"nonce\": 1,\n            \"permission\": \"FullAccess\"\n          }\n        }\n      },\n      {\n        \"cause\": {\n          \"type\": \"receipt_processing\",\n          \"receipt_hash\": \"CetXstu7bdqyUyweRqpY9op5U1Kqzd8pq8T1kqfcgBv2\"\n        },\n        \"type\": \"access_key_update\",\n        \"change\": {\n          \"account_id\": \"example-acct.testnet\",", "mimetype": "text/plain", "start_char_idx": 21416, "end_char_idx": 22682, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12": {"__data__": {"id_": "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d9562306-1890-4089-b802-0e83f82738f6", "node_type": "1", "metadata": {}, "hash": "b6ea7def9b1e9b74d689095ca662cbf372597733c5e5e17f4adb6cfe21badb14", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}}, "text": "\"public_key\": \"ed25519:96pj2aVJH9njmAxakjvUMnNvdB3YUeSAMjbz9aRNU6XY\",\n          \"access_key\": {\n            \"nonce\": 0,\n            \"permission\": \"FullAccess\"\n          }\n        }\n      }\n    ]\n  },\n  \"id\": \"dontcare\"\n}\n```\n\n</p>\n</details>\n\n#### What Could Go Wrong?{#what-could-go-wrong-3}\n\nWhen API request fails, RPC server returns a structured error response with a limited number of well-defined error variants, so client code can exhaustively handle all the possible error cases. Our JSON-RPC errors follow [verror](https://github.com/joyent/node-verror) convention for structuring the error response:\n\n\n```json\n{\n    \"error\": {\n        \"name\": <ERROR_TYPE>,\n        \"cause\": {\n            \"info\": {..},\n            \"name\": <ERROR_CAUSE>\n        },\n        \"code\": -32000,\n        \"data\": String,\n        \"message\": \"Server error\",\n    },\n    \"id\": \"dontcare\",\n    \"jsonrpc\": \"2.0\"\n}\n```\n\n> **Heads up**\n>\n> The fields `code`, `data`, and `message` in the structure above are considered legacy ones and might be deprecated in the future. Please, don't rely on them.", "mimetype": "text/plain", "start_char_idx": 22693, "end_char_idx": 23766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c": {"__data__": {"id_": "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12", "node_type": "1", "metadata": {}, "hash": "0b20c00f8ccc421f5dbb44cfcdc9ea663294ec69a7a5f1494a73dead0f71d280", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "153af17c-18e7-447d-998a-d38b526cb5e6", "node_type": "1", "metadata": {}, "hash": "3eaf0653f908155f6c7ac0fddd7fdbb2a121a9c07f0920f26286e0e40cee324d", "class_name": "RelatedNodeInfo"}}, "text": "Here is the exhaustive list of the error variants that can be returned by `EXPERIMENTAL_changes` method:\n\n<table className=\"custom-stripe\">\n  <thead>\n    <tr>\n      <th>\n        ERROR_TYPE<br />\n        <code>error.name</code>\n      </th>\n      <th>ERROR_CAUSE<br /><code>error.cause.name</code></th>\n      <th>Status Code</th>\n      <th>Reason</th>\n      <th>Solution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td rowspan=\"2\">HANDLER_ERROR</td>\n      <td>UNKNOWN_BLOCK</td>\n      <td>200</td>\n      <td>The requested block has not been produced yet or it has been garbage-collected (cleaned up to save space on the RPC node)</td>\n      <td>\n        <ul>\n          <li>Check that the requested block is legit</li>\n          <li>If the block had been produced more than 5 epochs ago, try to send your request to <a href=\"https://near-nodes.io/intro/node-types#archival-node\" target=\"_blank\" rel=\"noopener noreferrer\">an archival node</a></li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>NOT_SYNCED_YET</td>\n      <td>200</td>\n      <td>The node is still syncing and the requested block is not in the database yet</td>\n      <td>\n        <ul>\n          <li>Wait until the node finish syncing</li>\n          <li>Send a request to a different node which is synced</li>\n        </ul>\n      </td>\n    </tr>\n    <tr className=\"stripe\">\n      <td>REQUEST_VALIDATION_ERROR</td>\n      <td>PARSE_ERROR</td>\n      <td>400</td>\n      <td>Passed arguments can't be parsed by JSON RPC server (missing arguments, wrong format, etc.", "mimetype": "text/plain", "start_char_idx": 23768, "end_char_idx": 25303, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "153af17c-18e7-447d-998a-d38b526cb5e6": {"__data__": {"id_": "153af17c-18e7-447d-998a-d38b526cb5e6", "embedding": null, "metadata": {"file_path": "./near_dist/access-keys.md"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6", "node_type": "4", "metadata": {}, "hash": "ccf825f7311a16f9efcff4a6c3a81a4c62cb524306b0614386c3150bb2029577", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c", "node_type": "1", "metadata": {}, "hash": "940f7e928cc14a7dbdb7eb1a84fb76908c20cc35a21a41da4d6feb3a2a3c02ee", "class_name": "RelatedNodeInfo"}}, "text": ")</td>\n      <td>\n        <ul>\n          <li>Check the arguments passed and pass the correct ones</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td>INTERNAL_ERROR</td>\n      <td>INTERNAL_ERROR</td>\n      <td>500</td>\n      <td>Something went wrong with the node itself or overloaded</td>\n      <td>\n        <ul>\n          <li>Try again later</li>\n          <li>Send a request to a different node</li>\n          <li>Check <code>error.cause.info</code> for more details</li>\n        </ul>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n---", "mimetype": "text/plain", "start_char_idx": 5919, "end_char_idx": 6534, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"21ee2a05-4442-4200-8a62-4ae8527fb875": {"doc_hash": "c61993d41f28442349d62d1a735e35818265b650469a752f9c29cfabc41b2ef9", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "e0d702ed-136e-40f6-afbe-b535f9e41284": {"doc_hash": "b79a09a7ea55521d4e45e48ef2edc69016c95a35d2f9b37e00ab24f96d91a387", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "3bf47376-3ddb-4366-8a07-4ce48e886c56": {"doc_hash": "2f42b11d719dc258692f3ab0361ded7e1c91dd9ea77b5100dad4d2241b20326b", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "6a972dc0-69f9-43b5-80c0-9250ebcdec31": {"doc_hash": "9cec330df24a5efe79da738c12d3bc1752653ba0b89ec1de0d2d0055d607e471", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "adb07afc-9aee-487a-a667-00d1853c8fd3": {"doc_hash": "e457cd6a6d892351f3df9d52eb2e8f2f4eab4e50c6ba78162249caa17d5d6b3b", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "86e0959d-e116-4cc4-92db-2303df3a33e4": {"doc_hash": "0dadd53f7f3d931b6915c07431b07c50b5c584fdd0e9a5b3847bf869070bbaa4", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "d7ee550d-3c85-471b-9969-aec1027090ad": {"doc_hash": "9a40e8bc9d050daab50c6fe3d187dd7d0f5f5771ffef9574512ef1ab7c5491c0", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "6de39e96-fa17-4c48-97dd-dfa442f23ebf": {"doc_hash": "634076bb9d9e235ab9f6663f9ef87f826e15be48b7c3117e07ac606cd21508e7", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "7b7dcd9f-3cd1-448d-8c56-f80736f6c821": {"doc_hash": "6c875dfb416978751a9d4dad306702296040de6f81f0ba5e389ffb2e3a8040d2", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "a372d6ab-bec4-4acb-b9af-66e5ded45131": {"doc_hash": "ab3d28618dfb0ca9eee25d03985a641223b7beea4f705f27ed6c925cdf4d3e0b", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "eb32371e-fca0-4c6f-9571-b87bcdd71468": {"doc_hash": "10f9ea1ff9522b5b81ee194f614672c7b192c7dc3414b811d87ddd588d641b8f", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "90a65b8a-ab58-4293-b3b0-b49f34980645": {"doc_hash": "ac851f93589f736f4bc1a1fa690a664fbac9980f73db7a31155421e1873a2932", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "f07ea3cb-2630-44e3-a68a-ccf5c29c4d78": {"doc_hash": "8fda2c7bc75e35da8b136669022effeff223397ebab4d152bc35b7ebbcfeeea8", "ref_doc_id": "ad8e0354-e8b7-4062-8066-4f34f43b6155"}, "00e39d19-ebbc-45bb-8cf2-e6941c0cbe94": {"doc_hash": "70bb59f2d2097e567bda9700fdde20102324b6bb5901ccc5069d612d074e9a2b", "ref_doc_id": "5ed4c21b-7284-40eb-96a0-5d09a14586c1"}, "42da6a22-f139-4956-8deb-f00fe4ea33c4": {"doc_hash": "7dccde182ab6914cf3c0c04a2ffa2f84303384ec06a20e95336263c17b4f158c", "ref_doc_id": "603c0fd1-85c8-4339-9082-d5a5d097307c"}, "f41bea12-96fe-4699-b693-c971608d2565": {"doc_hash": "af41463350b42424cb74e2c138a689f75dc04cc3b35f3e7705ba404c92b0d821", "ref_doc_id": "b0c7858c-ffbc-4c5d-9544-af1108c36983"}, "80ee0266-8c88-4605-91aa-6a8b57de1aff": {"doc_hash": "ac9194db91d4853fd8a1dd56edf6fac07ef32bc6b044ffdea7b5ae2d312b36a1", "ref_doc_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b"}, "c5d94f86-f63f-4509-9e1d-6a1c0486ade4": {"doc_hash": "52fe22c8e87600e383a9d7bb13374f5cfef88c5ceb4423dd305bfb5b9d1112ef", "ref_doc_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b"}, "4e766689-3e78-4068-a91a-83cc8ae2550a": {"doc_hash": "7ae1d84b8713a9f0c0b2cf1a1baa7a16996aaa13382c956364b866aaba8064ec", "ref_doc_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b"}, "222d0d2d-6c91-45bf-beaf-bc7d19309fec": {"doc_hash": "0c0cf6fa869d298f9f0e294e842db2e359cf30f6fc77490aef42a3532c74f386", "ref_doc_id": "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b"}, "09759803-2e40-4fd1-8099-c2dbd19de1a1": {"doc_hash": "0a3bc808da877bd7204c996a55a0a75809a0d7b158b26dd10731b21641ce7279", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "b747cecf-9e09-470c-bfd7-b8a4740ac2d9": {"doc_hash": "3304b924fe031e2ce3194d9e6302e1b06a0c7ca98ef2062261dfb7a480fb1c3b", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "892d327e-e7cc-4dec-b27c-819f736b21c3": {"doc_hash": "c44636b77a0d76727f453b5752c00b69a04b4b73cbcb5753d2c18e1589cef0b0", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "0605c67e-2ca4-41c7-828f-8f01df41de62": {"doc_hash": "9f873b3ec67edafc4c52cfa1f8457ac93c6863104b6a94e9aebdd5d335529ad2", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "a65d0199-fe73-436b-acec-85559591e98e": {"doc_hash": "2d050257ccbc8df5e7c9c931eb324163a41ec00e15fe2e62468bb22c18ae6447", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "24f9e3ed-cd08-4511-ad0e-5cf5492a12e9": {"doc_hash": "0012ec78ae2fc1627d49a0bf029b037a72fb562d093c7882884807033352ef6d", "ref_doc_id": "a6fb6b1b-1e46-4e7d-988b-020dbab6da98"}, "ddcefc90-4921-48db-8095-0d41a7110168": {"doc_hash": "3960e00b2ae7382ef895fe73754780babcd6f4e3e127ea5dc0d09e77ac603786", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "9df625ec-0619-406b-bdbd-3ff899bdcffd": {"doc_hash": "ecfb637f94852766514c781e0f975329017eddd0f3b2aa469ec3bc74c420b03f", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "b3b80943-d011-4240-a8bd-969957b626f5": {"doc_hash": "696276f481e89707902ba4dea73ce812b11d6be848deb5bc3398caa529d58d5e", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "84a84c3d-336a-4d72-8a6f-d5650b83de41": {"doc_hash": "76d657fedf78929e223499e809e2ca354a1902a9c5c676c781ea46da8166f893", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2": {"doc_hash": "a7f49a7842b99901cb3107cb187915a5c5a0e47dc0b6cf265b5ded9baf8a7fac", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe": {"doc_hash": "ccdc573a51defdf654e8b2d81873f4f63804d2bdbcbb46cde73469286461657e", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "c0b97064-36b7-4f06-a62a-de6da3b96ab5": {"doc_hash": "b1f00470b82bbb0775981dcbce354006b9bf71629557dfe400bc22095d3fdbfc", "ref_doc_id": "4f27afff-676f-4d43-a604-93cfabfe68d3"}, "52fd1eb8-bbb2-46eb-add8-5beb31f09f59": {"doc_hash": "c5a0a56e77390a7030fd426e22e206834242169e594bb68c7590196df2c34fa5", "ref_doc_id": "88073a1a-78ef-4fa3-a822-244de42f52b6"}, "3a59d227-88be-4978-87b1-31df6fb521f9": {"doc_hash": "66ecdf1e60006ba3e1990f62f5cb1859444c50b1fd45557d6a954c3d50def7c4", "ref_doc_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c"}, "b370603c-0c31-4080-8ba0-7bafb53b22be": {"doc_hash": "0c031b0beda3d7e83f11af1be84af189f76d0a088a0b79068766d0f0668cc740", "ref_doc_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c"}, "9556fb67-6820-45b4-9cf3-e82bd6dfc215": {"doc_hash": "0e49b6e6acbe0a49c1fc739d211f06b84e2ee039a048e632a1fc3dba992d31f9", "ref_doc_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c"}, "612c5044-66e3-45b4-8fa2-1dd6d62b3706": {"doc_hash": "ea8eaf739cf0f1ad741f13b2e7782f1958c71411a768c17df4fc13331fec577d", "ref_doc_id": "5c94d891-d8ff-40f9-9f2c-38a996ee218c"}, "e38b7a23-c662-4a5f-b916-2e4a09cd2dde": {"doc_hash": "a2696548ab229d0502b291f1d6e27650aa33386dd795ec220d87cc507b7792e5", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b": {"doc_hash": "349193b42fad6865639dcd4a3bbc0354ab1fc556a06bb9b13cfee6dbc615362d", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "576dfee6-2220-47ae-9793-3f56591a4f42": {"doc_hash": "022dcbf1b5596f8c02526f97e70a6c03a90361d3f9f85d60e9e616ae36396369", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "1433af1d-7047-46a4-a5b4-8070a603a63d": {"doc_hash": "9a6e06b394d18f4a16b524dcac48755666755f677d1ee03aa064767510e25b38", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "f423a8c4-d143-471b-8324-a6665b52a676": {"doc_hash": "9ac8de8a7c8c5c6c9bee5ecaf1a7b0de58ffaea29321a235e0cca541b8ecef30", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "e5946586-537a-4a8f-b243-9be66e13a876": {"doc_hash": "9913491cd6ed38b8572ecb4bab20cffb43ee6d87bc6a07d778e5171697cfd0a3", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "81ca5b98-7db6-4f08-ab75-8735d9e32aa2": {"doc_hash": "d39c268bf8da94acb15f262c22b98a46abe34a75b73f65613d6b677fa17a8f1c", "ref_doc_id": "3d0dc1c1-040d-4d22-806b-724572bd5cb0"}, "a711a4cb-b4b6-426a-94fc-e5da015bb566": {"doc_hash": "c9fde8a1af81177b4322ab1745e302efe42118ce6a3e93d02885d15210809973", "ref_doc_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2"}, "07ff7850-f63e-4503-a75f-2771dc64a609": {"doc_hash": "91331f141cf6d1d96f5de42a327c36b6ea023a2783fc88fb4eb58e408b14a0c4", "ref_doc_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2"}, "20a4bf6f-f269-4b68-9f07-b24ca79c58e0": {"doc_hash": "8cb3e1c1dea09433f90dfe27d174ce73f74eec6258e0d989c1b656a213597534", "ref_doc_id": "9ad8f439-0f32-41d0-8349-d4ce694a26d2"}, "93712ae1-debe-483e-8370-5d143653d004": {"doc_hash": "c8e93155d99f8bbfdcb37fde5a1df992ae88cbbbe86c6b0f62d069a350d672cb", "ref_doc_id": "15ed78f1-8bd7-4a38-a80e-d3aa8915409d"}, "e2799694-4181-4d91-bf2b-b47fd15facf2": {"doc_hash": "eaa29f4f8ed9c0692c68032d998380e1225ee50b7b8e90ef901d532928d249e1", "ref_doc_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294"}, "9a78a8da-5e67-44d7-97dc-80787da24f60": {"doc_hash": "630c2349bfd051b82c14763f3014d03486e5e1bac3f0f26938eb9192b0622f4d", "ref_doc_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294"}, "9ae249f5-25c9-4191-8d81-78ce84330948": {"doc_hash": "2c5cfe8919eb826e3acc440ae84113d4d838c3d3769cee00f6b81a1b67659210", "ref_doc_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294"}, "0695e43a-0ddb-4c80-880b-58256516c59f": {"doc_hash": "9483d7dabb0df47eac494c2318efec1e7a9464a6355a038e71ab2ba5843611f7", "ref_doc_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294"}, "3571af43-9277-419f-ae43-f16dbe01ba87": {"doc_hash": "2ee124927c0542683d64f4ec22920cca6eedfccd2c2072ac2b06cc3f7019e34a", "ref_doc_id": "e23862d4-2ed2-4962-a9b0-5e56c193f294"}, "4a9ebb97-4c93-4b57-bef9-eca579c6d95c": {"doc_hash": "1b6c144cb14934066a56d20487cc402fa4cb9866454a3872b12fa134575e7519", "ref_doc_id": "71cf68bb-46aa-4bb7-9d15-eab0945e5724"}, "7c4e662d-54ec-4be3-a87c-bb02458891df": {"doc_hash": "fb30068f314b455304a3328b8259976aa13ef78e66f96a95aba12dae078fc300", "ref_doc_id": "71cf68bb-46aa-4bb7-9d15-eab0945e5724"}, "dfffeca2-a736-4de9-ac76-d43522a09268": {"doc_hash": "7efdb97f987ba7fea78946244f4619bc7e9ef20a1514fdf8469cde7ae288aa88", "ref_doc_id": "3c6414cc-64c0-4e35-a787-e986444721ec"}, "cd96485e-f8e5-4906-839a-76673189a565": {"doc_hash": "8492b7fdd08983cf5aa385f36faf4a71e27b520585f99afdd044bc014da3c167", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "aa6c2b9e-2abc-4995-81fc-374edf6176d4": {"doc_hash": "95ee1bda2fe8abbfb2410c780553a2f63de617c96aae37e6e170c415c96d0903", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "77f32702-5152-4c4a-bc66-8dd1165d3da7": {"doc_hash": "5505d3bb86c745ff3d8744ed48716dc8ca5f27002ea807ae9e75f3b61ddf846f", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f": {"doc_hash": "e1ae6007f3198c8185636cd65341e0af4a87edeea4c76f16888afe2f6f5bc80d", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "7044a93a-78b1-4b56-9fc2-6af462736fd2": {"doc_hash": "41899ead7929782e89a45abcd6d6e8bb9c85be9335f65c342ca8de79eff0929e", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "959ae596-a9c5-48b1-aea7-e7da203bf795": {"doc_hash": "06b2b3343306b23af77029dda5c8377f9e7c8a8a99fea4d048e3e1755ac402cf", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "a9d04506-d43a-4e7d-84c0-390d8126aac4": {"doc_hash": "14762aa5e79873c695ba555d156422fe2a21abb3be74049d1d2cbcb99dffce51", "ref_doc_id": "b7d13ae7-c42c-4980-bf1c-e2759fffecab"}, "d64062e2-f85d-4c5c-a4db-daf9a901344a": {"doc_hash": "db1ba98a9940e56a412dafe03209b52cffd551294b7320494ed0255de00f7f98", "ref_doc_id": "17be715e-4b45-4336-8f50-688788f8ca8c"}, "066d6561-36b5-4747-a6c5-e6439a6ef07b": {"doc_hash": "59fb6bab9c218fd075b8c5a22ef3160bf44f9ca10796b657fa10811c7db1f1c9", "ref_doc_id": "0ad5c9c9-a70f-44aa-b28a-5eedf303bf33"}, "fa98aa92-589b-4654-865c-685477424b20": {"doc_hash": "2b4f0b91bcd60069bb4d01c3ef1a4c0b250f7311e4ac0cc11d7c995c315d8fef", "ref_doc_id": "0ad5c9c9-a70f-44aa-b28a-5eedf303bf33"}, "2484f59f-b029-43fd-b956-5cb5056e42c2": {"doc_hash": "8bab2e7e0d5d99f6e2f791bf3eae5a2845ee024900f177c1309746bfe282df81", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "e83de3ee-8c0e-494f-8100-1b88a88f002a": {"doc_hash": "865130df18de39424db5a7a7dab63058125a7dce2da6130af2f74d7494fe0bb7", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "04a3c513-4edd-476a-85e0-f3f11e2529aa": {"doc_hash": "d1921fc642f99e82ae88f945f9a060eab68890d7ba7de1cf3c3275693350ac53", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "97739b92-d3ce-45f4-a751-e145534c2a82": {"doc_hash": "4a4cc214d01ec0fea4903196827bbc075819f37b2cd90a1f17a56eb1a3023c5f", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "d766215e-6d7c-4a9f-9a31-deebe180089b": {"doc_hash": "311d95851f97642b2fa71023ab0421158d1f0fefb46ab9f6fdeeb4801df4a9d4", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70": {"doc_hash": "7edfb7465dbc424c3c545319301cdb4d318806cfb287ff27571c8b052f8b001c", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930": {"doc_hash": "c18f1fe2f4e75d855a98ee08870e0a5eccae828053d070aa3cbcc6004df6fe13", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "3c5480d5-a889-4124-94ca-aa4ae6a87b5c": {"doc_hash": "4818a21ed784b4960b443d00ba4416b033b332b8672612faf77bbb3ab8a29978", "ref_doc_id": "27269808-b3f0-40f8-a515-fcda2b2e1099"}, "73b6723e-09bd-487e-a2c2-6e3f49dc53b3": {"doc_hash": "460ef41dc25e22859e1451fbdedd1661ec3ea467116861ee2dbbe72c39f66d81", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "1b31513a-07c5-40ff-907c-a7e2d30bfbd8": {"doc_hash": "42e7b33c89776510e411c1ed11ea1b544b4671c1a926211d62545b2200513d3b", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "756f7d30-124e-4689-a899-855432d1cf9c": {"doc_hash": "49ec9f3f0b420524e4abb8222059caa22ca6f1cd3dde11e3cbd63bfc49b8ecd2", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "dc0a30fd-5830-4a76-a3ec-8955c71bba6f": {"doc_hash": "b0307d904b48c441c0b2e736c3c51057b65fe505e457c0f7da27979312857064", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "26f7a2e6-b69d-493c-8830-37823ed327c3": {"doc_hash": "2fd5b837bdc419a560e4ad8fd3ccf01e965949ee9a4ceda6f659dd582185c90b", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "4790ab4f-dcb2-41a9-96b6-7c98de06b266": {"doc_hash": "8ec966a1cf45aeb48e755ae0e2b74b20266e15b70d9f91ec35aa6f03a0ff9fe3", "ref_doc_id": "d46641ad-d78e-463a-bfdc-305892ff5a10"}, "3c53fc74-f9aa-41d6-818e-968163bc9f74": {"doc_hash": "a53c267c81471197234bbab56ecb5481ae91abfda2f5c10f32db34d6ee9e15c0", "ref_doc_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117"}, "dce5d856-4dec-4505-9c81-4837182200cb": {"doc_hash": "51a2b7ab21c72bb0cc9514b0b5ff94e55e86e611b6239fe472aa980323d13bcc", "ref_doc_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117"}, "5e3d0c85-bf98-48df-a1f7-8b784e0d4396": {"doc_hash": "3d2b9e5268c23df990af3987ac73336b50a16b41946b7a2f5b11335bef46742a", "ref_doc_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117"}, "fef757ee-6f6f-4420-bfdd-58a238acc116": {"doc_hash": "21bbf9cf9ec52a0ffd204c700241881cec178ef5d70b4034f99bedddb83c350c", "ref_doc_id": "03b83c26-c0cc-4545-a7ca-92925d3d4117"}, "d8600231-f27a-4a0d-a857-61fbb20100fb": {"doc_hash": "bf6a15b4bf646ebe49b0d1b42d4399f595fc30208a803b00c80f8ff1d25f39b7", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "051e5885-cfd7-40e3-8d94-ad8b5143c58d": {"doc_hash": "c0d4da1daef6d6af6cba6401c1c40915c3f304b6c098923ff09122ce322289ad", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "fa2f3b55-48ff-42fd-85da-770bb9d66a65": {"doc_hash": "24c875ea1f49c3a23a9834c1b4f4648ea868d5f80f9c9cc90275759e573307f8", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "d9d72c7f-c63f-42ee-95be-cb52692aad1c": {"doc_hash": "d9409fe388ca9dce1179ca8cad544655150933266dee7a5ed62ee6c11e541032", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c": {"doc_hash": "97b08baed11fed8902650bc371a4d3b2b7eedae18cb0a69767a28dcaacc04cea", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc": {"doc_hash": "492ddb5d69474953d8193deccaa292ef0a513aa8e1232d038895ddc58726ba43", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "487427e1-6910-48b5-87fb-a6f27791fbd9": {"doc_hash": "ba98a1416d2e081af13c0425ade65160ba61e8395715c58c07e31746e1dc6570", "ref_doc_id": "cdb8af0f-469a-44c5-885f-812bd849793d"}, "c1e90991-c601-45a8-b696-dd1764b1b7da": {"doc_hash": "1d834e01d9955c1be990d0487facb9d095a3542495cb83c97c35c389ab846f31", "ref_doc_id": "700ce749-5082-42b3-9e0e-a20af208afd5"}, "b11e06a3-2814-42e7-8627-8853c928344f": {"doc_hash": "1b360fa1a817d1eb8326acc08451262ca3428fc310f61a760137d6da99a457c9", "ref_doc_id": "700ce749-5082-42b3-9e0e-a20af208afd5"}, "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1": {"doc_hash": "feee9200e76e8ec8b4d9bde5bd65aed28fa1dfe716910a5c6606a23403696920", "ref_doc_id": "700ce749-5082-42b3-9e0e-a20af208afd5"}, "1f41f6e5-ea6b-4d44-8b15-47850c10a93e": {"doc_hash": "c6666a309099cb4baf752bdfdcd449f3a30e8efba1eac3ebdc3fa63914d4a5e9", "ref_doc_id": "700ce749-5082-42b3-9e0e-a20af208afd5"}, "65456c7c-9607-4fc0-8991-26fad71ac078": {"doc_hash": "d71a1b83c749d28703a47123cb48dd2e92bbc806adbca7e0ff0ffe0fd3861a67", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "7038f198-ee21-4d7b-a215-216aeed17d66": {"doc_hash": "16a8745f2a8d7ee2a5a0890f407e92ce04711c7a0980f5787dd72b9af1e5d16e", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "937d7422-5df1-4d5c-b845-50b33da696b6": {"doc_hash": "855dec1d9ff64c9e931b6bdfd4bf37d21975c169002c050ffe8ca265abba744c", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "3c79b139-8419-416f-a6a0-1da4b328b789": {"doc_hash": "63861ef5babef592113c9f636fbd4cde872c052eb99ce9a1c031d165383366e8", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "e372648d-e1e1-4a32-871b-8f28afe290e8": {"doc_hash": "5c5cd2ce62901ebef1dac685de1aff5a8eb273eea151a35cbb62d0fda73ec468", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "e8bd3657-6ad4-47a6-8979-e34111c9a0fe": {"doc_hash": "51704305a04dffec165091020c1aa10c7ee512b6f9935cd625897d2c24a01d87", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "b18844d8-36e6-474a-b3dc-89dc3a07f148": {"doc_hash": "502941b7ff11d92ebf4f1b4312e12f01e1946a55e2112736dade2bc4d0014dab", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "272032ca-909d-43c5-bd65-a6ee0eac0732": {"doc_hash": "3403f2b789f8256adc1738a0f6e6df29cb6dac6c26d1515240f5c6941ef9b6bb", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "6f944914-fddf-4034-8fe8-aec02f7585f7": {"doc_hash": "ccf39b212f1a065c870851e9f72a7b74ad46b1349235b8f97ac8abad692a67ad", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "c064bf5e-a931-4139-8921-e1df021090ef": {"doc_hash": "87321c12e064e9f31a527228e8857c13963f5a6701ef1154a263b5d7e8e47824", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "d8728fd9-04ee-430c-b8df-9e98f4bca553": {"doc_hash": "bd466e3fb860f2a66742d82db46289f23df17fd2ed94619830b8290de3efcb8d", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "b2213053-de1c-43c1-8d4a-15dd26cecf97": {"doc_hash": "ed0d15b8ddd2143c8a9d1b6780d9d42242e20c1ec32fe9de3853af628bdba02c", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "b3bf9848-e830-4e7b-9116-29d7b31239f7": {"doc_hash": "9a63dadb094b60e0f80dee28a9fef8b19235eeb85ff3dd81329f5c87b26eb5c6", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "99f71980-043d-4ffb-8c78-9cb44a06d12f": {"doc_hash": "66c49ac3f4b93f5a9e510cc4bc00ef3e696b4379d2ee1ae09c1679ad1f600500", "ref_doc_id": "338e38b0-7839-4aef-a87f-c1797d241229"}, "2bc80f03-ca45-4c76-9066-10fb0ca2ad7b": {"doc_hash": "be99963466adcb0d6d354642b27cc31c97d9515390f6413173d03ea38b91e06f", "ref_doc_id": "e5c957c7-d7f2-47e9-9929-237318c6e7ee"}, "a18d0cf3-3365-470f-979b-4496c1f449c6": {"doc_hash": "c430d1e2f33c70230e585365d1eed861c8630b3f466e2a44f2c96e292da67458", "ref_doc_id": "9bc6c187-19de-4588-b061-68dc80c48907"}, "a59aabc9-a666-438d-a445-42df0bb8250b": {"doc_hash": "9fdb94a12854727dbfed155759bf69140a744fa032307785b9b73993dac91941", "ref_doc_id": "9bc6c187-19de-4588-b061-68dc80c48907"}, "79b1ca5c-5cde-4c9a-b826-665d5bcbc622": {"doc_hash": "2d627694f4ae5f9f7dd5cf5fe690f0706ccf6c0ab6b80970d6a4e1c7b64b088e", "ref_doc_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5"}, "f1cbde58-b09f-4afc-99b9-5daa19f70644": {"doc_hash": "c240414db0e911d7c037bcca4015fabf1ba79462eeb922bbe05e9ec9defe8692", "ref_doc_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5"}, "584ddcac-12da-4edf-ab48-8f24093f7524": {"doc_hash": "66b268a6cb347a186de007355d00c952c7d5d17e83475130e72d57a3a51d8351", "ref_doc_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5"}, "708d871a-9ef1-4a6c-b768-ecccc1a63ec1": {"doc_hash": "0ab1c6fad08f1e796d4ebf0039f20ecbcab3e8f82454d0a50b9f45048193b2fa", "ref_doc_id": "7dbab5bf-d82b-4608-81c3-54cc8b932ff5"}, "2930de98-214d-46ca-9604-eb5a78963168": {"doc_hash": "95dece1f2968f16e40f05acf64b2f1bb2854111b128875b0bfc2f4507a0f2589", "ref_doc_id": "070e642c-5bd5-4405-9200-e6f9f5d6ec1d"}, "be09aea8-81f8-4e03-860d-9c27669153a8": {"doc_hash": "ab5df02ee8624ab15b342b43e6426a269b10ab4f7b1aff092b87404861b69b60", "ref_doc_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a"}, "baab5a31-3288-47a9-a2e0-3ce546070658": {"doc_hash": "c77e547b3c94bc80b1629bf8bc09b1b5ab120218f56a12dd39cb2a8c02fb3643", "ref_doc_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a"}, "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b": {"doc_hash": "8fe2075fe2dc431735c8a0e28d5546f89d5439f53d37a83342d0197489ae36b2", "ref_doc_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a"}, "ac072a10-9b2d-4a6d-bd48-cef84b9da9c2": {"doc_hash": "27fc2faa6bd09e5835c1f1ab72fcec917704caa0b745ff5bc65dbc9d12a5f1db", "ref_doc_id": "a820ae42-2eee-409e-9d54-13e2f1f7065a"}, "2f2c4e0d-77e1-4eec-ba31-173676568775": {"doc_hash": "50ad36d189df3807909adf5d1f05085c792f9872dd3a7dd18ecdc608edabb162", "ref_doc_id": "5660f8c0-f8ee-461f-b42c-76bec8b11e86"}, "4cf4d8cf-7715-4c83-a42f-9d16f70e8c32": {"doc_hash": "7bdc862a1c60e73b99f0b4a7aee1d9b2343cffe9253c5366f375bb10c94ab245", "ref_doc_id": "308723b6-072b-40a7-8355-29e45b489871"}, "b6ca282e-e652-4be1-9a3b-fad124472327": {"doc_hash": "ceb6954ac3e1d7f6e58013ea365d45c61ba35a4a95fa8e15d3c274e8c4d32e65", "ref_doc_id": "308723b6-072b-40a7-8355-29e45b489871"}, "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea": {"doc_hash": "565e562aa4d068e69e76882ffb5f0b88082b8f571a230f37e8ba321f6f041b1f", "ref_doc_id": "308723b6-072b-40a7-8355-29e45b489871"}, "5185b0c0-777c-401c-bac1-caa57ebb307b": {"doc_hash": "2aff17b9fba80f651b9c351e1249376e15a7e24e84d93f64380f440560a02e4f", "ref_doc_id": "308723b6-072b-40a7-8355-29e45b489871"}, "42aa4f16-38b2-40df-9fe9-2ceb4d8057ab": {"doc_hash": "48c87f198e9aa83a569781155c8e4acc26a370dec3273b2324d571341f7e3162", "ref_doc_id": "308723b6-072b-40a7-8355-29e45b489871"}, "0d5e3417-4bd3-4826-bf19-12ee0ff8e55b": {"doc_hash": "75f46d7b55f01361336915d3f0098bdd4ff5e2e2d4b44e957a3e586dd8d30bd3", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "52f25481-34e2-40db-a929-4617b6bb9fd3": {"doc_hash": "bc7c7be1d3f883c9d9ac70b96ef346e6c7bee11148fdfccb4f79a820d3613108", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "066349e4-5804-4e7f-94f9-7d3a879e5228": {"doc_hash": "127d3cd671dff0b1ad466a0db1b8e6156c8f35fb612525c9064f84f7776cd36e", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "66960c4c-44ba-4802-aef3-7d34a514e342": {"doc_hash": "c2e457403800d3b542dc4da154fc489aa6acf8a2fa2476b95563f42da220c134", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "57c2ace6-9959-46da-a2d8-4302114efa9a": {"doc_hash": "142696a2ddecde7735de2f78eaba4f55349722b413640667f53959a6d6c84226", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "3788a3fe-92f6-44a2-a007-75e6286f3216": {"doc_hash": "d29dbd08e5e9d97cca2ff88f394369a5a34a3d387e9c0ec045ed65bc8be033d3", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "01fb1edb-ff0f-4b70-987a-4ae741408fce": {"doc_hash": "d925a19d56d3da997dd09e3a9c1198a141434889bb5747b8a57bd64e3ba663b1", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "b6f3abe5-8ad2-4554-826f-f3bd96beb74a": {"doc_hash": "98664a24fa733560ef384eeb5dc79574aa7c487f8c6207cf43b4d4ca7e199fc2", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c": {"doc_hash": "6bfb37390fcbf84a4790bce96a2607a74779a527063086f8a72bcdb0643f7722", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "663e204f-9d91-46ab-b7ed-eb8b0a018576": {"doc_hash": "6a851e53696b92d939a9210e6d90f25bc48af43b966b6dacc6d212c220133f6d", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "0e062d97-ae51-4ec2-84df-24e17d34748c": {"doc_hash": "d28e00056815f58e70a92460ad0599c3b2616f091885ca14ebc8a89b9c52f195", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "43608d91-39d0-41e1-a932-e6da440a10d9": {"doc_hash": "68d670f4c1cab8910e62e94956ab438b2f87d1c6697bda37139bfef10f50aaa8", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "f5a0716e-bf5e-44af-afba-744946bfce71": {"doc_hash": "854a8c6570052dc5eb4582d3c20419577f6d1c8173eedd0336de825bd1f569d5", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1": {"doc_hash": "73fbb4ea77524aef46fcac51d0c2b81f8cd3064ba1a2935ced7bf149e9a1727c", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "9d6747ba-3e2a-4911-9d75-241a3e7a6c00": {"doc_hash": "ed3fe7f46a1f5e615b07984bfe4c89a080af8a26b11e960663b389f061d34fa2", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "2b91e421-c96e-4713-93a3-258d0098404c": {"doc_hash": "cfd7f84f887f177129ed4b7aeae1c3ea4bd77bdfdb144f30585f20843ba8e131", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4": {"doc_hash": "3ea70b3c3eae6d630d8fc100a305654c362f4fc3fc9765b5392ff939a250fd55", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "56321410-6139-4b43-a73f-b9bc410e94d2": {"doc_hash": "ce99a406ea6f79325bb58516bf676422908226c9750843f7edf11c336bf91f16", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "41e55d0d-5f09-4299-b3d1-82310c52c21b": {"doc_hash": "1a6571ed2bc1b45c4ebaa116586c82a66130c439ee2135f46e7fb2ccbec730c4", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "bc690d9e-82ef-491c-83e0-c9f8b615e6d8": {"doc_hash": "188f57b5a5db82563232845ac2e65d49905c086f4aa49d0aea701488d3d5a4f0", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "9b666083-b310-4401-88ca-c9b796ee0fbb": {"doc_hash": "0de07c33652617b07ea0c1aeaa0a65871d81af8f63a8d3db1fc187ef244cf8f3", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "1e35ebbe-ca91-42be-90b2-492307d76242": {"doc_hash": "274444f7827e0854f5b1e761ce057cdf358d7087d5f7e1b3e53c7b90cb807dea", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "6e188452-b596-4e97-9fec-83e8a2886f3c": {"doc_hash": "822087e68f4509bc26344fa8617fe28efc1e9b21bc950270a0509c0a87324bee", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "195d42e2-eb5c-4a1c-a043-c145b979351a": {"doc_hash": "bf0f2317ff3240497b6671938a922e06d56aad2e47c2789bd5473cca977274fb", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "c32aabb8-5856-474d-9d97-3cb517500aa1": {"doc_hash": "e985147764223477f5e448631c8d61e78a53eb40dc06cb296acc14d8cc575c87", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149": {"doc_hash": "e72156a798c46e4bb37cfd811f3a6fb8aace9ef0fcbc1612eec0175259ed709c", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "27f2f505-36ca-44b3-8363-39352ffc193b": {"doc_hash": "70e5fb4196a8675624606dd54e5ca90ec9d8dc0d4f2526f1b4ddbb568f29845d", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "581915bd-e724-4767-af58-8e5e3056e6a8": {"doc_hash": "6ab73fb7d179bd41a6dade8950924834ebe2ff8bcc21c23ed13c3dfaef88c9b7", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "5f49057c-7d5c-4353-9e35-deeb3863ec90": {"doc_hash": "548961102414b8f023f26c089757d298cba3d15f32355c160f6c7f98289611f3", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "6f01bfed-41b2-4bde-8a0f-2d7b427d3831": {"doc_hash": "2f61c5295f826ddf8d40d605faf18f6ef4fa4f3f5228b83343844ad2a2bcc3d2", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "f6224d51-49d2-4381-b1c6-0084c473c650": {"doc_hash": "cc5cbd2b2c72b616f7e9be7511cc76e6edfda4111df2ac841afcd521dc9ed44d", "ref_doc_id": "c14cdd04-7426-4d42-b3a0-afed333f7a39"}, "e9fc336e-d917-485e-8371-8ae4680e7c81": {"doc_hash": "105bc2a3ced659978881271d359936a55f3e351404b0d41bdd1daf6b4107032c", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "b199681f-ed9c-41aa-8057-7089a04e3c30": {"doc_hash": "315cd19c3e48a112bf4ac20f12dbe59d62846012fbefe865c9342919e3006189", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "48c1e6c7-df82-45e4-ad1d-7942fd798825": {"doc_hash": "d7893385988ad9bdb2297e79ffb13cc0433198153f7798bacdb3d9bccdcc548c", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "53cb86e4-5764-4888-bd9a-ee90ec04c77a": {"doc_hash": "fa313118bf9c138dc6cb588df7609f45d85c116e917f30edbb63c7449c8655ca", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "299f5da7-3102-4fd6-aeb6-59106414ba75": {"doc_hash": "ef66fef83d326d50e8fff3c510b6755c06e316f3968014c7a0ef225e716d5dd4", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "9b182797-729b-4b76-a63e-fc1300026183": {"doc_hash": "c155275df957ef08c16bc204603aacc10cfe9f3c6a3d9d2adbd3e62e37dedba0", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "0e76f4d8-5e12-4896-b4bf-e0c3522eaaf8": {"doc_hash": "04103bb75d30ffa393f571580750bbb786caf883740f4bf126b02729dbcca48b", "ref_doc_id": "de8f877c-135c-48f8-93d6-33185f073d88"}, "212fce63-26b6-4247-9d11-287a7d2b7367": {"doc_hash": "c86bb83f8d144e00b6dce4a63f75123df3661b078bb21a1f840e35e145d7fdba", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d": {"doc_hash": "942f4f4f1e94fed897153d0a67f54e8498565994cbd47ca6bc44806e9791d761", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "83f248f1-38d0-47fb-a9cb-4542e39dfd37": {"doc_hash": "21c2f7c82e888126ecb7a1e67c7608cfb0eefd6b6b2acf7ef7b809e585b5977a", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "c9ac6bc8-db4d-4741-b1c6-992d68b83e20": {"doc_hash": "b62dee78b2ba0109c41f1e8bf0769134b3f108f4e17a9dbdf9f0c0889dc527be", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "1b82f720-321e-4919-895d-0ce027a2105b": {"doc_hash": "3a9ab833adc709b46c8555cf6aad2a4d23bd4c1adb684c8638f10a110088517a", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "a6eeddac-8500-45a3-a48b-ce54f70ffaa6": {"doc_hash": "cf0aed11e345b07df3cf9d66eeaf67c30629516e7555069b718b24f207a11cfc", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "53872eb5-3ff1-4983-b04f-1a57ff89860a": {"doc_hash": "90d5b1a27a96ee0bca3be5a383a7e56ae15be4d0371ace7ca1379e77b8dd3637", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "15bb4f4c-a318-4e82-9bfb-0856a7d7636f": {"doc_hash": "6dc353ac20f51b7d88a19d31a96e339af7e3bc153c4fa728a835d20a41ffec2b", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "f4b212db-888e-4085-ac1b-d36681b87cbd": {"doc_hash": "b0d355175900ae803eb0d8c87d7ae51bad75be59140645cd486a9c31b7f02ddd", "ref_doc_id": "2ea101e5-de7c-493b-8a0f-13d6bfc5206f"}, "0bc58a76-d20d-4f06-90f0-d92556beafcf": {"doc_hash": "82b66b9cec7ef774df88b5d6449e33e7603cd46b7e02b478e273c21c3b84a6e2", "ref_doc_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48"}, "3d8b43b8-c244-4e59-b7ba-25664c20e3bc": {"doc_hash": "cf1d8e7ddb07db62a853827f877bebcc836ac7f5604141b9f1d5acc6de05ceb2", "ref_doc_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48"}, "884dfe44-7b7c-4e52-80d0-f171db65a1ce": {"doc_hash": "f6caa420dc6a8f718683de16252c47c0111c9271af54a48f63c1ae663081d0b9", "ref_doc_id": "9d9d170c-299b-49f0-aec3-9f4861f10f48"}, "9075a20d-3760-41a5-aff4-70fbdaa13a5c": {"doc_hash": "280a1fd84581d35f1e101f0fe4d88db3fd3716a12c773356cc3e9abf59b33418", "ref_doc_id": "084141dc-7c63-439d-baf0-f83b8f42a34f"}, "f0214622-873e-4a00-bddb-b465478d9988": {"doc_hash": "d71f476ad95916cc8b5073d96e0270d194e568ebcb6215edffc170f88878876c", "ref_doc_id": "084141dc-7c63-439d-baf0-f83b8f42a34f"}, "70f4d31a-d218-4fcc-a7ba-a67404177909": {"doc_hash": "2c9ac9ec6d33f27b6d9af0dae6051792b17b6dbb4fbc60740c35df4b5291cd09", "ref_doc_id": "084141dc-7c63-439d-baf0-f83b8f42a34f"}, "5c9e8474-9dde-4482-b943-d6a1ea1060ce": {"doc_hash": "27065ada3101efbee38a9ca22aeccb24390c85e0f8724788ce0f58fadb51e10c", "ref_doc_id": "084141dc-7c63-439d-baf0-f83b8f42a34f"}, "af9d1430-b59e-41be-bbf3-6aeb42e730f2": {"doc_hash": "d8f9ea1df703aaa7480364d0137883c0d4427952fc75f694e468644ce8c7c06a", "ref_doc_id": "6186ab01-59a8-452f-8e92-4c9a35053380"}, "a4fa06ef-3be3-4d0e-ae45-1be5fd950c72": {"doc_hash": "d71056cc2563789bfaa47eaf139dd683ee3b97ec0b9ffecb3888f76dbb7b7c87", "ref_doc_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e"}, "d2fe7fb9-cdef-4716-9640-96e83d7eb883": {"doc_hash": "d785fcc35245503b022241aadb8ae175b871030a6059d09018bbddf74a2d86e3", "ref_doc_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e"}, "eb01b592-ce04-4d0f-b915-3c877d5db335": {"doc_hash": "e1e48bb5855e67b1aee78d3d209b5f9bfbcacd0a24f919a040407e84075bfd0c", "ref_doc_id": "72979882-6b27-4d1f-8cca-ebbc388c8d6e"}, "e77f1f2d-05b3-43e3-b906-e064ce91dd7f": {"doc_hash": "b93dc5afa1fc88d00809dc1a8ced83f25f202a042fe22b120ca469fd5c84b995", "ref_doc_id": "c5210994-241a-4790-ad50-b5c51115f4e0"}, "bc265aeb-2742-41de-b5dc-0751ed9fe6ed": {"doc_hash": "f5c4a326d5709882d5dfbc8491274c1a71e384ccb4548a707dc5bff5db7aa794", "ref_doc_id": "30086d84-e69b-4193-bf05-7de1c60412ad"}, "a98753a3-d515-4d53-b0eb-8a0a6d94f139": {"doc_hash": "336083598b8696792c78ec032a552641bf3cc14454797e6be3db33f243ccdbaa", "ref_doc_id": "30086d84-e69b-4193-bf05-7de1c60412ad"}, "ba2f1f12-b4d0-4cb2-91f2-86d64dc917f5": {"doc_hash": "8cc53c57189e5bf09f70ef9c27a726c9f2d8078b82c3f80c8c0567a091d4c69d", "ref_doc_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3"}, "98c51744-c2b6-4b49-abd1-3ca64beff32e": {"doc_hash": "96931752ed49e732eff166398f23564cda7d17dd8697fe83ab959f029f5e9058", "ref_doc_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3"}, "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12": {"doc_hash": "23c2ab4215f8ebe96797824dd715520ed4f4437e7a12bdefe24e86f79ae159a5", "ref_doc_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3"}, "914ae2a2-e254-43b5-9bdf-fb4b8641fa9e": {"doc_hash": "331b35e823839e0b8407631d5e43f7e75aca5c9e8181652e92d2943be89cab76", "ref_doc_id": "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3"}, "caef8f08-9993-440e-bb86-b4a4cf05ffff": {"doc_hash": "7bfa9aa787ef725b40d7fef3a067ae921cd5f892261f8e4493c01d03720557e0", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "4f9bf414-25dd-4493-8120-679eac39f9ca": {"doc_hash": "3d7fe53f734f1b7f3d35caf3b6fc32183d311d16f51f85d3b87a7be1f4aa9e8e", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "cff89d4f-9e41-4280-b656-f03fa32e15fb": {"doc_hash": "80671c9e377374689835accfb61b34c10e0c35681dddb291c5db65e90c5584cd", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324": {"doc_hash": "49055e60c2fb824b54d667c48bb80f83e3d05b7b2bfd928e19d68ecb8ae4b108", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "b02accb2-27d0-453e-be03-bf35d0f2f2d5": {"doc_hash": "79ed19a5c0a7922eb687d0fac6ceb3b483fe486ce1a0a08d6bd90e708951705f", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "cf428cce-f80c-4389-aa05-01e3d0af4546": {"doc_hash": "9682d76f76c0a2f9448e790f476e48b7096e42a76a2df8eb11a257588baccc9b", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "df47ad8d-87cf-4371-8120-c90276dea7de": {"doc_hash": "5606df531fbb5e8172a0384b305ea7328f80f0d893b9ce85f642e05df97f0631", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "d6c7a7b3-06a9-49b3-8fa6-42f86e57b678": {"doc_hash": "01e0aaaf3c67131e8324c622916d3604fd26e3204765826bd198325834022d81", "ref_doc_id": "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5"}, "bd8a9ae7-67a4-4c05-a714-675d9dde630d": {"doc_hash": "b86e342a286637dab7165f5b12f4536c0ced4036203aa61fc0d1e36d0e94823f", "ref_doc_id": "9a2d8868-dec7-4dbc-ab3a-b5b263ba4032"}, "805cc46d-cb44-40e3-9fb2-ef283e04ac0f": {"doc_hash": "f185359e02df7f6b95cc51a64b342746ad76961283029cb6a53a6927eb341bd9", "ref_doc_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850"}, "2262f733-04df-4fd8-964b-b47cca0f50f7": {"doc_hash": "3eab7d8d5877f1bd6c0700294f7e4d28afecc9527731013d9bb09b994ad6c115", "ref_doc_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850"}, "35a63076-c94e-4486-be6b-f4840cfce825": {"doc_hash": "bb5736d5e4c64ccbcc98fed7f9cc5fbef01ee6493935dc8d201b5714b2363880", "ref_doc_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850"}, "ed3f5b90-c58a-4802-a644-eec5df1f2061": {"doc_hash": "471e9472a5e0af2f9502c43b492c00e4f8261b0dfd50ce26d198537381b2dd00", "ref_doc_id": "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850"}, "e2717868-492b-486c-b3af-4ce4118ad6a2": {"doc_hash": "21b4bcc225480246ef4394406bd61c0a54c2123154add6057624e68e4b4fb12a", "ref_doc_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f"}, "7ed584f0-5395-4516-99b3-2a758411f9ff": {"doc_hash": "847acc6d1fb638bf9b920fb6fca534de320014de2c6e25eab8a6ed4c410d1e93", "ref_doc_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f"}, "46eb94c9-9984-4409-ba1a-3c8ff155ff09": {"doc_hash": "6e641a7ee075c3f1afbdb58d8071967dbbf5ce0741efcda0115185b147a118d9", "ref_doc_id": "562bfabb-7fbc-4981-9ba7-31f3a257b66f"}, "9c5f1e4d-e34d-42de-98ad-b55cd93ae655": {"doc_hash": "c9865e0d36135ae3de3196ef66d830cfa04692102317eca9b93dbc4337d8d2c2", "ref_doc_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d"}, "9d11c53a-f05c-4b52-8b3e-22170edef0c7": {"doc_hash": "d2a0c0a7f0551c7ecc1cf63b2b6d215aac0f196cc1e78256ecba9b6f19a20b73", "ref_doc_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d"}, "a30cb8ec-ad14-4d5d-93b6-0a8488ecc22f": {"doc_hash": "ad34b8976232c9c27aee8b177246fceb5312dbbfbd006946bb6e151c33cb1e6d", "ref_doc_id": "45ae8ab0-b224-4a26-b8e8-08630cadf98d"}, "450c4288-39c1-4b13-b3ef-f58b8c065aa2": {"doc_hash": "87f570367095f7c36f5e216fdced29d4d9c97008bcaa799fd324a4d4ba85cee3", "ref_doc_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef"}, "66ec05ac-10d2-4d9f-8499-2dde48ddafac": {"doc_hash": "d73dbb27e16f07b6f544ad5b119f3cc586d20dd08e5d253d5dc1b0623a073e5d", "ref_doc_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef"}, "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25": {"doc_hash": "b6e84a274fe95dce1f52797fb9e1b4ee40daae56300b45efa9a1dd509a71de04", "ref_doc_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef"}, "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f": {"doc_hash": "354adf741647acc13ac7a35f1ac1018f2d35407ca8c7f15c32c065466ac7ff61", "ref_doc_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef"}, "eb2b75e5-06df-4e9a-bb60-d9614a9a7daa": {"doc_hash": "5b05c1bd772fd86c083faad9d0cee451a55666032a47fb3b19d7abced3eddb79", "ref_doc_id": "0600643d-5e9b-4c31-8c2e-40b1a77047ef"}, "29d03f58-db09-4217-a1f6-b62c4f6188dd": {"doc_hash": "f474f616a457ac33c3518af048133d5493be19bce3c76e618b3530dde4c0e694", "ref_doc_id": "fe0506b0-8423-46fd-9186-8e96e16582ef"}, "07414d54-8ce1-4901-9085-cc5077350296": {"doc_hash": "0ac1e81474617ffe8d780c085cb4e1d9ed29ff1a836eb7e4a46f9fd383a94ef9", "ref_doc_id": "fe0506b0-8423-46fd-9186-8e96e16582ef"}, "40f0287c-4f32-4fda-a542-f960775dd199": {"doc_hash": "f893869d7e1bfc7c3932b3c67494fd9be9bffd7862b43056ba1ec76b5473079d", "ref_doc_id": "fe0506b0-8423-46fd-9186-8e96e16582ef"}, "6ac22d21-152d-4b0a-8999-af2b19dd00b0": {"doc_hash": "57d39e36790def181c64ee84d1e12f5fe13aa6d5b0d1074887247ae1b69b7780", "ref_doc_id": "bc817d77-a312-4669-8b31-18b183ba2e25"}, "ce1f956b-290d-45a9-9e82-24f6088c07cd": {"doc_hash": "9c194fe1982bb98881b95acb392484a9642500131665cfeb5bd6a29f6a3f6640", "ref_doc_id": "bc817d77-a312-4669-8b31-18b183ba2e25"}, "3081f535-90eb-4c5a-b9e5-324ae3b2a8de": {"doc_hash": "fde66202ee2ba5c975b46a232182e33d159cdff8405470b5167dd5e9d1f1469b", "ref_doc_id": "bc817d77-a312-4669-8b31-18b183ba2e25"}, "56acd484-534a-4a1d-a0c6-68d9ca9a5005": {"doc_hash": "b8034dd9bd8c3151c9f14ca314eba3b700b3d554508ff1a36e6a1b85523488fa", "ref_doc_id": "bc817d77-a312-4669-8b31-18b183ba2e25"}, "54977e5c-5281-493d-8c02-9739e51c04ac": {"doc_hash": "3239b665571e0417fde41781a6ed8b2c2b37cf49317b7efada0339b88b11906a", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "6d5908e7-f088-4566-8098-1e3b2bdfd4c5": {"doc_hash": "b4be1e56ef4b2f8408a344f549bba1027ed4399283ed7059c4f2ebb852c72583", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "216875ec-a94b-4b42-b9c7-468f61e9d718": {"doc_hash": "f7fab80b9c7101e056928e20fd76b44a3eac9ffc0091080c2e9fb2933c3c0550", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "96b74184-702b-495d-ac8e-86f725525dd9": {"doc_hash": "de2e6d5fa37c9b2583d854e321b475d948b7cde6c9059ea551b085501c3f07b6", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "fa720032-72d6-41c8-bab0-3b759e74aae7": {"doc_hash": "ed029f66bea680e94306c290723cf239b548f80bb1256f5c47bb2dd8f60efdb2", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c": {"doc_hash": "01105efae6d972583f181295a0a37b18b33f9c30155302d994053802c91d6a94", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "b670d600-ef42-439d-b151-c637377bdc4d": {"doc_hash": "41d3cf3c0e040ddf8654baeea78e01e63c9b1d8cfe64b0e4a17fe6a449f8f964", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91": {"doc_hash": "26768b7c81e0f72e4394aedfea3e9c09ba02f8696ef5bcd529248b9cb8a92a80", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "94627349-70f3-4cd9-9608-a87a682bd0da": {"doc_hash": "d367ab0bbac10f86d844a893b691aa6aa594426427cf9bb61d429a4aaa41cc25", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "3029912c-b1fd-444c-88f5-b987dc10908a": {"doc_hash": "58be5ef5282be280595390b2698d4a9ab0668eb98ebd0d35034171fc32138baa", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "7f5a643d-9896-4768-8640-f47ba5f9a0b0": {"doc_hash": "6b99d33dea672b077299f1beeaebb4066785618ec77f3af2ba010bb3f800b017", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "14ff7ff7-4504-4972-94d2-b53bb29f5d79": {"doc_hash": "d789f6e59096d1bb93f3d7acbd8034712ae4288ba1cfd627cd2dc255da2f118a", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d": {"doc_hash": "1571c14d7ea28720a6763c7041130555f649ce450ddcf0e49ecb9587b5cb9e98", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "41f9d009-7905-4f00-b3bf-ffcefc7b6043": {"doc_hash": "fc03f646b466e6e5e5dc471adc78fd60b4b43d0ba8435db3a659e8419d73c962", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "90f0d7f3-0696-4c64-8fd3-2183e12cd205": {"doc_hash": "2acc993079e6e1d1c150da05aef1425332380a35dcb7df8106fd16af2d864dc8", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "5e504a5c-91f4-4673-baca-4f7c90c4ddc6": {"doc_hash": "eb4744a638a7a4ac51cc6abfd04a4da38836706afd8991d1be3a3b47f977170a", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "45074c6b-2153-4bc1-9687-c896568418f4": {"doc_hash": "af90a085f2d3d0ae93c4aad024e3907fa90371bf9572ab037efe6257408bd12d", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "e3422660-6cfe-4606-aec4-3d64fcef0707": {"doc_hash": "b8baa9ad12ba953b8feb0ab752c4bd0030e66d8046da56315c802fe0c71209fa", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "58efc3e5-a5e1-4201-b990-73dc14aed8ed": {"doc_hash": "329bc77e9da21d0e675019879d0f7b77cef2e14b38781aa2105ae3a10977df3d", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "650f0dbe-3df0-4d77-bf06-cd6789c45df1": {"doc_hash": "9a353c94d2d311876c87ed4b913246de990b929a5c1442745d7b12b64eb205a0", "ref_doc_id": "d15be2bd-e256-4583-b355-58ff5c2082c6"}, "81af084d-5f6e-4f2e-be09-9e24413e5fa0": {"doc_hash": "8768097b39505d8e3619752a7d0088b676e7b6d55e059ac5d1d1510aecf09693", "ref_doc_id": "66c857d3-48ae-4a5c-adce-1277a61f70e5"}, "1f50409c-20c3-4e64-ac5c-366bc7eb463f": {"doc_hash": "3fbafa740fcbfb95502518231aab9c5eb96316883e5f215fd959192b52a5c51c", "ref_doc_id": "66c857d3-48ae-4a5c-adce-1277a61f70e5"}, "85a17421-de01-4757-8215-63db41f0f4af": {"doc_hash": "302c6e128a2bff12be02b1a929548faf595b9271f26727e0284e646a9a8b1c21", "ref_doc_id": "d83edd7c-054f-4c11-839a-7ec062a4c796"}, "dab55d69-014b-4d52-8716-963dec432e4a": {"doc_hash": "e7d9cdb122bb2237dea697187b31cdc87c13870180a289d5902e02f2c1fa0507", "ref_doc_id": "68dcd623-6fbc-4ff8-8cea-dae528a53e8d"}, "3e938f88-2e2f-4804-878c-87602638d550": {"doc_hash": "348a56b353387a6e5634caa7e0f711757bacadb390e1ddc5efeb8252a9a40020", "ref_doc_id": "68dcd623-6fbc-4ff8-8cea-dae528a53e8d"}, "8d73c0f8-e403-447c-82d0-7b687ba7317a": {"doc_hash": "df9850f9cf8c7ef9ed3828a23579986970d86d23210c6a58ec40f1f457f771e6", "ref_doc_id": "db861bc6-431a-4bd7-8064-ed51384bf951"}, "89977740-9a21-4386-ae80-b15d9e340e45": {"doc_hash": "712ba3f8f628ac28725ba53a9d9318194e14be2ee4d9abbb8fe4c8732c259013", "ref_doc_id": "db861bc6-431a-4bd7-8064-ed51384bf951"}, "d3273564-5f8f-4aa5-8023-c5b4144460ab": {"doc_hash": "6aff9080b78e53f32fd2bde05797c9cc9b9b84d07ab7fd1bdc4cdb68ba09e6df", "ref_doc_id": "db861bc6-431a-4bd7-8064-ed51384bf951"}, "f386311d-3951-41b0-a300-74998c138f0b": {"doc_hash": "428628386b3f670cc58abf7dda3b1e3a2b8edd9013773494f979bb44e9b0e41a", "ref_doc_id": "d64f6eae-c289-4b6c-a775-83b9f3b9973f"}, "9199096d-cbcf-46be-b917-b58795e1e85d": {"doc_hash": "656a423e0d63c64bff55bcf66dd84b71d8ebcd00ff9e54186a4afefc3ae011bd", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "250697d7-e9ec-4568-9800-9a690301876a": {"doc_hash": "bc4764b6d00609fe4379b37235aa987ba9598279350960cdd31b2284867fdfb6", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "ac99f50d-b317-4cea-a65f-5a8e08aafc07": {"doc_hash": "58f1e2281e4d1cb0288ae58313446281af1ebdd819c78d78d4341161019359fd", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "425d282c-28ff-4966-99d3-6d2da3576941": {"doc_hash": "bb8aeae35b02f5c13d605f0264afb8b31ebbaef92959f07a904b509173c2968b", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "acccfbb4-16be-4705-bd79-580fcbb19192": {"doc_hash": "63de1350075228cd0b000183dd575cd4384fb48a4492e42fed1a549327787643", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "63af897d-9342-4104-a574-d3ba98078a71": {"doc_hash": "7d191985fbdaca611b5fca03925aa1f1b3a70acd987e1f9b7d07376772462bb3", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "fb7d6c46-4116-4922-9e2a-9fa5320d7d43": {"doc_hash": "11f16744bf1f4fc4e75ed5c67ee4c68dbf791ec29e669865f2d95ce212f90120", "ref_doc_id": "d2077291-ebfc-47f3-ba18-e473d7819cf8"}, "c5ca9028-7a3e-4e74-ae2d-d83526a129b2": {"doc_hash": "a3e96d6023dcdeb616aea0b22ecb270dc5259113394882a1783bcaaae8652fca", "ref_doc_id": "c1472672-5c01-4a27-89af-170648f3c5c2"}, "a93416e9-7634-41a6-822a-bff4ec4c0aad": {"doc_hash": "211e3a6538df89e42b45d414594003e4c49fbc378ed5ba5f359cd0d125949309", "ref_doc_id": "c1472672-5c01-4a27-89af-170648f3c5c2"}, "39b91072-dadd-465e-86d5-a4bc900500fc": {"doc_hash": "b332e4afbacd5401c7843961079413d8a543446cdccb3aa7e155ec5332fcc85d", "ref_doc_id": "c1472672-5c01-4a27-89af-170648f3c5c2"}, "d68b2794-7e74-4a77-8fa9-3ea9ee0bdb20": {"doc_hash": "147c0664d9bd5733df6aadb3e8efa1a565ee493f51f9af455e5f6624c4a8245f", "ref_doc_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446"}, "f43b9185-74ca-4929-b69e-1d6519f98bbf": {"doc_hash": "1bc20505ef81bacc7411ca423498d2aeaa8960c91523bb958ea33d57de0389c3", "ref_doc_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446"}, "d0a29dde-dc6d-4485-bd45-28b09dfb45c9": {"doc_hash": "e12aed791b1ab7f7307b8a544c1e972c51dfd759a8f370dab2b7680d795867a0", "ref_doc_id": "a7da55f1-ef55-4969-a3c2-e17e047e8446"}, "b1ae7e92-afad-4b51-b241-c8c01f0a065f": {"doc_hash": "bea3a5e55727ed6f72f697555e542b171083847cf362008ad3f9796727318c1d", "ref_doc_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80"}, "7803a822-e47a-4f52-8048-7665d3ba1a8a": {"doc_hash": "a7464ab31b2a02ca5fc9ecda8a2752b509ec6749904239e6e1a95bf7166bf14d", "ref_doc_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80"}, "0f4a85a3-d5ba-45a7-bd2c-65694b9e5a7d": {"doc_hash": "3bc681c0285f389c2442a8dda22784794afc652d86392542d68d8efbc38f02ae", "ref_doc_id": "eb82bf8a-a0ef-4165-b77d-a0d30446cf80"}, "75e275db-7bb9-4a89-89a6-e7f32f1947a1": {"doc_hash": "9d722c36fb81bf7a17de672737eb0c8dab264f8ca33081b8d36aa49c7b39717b", "ref_doc_id": "3a12aec9-7bf4-439e-a185-db44c06694aa"}, "6b65a88a-ba31-46fd-a6a8-a4e5cd767f5a": {"doc_hash": "665c042d35d364cdcded7fdff6f8ce890c9ce851324cc46e87e2c64662ab17fe", "ref_doc_id": "eac256b1-0666-475a-9e54-846e169aca4e"}, "15e6fb12-d0b6-4272-98a2-fa30a1e89bbf": {"doc_hash": "e8a295261a5514c6c991ca3df327d39680b0f5de1d6502930f56ffced8ef41a8", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "885dcf33-a62f-46f3-b89d-f5b45fc2da58": {"doc_hash": "f90a53eddc3691b3b4e93b73c808157ff21431f2311b68a3c8aec597f7846db8", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "2acecfe1-9531-4b15-8dc1-d58354a97307": {"doc_hash": "f72d482574ce6ab807d5d4d5791b50b84805108109cf38353c21a7176f886f2e", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d": {"doc_hash": "ebb0e47aff03c6638d19880053e66c7a381946218d15314c29bad1ea1de3d547", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9": {"doc_hash": "2f0b7c7779924dca7d40fa7f5c74ea8e86548d6c6bf2ae4d5655f60b048679a2", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51": {"doc_hash": "9a0fdc04091fdd1f3a6a6191bcfd5ee117501c4c68bb34a2803118ead0a3f60e", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "49d89676-6ab1-4925-bbdf-9810dd300d16": {"doc_hash": "3cccad985d9eb3965ede5728bbb87f0f5224290963ecdcfb37d875c3641a9ef9", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "e1c9d929-ceaa-495b-90ec-2be598d7eeac": {"doc_hash": "05d403784eb33cbcf3e081da5fd7537525a3c4f3ef8c5ff36317add01271b964", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "3a57f66e-2d2a-47d7-8815-5b2886a21765": {"doc_hash": "82cd4b8c6b31b8c6234e74597f9da66df6c8eb5962017669354f412d7b6a6203", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "47bc126f-c443-47c4-8594-4b0dfbd6218a": {"doc_hash": "c5687853ba17da96808d6c05bb6921392642a5ddc88bee587bd050ea17b39e49", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d": {"doc_hash": "b739923bc59e3a18d18bd51221b0d6feb5bf1b248318d8032be4db5a86427a48", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "3746cf64-c9a8-4295-bdf2-5f0963f0f314": {"doc_hash": "6654d760fb1c3c06315087b1975da475ad487eb8785c561af16969440b0d50cf", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "1412e3db-bcdf-4986-8cdb-28936981f352": {"doc_hash": "1386fbf4f4494d488166e511794d61b25950eed500d9fc0ee447d68fa4337989", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "ed076df8-c981-43a7-be8c-09f5279d7ff3": {"doc_hash": "ce9f26259c2e0f8b4d1fc34ebb8deed42c0f43daef603a03c751b300850a205d", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "826aaf50-d313-4f4e-9025-02193253e6be": {"doc_hash": "372b329b7f5aa5c9771553f4a488d90421b0e3ea08fbb1a55e084a83e16877c3", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "01e22922-8b70-478d-a788-16ab17e8ecef": {"doc_hash": "7b8b575c31b41fd64932cfe9e07871283468a9b4e4e3628818fc280b29ba6283", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "0023e383-909b-4ee4-85aa-7599958d7527": {"doc_hash": "2cb116962e86fd2d7dc0aed899e49b7ec742ae6ea8ba8060a9cd8a82c5155795", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "c0eee531-8db4-457f-9843-2c7e09ac7214": {"doc_hash": "aef3668da7dc3b833375e1cc3fb7578fe0bca775b2ea809acbc22195feead791", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24": {"doc_hash": "9e8c6e744920cf5404e40b1022feda6150c9e870579b0c459fe85ee3e85d6be8", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "f64e649e-1d29-4712-ac0d-91e1d1ee87a9": {"doc_hash": "0c562c13b57550311ec7b0bbbc420cdc810bbdea7d7b0960bf68eca9e025a3d0", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "c49f596e-8e81-4313-85af-a9acf14e9f6d": {"doc_hash": "af5af83f58e13b1c5c6bee6cb7de5db28665541d322f317561a200b8d95ddd32", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "1279adf7-b2d8-422f-8847-527e98322dcc": {"doc_hash": "ab289a0cd210dd576c7badd307d29fac8b51663b65e8b806b95c7692f07faa84", "ref_doc_id": "f67f38a6-5475-4e4d-9a07-1b83454b181d"}, "1273289c-fc9b-4033-b448-cdeab5fbc2bc": {"doc_hash": "393b379e273aaf10689f9d76d89d6e322226e5b68f171b72e14bcb63361c7645", "ref_doc_id": "499459c0-1eae-4c14-8407-a3c06a2a995e"}, "2c868e82-8168-4125-b12c-ad86e132e347": {"doc_hash": "24dbfe789911c9f45b67bb56e48dcfeebbd4662cfd391054716cccb4c25e30a1", "ref_doc_id": "499459c0-1eae-4c14-8407-a3c06a2a995e"}, "0ad77afb-da28-44a6-8a83-354de0a6378b": {"doc_hash": "671e5c922d5fde5b34d0cbdf6d5e63b39593f38957463e2f4c452e71fbba0132", "ref_doc_id": "499459c0-1eae-4c14-8407-a3c06a2a995e"}, "87a6aa77-44f7-452d-a549-743f90968e7c": {"doc_hash": "cd1e9ae962a9a969e7367d34a3a18f18d4c5b76d25b5c00a7b8c6358b094c59c", "ref_doc_id": "499459c0-1eae-4c14-8407-a3c06a2a995e"}, "2be26acd-231a-43f8-9141-3d15a72b5ba7": {"doc_hash": "cd06e23e3e9a4338f190b517637222daee48ef73f0162035c1503b854c29e5eb", "ref_doc_id": "499459c0-1eae-4c14-8407-a3c06a2a995e"}, "8aa8b977-d60a-404a-a8f6-5fff30c719a6": {"doc_hash": "93145a48c15c574bece46b11ec0940a2d5d1984fbd562a9c796cd48b70100a98", "ref_doc_id": "dab82f69-404e-4103-b889-0b5aa1e20fee"}, "719512e8-e973-4bf2-be8e-d88ac2670c58": {"doc_hash": "00df337ed47847f1e16af5ff75ea225526a24bd06eabdb4378053b1a1ef07750", "ref_doc_id": "dab82f69-404e-4103-b889-0b5aa1e20fee"}, "13aefc31-91e0-49dd-9b83-438307a3ae63": {"doc_hash": "7a0c38e37eede84230f4ecd3e00a65adbef0816aecdeb8e87a23f99011955ac1", "ref_doc_id": "dab82f69-404e-4103-b889-0b5aa1e20fee"}, "f98f4b3a-0032-4e35-a2ca-b20652e148ca": {"doc_hash": "58462c93fc50c487b3b98add5fffcce3df4482b9a81cd4d31e24a61a8595129e", "ref_doc_id": "dab82f69-404e-4103-b889-0b5aa1e20fee"}, "56f04cb1-0605-46d6-8302-f1fc76859eda": {"doc_hash": "e312ad7f97e8c4389f14a7cc88f97de5d5d92784635ae55b4e95b3eee36fd8ab", "ref_doc_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e"}, "9f6665a4-a446-457e-bf7c-98eaa134b705": {"doc_hash": "07ce406318694b0e3847162f8076c213e7a2ff76a4eb3a1f48dd1ed705c6167e", "ref_doc_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e"}, "a906b09a-c555-4c7f-bde6-cd9d3405fc39": {"doc_hash": "e2ff9b2213aa6ceb8f60971b853b7b866a4753271390fc50cfce32c4e64908d8", "ref_doc_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e"}, "03cd6271-0521-4214-8497-31c035e350f7": {"doc_hash": "442539b3a23318358708e2fc9e35c0742768a88195d59733f49b78b6496d09fc", "ref_doc_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e"}, "bdafcb12-d145-4dca-aa90-e8c17fe91e69": {"doc_hash": "80ee6d9df40d284b08f50a174cb0a1fcba2f403c13fe91eda4a7ff5d6b5b238b", "ref_doc_id": "767c2391-9e2c-4f3a-a7eb-5aaa9637121e"}, "5d70d0c5-6741-4ee3-be97-d7addad176a9": {"doc_hash": "190977fb4a72f40eab4ae97dc07e4d27ef76e1e34bf643e03eecd60866f32026", "ref_doc_id": "3606c75d-ab6b-4cdc-b888-b83b69f20226"}, "281d4178-333a-4f7a-9530-2446cffd87af": {"doc_hash": "63c98ff6ae2cbe9f77643be7e1520851acd0179ed873cfebd3de9508d717aa46", "ref_doc_id": "3606c75d-ab6b-4cdc-b888-b83b69f20226"}, "7a8b4973-f29d-49c2-9640-756ba01cfcea": {"doc_hash": "9c23710c64cfaf3df6c92cc927fb4b3401db8f202c9cb585d43c8d685b01c0ce", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "e5d5e03e-d97b-40b2-b87f-9487762d74fa": {"doc_hash": "0f289802d0cffd0a1c65a8731ed5b326f552b29a78d5a2cf658018772455fac8", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "3b0cd85f-a162-4705-96a1-6a037788b466": {"doc_hash": "0b82bdb1315d968256cc098aa052cc7b08c5e387ff6395b6d8e184a3c5b3691d", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "a83114f8-c47b-442c-99e0-f3b7eeaa0446": {"doc_hash": "64f644de411947561e4e09a34a9af847a1374a18b5d4c8ca996fdbd487fe2788", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "b232ab3f-ac45-4584-b068-8b2ebcefb319": {"doc_hash": "bad4481f974b2b66bb249334475ab993b7039e790df8836f15cc769c858ca357", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495": {"doc_hash": "409ae584429b640b93b2ace9ccc935a904b4c3b674d6a856f28e8f033f8bd6cd", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "b26440e4-151e-4be8-a3fb-d962dfa07735": {"doc_hash": "09b8cb38364ee766adcea52762d9f791f527727e6061badf565a78b89679554d", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "134d560b-534b-4cf8-9aa4-db2ff51783fc": {"doc_hash": "9480d0b0d7fd41f505f6c5a8aaccd0ec145a146600bf41b3bbc25a6d33cc0479", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "79c62728-d909-47c3-93af-ac42a342421a": {"doc_hash": "9cee094df6af8d044051a0958a1df4db5bf0328cfbdadefd75bdee9f57515b32", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "ef2019ac-2c5e-4dc4-8c57-03fbc2ab2717": {"doc_hash": "ddf8d90b1e8c1772a7861bb6ebf01d7e5fa56efc92756324a55b942e1a8f0dec", "ref_doc_id": "8b75aa64-b3ab-4f67-9bf9-053a48e90618"}, "46ea7945-a51a-4df4-801c-e5472947879b": {"doc_hash": "3dfdbfaf131021ae332c1bc3f1aa86d337fc38ed4774cd89f1636880adb970cb", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "482b6b38-50a0-4051-9aa6-c4e19e849731": {"doc_hash": "36dbe54df30bd6a6e85f84edc3763a8d738883d2189db31b30b5ebd0bc067e50", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "6af8334d-5c10-47eb-b958-01245c642045": {"doc_hash": "6b608d7ca75cfd6956a45cceb4990cc607e3b5f84389d2bc701bad814f1fc475", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "95388119-7e42-4422-b586-42508c229656": {"doc_hash": "88afef4cd0885da9391eb82cbef11cd56e65f9c1a9bd6c68cddbdda0dfb65927", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "76dd3788-7d2a-4673-b311-5db7ff85af10": {"doc_hash": "36baaf41593bfb6a620acf18bafd286caa6b0c07636407ee4510e27743e9dafb", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "86d51033-008e-4449-ac1b-48243989061f": {"doc_hash": "44c2b678cade6256d93de284986ec8fedf4c6adeccd39c2754ef5377510aaced", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "ee6121cb-9f6e-4e07-91c6-eb8c188d828c": {"doc_hash": "c2968c02e3b31a0f2057b88068e27f78d57f5d9d7243a5426921b9c9fa0d7346", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf": {"doc_hash": "8a280ded403c299ee740909efb6b0aa8e9a0b9d8437e0f0fc4ebbf76e1c3dd80", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "c33f9b9e-c68d-4e74-9889-f7d72abb18cf": {"doc_hash": "5537d5d317ce4dc4ea749ddc38f9978b24fde0f2a86735efff308c258640f595", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "8c6db6af-a0fd-48cc-9238-22aedc44f448": {"doc_hash": "5e0622e6ed466165458679d43f55b05bfa4b6ff686cb06507d3ccce6b614ff45", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "4b871c72-e07d-4798-8ed8-523619e4ce35": {"doc_hash": "8c91fe31eb20eb924ef1eab24349f1a47a34a8f2f34b3fd405a87db54bce8d03", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "367574ac-7dac-49af-a258-9e6f714bc7f4": {"doc_hash": "46131fbd82e0d880a1f7a43c6413b35c793afe362e2afb7ea255361474b68bb2", "ref_doc_id": "fff1f269-d283-4ab6-9e89-452993dee542"}, "0fdb1951-753e-4363-bc09-c75013a8347d": {"doc_hash": "3e1028fdfae47638a2c15da0254bdae9d510b754736859d34f5d0b18b70f0d66", "ref_doc_id": "0e30745d-6a13-449f-b2ff-49111dd11593"}, "4da4460e-ba0d-4870-bfb6-d1189eb3e273": {"doc_hash": "1661f92ab409b1e372576532e19bb5060f14947a1c64e70b9c605f424e41a89e", "ref_doc_id": "0e30745d-6a13-449f-b2ff-49111dd11593"}, "1a8d1f33-39e2-490d-a9dc-59d3d08606c7": {"doc_hash": "6ee143c09a7e49cbc0a6216f8ddbe78861c3969a6fec36a862cfdd7e2d82b00e", "ref_doc_id": "1abc05dc-1511-4dbd-942d-33d9743e447e"}, "f1adcaba-78f7-470a-8120-b262d074c3d5": {"doc_hash": "4ccf272ad5b2c5cfab4be53b6ae561026dd8d525c5ee5a4f7aef02484659334d", "ref_doc_id": "1abc05dc-1511-4dbd-942d-33d9743e447e"}, "7ff7be06-871f-475f-9a7f-5f9365eb2035": {"doc_hash": "4f73694083c067b2ea5df65ba9a0436263b5b097566ca78bdea865414bdacefc", "ref_doc_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d"}, "b3b055d1-74ff-4f68-a0d2-8ce623ca8882": {"doc_hash": "18d9b52a84f6efe6ad6b4b48ad7983fd30b1b3a5993aa1462292a5cf7fcd80da", "ref_doc_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d"}, "086ecdcf-2a9c-4548-b7c6-95f66ede7470": {"doc_hash": "4109745560e3bb80db98427fc037ded3eb55cad26dcf22a450383e85786d1ddc", "ref_doc_id": "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d"}, "1af3f33e-202a-4559-840d-0ceca2b7a76e": {"doc_hash": "456ab688f9cee0d566ca809c012a294959285945cf8c4ea9b1c0f4e19616f33d", "ref_doc_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5"}, "b816ffc8-ecd8-401e-abd4-60a17bb20c7a": {"doc_hash": "8d68aca56ff3c4caa8bef723ac2b2ecf3f9d9bdcca54497c2aceabeea33eb118", "ref_doc_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5"}, "5ca62ec5-9f02-43aa-8a56-193b27e98481": {"doc_hash": "daf65dbee507f7c44cacdda5e02bd41893849bd9888f07f2bbcd1969dd467da8", "ref_doc_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5"}, "16dc2907-662c-4f15-a7b0-9345fed61a86": {"doc_hash": "b128580737b17f13850edf424509dd425e6a629b99cff7f84debe345b784967d", "ref_doc_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5"}, "97e01569-cfba-4cf1-a30a-18208b13f294": {"doc_hash": "9d5d1456d7d2a2f9ca74b599dfa7b2357543afddaabbfb6ff525d27a18170f70", "ref_doc_id": "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5"}, "ecf4fde2-de90-4022-9297-cb438c2aaea6": {"doc_hash": "973dbf9797f3684b43504d921e9de1136a34b1d265df26772b5a9771c1a378ba", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "2765120f-652c-40f3-9b46-e6aac60cf7af": {"doc_hash": "5e1b44dd0c863610ad153e4cd0a3c220d64c58216ec6949a4d8ed72d59871342", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "d422d79c-94a8-4722-9d5f-f101c15c3f97": {"doc_hash": "ba8a748e122af386e0b37e8e1c9dc5309f0235f60951ace26f26c012c97bc3a0", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "fe519d2f-6b22-4403-8d6a-9b6596554606": {"doc_hash": "3db40ae0f30a760f1e2ca71a096d1fab4cc6ce00fdf5919ba5507573fa8b6273", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd": {"doc_hash": "cd38a5260e79633bc797e4031dd7d9eb8561a32a1a4fb8a94cab63ae3727c9b8", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "237c4945-1d4e-4323-bb75-61855015b4ae": {"doc_hash": "5794c24d71be0e65d7c5b845f5e8e5b57fc78fd28c9920438ec4f80b94aa9d5a", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "01bf1161-e77c-409f-a69c-e7c4b525c736": {"doc_hash": "f7198083fb82a53a778dcfaac00a8fdfdd15e9da03c4631c2c66a5f7bddfdd6f", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "749bdacf-9ffc-4c55-88f9-befd162b10f8": {"doc_hash": "8942534e15b0f5506b547e8cd23b0ae6f9d399f7c690152d2fcf274a8fa6fdf9", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "e59f6bd7-6b2b-456b-b6da-d35e37685a08": {"doc_hash": "bd6903512d9cbb9cd29750fe83f0ead91f616e0357f34ed4a4857085d7d11678", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "d763b365-6dad-4856-98c3-12b870182d62": {"doc_hash": "db846a2db1934d744bf8351e55197c799ee1e7a6046b0c2058423b98c4345c43", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "9fbc36a5-609a-4e69-9406-9a0f442af7b6": {"doc_hash": "62096fe35afd98066e95f86627e1f965c51eb146766d7479926cd0fc081a2adb", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "780f5f3c-475b-4a0f-a711-19a4bb5e1adc": {"doc_hash": "a7b03cfa2fad11949f7f5f82b12b54410dbb1e8deb875e8eded581686abf6e11", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "36d68141-3888-4e8f-bb97-4685d9f95e20": {"doc_hash": "fdfeb6aa5e7b894a0edf1b27627a32a4b251f2f8c7e71ac0908cca444dd44fd9", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43": {"doc_hash": "9a21c4c7535b77749b7ebdbce752b0eeab4c542b9ab4fddd346385d91714ea31", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "7a426faf-7984-419a-b214-fcbf342762d1": {"doc_hash": "f9b3079e33461a9f176d9839960e1da23fcceb4651bc363b2c848d28e2633368", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "9df2521e-410a-42f0-b3d5-fa0a7d6e5633": {"doc_hash": "945378d3f2ce52383caaef32e91c6e00386e64eabce254ce90085588754c815d", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "6d720654-e0a4-476a-8e0a-16a233d6a6fe": {"doc_hash": "b2f3b0d001322b9ead20ce5840fbee1cc564bcb9d08c8499f5e5e5e751fb1f68", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "915fa216-8245-40d1-b086-bf24b9643d6f": {"doc_hash": "cf648e8e810292648a484b6bbfdb56cd76edad0fc5db252cceed47f657a4dfa3", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "33c6d587-91be-44ce-8b01-8140720d1379": {"doc_hash": "d955840edf58cb65fb480ba93707818fb935e0464c9da404bb261dc1f0aa59ad", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "2da13f2d-35a9-4822-b2c0-1038ffd7da0f": {"doc_hash": "de70bfd1489d594b9ff8bf170236406e8c07318110b088b447a715c4a5a2ca8c", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "6fa380f8-d237-4cdb-a4b0-82228e87a2e6": {"doc_hash": "d1a74c9d081bac63e3fd8ce415edd4fda0045df76e4e0b92a6ee9dc8e62ac1a6", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "1241b2cf-ac6d-4664-a78d-4e73eb87adce": {"doc_hash": "545879078809f18efb1687da7cfdbb059919de9bf0708a2bff0bb902fb239a6d", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "938c83f2-a91e-4863-a6af-b59e09e8a80a": {"doc_hash": "0caa5d0cd3cc141db0ed3d787bf24596f06d35a68a47a04f9654db4d43dc627e", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "136f8e11-154e-4977-bc05-478e46a2cb74": {"doc_hash": "42db8bbc3f935225ee1d6a97d413486241d01fc70a8399d776eebe07914b012e", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "039ad860-c36e-413b-b1b8-ca552c7887a9": {"doc_hash": "d8f2641581ea6a3dac7f219ded4723d2efc4f28c8b17be7f06345e411a7eac5a", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "f83d2470-5a28-49a1-9c00-396980c40374": {"doc_hash": "98cc65322d9b28755203970cc95181df5d61c6ee6ac3b320f21358fe37f5adf2", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "10b4bf52-6f46-4db7-b918-f700ebf374de": {"doc_hash": "7587e16044a80d874217d9aa3bc50cb72d8b2a73b8c341358eb9492e3c792019", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "68d433c7-8c45-4b9c-95d4-52f31661b22a": {"doc_hash": "f605bc50a5f58843bdbc332865f30d21ef2a52e4d56ca631625099ccaa1283bf", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "1326a1eb-ec5f-4fa6-85b4-8f381d386aff": {"doc_hash": "bc6520eddcefd337d42586095f80f6ad39a25d9caf8afd701cc975358ebae289", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "846178f0-a9b9-44cc-a381-c151c9154979": {"doc_hash": "ce485cd280b9cd1298fa82a517060460658f01bd4ef8dc63245504b2ea0e78aa", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "ed4819df-3646-4dd0-9d82-e782c330c257": {"doc_hash": "9c6b4095e9616c1756fe7244a1a9608828d1f4dc73fdabb46129d8ffecec66cf", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "d8c12cbb-6c3c-4902-8337-6102533c5fcc": {"doc_hash": "76bc2706e064f6bfc63b8e7784a4ae9e2f812707da2d605df245c3bd3368c1ea", "ref_doc_id": "81e46d25-6e45-4ebb-9f26-32f53a5f321a"}, "59291610-b716-4408-acbd-fa89dcfc5b33": {"doc_hash": "f9d88d0b16f7edb3c5e0f600c4263ab047f5683710cc952a48a0183f27e19eaf", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb": {"doc_hash": "c4805984b3a3ad6643bc428cf37ef76e2044b980345a8fb1d6d5a48b82b9c617", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "541703bd-2703-433e-9609-cbd3dbe24db7": {"doc_hash": "ee8e4ea108324a3053e112021219e38c9ce8e54cc4c8623529a5c54c06e82c50", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "76f948a9-ea5f-419f-b978-859f0033722b": {"doc_hash": "fbda15ea065fdb06ad513738dc4795e919756b179da0980b1021345c88653b62", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "92c62278-2f80-4202-b386-37aeb3a4de1e": {"doc_hash": "fb16882f2a4a158a5fd0b2dca133f18390a96560db32c0a961447e6ad02e4827", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9": {"doc_hash": "2e45c94a7c8a855ca5499f61f813ed2234c4f2969bfa55ec4d323c281782d51d", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "38a3ca5a-e710-4cb1-9baa-656fe425d34f": {"doc_hash": "f131a648673c369bc7c7c2be5aba2d919841661fb051dbe24ebd5641c3a6bf90", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "2a30947c-40a0-4510-8ec4-e170ecfbdcb3": {"doc_hash": "27f13d63d0d39fa7cc6f412bb9252b253de42d983d6c5e1f54d09902d191bb99", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "97f769b0-c72d-4de8-aa7d-3ab813317daf": {"doc_hash": "ce0c652ce18c9115fc2354d91929d433c865e55e3e91e4981d0ce2390b833d1a", "ref_doc_id": "a4096975-d77b-407c-9da9-30b956c031d4"}, "9eb4e3a8-aa4d-4f80-8c65-0b127b33030f": {"doc_hash": "b5f665c59dcd736d154f4e7dc2800e9d59e116bb66ba4183b3993fb5032a322f", "ref_doc_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd"}, "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a": {"doc_hash": "039abef8995310705785d162e7f7c0ee3c0e68fd4dd43f486f634881aa5b2ce2", "ref_doc_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd"}, "48455c8a-d570-4112-9504-bada8dc6e979": {"doc_hash": "aab0f8b30e157be11ecda0e24dc35177fc177565355538d7d3bb28fc2309310d", "ref_doc_id": "a70bd271-cf66-4fac-8e84-cc6edc1687cd"}, "ade28c11-b293-4a6d-a618-fd8abae8a70c": {"doc_hash": "08777fa952e0e950cfcac179ac44bc21b99532b376c3da649ac03e128b718389", "ref_doc_id": "79eabc9c-ea1b-4500-aaa7-cf6c07321848"}, "9f2f163a-528f-4adf-8cf1-06cf86d8e9bb": {"doc_hash": "a5d4b44305a9ec46a16956d3ac6a899aede612cbf327ac47d20814520ce19a96", "ref_doc_id": "79eabc9c-ea1b-4500-aaa7-cf6c07321848"}, "3aa17b31-23b9-4a99-9e2e-ca8cabac1d7b": {"doc_hash": "a607ab6b86fab183c65616d244db62df7647f29dab1afce25893e684a2f06475", "ref_doc_id": "39827082-9c24-4681-acac-35b3790b5d93"}, "f661a7b7-78d7-46bb-94c1-5d831b696916": {"doc_hash": "36387bfd8706e2c0dd9701c0a49c1be16e45407b24a198fec3c6aa075648bf87", "ref_doc_id": "39827082-9c24-4681-acac-35b3790b5d93"}, "7508486d-969b-40fb-9686-5b1ee7ee8b67": {"doc_hash": "b04aac04ab0b707f4506fa9b3d805a4d392033d866f95b4124c3ae25e780235b", "ref_doc_id": "39827082-9c24-4681-acac-35b3790b5d93"}, "45b1882c-8fc6-4bbf-94d6-6f608427c56e": {"doc_hash": "ce461686e0b8171cd11892264422c7ffbb8367f925629b3c0ce2d4cf4b2994c8", "ref_doc_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb"}, "060df00c-f7ef-4320-a117-f0f965390e00": {"doc_hash": "09bb75ed97c6d85fd2c137aa4999ccdb34cc8549b35b2a9da455ccabaf60b65f", "ref_doc_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb"}, "c67c31a1-0958-4daa-bbd1-a0006fe6062b": {"doc_hash": "d3d4044660a2bb6ff91a9cabb4f2fa95bf79400c8e6bc5e99f8a7a08e8b33671", "ref_doc_id": "324fcf5e-ffc1-437b-bfa9-277a498861fb"}, "525668e7-fc3c-4f4b-ad48-a4de174bb430": {"doc_hash": "f324a7a1b09adb1077c3317be500d47da7a797343c6b8332407a6c016d10e209", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "dbd3b131-6a97-469f-9230-2bd61b8cd395": {"doc_hash": "96e7b0a796a8bea55f9ad002891ac4f630bd2b5c731c58f2a6f70d54005bbc28", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "fe242448-1536-4fff-afc7-60204a5a93ee": {"doc_hash": "379c04eb722b893276bcbccece1a03ce1756aa33481448a8fc16856edc597a65", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "3506cadc-4268-43f9-be20-fbab5927af77": {"doc_hash": "601f47ac45624c76f524f13aa3db0c8ad2700a8398e5d0dac1566954a3234e47", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "308687fe-612a-4817-951f-83bbcd7daf0f": {"doc_hash": "1b360028b151a21e1d6a29eefaeefde25d066eebfe466d19f0c9a036a8219752", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "254cb904-06c7-4ca3-b050-d77a2aad1850": {"doc_hash": "dd4886bd1619cd702d423acad7f0b74c5d4df5d4554fa9dd3a3d8252f1d08749", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622": {"doc_hash": "3bee1ce45071cd798c1f536a56f8d1502d17c2c9e01d4ee7f7aaa770ca215e21", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "181f60b2-0981-45b3-86f5-678ef51a4f6a": {"doc_hash": "84e875ca428894584e326d3dd39e9e32bd02ab850891aadab6ae962eeb532a1a", "ref_doc_id": "93327342-0e7d-40c9-93c4-61c235a929b5"}, "97d09524-db42-4da9-97fe-828869c26ddf": {"doc_hash": "a3c277b0b9981e506b30cc9f2337506d964253aaf49eefdb3a63ab22d65cb0c9", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "4fe749b4-e2e9-4283-a7d6-770472593d5e": {"doc_hash": "1fe727202c76382b74a23bb3c17e765b4e435aec28d6c4b6afa26ff9edae3665", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "bf99e727-e285-4735-9092-430afa29045b": {"doc_hash": "0120ee489a2f34fa657fa1259fea1d81d7e7fdd206dbec951e3dc68f41f0de34", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "00dee452-91d2-4765-a4fd-698f75e2c078": {"doc_hash": "87c66313805044e6d9d5a1f20d5e7bbce036867be208ec1a0bcd93b4df41601b", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5": {"doc_hash": "68c4f5a1227858944a547dcf6157183e95bd10cd570494f179aa6498544731a6", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "30b6744e-2105-4ffc-a061-9c26f2b40993": {"doc_hash": "01e886bfd15b7192550947ea4b5e4845a50504a788efe0bbdbc99ddf6abfa998", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "af1aa2f9-d4f1-4f54-af44-33818d56cbf9": {"doc_hash": "cc07cfa303ce86ed12d5d611ae077abebde24f22c49f2f01f4c09337c9f88c7c", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "8368743f-c15f-402b-a1f5-395b2a5a3636": {"doc_hash": "0e462ab2ff9aea511f3ed83bb02adee132f68c3300cc4db3993bb58c44f82674", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "e20f1cde-5ce8-4fee-b464-a73263033971": {"doc_hash": "599e019631a95cb9c2f12258dbb5b19d918d2609c2f3093cced215407bc3bea2", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "782d07b8-7798-4e33-8414-db34a1a73649": {"doc_hash": "b6a1fe2d5fe84d756d9f5c664d8d3789ec34bbda0a57f3a2f9130f1a156ba6f9", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "2cca49bf-aff3-44dd-86b3-c2ee6e545d88": {"doc_hash": "6da3a4555a2e6fbc1ffa49e92abde6e257a2b614d8d8992537badfc9ac8435ff", "ref_doc_id": "f9cd958a-b304-4d71-b315-93ce645674f3"}, "9ad9d8eb-2cc8-479a-97c0-1eaf9c0d3943": {"doc_hash": "d9f5c3b07ff2fad479571c77e6549cba86c70a53deecc903ed9a803c2310ca85", "ref_doc_id": "7ead75bb-d3a8-445e-97ba-1cda4bc4902d"}, "71632bc4-a81a-439f-ab1b-89eb3d45505d": {"doc_hash": "99e619361f72051dc47a68d7d98eca4bf5f568ee7cf9418a56c5ca6511f6e6f4", "ref_doc_id": "7ead75bb-d3a8-445e-97ba-1cda4bc4902d"}, "c998f679-5fae-4df1-aad0-784628a87ae2": {"doc_hash": "c222614cfb959967d782e06b4654925be3f8faaf66c17f7b4efb621d6e5b17f3", "ref_doc_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9"}, "d27617c5-881b-4120-90bc-dabdc6033e09": {"doc_hash": "d2a9c77c566ee8972cf926fb45fcf4145c49b67035b30649a4c6f2caaa343163", "ref_doc_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9"}, "a1aca820-0a47-44d6-8304-2d03d42941db": {"doc_hash": "654ea35c9361a53bc72f577abf9e9b85c95f2dc379b0eb576eafcd9f9cafce21", "ref_doc_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9"}, "243d45e8-77d6-4656-9489-95a92f7d048a": {"doc_hash": "5533efc0c6acbdddf978ae18f28542fc9cc0de05541ffc1af86ba2be93ea4379", "ref_doc_id": "018a6708-34f5-48fb-a85b-f0bbc3c865d9"}, "add37215-8019-4071-bd22-1de8bfde47a7": {"doc_hash": "8dd59bc06218b856a73c707975db07cf6bc357ad9ca839758e5a72908509b599", "ref_doc_id": "89740441-6750-4968-830c-d180480bfd8d"}, "6327858c-5a8b-4931-8135-1ca9fc8ddf8c": {"doc_hash": "97c1ffc3be9e72409d4c5d744fe21716edf85401ef9d336d9be2e3a12a6d28c5", "ref_doc_id": "89740441-6750-4968-830c-d180480bfd8d"}, "53c6b70d-6a48-4dce-bec6-afad9ec4ed33": {"doc_hash": "5b08212e38a2972283a40ab9a515346f5990c0f57a41258d82583fd23537afa1", "ref_doc_id": "89740441-6750-4968-830c-d180480bfd8d"}, "236b4b0a-6a1c-4646-88f0-8903296b45aa": {"doc_hash": "a9844dbeaf0f13be0e63d852b1bc7cee77ee84d501175d98b67554def35e1a00", "ref_doc_id": "89740441-6750-4968-830c-d180480bfd8d"}, "9da90069-240f-4c6a-b078-b828aa69b913": {"doc_hash": "e3c0474f660fe3a82d14c90b305a6c939d0acf6d26c0f16e211107a7392b4645", "ref_doc_id": "89740441-6750-4968-830c-d180480bfd8d"}, "93dc479c-c731-4e36-9c6c-a8ab1b5cdc2d": {"doc_hash": "274a915dfcdefeaffabe1448a9302eac1d1ae332348da466e288d13ec9ede04e", "ref_doc_id": "91afd822-25c5-4c84-8b37-1f72e5a2bff6"}, "b572b660-7f76-4df9-b57e-d7908c59b62d": {"doc_hash": "efbe9c28836e073972d4f1fe8230b8728ae075cb8188b9cbc16b5ac6171da78e", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "c6bc8d9e-4096-4176-803e-25a223ac39d4": {"doc_hash": "c125d77cd1ed39a19ef9769c8daaed8b31972c4c35c6244531e94e4b769250af", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "104aa9c4-3673-4f13-8ff1-59435853a8cd": {"doc_hash": "44be38cc525091ad50e97654c4ebad0fdd100598c1f411070c7e10d15e312982", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "fd5198bb-aa2a-4873-83cf-a67209c8c144": {"doc_hash": "d72df84967661b75353971e49ce0f50dc42bf39a884d7a4b9f22ea627c0d95d2", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "a8bcf118-3996-4b32-8eab-45bc88d7d512": {"doc_hash": "422af57e985231dffb3ea61f033bacdde1dd80d9d2defd0d8b3ceff4f6834087", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "e013c01b-ab04-42d8-ba9b-e99592a2200d": {"doc_hash": "4d248e921742e571c2885b9dac244dfab3164ea5b48997f2638a34cd3f04204c", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "a4d30ff9-21fe-4f49-a435-8b4d3e6cbda0": {"doc_hash": "89cc668f05465de8905675fab92fab56afb82c109cc3cdb1b23845f51e0cdb68", "ref_doc_id": "e62bf061-306c-4da4-823a-e3e5deae05c2"}, "e18e8769-42dd-4b70-9f31-85170bbf6b90": {"doc_hash": "40633af075c616336f8e50ce2dd005a01bb433aa2161ac369f4db312aa634fbb", "ref_doc_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d"}, "9b57fc01-32d6-4d78-8a17-e6d23c671b04": {"doc_hash": "304fbe5c789dbe317111ed4ec44775d0ae4d68e51086e01e672b7e6835e021c6", "ref_doc_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d"}, "405bdafe-92ef-4790-8b01-e68f21063a41": {"doc_hash": "1aa0dea8a9997114d60e75d1e1ef485c2a23cfc33bf67c8fdd165c505d339dc2", "ref_doc_id": "454005f6-46e6-463f-96a9-9f8df08ecf5d"}, "27f02c91-eab8-4a6f-85be-1ef5368101f4": {"doc_hash": "125275dd82cbe3f31110296e85c7862138fc57af5c638c1c136ab5fd29986985", "ref_doc_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e"}, "30cf3722-d06a-4bf9-a682-e8d3b0326e4b": {"doc_hash": "f89526c4eb123fc9492c45d9446d39db3873f43eb669eacaafa319b851e6845a", "ref_doc_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e"}, "471d4469-598a-4c24-a09e-a143cf27891b": {"doc_hash": "53ee7e2a65b9f339d8d63cd7ab89a5c21d74f51c58ef788854a0d4648f22a330", "ref_doc_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e"}, "aae1a903-e17d-44a3-bb82-194414bd014b": {"doc_hash": "4c40dab5f8da2e3269c40253dfbbdf86a28f1e21e75a9066534b1e51b88f2b6d", "ref_doc_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e"}, "4fe375be-1d59-4983-8820-b017b74baca5": {"doc_hash": "9c64605a01aeaecd08da2a1124a00777fb02efa9c0b6f6d755227862c41852c0", "ref_doc_id": "b756fd3b-593f-417a-9268-b686ac1e7d9e"}, "2994dfe2-f08c-49ce-986a-f945c939f87e": {"doc_hash": "2eb9aac9b23afe21112edec4965932028d7511d9141834058c07d7d5b1040795", "ref_doc_id": "d7e36004-ddff-41b9-a5ec-d7931c9f909a"}, "2c7131d4-7648-4201-bd9c-1c5de88bffad": {"doc_hash": "f78d60279256e4fd20a71545bebe897c90562c65a60a72e012568ca85050c84a", "ref_doc_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70"}, "449602dd-b3e5-4442-826e-3e689e6c37d6": {"doc_hash": "c37a987a290e143e58df34df0d3f30efa8741979cd08ad2c4f3ff6fab202ca28", "ref_doc_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70"}, "3430f469-d382-447a-8e94-bd28cbc41a1a": {"doc_hash": "5ee2efca97840b13e01e15026d408791df89b545289737e684c460855cf6fe79", "ref_doc_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70"}, "f90bcfc3-5914-4063-9100-c6f7f6d662b0": {"doc_hash": "1401c1e2fbf0c70fadece4fb3cb7f83e24124b540dde04fb5b6bbbd2767c824c", "ref_doc_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70"}, "2d26c956-bd9b-416f-80a8-333e6bca6242": {"doc_hash": "f06fc7049e23125647123f615e7d72a3d9de08419e33b378e12d5f303a1cf768", "ref_doc_id": "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70"}, "827aabb3-a19a-415b-9d50-c30cebf68ba8": {"doc_hash": "49036c2f50510df0f11922af19a6ca3c7add61ff1310150f41813c41216b78b8", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "902a77d8-4572-4d56-aa8c-7578dcd943a6": {"doc_hash": "ecc42d7354f9e66f67d899014475d601f96c8d72ed1078c6e6ad3f3decb6048e", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "80add272-be7d-4460-9dde-4902234a1776": {"doc_hash": "5bb6b5d9774a31ffd6cb782f8cda348a332fb21d5550b0e0e00917816c397605", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "bcf85e49-7baf-47cd-89c1-6d36584ecd13": {"doc_hash": "d8987ad48f6266fcf1e9ee1430c0815ec370cee5cbc72298e4ff19411ab7eac5", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "e1daf044-b36a-4442-8419-9dea31921364": {"doc_hash": "3b722e7a284e1c3f16648e3a338ecc98e4539c9cfb681b59f4be1d257c121a67", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "fce4a91c-7868-4f8b-abb7-71e4ad524ada": {"doc_hash": "f125c9caac08e88376488481b4e61b44602aae25ddf598241a70a73335246b34", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "c8586d33-cedc-4e9a-888a-83f24f612f60": {"doc_hash": "37126313b6053c890c5cc76ead9df30d582821be00a257ec12e5aa9cecdc663e", "ref_doc_id": "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42"}, "133c6b9d-bb43-4dd9-8923-66a5e89b69c8": {"doc_hash": "071cc4f6a9ba76e40173ae81bf5f17964bac142675f1eefa7df6b9bb0d336cb3", "ref_doc_id": "5694c653-ac32-4732-b07b-47ed635523fc"}, "3574d7a2-c043-4025-8ae3-e38ac888a2b4": {"doc_hash": "fdbaa6ecfb3e25f237f4a9b80d93f7faf90b292fe152a4123c78377cb3841d20", "ref_doc_id": "5694c653-ac32-4732-b07b-47ed635523fc"}, "de2284c6-3731-4bcb-b777-d46db4144906": {"doc_hash": "52fad71eaf6111ac91fd5d39ba793e44bb4154b3d71b8061c279f8b0fc742460", "ref_doc_id": "5694c653-ac32-4732-b07b-47ed635523fc"}, "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5": {"doc_hash": "68e7243036eb0fa20d55117808ddc836228d3909cd4b8aa2d196761b848bfd82", "ref_doc_id": "5694c653-ac32-4732-b07b-47ed635523fc"}, "58050f2f-d80d-43a0-9caa-b591e2e46721": {"doc_hash": "bc74ed7b75d38012a61cd916879807e208a326619202d8aa151e9823ac2d32e6", "ref_doc_id": "5694c653-ac32-4732-b07b-47ed635523fc"}, "4da468b8-ab2d-4ac7-853f-55bc14ec90c9": {"doc_hash": "7bdd5b68660ebdd67e046e9fe871ba7b9783142cf02867d6a80679ff8f72f448", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "9fbd99fb-54c0-45e3-b244-6d41f32054ec": {"doc_hash": "e13c0d0907bb4cb86f2e65f1f504a291d54d519dad03686ed85ae89d285f96d2", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "e13b7261-f7a4-4748-ad03-42de80d1a2ce": {"doc_hash": "8720e67950325ff12a2e07ff4b5ec107fcca0588ecc8c6dab4978b6b70e5c2ac", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "a44d599e-2e39-434f-8e0c-fbd05fc52e44": {"doc_hash": "6560a50cbb2cd0c18e03571051c25e7e4dca4010fb511f15557cdcd763257e2b", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "07077548-b393-4c51-b95f-ca2e1f341622": {"doc_hash": "b2fa65d9e0ba14a15972fd9878dcb5fc3a86cf45b6833ce83447785780fc388b", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "80820f19-3e00-47e0-9394-23dae5fa758e": {"doc_hash": "328beb4ee7892e5adb1d1bc0bd4c91cd1d9739dc65b350fd8d91361e95a248cd", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "72b2b048-cc51-4c90-84c9-9f1b669335a7": {"doc_hash": "93669fe1d8a21789bbed3e1c542eae0111561a56461cd07c3f9eaeb5f15c9a67", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "42ed6ffe-3b59-46a4-8fe2-23651148763d": {"doc_hash": "e12622fb2876d864e4459c621db1b2fce2e34a380b6b4531014bd6f9eeee569e", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "562a468e-34ec-4cb8-af2d-79d603094be6": {"doc_hash": "35879f3ae4223652aee58ee9deb496c81ad3558fcdc1129ec40113d2b443575d", "ref_doc_id": "8485fc30-50e7-4fd6-acaa-76400d6ee737"}, "5198dd01-b745-49b7-b2a9-73f4f156ab70": {"doc_hash": "c31c6c24732562346f58781e71643c429e1df367309b5aabf2e734e49913ad0b", "ref_doc_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42"}, "a54f56ec-f3bb-45d8-a229-618cd29f032b": {"doc_hash": "b0acb24d1c9158c76a19ca20676cb16a195cdf0409b1bbd11256526869346ba3", "ref_doc_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42"}, "e5c60dcc-6aa4-41d8-b37a-464f2f2c7499": {"doc_hash": "3a9c74c327d9ae1dae31a905836442b681b70ee38dbda097340f7ecc184b4bd2", "ref_doc_id": "ff09c3cd-c029-4e66-8e9a-924ca6594c42"}, "1b3d97e0-86b2-493f-be52-05a6da7b674d": {"doc_hash": "3ade9ebc2de68b71e7081f2cf21ed5003f3de44ebd81b9af9b86e10cdf410e67", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "b516ae5e-5a59-48d7-854f-9ada8c905474": {"doc_hash": "6409f22fdfb8a98dacde1fb3c185388ebe595fd050ecdf3488547379a848df0f", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "e743d462-0298-4921-a3fc-e8d7c3747187": {"doc_hash": "ea9222ebb95987908ea5060c3ced4364b2a7738848a0e9f7768558d15878a2f2", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c": {"doc_hash": "26250c37cb0893fb0a44c6f5becaa651dbf8fab993ec469d8644034f1a61383f", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c": {"doc_hash": "d81c232ab845a07de15ec3bf1ea356d9187a93140a28814e6b0ef51ad6bb7b82", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "508b5492-9f88-4338-8d30-c2110ffe5e00": {"doc_hash": "f8716037b9ba83159872324d7314c108827d82889aba7c2fba68157e24948a50", "ref_doc_id": "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa"}, "717f7fb0-062c-4370-8323-e5639a99dea8": {"doc_hash": "9d6f6e15c2cd5415da1e7ec57ff661dfc15c11d3f2f4bd6c19dd41f9bb3d5095", "ref_doc_id": "b40d8343-6dfc-4719-946b-75552f85f7f0"}, "b4153abe-a5a7-4e58-b589-4133240d453f": {"doc_hash": "baf45b39b509e6d0a92c1fa77ef4972fb44a5543fbe899ecd219fe510a669b1c", "ref_doc_id": "04cf4060-a672-4797-85f2-97fe71e4df1b"}, "b516b0cc-1a4e-4424-87f4-d3574b1420f9": {"doc_hash": "e18d02c2017a8eb64884be1f4f7657a2e674024f40e2400318355f13fd9033bc", "ref_doc_id": "04cf4060-a672-4797-85f2-97fe71e4df1b"}, "3822a9e8-014c-47f3-ac0c-b85dce7b82cd": {"doc_hash": "7b54e5acdb858079fb9b1b1c3f8e43dce6e2edb6bd55e0ebab3be7525197f726", "ref_doc_id": "04cf4060-a672-4797-85f2-97fe71e4df1b"}, "2f17dcfb-8c4d-4b7d-be6e-c05e4a0bf5ee": {"doc_hash": "9b3875d733b803676377b420a56e6f55abf9bbe37c6be9aecc53f8d9d9df04f8", "ref_doc_id": "04cf4060-a672-4797-85f2-97fe71e4df1b"}, "eafed134-2542-4b2d-853c-89e3dd3b8427": {"doc_hash": "c2146a11d21c2be8ef0858b17e7fb02eb67f7921dcc44991e9e2f310ffcfe687", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "122d00a9-187b-4100-bf43-d1052f9a789f": {"doc_hash": "008ada9dce5d4a89600288403a56d767f9a464fcd2b6a16833dd5e93e60407ba", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "cd6e162d-75b4-459c-9422-271625d83dd1": {"doc_hash": "f8b192d4c38bff5c15c98496f8c9177d97a7517ba525be21fa9eb754dfed1de6", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "08907ce6-9205-4aed-9c1a-046d22f407e1": {"doc_hash": "a20c252f0ee386df14d0d6ed82d6fad30c338ff33135cd24321e3aa74936f92d", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "5144eb67-23b1-4e20-83c2-443bb7f84f8f": {"doc_hash": "03d3e562e921fa474d540a771005132539df172d9a8b571b268604ed7dac5351", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "29b0ce69-0dd4-4455-8a8b-925dea6de988": {"doc_hash": "744df404ecfeda128eb8836608af0a51de460249a5a20ff336f0d6b078e5432d", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "0db5d367-a180-41b6-b7f4-8ee2a93fdca3": {"doc_hash": "fc44da8aa64a391f063953c0c63ba32e2794ba2c6f2228ee5bd251f2e7ab2b8a", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "07554ef4-cc62-4f46-ab67-3c16928180e2": {"doc_hash": "3db69ab3dc3a8b8364ffbcb12708e67d72e2b8fd9a956162c66d5377034e5fea", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "31162e95-bd63-4597-a788-c9d43e2cc818": {"doc_hash": "00dc70a083d78879ec1a5cbdb65fd35808cc22eee8ccc34b9419a04cfda0083e", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "6b7c1c87-d457-4fea-a445-6f77b48e17cc": {"doc_hash": "5b6c59458a60f854cb073bb5162cb308fc8b87641dfce7248848344576e0ba71", "ref_doc_id": "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843"}, "2dd4d1be-593b-4d43-b029-69ca0917f9a5": {"doc_hash": "29df73f888adb05787e50176275e6951d24bca9c1c7fa351d612eeac5bd004ad", "ref_doc_id": "a2cf181a-fa3b-472f-9a23-595b9240f106"}, "31d5579b-03ff-47ef-bb01-abbec08d09b3": {"doc_hash": "c0378a5e779bea2534f267b7a51aa081a2b08d6abe63d7788f3de0019dedafb7", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "2fe88262-f362-4b56-b764-b111a5b71e94": {"doc_hash": "25ece5bc18310d00d4dc5607c666b5cc8ac12e50eff3f31ffb76d8ea22743cf4", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "214dd4b5-775f-4640-8b01-08255f4f4322": {"doc_hash": "6b5f00d50a6ae620303a17d11afa928558280bcac99c7bba15504ed28c6c68b1", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "1c429120-a926-4a8d-b292-fd7bfd2f7c39": {"doc_hash": "ea42c053c0ffa96f77bdbf4ec6088d3fcb13bb0eeb1abe8a56ea621bc67db6c5", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "a1f64ac1-43f9-4dd2-a352-39aad06812e6": {"doc_hash": "e220042ead13692dd6e62398a309fddde64ca911d401ef20193a392a0c11cdfd", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7": {"doc_hash": "47427e909a57390904c62e5861f19226b0c6e9ab9d3e97077048114fda987913", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99": {"doc_hash": "a16ff06670c943631270a1531d46b1b731f5ba8c00a80e98a6d08810ec912d35", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "3101ca8b-7952-4954-9246-a5bc95811dd0": {"doc_hash": "9aca8bcb32663a3e07cfc191ab7498ecf53a22be9c66b294635250ad2649198a", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "644f950a-a273-4087-954e-51866510b605": {"doc_hash": "3d5c6c3c550480f694a46794f8b83c66964109c4b1226efe54bc199847dac91a", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "6cecd306-281f-496c-a787-4311b138de4f": {"doc_hash": "ba705671e3fb9caaec8ed08a53837095743305922f67b7a49208b7ed934f5d3f", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "fbe475df-ba7d-457d-9898-07300dea287b": {"doc_hash": "9df4cb6b1905a79baae9e6a92dd757dec788157b0386699ecb1b96d09887a6d3", "ref_doc_id": "163afcc5-954c-4706-a4f8-71841930e68b"}, "1b791093-3d37-42ff-8388-d5f8c0dbcf87": {"doc_hash": "ae626d699ffa95e703de49187f56397612bb77bcbc9133041c3e5ca1f8eee378", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "65b6d834-d63f-4387-8e86-7e58f9a982ad": {"doc_hash": "c4c3df0f8105811f1aee6a069ca233b3ef96b2893b9ac0affbf7f524f34783a8", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "5221cd65-946d-4eaa-98f2-8aa43cbf30db": {"doc_hash": "9f629bf8b6570e8e97b2f3e52e4e043ef89960ba45c957fc2f726d5803f05e9b", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "6dc3bad5-438d-422a-a292-f2231bc7b60b": {"doc_hash": "d7b9d016b33fd2523dfd4485e7fa4518c3447d415f60b8256532a305341f79cd", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "fc5be5cb-5a3e-4dd5-938a-4030a533e319": {"doc_hash": "15f8f40319c69701b4b8e9a5dc4ed9a3148819c577cd4dd2d4c57f54400a800d", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "3e23a600-7614-4181-8bcb-de5d0e97b663": {"doc_hash": "ae3f8376cd564e4132891e743fcb70efe530ef458bba10dd2f436c6fab1d299b", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "29ec3513-a416-4cd6-a168-e99574b5b936": {"doc_hash": "4cd1ad546808d9b575412e9c112a69fa507d9608851b763d45bc0923908fbdc4", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "12e99050-9a77-4dea-bb11-25210bbdad94": {"doc_hash": "7284b31af80a3f9851c4739c38af9e700d0f84118f7c72ac80fb78b0fa5c7d7c", "ref_doc_id": "5b1f7f95-477f-4c64-a8c8-c00eef830f95"}, "7849a40c-5ba9-46e0-b954-d2102ac1721f": {"doc_hash": "841289393acc90a971c73b6f5e75121873030686bd9056d4ebfc675ac5629798", "ref_doc_id": "159bd272-a134-460a-a757-6a01103a85bd"}, "d70d6c86-c277-4c98-b0fd-afb559cd1cbd": {"doc_hash": "faf48f4288bbfbedb41d5076cfea9b644ed33083fcdcb87145f5511adfbe74b8", "ref_doc_id": "159bd272-a134-460a-a757-6a01103a85bd"}, "eae7da77-44f2-4c46-913c-4bd922b075f3": {"doc_hash": "4a40c1aa90d768802337cce17ea4062fad0c3cde066c82316ba80757e597348c", "ref_doc_id": "159bd272-a134-460a-a757-6a01103a85bd"}, "2fad36df-c3ca-49cd-8fa5-a952b2472f53": {"doc_hash": "f08930d2b8dba79c26ffcef699b0c45d339724396aa2da7be374f97616449f63", "ref_doc_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5"}, "20f7d0ed-51f5-4b28-8862-709b7cb1ca39": {"doc_hash": "e5a2db71604a48bcad43f99cc2b812858c109131989111bdfc29deab5f2672c0", "ref_doc_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5"}, "0dc6a52d-f6c6-444c-8e05-c62442b8aa74": {"doc_hash": "b610f860b5ee2af3f353eb3acb6883a54127e1dcf139a0e12377be953a226116", "ref_doc_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5"}, "e16c6fe0-00c3-4079-b1cd-88da01f2dda2": {"doc_hash": "fa8448f3920ed30e749995d67e9a00c1cf6c461b5b78c9c2c3070730489f82fd", "ref_doc_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5"}, "3254f7be-faa9-4326-bf39-16b8b8b49e0e": {"doc_hash": "b92531a48d04ed8146abfd6168d28a16b84055f27920c7c53b9c128ebe184e77", "ref_doc_id": "8f90a4f0-8a4c-47b0-8e44-cee383360fc5"}, "d8bd6107-48c9-473d-9db1-5db9cdd7dff6": {"doc_hash": "abaf61d749f13090f553a8325bb6086ff9381950af924aae93ecad324ee97ce6", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "c2cd96e0-1316-47a0-bee3-1b571070e54b": {"doc_hash": "01287102b057932c731c4483f9a1e19e84f73af76dcb10118f3522bf28768ec0", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "70bf1072-8123-48d9-a817-7b2e63a31098": {"doc_hash": "c1069558cc54e09ad52590c4eae24238fa354a5bf237d7692cec09114ea58647", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a": {"doc_hash": "d879f412953a2c04e6b4c3334ceea45379d6f0064bde0eb800d26f46a2bdb6d4", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1": {"doc_hash": "17d089a1844695e434586f6caf83f130287c4f37adaaa2661316bab4956782a9", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "5f853170-ac30-4441-bd6e-e001b1802c41": {"doc_hash": "c6c11ae31515f64d062ee01a24c7145397b209b4decf07c7f92d2ccd2d28bfc8", "ref_doc_id": "2a576e93-6516-42d9-9e95-e8f3a5b3b12e"}, "dc487517-b2f6-4089-a9b3-63306b204f30": {"doc_hash": "c5452701192a13049506b631fd05c697923a3e380bfcd7427b8a7cc8001178f9", "ref_doc_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6"}, "ab1798d5-ce85-4731-8de8-39f059cbbcf4": {"doc_hash": "a9cee777a41213cd4d8cd54e821801c1a9c88aaf53e4d2d7cab22c239d0c878a", "ref_doc_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6"}, "c2b628d4-29a7-450d-9182-e6341692b5d1": {"doc_hash": "f57a9256d9217f10278aa3d3e9b8f3028127739588e17f3a731ee52dc53d81dd", "ref_doc_id": "9a995f22-10d0-4bce-bf68-20219c9b47f6"}, "f4f5d698-ed9d-4483-a75a-cef81a37cf68": {"doc_hash": "071d4056e15e7491bb53a1244554cc2e23bb8fe959525152324ada3b56b274ba", "ref_doc_id": "2dbd03d7-fdc7-4a55-a2b9-eecdc253f913"}, "fb6fdf49-2843-4368-bc32-4e1b6447cfb5": {"doc_hash": "c67b9c8b4ac3bf9ae41bffe2993f73330c98673a9a968314170a860f16e1da6a", "ref_doc_id": "2dbd03d7-fdc7-4a55-a2b9-eecdc253f913"}, "538649db-1155-4853-be22-f708538430f7": {"doc_hash": "2d62654d25ca2f87ff6b36e776953713e89560c237864f5eb2c09c9ab0fd892f", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "bc02bbd8-8afa-41f8-9d1a-e1c83e199386": {"doc_hash": "3652bb7a4e734d7b8324b40af72c7b3595fde9e54e74dea196cb14ef7e18acdb", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "e480413a-dac9-4f17-9789-08d719897a5f": {"doc_hash": "6dec654ec2b8528b9aeab108e8b71c75367cf19b40a7a4ef8b94a7572c55c998", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "8101703d-5712-4390-a3fa-725bab6a932e": {"doc_hash": "31fc9304001002b6b1ac2f9e8183a9f97bb9d6873b60f19ebed37d796037cb86", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "22275b90-c71b-4224-a50a-019afaa71eed": {"doc_hash": "f5ecf6c7426c33151bda5e34eb8e5d9b99ab4aa81d06ce38e96d095a157c9d8f", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "59b899c4-12da-47ef-b850-672b700f4f7b": {"doc_hash": "27f179ef19a070855a471f3a5bab08762c4ffc2c7a69cb9c22fef5a8ca138cc1", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "49253671-5888-436e-aeec-9d350538c174": {"doc_hash": "38e32182f33dffe466edff3e6b8dda97d592dfafbd45cc896a9f0dec4a8b4263", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "7ccf003a-0b0f-44ff-8196-ac01ae7ee079": {"doc_hash": "bdb1ec445b3bec8fbb5b9a9591bef60adc1dea5d39e982c83a6f72b0327e873b", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "ddc746b1-bdb2-45e5-8f48-a5f7531790e5": {"doc_hash": "baaff051133d1db7a061df2b4498134df7e89b1e34eedbc38da65d161e45e094", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "a4d02ec0-34d6-4593-9de5-6150e62d458f": {"doc_hash": "510d3ebc0d6577c172be10b575d4a3d779d3881ff9e641f560723af013c6c566", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "41986966-7c5f-4d28-b4d9-290812f5a92a": {"doc_hash": "da9b03cbe810868ad4402252d69c33a8c5589c09abcf38ce4cb1e5b604309e09", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "f8f82ea4-e120-4118-b34d-93203f338d59": {"doc_hash": "2b0862b57bc3d9b523e3f2c2ab31c644b1530e312052ea6789aa4097d7d50a24", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "cb693b3e-8030-46ff-a566-10f109b84205": {"doc_hash": "796b3f2cd263e28ed376583e0e60d8a193fa9c768be58f8b64ae5e1762bb0434", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9": {"doc_hash": "0d7c5b309b12355881af8453a8ab10944ff9f559489ea7defba566934736b4a0", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "164ab1eb-2152-4acd-8589-d674227fa7a5": {"doc_hash": "dda9a39bf9af348af8c925348ce2ced043daafbf4ad73f9deefacda758a251d5", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "bccf2235-659a-4ab9-a60f-b22cb290ef60": {"doc_hash": "5db50dc22505fc19feaa704b4efba1a86a011b00c3201b7bfadd66b5f15d125d", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "58453927-5854-4108-95f0-af5d720195bd": {"doc_hash": "14b309beca4bb384926b7c2e9665d8c0653ac406d9690867a80761c4dea76245", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7": {"doc_hash": "5ec25931d28ef6c5b71ba8493652f0f20096a1044094f8522a2bbcca8884ff30", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "6ffeb55a-f210-4c57-a2ff-32579fda66d3": {"doc_hash": "90bfeade56868b4837e6839d7a7e5f9781a8181bbb3971ca1e741ecf5ce07202", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "d8033542-dc19-4284-b628-4bcc7fd68f13": {"doc_hash": "e450db2bdb0e0adaecf69a7b6c5f9e775b29e604deb85ad6e2ac61dff6d4eaca", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "feba14a3-90ca-4a11-a56a-fa5ad845f767": {"doc_hash": "0121b559ffdf57331990de925747e0dd75bfb405e243796b54ed50e0b2c1faa5", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "275e5590-2a57-4380-af34-04232ca38e81": {"doc_hash": "a3a6d2c985ff0426a205fc0c3fbaf5647567602490ffe0ecb2be73fea33f30d5", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "94cced91-adca-4d24-9a6f-5d3f2bc20a62": {"doc_hash": "40f4f4959c9310425a4e6d312f73dc7c141da634c74c247e167919f2d79fd3a9", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "75bfb15d-dae7-408f-9364-4c9f7a5e8c53": {"doc_hash": "8f5b26b31f47ce08f3eba4c77628eda427ad8b5b2198f0e85af68081344c16c8", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "fd1c2193-ea7b-492e-afaf-6040f9ff3801": {"doc_hash": "dcd0ac2d3b1eb889bd1e822626a73b1c939106c26e63d4df40e1c46dfdcb5e89", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "43f4a833-18eb-465f-9341-7f189b67a50e": {"doc_hash": "3a89c3eca458e04ec915a9f252e0f45824d0aa39f3268ac00f57f578525cb18f", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "2d22e5cd-2d96-435a-86eb-af64884f2f47": {"doc_hash": "d2e4d2027b5e6f0ed1f5eec07bc99c7c902265544ac487c0d620698425fc5d0e", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0": {"doc_hash": "8e8b10708fc2e395eb5d4541b78e0d02971943b238cad65f0457dfbd62cb165b", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "62a5798c-4653-4978-a1ae-dfcb65e542a0": {"doc_hash": "946ff51e4c01dbf84c7d7799d85c7984d09fb59f51d6b2a0e37e6eb9cf944be5", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "9267b605-c755-4fd0-8026-b6bd755e8f15": {"doc_hash": "c40eff9706893ebddcf31186491b2370c45407598840334c030f0a2711590b3b", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "0f8e2101-da20-4caa-9aef-779628c2c119": {"doc_hash": "f825524fb8a77f1b0369bc433f8bf167c37ff25a07a5b881ab8e6ee5c2588753", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "1d522e18-f04d-42f1-8f83-fb723b16e4eb": {"doc_hash": "096ab0e56c091596bd408bf22366e2561e364dceb5eeaa26233a034c1855be90", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "53651477-9b2c-4535-afad-302873627034": {"doc_hash": "8879072bc7d1dbcfbd25d0da603eaaa1bd9a6a77d5046d87815327092171a16a", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "30612fa1-1df8-48db-82e0-bf865870b902": {"doc_hash": "6c88e41679a7eb12ef52329ef90582ba0be1cdbf3da358f01d9931861cbf02c9", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2": {"doc_hash": "06be58daca40f305ace894ee51c4e5fef792bb962fe51ec656eebcf20c665325", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2": {"doc_hash": "e224bf6a678dc0e65c863e810561bec0aab02a5ddf334fd9a50c0c1362844e51", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef": {"doc_hash": "7676d8b1382600966f5dbedcd7fd20ab1c4abfd6deb6047a10437617a141bb7d", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e": {"doc_hash": "cc2671f660d01978aaab0d7093200efe71e6896f8226ca5098a88fdb999ef1ec", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "6cc13986-5d8c-45ef-a796-266ab9c68ecd": {"doc_hash": "978cfde5d577a2734d28450ba0bc6474dce60653421427b8d9055cbd783fb99d", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "0b5fdfd2-9225-49e7-abf4-5b813409d753": {"doc_hash": "1ff5bd78819414a554c96989cbb014661666c6529faf6d691c4f5dbf2e594803", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa": {"doc_hash": "75c26fd7dc633336f720699b55ce480e218ad2b987ffc97fa248e5f2492c5db2", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "812d9c19-4217-44c4-990d-e15f02b19b3c": {"doc_hash": "ddb913112a380b5599ae7472165dae5cc96335cb9ee4c36bc91fca95c3456388", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "985f071b-c6d4-4283-8464-236e6853db3b": {"doc_hash": "ac77f1674581a30f2ae903877ab414c90975ff369e789b6d0d5a6e1c10a036fd", "ref_doc_id": "cec30de8-8dad-486d-a34f-bff103ca1161"}, "c9a76086-b720-4df9-a0c4-f8e370820286": {"doc_hash": "3cc445229ed47c1cfe2f5a107629f253ddf7d1ac06bfbacd2e372bc51360e210", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "70f839e8-585c-4ce4-a67b-be39c4f33ace": {"doc_hash": "dfd50ea20c2fdbc08dbad673ae8f3c7465066fb9bd8de7228ca242d95afb7a74", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "fcead954-6ac5-40b0-a905-546281759da4": {"doc_hash": "10125dcef9e1ff784b2c621bae5c5e9cad62fc1e0a468515cb087d3aaebc040d", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "cdbac1c5-5ab3-4037-bc0a-7d030e334cff": {"doc_hash": "90aec92bcc2fdcf7a12bafdb3dcfcf00da2fc9e816ccf701d3726ef98bee7c27", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "af114149-e6fe-435b-9ea2-09bde8ac0086": {"doc_hash": "6d178da04e6891f31be5040f63286a1b1bb1e0c7e123ca8313ba639d472ae33c", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15": {"doc_hash": "d5fcc230fc9ec386dd2c8859cf958ea6fb2d0aa3e0d362f3cc1b2be0b52c4d98", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "ec126c0b-21be-4489-a8fd-cd93a50437b0": {"doc_hash": "4ede638b4e02179932c69bdfdfdc1c8a9956d9a6289d1eb87daef44558df61a6", "ref_doc_id": "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1"}, "d2ac0fad-61f3-413c-ae2a-29e9f16e9b88": {"doc_hash": "8fec2083e0bf300c3a38c3067e70654935548c2fea8630fab351934cb1ddc377", "ref_doc_id": "74e6a02a-a5ce-4469-a2e6-83f4548a15f3"}, "ef6d2574-a864-4d23-8ec7-c887699cd220": {"doc_hash": "934bbaa8757282d70bb1957f8f3625a7ee5c66edd2fbb31e2cd2157de65e5a0a", "ref_doc_id": "74e6a02a-a5ce-4469-a2e6-83f4548a15f3"}, "f96383ac-1b5e-491e-84d7-f1bcf24be881": {"doc_hash": "21ff2f662915048fea8aa1a463451c08106820dd94af9dc59f347f2a59e99641", "ref_doc_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40"}, "5c106e74-a68b-4d84-90cf-df3bc68ac835": {"doc_hash": "d6d299093e9ab5fb60efcdea6dadb4ebfe4e1bd7f78de08fa0d18378907712f1", "ref_doc_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40"}, "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b": {"doc_hash": "46d7f5cdf43ca3c30c42c790643bf5d8f95329e35aae0de543823fc88d944334", "ref_doc_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40"}, "490128b8-c2b8-460d-aa16-4fdbf4a1c512": {"doc_hash": "dfec558756475af31e4b9f14e244558dcfe101e8c5a8831e6f1224ebd4a29542", "ref_doc_id": "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40"}, "2c7a0c5d-9a10-4841-aa89-6508cf77e616": {"doc_hash": "88f1f7b3d96082c471e80d55da25479b8530dbd88a6d6eae02b5dcdd1bf6220a", "ref_doc_id": "4889eb72-a647-41e3-992e-8480d36ac81f"}, "523e2bd0-d33a-449b-bd22-4844d831e580": {"doc_hash": "d6988820d1632a523816e91d376a4d905424669a895699a855bde19d8e6d20e2", "ref_doc_id": "4889eb72-a647-41e3-992e-8480d36ac81f"}, "afbe13bf-a2af-4efa-8d53-93a50dca3dab": {"doc_hash": "805ff1d3978286b081142d5335b00473387d8d787d2d0e14029dec62e9b77c41", "ref_doc_id": "4889eb72-a647-41e3-992e-8480d36ac81f"}, "b0aea040-0cbe-44ef-ad3f-4adc0dc4ccb8": {"doc_hash": "fe993ea5d149b6164dd65a4eae1a0c44eb17b324002049d37f3964d70f2b3eeb", "ref_doc_id": "4889eb72-a647-41e3-992e-8480d36ac81f"}, "22d18815-5b80-4fda-b6cb-41ace5b37bd5": {"doc_hash": "0547444fdbae8a716205dd4fe1ab3fe345d61e4c5011779a6dc45c4c1aa4b839", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "fc3a8753-6964-4f3e-93b1-7bbd0add6217": {"doc_hash": "e0710e202edc578ca5dfa8300ad670fa9550dc32fe0157df9a71b638003590e9", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "dcef93cb-a6d9-4031-b026-5979703d04fc": {"doc_hash": "295abdd91198988dde3fd6a3b47be1e747b16e54bc00073aba556aba19388c53", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "f50e3ab7-0ddf-4f04-9353-f04661b96709": {"doc_hash": "0ddd218bd8a27561fee93aecb5f8508278f570ff86b42c0b12baf28b132da54f", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "069d7eaf-2ea6-4fb0-86f2-900aa4648d32": {"doc_hash": "e81fe0ce4c91d63b8c65650a6737b600586051084f0dae5fb2fcc7e4ff4c52b5", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "d77333b9-a63b-494d-a1ba-59372829b6e2": {"doc_hash": "c70d9fa9d6e98e4b5cabc494d42c53a93d4e88f19fe6c3874551047cc38580ec", "ref_doc_id": "65101921-5443-4ca0-8d91-1785635df910"}, "8bdaf7bd-cc4d-4077-934a-84d61ef49268": {"doc_hash": "3574b06b34ecf5857d80d0674636dd823b35478a138bbf729657188800970341", "ref_doc_id": "ff765b7b-7110-4f5d-a9c7-16a8e50f185f"}, "08274152-bcff-4fb8-92f3-44382c1ddcaa": {"doc_hash": "df309ad654eb5a03b09c2c4447a25a628b52294a66bcdcedd65c674f885697f1", "ref_doc_id": "ff765b7b-7110-4f5d-a9c7-16a8e50f185f"}, "68d844ec-7273-4b94-8b14-22654a594f58": {"doc_hash": "9c222e44741e9c7875aa9c7606dff91a7fdf2e24cf6a3e629110bf305696eb4d", "ref_doc_id": "3d0e772a-22eb-41c0-bc12-a4bf095cb7ba"}, "73d97eff-cbb2-474c-b6db-c9f87adb08e0": {"doc_hash": "72b00270ea259a3bf8eb6512d4015e02a568586560b766bc14bd582c8707dd95", "ref_doc_id": "e1bd346f-3b53-462d-94a0-6803dccca798"}, "12bfaeb7-a008-411a-9e37-bf457aea9700": {"doc_hash": "a5505c45066c040e726ced5c8c3959be9a49a3de33ebfde9a243d36c5a3fe6c1", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "c3d6565b-0870-4a28-9e95-f849aa99e587": {"doc_hash": "4b909e8d838c26824b66f5841a44fbd33a6901cf391fe8105b911bca114dbce0", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "d19853e8-6784-48fa-94ff-425b5ec45912": {"doc_hash": "27acf71a4fd886d988c8a0379c8f5b54ebcce030ea61f01f2b4546400dfb4452", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9": {"doc_hash": "ce1b3599c7c3d7c39de2e86348872ae39fd2df9e759c93d19f0f11655cd9a473", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "c814fc4e-684b-4cb6-bfc2-67623acde480": {"doc_hash": "b5684198dd6e6dea58c59d89f183e6aec85b63e4da884a46c646eab556611724", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "29568542-6298-41e6-9efe-1108136bac0b": {"doc_hash": "dbc02a7915914c686d812fd538c3791981fba52c0a00a61902caa40180c0cfc7", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "1c73ea86-afa2-45df-9107-a904795a8253": {"doc_hash": "6209860603f83117df33de5834dbd32abd6c77a02911877089678a05c9c08a09", "ref_doc_id": "d928752c-d53d-4ee9-8139-6b54e6518b5e"}, "5802cd94-ecca-486f-bf9c-44f43cdd45ca": {"doc_hash": "d23ad83002a095fd06154298ef71105f728a3448c4096ff8cb6292181f2e33ec", "ref_doc_id": "a7c6b853-691e-4b4a-8427-7056c4925b1f"}, "29da7bdd-e893-4630-8ad9-f4b34bcee24b": {"doc_hash": "e0fcf373ca03f1de88829074a4d1e60f39145ee58725d42425f6ea4b46046463", "ref_doc_id": "a7c6b853-691e-4b4a-8427-7056c4925b1f"}, "69a73545-fcc4-447e-944a-d855ef0f755f": {"doc_hash": "c4c836cba43fd9284e9f501051f15278221668ed72f5705456d05127fbda313c", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "fa835245-b6f2-4ea6-8a8c-f106c48983fa": {"doc_hash": "9f15976bd0ca959de4c4628438e15e00347688c85d885d6c20bbbb6001908ea4", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "b22cdcce-dee7-4963-8deb-62de84287bd1": {"doc_hash": "345844299ba7e021c34ca3d9d785e3b3dfefadf1b174341cd2c4c939ed9e6b1b", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "ca120f32-0977-40e8-823e-ce1432f68c5f": {"doc_hash": "2f16e2e3e83fe8528dc188a1312acfa14c94623eaf6d1b2853831ff46f73967d", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "273de7bb-bd3f-4bf0-a329-950d7853b966": {"doc_hash": "1d0141021355f3652ff865285e296b11e36f9579b960a87594684e7f7536c104", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "b2d6fb79-5744-4a9a-810a-70760d234da4": {"doc_hash": "9e38fceccf6866c2146a04cb4ba0b162db3fe2f039ca09b67cda7c3abc1f481f", "ref_doc_id": "059f338f-4a1d-479c-b5f8-7135a5eac579"}, "084589db-b853-4467-b011-2a8fa941ff82": {"doc_hash": "8bfacf887058033dc809a4360dbd2143eebda2cacaac99c4c7f930fbd1519606", "ref_doc_id": "c2264fdf-9dab-442b-a332-8de54ee3df9c"}, "2045ca57-a3d1-4593-8811-358ec8925ee8": {"doc_hash": "8d0a2a1f40c567bba587d822dfbd5280e62e38c4f09e02290389ef5a2f138f51", "ref_doc_id": "c2264fdf-9dab-442b-a332-8de54ee3df9c"}, "dbc7f63c-91d6-40c2-9f19-2c0e46d8c9d2": {"doc_hash": "a00debcd5df197e8615e1c7a195e0bbe5df1f2bbe06dfa3b1b6a4614c964772e", "ref_doc_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934"}, "5518537c-92d6-416b-9f48-e0a4aa22c5ab": {"doc_hash": "2b070d1ecd8585388d2879a3bd64ec9a82a17a9c19b004a2115701516a4257ca", "ref_doc_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934"}, "5331d0a4-369f-4053-92c0-7a344a3aaadd": {"doc_hash": "7a6b5d8676af2193ea2bc2df62b8e16dc5ad45e29ced2fb890bec1216ef3b02c", "ref_doc_id": "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934"}, "6b48ba1e-4786-49f9-88e4-a4261e6c06a9": {"doc_hash": "0c3a53d78b7f8115b131b8f2aea900f76525a4493b12893e88907fa7f7690bd0", "ref_doc_id": "519d9f24-f372-4466-9f99-9f10c0271851"}, "c753a2c8-443d-457a-9d60-bdf7d8bda0e9": {"doc_hash": "f65e12a3875485d0ea1df88e0c7b7aea607af629ac8c38c82c94d008f8835c7f", "ref_doc_id": "519d9f24-f372-4466-9f99-9f10c0271851"}, "fcd4ea32-5407-4263-9520-1fd954c897fb": {"doc_hash": "0d5f1c6c6b04cb6177b4ebd18d93e095095df8b46a0fee37b5a88dc3e0558e2c", "ref_doc_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0"}, "89884230-fac4-46e5-907f-8910d6cd1064": {"doc_hash": "cc2bdd9e5a0901816e4559ce2d0c208bd80b6e632005b7b6e937377099264549", "ref_doc_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0"}, "4d72e59f-f62e-435a-b280-5f418bd3db8d": {"doc_hash": "2eb1cffd0c7fd9a4d1ea0a1060825f5e1f2e8c9c0d180210ed117d13432a9cc5", "ref_doc_id": "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0"}, "27ef5107-c0d3-4369-9b73-cce92d1d8757": {"doc_hash": "0beec5b508c296548cb2d5278af94751b7a0ba09e7e5ca3ed4976dbdc225a0f5", "ref_doc_id": "ec4187b4-23da-4620-882d-58756f03b95e"}, "80f0107f-cbfe-4925-9e73-3a51b30e7466": {"doc_hash": "c27524a7017a587c83067324c392f566ee1afce0b79bcb95ca987c94368800e2", "ref_doc_id": "ec4187b4-23da-4620-882d-58756f03b95e"}, "830ba288-72ee-4218-99c7-94d4b1c3b56f": {"doc_hash": "a6c3c0a661041fcdeb83de90f28c6d49c911796b61f1f0b61db6a52089a4cfa2", "ref_doc_id": "ec4187b4-23da-4620-882d-58756f03b95e"}, "343caffc-e7f1-4303-a162-dbc261d6eab8": {"doc_hash": "9bab2760bf42317cb1cba0b1c23696b7c30e52ac0794b4bfa29cde23725d517a", "ref_doc_id": "042c5071-be85-49e5-9e43-8a66ba22744e"}, "e31e12fa-608a-45ea-a4a2-9a2149ac0c73": {"doc_hash": "81b35d5d513bbd4bf411ab650ea46bae4af36c9f4ea7ea8d8a10f5be6b6e3541", "ref_doc_id": "042c5071-be85-49e5-9e43-8a66ba22744e"}, "3d9b4f83-b2ec-447f-9b84-d0401c107fd1": {"doc_hash": "bd5e861d76edd4756703f3dddc2780e6468c3480577ef0471e920da2b8bc9ef3", "ref_doc_id": "9244eedd-0860-4505-8097-861902dd84bc"}, "856a5f04-c0a8-4f30-a76f-16000cf2df95": {"doc_hash": "18f7acbac5b387554ed27324772f05375a38fac4325aeab68ae321fef3caa79b", "ref_doc_id": "8ca4639b-7c32-4acd-a236-63be501bf9e6"}, "9c5617cc-0953-45c8-94cd-2b670ceebf8c": {"doc_hash": "4c39e293be9ef35cd0514588147b64babf17263e0d2b89d559682ff4562093d5", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe": {"doc_hash": "5d338fea4ceec6b4680c1bd1987849da8af1e77087ff6319485504b486aeefda", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "9c9b16ec-1dc1-49fa-85fa-153edbd22a53": {"doc_hash": "200849f958d7010a318225d9383f4a5ce2cb532e22d3badeefa03e952c8dd2c2", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "de91555c-613e-4e3c-96d8-cd067c60dd6e": {"doc_hash": "6c277feb698a782543d91615295757b60aa12bb19f1f36c6161deb71f3a035cd", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "b8258c60-c3ba-4bb6-849a-f5f81471438a": {"doc_hash": "67815e65ffdae171a4fc2c32004f7155033e61da49924b9d7d63eedf40fceb3e", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "bc56afbb-70df-476f-8bab-8a49c43f3745": {"doc_hash": "2e9af50ee4251c6b07c96dcef9643285504a2de7a532002c1bf0157545df6cd4", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "17b7b9f1-c758-43f5-afc9-bf596d0c2511": {"doc_hash": "02d0cea06c0e4ddb9280df60aae673ad41f893cae81d6432a6794db051bbe9be", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "a14afa85-1578-455b-a272-d70ca43f6b4a": {"doc_hash": "1d3ec8a26459777f946ac62ae79215a459acb2a63db677a152c10c7e7e6c2b46", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "d86664c1-9764-4f4c-aa05-ce7ead56d53a": {"doc_hash": "f2fbda544a302779513a42922e9bac29afe626a4f6cb44ca749c982170776bac", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "f8e22b88-686b-4dc7-8fdd-07e54e218710": {"doc_hash": "871fd06950fe5a9ad0fc2f17a0e9e9bab443298f0281b4a19e7d1c5604273794", "ref_doc_id": "2bad1b77-19a0-4937-b958-e6c8b8ed03c6"}, "1d94dd9f-0ada-448e-8466-ca02e1560843": {"doc_hash": "e02482be442bf82d46183171e2efdbeec040af4066951385e9ba2ebe905914bc", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "62f0d714-75d5-404d-9619-9b912fffa433": {"doc_hash": "50417014eec2a0d256c2a8de823ccae98195f4e911bb1f71c9aaa1abd8b2f856", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "1630006f-0436-42c5-b1a8-97d82a7a3c58": {"doc_hash": "9709eb0effe12967b8d85962b4a9714c6b4cbf2ee6d770877759e286f1324618", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "3c62d1de-a487-4641-b217-36b7135b65c4": {"doc_hash": "1a7e6cc889e24fdbadcc7f887ed698b42f28beec07cb0cd234aee99892475ca6", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "e33c0e66-0ba2-45bb-95d7-10c396e455d0": {"doc_hash": "825e0325eb25188e6dda9eb7f0df43cb05af0d4fa3c147cd5e255d658960a3e5", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "f016a6e7-cda9-4965-8017-d42e945e4715": {"doc_hash": "0be38bf5e662a7be18b0be9afeef316071a3b6edd43ba8f448549b7bb28c9c9a", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "673c3064-5692-40c9-a969-a51e2d9c6639": {"doc_hash": "00898b92ec5808aa04e6887adec213b6a6df18403c9203429ff0d7825f3742b4", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "2af3e714-9524-4a22-82a8-d5350b1233f7": {"doc_hash": "48b620c04b48e45be5b391da8dbe3ddb6a4f079b7fa8ab093ba4cf69d7817a00", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "0c873885-ba2e-4953-9ec5-4104279d98ce": {"doc_hash": "a76100dec6c25829c6e08b3f4d25b8b6ff3c52966931bcb453074e194e0aee06", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "73583fa7-065e-4b21-abea-b6539e085693": {"doc_hash": "b7f089d1470095ca4aa139b93a410070f54b73a50ede60f872518408426e5975", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "4b4d3e3b-a422-4242-b4fe-3ba6eb414d61": {"doc_hash": "748b454839b3b795ddd7ae1ad444263135f5a96982c7c2c189297fc6b3ba3e11", "ref_doc_id": "1e42d633-e0bf-45fa-aed1-5ff5eb82886f"}, "68d7f2a9-83f0-4ded-87d6-7bd1b5f269e6": {"doc_hash": "4afae36bb517d5bbd1aca95f0d6ee9d57ee745e89ea95e71a8c28bfdd8b1b874", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "75da603a-64a8-42ae-bead-689bb54fb329": {"doc_hash": "d0d259d592fc7c6325ad7aef513d8e38f6f1de9e8d3b2789825a8d70bdc02079", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "5cc04949-3755-4b29-a29d-2dc64d401095": {"doc_hash": "f52ace0bc40e74651434cf958afa9e07f479f70da43bb605e0afc4da2578c96c", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "72abd714-515d-4853-a369-3782eb2f4c02": {"doc_hash": "15a80363bbc5e2a0443edf3ffa0b5594e63e1c75e86d93974887013804f9428a", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b": {"doc_hash": "58d249f8fddc0aae05fd2770d4db9e7facb1321c31103f38cc9303fe312bf7b2", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "d7e66126-886b-4277-aa7c-f8cced9a6e79": {"doc_hash": "58be90368bbd42dc50aba572e96e0db5ae6d1473d1933054e267235aa7a45fea", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "2052fad6-d4fc-45f6-84f3-3e25be1b03cf": {"doc_hash": "d22a016651a1d4d5b1d98d06da1a3a1960f5572fdc825dae6052a23a1050316e", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "78c83d5a-73c4-4706-82f9-e89e4a59f417": {"doc_hash": "05a751ac77778a08e77da817b2ee425b7c7213b2e4e0a55eda1fc82df9bc5bb5", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "e25bec66-983d-4b60-b9f7-6daa5e402155": {"doc_hash": "7c99658144f5ab1a964ae6731883ed1188f8fb2a974495772ecb985dd1a9dee4", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "f95714f0-c1a2-4d99-b208-4fe2dcd0312b": {"doc_hash": "6dcd37b6a709e4af1fc4a3246af4a96363c76fec1d728146a49b33576de8aee8", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "ebe4c503-ded3-4635-8646-21d2a0d985e4": {"doc_hash": "b077fc5d64bc810085c183c4e3c87fd811a250132c6bd68871c016408fccdb58", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "52210c76-98a7-4896-9fab-14041ad4d0c0": {"doc_hash": "622758469141517844f3487538e475ef9ac36b941ab2f3adc74d0ef15569bb0c", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "2581c591-d4ad-4236-b30e-bc4bd81a6c6d": {"doc_hash": "0c1c76ce8e00e7e9a44245f8877351ee187dda0db0dce1239e54844e7adf4ec6", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "f3939a24-2c16-46fa-8813-93a2c499f2dc": {"doc_hash": "0faab03c3ac84c20b0f01696d702bcf4eb3cd01c03977fef650882b77e000882", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "0e466379-ca1c-4293-80db-8867127fd30a": {"doc_hash": "c4c03b747f9fc2a5955d78934c128056a2605c6f790b06ae6a52fa2c04a187ec", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d": {"doc_hash": "a17a3af7ae4dc7a52f224a000d462c1dd660ddeb16fe4b618d84cfd513e5b974", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf": {"doc_hash": "2c78aba36fcb458316ab11c3ff6f06de98c50498a704b6e878af0dca9d8cbc5c", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "959482f1-4d8b-42fe-b46a-91403d0c704c": {"doc_hash": "5354afacb4bc4ebab3ed5c31130a1ff2af2b8f7e427f4bba809420aaf02c58d4", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "90d8af20-85e9-4057-816d-2b17d51c46f0": {"doc_hash": "f48efb8a8dcb35583df4afb810b75a2adbbb4ad8519371714b7fd9c875f8c62e", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "87369dc2-318c-4af4-b239-e2df943c4989": {"doc_hash": "19144bb4290ad437213cc4f994736aadf528c2dc426b0e45f5373f8e5cbb9831", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "59b15cd8-c36a-442b-9a08-4546258686d5": {"doc_hash": "cfecad7642cdee9027ac463a3f83699a18017a7e645c1a5b53d71be45d999f84", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "80f98343-a0fd-4257-986d-ad6271854eaa": {"doc_hash": "16680d5073e3c5b5941ef068614b614ebe37c40ee148823280e8dbded631fc23", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "c67604c0-0371-4f7a-a7a8-c8a88129bbdc": {"doc_hash": "aa8d2634b54a7cbcb3baa030b87deaf31a735057403d9875e8d193e4ca8e2276", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "3f1344fa-9d35-454e-a8b0-9c87ece68e0f": {"doc_hash": "b51de8d189be3cc676113584e887ee18b8476e4abb0108e36d355390c40e8df8", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "7833e786-7161-4464-be1b-991a9592d38a": {"doc_hash": "cf25680aebb642ffabab0228e26c3cb228e1fe65596ae4fbd86a8c4f8c57d4b5", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "1195b82f-264a-4d22-98ba-e188cd1f4686": {"doc_hash": "c384b3e178c1dea3ba0fe0f4fbd32831f6063691991c422b6b7d36f1ca4203e6", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "48200d64-04f7-4998-ae03-d0a69be6d0f0": {"doc_hash": "4d7711138717dfb58005d3d548aa434d30bdecb18a4a45eb0842f564c9d12aba", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "23671998-a4e1-4a9b-9e63-493926214701": {"doc_hash": "dc9e05ed3414714f09ac1b122d4464d9b404119279bbd2680d2c31c1760bf620", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "1bb062fb-d3b9-456d-9651-35ce51d6c9cb": {"doc_hash": "3b591954952542a15f92df1624a77937332991f3be07cde74776505df8996cb1", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "f9c572d5-0d45-4dad-9d5c-72f0044e84d3": {"doc_hash": "da576f4b3413687f9b0a1982fab6b5323193daef4c52d739561df277d0d17db6", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "d645ac00-6232-42eb-b408-77bbcc9bd118": {"doc_hash": "d1ff7d128c358f4a5bd8b933e0bdb3a6b3888ac7648f7bbc16f76e44b1b45b9e", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94": {"doc_hash": "678cb2fdf76a86ad56386853937ba999d2f8de28c10c5320ec7423f3d68e96a8", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "5c1dd796-a262-46e5-ab81-7ecc2da90f7a": {"doc_hash": "934a44f273ede676aad7f5e2c7336a76dda2e52a123cc2d7a76b03b9b6de38fc", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2": {"doc_hash": "db4b63f7d3ea60165336411f82ed1cef3f8f343b00bee26ab11436f5deedb2a6", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d": {"doc_hash": "b9983c264b39f085d095c31b495f2352695c0bb08ee9174ff53d56371a06ec46", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "017b1f81-552f-4f00-b00f-a3d192149313": {"doc_hash": "d52c48a6fdb5b1657db3cf7dbf4e8e45d2979954854d4fc1ec5b5124f3815675", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "86817f53-59b0-4c2e-9cfb-0e4036994a2f": {"doc_hash": "dd35c6ea77214a80026d0a87cc103c1042d8cdc3a19402dc555d8f7dc6a09934", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "5cac58a3-b902-4c30-bb72-3e43d532d538": {"doc_hash": "668f29c961c62135b9236f4d910a4cdd6c2ca5c2fbe3cf152d11e1b1a91df369", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "a2cf5bcf-b203-409a-bc7b-c4b2759bb793": {"doc_hash": "f9886d8371c994666aab69282e4c682f0c5a185067022bae05cafc8e95c6b898", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "22f297f4-cfea-472a-ac50-55b0373e95b1": {"doc_hash": "c2bdfce0d3681db7bffad516904bc418b2d59a3937815c2a4e9caa09c4b4ecfb", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "b0f8fb39-eaea-41d5-b610-bd2f2e37906f": {"doc_hash": "338457bb8102f0c5a3ed97ea336f95beeeb3aabf99d3b6f74ac9a854cbeedb21", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "9f5895fc-96c5-4a77-896a-315e4c7093b6": {"doc_hash": "0af9d052741003d9e23c3e259e3ea85bed8ba380910137e24c8da2ce21781ae2", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "f074be08-54bc-44b9-8bad-357302827d3a": {"doc_hash": "327b93d695531c74f97175037964469bb6c7a2894c6b273e1037cf4c8bcaab5f", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "0e1e022e-2b47-4770-8bae-bf77eef00be2": {"doc_hash": "c62d4687b677885e8b16f61997d8485960b3dee8608175e5310a0c5d33fa04e4", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "ac4556f9-670f-43a1-9ee0-e249bdc85c04": {"doc_hash": "013e4208f94a681667ab5b88a90b3bae93373af4d36c6458751c86c80df846dd", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "f7769871-2acb-43c5-bb3d-dd08887690b0": {"doc_hash": "830e02218e25026ac87e4fad6eca5c7378a57880a93529c129a21d1752c18d1a", "ref_doc_id": "922a3bbc-9209-4aa7-964c-71c7174b484d"}, "68a308ba-3d20-49c0-8b94-d55213698054": {"doc_hash": "f4766eba9846d9c91146ed0ce8b45d2c6e210d95f9f15a2fb5244e34057c8eca", "ref_doc_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5"}, "4938e3c3-2017-4a52-a964-0a1c49526521": {"doc_hash": "f8428b7a0d41977d142f344355bd94133c2ff0b49e60767193c3576bc9236bcb", "ref_doc_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5"}, "eb97ddfd-5fae-44fb-bee6-5d89753e5051": {"doc_hash": "a116151f01ca9e8dd08c4577f372ac0fdfcce7c5c38d26edbf64fed64455758e", "ref_doc_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5"}, "9e12a08c-6e75-4ff9-9bcc-61b2c7caba1e": {"doc_hash": "a7361abf184e05e0b11ba4a68c0799a8948a32fa25e4c2037edcd0089d6ae40c", "ref_doc_id": "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5"}, "3d65bf3c-e834-4fec-8fec-dca55ef3e739": {"doc_hash": "fee0c0c4ff258ef98b908397b358c51852e37081ae151f0f5aea232a58b7dc33", "ref_doc_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852"}, "78990f0c-09fd-459c-88f9-9a13363d1801": {"doc_hash": "f1731b321e1f708bad68e561e788c0f1af1bd9ffbf3f546a7dfa286a68e0d4ac", "ref_doc_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852"}, "535a2d0e-2b33-4a1e-a42c-3159ba699a3f": {"doc_hash": "09bfc84f3c6cf79456a9eeaca692fb73341ec442c84e8514a6eca9592326ddd0", "ref_doc_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852"}, "56679bc5-ba6d-4aef-8570-e219c2c94b30": {"doc_hash": "5641f2e3ed7c370350f30ec0e0a8b699fab0010e773578c1ae690e1a7ec2c35f", "ref_doc_id": "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852"}, "6481616f-67d3-47b9-be72-93e2a17b9626": {"doc_hash": "cf797ff1b6761a1e8c757b5e57dac069103a2d5d0b947d0c44c977eb425d6148", "ref_doc_id": "f06ca800-2135-4f04-84cb-9088a554e1bc"}, "b9db4a17-d5cf-4526-b5be-8ca24ef63353": {"doc_hash": "fb0bfb5b23c34c0c699eb820a507ce3af7b40e3c6c5e15e42673c356cd83bf5c", "ref_doc_id": "49cdffca-ff74-4732-aeda-b996777b7dc6"}, "e0e602a0-df33-4414-bd22-1dda06db93e0": {"doc_hash": "2b2a43323a81a8d31e68b0a5b3f79872aea74d1397c59a63f33fb68a47d30339", "ref_doc_id": "49cdffca-ff74-4732-aeda-b996777b7dc6"}, "d2f8fb45-145b-4d34-be57-3fb245b32720": {"doc_hash": "f2683bff02547fba7c702eb3a6172276447c3c8df7067b8bfb50ef805d783e2e", "ref_doc_id": "49cdffca-ff74-4732-aeda-b996777b7dc6"}, "75018fbe-f42f-4d66-a544-2d1c6f045d4b": {"doc_hash": "d3c1049131695f2954dfc70fd22a2dcebe4e8f95742aa5528413fdc045a90dff", "ref_doc_id": "49cdffca-ff74-4732-aeda-b996777b7dc6"}, "53670b6f-cbc4-4b0b-9c04-687043f18765": {"doc_hash": "5a7786b4ea6d155d5a6df9ee8811f872c0cd3278eca1d56b1f8dfa4afe692310", "ref_doc_id": "49cdffca-ff74-4732-aeda-b996777b7dc6"}, "763ec519-83f7-48ee-bc86-4b729c5bf7df": {"doc_hash": "2449d11ba884cf3b7d19afbf645d633f562c0e6326f6ca93bce80e3fcb71aba3", "ref_doc_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb"}, "562b7236-b839-4254-babb-d6e3cddb5ae0": {"doc_hash": "a783cebe6ca14012f35324860cd8bb644b8883ae83c41ae2d82f6d56b909f48b", "ref_doc_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb"}, "a14b16e7-4198-453b-bfbc-2a91fce4e958": {"doc_hash": "d9719e5565b1158f42830e0b51cb0c61a41f3e7cc6c433b6f54b78e082612382", "ref_doc_id": "37d48631-50d4-4c64-8602-c90c0ad8cbbb"}, "bbe92749-bce9-4e46-807b-7c7cf91d37f5": {"doc_hash": "97ae35aceb0b76c4fa5a688c18c0bfaa76451947e74b5195415825d06f25fc35", "ref_doc_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2"}, "6b8b349c-d41b-4329-aa40-a32faacfb2a5": {"doc_hash": "99e8f6c93bc555a28f100cc12678eca630c8c2b35d2b8846055e2668f6c02443", "ref_doc_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2"}, "7a0730ee-9a79-46c9-8564-e7eec9bb3c53": {"doc_hash": "0e393f66c773778d0d3ac360d65d56530de3ebc0c7ba91f66e79bd242ee05f8d", "ref_doc_id": "aa4e28da-f27d-4446-89a2-ff25d33881f2"}, "9bab25ab-c803-4768-9cba-21862d1751b7": {"doc_hash": "f826c906ad1382f542650f4563d7262defeba69c265c741ccb37be452bb7790e", "ref_doc_id": "3583ecf0-d669-4e61-a52a-0d02b1adf999"}, "d291f438-0c5f-4f3d-83d7-aa4af99c7a9d": {"doc_hash": "7aca79ba1c655920f5f2be9800d32075a44f1b84fe332fa226a800f8e5e55723", "ref_doc_id": "3583ecf0-d669-4e61-a52a-0d02b1adf999"}, "04563622-16fd-40f5-8409-11270d034427": {"doc_hash": "1ad4ece1dd086618670326a5e604beb82bfa987f872154de10fa9f95bc36746a", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "dfa5085d-a991-492a-a324-a0f1fb4e7b73": {"doc_hash": "b7b85868af22cc02cd51bc5ef5d962f381d892feb199bd60e67fdb805565e703", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "e7334d11-436e-4a7a-9000-d92467ced7e9": {"doc_hash": "1808a06ccb1c5bc36fb8a6c9953f19cf4a88fd195022234f702ec4b872abc952", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9": {"doc_hash": "c7ec5e097d83fdd8ed22e50a963ca6de62111b3b07c5ef6a51bdf2058fb913b7", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "85b7e9d2-dae1-475d-a00d-10f1d720132c": {"doc_hash": "983d14d6d929efb1fa6be3de500142297e056f63e75f404340ae6c7609cbbbd9", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "7b224e62-5948-4824-ba51-873921ee8468": {"doc_hash": "4f464aef8c3c922b43df7a72768b7c796de830cad00a882045a552e2d3bd154b", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "d62777e6-7505-4c5f-a630-bb482f48de31": {"doc_hash": "3286d740c80f2bf8913c73b315bf22423e9ee0333b8e06ba046479f2f9bcf828", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a": {"doc_hash": "215bb6179a3637e574b824a22d85236d7ed7173cd33233e0a3a494eae5760f28", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "46002793-2a3a-4afd-b3ce-abb5d012489a": {"doc_hash": "de6e89f7401a2e7837cefe54e1190761bcf2d98dad0367a7f671eb6790efbe16", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "cf66281e-e150-4307-9193-f791bb90db6a": {"doc_hash": "1fe8a87ce78bd93a60161d9673b3f4ceeca3052b859f705e42519471126a5555", "ref_doc_id": "7fe60abf-beb4-4b9e-bbcd-a3668e69b886"}, "e3ffa5b3-22ae-4aab-ae3a-da040a25249b": {"doc_hash": "9dde80dc6a64660ae087aaf8540bb58e390c53464f2b1e889a5505e0debd8fd8", "ref_doc_id": "48725fe8-57e5-47b3-ad73-720261c88c5c"}, "f77559b5-bf8d-4da3-a16e-a20b90ca9d70": {"doc_hash": "f79b77dfe2832e2d166d81446c4a8ae8f2205e6f6024156bc4e29faa1ede2104", "ref_doc_id": "48725fe8-57e5-47b3-ad73-720261c88c5c"}, "0632fef1-82be-4697-bcc1-a83a4f8d3edf": {"doc_hash": "c60694a780581cbf12f5101e919f5798e21663198afda7ccf5c66da3eed55866", "ref_doc_id": "48725fe8-57e5-47b3-ad73-720261c88c5c"}, "5f74420b-32fd-4e21-b60d-88b87065f682": {"doc_hash": "e8962df131325468ae349f87fb6f2e86735121264994394865c801db595920a2", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "a79eeccb-4e91-4413-8c4b-9380364a4d36": {"doc_hash": "e0b89421077031ee85eacd4f6d6f215380d660aece9c75fc41c9ff56777b8ad1", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "ed8016dd-77af-4fbf-bd51-ab8a239c8678": {"doc_hash": "bf45402faa80e7595bb4779c293149f18d08078a8f63efca81073223e4c0eb70", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "390e6c20-b9c5-4086-9c78-2f94223972dd": {"doc_hash": "f9353e4ca573760333132c41696d7ff0c6048e7f811146162b548e99275eec54", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "aa70af44-e839-4918-b4df-01fa3eeb7a03": {"doc_hash": "214cabb4685a3be6165c18472f672787c37b141f9a710f80b0974119bdc902cf", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "8b87a3e6-da9d-49bc-99f8-a9e411242228": {"doc_hash": "130a08da1db4a8b8b7a840cd2ac9e2c546f523bd718bdca12df1de0fd608ff4a", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "3f101f89-cd9c-4540-b574-6906b4be8c21": {"doc_hash": "c1787c2626960035d0177fb27935446b30d869e4ddee5594ab6c24dceb319181", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "d5351c4c-21ce-460e-b969-574c30ae4509": {"doc_hash": "dd5d6cc4fa3e2992f83f517b543b8980c8e4080187668fc03a087f00bdf95b23", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "50a62226-d7bc-4b44-9e05-45da9a9afb08": {"doc_hash": "d4c9c72f168154d9cdaf9e814be64b30cbc15b690f2596e4c64d143d789035af", "ref_doc_id": "c7691598-9b96-4355-82e8-8859932a5a35"}, "c37f1c7d-4d22-49a2-b4eb-4b2445a9e6c0": {"doc_hash": "0770578332e734a6e921905db3825579ece1e89891dafd9da1cf3d241d950c8a", "ref_doc_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b"}, "174bca80-86ab-4891-95a7-8217d8986ccd": {"doc_hash": "611530ff01c02a618c49690c9f86fcdd73f755400e9e3d3c9b3a7cd57216482b", "ref_doc_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b"}, "467d4502-929b-4ef6-ade3-869ab5d0d4c7": {"doc_hash": "352adc5a57b2eaac22952e691c81bcb834426b4e1bbe195a4370b8df77a61287", "ref_doc_id": "c3181c8b-8275-4df5-8e33-e54ad3ae299b"}, "6bebde77-7112-4d8f-accc-82bdd72dcc4e": {"doc_hash": "9fb4613eb44032cf3016db9c6a7f33169d0685462b40b921f74f1f8cc8869f9a", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "af856bcd-fc10-4713-af37-daabae63674a": {"doc_hash": "8bc6881682c4cc715fcec6036a5d0950def6c2c1953eda7acb1b2f833c2a1271", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "b4b8eb96-d98b-464d-9a6c-a2403836bbe1": {"doc_hash": "440de36ea97f390b701ae5149fb6afa50874d7a8ea49d274eff5583e096c62bd", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "11743469-38c4-4359-abe6-1bca8f2b71e1": {"doc_hash": "a487b3cdb07ab7ec3b83dd5c40c4a72d35a35fefb1708c4463d526493c375cb4", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "95df2d7a-9b78-4198-9708-ba13a3a71e77": {"doc_hash": "87938ea05facc4593f1373d4751b5da7337d1ca05309e61cda381b98dd346727", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "55805337-7b7b-481f-aada-5f5e910586ac": {"doc_hash": "ad6db081be358640c2d64b49723283be999ad2f47e0b1b3872056440748f7986", "ref_doc_id": "aa3f657e-dbc6-4c78-bb34-79044dca8258"}, "983d9a30-6e47-4397-a073-e7c674d8cf91": {"doc_hash": "faa1f48f138b0cd51d8ecde7a5689b4963fe7cf21753bd3d6feb8fc6f5367441", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "ba9614d5-d9c8-46fa-9367-7f27d0fe56da": {"doc_hash": "4a213a5b72bacfeffc06a8cecdd9df06c947c292ee1937f3b062c9fffea7979c", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "95014d92-6e16-49c5-88dc-eb73695c6508": {"doc_hash": "79d4c779a39c8916e33535f0b647bbc00b14f99b5047b71cad0a1a58aafeec71", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "cc57c69d-306f-4307-afb6-f89c9824cc82": {"doc_hash": "a14bf5bca816d2b38b57a176d4eeaec969e0735cc7c2890f1898ab0435ff896d", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519": {"doc_hash": "bf8b686ee96e886dbb1f2aaf5f312dd28d10aa1936ff7b56366921973b205e48", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "f7006f87-006d-4924-a395-f5d7470d2513": {"doc_hash": "3dcb37b7b3f789f8f64f9d7ee2d863cfad5d306b753525fcdbfedefb1b60a10c", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "989ceada-ebdd-425c-b764-66baaef40408": {"doc_hash": "ef0b429c55ee65966f5e117e468dc7698ec6f09f1c6df53e9fc0ab8694fea650", "ref_doc_id": "a41703e2-a39b-4f52-98a1-c0de26eb8100"}, "5d87902b-09f4-40af-b384-1bbbc821361f": {"doc_hash": "b62f6cd338b59dceef4576d3199ebe29c4ea6c35e916749ac3609c4b21c8ab10", "ref_doc_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca"}, "3b805d26-a995-4823-b1ab-77665b3f59ea": {"doc_hash": "88f666a7b10075df59bdb359c2264410086003e3b9f3fcc72005c807479ef3df", "ref_doc_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca"}, "0fcd7a41-0ad3-466f-8db9-838eb5f83f03": {"doc_hash": "af7aae70046439447587791643ba70ef68e5a51a0c587b20bc9b64fa96e90f3b", "ref_doc_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca"}, "bb0bdf90-177c-4f03-919d-0f2d120b2303": {"doc_hash": "c4a667084596e9179ee131d9853955924404d202ce1ce17473c9cc6cfbdc005b", "ref_doc_id": "df3e04d9-1c48-4ad4-b033-a0d2f806ffca"}, "a8083d1e-9cfc-4dc1-84a8-e7c52f212b7f": {"doc_hash": "3b769640edb73248c05b54b8724512c13579250747fb54d4bb654128bb04c4d9", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "50935a81-f53a-4542-a492-fc9eaa094ab4": {"doc_hash": "e0066916df4578d14dc09dcf869438d545a095c54b212862768db6c6e4c6c431", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7": {"doc_hash": "1fbc9bb342450ccef4bd9d36fc8455c427bc0fe5686daf2090f7660be4abe818", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "2ec95384-8b6c-491c-a90b-c13246200189": {"doc_hash": "62e4a73daf67b5ca6e780008bb8c7795f6122d20754dfe60079582833c61c222", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "8d8f9268-c920-4d5e-aaf4-893768ac1d4d": {"doc_hash": "65393ee67587c50849a85fc4c8be61fc90bdc6e7563e5d83b8781a0b23e61df9", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "a2f38771-9dde-4dcb-8357-f9edee612920": {"doc_hash": "f090499067aa2c6b432f9f41579e19ee46fcc72f7fee1f05061d6cb56a9e794f", "ref_doc_id": "0893016c-8d9b-416e-9398-b4f8a41bdcfb"}, "fd060ed2-af01-426c-b07f-0a1215487434": {"doc_hash": "f7679b5c08bd05758c38a2273ebcca7239d301fa3c510bdc73a95d5b925f2cea", "ref_doc_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f"}, "faf72222-66b4-4e80-9163-6c01e4733d77": {"doc_hash": "4dc453e395c782311329b6bba36fe88904baaf5588dbd95ead524417a93db96f", "ref_doc_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f"}, "3ef82d58-4997-410f-bf12-4d35a1555150": {"doc_hash": "f9936f06568235812560d7f9e3fcfe70e9620bb3c14496907a77b80a65d18053", "ref_doc_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f"}, "317b6a5a-244e-4afc-96a2-d88611a3b11c": {"doc_hash": "19421450848061176c6baa3224cc63a6a8dacabd9ebba228892295845247cab3", "ref_doc_id": "1be7a6f6-6d3e-46e1-a9c0-920b7001330f"}, "496839cc-9a83-4d88-95ec-90a85600ef9a": {"doc_hash": "14cc6daa493b92dfdae3370f79c2f39da151762e6914861891c928717c167edd", "ref_doc_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff"}, "c11239a0-2b61-4b9e-83e6-cedf58d42c21": {"doc_hash": "28b76ab2dd97628a8b9030eeed2f4e9d3c9f471ee8d5a742f95bea099411f8cd", "ref_doc_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff"}, "7d8bfc88-6de4-4e85-b1e3-cbeeffea19c2": {"doc_hash": "63b83205ae6022ce572ba9a68d250bb03075b324dc7ca51a1d0538e100f9548f", "ref_doc_id": "a517b1b3-a47b-4b8f-994f-bc30a24c8bff"}, "5c463161-618e-4147-a960-d8f280258c2f": {"doc_hash": "28e4ac3827aec722de52b28e19f7fb902099147d6a52672dfd3e65942c0b4095", "ref_doc_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c"}, "748aa497-63d7-4507-b701-c0b4bcb5bdf1": {"doc_hash": "93bdd0afdab5e287079b8b1caa091c8d5d4529f10932877645bc30f51cf1d313", "ref_doc_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c"}, "2c6a7663-6214-462b-9171-ab9e09106d5b": {"doc_hash": "67fe45a213e71f7f90880c7f08923c9dfa68ec6ff124f6cdfb8ba09c498fcd36", "ref_doc_id": "1a2ccd21-cd4c-492d-b0fa-eb778de5323c"}, "da0b0a28-42e0-4b16-9ac4-9f45ec7893b9": {"doc_hash": "9c3b7e4191e761e59f4bb56986cb9baa348688e9c6f58c3f3b730b0e55da4c74", "ref_doc_id": "be1a981a-5390-453b-b9a1-a67d02d2f669"}, "402ceb2b-2add-449d-b8d6-4347bc5bafc8": {"doc_hash": "feaec97483228eeff8e6422839f82487aca294bf59f9e97a38dca7686c2a158c", "ref_doc_id": "be1a981a-5390-453b-b9a1-a67d02d2f669"}, "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff": {"doc_hash": "95d3833f86506d30493a3be89dd0d64e18cf99e15ad3788de76fc0876a798eac", "ref_doc_id": "be1a981a-5390-453b-b9a1-a67d02d2f669"}, "3af4c23b-328b-48bd-a86e-20bf4b38bd4e": {"doc_hash": "1cc71f2e1c59165b3ae5a4d364e96227567926bf7dc6642523da0fe9853bf902", "ref_doc_id": "be1a981a-5390-453b-b9a1-a67d02d2f669"}, "c38e07df-4e0f-4294-8c3f-1bf730729942": {"doc_hash": "8a4941d3658bdf65fbf8646a31dffad625793914ff2b7a8c16a4d8b6d9bc84c5", "ref_doc_id": "be1a981a-5390-453b-b9a1-a67d02d2f669"}, "7febecd2-cf23-403f-8f54-cf368a8f0fd3": {"doc_hash": "89b9d70c0d36d2f41a39cea423d3b09beeca8bf94f6d9398ad4d8014147b7045", "ref_doc_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4"}, "a4586836-7bd3-482e-bf22-e6ac97587451": {"doc_hash": "0c85c523615727dbd094ea01cd0d863d7058a708fa17c533c1691d08b516c3c3", "ref_doc_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4"}, "369102e0-0256-4a33-92a1-613a9aaa2a01": {"doc_hash": "4b5fc06077f75ebd31c9832c1d8b2168ade1275e5be9019fbcbae644b78e9382", "ref_doc_id": "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4"}, "6918c4cd-3c37-4700-82c5-087f14e4bca8": {"doc_hash": "1f36ee9af5530c2d8f288e82e68d03538e1c490a7ae74f56292d7334ae214588", "ref_doc_id": "65697ecb-2b06-4339-92ed-186d900bae92"}, "f4fe88e5-3de1-4b28-a2ae-f72a0207b9db": {"doc_hash": "dff91e7d23658993d53556500c303cbad5ccb2cc1f587d6160ed195089454bab", "ref_doc_id": "65697ecb-2b06-4339-92ed-186d900bae92"}, "57a9e994-06b3-40c3-b36a-9fc52e7f8838": {"doc_hash": "2f21ec3c85e7204b2153eba4579a294d6bf563826860f01f2a1836b6c581b625", "ref_doc_id": "2ff31c45-e0a7-4771-ba1c-eace18d5346a"}, "b7982cb1-336a-47e1-a79b-149a6a28f45e": {"doc_hash": "780fafdc46b36362373305493ff41a084d6bc5d94882ee40060d0ae71701a42d", "ref_doc_id": "2ff31c45-e0a7-4771-ba1c-eace18d5346a"}, "959766bf-fc87-48ac-8c36-9eadb1d276bc": {"doc_hash": "0290743cc97cdd375a32acc605cb37f93e742482250bcdb5b17d41cd34858e21", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "68e70ddc-0f2a-409e-8b73-c8199d2b060a": {"doc_hash": "b7839ca2465b52857369505929451bda67d8383d0f2a61b8ee8301cbef1b0572", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557": {"doc_hash": "0090c3ebeb542f432579c5fd6abbb622289c2d05c1bd11bdd35a1ccf1c4187b1", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce": {"doc_hash": "4ba143efb9392448cef9e1602efba0106238b0a2680cbd8f804456475cd960ca", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "e20ad06b-71e0-4e95-b736-2f39a91b7d0f": {"doc_hash": "bb73a424bc9a17d06082452ab1771352d938cc24005afb9323d0536e3b1f7630", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "51d405a5-24c4-467a-a5b9-c1ffb9e7b34d": {"doc_hash": "33a5c7c86d0a5accb54e53e13b89bd413dfc9372f089427d03512faa82e6b35c", "ref_doc_id": "527ef4f5-e248-4215-9097-1adb73311286"}, "22de840e-9a1c-4fd9-8ce0-e1862e444bee": {"doc_hash": "3ba72660a0f91490476a62d130d9adbe57505579c4fd6f59dfb9bb46031f0a80", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d": {"doc_hash": "fed19efe569716fb42f5c66219961b1087b46bff67cdf748ce4f01127d86476d", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "2702a95e-d167-472f-8a48-393f3c730574": {"doc_hash": "85d0c16d3006bbb7131b95295b8e6c4e34c4364b2be1e2cc5876f89e3262b732", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "baffb0fe-7b8e-4987-b197-f8b870eadc08": {"doc_hash": "45465e55b2a3f39185784c9f86cece8084b2c871854a0fa4e87a149d6720f752", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "6bcf360b-dd0e-4e65-a06a-561d4f44dcab": {"doc_hash": "d9dc6d6c89a1e0f222b35380cc2019a3e4e1a9db91ad47687df9955f02bb2de3", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "ecc7b185-baa6-4af6-b25e-13c0acfd9e27": {"doc_hash": "2b96cf11d32e41d6978e15016fbf7af9aa9ab0a70cd80b573587c83fbbc6b17e", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "811ffbcf-f542-45b6-8bad-250b9719f56e": {"doc_hash": "20ad173935b1a8c780354fbf22df7588d666e60751278f8c2993840f1bef6dad", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "2817e6ed-8f35-4ec0-abfd-7c50be98bc74": {"doc_hash": "1ff757bedd1ad412286b5887c1065458d14e0e175285be90880898f22e83e27e", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "f7e3d6a3-f0b3-4699-9bcc-f107437939b2": {"doc_hash": "a6d76775e63b37c8fba511aedd86a974ae9415d19c5302d1bc98f5f26349c4b0", "ref_doc_id": "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32"}, "043894b2-db48-445a-8bdd-5780da37858a": {"doc_hash": "5d710df377bb1bdb5ffabb9933daccffa5b4d23e1a83cde991565e2cd10cae74", "ref_doc_id": "2e276c8b-65d4-4e79-ab74-72917b0a2283"}, "c41a7805-4d6e-460e-9c41-0a03be8bbd5c": {"doc_hash": "2b2bf47b323772215d96252259f14c001600299a232d37b6c13d29e7caaca9f6", "ref_doc_id": "2e276c8b-65d4-4e79-ab74-72917b0a2283"}, "4b0fccaf-3568-466f-913f-fd7413cac57f": {"doc_hash": "f652617fdb5c54f790b17590243e60fed534a28e59bef293931200334a8ce1ef", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "8f676efa-23af-4bd1-80f1-5bb586ecefbd": {"doc_hash": "a67a24be1b34dd45ea2098ca1bc5a96f2f85ead4a17d592bd83799a727c6652e", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "84020472-2075-4822-9371-821c8035d0b0": {"doc_hash": "0ec089f1347e516afa0d9d3586ee1315cb86e33df548a510eb100898ae436f49", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "da6ac31b-6943-42a2-8a83-c4ca037f6c5e": {"doc_hash": "774e89943651d6a466b4b324464ba76dc8300da4df353c29d752d33bd6fbd7b9", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "4d757e98-f19f-4ddf-9c04-18793ee90a19": {"doc_hash": "f2ec2de975b3db9431a1de81093745d412ea1fe679184eba0966cf90b7b889fa", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "cc4d8669-70be-4b59-a97f-0075a7183bc4": {"doc_hash": "b58b47a1040889e474f647c5ad1cf7c56f25e081d005de10b672ab28b56aa750", "ref_doc_id": "42146898-2e7e-45d5-8d4d-cb17a27c701a"}, "e4827c90-6eb3-4ae3-ab52-90c2eacc59a7": {"doc_hash": "be67d4e17f9236f4aa4d7cfa4853c8c1d09e1d7860a0c5e9442dbe61ea5cf7f3", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "6cdb4300-a634-412f-9c1c-1266353f08ab": {"doc_hash": "ecd6e243e9b98bf6d579031042be21ba4bce93feff0329adfad4db684c3df7a6", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "bfed7c03-84ad-457e-bd13-57a07182a0eb": {"doc_hash": "17b81bcdd7fc2852492436d755b09855d6790c6049ee2c13b502f55784c7d469", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "618864da-03b1-4089-9034-bbcaacf7a264": {"doc_hash": "815db26c08ed4660cd47dcca5f08598b632b338652521f8e7b16c75bf94bc4c0", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "f3d941a3-804f-49da-9428-5cf2345588a7": {"doc_hash": "cc5227ded1f8268f420ccf2022bb76ceb4c9b9c9995e35220ad1a341b7827c9a", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "868469ae-3f6c-48c2-965e-3cf4f694f104": {"doc_hash": "06ee3ceaea96dc5c3b932082c2ec6deaea888329d8127c9d7705d530c991971f", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "0d1f7326-b8af-4f0c-a66e-6569a3390c73": {"doc_hash": "43c1753610915b5521b2406bd375bf2c47748deff3361ac6461a6470f665defb", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "4768c3ff-545f-40f5-afd9-5e42797d56dc": {"doc_hash": "1386dacc089b31fcf11a4139a60ca4f6d31aa60e31b898ddd360f8d103ad372e", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "588c5ee0-08f7-4137-9c72-49be25c0101e": {"doc_hash": "6919d133c3a5ae148510d5aee79b425b80edd982a1fbc309a5ebfdee32d03923", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "3ec7592e-880a-4210-88ba-1e8c8717b8c4": {"doc_hash": "0364eee056f751c12d13c000938f1dc457e9df167d68dc91420271c08b5372c5", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "f49aaae7-f62e-47b7-90d4-93bd3a793672": {"doc_hash": "91c147fbb3697588574a2d80d5518d9975d51869ee86815eb7607319a5972720", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "15b95d56-74ca-4ca0-84d2-86625e688ddd": {"doc_hash": "70743abdb35c5cb0bd4f501d8641beb3e67147a7550aca8b4a7834a328263bf8", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "3bdd067b-f8e9-44f9-b51d-a92b35198ee4": {"doc_hash": "cc4159d23b2edb65562d9707fa27fe456bf07e5d80c21a405242995ce7772b18", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "9e27be60-9878-4041-8a91-c1ebb70d1b7f": {"doc_hash": "46d936803ec9474e0e256e0776bb995faf94028b651dfacbe5d8ba058f3ac07d", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "0fd5a296-cccc-40be-a624-007742aefb94": {"doc_hash": "15cbb01641fe6434d8aaf4116df70d2586bebed55cb4f994c40e4a3af1718ad9", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "066e1526-6a1b-475b-9bc7-86199482045e": {"doc_hash": "572ba8a34ff761c9e24074ff236f10d4228de36d45ed8660ea39a5f1acc426d2", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "1eb0f855-5c96-4876-b321-0ec3b349c979": {"doc_hash": "bade68a6aa700a4acb7b8e53c6894cb54ed29cdb6e229963bb0f425ddc124eef", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "8c65c010-acb1-443b-97e4-6b9f00cc0415": {"doc_hash": "72fb286a03c50609c68b96d26e8db77d28f6dbd3cebcc83de1735667180d2be0", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "c4cf133b-d0d2-47d8-b98f-2bc8afcbcff4": {"doc_hash": "fd5dfb0a8d724530c37f2cc77b63693481da753ac7c6a98923e7811948945c37", "ref_doc_id": "7f3a153e-4368-461a-b65c-0509a7eba737"}, "2d45c580-c2e7-401f-bb33-a43ffe4d78d7": {"doc_hash": "4bb4b20c8ef7bb24e9227caa372733b685322b76a72897ee3442de91e273f9bc", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "36dc66dd-3c88-4a34-b5b0-5176ee2e8903": {"doc_hash": "10c2158905ce016a13644d0e57ef9c469db37fe80f190055e83947cd5a3720be", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "cfa6ab11-9037-460b-9733-59976700c271": {"doc_hash": "e14faba51e5fdb390a09cfda1db6cdf9c771ee4251f1cc05287b2ffeb965a27f", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "d3b920e1-a46f-4d2d-8bf1-374972a9c514": {"doc_hash": "fd2d99dd53d8f58ab56dac44ae5595d878b0c4d70346c3b9516656c5d1063271", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "c75a38bb-cdbc-48e2-8a88-af585e7280a3": {"doc_hash": "58259151e390b2ff60730875694f0fe7bb80c3ef1468ae8c261e9ee753c18ac0", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "6da7f737-b039-440a-b9f0-b6dc8e46d75c": {"doc_hash": "607575f0381337b03c2ceb7a82a9435a56ef2d04aece910b9a78639667b7b35e", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f": {"doc_hash": "a9653c6550cbf205752ffeabd4fa60d995bb9865af8dcce499d7ed6f7b74f510", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "b9af40ec-4c16-4ec1-a854-47978e159e2c": {"doc_hash": "f04df20de802d9181e316e2e285b5b5ff0dac286aee7e7b5ed9b610cfb55e8df", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "8a3a68d9-1d2f-483b-a5a2-10374231a9d2": {"doc_hash": "d075d0e8562de2363adea5d6b05ceb4fe6d6175d23957724505fdf3832f879fe", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "eff956fb-4604-4ec1-96a7-314419fba34d": {"doc_hash": "1709b3d25e5f2cfa0597d1e4abf97b4bf3c4628b973b0dc4ad7b634d218acffc", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "4e7d5550-c53c-4568-accd-9a68e16fa538": {"doc_hash": "e01925a50ec8cb619d146883d60b8f7945cad6f9dbaf5076fd195ee4ab8fa774", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "d11e8d8c-24cc-439b-8a7f-902626308791": {"doc_hash": "2d96c638e6c3c4d08aed3f48bf3c42a7fe7ce84063f2007c0e0512914c16358b", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "616cce0c-5ca0-4209-a37a-a7548720843e": {"doc_hash": "442e0bf6c148c565fd178f41ef0a63dc7311b519d3ba6d602c93785a80ce7759", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "ee416e4b-0044-49cd-bba6-c97e53c5672c": {"doc_hash": "2b9df3005067099511cb1b1f6f10922f1e08921136c75452c867683fbb65ff28", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "bb427c6e-929c-4c23-b62a-334cf08967db": {"doc_hash": "8f92d1ca29cc5ede99a89fc5a324cf5bf50e74baf2b8b3fef55bf39f626efdd4", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b": {"doc_hash": "d87f81ed4935eded998012d275e2ff2be1ebbea972c9ad4492b76e7e4833a0aa", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256": {"doc_hash": "f18796fbbb57f48e33ed4810752ca022848cbdfd63220c73ceac002435860e59", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "1042c0a7-f43c-4a32-bbce-a37723af2239": {"doc_hash": "2fdf47a76e28bf6b0dd4726ec8b8f77b7bd3d095f5a3fa52d606000182e51473", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "ad292271-7fb4-4163-9770-990a40ad6ff4": {"doc_hash": "3339b5da9ed934b663309be3c01a8b8b64f9999f15706a450bbe21081e2fcaa1", "ref_doc_id": "150ff207-3e9e-4d5d-99d8-d88022e71575"}, "78c77b55-c0bd-4e33-a285-a2e2d81103e1": {"doc_hash": "77d956c4c19918d1e87a1d9331e181ebe1728a6a87e76a1f346a8595d1804d97", "ref_doc_id": "ef9c78b4-b477-4a17-9788-055328c36ba3"}, "2fc99b53-171b-4143-bef3-8acb338f0d24": {"doc_hash": "db1b41c04ad349c936482176310df690d855073a7a0913a626304e002bb28b64", "ref_doc_id": "337d93bd-dc47-40d3-a7e7-ae07494f5995"}, "38899778-8ae5-4d6e-b935-ab343a594d70": {"doc_hash": "54a8aa3082c55e2a6c925cdd10994431d51ad4e0f6c3682fc978341fc41966b4", "ref_doc_id": "6275d904-ab30-467c-a419-9dede89167f7"}, "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe": {"doc_hash": "4a8bc339bd41bef3c8264e3c9df859eafd84f43a62712597bfac6f824883e383", "ref_doc_id": "6275d904-ab30-467c-a419-9dede89167f7"}, "8a518dd7-4123-4ed2-872f-c789a3db67a2": {"doc_hash": "271c25fc03902cb23b579bac6c8878c1e7f87d6bb0af0d57bb886e23920ea69e", "ref_doc_id": "6275d904-ab30-467c-a419-9dede89167f7"}, "b1ea9281-3f4b-4198-abe1-40ce75a3913d": {"doc_hash": "3f730aa69bc0ac1035edfc97f1e0190f913dfdec613838a7d50c4d2c7aa70092", "ref_doc_id": "83aa8e0b-67eb-4dda-9acd-6b94ac620b36"}, "fe5c43e5-e8c9-4e87-9fee-bc7492e6ebf7": {"doc_hash": "f986997b7ba6ab4d767accc2566d1f11568fcd1dd8f064752480aadc55e1c5b2", "ref_doc_id": "83aa8e0b-67eb-4dda-9acd-6b94ac620b36"}, "6acc146a-a015-4b6d-a5aa-8c125c8f55d3": {"doc_hash": "b10217592a24af13cdeb4300c502243a4727fdbf8d1e039defcd6a8a665ac3c6", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "2cc0025d-b282-48a3-8e3a-12d2f2bca24f": {"doc_hash": "87d40705395df1489eccfcd1d0d8993b18bf62b69cc0ab0a754331bb6daf40b4", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "43fa3d47-af19-4a14-916c-9095d3bd5dfa": {"doc_hash": "7961e0950069a449fd7f1ae0593b57a67fb840817c1265e325dbf42fe8017365", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "a654a13d-8031-4789-bb3c-7f4d2a929d5b": {"doc_hash": "023e8a793e2dc8cdbdbd833500d2caa15a5bddcba4bb03f8b442808e158ab60b", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "99da5886-5c08-4488-9761-5ba577006ff0": {"doc_hash": "122fc8c528d90d2b1cd4db021db4277d982fa100842f54c8aaf70067740966c2", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "7cbd59cc-15bf-4509-be3f-855109c82624": {"doc_hash": "76f120b6c33a1008e55254636f7903ce4a07a30ffadbabf3f389e000ee22d840", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea": {"doc_hash": "3410765792728b7c1b281a17033042136d06c3abeefadf87a0eef441e5b155f9", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "0098cd9f-3ca0-4065-a48a-2a9d96ae2751": {"doc_hash": "ef7f4a64eca96e11f72ec1599760d788afb954ef4dbbfc979102035dba0f4a29", "ref_doc_id": "23d0d087-64bc-4bb1-a288-c4b162c05799"}, "d90ec3b2-2cdd-4265-bede-bb6d050e7101": {"doc_hash": "35b37be16ba63bfcfbac7909a7ccc47b0765b99c4bb8429c45cc84119171b9bb", "ref_doc_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5"}, "3cd0411e-55c3-409d-bb95-0658dc4c9641": {"doc_hash": "4d06486ec0db5a36a9e90695131f77ad20f30aa67b5198b9817db014b6e0752a", "ref_doc_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5"}, "e0d41dd5-bc88-48c6-9024-3dd8112078ab": {"doc_hash": "741a6bdff9805a45f6859dddfdd606874da7ce9708cd5c6a4fe3b885ff90d4b3", "ref_doc_id": "9497f7ca-e4ea-4ddb-8628-7274e381acb5"}, "bf10d780-792a-42ab-a44a-c0775a60d343": {"doc_hash": "9e6e77fbffc358719af3868703f93272ad1c5311ba53784c6898d1adace37d04", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "ac3248e7-a58c-4e0c-8e1c-a9c326585b26": {"doc_hash": "a12bd2de10058b3d311cf9e4c223ef036acb10bbc711f57e00dcdcb9590df054", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "217aac38-f84f-4e29-87d2-13289a6d1916": {"doc_hash": "df3b0ab91cfdc4e322edec33a9b0b158f7486e45e33f464b765e83f4fd9b9bd4", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "fdb817c4-fc70-49c4-be22-c3842e8b0812": {"doc_hash": "39a23c7c5473a08879ee1b028ca9f184cac49d88623b4c2f18d529e46356e066", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "e84964c4-3595-44d8-9221-15dee27dcb3e": {"doc_hash": "e50653f1ff01e96b49db0a291c85034c18b29335b44a7142e3f700c2f14bfc36", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "a533080a-fb3f-44d5-ba19-b3c637d0cee9": {"doc_hash": "4026fbae96e447ff4357a15606f2d5e57618e517e7b77f00a91eb67bb7a56e11", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "9901a8c5-d0a5-4491-9496-5e457f331fe5": {"doc_hash": "9e2cdb1ce9be27476d54eee9f8847ba18a119049eeb9c9846c1a957c4d5d1e1e", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "bfef6977-460c-42e4-adac-5d96ca0c217f": {"doc_hash": "8f89e2b4c170690f917da20b507376c29aa5ff21871ed3da24c9451528e6bb2d", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "36d3c4aa-850d-42a9-b384-b206479df438": {"doc_hash": "91efd9d674747060bf7630b652b71795962ea9ecb506ffba1d4f4e7dd4c65f53", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "ff74b474-fa28-4cde-a602-41430d03ce57": {"doc_hash": "0f0c886291d621b4620bbcbfeee6a7f38236754eebe25d285ae88110ed4073b4", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "0285ef6a-46a7-46eb-90af-70c2f2ebd435": {"doc_hash": "16ab8ab739d2bed585561f0a5dfe9cff0f525d183bc3d63d014276bc60d1c199", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "060dde09-e64a-499a-81e3-9203fc3ae0b2": {"doc_hash": "99e2ca29f8e399a0fc4603779e5baad23fce46f789ef782af45c172880ef9cbc", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "7b35d654-25d2-40f7-b201-896029031399": {"doc_hash": "40db2c60fe695c24c5ada5af3c1f77fc6cd9a2c8c6fb33f63ec72914701364cb", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "e778ab4e-b783-4493-b9b6-184764659bcd": {"doc_hash": "cea2afb4567e4532fcb448d28a8a7d48734d8330868dc7cacf13ef2da84efbe5", "ref_doc_id": "e90d2408-af3e-42f6-b4b1-273c33b4d71b"}, "f0dc985e-da08-47fa-9e97-077797b27b05": {"doc_hash": "6972e324aef3886cdb1ed880bbd443883a8ab11e71c329df501aaf632bce1d9c", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "a8e59399-24f0-459d-950e-3fe0e875d201": {"doc_hash": "bef5a7355ff87e894b498421496872dea2abf27c09ff19739a261c6c9fbb9c32", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "ede725f0-f045-4e39-b306-f5a80e51fa81": {"doc_hash": "e5e9704e7a2049a00e699868fa1bcd4f249c2208b498a2e97b64831e29cd63cf", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "0147177c-66a2-4086-8f31-c15e5b86eed4": {"doc_hash": "e423ed35ddb1396569e3c52f61c563b7c79f4ed570c80fea6bd27316ec2f5cce", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "1c8afef5-3536-4946-81b9-2b1762a455d8": {"doc_hash": "70534206121110efee03d73bed28ba58cab29a30aedad7d6beb74e80a383df49", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "c5ac4319-225b-4e20-9c03-2170f6e9dfd4": {"doc_hash": "353acfaa00ced7df6ffac6fb872011b2723d3a2839ab34d8e1bee00b14cac696", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "e77ca36b-e846-4245-8ace-b0e947be2db4": {"doc_hash": "31a8fd2a6be87d53e5f08a0a231278f0c1bc88df05934aa12f4617590b104ecf", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "be397b22-df25-4d21-9668-ba44c98e0796": {"doc_hash": "78c21b7a48bff5f0edb3847e050efd38b8ae5b12e4a907eb8cc14ea3aeb2e975", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "dd0625e2-802f-49ff-b5b6-3ad2a1efb224": {"doc_hash": "0485e08120647039a56662356bec0c59d7a76946858652e773d2343fa6026909", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "fdcaf138-6da2-4911-870c-4dbbc8531520": {"doc_hash": "105528bc75795c20171d43e265b8f83c61898617066a417726370db9966576fa", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e": {"doc_hash": "a71f37ee8721fd9e9d9fbb65f99c16986a4d7f30dfe6967fc3d8e2c4e37832af", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "0b976425-577e-40ff-adbb-81f36187aad2": {"doc_hash": "c7b747f30a20c7a597a17a3b0d57338f2e7f9f06f08ca121c677059dd83866af", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "9a09c021-26ec-4f74-bf7c-609e07402034": {"doc_hash": "832bad53baf0e5ac16b44b96cf05efec4f2501345cf63192c0a35c97ff5f2ebd", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "d79a500c-8b5b-49e0-8bf5-049b6e25df7f": {"doc_hash": "7d8d20327f8fc931fc2ed4859a8102dc93d72130992680a3f1924875979be670", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde": {"doc_hash": "bef5ba480d17732c36374b82a62e9c0232f9b497115367e4758800356faf397d", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "421fd192-3741-4902-b961-6369a17f2ca3": {"doc_hash": "126e7e6958f1d5de7643477371150984a25bc9adc2bb8594f1dac15c2926fa48", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "f4f3a3e6-6556-4b6c-8557-ce57e295a781": {"doc_hash": "cf065f4944928f30a7857ca392e6b6bc53fd3ab897918939797dd21f69ee28ff", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "7c784c60-6114-4bcf-8494-7f011a279e49": {"doc_hash": "6cd1ff5e70d382c084c873cedaefc4103546d690c4d76e67172c3b16342c47da", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "c6b2c5ca-cdee-4978-acfd-3e1b51d48243": {"doc_hash": "d5e19b96c6f4f35fd4972016edaf7b262441c87c75a3797aa8898d2e852f290e", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c": {"doc_hash": "5ec3519e8a6203dad8f891092d6940f271b40d73bbc825cf5de2cdb8989ae565", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "6c8220e7-265a-47db-a176-b1bbfaf230b5": {"doc_hash": "a36c4769a8b6480ef8b37782ffaefc074141b516e085d4ab53dba027651f56e7", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "3007f512-b2a7-4c06-9ad0-e0e6752075a5": {"doc_hash": "eeb83ee4e27f79d14aaf5a4bad327f043b4f03971034efb629325abc40c306ac", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "c6d28344-a59f-4c5e-96ac-525aa120075f": {"doc_hash": "a8fd720c28d99bae9fb9d40dafd5f3d79d3d868b51c3d637458eff2a1b778914", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "728a0cae-2ea3-440b-a572-225cb42bdfed": {"doc_hash": "654b30d7e4bfb8d2505d64d744c85019065ec357728735c5d18b0f520943c356", "ref_doc_id": "0a6fc327-bc58-477e-816e-5bbc4e9f12e3"}, "7a2d32a1-b036-4345-b752-2e84a2bb610e": {"doc_hash": "e54a466ac3aa13f1a442d540d82952fe52426f783f0bd680483b01b7b96a2830", "ref_doc_id": "b62153ab-6ad2-4ef9-ab1e-08ed8369badf"}, "75261c96-7198-4e6f-9d48-fa29a1652778": {"doc_hash": "203c8001abc8ad57bdc21da09c8c5f37d66dd65a33ca93e5f440ddf548c836e3", "ref_doc_id": "b62153ab-6ad2-4ef9-ab1e-08ed8369badf"}, "c2a9284c-e7a6-4f7d-ac0c-2c68a3b49709": {"doc_hash": "1f8585e48ce80981d2556743828fb2a2a08534d014983b4ee7f0d0f6fa7491ce", "ref_doc_id": "cc47d689-483e-4671-9b32-ed46aea89d16"}, "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d": {"doc_hash": "06042bdc13ac02b945f94666183a5e9e91c8dd38e834499e7ce8e89a5f4db11c", "ref_doc_id": "cc47d689-483e-4671-9b32-ed46aea89d16"}, "a97a7307-d490-40d1-bb67-2ed76f0d3c7e": {"doc_hash": "be1d2adb96e7c6fff44cc308381e201a499a26691258a916b9bb1e0f9cb52dec", "ref_doc_id": "cc47d689-483e-4671-9b32-ed46aea89d16"}, "9727b06e-351e-4920-810e-89a5fdb07954": {"doc_hash": "c6ce3edfa5cec5e4aa97066888262fc93128ca572520c732817a549fea6a2346", "ref_doc_id": "cc47d689-483e-4671-9b32-ed46aea89d16"}, "9e2b8a87-1424-435a-bdfe-171ad45917e1": {"doc_hash": "5d926d0e55877f9619301f3542f46b670ff0a8dec4f141e299c87114bcb44ff6", "ref_doc_id": "cc47d689-483e-4671-9b32-ed46aea89d16"}, "3934eb11-4815-4c82-9d96-0af7b010394f": {"doc_hash": "a7f241222b5c1cfbd489c42b389268586cec5425d0c357df0872091a9b119604", "ref_doc_id": "b4094f74-d6fb-45c6-aca0-14a89c1bb36a"}, "31b0a2ec-8e29-403b-afc7-37df7c37309e": {"doc_hash": "6c24bbbb8d791a21631c94b7218945d6709170d21df1b9e6753581fe3ef2fef3", "ref_doc_id": "b4094f74-d6fb-45c6-aca0-14a89c1bb36a"}, "af80a050-a746-4b8d-a2a6-de439413d3f5": {"doc_hash": "caef57e881ca2ce1e5cf022f1f591b8ec7ae0cc32a517cc0315733e3036b9de0", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "ddf3bbad-3bf6-497a-97e9-ee5564824ee4": {"doc_hash": "4167c4105e68ebba42237689c76b2fb46ae542a27532d5012dd9fe2a778b6e92", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "eaa02ef6-02b8-41e2-8c37-84c436fd22fe": {"doc_hash": "c7a4f1c3eeb208957acab5ed5abbc6cff7e07653e60c9cc612381021dc1a12f8", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f": {"doc_hash": "812746ea5cffa9a9811105aae2dab518a992d291abdb8a1584a75597318471c9", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "9d759940-d37b-4dea-9034-b6a762fa8464": {"doc_hash": "773220547d1f6e49e2ab9f37fe38b67cbbcd0a0cfb6f61de97ba80c7324c92fe", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "b29d803f-b177-48df-b4e6-e02f7cd05e3e": {"doc_hash": "209848544d85b416943d55fc7545a25daa80420a6f12ba98fdc37a65317db596", "ref_doc_id": "5717c8cc-4774-4d01-a1c3-22807530d5e8"}, "755f3147-3942-4b81-aa32-4eb97387786c": {"doc_hash": "80de0117f561d25baaa4fe815ab4ada3ec77abef53149205e81c95de955f7ecc", "ref_doc_id": "28d1774a-9a63-4054-9379-856df9035418"}, "6112d1d1-32c1-42d1-9272-3e37c9181dfc": {"doc_hash": "4bb5a2eeb1ad3021257b82c6604f019f998ae8d778f1829be14652edd95edbf3", "ref_doc_id": "28d1774a-9a63-4054-9379-856df9035418"}, "6d53a2a3-6e2a-423c-a640-1c586c1b42b1": {"doc_hash": "3a258ad8f820e8e0582bfd7702333e4b783af664a04cd7259946fc1e295c57c5", "ref_doc_id": "f9b74a36-ea47-4086-a403-893de752fcf3"}, "b1896b52-027c-4984-8126-64b79817d501": {"doc_hash": "7a390dafe8e312635cf50fd34a9778ab3baa52518f5d6e155e8fd263b0a43839", "ref_doc_id": "f9b74a36-ea47-4086-a403-893de752fcf3"}, "4ae0a3eb-5abd-4189-84c9-d0472b176d72": {"doc_hash": "099596aac55084bf144e0fbe8145129aa73cf9f5062d261bb32127da67bea208", "ref_doc_id": "f9b74a36-ea47-4086-a403-893de752fcf3"}, "7b7bac35-bf25-4cc2-a98e-e63a74320183": {"doc_hash": "c4588e503a78e45865f8ea3e101a5dcbf7f395bb493baeb57f08726247e6e6cf", "ref_doc_id": "f9b74a36-ea47-4086-a403-893de752fcf3"}, "6c2698b3-452b-41f2-8345-e5dde674de71": {"doc_hash": "3da8971c7f6170ce4cf971f87b9e43e777ef519c632d749d481fbec114286cf2", "ref_doc_id": "f4155770-74c7-42ab-826e-8e8f2ccaf453"}, "0bd4cdf5-3a5b-4a97-bc43-9d16fd36defe": {"doc_hash": "4ae984f001d162b76fdf1f0c41ecbf6ffb099fa43bc68244d84643c6b9898419", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "5121a86c-5613-4174-8342-88fde5782729": {"doc_hash": "64ec7b0d0f27bbcfdf4fb68ce3550a86afe39b3857f54dd157df57164662bc60", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "b2af4060-f95c-4fa5-b03d-204ee1f51e70": {"doc_hash": "5490cac34298bc62160bd672e347de14fcc00f07a77e6f35edc6bf5224cc86b8", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "95d3dbb6-4587-4569-b970-bc05e8d756fc": {"doc_hash": "f3f9111cc14ff37edec5f90a474959a4d13bb258392c8f858155be6ac878b060", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "b485e16b-627c-497d-82cf-219d87da78cc": {"doc_hash": "8619a5e24736cbb0b26b2096204254d0a17bd53086bacf29c0b28cfa1b784c76", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "88d94d75-eef8-40a9-934e-6a2ebcb3b60a": {"doc_hash": "b44e38455ce0d5dd8cfa96890480944fe8dad4be04466e81befbd4823d1574f1", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "5ef725c7-a32b-4d59-b3b4-3af2927ddba0": {"doc_hash": "c0196f750a10c7577f41919e3b319986af9778622d10cb4f35d4f912f4988128", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "e82569ea-93ed-4245-bb9e-e31596ccb64a": {"doc_hash": "d7362a866f51a55541ce2ea6f72b6f054d9e8fe998961212c069bfdaed247c84", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d": {"doc_hash": "58b48d254589b1c61a472ddadf95ecaf81b640bce63c5e6db0e2c20b4b1728c8", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "2b2e0b9e-3c78-4fe8-8b03-9242afd2f962": {"doc_hash": "48baf3bc0a5b0e748528610ef2339944c181364c6924248666e52ddd42152c2c", "ref_doc_id": "310dffb9-100a-4d2e-a66e-d22fb8439be5"}, "2ca07d9a-60a2-4340-8a70-55d2fc3f298a": {"doc_hash": "9cf07ca93545bd7533eb744114de3b361346cd567c2220c85c86e8aab4d44025", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "de742ca7-c84b-468c-95ed-e88bba3eccd7": {"doc_hash": "7074a05a4d40ac9fa1cd8c7ddc14464e78010e31c792e87aef60f2e74e69d185", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "c9300df6-3a2b-4902-ab9b-08cdf48f1eba": {"doc_hash": "80c427a5fbc7788d37afcf6035515131ac36f93c1f5946cd89f8a447c5333be7", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "67871355-25d7-432f-966b-ae9f05fd927a": {"doc_hash": "61db4ff1448a8f169a34089edca5c7d195aee7807e4ff930e6ed27126138f7c5", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45": {"doc_hash": "da9c62bb8b5cbc750d320f383d01f34fdd284048ad3caebfcc3c5794e604d422", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "049e4e98-e659-4042-9e02-c30422c9682b": {"doc_hash": "0e0ab78d1f39a754e88b8659af3cbb4142d65c3c3538581756b735fa1221a7fe", "ref_doc_id": "8f516634-b11e-4c56-a18c-e49419d6a440"}, "6966597d-4228-4642-9dce-e08ec743eb3b": {"doc_hash": "5c4c9dd3852eef44104a072b201002a149ab82a4552408a8bb783a8106628767", "ref_doc_id": "ac5571c1-3315-4451-b568-600adad50f33"}, "080d5df9-3b4c-4377-8c7f-34d31865883d": {"doc_hash": "df829151131e1da067786ee9f6afbd3e09a47f15a91c399d776815d75e0afdd3", "ref_doc_id": "150fef70-038b-41d6-bb58-6f9bb4801f04"}, "bb6491e2-bd70-4e35-bf9f-a2bb1c554b08": {"doc_hash": "82e7fa85097c1fb6133858c0a2f56c431f6026c7538382c54d684bfa82880a72", "ref_doc_id": "150fef70-038b-41d6-bb58-6f9bb4801f04"}, "7bfa00ed-5c91-4571-bc9a-ec47a4b007d6": {"doc_hash": "e941fca411e0a2472cc8faf11e50d5741f29c71d1135a03d0c677fc6477a09e7", "ref_doc_id": "bf535fd0-7eb1-437a-ae3e-e7249c9a965e"}, "261af660-2033-4b92-a1ce-29397e24f4a6": {"doc_hash": "90ae94c5d239a62674d0186ce4f706c7d650c5d6c3b0a8357991bab16e689fef", "ref_doc_id": "bf535fd0-7eb1-437a-ae3e-e7249c9a965e"}, "b29cb879-2aa6-4f75-8baa-a5f2dcc06e06": {"doc_hash": "a7387328009a8cb4341cb2c4c7b7d10b7043131de50b980f7e5361ca56247461", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "08f13a68-9ec9-4687-8da9-b24d872b9d81": {"doc_hash": "f6bf80bc84c27692b6b51eaacfd0f0775c0ae5bf8d4e178e365cb497aea7173c", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "97102952-ee29-409d-86a1-442d3246e6aa": {"doc_hash": "59c8d13d5bdc161db3541ee996acaea50d05fc57a8c0911d05dae1461252a59a", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "dca08142-6c37-4fba-ae7c-07457fa7362a": {"doc_hash": "980e4554df764072a57ba9021873a1636608c480fd6ef46b7a5a7a45c0b21e79", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "d0854254-cffa-42ff-8d81-220c0b800b5d": {"doc_hash": "70a772a4cd2db32839b1be93410701dcc23575ccff71e257f83e22fcf8cf1256", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "060737b6-e4f5-4ff9-8023-237b257ef78a": {"doc_hash": "580fa45893ca7b397d6dee3c97d1c34f430c60978d84b67a4b21892ef0bc4ed6", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "f65ec99f-e1df-4dd8-a1a7-38ab82354eef": {"doc_hash": "6fe905d305372e572a4620a53a05992e71cf703bb47e6c0bd9db926c83bb53dd", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "45700907-2315-4e78-a862-2cb1f1dc45a5": {"doc_hash": "ff003971858fe44843e913da3988b1b2b89ea8bdbc86016fdf950f868b7789b0", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "11841e9e-0e39-49ab-af72-3271eda71d37": {"doc_hash": "84da0d8bacd27e88919734d6a1a9b3b267b6ed3d16c16b75f047f21cad7c6999", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "030070d8-0960-4991-a22f-9ca300558503": {"doc_hash": "ed767773abe94d3cdc75976166e2c1721d6905c47952ae65ca6e1cc389ba96c5", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03": {"doc_hash": "d095044a59afd7ba31f40ff15315d89e37d5d9629ca62c88a1f17be1cadc4e22", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97": {"doc_hash": "920f550005868aaf2f7b9980bcb853be90cd1f8369a3e8d4b22ea4cc994a553f", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "2c477cb9-7594-41e3-8686-498d9cdd35b8": {"doc_hash": "0d4d4bbbc6c3f35925067f0b8af751f3d588395ae308e3963c4c7ab28a7bd891", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "5c239c2d-85d5-48c9-ad95-001abe0281ac": {"doc_hash": "602db81b6120d0a3068658b0bc18bf30790a75c498a55f1161fa00e03ae594f5", "ref_doc_id": "aa3f4dbb-0bf5-4121-b122-78de9f931ba4"}, "925b4e2c-233b-4b66-8bf1-19a4b02ea924": {"doc_hash": "bfeebd61298dd5031205c82f52520863f930415f6ce56cb8a5b807d53309bdbd", "ref_doc_id": "68b68355-0b7c-494a-9440-0dd7ccb7cf2f"}, "58ce9913-faa0-4016-a75b-15c3961f4778": {"doc_hash": "b9801b4725cd0b97f82bb8d2df07949e8ac5d418292b2882a39fa5ec7f6941e0", "ref_doc_id": "68b68355-0b7c-494a-9440-0dd7ccb7cf2f"}, "cc8b957e-da2b-48be-8f61-e4f28f9f9fe5": {"doc_hash": "3524ec837ef6733cffd142f3d467d50d6ec15609ad00a88fb192c9ab4c9300d7", "ref_doc_id": "d347f514-1d9d-43bb-b154-b4daf983c05f"}, "1b1e4779-8b55-4168-9217-5a1b59bdceec": {"doc_hash": "1c24af09c3f30e57a014154b976523f620cd5a065e180d92e0edf34346393b2e", "ref_doc_id": "ebfed4f8-1982-4fa5-846e-5e2a9a63ea9b"}, "962166a7-b5e4-402e-bec8-9d5adcf4cb6f": {"doc_hash": "13b979a0e5ad17d55b8b7ade7417bfe8f297bf4610b75c502a1f2444521040b9", "ref_doc_id": "ebfed4f8-1982-4fa5-846e-5e2a9a63ea9b"}, "16102dec-67ef-49b3-982a-c089c12b801c": {"doc_hash": "2d1e91c0958ffe552185b8ecd2817b8b50a3ec81215d9cbdb1a286c65d01445c", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "b5c54497-8a1f-42ae-aa94-cb243b5ff62d": {"doc_hash": "1fbd3234b56f73465d99694294de7a876084dbacc9faa11335f9651848360020", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "1d668064-d797-4070-935d-cfb37db6ede6": {"doc_hash": "a62ad46096ab26cc8dcb44913eaa10f1a543be5877c964c8c86c6896804daf11", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "97bbf3de-0f0e-459a-86c3-8cfbdb560e23": {"doc_hash": "b83f84593cb870219ea5fccbff1f74f8c4949520da9b5c4723f0895001173556", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "96325d19-f025-4b32-815a-5a923e46dc67": {"doc_hash": "29915f68d9bc49e66c2578993dda0eaaa9f525a63a3a77619820c7691f7151d4", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "b9853aae-2f7d-483a-b91d-74a895edcf31": {"doc_hash": "424b51e89172b8f5d228508603eec01540e83374dfe719824a4bef1d153529e7", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "3e726651-7774-4e43-8276-e24244d023f1": {"doc_hash": "0f09bba2efd8dffd9effab1ba9eb0b04dec60e8f4025919fe7ef2e0f9b480489", "ref_doc_id": "87f34c3e-ea19-40d4-81fd-63390d41ea78"}, "06b6cc14-609e-4a67-8f75-c8b50dca54a4": {"doc_hash": "7a91682fef7cc71c285555dd591203ef5b0d196d167e358f6d984c1f3db3e715", "ref_doc_id": "a3fbdbe7-f7f6-479b-9c06-1af0142e0662"}, "7a0b69da-9bec-43e0-9824-b624997bb73a": {"doc_hash": "e2aee1fe9f00c5eea9b3c36429507e472ed0ea9b0251087803c82639d91567d1", "ref_doc_id": "a3fbdbe7-f7f6-479b-9c06-1af0142e0662"}, "c2977b61-8383-474e-af9d-d67a317b1932": {"doc_hash": "d515f6c5830bc3956535379c13eb32f4e2246e28969235fe8da22253de0147ba", "ref_doc_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9"}, "3b1adb98-8d36-4545-afc6-1d43c01459ee": {"doc_hash": "e46185406fef392f84914b00739c776da8d2ecb9da3cba2ee481f2d02e1e2386", "ref_doc_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9"}, "c0126df7-1d96-49a2-ac02-d0f1bbad6cb2": {"doc_hash": "6f660a9fe1e872fe53b4abd447f10b2c9b5d0fb35cc9fb9ec193f3bd696a32fd", "ref_doc_id": "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9"}, "db764be4-5fd7-47d1-b8e3-6f4e2a6e8a56": {"doc_hash": "4501ac3d32f606c4c941ac5d0c68f96fe09de4770087b9868c355b24ed8514da", "ref_doc_id": "fdfd6610-e999-41d7-b705-955b70dd7c93"}, "d4efaf7c-8087-4e48-b490-51eeaaf48117": {"doc_hash": "26b0d9731e8e54c30f3be1a390d9577bb9dd500ad7e67aa3aa1313027db566c0", "ref_doc_id": "fdfd6610-e999-41d7-b705-955b70dd7c93"}, "27aa804b-b7f3-4fc3-9efc-85716dae04b1": {"doc_hash": "f27137e2e49916fd1ddfa290bba23a6ef4baa9ea185a86012942d5258d31f031", "ref_doc_id": "fdfd6610-e999-41d7-b705-955b70dd7c93"}, "df5c4245-1232-4370-9a5a-5966cd31074f": {"doc_hash": "d2a216a6a420be5473a9425dc8c575005317abf59ba2a011740e482f56fef5d3", "ref_doc_id": "fdfd6610-e999-41d7-b705-955b70dd7c93"}, "7af0a191-06d0-49c8-8644-a18f5dd3c10f": {"doc_hash": "ccf32b3d54e9586ee170eaa6222d601feafcc069693d34daf5d8ab22cb53435c", "ref_doc_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27"}, "d070f11c-1b55-4c93-b04d-cebe6708a026": {"doc_hash": "db5fefcf127d33d8bc8baa5e591e48e1a41f0dfd5fd50bfe8d4eb7fe9df4b1a8", "ref_doc_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27"}, "af08e70d-2e19-463a-82fc-4be3e9a56334": {"doc_hash": "bc8883403beceb4d942dc0ac171ab1aace4be809b3f439b12caa32f1f603e2c1", "ref_doc_id": "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27"}, "854ddee7-7011-476a-accf-5ad04855fc8f": {"doc_hash": "8b2c96a8e12173f2bc76c83f821144a33fe8ca9615d2e57bd1726552374ffbfc", "ref_doc_id": "a5422d23-3757-4e79-9197-090661ae0b9b"}, "9d404e82-1fd8-41b4-aa3e-0deab0883f9b": {"doc_hash": "86de23aee022b2d27bceeb7c65be9b57f678a58135e767b02049098e6f262ace", "ref_doc_id": "a5422d23-3757-4e79-9197-090661ae0b9b"}, "0659dae3-4c5a-4997-a22b-3b436cdcd312": {"doc_hash": "63467e19c50a609c04f25cecc825c84a6582dd3d4aecc91d3c9ffa7433549dc8", "ref_doc_id": "a5422d23-3757-4e79-9197-090661ae0b9b"}, "e18c85d3-8e44-4126-85ab-f4558a756c24": {"doc_hash": "cf0e9ed65f219ba7b8be2a657ab0e255d553c29278247f032c2f066ca5b6927d", "ref_doc_id": "a5422d23-3757-4e79-9197-090661ae0b9b"}, "deac0977-1ce9-4c0c-b464-a2040c5f53bc": {"doc_hash": "7f679c60f7909ef997f6cefb3e78cf820836d45264eb24ce0b3f7e3873de69b6", "ref_doc_id": "a5422d23-3757-4e79-9197-090661ae0b9b"}, "0390b584-58eb-4e88-922b-3413d4f2f369": {"doc_hash": "f4067f8bf61c5cfbd9d1a91fc2c6893586ff9bd8ae43048db721d4a7e89a567c", "ref_doc_id": "3e03cfc6-d600-4d8f-a893-2728090b05c0"}, "5a5872eb-e559-4e88-b4c2-af44b12a2bfb": {"doc_hash": "ac49e64b1a95e0603dd032c14f441d40fdcf893fc384ecca0ec8abf3732247f2", "ref_doc_id": "79775fbe-4a22-4d12-8e27-487d879c5b7c"}, "6c3e6101-1683-496c-95d6-954fac594b61": {"doc_hash": "b788aee9f62c37be5816ffee5addf6b4fcda0a511c7d9757c284230f4ee28895", "ref_doc_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd"}, "fe3aec9a-9a31-4992-ba6a-2295090a20f9": {"doc_hash": "5a4dd999fe21cebf099daaa45beb52c47b42abae0ff9b1d7a07561a35b908ade", "ref_doc_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd"}, "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb": {"doc_hash": "14e48be9edc964c267cda5accc8f8e4a0cf0cf19c10cb2ec13b3d067253007a5", "ref_doc_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd"}, "3f959881-2812-4401-9f63-3c6529cc2f4e": {"doc_hash": "f9116257f3d9a531c11c17e0cb9d65c8e47d605a2275a1e2cc508a4e8985c4ef", "ref_doc_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd"}, "cf58b6ba-b2e7-4f59-af3a-c0a2eadb9ece": {"doc_hash": "5563eace96c52aa04df4005e2ce8de338fd4c305efc2d5040e7ed968027f43ff", "ref_doc_id": "bf4c59ff-b942-484a-aded-a31d3bc0a8cd"}, "ef818610-a6bf-40ea-a5fd-491ecf6895b6": {"doc_hash": "c35f3e30cee2f36281810825cf10cddde612af1cdda2277c0f254f9cdfd3b1d7", "ref_doc_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625"}, "13e85bb5-1698-4b3e-9105-2c71f8914881": {"doc_hash": "ce85cdb999eca4c77ffcfd9b92442d979d4dd6756583b05a06722a10e0682c5f", "ref_doc_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625"}, "51998384-ca33-4df7-8e1c-38aefa871f03": {"doc_hash": "c0855634a1b5ca202070f3c9e76176002912d1f5b7b5573b7713349a5552dc05", "ref_doc_id": "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625"}, "5f497b26-0d1b-417f-8e0b-a124b6c20f65": {"doc_hash": "04451707ffe7e089baf4fc0f0990f8473fee7c276de931461a502132e313ee00", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "6d5376d6-6470-41eb-9431-86331cfd8c9d": {"doc_hash": "65ca1fef2be94cb3906b87c0985a6e3ec0fdba7589401796050d394bba9ea411", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98": {"doc_hash": "275bc023062336f02876e3c6dd771e5736f531fef3e1d9274d705572308d5670", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "606cea10-884c-49f7-8bca-a69c3e606bce": {"doc_hash": "9408cdca3efdb8ea4a8751e8ae586841b3e4893f3f6361b2cc7505642089a3af", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "ff7a588e-ee40-4ede-9093-30085c05c9f2": {"doc_hash": "ce1cb114f48722be5ae8990502b42dbc1da3bc9ded5d511a7d22f9b82bf73903", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "e920fa46-1880-4fd8-85b2-1810fa08f50c": {"doc_hash": "4957783c22e58e3b675d4144d9c1de5da3b08b9f860d6037e528ddc0ccc28c88", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77": {"doc_hash": "c839a366d738affcc15d6ddda75070dfff026dd19839912a843b4967c1bd33d3", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "fc287291-1817-4d29-acd6-aa8c207fd2e4": {"doc_hash": "9517a8bf7ea1ba84ca1b79f0564eab06f26a3d66ba26b9c1489043703c723218", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "474d006b-4c66-4e27-9157-f890242d7aa1": {"doc_hash": "c53345408199eff02dc46e4b55ef1bd0203cfd6d96dbb77ced454faba17bd2ae", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "02b1cdc1-f715-4480-b686-5a375940a489": {"doc_hash": "99cc89bf77cbf4daf2d08ff7a84e8ef022060540257c1b0e6aa2fcb104a9e06d", "ref_doc_id": "2169d9c3-7416-4c80-9047-ceeec40edfd7"}, "b81c56b7-c2bd-4967-95b8-6e667d1f549c": {"doc_hash": "90f95f5f7f0d9a7de524e9018980d0758fead52ff9242e7841e888e0951b53ac", "ref_doc_id": "381524ae-35da-43aa-9c32-9fca5fe9b4fe"}, "9971ecd6-2fe2-40d4-be3e-ee127014fbbd": {"doc_hash": "5dad0ab2214a77c82872de270631fa24f313c1daf030211b65b455004d98b4e0", "ref_doc_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0"}, "9dbc864c-3018-4c42-ac77-8afdfd4b01de": {"doc_hash": "7eaa08bd975cfd3e83d0f7cdc470956d7e589eb62d2a117743d2cfe9b7530ee2", "ref_doc_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0"}, "30509f7b-46a6-46ed-aef4-fb2c91859f58": {"doc_hash": "075d114f1db65d258f0df685abbd6eafc4d28e5ec3dfe7e81f0099bd5cb76e66", "ref_doc_id": "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0"}, "da51e0c7-f947-42cb-9afd-9a384de63b92": {"doc_hash": "927a38e7827e553206815feb4c3444e57dbf01ad36a4d3cb894695a564b8962f", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32": {"doc_hash": "85547ae8479b47d4a056f7da1bb620ad4d0f4c1960005abaea572d9b8cd0dccd", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46": {"doc_hash": "2b8829294aedafd88c8a6cb328cb9c3d37a6da5b929aaaf98b36bdb08460750a", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "2b493a6c-e46b-47d8-b11d-914ba5571336": {"doc_hash": "d20d7a40c2ee389666d65714b3eb414218781bbc5f80f6eb2a3e9a337ddb3ea9", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "37feae50-62fe-474d-a274-037aff0e8aba": {"doc_hash": "95978da8797c8b043ef6a5c59b30a5a60ef8229006d70e5823162156eae8571d", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "91c824ff-45dd-4e10-8c84-5e4ee130af08": {"doc_hash": "40a1434c191e79423ab7a1299236ac9a03fdb17146e74fbe50f730520db43370", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "d5aa5811-25fd-4a4c-8d35-9e33eb15671b": {"doc_hash": "2899d011657e4dfec335540493b653d829b78ebb3861862201743397c7b1f66b", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "9f01159e-3989-41ad-beff-6e40e434f9b3": {"doc_hash": "2b7910d00238ba2aaeaa92a773fa228050db04de3e531e89964a5283305c450b", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "f9d1c655-698d-4a26-bf09-aec1f659edd6": {"doc_hash": "8ac3131bf2c086f749a8b62261ea42f4def083e69e901816030839adf7ae2ae3", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "d86f0df7-bb65-4182-8227-0208f5a9e18c": {"doc_hash": "c0c0c788eec23ba68371a333bb81d4e16558af6b64b1cb82310ce4eb7eb15b79", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "0f588659-8650-4f00-9097-2cb22d19791a": {"doc_hash": "908431163ea64e4cd9523fe67ece932209090605312d26f6b9dfce92536de0cf", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "19d87901-3be5-47cd-9753-8ab392452c50": {"doc_hash": "60a95911ab14cbcec980bdac472d3a7862f7d85b1580750f29ff5e4e413b878e", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "8930a01f-cffa-44c2-b3e6-05392d83c23b": {"doc_hash": "2bba9bcf6c82fa4731734de7b2f460d6cc7f78a567892bbc9b704210374cabb2", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "31a986a3-7f6d-47df-aa79-ae40521a6795": {"doc_hash": "5176280fd04ad086cd2b8148f8d7894e528990c98603ee9cc3c3e63a15c56975", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "b08a2609-10a6-4ec6-a7f6-a117e1bac89b": {"doc_hash": "282d9fbea56937ea1861c2b9badaa0de04039ba0cd449dda1e5fc1fa195db9e7", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "3a6d952e-409c-4752-8659-7ae15deb47e8": {"doc_hash": "a692b6d7e44039442413b56574a6db1f4f58f2ef0e0f066d68a51c747032630d", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "55262e08-452d-4578-b6ee-a605289bc835": {"doc_hash": "545ae527e08857b4cd95a13c718f6db8d8517edcb1b787b66511392db5a0be27", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "c08b169e-e762-4fb4-ac12-7838f3bbf11c": {"doc_hash": "2bd97298c45feeaa76a0feadfd661d330b7af17e144196a3bbaafa416a3653c7", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "86cd6a8e-d2b7-4a10-8b80-068317b17901": {"doc_hash": "16a94b22a5175b18648e10d6ceff73dc9da72efecbff5c0e2dddb12d85d49f8f", "ref_doc_id": "9a2a20fa-0552-49e7-a3a2-a88ae122f158"}, "52195a62-8b1f-4a98-aeb7-310160caccb2": {"doc_hash": "c55b662ff986b6c275c1d45241792e5c5fa080b5e7028300d140b479dd9737d9", "ref_doc_id": "5f70e6ea-c9e2-43ae-911b-28ed21871c24"}, "bbfb8d40-ac36-4a54-a645-8bf1c4d91fb1": {"doc_hash": "bdbb46ee3cfdab913eeb72f5b4e99d438b5637f79aa2bfdf051cd0043f52d6f7", "ref_doc_id": "ca7db7e5-0dd3-491e-b7e0-5c6cd5a2397d"}, "ec7ea482-5a24-4d7a-b3b0-221a9a0c1d97": {"doc_hash": "00afbe73fb30bc259d2d5ede100d7fbb619c1205ae892c1a5f645b624db35a15", "ref_doc_id": "f62a28fa-bd4b-44a9-8943-44507213a291"}, "9ce84305-69bd-4ce6-93aa-58e15296ca96": {"doc_hash": "7b08d5bebdd3bc015ee3672294f602af43570b1cbf5f89563299c946d90720f8", "ref_doc_id": "f62a28fa-bd4b-44a9-8943-44507213a291"}, "3b6b0844-4221-4b5b-b0a7-3f1357d628db": {"doc_hash": "5c3918e1753c377929435036bc377273c55f93c8282497ed96f702d002d560eb", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "f136fc55-0061-4788-a173-29cd3ffbc57e": {"doc_hash": "92c271f810d81f4363962030b6c69341a6854c8ea9498df97433f6c8b1be34ee", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "5bf058e9-4cce-4fec-936d-91046838389a": {"doc_hash": "eab0e8cb03fac4f4310e66a2cebef0d1eb8921214247440801ec3bc97d0dbfe3", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "a33f9d62-8a2b-4130-b415-4ceefcdd13b6": {"doc_hash": "886c811c363328ecbb742acb4b4461bfe246bc761ffd6cdbc2073223b56a2474", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "78ec8fe5-de66-4097-92c2-a136a6369255": {"doc_hash": "e51a0281aadb78a3efdbe429eff5b32b163741e82258ea30b775686dd0059b8b", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "73f2a114-09bc-4a87-8bf7-5c566c0c4319": {"doc_hash": "906e673a537ec526ab9e6b2ef62af3b42130425dc2ad8136c2f681bb10f05a6f", "ref_doc_id": "80c063a6-6e2d-434f-950c-07be1b8711ae"}, "e1c33e8f-df20-4636-bf38-67bbd2a0bc74": {"doc_hash": "b4d001b787d95076cb589f80a0ee44e36c48094709ca6c23a81b7dc6761b3819", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "36d76552-4f54-4d19-9d4b-0494fa5238ab": {"doc_hash": "dd0ddc33274046f48b30c7905befc583694483142cab4a5fa0624bb7bace85df", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "bc1df270-4858-42aa-96a8-08dda24fc22a": {"doc_hash": "a38737980dd65e1f19987a254bf190b8a37473e63ab8704adbcf0528d312ac24", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "04c72e6e-2a0a-49cd-8b6c-2a20faffd622": {"doc_hash": "89b06c6ab57579bf2395e0ac94a4d3025e38e0cd416bc1b94d1158948b72984c", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "d5af4d52-a764-46df-9b9a-a645341f885b": {"doc_hash": "881623634137ea999d685940fcbb2ba3b4b5165f6107256ec2f7036d299ec1d2", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "6500a5d5-ae5f-4e38-a60f-80913814dd81": {"doc_hash": "b74694d144b7b8b0af6e1adc67c18812119201947058b357973b798ba2d6832e", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "b2433ca5-4aa6-4234-bd75-1b52fd94130e": {"doc_hash": "cfc610beb8b1fb989ece2d0d67b6ca13462a45c58f6b81ce46ac2e764a83325e", "ref_doc_id": "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce"}, "00d82153-021c-49a8-b1e6-78a9a863f227": {"doc_hash": "4fb745cdcda13b5e09f4dea1ed248de2b88873a563594697763877f8bf22ad41", "ref_doc_id": "575ece65-56ba-4add-9ea6-add2655db980"}, "2b56ead6-c3c1-478d-88d4-cbd656e41fc2": {"doc_hash": "c780ceae83948768e919def16341bdc703baa5627e1d964c337a3bdb48b663d5", "ref_doc_id": "575ece65-56ba-4add-9ea6-add2655db980"}, "1c3efea0-674a-4275-a035-6b4d44b6e885": {"doc_hash": "95a9b0f35b37fb64b8c64ca84c61fa7d148f786fd6e7baf8e3ebfad520efeba6", "ref_doc_id": "3f98e224-883d-448a-830f-b6ef894f464c"}, "977401f1-3a1e-42da-afb7-486ea47cbbfd": {"doc_hash": "ec72e773ed9f8b9dc05307575dfd5062845235bccd46e943afecbd8f9c6c6610", "ref_doc_id": "3f98e224-883d-448a-830f-b6ef894f464c"}, "6bce0611-0e10-485c-91de-35b5b7c2eafe": {"doc_hash": "805e1175b847ed09000734df2c8a2d328126334cb949aa1e5c09820075514f60", "ref_doc_id": "3f98e224-883d-448a-830f-b6ef894f464c"}, "f39d1b2f-6456-4318-b167-a97ec02f110c": {"doc_hash": "f0d21e80c943a7f4dd0b52ee64caf292a1884abf27db5fbc878cfa19e6cfb99b", "ref_doc_id": "4b9fefa8-1157-480a-932b-5e482b59de76"}, "2bfbff1f-8323-4e62-89c3-531267fc11ca": {"doc_hash": "9b1862137dddd2f32a95eb2975c5b7e6a2de72a9a3b9fb53dff69d497c2d472a", "ref_doc_id": "4b9fefa8-1157-480a-932b-5e482b59de76"}, "929c9895-ea8d-4c93-8415-b3f95285224e": {"doc_hash": "9f5cdb855887154478dd281cdb01e522a23cb12a72a6ba391a0f22a952f39415", "ref_doc_id": "4b9fefa8-1157-480a-932b-5e482b59de76"}, "89cfe3d0-72aa-4e76-869d-c070b1bf67bd": {"doc_hash": "e99115261a7bf2221443f6f91b395e4ccae767bbc256ad15bf92aa0a97566365", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "18d8d8d3-7a00-439b-9e92-73a80b56315c": {"doc_hash": "09fcd89ee988071b8b02d4c239c783fc692e5f9e22b4a44e0639df2c4ad8cf08", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "6503cb14-7bf7-4156-bf5f-6899c273e8e9": {"doc_hash": "38553b5b96c507e8f1f0056604dc2dc3c55b22be9d65dd0da4ca7b72d81ac43f", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "f160bbd5-fa14-40c3-9898-6f740c424d55": {"doc_hash": "7970f994f05959372b8fb6dad219b30535e5b31071389cff81893cea9dbc3e97", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "7d2b65d9-1ab4-49b7-8294-4a4add3bd209": {"doc_hash": "6fac1ef3bb1dfd5558c43aaedd12a4fde0e6379219b24050def3518d7a52ad8e", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "50826074-5006-472e-9493-ea02241e1dd7": {"doc_hash": "cc2e8bc05c54e17bb409265c2a40a3fddc43a10f478599a80547ded6ebd02fdf", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "98a0a7c0-167a-4971-b5bf-63c5c74de982": {"doc_hash": "827ecf0bf07208c536476b319d8fa1eafbf0e01e66fa86af83507d008817f815", "ref_doc_id": "b7a59e20-90be-406a-9dba-5de7dd950816"}, "c87ce170-2b62-4538-bb0d-343371d46b0f": {"doc_hash": "04ba5598242c5764ab6c155e8140f42ea5ee259555e3245243bff9cc200bb92a", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "373b8370-3a6f-44a5-8159-d334d19198b7": {"doc_hash": "b83113c87282f1ed4a1fd3430cb06f8a321dee0d8a17030f60e32888e5de38da", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9": {"doc_hash": "31d533630a5c5dc9d30de75bba9251ada32d431d02e1d7fe5ed7a2b96f43df47", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "69618108-fe66-4978-ad52-4ca7afe74964": {"doc_hash": "f3c86a88665239cfa36807804ed2c7a93ea620af2213d3c9653505f611001611", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855": {"doc_hash": "53ca538e03ccf725e3889f22a013500f3a6419bb2b5b47cf89dbab6a6fef82f9", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d": {"doc_hash": "8b730952a64c750b8c1a015d0d9e5a866595f30bdf0e9cfcb9eda65112590160", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c": {"doc_hash": "9df5628b66777c23c20673e47b0f66723af092058df7f5c980607d9cbf1b3c15", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "0dff6c25-6065-4c39-a86d-eba728f37510": {"doc_hash": "f83614f6c6ddf37cd65a78bf8aeccc1d8fddc335953ab6c1f8a2dd16ce06e433", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b": {"doc_hash": "e66605de3a4685af52f28c0625f944b6ebcbb47bf0f1a80f6ccb6933ef048e69", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "f9ac36af-472c-4d94-915a-b4e65fafbc9f": {"doc_hash": "4f60f45ed3f8798ab4ba0b3e5d1d851cfcf95ce0d44da62b42593f6e2a84d257", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "1f6f617d-79b4-4302-ab2a-16747208a051": {"doc_hash": "f47c6b5d72184393f1568b3d8f351e472f0fdcff7be151271aacb11063898d1a", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "5fe3eae1-b15b-4585-92f9-18a4beda394f": {"doc_hash": "073105327509b1498b62b276c4e302dc2b95eca765d66ce2d67a326b1bce4b03", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "1feb9dd2-cc60-4afe-8d54-090e39753069": {"doc_hash": "410b9326b8862dae0576ad63ca443f1cbbd93c2a16fc6601712aece017d8ff8d", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "b92567c5-0164-4c0a-8a6c-f152f6a5b505": {"doc_hash": "de97158342b4dbbf734ee046ba82fd7cadc92ebca98b2a399b307b3858c412ec", "ref_doc_id": "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76"}, "aad78407-875d-4804-84d6-b4adf8135747": {"doc_hash": "bad1b9b07d7f508c10e094952bc67b0e596532d6df9d5e68bde8c4eb4701e8fb", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "3682b739-496d-43f7-8751-45f384ea91b6": {"doc_hash": "1fcb8922cb4f2da64624f177bd01813a5d944b98a4bb0bf4f922c33b417a1ae2", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "edde16c5-885e-44b9-83b2-8aad7a1dcb53": {"doc_hash": "256dc7c59ea7ef389438de0d9f965fe719c167602903ad215efd48986540acc9", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "abec586d-6b89-4544-be32-03708c348be4": {"doc_hash": "4a369c2be36a3d03f500ccbfe1bdf6916dea3f3067490cf59d780065d6f7499a", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "4fafbfb1-5164-47fd-b2b1-3db77d168583": {"doc_hash": "331ae1346b93f6ce0fee948afe1cfa5bf5d9b14ed7844855075c50ed4211d2f4", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "0413d080-c340-4c30-9893-32787e0db95a": {"doc_hash": "f90f27c28cf9c6d23ca6a4507fae6c09293429a1ed72fe1e97278f64b80dd29f", "ref_doc_id": "782d0397-4b30-4e7e-8b83-acfa21f18ee8"}, "a266fc35-1787-4591-a952-958a35c57cdb": {"doc_hash": "b0629208148ba866e1ad86496ccf8a37b071a2657d8093c19e5839dd7ed6f113", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "c4479d57-d4bb-490a-98e8-69e3e0a90a8d": {"doc_hash": "f5d515e2c127682856fe8541a91674704f6fe9514793cc831ca6b368f6d252ab", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781": {"doc_hash": "ebc4eec05863a471c6be8cbd5749f4b29d008880a17710faa5fd6e370c025979", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "31db45ac-33be-4d95-aa80-07a25748ea9f": {"doc_hash": "1a45521ac536de40e265eaa84c0011bf0e478652b49c91e38b68036fa9fd73b0", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2": {"doc_hash": "3f2aa6e60f6308bf90a56258b3ce990694577588f1f7873cffd8e4f69e4550a3", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "8adf3ef0-5403-48fd-80cd-2a83499fca95": {"doc_hash": "9cd898677c9add59a6aa31ad3b2b58d168722153d99edd80fa8df2b61436f5ec", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7": {"doc_hash": "aa140243d64b8567a141c46f97463aba32717f6b8ababd2abeec0baf75dceda6", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "6ad22a3b-287f-40f3-8097-c84bd800994f": {"doc_hash": "ea79af7b9a8f27ef22ab58fa0ab7ef0912a0996b289d5335892f15cb9e527ee2", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "23cc9541-c961-4b8d-bb66-14a1717db31b": {"doc_hash": "71d041b8497371c11e98b9e215deb663af65b6b473b7a1542374d8112ad97819", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "e77d16f9-4ec4-4c06-8260-ac4682820aa7": {"doc_hash": "c2b75afbfdcc886d94a30ad9ede73ee12909685965855abdf0f5454b9ba3dc9f", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "a81f5dfa-e6bf-48c9-ad0f-0ea0e248e432": {"doc_hash": "56d2d4d72935b047cb81794e4fcfc61f877ac5c17133d4bdbd2967b289817085", "ref_doc_id": "0792f6db-1ce7-4ee2-8170-b9b8e92fe958"}, "77ad553f-14b1-433a-b2d4-5c06d0223be8": {"doc_hash": "b2efbf42b5f1a371afaaa6e625437f55abccfba94e1b633ffb9e607d939ff25f", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "19190b14-38e6-4aee-bdc1-08d7b03338f0": {"doc_hash": "2dde915224cb9b92c3c2dd93079d7231584bccfbc052c40a5bd7171801ccfa6f", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "b3aed713-8e59-4a4d-9655-2a2a9c3696b3": {"doc_hash": "447bb3896a73610fab67753df711ba31408ea4e30efe2924db4846c0e4323dd0", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "e156f276-0995-4219-82df-3abc24cfcfd1": {"doc_hash": "51d023be8e3fe3c7400a31b3eaa55abec3da038b9104dc3a6f631f6a03770aeb", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "e0993496-2f1a-4520-b405-35bfbacf9c4a": {"doc_hash": "65e6862866f0dfe4ed8eb169317e8a0d9d5ba5299b137b587d2791d3293becf2", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "18989de8-18a5-42f6-9d92-ceda02ac9b58": {"doc_hash": "80ff64443780b39f4839e862412ac6c08f09065abbc7d296ce0387654e6e62c3", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "c2680c37-82cc-4457-b4d2-a68e4e3ac520": {"doc_hash": "22c1d643750ea657c843f4e3219845436781c03f49d831a7fd0228a3619b51e7", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8": {"doc_hash": "7a8a5cb40c145d2746efa1abeba74037c6c984b16b029dfa648f21643768e8df", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "a01fd0d7-1b43-4e72-8035-0921193917e2": {"doc_hash": "f82f550750cc81634747219765530211070582009fe49fd5a847dcc5fc53b9c5", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "e61e2d84-2246-4ebe-9b86-b5a4fa40145a": {"doc_hash": "7ce3fd19cc8110ada27242bbb0750faaa6c0944174e24b268d4cba027fcba17d", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "b8d976c5-5905-471b-807d-bfd42ebdef64": {"doc_hash": "71502aa563fd8e2254f57ecaa1292f0c9ac03eb5c67ea422993590b4357f5c69", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "e5cb992f-29e0-458b-8d3e-9589f13ba41d": {"doc_hash": "ddc6afbcd693d3f78f7b35b8deb8dd9eeaade87a2991a9e1e0f7f2a3c0623b97", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "31f24550-f232-4993-9797-8eedf898624c": {"doc_hash": "4e203a059fe52b06921170bce683cd64961abb428bf7c75a5557c5feb6f891dc", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "b35ba429-f391-45d1-8712-1dbac6a55085": {"doc_hash": "41118e7a2ace0ef59d300b3a783dfa454bc9f4023e906a18892fc10e97307c82", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "fe229d58-d503-4f02-9143-9733d0775ae5": {"doc_hash": "f90b260a5d4415856ebe28941317a58830a18dde95e2eee0059e4419c662cd2a", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "7bf996a7-aa40-4f7f-bd57-319a28ed06f4": {"doc_hash": "dd4afcb54ef42458ff7043565105f6c17f3b59fef740f9fc1070500af67aaf2c", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "af631a0d-99b1-438d-ad40-f0e1785ec530": {"doc_hash": "ae5e6f9730824a39c00572d994a8807aca4f44196afa15d5f4ca37efd0c4bea9", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "0ec10c6d-3947-4a4c-94e5-a4c4639845a6": {"doc_hash": "b9a6790a1a803cb5d699e7c0ccae1f45541e06148803bbdefd49e7d90a14920a", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "6e8ad128-bc0d-4659-acce-e78183df4d3f": {"doc_hash": "e69a4e5d017431d58594e5a0578a0b9888835b1fcc4f8fc1b5ac087a2da7928c", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "52fef8e1-92ac-48d0-9cc8-15ddda180959": {"doc_hash": "61fcc6019fe0b036270b0ce334b25c78b1ca570d5882d9675d69fffa45b13bcd", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "bf27a250-7d2f-4543-b11f-4acf97115d80": {"doc_hash": "f469cb48ec559e20107e86453676747454706d307d65113a20627bc461bd2eac", "ref_doc_id": "933fff30-0240-4e90-82f0-2259fce8b134"}, "53616b96-c019-405a-b7a5-1e9289202e1a": {"doc_hash": "f0b376234ffed84ac277112f02f5629e6c252cf69a7efc57742f976939fe5c7e", "ref_doc_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f"}, "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3": {"doc_hash": "160137505523f211608a89b49952b9f4daf805a3412b3092225809830e9aaffc", "ref_doc_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f"}, "5999e17a-87b3-406d-970c-43fd5d75886e": {"doc_hash": "ed41446db17938875091f6e59684f06e4d9bb6b4da235b2ebca0b13f99fc4a01", "ref_doc_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f"}, "86a953a2-7a4b-4a74-8b5f-f6dfc4b2e904": {"doc_hash": "7d093b453371fd3703eff1db131e14d78cb87ea6f74e75a33ea8b23f5a48753a", "ref_doc_id": "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f"}, "60531d1f-6e49-4e37-b6cc-f92c46e394e6": {"doc_hash": "1afa1c13be8b403522938f0a7e4f1ce6bd24dd66529ad18d15bf1f2499a96919", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "880fbdc7-8413-40d9-beff-fd0abab4aeb2": {"doc_hash": "558a2b911946970838cf83a7fa6ec3fafcdff70acc1efa8024d3d58f95ffe4af", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "25fe93fe-4b10-4680-8bc3-42016de9675e": {"doc_hash": "317713a62b6b3db0916b513f5fc97eab33aaa43feb8ee998e674e364ee60108e", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "5b888102-b5b1-4543-b20a-ed55eb8a42fe": {"doc_hash": "527496d491636e9000a445ef452af46f9dae04d4aa5b186e320aa1f916e0f957", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "9b505d21-15dc-47bb-9d38-fc303801281f": {"doc_hash": "ac689d205a334bb06f923d30c97bd08ce39bb2fe4f7fb762f81d344d02aa61ca", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "74e8f08e-9305-4cd2-92e1-a2068429210a": {"doc_hash": "58814054020b6718a58fd36634e113f429c68f821ea0fdb34e2765c206b8fd00", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "e38fd8fe-d65b-400e-897b-c370e73a4e31": {"doc_hash": "05c3ea8c9027fe2c0ecd0d91717a7e299fa13de9442c707d95100f69293a9fbf", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "90c2fec4-3b52-468b-9e09-7222d3676d66": {"doc_hash": "1a7a48afc48dcc3c9f028db73710fe4bedb4f46820861e49be3d2d5a8bb37338", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "f4bcfed2-5f52-41a4-8ad7-ede8e8683871": {"doc_hash": "90e4951fa61281fc273031e0d8b91fa9ee8e1ed0bb9af8fc4f0465f8dc2c2f11", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "aba05a1e-e4e4-421b-9cfe-a02985e1e42e": {"doc_hash": "a74512d4e1fc666f8d08d3c27414c850053bbb8e02a24791cabbc9077e521b50", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "ab832f2e-1547-4687-b38b-93c03b2b229b": {"doc_hash": "4e9e1c4ad86fa04c55b64bb25f45e3c1346585ff48662d73c0bcd67f0fe5926e", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "6deb9200-5ce7-4516-9139-4d6fd10ccdc9": {"doc_hash": "0c6a98a090731261ca1ad9187943e5dbb79b6836700812815fb0ea31236db891", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "21cf8d5d-a6f6-4a85-a732-1eb8680fd240": {"doc_hash": "9323580bfc55185699c48ca9893f9e8320ba8c02146e575ec3191cc65ddf9b60", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "048b6afe-2206-4ed2-a597-c841a58cb8d8": {"doc_hash": "079e0981b666eb965178d8cd4c90ec5bd755ab9d013cbaa5c7ad66db3dfd5da0", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "1b1aed04-447e-47ef-a103-45a1b64cd549": {"doc_hash": "1c2dda78f304ef5d72c98d6bbe556e13e1c4d2bd315cb02669c3c2b534224fa7", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "8dbf483e-d146-4726-9c8b-15d2fe44c62e": {"doc_hash": "fb8df1fed21a1b8eac57043db8c83aa08863a7ba4e9b7ce809ffc9781fd94710", "ref_doc_id": "bc57e199-fc1c-47c7-b6de-9683a3da9a46"}, "b0325023-1fbb-4932-8d67-dafe7a03de1e": {"doc_hash": "76aa1f9081d80c6c25f3754b199343596a82cf9d33d6cf5ff3ed7f806c9f89d9", "ref_doc_id": "52de68ef-2841-4e50-8110-2cf411412210"}, "9b48adbd-4990-4f93-939e-5a1b5525a218": {"doc_hash": "ad3b2ac2602af86592cebaca19f4c7d7af69e6800968fe625767c04a5d91ffd1", "ref_doc_id": "52de68ef-2841-4e50-8110-2cf411412210"}, "9548e629-7c81-4155-acf5-5229c83e1591": {"doc_hash": "31be806f59956b55500ac46871044a4c6e5629df35e6c67ea09e895b112c838c", "ref_doc_id": "52de68ef-2841-4e50-8110-2cf411412210"}, "a44c0960-e966-48b6-82b8-51ad44ab343a": {"doc_hash": "714cefe9e1c0c6f12a8b69686e1f8c855c27c19b2ae5cbb689c6f1317bf55558", "ref_doc_id": "52de68ef-2841-4e50-8110-2cf411412210"}, "f552deb9-310e-4793-ad7e-365bc3571b62": {"doc_hash": "b170e7a83b32ec00eba80c040bd11dd9f9d74a93d904f284283a337eaec1e6c2", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "adf43604-1969-4ea6-afc2-96dee021d606": {"doc_hash": "0b11b34be863782c9fb35ddd51af10a6ee076e635338bba73bef55accf3f16ed", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "c67d5d35-335d-4c9f-a353-0d24bdb73860": {"doc_hash": "ca4fe03ab847dbf5a27c3cbbc0e6327fab5a168e890205c4df867c1d20c78f60", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "42fee34b-0f57-4e4b-b933-57c91876f56d": {"doc_hash": "3266c82edd14796217c20d8c24d59856c8eb0bfb80f75deae238d9cc5f91deba", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a": {"doc_hash": "a96fa382ba0a98971c833ddedc2680d6aebddcf927d4c51ab82a56858403d6f9", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "af0da971-9012-4fd9-8b4a-6dd30c57fb27": {"doc_hash": "ea94599be8d1a77d202b06fbd3ada38770c488ba77a337cb68bd84725a4555e9", "ref_doc_id": "1e030b1e-8b52-46cf-9d25-e4a2c954405e"}, "025068da-5304-436d-a2a5-38e9b8f5c44e": {"doc_hash": "1e3101fe16a2797a6b72c1eaf0b48cdbe2ab75889941bdf2066fe945be124bdc", "ref_doc_id": "24672da3-afbe-4b08-981c-3ae455b4d1db"}, "c13dc6e6-cdf6-490f-8ab7-178a39195adb": {"doc_hash": "759db0e4483de72c2f778281125c5eddd65360f260c373b6221af2e297185f3e", "ref_doc_id": "24672da3-afbe-4b08-981c-3ae455b4d1db"}, "4c79da17-4608-4041-9f49-a5bb88876ed8": {"doc_hash": "137726fec51fa8e8124c27e3b333029aa0edd25a691ab494226486b369b28d88", "ref_doc_id": "24672da3-afbe-4b08-981c-3ae455b4d1db"}, "49201b1e-bd14-434d-b9e6-93f4146450fc": {"doc_hash": "c82fca05955a94b30d305c752f182f2ac99f875e9948c96c5bd223fe12bed9a4", "ref_doc_id": "24672da3-afbe-4b08-981c-3ae455b4d1db"}, "1f96e69a-2a17-4462-9cc5-fd707d0abfca": {"doc_hash": "1792bf654f65249ed6c01c59c41ad5a086dfa66e92142a674b5bc6f40ff9ed31", "ref_doc_id": "24672da3-afbe-4b08-981c-3ae455b4d1db"}, "c64fd44b-d449-41b3-886d-c4c35019b3b7": {"doc_hash": "81df2405d14bb1e3ca64899be48fb465aaf2e0a7fe65cab5c27ec4da35887f98", "ref_doc_id": "e59796b9-6244-4f53-8bd5-6b7eef09db3c"}, "3c3f0a9a-e744-4f3b-904e-4b35e72a1d99": {"doc_hash": "2ddc3a39d9639f3729c655f963a2e69db3eb98b1abeb6b97642c64fd1f79221b", "ref_doc_id": "7969349f-0932-4054-b06a-1bb0a4013811"}, "167c9395-3707-4d12-9417-373b682dde3f": {"doc_hash": "22904180e1ff9019333695766cdd17d18c8de4fe3f2c84742dd601e5182fc0a4", "ref_doc_id": "7969349f-0932-4054-b06a-1bb0a4013811"}, "4b83e89a-b7c4-4de8-8ab4-a4cb820af648": {"doc_hash": "9f5bc16ce193fb65de8fba4bd899fed0c96b77f025d07e663d2555201e17d3be", "ref_doc_id": "7969349f-0932-4054-b06a-1bb0a4013811"}, "6e40ca45-410b-4269-8b6d-ac1a7dcc325f": {"doc_hash": "79858524c30a5d99fdda623bc184c1b54ffe1bc57d4d0286f2c86f379fcc6603", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "13c70787-8c2f-40dc-bab5-f2f73add34e9": {"doc_hash": "d5af896f735a08955196e44c065fdb38cd1dd13c2668197417142482ded57414", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "e81fe0a7-50d4-4cac-b064-9d0655a324ec": {"doc_hash": "f0a1df0aaa2ecfa7c16ff9c040a26bfa13b463e6d7b9ca26e19e790065c55218", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "fc139acf-0976-49ac-b49c-4b34e1e344c3": {"doc_hash": "432ea6dafa3c1a090cf64ea0b068d72df89dd7c41779cfb8e0877f9ef3d3929a", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "04829d53-e19d-4a30-83f8-864ce7f72e09": {"doc_hash": "6ce7a4570e6775beae40346c1bc34f07ab5cb088bb013e543e706b79886775e0", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "cf41b625-bbd3-4999-b417-1077dc1c8704": {"doc_hash": "e7aa2e5a871013a788fdc79cb6624dfe773901cde98e1a2405b2856de79398ff", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "8390c7e7-4b49-4925-b5e7-430138a6354c": {"doc_hash": "ad6b99aed073c02941ec0ee492615a0bb506f8d4210b5ba4387b672b1c5aad3d", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3": {"doc_hash": "4ee60fe0819e555de9ba649017ba6bdfbc9fd78a29ee197c210ec0003db8e069", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "f011698b-98a0-45ab-aebc-167eb7265ebe": {"doc_hash": "f182e294356aab61a7cfedbb1ebece8f80518e8054474a08d5d654abc6573239", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "2d694c27-0e0d-4c9a-b593-6db46c0e720c": {"doc_hash": "c540471b732dddf56cff3b471c5f129529a8809963d9bdff14992d07bc098421", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "c3cf26f6-5e46-4836-afb4-309181ae9819": {"doc_hash": "4c63eee33e82305c28147a7bd78d7bc63ebd20ebf250630ae87e94415b068269", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "649cfd30-52b2-48ef-94b5-3198b11cddd1": {"doc_hash": "17af9684f02315f418b6ce060737f94089f0fab6101056ee2e3e7852ad5b2056", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "0c28dfd6-3ba8-4ee2-9799-c305d99fd3e9": {"doc_hash": "07cf2137acd6c4c29acf8db3385e16f9943aa9d4dcf92c295084d936c98a93d6", "ref_doc_id": "2b92e314-8ee8-4b36-ab4d-f277368f5408"}, "5cdddecd-a33b-4725-9c05-8886e43cdc98": {"doc_hash": "bb0199ccf6322de50ed3f1bfecf3eb4e34188365b11c1988eb15f4ef14bbe78d", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "c6f4f0ef-6227-434d-94d6-c58a560f1bc3": {"doc_hash": "daf599ba07cad40f885e3ee68ccc55e5a8031c6b43847635b8647ac8433fe16f", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "833883dc-9c93-48a0-86ad-8b1e627bb377": {"doc_hash": "84b9f552bfbbe62b1c84d8c8a88a00baef6cc649d8b6abd92d34f92bf7a7ee61", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "bfd0b70c-979c-46c7-b602-3b5fe19e2b30": {"doc_hash": "58f6689fb11e14d247b47e0e475f8cdd91cd4fffa4468983a7a48d450d4bb0d9", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "9d765341-96a3-4740-9a66-dace6c50b460": {"doc_hash": "d820fcd4c4ae691d7d67359dbf19be69b9b6a539b737d3972d6428fa2f5850f9", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "50d7c084-8c60-4361-8d03-76866a07751a": {"doc_hash": "00939928e6b3c923caeaf83f438c6242636ec8b3da263a3f6aaa6d983bda9d42", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "19d33ac9-ccd2-46b3-bf97-6003fcb830b0": {"doc_hash": "0a9e6bcc387cbf883c947b69a66af9d55af394d674b721e9220ecb31d82fda50", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "ed200732-cbc6-40dd-8784-8925d94b1e91": {"doc_hash": "a0169802385fbab90efb06206f0547295f2f472c8a180f2ed588a5ddffeda30f", "ref_doc_id": "94f103e9-fddd-4546-9829-c36e02b52ded"}, "2fa82bc8-d180-4ab4-a194-bf0f178e2147": {"doc_hash": "5f731dedbfd7aefd3a32d5b45d2228ec32499e3616d525ab6ca7764319ad956e", "ref_doc_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b"}, "837c91d8-f42b-4eb3-b982-037fad5f102c": {"doc_hash": "49ed28e2c1cb115f7c9364faa3a6db5af61ddd9e5c60b36ec185a60210d119f6", "ref_doc_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b"}, "8b8c5105-0f69-484c-aae2-5188e7b37cf4": {"doc_hash": "34bd7ae861aacff1eda95409fc014211ca28ea9e4c589dbdce5c5fc48ea578a2", "ref_doc_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b"}, "8762e39f-af36-4ced-8238-076a9e3317aa": {"doc_hash": "408df2e270ac6700c594de027623926a75db32a51d9f34cd3c03e48b9bf87870", "ref_doc_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b"}, "d5c2a9a0-b11e-412d-8310-85a436df567d": {"doc_hash": "63d4fc12d1f20a4395dd4ebe8ae4d9ef262535f0896f91679070653140d37757", "ref_doc_id": "867e9760-a3f4-4901-a004-7ae1a7a9439b"}, "19cb0415-6b74-442f-89da-67355abbdd42": {"doc_hash": "4edd39747216edeefdecc80888dbd8c8aa57e6308374f6223e1823ac4508c8cf", "ref_doc_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea"}, "363bf672-6994-43cc-9763-c2e3596abbf1": {"doc_hash": "9882b47271e24da24680f70ffbf8c622996405eb675ddd457a842a5aa330b1db", "ref_doc_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea"}, "e67db99c-df98-47d2-b438-f815b5f1ef41": {"doc_hash": "2197259c9a455bc036dcb479eebe9bbe5cd7b45a3cb19be26ebeeec8df56d933", "ref_doc_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea"}, "b79b80ac-d3b7-4ae3-95cf-c4943f1df0d6": {"doc_hash": "50eb0207e1f3abdaebf9ba2f1b38aebb7923c1a4d9ee27ad157d006e25423201", "ref_doc_id": "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea"}, "e2bb4f0c-2acd-4195-a13b-31d4c2092a4b": {"doc_hash": "91e4e15fd96e4ad06ef886e074e13a0afd576ed2f077917e7b977b20987e7956", "ref_doc_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4"}, "4673e718-4b36-4a9d-85b3-6565914361a4": {"doc_hash": "274ff6e4045ba0f0c9821fdd18d1b7e394d9cf99a016516fddcd9cd3a7f87464", "ref_doc_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4"}, "71816b2d-ad3d-4820-8489-7ac8deafa0e4": {"doc_hash": "2e505a8f787bb942109cbbb168a65e75b335244e1c7128a35060f911dcdaf3cf", "ref_doc_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4"}, "cfad766a-2027-4e61-b3f2-e6ffcd3b380a": {"doc_hash": "4ddd1e4d743d70f1acce7560d6c7c3191d2020c74491c1bfd064962087554ae3", "ref_doc_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4"}, "dcb3fef0-09fc-4f92-8a61-7ef7fc4c0283": {"doc_hash": "56fa758569dd5f4da8b3760bb0ef2cd0a3cd0b497216772e1189c7ff71f90bc9", "ref_doc_id": "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4"}, "cdf21c5a-ad02-4ff4-a60e-7981a3d95b51": {"doc_hash": "71377b6b700a5be4eafcdda81390daf7970b64671a6fc341b3d6d696f0da74d8", "ref_doc_id": "351e3a3b-8bd0-4722-ae19-a52bce152361"}, "01b242ab-eed3-44c6-a522-3847f0c5c782": {"doc_hash": "c86b2a3a9604c4e98f7439dcf86692a311cc20234d5958a29f48fd22c299a8ca", "ref_doc_id": "351e3a3b-8bd0-4722-ae19-a52bce152361"}, "7d0f260d-9140-45a7-bb6a-2b62b5591248": {"doc_hash": "11412588d5c45f97ea400d87d959db97c0aac4e5aecdb6223a08eea56bd9b744", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "78677192-2503-4e9e-8534-1e55cd7718b1": {"doc_hash": "7398f320ea9bd680b75512ce34afc51422a1787c06a020e5e8f9c4076fa21aae", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "e889a92f-7491-42ac-b5b2-29dce7ba71ca": {"doc_hash": "92d583ae543666bd7c902ea98a0d2d552b9e026aad866f81d5040a3f1ef24aa0", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "c42c4006-3f9d-4219-a357-e2fba71c34cd": {"doc_hash": "609b21a6d91096160153aaecbb34b2ae1904711dfeed05d4e0c7e841d765c355", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "2c56525d-1ea1-44f0-bf0f-184830e6d12a": {"doc_hash": "88629c38aba2809e2239c226f0da763ab5e3c335247a2f1f7d915521b00b1662", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "96856653-95b4-4407-bc21-eb57aba40aee": {"doc_hash": "b60ca87d7c5d02b8b47d88709ca266807cc00b6f38fdc21c1caa159e7ec7ebdb", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8": {"doc_hash": "74188bf8d89bfb1d38edf05ba6e85696186f8ea988f3b6d73254e0d442f9e0ae", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "f690f46a-64b9-44ab-952e-29b42331acb1": {"doc_hash": "a8d1a369adfb04c654374d9f8b04f8f7ff9cb930ff323228394b2fba42782ccb", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "33ce5610-8a30-4be6-8077-8468142ba023": {"doc_hash": "0dd77e997c8ce8a5124a9a7f5cf4fc573fdacebb56454b605a956b4d2dc07099", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "9494608e-ce09-4c80-9ae5-12200663cb68": {"doc_hash": "d1fa1cc8fb09637f9c5e6b17538b899ce61f5a224888c6bd5c0422e2bf400de3", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "6a74d468-382d-4915-8d3b-3c5dfea5fba8": {"doc_hash": "33574889fba88526d09eb2a40fc51f486661b9890f089b6bcd83254c0f3aa681", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "1ad96e22-2867-4b73-9425-5cd871c859c5": {"doc_hash": "c26798449eafd9ecb64a92785ebea7fb865e77bec1faf9d56173c78cd61ccbee", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "be1ab419-c0cc-428a-a12e-120c64e4a43a": {"doc_hash": "d88a002745a756c45197766193d9e5026a780253c96423ea79c33af1955cb42c", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "9fb6b280-4cd6-48ce-9146-418e5f79110f": {"doc_hash": "aca035115a8d57db9538c87d33a699f45c574efa781ab396f5f28a28ad429e59", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "398ef57e-536f-4d13-ac3e-91e1130167e0": {"doc_hash": "52ad3fa326a47ce99afc82b728cd539c244fd7df1cfd1e3f6c1614d955a2b480", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "fd72888a-3797-4837-a6d2-f7d306d3dae8": {"doc_hash": "b89eb937d4569ccb142676b2a2db7f4e1c565034da4c31df65bf3539aa0f6058", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "32ed1467-361d-4545-88aa-cf7fba530e95": {"doc_hash": "d909a826b8f48b6cab832722982d23e608cd57e3911a40baea34be4de552997d", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "18fce0c3-5ecd-4d74-8bcf-50afcf71257d": {"doc_hash": "81c7af4576f57f62a6ca4da1fdc8b0b86216864d933306c8944f396c6d7d42bd", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "40e05d76-5a1c-416d-8beb-72e9cec47985": {"doc_hash": "630dc2d0cd331a41dcb8f31ce2c318dd158d3361ab0029a86ddbeecc7fe7341c", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "1052f0ef-6f06-4986-acfc-6c47f7f1f235": {"doc_hash": "b25a1c23afede282403a34f5b91b66ad967218cf3e7c3c3c2e91f27a044639cb", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64": {"doc_hash": "f3ce7ccc974c7bf354ac275037a092c94f6a9f86367373b0819f98267927834b", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "e9b050d1-94e9-47f6-9f08-18332b4a2bc1": {"doc_hash": "f0a051e489d74d936afa428e6772afdee485da57a39847915dc5bd9832b0eea0", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "5be11002-2931-4632-8cce-f99377fee540": {"doc_hash": "6ca2278282f7a451f063706e706b0c2a8de56f9307072f02b28346eeb39aa4e5", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "2af4df6b-fea7-4425-8ecd-5902d9fb7697": {"doc_hash": "7d63a2e4f52716f746cd2223a4cc9c281e38904bb49b3038beab7ac40fb00131", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "7c2db8fd-2b89-4fa6-9958-65647a1561e6": {"doc_hash": "81688a7edf80e78e07c14258f2cc47b608a71b56a74f439487e868dc2be7bd94", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "5e474c96-88b9-4a9f-ad55-f91edea5f6d3": {"doc_hash": "24209731612f99180302a47486a82c1bc3fbce29049f2f39b13b0d5500b39d31", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "9fea0b55-5e7b-470b-a88a-36be13f93541": {"doc_hash": "302372d22873f71a7a82120c21ffeccb168d2d4565084e6e89226b05fc6aa134", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "b667088b-ff12-4eb7-9fab-83d0e54fc8eb": {"doc_hash": "d925bfff2d5eaf015fbe435aceeaaaa89b465fb5f0f4c19ffdd2c3abf3e34be5", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "3b989b7f-6606-4829-a5d5-efbca591252e": {"doc_hash": "a8d1a369adfb04c654374d9f8b04f8f7ff9cb930ff323228394b2fba42782ccb", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "daa63ccc-1319-455b-8c20-ebc10dc6bb7a": {"doc_hash": "f37da8777a87931a70c439d4ef70be1aaefe1baa7594873641e0469f5e388109", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "b792b641-cef8-43f7-99cd-57d683923604": {"doc_hash": "937640b7054727db57724468effe9fcf573f8d6ff406792680263be1797a1b38", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "d0b1d3ee-7d56-4b2a-9483-bb30389168b0": {"doc_hash": "c7561de4b49ffcb409eec960250cc6e9e77f9deb8ef67c930807f66c63bae042", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "430d6580-313b-4f58-babf-d3d527b31fe6": {"doc_hash": "81f9545531cd0eaf37aa40a46de7ed78ac039df53840a50887c5fb23bf146c6f", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "88ff04c8-706a-43f8-87ed-f1114f399a1a": {"doc_hash": "a8d1a369adfb04c654374d9f8b04f8f7ff9cb930ff323228394b2fba42782ccb", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "f8907831-93f8-44d3-bc79-477b259a01a4": {"doc_hash": "ace44dcb3ceb135c7500241a5e335f347b5cd51b2c18feb91b35a20962dc3319", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "c27c61ba-939b-4fff-94e3-783c4ba68ba7": {"doc_hash": "cac9d2722845a8238336f97bf33d730e497f6ebedd0f1fa9160eb09711362c42", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "643d933f-93f7-41e0-bb16-5a77476bce56": {"doc_hash": "8bf2db3fc263618a5bcdb84812505297a15b759fb3623fad322b1eb3b955f038", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "e9579c81-d375-4c69-9e0e-07123c1a0b7a": {"doc_hash": "46b1e4efe70fd88927d547cb57922a22ed10466b6a9a056a26ef6a753645ba34", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "4da8cf59-9a19-4b8c-9c66-3276d5c85446": {"doc_hash": "ba064c169219a1a08351d0b28cf92778ba23bb0a7b077eb46ec2db4547c30279", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "d8811561-6e40-44a1-9bde-4f188cd0d163": {"doc_hash": "2f7de2f5e647adab0223b1f3081d74f47b2401cb5049ed0f9129b2ac9b9bb464", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "c5640466-b63e-406f-8ced-8b08f27ec704": {"doc_hash": "432fd4911e7e24e24ae911a3e818225a7fd24a8201e3351f0e395178ef39897a", "ref_doc_id": "d58db4ad-45c6-461a-b257-b72c55b489b3"}, "f1ece6e9-208c-4def-a90c-0ceb778e5de0": {"doc_hash": "d3c968c6714861b725d74b67e4556e99cd8eb1772bfef832f902b98ef415e747", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "5bf61445-6aac-441a-97bf-286fbf2d4dfe": {"doc_hash": "8d6d5c5a87081df63e8875ea8356bb1c08fcc14de9b5e0c15aafd5cffb19ed00", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "ec671d78-b941-4cbc-b18d-82aec43c474c": {"doc_hash": "c63e1e0cf53a46eb688439d127496bbc0f0d6d53ebd534f4ef3ece8895c94537", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "5c1f6285-16b5-477f-95c1-9d7ae0f599e1": {"doc_hash": "d4b790eb612409200cad44830b252c05638a932f794176615e0107d6e139856b", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "f48a217d-4cfa-4cd7-bc36-744cb34622a5": {"doc_hash": "044cce573c787b09f407af7ec29ca6ac96151a4c65cab582f8aac0d680b53b2d", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "01ccfb78-2a78-42ce-b28d-dadf553b774a": {"doc_hash": "9ff5dd710c5f687c5aaa864667a4c4cf833e95ad85052c8bf004c049bc43b053", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "63efe721-1a9a-4359-8488-156f687bbb89": {"doc_hash": "31c87d7c509c44025327175515f4a24335d43582fa04688fd0ebf702bb7a9113", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "425d31b9-5c57-4bbe-978e-b64da79ba6a3": {"doc_hash": "e2c93ba94ad5c70e9b8fd4c3ed99bc15a8655107167931a79db42f2603e3c5db", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "6c94d748-472f-4a07-93f6-4238e1830b67": {"doc_hash": "a327c91711027bab381c1f0df96abbe5ec885bf7985948c8a96ef64973b4f419", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "2df096b4-c325-4a75-9e1b-267d395e6346": {"doc_hash": "3baa9068ab7058d7627b736d17997396b54888ee2a5c10c1c1cb6171c120ac02", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e": {"doc_hash": "b1ec869a61f09d524d89ca39b7d6c63387fc14b6547e774e4ee45683a5225b54", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "b7f82f91-f82e-4412-8bb5-48114dd314eb": {"doc_hash": "6fe21ad7b0438dfdd7b0aac396b7080716a709a92c4e693d5366615328e08862", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "ea39dc5f-e065-41d9-a26a-e78bc209c26c": {"doc_hash": "331890742778f1078c5038fa98f3d67608143bd2618d99ea56473d62e7019b1b", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "77631eb6-9aa5-484a-9d9f-6ac6957649cd": {"doc_hash": "1b61c4c7e97f23cd83abc78eff74a481664cc5045b0ff5912fbc62f2e18cccbc", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64": {"doc_hash": "ca4cc846f2d1186d3ec4f37423aeb6c9632dba0ac35dc835e75cea9a306fbb95", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b": {"doc_hash": "20a4e56cbb9ae6387a16e297393769ef2746ef5299e1a08914b713b63565e377", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed": {"doc_hash": "c2e5f1dc24c156424b7e83689e5a52af7c74a3876164720f19780ba6db5d3c74", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "18952842-9744-4c3f-8bd7-414eab6799c6": {"doc_hash": "2847d8fc752ba4b2161552e66f73afd8fa6e5bd099d390cd90a185f14b594185", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "92bb61fd-d4dc-415f-b4c0-40887ac4700d": {"doc_hash": "503d1fe273eede7288504da8a945c08819b316e2f3869531d8b39b24916a9007", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86": {"doc_hash": "289c95b2bfe48cfd59912629929d5c8e5f10a029d028241ef4eeab79be051828", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "a04b71bc-8440-438b-8606-6faacab14d13": {"doc_hash": "15516b66280aa61148f800d213aff16ee68427928a9819ce734d04b2794c1c86", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "20be5359-5086-4d8c-9d24-96957a0eac0d": {"doc_hash": "03407a5cdcb6af31d1ed3d33c3cd9c28d25777903449a263bfa64f39a8a09ca6", "ref_doc_id": "f06e036e-6253-4473-a59b-76a5e3cb2f3a"}, "0bf0ee60-402b-4684-ac11-822564cfe411": {"doc_hash": "06a761aea34e9b8bea37eae42d127bd30b171a1188a14750d18b43186cae5a1f", "ref_doc_id": "6251e44c-e1b6-4d5b-a30e-b8fe02b3f70e"}, "229b044f-86f2-40be-b8a0-4d2612b11638": {"doc_hash": "12c02265504e099a30fc3759740c510db5216b5d4c9aad72b7531a0939a97f69", "ref_doc_id": "da1b57c2-08d7-4d25-b282-c70c2ce5dd51"}, "c3b313a6-d17e-4610-8d6c-40c0ff29410c": {"doc_hash": "03f098427a959978e711537824133558ce38e67c7cde9ff0347da231c4c576a7", "ref_doc_id": "5d7c14b2-a681-4d78-9fce-e4673c523ae4"}, "5eecfd57-98c3-4490-b69a-544b7ace82fe": {"doc_hash": "6698dc18710649394eba773829b66fc2dff13ad092a8db24805ea6d02505f1b6", "ref_doc_id": "0c928975-f723-497d-ae68-b6f93dc417bb"}, "076fbb71-57f8-4272-a0a6-bbf5009b5219": {"doc_hash": "5b4d1bdb0556d241c30cdd5ac79bddd7d0f42640011e328e4a8b37de9c7d41bd", "ref_doc_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c"}, "10b669a7-6a81-4007-9400-70471121e386": {"doc_hash": "e08b7cf5911eaf9ef8c7e4833968f6a57d4456cfd2e3d35c0230ae87b7e7f007", "ref_doc_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c"}, "3fe33f7c-9d54-467a-9713-1144d87e3ee2": {"doc_hash": "1475527b57be37d1b3fddae84e2add5d6c384032b3fb9c155489b305de34b0fc", "ref_doc_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c"}, "9a7c2ea5-c3a7-497e-b8ba-6808361853fa": {"doc_hash": "975a1ad12827a96d4f1b010299ef04559ddd2ecc825bd6933f8fc6a11b687c37", "ref_doc_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c"}, "71c55302-e8cb-45ba-bf17-521899adb206": {"doc_hash": "eb20f9a4a7ab23a365b08016e2c5b1c6a4af1264b675314ff6d89dd88b581921", "ref_doc_id": "3e92bde7-8419-4113-9a9a-88b7560ec57c"}, "074e70c3-b309-4954-acab-64113cbfdad3": {"doc_hash": "c807a8f8d49a2e2fbe9b7134abfe186908fa941f2721df407c0caac3cdbed67d", "ref_doc_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a"}, "d6d48449-a2ec-41c6-9895-38dc453ea51c": {"doc_hash": "bfa7ca80c26fbbe5d20caa6f461ef244af06e049368fb2ceb86cac142f5a7ba8", "ref_doc_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a"}, "619c66a2-618f-45d9-b469-e767421091af": {"doc_hash": "e405b76acfa175b8ac88e6da05e772bfb393d2eed0e7e9693da20d3323416ebc", "ref_doc_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a"}, "b82a3f66-d60a-4ed3-a5db-fd9dad8ef939": {"doc_hash": "c754f2c19e087285f53b84e8f7645621710ab83c4d672f9a1d300f5a01e97a81", "ref_doc_id": "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a"}, "4937d2a3-2ea1-4179-890b-480c6807b64a": {"doc_hash": "b054d1d30da820f128f545e38201629348748463127493828e9b6da655950b7b", "ref_doc_id": "02aa9144-ddd0-4d46-9be5-3a21cd1ee053"}, "d9609390-b918-4d26-a848-9fffc2c1d130": {"doc_hash": "595bf0091832990df01b170b43a54f26e486ebf4855a2efd612049814ec08be4", "ref_doc_id": "a6ceab34-4c49-41a6-a67c-9b3edf2c3de4"}, "aa29eb04-958c-43ed-bef4-c88cea03c4ab": {"doc_hash": "46af4efb17e38a8d1afa1b744c7f9f852c0543e466561536ba328ac7de9f1574", "ref_doc_id": "011d0571-89c4-4b95-85a0-e0972b09b129"}, "f2804286-d204-495d-ba2e-75c2efe23c25": {"doc_hash": "1a754e8b34161e45b821e2345a503e5ca31b974206d18d704838181213d92612", "ref_doc_id": "011d0571-89c4-4b95-85a0-e0972b09b129"}, "661fa226-e3a3-4fbe-9053-acdc045bc5e9": {"doc_hash": "c84f9802078246b9d07512e82c2792735f74cfc1dd58ceb3f33fb95d854c075a", "ref_doc_id": "011d0571-89c4-4b95-85a0-e0972b09b129"}, "fded3ba9-26f6-4928-9683-a1318974627b": {"doc_hash": "ed7ec4c5d75b5d7189760eb637c6efc8abad4149c0e943c48072441d284114a3", "ref_doc_id": "011d0571-89c4-4b95-85a0-e0972b09b129"}, "32761152-3ab7-4175-a1b5-74e527207785": {"doc_hash": "af31f4a9f1ec75dad686333f85cd50accd03aeabed5025c32dd6146b190434af", "ref_doc_id": "011d0571-89c4-4b95-85a0-e0972b09b129"}, "bf31f39f-c5bf-4852-95a3-c2645d469c01": {"doc_hash": "a40316de89eccc9afc9d6b025403c798b274fd496acfcb77956f89bc835bf741", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec": {"doc_hash": "6bc53e90c80afb6338a0a58d3968140fd3645131fa48a370ebb86e5c46f98a9f", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1": {"doc_hash": "c8c80eabb6ce89ee0c0b6037e858020b03baa699e3ba6bed5edb451890821317", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "fb7d8f9f-c877-443d-afd1-053b0c8c0790": {"doc_hash": "03417c6e8554e592481f4ee5387420bdfe2e34c5f58adb02434177f7bb62842c", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "8a037d2b-5ee6-4d07-8046-2339cc67cb81": {"doc_hash": "d3cf76158208748b479f17d83bb37114e3def7d9014db783b5e7b00ae6a975d0", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "3abaa560-2c5a-4c92-830e-5269428c6b60": {"doc_hash": "52c79ce19e9876af162315ff026265c3fbe9a392261d3e84159706384f73bb94", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "050bcd66-f3f6-43a3-a78a-8ceb04669d02": {"doc_hash": "9f06c2039a49cae2b64abf72d89c699e23fe013e679d042c59dabb7068550ed5", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "9df2d7f0-73a8-45aa-9684-9069fba1faeb": {"doc_hash": "f4aa3ca6f8a9dd57208e36fbbf18053cd6b2e9efba358fead4cdfe32256c3076", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "39d2b624-1f4b-472e-bd02-1bf43e2daa66": {"doc_hash": "2e93545b7953b9ff615eac68f877888cca52b6c26e33d8a8f199bd1bc301984d", "ref_doc_id": "362bd1bb-ce0a-48c7-ae49-75f524d99f94"}, "c520cc71-d2a6-47d4-87d2-20a1e0e72aa0": {"doc_hash": "3dcf4890a29396c329f3f8ba05cdc83570ee564f74d9a2723c58ed41af595228", "ref_doc_id": "544eba91-9453-4121-a0f2-755d201028ec"}, "1e9574eb-622c-4959-912d-f8452a9c384d": {"doc_hash": "5d2695950412bc5e6d7819fed41a14e275eb9247054bf44f4efa187751b3698a", "ref_doc_id": "5be484f4-b737-443f-9af1-269692746303"}, "94de6880-e513-4047-ab78-ef62d8c4e64e": {"doc_hash": "2446192a905d6661b0873a2532e1be7c9de78ca4a63ab686207c2be3e9221baf", "ref_doc_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436"}, "cf153b09-3417-481e-a345-59b72fd3983b": {"doc_hash": "4acc59fc0631e4c49736ee57a4044e1e370553998063af7ad8103874b4f2c8a9", "ref_doc_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436"}, "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33": {"doc_hash": "c3c01770929ee4e8d488f1ed45744e599514fe06f92b72bcfe7d3f229a70761d", "ref_doc_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436"}, "f5f561c7-2d3e-4342-8538-949ae3b132c1": {"doc_hash": "b843158192c5d56efec3f27700fd456e2de42a19fb46cee857a40b9c9ac6c4c7", "ref_doc_id": "e4c3c14e-8d01-4383-a055-74af7f4b8436"}, "21044cd6-4e05-4a9a-bb51-a3476fbb47f2": {"doc_hash": "b00959ffe6b837f9df05dc989de9e12c0546278663003baef2017906a56df564", "ref_doc_id": "b24a98e1-9b82-43df-ae4c-f107128ff70e"}, "a416f0ff-fa92-4ac2-80bd-95213376600e": {"doc_hash": "4fc7c0dff6810819810f984c66512da5b94b576daa2f63fbd0d8a37d0e7395c7", "ref_doc_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb"}, "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90": {"doc_hash": "2347667e79a2bfae7bf3e6dde8a8bdb829a5239bc367ac3fe8f8eab6dcab777f", "ref_doc_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb"}, "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad": {"doc_hash": "fe94d6acb5b58d49913a2500c72afc0d6580100d25e30cea001eb1a026f0686e", "ref_doc_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb"}, "53ad0a6c-e34f-4c80-8f78-3ccf4e5e2514": {"doc_hash": "cd9b68332b61d9b4cebf495d0155a4b6a256ea572e0b94bc75349a0efc161022", "ref_doc_id": "0036f83c-b39b-4db2-b6b5-6921acb626bb"}, "b3c0d5e9-0672-4a99-ba2d-24f5193db13f": {"doc_hash": "1418f498bd4428a830ece89cca348fcedb7a86cdf38b783486d499d51f659333", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "2365df1a-2d2e-447f-b542-c329badb0de5": {"doc_hash": "3baa6e42096d60f55ee71338eef53cdf55b107b9110db90b2c1c29c95312dcb3", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "157b41a0-516a-491b-844f-bd50f050fbbd": {"doc_hash": "29b91b3782fb2626835d72231b5758657dd77a3daa216be2b6d3484c88b269f2", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "3a6c116f-7610-4ae6-9e88-99991fea484b": {"doc_hash": "49ebb2224f900a4056af88cc6b52b18369a96c75cf0e6fe6f4e151cf424efbab", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "4474b2ac-0251-4919-91a9-0c6bdb365bc8": {"doc_hash": "7b6accb63cb2bcb28a170884bbe16ebd5c91e38e2da357b59f409375e1716645", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1": {"doc_hash": "b8ef698a8bc2175b8e39fb10fd93581194a289d24413283bef89c53549923196", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "6ea4b032-f86c-4cff-b333-8a0be413a389": {"doc_hash": "2aafc61970d8288703da6f87ed5a2b2ebc54f7f8683ae9025574898e784ea21e", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "7f91160c-d9a6-4fd0-bbe6-f55ad87e4b12": {"doc_hash": "9be8fbffb6968d93597d7659a0b486c6c93d381a137b352f57868f23f2b10ca1", "ref_doc_id": "059bac7a-9ef5-460c-911b-9af7e18a16b2"}, "3b07a285-56af-48c0-868c-c0589783e1e3": {"doc_hash": "dce7ac8c15b43859cd3647db98a3d4e7cee6cf6e9933baa5f6373637fa166807", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "4ba0a0f7-646e-4105-9f52-89b000027861": {"doc_hash": "c5a54db43adc34ea8c5d7e6a417459ed9b8109b96885060072b274ad940604cb", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "0c092060-7ade-4ea1-872f-5c2bffa9ce4e": {"doc_hash": "55cbd3a49e232afec32e54147b3780100243e8b4aecdcbf53ead36ec743e35ef", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "8d550912-8725-482b-a17a-bf37118dc5f5": {"doc_hash": "d61be5ab0451dcb9284b0d5cc8650999c01c9a9f322ee2b6fca1c5f68f06123c", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "7d1f85f0-b966-4006-9329-c3643a850a5f": {"doc_hash": "fc4345b24046e892178ba3ab361512cb19de9cc57cd0f709de343fecb8557eba", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426": {"doc_hash": "2a16a2455028bc89c7d296828939ae35b231d8749d041fee4b810cc95ed0c02f", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "94dda322-bbe3-4722-b04d-2f9dbbc5ba99": {"doc_hash": "c1d810eaa50f2d190299b299f6e8cb0ad5aed405ef7ce6dac547f689e02c4511", "ref_doc_id": "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0"}, "67fd2198-78c9-41e1-8b9f-56aa8398c297": {"doc_hash": "c7827f4786e8d69b3e0b1f8acc4583e0ff464326d07d582be774a5532fe32479", "ref_doc_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79"}, "63b227f9-bac4-4a03-bd62-3052f6486f53": {"doc_hash": "3ee112768bf4f025d0476f0bc482e7a99260c54a47a88fcdb5f7f8a24e189183", "ref_doc_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79"}, "b4aa7f5a-d47b-45b5-b294-030caf5865b2": {"doc_hash": "0d071432998103a533d6a3d1aac0f060836f049b919f799c64595fe4eace4b8f", "ref_doc_id": "6e2c1e10-6020-4a52-8ebc-efddeffd4d79"}, "e597305a-9364-45f7-adad-5d730cd5c73b": {"doc_hash": "93c8269e54ed2d3dac804055ed4681c8124bd3985cb135657536d098a45be3cf", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "b823047c-63d8-4108-a8e9-2e122c307b46": {"doc_hash": "c7c12020d21939bf6149a2b4eff3d59e094ade1a1d43fe866eec38f1c045d6f1", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "dc8ea404-1916-45fb-9919-ec89b4542ee9": {"doc_hash": "51b8e9ab2144dab178e11575477b01d5219cb6bf4c472f5a6898ad8ad51e3566", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "605e54a2-169b-4171-99fd-8dbf73015725": {"doc_hash": "9e7d5abbe359815842fb7fda0c48e97cb49857a918379fa0debcf156c15d5ff8", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "e68d7c6b-99fd-43a6-922d-bdf8563222de": {"doc_hash": "7f744a346eb2c359b071267aab40bbd6f86f394e93ae55b20baf610da08c014f", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "d49b3d1d-3a3f-4701-88d2-ea65e4e6c4cf": {"doc_hash": "70bf0f95567e633004f042d6c42af863f4d84ae30df3762b8beb25eaf3682639", "ref_doc_id": "41149372-3926-4ec8-ac78-2b3aad17d3b8"}, "0414f415-eb44-44a1-8141-ec6c8e820a11": {"doc_hash": "2d0ca2fcb52ac5fb135c44b4883ea7b37b0b573e0455ac80a1f3721e1cb71b06", "ref_doc_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad"}, "7386bc0f-2a9c-4a51-8d53-39587165208d": {"doc_hash": "26fe6959a2e18e86221269e0e92f6ba0a27ac7ef49a11def31d32bc9ca6a6ae7", "ref_doc_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad"}, "b5e0200c-defa-48a4-8510-04fd278f0d84": {"doc_hash": "fe1c606b7a27a7af19d859113ead09613944463d47cba2b99724d621953fa239", "ref_doc_id": "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad"}, "09ea9c5c-8a19-4de7-a2a1-e68c60895493": {"doc_hash": "a88b66706b2a4920d82d0904a72a7058207dfa48e820b52862eaa36425b434a7", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "d58031ee-986b-4729-9268-7b507f562c44": {"doc_hash": "a131b80f3cd9e7dd1ad1234a23976ba13ca3bad3a837c8cd2f2702317f9c6894", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "5edc9450-4492-4a8a-a316-18ab7a85e31e": {"doc_hash": "a2119607dc8af070e7f8daf047024592f2f9f2a212b84369406a0b6b0cca063b", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "6db69581-f9bf-43e7-99d1-288bdf77370c": {"doc_hash": "20567bc35f57601b96b87bab5be7199ae10781328fb080edf41f22602bedf741", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e": {"doc_hash": "a8ee2c3af5e149ac7afb7a5ac6386759782ae2e5ed7d1109725b05d16ef917b6", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "07fafbe5-b135-4c91-a6a6-3da116db23db": {"doc_hash": "dbfef5f85ae811ad0eee5cb9147f0bd8f855a3b97092368019dc851f2fc461a8", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "612bf934-aa87-4113-8abb-870dfa4c8ea3": {"doc_hash": "a291d3f382660e7e00e611a98edf428e870fba1e0867e5c1e7ae05ad016e09e9", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "b041cd39-6677-406e-956d-841e2aff6844": {"doc_hash": "e89393e8ac219d8bdaad63030b37992f1b2aacb66468f7d2cea6b6cb305faff1", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "6c3530de-fce5-464a-a0ef-efba2af46c68": {"doc_hash": "b29d2a2fbb07ea0a87c2e17fce203becb293dd44c43db6e6e7173a8eaf0f7b2b", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "c67c1447-f67e-4d86-806f-2353a930e20e": {"doc_hash": "3237edf38c8e6f0796472983afe663948b6ae490e82e6fe3e77a13827bcefd95", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "a545831a-ff62-4fff-bc1d-5590b3767c35": {"doc_hash": "0fea931df9dcf9d13d6824cc4cf2ee2b6952661d6d1894e34b28c0ce2f4aa1aa", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "f59f7a05-7b45-4528-87da-b936e060cf6c": {"doc_hash": "ad7dd9479e2a92bbb76adc8359699278cca26092272a77332fb5574b33e3b3f6", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "bc8a669f-def3-490b-bb43-a94290cadd00": {"doc_hash": "565d7b5a7038027a66a063dd46af690dcf47531db3848c2bdd8ec8c2eed265df", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "deaf647d-4cd5-40b7-90e3-7863debd9c48": {"doc_hash": "1c11f13fa920854c59e7f3291cbccba7aa78bb642e032fa632a516b58af3a6af", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "72654870-f4db-4bfb-b039-e5213ccaa82f": {"doc_hash": "c91cf44a8e09c9ff18540a54c696c0a4be7983b2812a0d9de538e816b0a23067", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "d9562306-1890-4089-b802-0e83f82738f6": {"doc_hash": "57ef7e5085fe40fdd198946945bc1146a39fb859b666f4f58a5a313c08ee8385", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12": {"doc_hash": "20582cce082157f179cb8b3dd6f135d79ba4ad6aefc1359e96a69ec2154aab39", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c": {"doc_hash": "f2d6f01ca50883c459b1810f6b994488305adb09db2d464aefb8a8129b01acf7", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}, "153af17c-18e7-447d-998a-d38b526cb5e6": {"doc_hash": "532cbefced44ffe2f0c455351ad6f02960583718976be527a85cac553b2117ed", "ref_doc_id": "813f192a-ff91-49ce-9b00-b2e9db964ea6"}}, "docstore/ref_doc_info": {"ad8e0354-e8b7-4062-8066-4f34f43b6155": {"node_ids": ["21ee2a05-4442-4200-8a62-4ae8527fb875", "e0d702ed-136e-40f6-afbe-b535f9e41284", "3bf47376-3ddb-4366-8a07-4ce48e886c56", "6a972dc0-69f9-43b5-80c0-9250ebcdec31", "adb07afc-9aee-487a-a667-00d1853c8fd3", "86e0959d-e116-4cc4-92db-2303df3a33e4", "d7ee550d-3c85-471b-9969-aec1027090ad", "6de39e96-fa17-4c48-97dd-dfa442f23ebf", "7b7dcd9f-3cd1-448d-8c56-f80736f6c821", "a372d6ab-bec4-4acb-b9af-66e5ded45131", "eb32371e-fca0-4c6f-9571-b87bcdd71468", "90a65b8a-ab58-4293-b3b0-b49f34980645", "f07ea3cb-2630-44e3-a68a-ccf5c29c4d78"], "metadata": {"file_path": "./near_dist/4-ft.md"}}, "5ed4c21b-7284-40eb-96a0-5d09a14586c1": {"node_ids": ["00e39d19-ebbc-45bb-8cf2-e6941c0cbe94"], "metadata": {"file_path": "./near_dist/runtime.md"}}, "603c0fd1-85c8-4339-9082-d5a5d097307c": {"node_ids": ["42da6a22-f139-4956-8deb-f00fe4ea33c4"], "metadata": {"file_path": "./near_dist/explorer.md"}}, "b0c7858c-ffbc-4c5d-9544-af1108c36983": {"node_ids": ["f41bea12-96fe-4699-b693-c971608d2565"], "metadata": {"file_path": "./near_dist/epic.md"}}, "c385bfff-5f2f-4bb0-a3e7-ee4c50fabd6b": {"node_ids": ["80ee0266-8c88-4605-91aa-6a8b57de1aff", "c5d94f86-f63f-4509-9e1d-6a1c0486ade4", "4e766689-3e78-4068-a91a-83cc8ae2550a", "222d0d2d-6c91-45bf-beaf-bc7d19309fec"], "metadata": {"file_path": "./near_dist/01-set-up-skeleton.md"}}, "a6fb6b1b-1e46-4e7d-988b-020dbab6da98": {"node_ids": ["09759803-2e40-4fd1-8099-c2dbd19de1a1", "b747cecf-9e09-470c-bfd7-b8a4740ac2d9", "892d327e-e7cc-4dec-b27c-819f736b21c3", "0605c67e-2ca4-41c7-828f-8f01df41de62", "a65d0199-fe73-436b-acec-85559591e98e", "24f9e3ed-cd08-4511-ad0e-5cf5492a12e9"], "metadata": {"file_path": "./near_dist/decentralized-storage.md"}}, "4f27afff-676f-4d43-a604-93cfabfe68d3": {"node_ids": ["ddcefc90-4921-48db-8095-0d41a7110168", "9df625ec-0619-406b-bdbd-3ff899bdcffd", "b3b80943-d011-4240-a8bd-969957b626f5", "84a84c3d-336a-4d72-8a6f-d5650b83de41", "80fcd40f-7c35-4a93-bd0a-fd6c4ee1f0c2", "eb8bc958-8ff1-4039-aeb5-6c2491bf2ffe", "c0b97064-36b7-4f06-a62a-de6da3b96ab5"], "metadata": {"file_path": "./near_dist/environment.md"}}, "88073a1a-78ef-4fa3-a822-244de42f52b6": {"node_ids": ["52fd1eb8-bbb2-46eb-add8-5beb31f09f59"], "metadata": {"file_path": "./near_dist/buy.md"}}, "5c94d891-d8ff-40f9-9f2c-38a996ee218c": {"node_ids": ["3a59d227-88be-4978-87b1-31df6fb521f9", "b370603c-0c31-4080-8ba0-7bafb53b22be", "9556fb67-6820-45b4-9cf3-e82bd6dfc215", "612c5044-66e3-45b4-8fa2-1dd6d62b3706"], "metadata": {"file_path": "./near_dist/account-id.md"}}, "3d0dc1c1-040d-4d22-806b-724572bd5cb0": {"node_ids": ["e38b7a23-c662-4a5f-b916-2e4a09cd2dde", "afae54c3-4e98-46f1-8f9a-74ea9b7b3b9b", "576dfee6-2220-47ae-9793-3f56591a4f42", "1433af1d-7047-46a4-a5b4-8070a603a63d", "f423a8c4-d143-471b-8324-a6665b52a676", "e5946586-537a-4a8f-b243-9be66e13a876", "81ca5b98-7db6-4f08-ab75-8735d9e32aa2"], "metadata": {"file_path": "./near_dist/crosscontract.md"}}, "9ad8f439-0f32-41d0-8349-d4ce694a26d2": {"node_ids": ["a711a4cb-b4b6-426a-94fc-e5da015bb566", "07ff7850-f63e-4503-a75f-2771dc64a609", "20a4bf6f-f269-4b68-9f07-b24ca79c58e0"], "metadata": {"file_path": "./near_dist/near-data-flow.md"}}, "15ed78f1-8bd7-4a38-a80e-d3aa8915409d": {"node_ids": ["93712ae1-debe-483e-8370-5d143653d004"], "metadata": {"file_path": "./near_dist/checklist.md"}}, "e23862d4-2ed2-4962-a9b0-5e56c193f294": {"node_ids": ["e2799694-4181-4d91-bf2b-b47fd15facf2", "9a78a8da-5e67-44d7-97dc-80787da24f60", "9ae249f5-25c9-4191-8d81-78ce84330948", "0695e43a-0ddb-4c80-880b-58256516c59f", "3571af43-9277-419f-ae43-f16dbe01ba87"], "metadata": {"file_path": "./near_dist/01-collections.md"}}, "71cf68bb-46aa-4bb7-9d15-eab0945e5724": {"node_ids": ["4a9ebb97-4c93-4b57-bef9-eca579c6d95c", "7c4e662d-54ec-4be3-a87c-bb02458891df"], "metadata": {"file_path": "./near_dist/query-data.md"}}, "3c6414cc-64c0-4e35-a787-e986444721ec": {"node_ids": ["dfffeca2-a736-4de9-ac76-d43522a09268"], "metadata": {"file_path": "./near_dist/get-proposal-list.md"}}, "b7d13ae7-c42c-4980-bf1c-e2759fffecab": {"node_ids": ["cd96485e-f8e5-4906-839a-76673189a565", "aa6c2b9e-2abc-4995-81fc-374edf6176d4", "77f32702-5152-4c4a-bc66-8dd1165d3da7", "68bbd88d-98ab-461c-93a8-4e4a4d21bf9f", "7044a93a-78b1-4b56-9fc2-6af462736fd2", "959ae596-a9c5-48b1-aea7-e7da203bf795", "a9d04506-d43a-4e7d-84c0-390d8126aac4"], "metadata": {"file_path": "./near_dist/06-logging-in-implementation.md"}}, "17be715e-4b45-4336-8f50-688788f8ca8c": {"node_ids": ["d64062e2-f85d-4c5c-a4db-daf9a901344a"], "metadata": {"file_path": "./near_dist/welcome.md"}}, "0ad5c9c9-a70f-44aa-b28a-5eedf303bf33": {"node_ids": ["066d6561-36b5-4747-a6c5-e6439a6ef07b", "fa98aa92-589b-4654-865c-685477424b20"], "metadata": {"file_path": "./near_dist/random.md"}}, "27269808-b3f0-40f8-a515-fcda2b2e1099": {"node_ids": ["2484f59f-b029-43fd-b956-5cb5056e42c2", "e83de3ee-8c0e-494f-8100-1b88a88f002a", "04a3c513-4edd-476a-85e0-f3f11e2529aa", "97739b92-d3ce-45f4-a751-e145534c2a82", "d766215e-6d7c-4a9f-9a31-deebe180089b", "d2602f72-56da-4d8c-b7ad-4ae6d10cfe70", "feb8ad75-5dd0-4bf9-aa44-cb18d7eeb930", "3c5480d5-a889-4124-94ca-aa4ae6a87b5c"], "metadata": {"file_path": "./near_dist/04-cross-contract-calls.md"}}, "d46641ad-d78e-463a-bfdc-305892ff5a10": {"node_ids": ["73b6723e-09bd-487e-a2c2-6e3f49dc53b3", "1b31513a-07c5-40ff-907c-a7e2d30bfbd8", "756f7d30-124e-4689-a899-855432d1cf9c", "dc0a30fd-5830-4a76-a3ec-8955c71bba6f", "26f7a2e6-b69d-493c-8830-37823ed327c3", "4790ab4f-dcb2-41a9-96b6-7c98de06b266"], "metadata": {"file_path": "./near_dist/2-define-a-token.md"}}, "03b83c26-c0cc-4545-a7ca-92925d3d4117": {"node_ids": ["3c53fc74-f9aa-41d6-818e-968163bc9f74", "dce5d856-4dec-4505-9c81-4837182200cb", "5e3d0c85-bf98-48df-a1f7-8b784e0d4396", "fef757ee-6f6f-4420-bfdd-58a238acc116"], "metadata": {"file_path": "./near_dist/2024-07-01.md"}}, "cdb8af0f-469a-44c5-885f-812bd849793d": {"node_ids": ["d8600231-f27a-4a0d-a857-61fbb20100fb", "051e5885-cfd7-40e3-8d94-ad8b5143c58d", "fa2f3b55-48ff-42fd-85da-770bb9d66a65", "d9d72c7f-c63f-42ee-95be-cb52692aad1c", "06d0e48c-dec5-40d6-8844-e7f7a2f18d7c", "fc27a158-030b-4fc1-ab0f-1b6443c3cfcc", "487427e1-6910-48b5-87fb-a6f27791fbd9"], "metadata": {"file_path": "./near_dist/minecraft-nfts.md"}}, "700ce749-5082-42b3-9e0e-a20af208afd5": {"node_ids": ["c1e90991-c601-45a8-b696-dd1764b1b7da", "b11e06a3-2814-42e7-8627-8853c928344f", "4eeaf26e-ccce-4db8-9b72-f7a0dad029c1", "1f41f6e5-ea6b-4d44-8b15-47850c10a93e"], "metadata": {"file_path": "./near_dist/iframes.md"}}, "338e38b0-7839-4aef-a87f-c1797d241229": {"node_ids": ["65456c7c-9607-4fc0-8991-26fad71ac078", "7038f198-ee21-4d7b-a215-216aeed17d66", "937d7422-5df1-4d5c-b845-50b33da696b6", "3c79b139-8419-416f-a6a0-1da4b328b789", "e372648d-e1e1-4a32-871b-8f28afe290e8", "e8bd3657-6ad4-47a6-8979-e34111c9a0fe", "b18844d8-36e6-474a-b3dc-89dc3a07f148", "272032ca-909d-43c5-bd65-a6ee0eac0732", "6f944914-fddf-4034-8fe8-aec02f7585f7", "c064bf5e-a931-4139-8921-e1df021090ef", "d8728fd9-04ee-430c-b8df-9e98f4bca553", "b2213053-de1c-43c1-8d4a-15dd26cecf97", "b3bf9848-e830-4e7b-9116-29d7b31239f7", "99f71980-043d-4ffb-8c78-9cb44a06d12f"], "metadata": {"file_path": "./near_dist/protocol.md"}}, "e5c957c7-d7f2-47e9-9929-237318c6e7ee": {"node_ids": ["2bc80f03-ca45-4c76-9066-10fb0ca2ad7b"], "metadata": {"file_path": "./near_dist/mint.md"}}, "9bc6c187-19de-4588-b061-68dc80c48907": {"node_ids": ["a18d0cf3-3365-470f-979b-4496c1f449c6", "a59aabc9-a666-438d-a445-42df0bb8250b"], "metadata": {"file_path": "./near_dist/epoch.md"}}, "7dbab5bf-d82b-4608-81c3-54cc8b932ff5": {"node_ids": ["79b1ca5c-5cde-4c9a-b826-665d5bcbc622", "f1cbde58-b09f-4afc-99b9-5daa19f70644", "584ddcac-12da-4edf-ab48-8f24093f7524", "708d871a-9ef1-4a6c-b768-ecccc1a63ec1"], "metadata": {"file_path": "./near_dist/minter.md"}}, "070e642c-5bd5-4405-9200-e6f9f5d6ec1d": {"node_ids": ["2930de98-214d-46ca-9604-eb5a78963168"], "metadata": {"file_path": "./near_dist/get-keys.md"}}, "a820ae42-2eee-409e-9d54-13e2f1f7065a": {"node_ids": ["be09aea8-81f8-4e03-860d-9c27669153a8", "baab5a31-3288-47a9-a2e0-3ce546070658", "faa544e0-82ee-4cf1-b8dd-7d5c4618da2b", "ac072a10-9b2d-4a6d-bd48-cef84b9da9c2"], "metadata": {"file_path": "./near_dist/upgrade.md"}}, "5660f8c0-f8ee-461f-b42c-76bec8b11e86": {"node_ids": ["2f2c4e0d-77e1-4eec-ba31-173676568775"], "metadata": {"file_path": "./near_dist/bug_report.md"}}, "308723b6-072b-40a7-8355-29e45b489871": {"node_ids": ["4cf4d8cf-7715-4c83-a42f-9d16f70e8c32", "b6ca282e-e652-4be1-9a3b-fad124472327", "09d64ad6-6bf4-4b26-a87c-bd3dbba158ea", "5185b0c0-777c-401c-bac1-caa57ebb307b", "42aa4f16-38b2-40df-9fe9-2ceb4d8057ab"], "metadata": {"file_path": "./near_dist/storage-staking.md"}}, "c14cdd04-7426-4d42-b3a0-afed333f7a39": {"node_ids": ["0d5e3417-4bd3-4826-bf19-12ee0ff8e55b", "52f25481-34e2-40db-a929-4617b6bb9fd3", "066349e4-5804-4e7f-94f9-7d3a879e5228", "66960c4c-44ba-4802-aef3-7d34a514e342", "57c2ace6-9959-46da-a2d8-4302114efa9a", "3788a3fe-92f6-44a2-a007-75e6286f3216", "01fb1edb-ff0f-4b70-987a-4ae741408fce", "b6f3abe5-8ad2-4554-826f-f3bd96beb74a", "0193f0c6-08bd-4f40-8b4e-f16acb7afb6c", "663e204f-9d91-46ab-b7ed-eb8b0a018576", "0e062d97-ae51-4ec2-84df-24e17d34748c", "43608d91-39d0-41e1-a932-e6da440a10d9", "f5a0716e-bf5e-44af-afba-744946bfce71", "4a1fafb5-14c6-4dda-8276-c7e8a01bd4d1", "9d6747ba-3e2a-4911-9d75-241a3e7a6c00", "2b91e421-c96e-4713-93a3-258d0098404c", "8dc9a549-7fa4-4a75-9fb4-b2cd2268f0a4", "56321410-6139-4b43-a73f-b9bc410e94d2", "41e55d0d-5f09-4299-b3d1-82310c52c21b", "bc690d9e-82ef-491c-83e0-c9f8b615e6d8", "9b666083-b310-4401-88ca-c9b796ee0fbb", "1e35ebbe-ca91-42be-90b2-492307d76242", "6e188452-b596-4e97-9fec-83e8a2886f3c", "195d42e2-eb5c-4a1c-a043-c145b979351a", "c32aabb8-5856-474d-9d97-3cb517500aa1", "47c8a03f-a08d-4c8c-b8dc-b02f9c22c149", "27f2f505-36ca-44b3-8363-39352ffc193b", "581915bd-e724-4767-af58-8e5e3056e6a8", "5f49057c-7d5c-4353-9e35-deeb3863ec90", "6f01bfed-41b2-4bde-8a0f-2d7b427d3831", "f6224d51-49d2-4381-b1c6-0084c473c650"], "metadata": {"file_path": "./near_dist/transactions.md"}}, "de8f877c-135c-48f8-93d6-33185f073d88": {"node_ids": ["e9fc336e-d917-485e-8371-8ae4680e7c81", "b199681f-ed9c-41aa-8057-7089a04e3c30", "48c1e6c7-df82-45e4-ad1d-7942fd798825", "53cb86e4-5764-4888-bd9a-ee90ec04c77a", "299f5da7-3102-4fd6-aeb6-59106414ba75", "9b182797-729b-4b76-a63e-fc1300026183", "0e76f4d8-5e12-4896-b4bf-e0c3522eaaf8"], "metadata": {"file_path": "./near_dist/1-skeleton.md"}}, "2ea101e5-de7c-493b-8a0f-13d6bfc5206f": {"node_ids": ["212fce63-26b6-4247-9d11-287a7d2b7367", "6de6e732-3755-4f2d-9f7f-f9e5a4f1ba5d", "83f248f1-38d0-47fb-a9cb-4542e39dfd37", "c9ac6bc8-db4d-4741-b1c6-992d68b83e20", "1b82f720-321e-4919-895d-0ce027a2105b", "a6eeddac-8500-45a3-a48b-ce54f70ffaa6", "53872eb5-3ff1-4983-b04f-1a57ff89860a", "15bb4f4c-a318-4e82-9bfb-0856a7d7636f", "f4b212db-888e-4085-ac1b-d36681b87cbd"], "metadata": {"file_path": "./near_dist/7-events.md"}}, "9d9d170c-299b-49f0-aec3-9f4861f10f48": {"node_ids": ["0bc58a76-d20d-4f06-90f0-d92556beafcf", "3d8b43b8-c244-4e59-b7ba-25664c20e3bc", "884dfe44-7b7c-4e52-80d0-f171db65a1ce"], "metadata": {"file_path": "./near_dist/balance.md"}}, "084141dc-7c63-439d-baf0-f83b8f42a34f": {"node_ids": ["9075a20d-3760-41a5-aff4-70fbdaa13a5c", "f0214622-873e-4a00-bddb-b465478d9988", "70f4d31a-d218-4fcc-a7ba-a67404177909", "5c9e8474-9dde-4482-b943-d6a1ea1060ce"], "metadata": {"file_path": "./near_dist/deploy.md"}}, "6186ab01-59a8-452f-8e92-4c9a35053380": {"node_ids": ["af9d1430-b59e-41be-bbf3-6aeb42e730f2"], "metadata": {"file_path": "./near_dist/near-lake-state-changes-indexer.md"}}, "72979882-6b27-4d1f-8cca-ebbc388c8d6e": {"node_ids": ["a4fa06ef-3be3-4d0e-ae45-1be5fd950c72", "d2fe7fb9-cdef-4716-9640-96e83d7eb883", "eb01b592-ce04-4d0f-b915-3c877d5db335"], "metadata": {"file_path": "./near_dist/gas.md"}}, "c5210994-241a-4790-ad50-b5c51115f4e0": {"node_ids": ["e77f1f2d-05b3-43e3-b906-e064ce91dd7f"], "metadata": {"file_path": "./near_dist/introduction.md"}}, "30086d84-e69b-4193-bf05-7de1c60412ad": {"node_ids": ["bc265aeb-2742-41de-b5dc-0751ed9fe6ed", "a98753a3-d515-4d53-b0eb-8a0a6d94f139"], "metadata": {"file_path": "./near_dist/push-notifications.md"}}, "1ce41d67-854e-4fb2-bc88-7d3a0ea167e3": {"node_ids": ["ba2f1f12-b4d0-4cb2-91f2-86d64dc917f5", "98c51744-c2b6-4b49-abd1-3ca64beff32e", "39934ff0-97f1-4f0e-b2a0-b6a27cf77b12", "914ae2a2-e254-43b5-9bdf-fb4b8641fa9e"], "metadata": {"file_path": "./near_dist/meta-tx.md"}}, "a17f3fc2-7601-4f53-b561-7ebac1d7fcb5": {"node_ids": ["caef8f08-9993-440e-bb86-b4a4cf05ffff", "4f9bf414-25dd-4493-8120-679eac39f9ca", "cff89d4f-9e41-4280-b656-f03fa32e15fb", "91c3bf76-f6c1-4eaf-8fc9-c43053d4c324", "b02accb2-27d0-453e-be03-bf35d0f2f2d5", "cf428cce-f80c-4389-aa05-01e3d0af4546", "df47ad8d-87cf-4371-8120-c90276dea7de", "d6c7a7b3-06a9-49b3-8fa6-42f86e57b678"], "metadata": {"file_path": "./near_dist/integration-test.md"}}, "9a2d8868-dec7-4dbc-ab3a-b5b263ba4032": {"node_ids": ["bd8a9ae7-67a4-4c05-a714-675d9dde630d"], "metadata": {"file_path": "./near_dist/get-metadata.md"}}, "e3dd5ad2-fa2a-4c21-a01c-9f9c1d28d850": {"node_ids": ["805cc46d-cb44-40e3-9fb2-ef283e04ac0f", "2262f733-04df-4fd8-964b-b47cca0f50f7", "35a63076-c94e-4486-be6b-f4840cfce825", "ed3f5b90-c58a-4802-a644-eec5df1f2061"], "metadata": {"file_path": "./near_dist/big-query.md"}}, "562bfabb-7fbc-4981-9ba7-31f3a257b66f": {"node_ids": ["e2717868-492b-486c-b3af-4ce4118ad6a2", "7ed584f0-5395-4516-99b3-2a758411f9ff", "46eb94c9-9984-4409-ba1a-3c8ff155ff09"], "metadata": {"file_path": "./near_dist/naj-contract.md"}}, "45ae8ab0-b224-4a26-b8e8-08630cadf98d": {"node_ids": ["9c5f1e4d-e34d-42de-98ad-b55cd93ae655", "9d11c53a-f05c-4b52-8b3e-22170edef0c7", "a30cb8ec-ad14-4d5d-93b6-0a8488ecc22f"], "metadata": {"file_path": "./near_dist/query.md"}}, "0600643d-5e9b-4c31-8c2e-40b1a77047ef": {"node_ids": ["450c4288-39c1-4b13-b3ef-f58b8c065aa2", "66ec05ac-10d2-4d9f-8499-2dde48ddafac", "b208e381-3bbf-4c1c-bf6e-bff0e0cd3e25", "2c1ddf71-36ed-4ff8-818c-2fbae95f5c9f", "eb2b75e5-06df-4e9a-bb60-d9614a9a7daa"], "metadata": {"file_path": "./near_dist/data-storage.md"}}, "fe0506b0-8423-46fd-9186-8e96e16582ef": {"node_ids": ["29d03f58-db09-4217-a1f6-b62c4f6188dd", "07414d54-8ce1-4901-9085-cc5077350296", "40f0287c-4f32-4fda-a542-f960775dd199"], "metadata": {"file_path": "./near_dist/chain-ui.md"}}, "bc817d77-a312-4669-8b31-18b183ba2e25": {"node_ids": ["6ac22d21-152d-4b0a-8999-af2b19dd00b0", "ce1f956b-290d-45a9-9e82-24f6088c07cd", "3081f535-90eb-4c5a-b9e5-324ae3b2a8de", "56acd484-534a-4a1d-a0c6-68d9ca9a5005"], "metadata": {"file_path": "./near_dist/naj-account.md"}}, "d15be2bd-e256-4583-b355-58ff5c2082c6": {"node_ids": ["54977e5c-5281-493d-8c02-9739e51c04ac", "6d5908e7-f088-4566-8098-1e3b2bdfd4c5", "216875ec-a94b-4b42-b9c7-468f61e9d718", "96b74184-702b-495d-ac8e-86f725525dd9", "fa720032-72d6-41c8-bab0-3b759e74aae7", "7b3c5430-8ea4-4fa9-be0d-c83a41f0ae2c", "b670d600-ef42-439d-b151-c637377bdc4d", "c5f3d81c-5c5b-4cc7-a167-d3e201c51c91", "94627349-70f3-4cd9-9608-a87a682bd0da", "3029912c-b1fd-444c-88f5-b987dc10908a", "7f5a643d-9896-4768-8640-f47ba5f9a0b0", "14ff7ff7-4504-4972-94d2-b53bb29f5d79", "f79210b9-ffc5-4c7d-ba9d-1f896bd0ca6d", "41f9d009-7905-4f00-b3bf-ffcefc7b6043", "90f0d7f3-0696-4c64-8fd3-2183e12cd205", "5e504a5c-91f4-4673-baca-4f7c90c4ddc6", "45074c6b-2153-4bc1-9687-c896568418f4", "e3422660-6cfe-4606-aec4-3d64fcef0707", "58efc3e5-a5e1-4201-b990-73dc14aed8ed", "650f0dbe-3df0-4d77-bf06-cd6789c45df1"], "metadata": {"file_path": "./near_dist/kurtosis-localnet.md"}}, "66c857d3-48ae-4a5c-adce-1277a61f70e5": {"node_ids": ["81af084d-5f6e-4f2e-be09-9e24413e5fa0", "1f50409c-20c3-4e64-ac5c-366bc7eb463f"], "metadata": {"file_path": "./near_dist/02-use-seed-phrase.md"}}, "d83edd7c-054f-4c11-839a-7ec062a4c796": {"node_ids": ["85a17421-de01-4757-8215-63db41f0f4af"], "metadata": {"file_path": "./near_dist/lock.md"}}, "68dcd623-6fbc-4ff8-8cea-dae528a53e8d": {"node_ids": ["dab55d69-014b-4d52-8716-963dec432e4a", "3e938f88-2e2f-4804-878c-87602638d550"], "metadata": {"file_path": "./near_dist/bos-components.md"}}, "db861bc6-431a-4bd7-8064-ed51384bf951": {"node_ids": ["8d73c0f8-e403-447c-82d0-7b687ba7317a", "89977740-9a21-4386-ae80-b15d9e340e45", "d3273564-5f8f-4aa5-8023-c5b4144460ab"], "metadata": {"file_path": "./near_dist/factory.md"}}, "d64f6eae-c289-4b6c-a775-83b9f3b9973f": {"node_ids": ["f386311d-3951-41b0-a300-74998c138f0b"], "metadata": {"file_path": "./near_dist/reentrancy.md"}}, "d2077291-ebfc-47f3-ba18-e473d7819cf8": {"node_ids": ["9199096d-cbcf-46be-b917-b58795e1e85d", "250697d7-e9ec-4568-9800-9a690301876a", "ac99f50d-b317-4cea-a65f-5a8e08aafc07", "425d282c-28ff-4966-99d3-6d2da3576941", "acccfbb4-16be-4705-bd79-580fcbb19192", "63af897d-9342-4104-a574-d3ba98078a71", "fb7d6c46-4116-4922-9e2a-9fa5320d7d43"], "metadata": {"file_path": "./near_dist/hype-indexer.md"}}, "c1472672-5c01-4a27-89af-170648f3c5c2": {"node_ids": ["c5ca9028-7a3e-4e74-ae2d-d83526a129b2", "a93416e9-7634-41a6-822a-bff4ec4c0aad", "39b91072-dadd-465e-86d5-a4bc900500fc"], "metadata": {"file_path": "./near_dist/economics.md"}}, "a7da55f1-ef55-4969-a3c2-e17e047e8446": {"node_ids": ["d68b2794-7e74-4a77-8fa9-3ea9ee0bdb20", "f43b9185-74ca-4929-b69e-1d6519f98bbf", "d0a29dde-dc6d-4485-bd45-28b09dfb45c9"], "metadata": {"file_path": "./near_dist/sdk.md"}}, "eb82bf8a-a0ef-4165-b77d-a0d30446cf80": {"node_ids": ["b1ae7e92-afad-4b51-b241-c8c01f0a065f", "7803a822-e47a-4f52-8048-7665d3ba1a8a", "0f4a85a3-d5ba-45a7-bd2c-65694b9e5a7d"], "metadata": {"file_path": "./near_dist/2024-06-05.md"}}, "3a12aec9-7bf4-439e-a185-db44c06694aa": {"node_ids": ["75e275db-7bb9-4a89-89a6-e7f32f1947a1"], "metadata": {"file_path": "./near_dist/CONTRIBUTING.md"}}, "eac256b1-0666-475a-9e54-846e169aca4e": {"node_ids": ["6b65a88a-ba31-46fd-a6a8-a4e5cd767f5a"], "metadata": {"file_path": "./near_dist/naj-utils.md"}}, "f67f38a6-5475-4e4d-9a07-1b83454b181d": {"node_ids": ["15e6fb12-d0b6-4272-98a2-fa30a1e89bbf", "885dcf33-a62f-46f3-b89d-f5b45fc2da58", "2acecfe1-9531-4b15-8dc1-d58354a97307", "7c9b0b0e-1b1a-4d30-9e6b-5c81c410fc4d", "ef6a9f3a-976c-4e40-9b66-d9923a47c7a9", "7deb8769-c3a2-410d-a6c7-6ff45ec2ed51", "49d89676-6ab1-4925-bbdf-9810dd300d16", "e1c9d929-ceaa-495b-90ec-2be598d7eeac", "3a57f66e-2d2a-47d7-8815-5b2886a21765", "47bc126f-c443-47c4-8594-4b0dfbd6218a", "f2c6cd3d-bf9c-4840-b68d-4e1d1e6a215d", "3746cf64-c9a8-4295-bdf2-5f0963f0f314", "1412e3db-bcdf-4986-8cdb-28936981f352", "ed076df8-c981-43a7-be8c-09f5279d7ff3", "826aaf50-d313-4f4e-9025-02193253e6be", "01e22922-8b70-478d-a788-16ab17e8ecef", "0023e383-909b-4ee4-85aa-7599958d7527", "c0eee531-8db4-457f-9843-2c7e09ac7214", "0adcc0f0-13ed-4c64-9dfc-1ca8f1fa5e24", "f64e649e-1d29-4712-ac0d-91e1d1ee87a9", "c49f596e-8e81-4313-85af-a9acf14e9f6d", "1279adf7-b2d8-422f-8847-527e98322dcc"], "metadata": {"file_path": "./near_dist/nfts.md"}}, "499459c0-1eae-4c14-8407-a3c06a2a995e": {"node_ids": ["1273289c-fc9b-4033-b448-cdeab5fbc2bc", "2c868e82-8168-4125-b12c-ad86e132e347", "0ad77afb-da28-44a6-8a83-354de0a6378b", "87a6aa77-44f7-452d-a549-743f90968e7c", "2be26acd-231a-43f8-9141-3d15a72b5ba7"], "metadata": {"file_path": "./near_dist/builtin-components.md"}}, "dab82f69-404e-4103-b889-0b5aa1e20fee": {"node_ids": ["8aa8b977-d60a-404a-a8f6-5fff30c719a6", "719512e8-e973-4bf2-be8e-d88ac2670c58", "13aefc31-91e0-49dd-9b83-438307a3ae63", "f98f4b3a-0032-4e35-a2ca-b20652e148ca"], "metadata": {"file_path": "./near_dist/dex.md"}}, "767c2391-9e2c-4f3a-a7eb-5aaa9637121e": {"node_ids": ["56f04cb1-0605-46d6-8302-f1fc76859eda", "9f6665a4-a446-457e-bf7c-98eaa134b705", "a906b09a-c555-4c7f-bde6-cd9d3405fc39", "03cd6271-0521-4214-8497-31c035e350f7", "bdafcb12-d145-4dca-aa90-e8c17fe91e69"], "metadata": {"file_path": "./near_dist/marketplace.md"}}, "3606c75d-ab6b-4cdc-b888-b83b69f20226": {"node_ids": ["5d70d0c5-6741-4ee3-be97-d7addad176a9", "281d4178-333a-4f7a-9530-2446cffd87af"], "metadata": {"file_path": "./near_dist/2024-06-28.md"}}, "8b75aa64-b3ab-4f67-9bf9-053a48e90618": {"node_ids": ["7a8b4973-f29d-49c2-9640-756ba01cfcea", "e5d5e03e-d97b-40b2-b87f-9487762d74fa", "3b0cd85f-a162-4705-96a1-6a037788b466", "a83114f8-c47b-442c-99e0-f3b7eeaa0446", "b232ab3f-ac45-4584-b068-8b2ebcefb319", "54a4a911-1ae4-4e4a-9a4f-d90f8a1ef495", "b26440e4-151e-4be8-a3fb-d962dfa07735", "134d560b-534b-4cf8-9aa4-db2ff51783fc", "79c62728-d909-47c3-93af-ac42a342421a", "ef2019ac-2c5e-4dc4-8c57-03fbc2ab2717"], "metadata": {"file_path": "./near_dist/blockchain.md"}}, "fff1f269-d283-4ab6-9e89-452993dee542": {"node_ids": ["46ea7945-a51a-4df4-801c-e5472947879b", "482b6b38-50a0-4051-9aa6-c4e19e849731", "6af8334d-5c10-47eb-b958-01245c642045", "95388119-7e42-4422-b586-42508c229656", "76dd3788-7d2a-4673-b311-5db7ff85af10", "86d51033-008e-4449-ac1b-48243989061f", "ee6121cb-9f6e-4e07-91c6-eb8c188d828c", "a11207b7-9cbb-4c22-83e0-860a0f3f9eaf", "c33f9b9e-c68d-4e74-9889-f7d72abb18cf", "8c6db6af-a0fd-48cc-9238-22aedc44f448", "4b871c72-e07d-4798-8ed8-523619e4ce35", "367574ac-7dac-49af-a258-9e6f714bc7f4"], "metadata": {"file_path": "./near_dist/2-minting.md"}}, "0e30745d-6a13-449f-b2ff-49111dd11593": {"node_ids": ["0fdb1951-753e-4363-bc09-c75013a8347d", "4da4460e-ba0d-4870-bfb6-d1189eb3e273"], "metadata": {"file_path": "./near_dist/README.md"}}, "1abc05dc-1511-4dbd-942d-33d9743e447e": {"node_ids": ["1a8d1f33-39e2-490d-a9dc-59d3d08606c7", "f1adcaba-78f7-470a-8120-b262d074c3d5"], "metadata": {"file_path": "./near_dist/maintenance-windows.md"}}, "a1a97ad8-f2f2-4e55-9c34-91d6592e5e6d": {"node_ids": ["7ff7be06-871f-475f-9a7f-5f9365eb2035", "b3b055d1-74ff-4f68-a0d2-8ce623ca8882", "086ecdcf-2a9c-4548-b7c6-95f66ede7470"], "metadata": {"file_path": "./near_dist/near.md"}}, "14dfaa9f-8a3c-42c1-8f4c-6f154b2d33a5": {"node_ids": ["1af3f33e-202a-4559-840d-0ceca2b7a76e", "b816ffc8-ecd8-401e-abd4-60a17bb20c7a", "5ca62ec5-9f02-43aa-8a56-193b27e98481", "16dc2907-662c-4f15-a7b0-9345fed61a86", "97e01569-cfba-4cf1-a30a-18208b13f294"], "metadata": {"file_path": "./near_dist/2024-07-18.md"}}, "81e46d25-6e45-4ebb-9f26-32f53a5f321a": {"node_ids": ["ecf4fde2-de90-4022-9297-cb438c2aaea6", "2765120f-652c-40f3-9b46-e6aac60cf7af", "d422d79c-94a8-4722-9d5f-f101c15c3f97", "fe519d2f-6b22-4403-8d6a-9b6596554606", "6cc9fe65-510c-4619-bdcc-6cddcb6be9bd", "237c4945-1d4e-4323-bb75-61855015b4ae", "01bf1161-e77c-409f-a69c-e7c4b525c736", "749bdacf-9ffc-4c55-88f9-befd162b10f8", "e59f6bd7-6b2b-456b-b6da-d35e37685a08", "d763b365-6dad-4856-98c3-12b870182d62", "9fbc36a5-609a-4e69-9406-9a0f442af7b6", "780f5f3c-475b-4a0f-a711-19a4bb5e1adc", "36d68141-3888-4e8f-bb97-4685d9f95e20", "ee96377c-a879-4f8c-8ef1-2c5ac0a76a43", "7a426faf-7984-419a-b214-fcbf342762d1", "9df2521e-410a-42f0-b3d5-fa0a7d6e5633", "6d720654-e0a4-476a-8e0a-16a233d6a6fe", "915fa216-8245-40d1-b086-bf24b9643d6f", "33c6d587-91be-44ce-8b01-8140720d1379", "2da13f2d-35a9-4822-b2c0-1038ffd7da0f", "6fa380f8-d237-4cdb-a4b0-82228e87a2e6", "1241b2cf-ac6d-4664-a78d-4e73eb87adce", "938c83f2-a91e-4863-a6af-b59e09e8a80a", "136f8e11-154e-4977-bc05-478e46a2cb74", "039ad860-c36e-413b-b1b8-ca552c7887a9", "f83d2470-5a28-49a1-9c00-396980c40374", "10b4bf52-6f46-4db7-b918-f700ebf374de", "68d433c7-8c45-4b9c-95d4-52f31661b22a", "1326a1eb-ec5f-4fa6-85b4-8f381d386aff", "846178f0-a9b9-44cc-a381-c151c9154979", "ed4819df-3646-4dd0-9d82-e782c330c257", "d8c12cbb-6c3c-4902-8337-6102533c5fcc"], "metadata": {"file_path": "./near_dist/network.md"}}, "a4096975-d77b-407c-9da9-30b956c031d4": {"node_ids": ["59291610-b716-4408-acbd-fa89dcfc5b33", "c6e8ed95-9817-49e9-836b-61bcb0a4dbcb", "541703bd-2703-433e-9609-cbd3dbe24db7", "76f948a9-ea5f-419f-b978-859f0033722b", "92c62278-2f80-4202-b386-37aeb3a4de1e", "8194d3a5-c3e4-451b-bbe7-7cfc657d74e9", "38a3ca5a-e710-4cb1-9baa-656fe425d34f", "2a30947c-40a0-4510-8ec4-e170ecfbdcb3", "97f769b0-c72d-4de8-aa7d-3ab813317daf"], "metadata": {"file_path": "./near_dist/bos-ethersjs-best-practices.md"}}, "a70bd271-cf66-4fac-8e84-cc6edc1687cd": {"node_ids": ["9eb4e3a8-aa4d-4f80-8c65-0b127b33030f", "3c8e0108-0a8d-44cc-9ae5-f4fc54d8594a", "48455c8a-d570-4112-9504-bada8dc6e979"], "metadata": {"file_path": "./near_dist/7-factory.md"}}, "79eabc9c-ea1b-4500-aaa7-cf6c07321848": {"node_ids": ["ade28c11-b293-4a6d-a618-fd8abae8a70c", "9f2f163a-528f-4adf-8cf1-06cf86d8e9bb"], "metadata": {"file_path": "./near_dist/frontend-multiple-contracts.md"}}, "39827082-9c24-4681-acac-35b3790b5d93": {"node_ids": ["3aa17b31-23b9-4a99-9e2e-ca8cabac1d7b", "f661a7b7-78d7-46bb-94c1-5d831b696916", "7508486d-969b-40fb-9686-5b1ee7ee8b67"], "metadata": {"file_path": "./near_dist/best-practices.md"}}, "324fcf5e-ffc1-437b-bfa9-277a498861fb": {"node_ids": ["45b1882c-8fc6-4bbf-94d6-6f608427c56e", "060df00c-f7ef-4320-a117-f0f965390e00", "c67c31a1-0958-4daa-bbd1-a0006fe6062b"], "metadata": {"file_path": "./near_dist/python-lake-indexer.md"}}, "93327342-0e7d-40c9-93c4-61c235a929b5": {"node_ids": ["525668e7-fc3c-4f4b-ad48-a4de174bb430", "dbd3b131-6a97-469f-9230-2bd61b8cd395", "fe242448-1536-4fff-afc7-60204a5a93ee", "3506cadc-4268-43f9-be20-fbab5927af77", "308687fe-612a-4817-951f-83bbcd7daf0f", "254cb904-06c7-4ca3-b050-d77a2aad1850", "2a2a6cf8-9eaa-4569-aeb8-6fbecf36f622", "181f60b2-0981-45b3-86f5-678ef51a4f6a"], "metadata": {"file_path": "./near_dist/advanced-xcc.md"}}, "f9cd958a-b304-4d71-b315-93ce645674f3": {"node_ids": ["97d09524-db42-4da9-97fe-828869c26ddf", "4fe749b4-e2e9-4283-a7d6-770472593d5e", "bf99e727-e285-4735-9092-430afa29045b", "00dee452-91d2-4765-a4fd-698f75e2c078", "de998bb5-83db-4f6c-a0d4-ec589a8a9bd5", "30b6744e-2105-4ffc-a061-9c26f2b40993", "af1aa2f9-d4f1-4f54-af44-33818d56cbf9", "8368743f-c15f-402b-a1f5-395b2a5a3636", "e20f1cde-5ce8-4fee-b464-a73263033971", "782d07b8-7798-4e33-8414-db34a1a73649", "2cca49bf-aff3-44dd-86b3-c2ee6e545d88"], "metadata": {"file_path": "./near_dist/lake-start-options.md"}}, "7ead75bb-d3a8-445e-97ba-1cda4bc4902d": {"node_ids": ["9ad9d8eb-2cc8-479a-97c0-1eaf9c0d3943", "71632bc4-a81a-439f-ab1b-89eb3d45505d"], "metadata": {"file_path": "./near_dist/cookbook.md"}}, "018a6708-34f5-48fb-a85b-f0bbc3c865d9": {"node_ids": ["c998f679-5fae-4df1-aad0-784628a87ae2", "d27617c5-881b-4120-90bc-dabdc6033e09", "a1aca820-0a47-44d6-8304-2d03d42941db", "243d45e8-77d6-4656-9489-95a92f7d048a"], "metadata": {"file_path": "./near_dist/near-indexer-framework.md"}}, "89740441-6750-4968-830c-d180480bfd8d": {"node_ids": ["add37215-8019-4071-bd22-1de8bfde47a7", "6327858c-5a8b-4931-8135-1ca9fc8ddf8c", "53c6b70d-6a48-4dce-bec6-afad9ec4ed33", "236b4b0a-6a1c-4646-88f0-8903296b45aa", "9da90069-240f-4c6a-b078-b828aa69b913"], "metadata": {"file_path": "./near_dist/functions.md"}}, "91afd822-25c5-4c84-8b37-1f72e5a2bff6": {"node_ids": ["93dc479c-c731-4e36-9c6c-a8ab1b5cdc2d"], "metadata": {"file_path": "./near_dist/attach-to-call.md"}}, "e62bf061-306c-4da4-823a-e3e5deae05c2": {"node_ids": ["b572b660-7f76-4df9-b57e-d7908c59b62d", "c6bc8d9e-4096-4176-803e-25a223ac39d4", "104aa9c4-3673-4f13-8ff1-59435853a8cd", "fd5198bb-aa2a-4873-83cf-a67209c8c144", "a8bcf118-3996-4b32-8eab-45bc88d7d512", "e013c01b-ab04-42d8-ba9b-e99592a2200d", "a4d30ff9-21fe-4f49-a435-8b4d3e6cbda0"], "metadata": {"file_path": "./near_dist/context.md"}}, "454005f6-46e6-463f-96a9-9f8df08ecf5d": {"node_ids": ["e18e8769-42dd-4b70-9f31-85170bbf6b90", "9b57fc01-32d6-4d78-8a17-e6d23c671b04", "405bdafe-92ef-4790-8b01-e68f21063a41"], "metadata": {"file_path": "./near_dist/yield-resume.md"}}, "b756fd3b-593f-417a-9268-b686ac1e7d9e": {"node_ids": ["27f02c91-eab8-4a6f-85be-1ef5368101f4", "30cf3722-d06a-4bf9-a682-e8d3b0326e4b", "471d4469-598a-4c24-a09e-a143cf27891b", "aae1a903-e17d-44a3-bb82-194414bd014b", "4fe375be-1d59-4983-8820-b017b74baca5"], "metadata": {"file_path": "./near_dist/migrate.md"}}, "d7e36004-ddff-41b9-a5ec-d7931c9f909a": {"node_ids": ["2994dfe2-f08c-49ce-986a-f945c939f87e"], "metadata": {"file_path": "./near_dist/wallets.md"}}, "bb1c36e0-57d8-49f9-b9fb-c0f5269a1f70": {"node_ids": ["2c7131d4-7648-4201-bd9c-1c5de88bffad", "449602dd-b3e5-4442-826e-3e689e6c37d6", "3430f469-d382-447a-8e94-bd28cbc41a1a", "f90bcfc3-5914-4063-9100-c6f7f6d662b0", "2d26c956-bd9b-416f-80a8-333e6bca6242"], "metadata": {"file_path": "./near_dist/webhooks.md"}}, "0b4bfe4c-5e1c-4f48-b517-0e973ceb7f42": {"node_ids": ["827aabb3-a19a-415b-9d50-c30cebf68ba8", "902a77d8-4572-4d56-aa8c-7578dcd943a6", "80add272-be7d-4460-9dde-4902234a1776", "bcf85e49-7baf-47cd-89c1-6d36584ecd13", "e1daf044-b36a-4442-8419-9dea31921364", "fce4a91c-7868-4f8b-abb7-71e4ad524ada", "c8586d33-cedc-4e9a-888a-83f24f612f60"], "metadata": {"file_path": "./near_dist/serialization.md"}}, "5694c653-ac32-4732-b07b-47ed635523fc": {"node_ids": ["133c6b9d-bb43-4dd9-8923-66a5e89b69c8", "3574d7a2-c043-4025-8ae3-e38ac888a2b4", "de2284c6-3731-4bcb-b777-d46db4144906", "8b94a4d8-3563-4274-9dd3-6c5d1e32c6e5", "58050f2f-d80d-43a0-9caa-b591e2e46721"], "metadata": {"file_path": "./near_dist/03-actions.md"}}, "8485fc30-50e7-4fd6-acaa-76400d6ee737": {"node_ids": ["4da468b8-ab2d-4ac7-853f-55bc14ec90c9", "9fbd99fb-54c0-45e3-b244-6d41f32054ec", "e13b7261-f7a4-4748-ad03-42de80d1a2ce", "a44d599e-2e39-434f-8e0c-fbd05fc52e44", "07077548-b393-4c51-b95f-ca2e1f341622", "80820f19-3e00-47e0-9394-23dae5fa758e", "72b2b048-cc51-4c90-84c9-9f1b669335a7", "42ed6ffe-3b59-46a4-8fe2-23651148763d", "562a468e-34ec-4cb8-af2d-79d603094be6"], "metadata": {"file_path": "./near_dist/3-circulating-supply.md"}}, "ff09c3cd-c029-4e66-8e9a-924ca6594c42": {"node_ids": ["5198dd01-b745-49b7-b2a9-73f4f156ab70", "a54f56ec-f3bb-45d8-a229-618cd29f032b", "e5c60dcc-6aa4-41d8-b37a-464f2f2c7499"], "metadata": {"file_path": "./near_dist/backend.md"}}, "79b27d92-f3ed-4fb8-a9d4-b733c4edf0fa": {"node_ids": ["1b3d97e0-86b2-493f-be52-05a6da7b674d", "b516ae5e-5a59-48d7-854f-9ada8c905474", "e743d462-0298-4921-a3fc-e8d7c3747187", "0e9fb61d-3638-4d77-bc8f-36ea9e2e486c", "73f5ee8a-7fb2-4054-9a7e-209762bd6d2c", "508b5492-9f88-4338-8d30-c2110ffe5e00"], "metadata": {"file_path": "./near_dist/fastauth-sdk.md"}}, "b40d8343-6dfc-4719-946b-75552f85f7f0": {"node_ids": ["717f7fb0-062c-4370-8323-e5639a99dea8"], "metadata": {"file_path": "./near_dist/register.md"}}, "04cf4060-a672-4797-85f2-97fe71e4df1b": {"node_ids": ["b4153abe-a5a7-4e58-b589-4133240d453f", "b516b0cc-1a4e-4424-87f4-d3574b1420f9", "3822a9e8-014c-47f3-ac0c-b85dce7b82cd", "2f17dcfb-8c4d-4b7d-be6e-c05e4a0bf5ee"], "metadata": {"file_path": "./near_dist/2024-05-30.md"}}, "ae26dabe-aaf1-4c84-99a6-8ce4fb09b843": {"node_ids": ["eafed134-2542-4b2d-853c-89e3dd3b8427", "122d00a9-187b-4100-bf43-d1052f9a789f", "cd6e162d-75b4-459c-9422-271625d83dd1", "08907ce6-9205-4aed-9c1a-046d22f407e1", "5144eb67-23b1-4e20-83c2-443bb7f84f8f", "29b0ce69-0dd4-4455-8a8b-925dea6de988", "0db5d367-a180-41b6-b7f4-8ee2a93fdca3", "07554ef4-cc62-4f46-ab67-3c16928180e2", "31162e95-bd63-4597-a788-c9d43e2cc818", "6b7c1c87-d457-4fea-a445-6f77b48e17cc"], "metadata": {"file_path": "./near_dist/minting-nfts.md"}}, "a2cf181a-fa3b-472f-9a23-595b9240f106": {"node_ids": ["2dd4d1be-593b-4d43-b029-69ca0917f9a5"], "metadata": {"file_path": "./near_dist/stats.md"}}, "163afcc5-954c-4706-a4f8-71841930e68b": {"node_ids": ["31d5579b-03ff-47ef-bb01-abbec08d09b3", "2fe88262-f362-4b56-b764-b111a5b71e94", "214dd4b5-775f-4640-8b01-08255f4f4322", "1c429120-a926-4a8d-b292-fd7bfd2f7c39", "a1f64ac1-43f9-4dd2-a352-39aad06812e6", "aa8888b1-c16c-4ee4-b39b-44cccbe7e3b7", "0b13c0cf-075e-44d6-8ae2-cb93b71eeb99", "3101ca8b-7952-4954-9246-a5bc95811dd0", "644f950a-a273-4087-954e-51866510b605", "6cecd306-281f-496c-a787-4311b138de4f", "fbe475df-ba7d-457d-9898-07300dea287b"], "metadata": {"file_path": "./near_dist/python-nft-indexer.md"}}, "5b1f7f95-477f-4c64-a8c8-c00eef830f95": {"node_ids": ["1b791093-3d37-42ff-8388-d5f8c0dbcf87", "65b6d834-d63f-4387-8e86-7e58f9a982ad", "5221cd65-946d-4eaa-98f2-8aa43cbf30db", "6dc3bad5-438d-422a-a292-f2231bc7b60b", "fc5be5cb-5a3e-4dd5-938a-4030a533e319", "3e23a600-7614-4181-8bcb-de5d0e97b663", "29ec3513-a416-4cd6-a168-e99574b5b936", "12e99050-9a77-4dea-bb11-25210bbdad94"], "metadata": {"file_path": "./near_dist/hello-lido.md"}}, "159bd272-a134-460a-a757-6a01103a85bd": {"node_ids": ["7849a40c-5ba9-46e0-b954-d2102ac1721f", "d70d6c86-c277-4c98-b0fd-afb559cd1cbd", "eae7da77-44f2-4c46-913c-4bd922b075f3"], "metadata": {"file_path": "./near_dist/getting-started.md"}}, "8f90a4f0-8a4c-47b0-8e44-cee383360fc5": {"node_ids": ["2fad36df-c3ca-49cd-8fa5-a952b2472f53", "20f7d0ed-51f5-4b28-8862-709b7cb1ca39", "0dc6a52d-f6c6-444c-8e05-c62442b8aa74", "e16c6fe0-00c3-4079-b1cd-88da01f2dda2", "3254f7be-faa9-4326-bf39-16b8b8b49e0e"], "metadata": {"file_path": "./near_dist/indexers.md"}}, "2a576e93-6516-42d9-9e95-e8f3a5b3b12e": {"node_ids": ["d8bd6107-48c9-473d-9db1-5db9cdd7dff6", "c2cd96e0-1316-47a0-bee3-1b571070e54b", "70bf1072-8123-48d9-a817-7b2e63a31098", "e02948fe-9ef7-4b6f-8b46-6be9b4bb856a", "24d7b1cf-1d19-4f9e-be78-92580e5ad2e1", "5f853170-ac30-4441-bd6e-e001b1802c41"], "metadata": {"file_path": "./near_dist/help.md"}}, "9a995f22-10d0-4bce-bf68-20219c9b47f6": {"node_ids": ["dc487517-b2f6-4089-a9b3-63306b204f30", "ab1798d5-ce85-4731-8de8-39f059cbbcf4", "c2b628d4-29a7-450d-9182-e6341692b5d1"], "metadata": {"file_path": "./near_dist/token-transfer-flow.md"}}, "2dbd03d7-fdc7-4a55-a2b9-eecdc253f913": {"node_ids": ["f4f5d698-ed9d-4483-a75a-cef81a37cf68", "fb6fdf49-2843-4368-bc32-4e1b6447cfb5"], "metadata": {"file_path": "./near_dist/simple-nft-minting-example.md"}}, "cec30de8-8dad-486d-a34f-bff103ca1161": {"node_ids": ["538649db-1155-4853-be22-f708538430f7", "bc02bbd8-8afa-41f8-9d1a-e1c83e199386", "e480413a-dac9-4f17-9789-08d719897a5f", "8101703d-5712-4390-a3fa-725bab6a932e", "22275b90-c71b-4224-a50a-019afaa71eed", "59b899c4-12da-47ef-b850-672b700f4f7b", "49253671-5888-436e-aeec-9d350538c174", "7ccf003a-0b0f-44ff-8196-ac01ae7ee079", "ddc746b1-bdb2-45e5-8f48-a5f7531790e5", "a4d02ec0-34d6-4593-9de5-6150e62d458f", "41986966-7c5f-4d28-b4d9-290812f5a92a", "f8f82ea4-e120-4118-b34d-93203f338d59", "cb693b3e-8030-46ff-a566-10f109b84205", "b6ee4a8b-8b1e-4c5e-8e91-ff118569bbf9", "164ab1eb-2152-4acd-8589-d674227fa7a5", "bccf2235-659a-4ab9-a60f-b22cb290ef60", "58453927-5854-4108-95f0-af5d720195bd", "7c78e2c2-bcdb-4a43-be74-1c3ea55bbbb7", "6ffeb55a-f210-4c57-a2ff-32579fda66d3", "d8033542-dc19-4284-b628-4bcc7fd68f13", "feba14a3-90ca-4a11-a56a-fa5ad845f767", "275e5590-2a57-4380-af34-04232ca38e81", "94cced91-adca-4d24-9a6f-5d3f2bc20a62", "75bfb15d-dae7-408f-9364-4c9f7a5e8c53", "fd1c2193-ea7b-492e-afaf-6040f9ff3801", "43f4a833-18eb-465f-9341-7f189b67a50e", "2d22e5cd-2d96-435a-86eb-af64884f2f47", "30c4f255-c0cf-4ef1-aa6a-e8b902a561e0", "62a5798c-4653-4978-a1ae-dfcb65e542a0", "9267b605-c755-4fd0-8026-b6bd755e8f15", "0f8e2101-da20-4caa-9aef-779628c2c119", "1d522e18-f04d-42f1-8f83-fb723b16e4eb", "53651477-9b2c-4535-afad-302873627034", "30612fa1-1df8-48db-82e0-bf865870b902", "85b88d62-a0c7-4a0a-9835-655cc3e0c2a2", "b8e0e55d-1f30-49c4-8150-45f7e83cb0d2", "3dc13125-22d3-4a7e-97cf-5852ffa7f0ef", "e5b660f1-fd8b-45d9-bbd1-5f0044bfe10e", "6cc13986-5d8c-45ef-a796-266ab9c68ecd", "0b5fdfd2-9225-49e7-abf4-5b813409d753", "0ea45d82-0fb7-4ef1-9961-329b68d2b7aa", "812d9c19-4217-44c4-990d-e15f02b19b3c", "985f071b-c6d4-4283-8464-236e6853db3b"], "metadata": {"file_path": "./near_dist/api.md"}}, "b54f58f3-8b43-4bc7-8b26-daf42b5a92b1": {"node_ids": ["c9a76086-b720-4df9-a0c4-f8e370820286", "70f839e8-585c-4ce4-a67b-be39c4f33ace", "fcead954-6ac5-40b0-a905-546281759da4", "cdbac1c5-5ab3-4037-bc0a-7d030e334cff", "af114149-e6fe-435b-9ea2-09bde8ac0086", "34e9ac7e-ba77-47eb-bd0f-edb7d6a02a15", "ec126c0b-21be-4489-a8fd-cd93a50437b0"], "metadata": {"file_path": "./near_dist/nft.md"}}, "74e6a02a-a5ce-4469-a2e6-83f4548a15f3": {"node_ids": ["d2ac0fad-61f3-413c-ae2a-29e9f16e9b88", "ef6d2574-a864-4d23-8ec7-c887699cd220"], "metadata": {"file_path": "./near_dist/integrate-components.md"}}, "1b854b3f-838c-47c6-9eb6-abc5dc6e4d40": {"node_ids": ["f96383ac-1b5e-491e-84d7-f1bcf24be881", "5c106e74-a68b-4d84-90cf-df3bc68ac835", "5ac3f3d2-3320-4b07-9b37-1a7e3260d74b", "490128b8-c2b8-460d-aa16-4fdbf4a1c512"], "metadata": {"file_path": "./near_dist/2024-05-15.md"}}, "4889eb72-a647-41e3-992e-8480d36ac81f": {"node_ids": ["2c7a0c5d-9a10-4841-aa89-6508cf77e616", "523e2bd0-d33a-449b-bd22-4844d831e580", "afbe13bf-a2af-4efa-8d53-93a50dca3dab", "b0aea040-0cbe-44ef-ad3f-4adc0dc4ccb8"], "metadata": {"file_path": "./near_dist/implicit-accounts.md"}}, "65101921-5443-4ca0-8d91-1785635df910": {"node_ids": ["22d18815-5b80-4fda-b6cb-41ace5b37bd5", "fc3a8753-6964-4f3e-93b1-7bbd0add6217", "dcef93cb-a6d9-4031-b026-5979703d04fc", "f50e3ab7-0ddf-4f04-9353-f04661b96709", "069d7eaf-2ea6-4fb0-86f2-900aa4648d32", "d77333b9-a63b-494d-a1ba-59372829b6e2"], "metadata": {"file_path": "./near_dist/quick-reference.md"}}, "ff765b7b-7110-4f5d-a9c7-16a8e50f185f": {"node_ids": ["8bdaf7bd-cc4d-4077-934a-84d61ef49268", "08274152-bcff-4fb8-92f3-44382c1ddcaa"], "metadata": {"file_path": "./near_dist/2024-04-23.md"}}, "3d0e772a-22eb-41c0-bc12-a4bf095cb7ba": {"node_ids": ["68d844ec-7273-4b94-8b14-22654a594f58"], "metadata": {"file_path": "./near_dist/send.md"}}, "e1bd346f-3b53-462d-94a0-6803dccca798": {"node_ids": ["73d97eff-cbb2-474c-b6db-c9f87adb08e0"], "metadata": {"file_path": "./near_dist/get-pools.md"}}, "d928752c-d53d-4ee9-8139-6b54e6518b5e": {"node_ids": ["12bfaeb7-a008-411a-9e37-bf457aea9700", "c3d6565b-0870-4a28-9e95-f849aa99e587", "d19853e8-6784-48fa-94ff-425b5ec45912", "a488fc1d-ff36-4f2b-b7fb-d8061c63e6c9", "c814fc4e-684b-4cb6-bfc2-67623acde480", "29568542-6298-41e6-9efe-1108136bac0b", "1c73ea86-afa2-45df-9107-a904795a8253"], "metadata": {"file_path": "./near_dist/4.storage.md"}}, "a7c6b853-691e-4b4a-8427-7056c4925b1f": {"node_ids": ["5802cd94-ecca-486f-bf9c-44f43cdd45ca", "29da7bdd-e893-4630-8ad9-f4b34bcee24b"], "metadata": {"file_path": "./near_dist/exchange-integration.md"}}, "059f338f-4a1d-479c-b5f8-7135a5eac579": {"node_ids": ["69a73545-fcc4-447e-944a-d855ef0f755f", "fa835245-b6f2-4ea6-8a8c-f106c48983fa", "b22cdcce-dee7-4963-8deb-62de84287bd1", "ca120f32-0977-40e8-823e-ce1432f68c5f", "273de7bb-bd3f-4bf0-a329-950d7853b966", "b2d6fb79-5744-4a9a-810a-70760d234da4"], "metadata": {"file_path": "./near_dist/primitives.md"}}, "c2264fdf-9dab-442b-a332-8de54ee3df9c": {"node_ids": ["084589db-b853-4467-b011-2a8fa941ff82", "2045ca57-a3d1-4593-8811-358ec8925ee8"], "metadata": {"file_path": "./near_dist/indexing-tools.md"}}, "d19c21b1-5f1a-4c3c-ba44-c43bc10ab934": {"node_ids": ["dbc7f63c-91d6-40c2-9f19-2c0e46d8c9d2", "5518537c-92d6-416b-9f48-e0a4aa22c5ab", "5331d0a4-369f-4053-92c0-7a344a3aaadd"], "metadata": {"file_path": "./near_dist/bos-ethersjs.md"}}, "519d9f24-f372-4466-9f99-9f10c0271851": {"node_ids": ["6b48ba1e-4786-49f9-88e4-a4261e6c06a9", "c753a2c8-443d-457a-9d60-bdf7d8bda0e9"], "metadata": {"file_path": "./near_dist/frontend.md"}}, "7e6b480b-3d09-4ce8-973b-ba26e7be9ff0": {"node_ids": ["fcd4ea32-5407-4263-9520-1fd954c897fb", "89884230-fac4-46e5-907f-8910d6cd1064", "4d72e59f-f62e-435a-b280-5f418bd3db8d"], "metadata": {"file_path": "./near_dist/2024-04-24.md"}}, "ec4187b4-23da-4620-882d-58756f03b95e": {"node_ids": ["27ef5107-c0d3-4369-9b73-cce92d1d8757", "80f0107f-cbfe-4925-9e73-3a51b30e7466", "830ba288-72ee-4218-99c7-94d4b1c3b56f"], "metadata": {"file_path": "./near_dist/how-works.md"}}, "042c5071-be85-49e5-9e43-8a66ba22744e": {"node_ids": ["343caffc-e7f1-4303-a162-dbc261d6eab8", "e31e12fa-608a-45ea-a4a2-9a2149ac0c73"], "metadata": {"file_path": "./near_dist/relayers.md"}}, "9244eedd-0860-4505-8097-861902dd84bc": {"node_ids": ["3d9b4f83-b2ec-447f-9b84-d0401c107fd1"], "metadata": {"file_path": "./near_dist/create-proposal.md"}}, "8ca4639b-7c32-4acd-a236-63be501bf9e6": {"node_ids": ["856a5f04-c0a8-4f30-a76f-16000cf2df95"], "metadata": {"file_path": "./near_dist/token.md"}}, "2bad1b77-19a0-4937-b958-e6c8b8ed03c6": {"node_ids": ["9c5617cc-0953-45c8-94cd-2b670ceebf8c", "d7ff3cc0-c751-432c-92ab-8c1fd9822ffe", "9c9b16ec-1dc1-49fa-85fa-153edbd22a53", "de91555c-613e-4e3c-96d8-cd067c60dd6e", "b8258c60-c3ba-4bb6-849a-f5f81471438a", "bc56afbb-70df-476f-8bab-8a49c43f3745", "17b7b9f1-c758-43f5-afc9-bf596d0c2511", "a14afa85-1578-455b-a272-d70ca43f6b4a", "d86664c1-9764-4f4c-aa05-ce7ead56d53a", "f8e22b88-686b-4dc7-8fdd-07e54e218710"], "metadata": {"file_path": "./near_dist/design-system.md"}}, "1e42d633-e0bf-45fa-aed1-5ff5eb82886f": {"node_ids": ["1d94dd9f-0ada-448e-8466-ca02e1560843", "62f0d714-75d5-404d-9619-9b912fffa433", "1630006f-0436-42c5-b1a8-97d82a7a3c58", "3c62d1de-a487-4641-b217-36b7135b65c4", "e33c0e66-0ba2-45bb-95d7-10c396e455d0", "f016a6e7-cda9-4965-8017-d42e945e4715", "673c3064-5692-40c9-a969-a51e2d9c6639", "2af3e714-9524-4a22-82a8-d5350b1233f7", "0c873885-ba2e-4953-9ec5-4104279d98ce", "73583fa7-065e-4b21-abea-b6539e085693", "4b4d3e3b-a422-4242-b4fe-3ba6eb414d61"], "metadata": {"file_path": "./near_dist/feed-indexer.md"}}, "922a3bbc-9209-4aa7-964c-71c7174b484d": {"node_ids": ["68d7f2a9-83f0-4ded-87d6-7bd1b5f269e6", "75da603a-64a8-42ae-bead-689bb54fb329", "5cc04949-3755-4b29-a29d-2dc64d401095", "72abd714-515d-4853-a369-3782eb2f4c02", "3e2a8d92-b897-4b9c-9b71-e74d20eebb6b", "d7e66126-886b-4277-aa7c-f8cced9a6e79", "2052fad6-d4fc-45f6-84f3-3e25be1b03cf", "78c83d5a-73c4-4706-82f9-e89e4a59f417", "e25bec66-983d-4b60-b9f7-6daa5e402155", "f95714f0-c1a2-4d99-b208-4fe2dcd0312b", "ebe4c503-ded3-4635-8646-21d2a0d985e4", "52210c76-98a7-4896-9fab-14041ad4d0c0", "2581c591-d4ad-4236-b30e-bc4bd81a6c6d", "f3939a24-2c16-46fa-8813-93a2c499f2dc", "0e466379-ca1c-4293-80db-8867127fd30a", "b1f8bd3e-0bbf-4f6f-bf33-d0e2ba58275d", "ab990eba-2c35-4bba-8cbd-4ab41dae4cdf", "959482f1-4d8b-42fe-b46a-91403d0c704c", "90d8af20-85e9-4057-816d-2b17d51c46f0", "87369dc2-318c-4af4-b239-e2df943c4989", "59b15cd8-c36a-442b-9a08-4546258686d5", "80f98343-a0fd-4257-986d-ad6271854eaa", "c67604c0-0371-4f7a-a7a8-c8a88129bbdc", "3f1344fa-9d35-454e-a8b0-9c87ece68e0f", "7833e786-7161-4464-be1b-991a9592d38a", "1195b82f-264a-4d22-98ba-e188cd1f4686", "48200d64-04f7-4998-ae03-d0a69be6d0f0", "23671998-a4e1-4a9b-9e63-493926214701", "1bb062fb-d3b9-456d-9651-35ce51d6c9cb", "f9c572d5-0d45-4dad-9d5c-72f0044e84d3", "d645ac00-6232-42eb-b408-77bbcc9bd118", "6f1a2c6f-2b4e-44d6-803b-89a5b09c2c94", "5c1dd796-a262-46e5-ab81-7ecc2da90f7a", "3ca317bb-6813-48b0-b6b3-ea4e350cb1b2", "8dd5f5af-f3c4-4105-b9a6-f07d73980a9d", "017b1f81-552f-4f00-b00f-a3d192149313", "86817f53-59b0-4c2e-9cfb-0e4036994a2f", "5cac58a3-b902-4c30-bb72-3e43d532d538", "a2cf5bcf-b203-409a-bc7b-c4b2759bb793", "22f297f4-cfea-472a-ac50-55b0373e95b1", "b0f8fb39-eaea-41d5-b610-bd2f2e37906f", "9f5895fc-96c5-4a77-896a-315e4c7093b6", "f074be08-54bc-44b9-8bad-357302827d3a", "0e1e022e-2b47-4770-8bae-bf77eef00be2", "ac4556f9-670f-43a1-9ee0-e249bdc85c04", "f7769871-2acb-43c5-bb3d-dd08887690b0"], "metadata": {"file_path": "./near_dist/tokens.md"}}, "33ca161e-cafe-4c7b-90d5-5ea9cf0528d5": {"node_ids": ["68a308ba-3d20-49c0-8b94-d55213698054", "4938e3c3-2017-4a52-a964-0a1c49526521", "eb97ddfd-5fae-44fb-bee6-5d89753e5051", "9e12a08c-6e75-4ff9-9bcc-61b2c7caba1e"], "metadata": {"file_path": "./near_dist/setup.md"}}, "6e3eb5bf-b018-4807-b85f-1eb2d8e9a852": {"node_ids": ["3d65bf3c-e834-4fec-8fec-dca55ef3e739", "78990f0c-09fd-459c-88f9-9a13363d1801", "535a2d0e-2b33-4a1e-a42c-3159ba699a3f", "56679bc5-ba6d-4aef-8570-e219c2c94b30"], "metadata": {"file_path": "./near_dist/near-lake-framework.md"}}, "f06ca800-2135-4f04-84cb-9088a554e1bc": {"node_ids": ["6481616f-67d3-47b9-be72-93e2a17b9626"], "metadata": {"file_path": "./near_dist/list-for-sale.md"}}, "49cdffca-ff74-4732-aeda-b996777b7dc6": {"node_ids": ["b9db4a17-d5cf-4526-b5be-8ca24ef63353", "e0e602a0-df33-4414-bd22-1dda06db93e0", "d2f8fb45-145b-4d34-be57-3fb245b32720", "75018fbe-f42f-4d66-a544-2d1c6f045d4b", "53670b6f-cbc4-4b0b-9c04-687043f18765"], "metadata": {"file_path": "./near_dist/1.2-testing.md"}}, "37d48631-50d4-4c64-8602-c90c0ad8cbbb": {"node_ids": ["763ec519-83f7-48ee-bc86-4b729c5bf7df", "562b7236-b839-4254-babb-d6e3cddb5ae0", "a14b16e7-4198-453b-bfbc-2a91fce4e958"], "metadata": {"file_path": "./near_dist/hello-near.md"}}, "aa4e28da-f27d-4446-89a2-ff25d33881f2": {"node_ids": ["bbe92749-bce9-4e46-807b-7c7cf91d37f5", "6b8b349c-d41b-4329-aa40-a32faacfb2a5", "7a0730ee-9a79-46c9-8564-e7eec9bb3c53"], "metadata": {"file_path": "./near_dist/validators.md"}}, "3583ecf0-d669-4e61-a52a-0d02b1adf999": {"node_ids": ["9bab25ab-c803-4768-9cba-21862d1751b7", "d291f438-0c5f-4f3d-83d7-aa4af99c7a9d"], "metadata": {"file_path": "./near_dist/networks.md"}}, "7fe60abf-beb4-4b9e-bbcd-a3668e69b886": {"node_ids": ["04563622-16fd-40f5-8409-11270d034427", "dfa5085d-a991-492a-a324-a0f1fb4e7b73", "e7334d11-436e-4a7a-9000-d92467ced7e9", "b1cc4c3f-7dd5-4848-a7c8-59421a2203d9", "85b7e9d2-dae1-475d-a00d-10f1d720132c", "7b224e62-5948-4824-ba51-873921ee8468", "d62777e6-7505-4c5f-a630-bb482f48de31", "e0fef1ae-3e5a-40a5-82ba-0fa98bf99c0a", "46002793-2a3a-4afd-b3ce-abb5d012489a", "cf66281e-e150-4307-9193-f791bb90db6a"], "metadata": {"file_path": "./near_dist/actions.md"}}, "48725fe8-57e5-47b3-ad73-720261c88c5c": {"node_ids": ["e3ffa5b3-22ae-4aab-ae3a-da040a25249b", "f77559b5-bf8d-4da3-a16e-a20b90ca9d70", "0632fef1-82be-4697-bcc1-a83a4f8d3edf"], "metadata": {"file_path": "./near_dist/anatomy.md"}}, "c7691598-9b96-4355-82e8-8859932a5a35": {"node_ids": ["5f74420b-32fd-4e21-b60d-88b87065f682", "a79eeccb-4e91-4413-8c4b-9380364a4d36", "ed8016dd-77af-4fbf-bd51-ab8a239c8678", "390e6c20-b9c5-4086-9c78-2f94223972dd", "aa70af44-e839-4918-b4df-01fa3eeb7a03", "8b87a3e6-da9d-49bc-99f8-a9e411242228", "3f101f89-cd9c-4540-b574-6906b4be8c21", "d5351c4c-21ce-460e-b969-574c30ae4509", "50a62226-d7bc-4b44-9e05-45da9a9afb08"], "metadata": {"file_path": "./near_dist/cli.md"}}, "c3181c8b-8275-4df5-8e33-e54ad3ae299b": {"node_ids": ["c37f1c7d-4d22-49a2-b4eb-4b2445a9e6c0", "174bca80-86ab-4891-95a7-8217d8986ccd", "467d4502-929b-4ef6-ade3-869ab5d0d4c7"], "metadata": {"file_path": "./near_dist/transaction-execution.md"}}, "aa3f657e-dbc6-4c78-bb34-79044dca8258": {"node_ids": ["6bebde77-7112-4d8f-accc-82bdd72dcc4e", "af856bcd-fc10-4713-af37-daabae63674a", "b4b8eb96-d98b-464d-9a6c-a2403836bbe1", "11743469-38c4-4359-abe6-1bca8f2b71e1", "95df2d7a-9b78-4198-9708-ba13a3a71e77", "55805337-7b7b-481f-aada-5f5e910586ac"], "metadata": {"file_path": "./near_dist/chain-signatures.md"}}, "a41703e2-a39b-4f52-98a1-c0de26eb8100": {"node_ids": ["983d9a30-6e47-4397-a073-e7c674d8cf91", "ba9614d5-d9c8-46fa-9367-7f27d0fe56da", "95014d92-6e16-49c5-88dc-eb73695c6508", "cc57c69d-306f-4307-afb6-f89c9824cc82", "fdfb2b7b-7ae0-4b98-86f6-9a562d2ca519", "f7006f87-006d-4924-a395-f5d7470d2513", "989ceada-ebdd-425c-b764-66baaef40408"], "metadata": {"file_path": "./near_dist/nft-indexer.md"}}, "df3e04d9-1c48-4ad4-b033-a0d2f806ffca": {"node_ids": ["5d87902b-09f4-40af-b384-1bbbc821361f", "3b805d26-a995-4823-b1ab-77665b3f59ea", "0fcd7a41-0ad3-466f-8db9-838eb5f83f03", "bb0bdf90-177c-4f03-919d-0f2d120b2303"], "metadata": {"file_path": "./near_dist/dao.md"}}, "0893016c-8d9b-416e-9398-b4f8a41bdcfb": {"node_ids": ["a8083d1e-9cfc-4dc1-84a8-e7c52f212b7f", "50935a81-f53a-4542-a492-fc9eaa094ab4", "0c0e0751-9dcb-43f2-89f9-5eafe3bc7de7", "2ec95384-8b6c-491c-a90b-c13246200189", "8d8f9268-c920-4d5e-aaf4-893768ac1d4d", "a2f38771-9dde-4dcb-8357-f9edee612920"], "metadata": {"file_path": "./near_dist/ft.md"}}, "1be7a6f6-6d3e-46e1-a9c0-920b7001330f": {"node_ids": ["fd060ed2-af01-426c-b07f-0a1215487434", "faf72222-66b4-4e80-9163-6c01e4733d77", "3ef82d58-4997-410f-bf12-4d35a1555150", "317b6a5a-244e-4afc-96a2-d88611a3b11c"], "metadata": {"file_path": "./near_dist/reduce-size.md"}}, "a517b1b3-a47b-4b8f-994f-bc30a24c8bff": {"node_ids": ["496839cc-9a83-4d88-95ec-90a85600ef9a", "c11239a0-2b61-4b9e-83e6-cedf58d42c21", "7d8bfc88-6de4-4e85-b1e3-cbeeffea19c2"], "metadata": {"file_path": "./near_dist/types.md"}}, "1a2ccd21-cd4c-492d-b0fa-eb778de5323c": {"node_ids": ["5c463161-618e-4147-a960-d8f280258c2f", "748aa497-63d7-4507-b701-c0b4bcb5bdf1", "2c6a7663-6214-462b-9171-ab9e09106d5b"], "metadata": {"file_path": "./near_dist/2024-08-13.md"}}, "be1a981a-5390-453b-b9a1-a67d02d2f669": {"node_ids": ["da0b0a28-42e0-4b16-9ac4-9f45ec7893b9", "402ceb2b-2add-449d-b8d6-4347bc5bafc8", "3650b9e8-097d-4a5d-ab3f-b26bbbe06eff", "3af4c23b-328b-48bd-a86e-20bf4b38bd4e", "c38e07df-4e0f-4294-8c3f-1bf730729942"], "metadata": {"file_path": "./near_dist/posts-indexer.md"}}, "9de93f35-1e36-4a2e-b7f0-1bc02e52a0e4": {"node_ids": ["7febecd2-cf23-403f-8f54-cf368a8f0fd3", "a4586836-7bd3-482e-bf22-e6ac97587451", "369102e0-0256-4a33-92a1-613a9aaa2a01"], "metadata": {"file_path": "./near_dist/nft-keys.md"}}, "65697ecb-2b06-4339-92ed-186d900bae92": {"node_ids": ["6918c4cd-3c37-4700-82c5-087f14e4bca8", "f4fe88e5-3de1-4b28-a2ae-f72a0207b9db"], "metadata": {"file_path": "./near_dist/bos-loader.md"}}, "2ff31c45-e0a7-4771-ba1c-eace18d5346a": {"node_ids": ["57a9e994-06b3-40c3-b36a-9fc52e7f8838", "b7982cb1-336a-47e1-a79b-149a6a28f45e"], "metadata": {"file_path": "./near_dist/CODE_OF_CONDUCT.md"}}, "527ef4f5-e248-4215-9097-1adb73311286": {"node_ids": ["959766bf-fc87-48ac-8c36-9eadb1d276bc", "68e70ddc-0f2a-409e-8b73-c8199d2b060a", "4f3f5bd4-00c4-4069-ab46-2b0fd7bc4557", "878f75e7-d6cc-4a8f-96a5-b09e5d4a77ce", "e20ad06b-71e0-4e95-b736-2f39a91b7d0f", "51d405a5-24c4-467a-a5b9-c1ffb9e7b34d"], "metadata": {"file_path": "./near_dist/04-adding-a-puzzle.md"}}, "4df91a86-0e1e-4b79-8f2f-dcaf0a5eaa32": {"node_ids": ["22de840e-9a1c-4fd9-8ce0-e1862e444bee", "d5ef0bc8-f1ad-45f4-9224-4d856d9b2d8d", "2702a95e-d167-472f-8a48-393f3c730574", "baffb0fe-7b8e-4987-b197-f8b870eadc08", "6bcf360b-dd0e-4e65-a06a-561d4f44dcab", "ecc7b185-baa6-4af6-b25e-13c0acfd9e27", "811ffbcf-f542-45b6-8bad-250b9719f56e", "2817e6ed-8f35-4ec0-abfd-7c50be98bc74", "f7e3d6a3-f0b3-4699-9bcc-f107437939b2"], "metadata": {"file_path": "./near_dist/6-royalty.md"}}, "2e276c8b-65d4-4e79-ab74-72917b0a2283": {"node_ids": ["043894b2-db48-445a-8bdd-5780da37858a", "c41a7805-4d6e-460e-9c41-0a03be8bbd5c"], "metadata": {"file_path": "./near_dist/what-is.md"}}, "42146898-2e7e-45d5-8d4d-cb17a27c701a": {"node_ids": ["4b0fccaf-3568-466f-913f-fd7413cac57f", "8f676efa-23af-4bd1-80f1-5bb586ecefbd", "84020472-2075-4822-9371-821c8035d0b0", "da6ac31b-6943-42a2-8a83-c4ca037f6c5e", "4d757e98-f19f-4ddf-9c04-18793ee90a19", "cc4d8669-70be-4b59-a97f-0075a7183bc4"], "metadata": {"file_path": "./near_dist/queryapi-ws.md"}}, "7f3a153e-4368-461a-b65c-0509a7eba737": {"node_ids": ["e4827c90-6eb3-4ae3-ab52-90c2eacc59a7", "6cdb4300-a634-412f-9c1c-1266353f08ab", "bfed7c03-84ad-457e-bd13-57a07182a0eb", "618864da-03b1-4089-9034-bbcaacf7a264", "f3d941a3-804f-49da-9428-5cf2345588a7", "868469ae-3f6c-48c2-965e-3cf4f694f104", "0d1f7326-b8af-4f0c-a66e-6569a3390c73", "4768c3ff-545f-40f5-afd9-5e42797d56dc", "588c5ee0-08f7-4137-9c72-49be25c0101e", "3ec7592e-880a-4210-88ba-1e8c8717b8c4", "f49aaae7-f62e-47b7-90d4-93bd3a793672", "15b95d56-74ca-4ca0-84d2-86625e688ddd", "3bdd067b-f8e9-44f9-b51d-a92b35198ee4", "9e27be60-9878-4041-8a91-c1ebb70d1b7f", "0fd5a296-cccc-40be-a624-007742aefb94", "066e1526-6a1b-475b-9bc7-86199482045e", "1eb0f855-5c96-4876-b321-0ec3b349c979", "8c65c010-acb1-443b-97e4-6b9f00cc0415", "c4cf133b-d0d2-47d8-b98f-2bc8afcbcff4"], "metadata": {"file_path": "./near_dist/5-approval.md"}}, "150ff207-3e9e-4d5d-99d8-d88022e71575": {"node_ids": ["2d45c580-c2e7-401f-bb33-a43ffe4d78d7", "36dc66dd-3c88-4a34-b5b0-5176ee2e8903", "cfa6ab11-9037-460b-9733-59976700c271", "d3b920e1-a46f-4d2d-8bf1-374972a9c514", "c75a38bb-cdbc-48e2-8a88-af585e7280a3", "6da7f737-b039-440a-b9f0-b6dc8e46d75c", "1d8e4acf-0d8d-49e4-b53c-09c9adf0196f", "b9af40ec-4c16-4ec1-a854-47978e159e2c", "8a3a68d9-1d2f-483b-a5a2-10374231a9d2", "eff956fb-4604-4ec1-96a7-314419fba34d", "4e7d5550-c53c-4568-accd-9a68e16fa538", "d11e8d8c-24cc-439b-8a7f-902626308791", "616cce0c-5ca0-4209-a37a-a7548720843e", "ee416e4b-0044-49cd-bba6-c97e53c5672c", "bb427c6e-929c-4c23-b62a-334cf08967db", "6ce6a55a-dac7-4ee5-af12-0d48cfb7228b", "0b5d4d4c-11ac-4f08-b55d-82f6c6ed0256", "1042c0a7-f43c-4a32-bbce-a37723af2239", "ad292271-7fb4-4163-9770-990a40ad6ff4"], "metadata": {"file_path": "./near_dist/6-marketplace.md"}}, "ef9c78b4-b477-4a17-9788-055328c36ba3": {"node_ids": ["78c77b55-c0bd-4e33-a285-a2e2d81103e1"], "metadata": {"file_path": "./near_dist/transfer.md"}}, "337d93bd-dc47-40d3-a7e7-ae07494f5995": {"node_ids": ["2fc99b53-171b-4143-bef3-8acb338f0d24"], "metadata": {"file_path": "./near_dist/meta-improvement.md"}}, "6275d904-ab30-467c-a419-9dede89167f7": {"node_ids": ["38899778-8ae5-4d6e-b935-ab343a594d70", "1d3b750f-e6f1-4a15-9ef8-5059cfe6aebe", "8a518dd7-4123-4ed2-872f-c789a3db67a2"], "metadata": {"file_path": "./near_dist/01-access-key-solution.md"}}, "83aa8e0b-67eb-4dda-9acd-6b94ac620b36": {"node_ids": ["b1ea9281-3f4b-4198-abe1-40ce75a3913d", "fe5c43e5-e8c9-4e87-9fee-bc7492e6ebf7"], "metadata": {"file_path": "./near_dist/0-intro.md"}}, "23d0d087-64bc-4bb1-a288-c4b162c05799": {"node_ids": ["6acc146a-a015-4b6d-a5aa-8c125c8f55d3", "2cc0025d-b282-48a3-8e3a-12d2f2bca24f", "43fa3d47-af19-4a14-916c-9095d3bd5dfa", "a654a13d-8031-4789-bb3c-7f4d2a929d5b", "99da5886-5c08-4488-9761-5ba577006ff0", "7cbd59cc-15bf-4509-be3f-855109c82624", "b8ac4241-9feb-4d74-af0c-6e5690d7c7ea", "0098cd9f-3ca0-4065-a48a-2a9d96ae2751"], "metadata": {"file_path": "./near_dist/03-hashing-and-unit-tests.md"}}, "9497f7ca-e4ea-4ddb-8628-7274e381acb5": {"node_ids": ["d90ec3b2-2cdd-4265-bede-bb6d050e7101", "3cd0411e-55c3-409d-bb95-0658dc4c9641", "e0d41dd5-bc88-48c6-9024-3dd8112078ab"], "metadata": {"file_path": "./near_dist/3-enumeration.md"}}, "e90d2408-af3e-42f6-b4b1-273c33b4d71b": {"node_ids": ["bf10d780-792a-42ab-a44a-c0775a60d343", "ac3248e7-a58c-4e0c-8e1c-a9c326585b26", "217aac38-f84f-4e29-87d2-13289a6d1916", "fdb817c4-fc70-49c4-be22-c3842e8b0812", "e84964c4-3595-44d8-9221-15dee27dcb3e", "a533080a-fb3f-44d5-ba19-b3c637d0cee9", "9901a8c5-d0a5-4491-9496-5e457f331fe5", "bfef6977-460c-42e4-adac-5d96ca0c217f", "36d3c4aa-850d-42a9-b384-b206479df438", "ff74b474-fa28-4cde-a602-41430d03ce57", "0285ef6a-46a7-46eb-90af-70c2f2ebd435", "060dde09-e64a-499a-81e3-9203fc3ae0b2", "7b35d654-25d2-40f7-b201-896029031399", "e778ab4e-b783-4493-b9b6-184764659bcd"], "metadata": {"file_path": "./near_dist/05-base64vecu8.md"}}, "0a6fc327-bc58-477e-816e-5bbc4e9f12e3": {"node_ids": ["f0dc985e-da08-47fa-9e97-077797b27b05", "a8e59399-24f0-459d-950e-3fe0e875d201", "ede725f0-f045-4e39-b306-f5a80e51fa81", "0147177c-66a2-4086-8f31-c15e5b86eed4", "1c8afef5-3536-4946-81b9-2b1762a455d8", "c5ac4319-225b-4e20-9c03-2170f6e9dfd4", "e77ca36b-e846-4245-8ace-b0e947be2db4", "be397b22-df25-4d21-9668-ba44c98e0796", "dd0625e2-802f-49ff-b5b6-3ad2a1efb224", "fdcaf138-6da2-4911-870c-4dbbc8531520", "1386ce8c-9f8b-49b3-831c-2a0f4ed7c54e", "0b976425-577e-40ff-adbb-81f36187aad2", "9a09c021-26ec-4f74-bf7c-609e07402034", "d79a500c-8b5b-49e0-8bf5-049b6e25df7f", "a5bea15c-ee13-44be-8dbe-2bfe8c4ebfde", "421fd192-3741-4902-b961-6369a17f2ca3", "f4f3a3e6-6556-4b6c-8557-ce57e295a781", "7c784c60-6114-4bcf-8494-7f011a279e49", "c6b2c5ca-cdee-4978-acfd-3e1b51d48243", "9b2a8c73-c9cf-455b-9da8-6d77d8ad190c", "6c8220e7-265a-47db-a176-b1bbfaf230b5", "3007f512-b2a7-4c06-9ad0-e0e6752075a5", "c6d28344-a59f-4c5e-96ac-525aa120075f", "728a0cae-2ea3-440b-a572-225cb42bdfed"], "metadata": {"file_path": "./near_dist/error-implementation.md"}}, "b62153ab-6ad2-4ef9-ab1e-08ed8369badf": {"node_ids": ["7a2d32a1-b036-4345-b752-2e84a2bb610e", "75261c96-7198-4e6f-9d48-fa29a1652778"], "metadata": {"file_path": "./near_dist/token-loss.md"}}, "cc47d689-483e-4671-9b32-ed46aea89d16": {"node_ids": ["c2a9284c-e7a6-4f7d-ac0c-2c68a3b49709", "b5a5d237-6702-4fe8-bcc5-35c0f8c1eb0d", "a97a7307-d490-40d1-bb67-2ed76f0d3c7e", "9727b06e-351e-4920-810e-89a5fdb07954", "9e2b8a87-1424-435a-bdfe-171ad45917e1"], "metadata": {"file_path": "./near_dist/count-near.md"}}, "b4094f74-d6fb-45c6-aca0-14a89c1bb36a": {"node_ids": ["3934eb11-4815-4c82-9d96-0af7b010394f", "31b0a2ec-8e29-403b-afc7-37df7c37309e"], "metadata": {"file_path": "./near_dist/intro.md"}}, "5717c8cc-4774-4d01-a1c3-22807530d5e8": {"node_ids": ["af80a050-a746-4b8d-a2a6-de439413d3f5", "ddf3bbad-3bf6-497a-97e9-ee5564824ee4", "eaa02ef6-02b8-41e2-8c37-84c436fd22fe", "8eb01a83-e1f1-4c45-8c1e-881889e3ff7f", "9d759940-d37b-4dea-9034-b6a762fa8464", "b29d803f-b177-48df-b4e6-e02f7cd05e3e"], "metadata": {"file_path": "./near_dist/donation.md"}}, "28d1774a-9a63-4054-9379-856df9035418": {"node_ids": ["755f3147-3942-4b81-aa32-4eb97387786c", "6112d1d1-32c1-42d1-9272-3e37c9181dfc"], "metadata": {"file_path": "./near_dist/oracles.md"}}, "f9b74a36-ea47-4086-a403-893de752fcf3": {"node_ids": ["6d53a2a3-6e2a-423c-a640-1c586c1b42b1", "b1896b52-027c-4984-8126-64b79817d501", "4ae0a3eb-5abd-4189-84c9-d0472b176d72", "7b7bac35-bf25-4cc2-a98e-e63a74320183"], "metadata": {"file_path": "./near_dist/index-function.md"}}, "f4155770-74c7-42ab-826e-8e8f2ccaf453": {"node_ids": ["6c2698b3-452b-41f2-8345-e5dde674de71"], "metadata": {"file_path": "./near_dist/sybil.md"}}, "310dffb9-100a-4d2e-a66e-d22fb8439be5": {"node_ids": ["0bd4cdf5-3a5b-4a97-bc43-9d16fd36defe", "5121a86c-5613-4174-8342-88fde5782729", "b2af4060-f95c-4fa5-b03d-204ee1f51e70", "95d3dbb6-4587-4569-b970-bc05e8d756fc", "b485e16b-627c-497d-82cf-219d87da78cc", "88d94d75-eef8-40a9-934e-6a2ebcb3b60a", "5ef725c7-a32b-4d59-b3b4-3af2927ddba0", "e82569ea-93ed-4245-bb9e-e31596ccb64a", "66339b17-ea27-4ab2-bb5a-ab7060bf1d2d", "2b2e0b9e-3c78-4fe8-8b03-9242afd2f962"], "metadata": {"file_path": "./near_dist/faq.md"}}, "8f516634-b11e-4c56-a18c-e49419d6a440": {"node_ids": ["2ca07d9a-60a2-4340-8a70-55d2fc3f298a", "de742ca7-c84b-468c-95ed-e88bba3eccd7", "c9300df6-3a2b-4902-ab9b-08cdf48f1eba", "67871355-25d7-432f-966b-ae9f05fd927a", "d1dcf8a0-46eb-4482-be1a-867c6e4a9d45", "049e4e98-e659-4042-9e02-c30422c9682b"], "metadata": {"file_path": "./near_dist/1.1-basic.md"}}, "ac5571c1-3315-4451-b568-600adad50f33": {"node_ids": ["6966597d-4228-4642-9dce-e08ec743eb3b"], "metadata": {"file_path": "./near_dist/credentials.md"}}, "150fef70-038b-41d6-bb58-6f9bb4801f04": {"node_ids": ["080d5df9-3b4c-4377-8c7f-34d31865883d", "bb6491e2-bd70-4e35-bf9f-a2bb1c554b08"], "metadata": {"file_path": "./near_dist/callbacks.md"}}, "bf535fd0-7eb1-437a-ae3e-e7249c9a965e": {"node_ids": ["7bfa00ed-5c91-4571-bc9a-ec47a4b007d6", "261af660-2033-4b92-a1ce-29397e24f4a6"], "metadata": {"file_path": "./near_dist/unit-test.md"}}, "aa3f4dbb-0bf5-4121-b122-78de9f931ba4": {"node_ids": ["b29cb879-2aa6-4f75-8baa-a5f2dcc06e06", "08f13a68-9ec9-4687-8da9-b24d872b9d81", "97102952-ee29-409d-86a1-442d3246e6aa", "dca08142-6c37-4fba-ae7c-07457fa7362a", "d0854254-cffa-42ff-8d81-220c0b800b5d", "060737b6-e4f5-4ff9-8023-237b257ef78a", "f65ec99f-e1df-4dd8-a1a7-38ab82354eef", "45700907-2315-4e78-a862-2cb1f1dc45a5", "11841e9e-0e39-49ab-af72-3271eda71d37", "030070d8-0960-4991-a22f-9ca300558503", "5885dd3b-3fbe-449d-8cb4-f48d2a86ea03", "ac148fc3-b0bf-4408-9ffe-b6ed2f114b97", "2c477cb9-7594-41e3-8686-498d9cdd35b8", "5c239c2d-85d5-48c9-ad95-001abe0281ac"], "metadata": {"file_path": "./near_dist/linkdrop.md"}}, "68b68355-0b7c-494a-9440-0dd7ccb7cf2f": {"node_ids": ["925b4e2c-233b-4b66-8bf1-19a4b02ea924", "58ce9913-faa0-4016-a75b-15c3961f4778"], "metadata": {"file_path": "./near_dist/near-lake.md"}}, "d347f514-1d9d-43bb-b154-b4daf983c05f": {"node_ids": ["cc8b957e-da2b-48be-8f61-e4f28f9f9fe5"], "metadata": {"file_path": "./near_dist/swap.md"}}, "ebfed4f8-1982-4fa5-846e-5e2a9a63ea9b": {"node_ids": ["1b1e4779-8b55-4168-9217-5a1b59bdceec", "962166a7-b5e4-402e-bec8-9d5adcf4cb6f"], "metadata": {"file_path": "./near_dist/providers.md"}}, "87f34c3e-ea19-40d4-81fd-63390d41ea78": {"node_ids": ["16102dec-67ef-49b3-982a-c089c12b801c", "b5c54497-8a1f-42ae-aa94-cb243b5ff62d", "1d668064-d797-4070-935d-cfb37db6ede6", "97bbf3de-0f0e-459a-86c3-8cfbdb560e23", "96325d19-f025-4b32-815a-5a923e46dc67", "b9853aae-2f7d-483a-b91d-74a895edcf31", "3e726651-7774-4e43-8276-e24244d023f1"], "metadata": {"file_path": "./near_dist/quickstart.md"}}, "a3fbdbe7-f7f6-479b-9c06-1af0142e0662": {"node_ids": ["06b6cc14-609e-4a67-8f75-c8b50dca54a4", "7a0b69da-9bec-43e0-9824-b624997bb73a"], "metadata": {"file_path": "./near_dist/update.md"}}, "5121b462-1bf1-49fc-9d6b-fc57d79b9cf9": {"node_ids": ["c2977b61-8383-474e-af9d-d67a317b1932", "3b1adb98-8d36-4545-afc6-1d43c01459ee", "c0126df7-1d96-49a2-ac02-d0f1bbad6cb2"], "metadata": {"file_path": "./near_dist/notifications.md"}}, "fdfd6610-e999-41d7-b705-955b70dd7c93": {"node_ids": ["db764be4-5fd7-47d1-b8e3-6f4e2a6e8a56", "d4efaf7c-8087-4e48-b490-51eeaaf48117", "27aa804b-b7f3-4fc3-9efc-85716dae04b1", "df5c4245-1232-4370-9a5a-5966cd31074f"], "metadata": {"file_path": "./near_dist/naj-wallet.md"}}, "1b68ac83-5c0c-434b-afeb-9d7d69ab4d27": {"node_ids": ["7af0a191-06d0-49c8-8644-a18f5dd3c10f", "d070f11c-1b55-4c93-b04d-cebe6708a026", "af08e70d-2e19-463a-82fc-4be3e9a56334"], "metadata": {"file_path": "./near_dist/coin-flip.md"}}, "a5422d23-3757-4e79-9197-090661ae0b9b": {"node_ids": ["854ddee7-7011-476a-accf-5ad04855fc8f", "9d404e82-1fd8-41b4-aa3e-0deab0883f9b", "0659dae3-4c5a-4997-a22b-3b436cdcd312", "e18c85d3-8e44-4126-85ab-f4558a756c24", "deac0977-1ce9-4c0c-b464-a2040c5f53bc"], "metadata": {"file_path": "./near_dist/02-structs-enums.md"}}, "3e03cfc6-d600-4d8f-a893-2728090b05c0": {"node_ids": ["0390b584-58eb-4e88-922b-3413d4f2f369"], "metadata": {"file_path": "./near_dist/documentation-request.md"}}, "79775fbe-4a22-4d12-8e27-487d879c5b7c": {"node_ids": ["5a5872eb-e559-4e88-b4c2-af44b12a2bfb"], "metadata": {"file_path": "./near_dist/get-deposit-balances.md"}}, "bf4c59ff-b942-484a-aded-a31d3bc0a8cd": {"node_ids": ["6c3e6101-1683-496c-95d6-954fac594b61", "fe3aec9a-9a31-4992-ba6a-2295090a20f9", "9ee5167d-8442-4b10-a3b4-44fe2e08e6bb", "3f959881-2812-4401-9f63-3c6529cc2f4e", "cf58b6ba-b2e7-4f59-af3a-c0a2eadb9ece"], "metadata": {"file_path": "./near_dist/05-logging-in.md"}}, "27bf48d5-a3d4-4a1c-aaa2-e4e40b2e3625": {"node_ids": ["ef818610-a6bf-40ea-a5fd-491ecf6895b6", "13e85bb5-1698-4b3e-9105-2c71f8914881", "51998384-ca33-4df7-8e1c-38aefa871f03"], "metadata": {"file_path": "./near_dist/2-upgrade.md"}}, "2169d9c3-7416-4c80-9047-ceeec40edfd7": {"node_ids": ["5f497b26-0d1b-417f-8e0b-a124b6c20f65", "6d5376d6-6470-41eb-9431-86331cfd8c9d", "ea4d3e79-34ca-4b06-a542-2dd0cc7c9a98", "606cea10-884c-49f7-8bca-a69c3e606bce", "ff7a588e-ee40-4ede-9093-30085c05c9f2", "e920fa46-1880-4fd8-85b2-1810fa08f50c", "0ec7e960-5d97-4951-b5d1-5a6c6e86ed77", "fc287291-1817-4d29-acd6-aa8c207fd2e4", "474d006b-4c66-4e27-9157-f890242d7aa1", "02b1cdc1-f715-4480-b686-5a375940a489"], "metadata": {"file_path": "./near_dist/02-add-functions-call.md"}}, "381524ae-35da-43aa-9c32-9fca5fe9b4fe": {"node_ids": ["b81c56b7-c2bd-4967-95b8-6e667d1f549c"], "metadata": {"file_path": "./near_dist/create-dao.md"}}, "fe1b26ea-250e-4b08-8e3b-c8342cf2c6d0": {"node_ids": ["9971ecd6-2fe2-40d4-be3e-ee127014fbbd", "9dbc864c-3018-4c42-ac77-8afdfd4b01de", "30509f7b-46a6-46ed-aef4-fb2c91859f58"], "metadata": {"file_path": "./near_dist/1.3-deploy.md"}}, "9a2a20fa-0552-49e7-a3a2-a88ae122f158": {"node_ids": ["da51e0c7-f947-42cb-9afd-9a384de63b92", "c32b0a8e-ff5c-4a2c-8a66-76bc6e176b32", "7953b5d1-a4a4-4e8c-9539-d8956f7d2e46", "2b493a6c-e46b-47d8-b11d-914ba5571336", "37feae50-62fe-474d-a274-037aff0e8aba", "91c824ff-45dd-4e10-8c84-5e4ee130af08", "d5aa5811-25fd-4a4c-8d35-9e33eb15671b", "9f01159e-3989-41ad-beff-6e40e434f9b3", "f9d1c655-698d-4a26-bf09-aec1f659edd6", "d86f0df7-bb65-4182-8227-0208f5a9e18c", "0f588659-8650-4f00-9097-2cb22d19791a", "19d87901-3be5-47cd-9753-8ab392452c50", "8930a01f-cffa-44c2-b3e6-05392d83c23b", "31a986a3-7f6d-47df-aa79-ae40521a6795", "b08a2609-10a6-4ec6-a7f6-a117e1bac89b", "3a6d952e-409c-4752-8659-7ae15deb47e8", "55262e08-452d-4578-b6ee-a605289bc835", "c08b169e-e762-4fb4-ac12-7838f3bbf11c", "86cd6a8e-d2b7-4a10-8b80-068317b17901"], "metadata": {"file_path": "./near_dist/accounts.md"}}, "5f70e6ea-c9e2-43ae-911b-28ed21871c24": {"node_ids": ["52195a62-8b1f-4a98-aeb7-310160caccb2"], "metadata": {"file_path": "./near_dist/storage.md"}}, "ca7db7e5-0dd3-491e-b7e0-5c6cd5a2397d": {"node_ids": ["bbfb8d40-ac36-4a54-a645-8bf1c4d91fb1"], "metadata": {"file_path": "./near_dist/00-overview.md"}}, "f62a28fa-bd4b-44a9-8943-44507213a291": {"node_ids": ["ec7ea482-5a24-4d7a-b3b0-221a9a0c1d97", "9ce84305-69bd-4ce6-93aa-58e15296ca96"], "metadata": {"file_path": "./near_dist/account-model.md"}}, "80c063a6-6e2d-434f-950c-07be1b8711ae": {"node_ids": ["3b6b0844-4221-4b5b-b0a7-3f1357d628db", "f136fc55-0061-4788-a173-29cd3ffbc57e", "5bf058e9-4cce-4fec-936d-91046838389a", "a33f9d62-8a2b-4130-b415-4ceefcdd13b6", "78ec8fe5-de66-4097-92c2-a136a6369255", "73f2a114-09bc-4a87-8bf7-5c566c0c4319"], "metadata": {"file_path": "./near_dist/integrate-contracts.md"}}, "d8b6b6db-2650-4c3a-8f24-c20dbcc81bce": {"node_ids": ["e1c33e8f-df20-4636-bf38-67bbd2a0bc74", "36d76552-4f54-4d19-9d4b-0494fa5238ab", "bc1df270-4858-42aa-96a8-08dda24fc22a", "04c72e6e-2a0a-49cd-8b6c-2a20faffd622", "d5af4d52-a764-46df-9b9a-a645341f885b", "6500a5d5-ae5f-4e38-a60f-80913814dd81", "b2433ca5-4aa6-4234-bd75-1b52fd94130e"], "metadata": {"file_path": "./near_dist/run-near-lake.md"}}, "575ece65-56ba-4add-9ea6-add2655db980": {"node_ids": ["00d82153-021c-49a8-b1e6-78a9a863f227", "2b56ead6-c3c1-478d-88d4-cbd656e41fc2"], "metadata": {"file_path": "./near_dist/transaction-anatomy.md"}}, "3f98e224-883d-448a-830f-b6ef894f464c": {"node_ids": ["1c3efea0-674a-4275-a035-6b4d44b6e885", "977401f1-3a1e-42da-afb7-486ea47cbbfd", "6bce0611-0e10-485c-91de-35b5b7c2eafe"], "metadata": {"file_path": "./near_dist/LOCALIZATION.md"}}, "4b9fefa8-1157-480a-932b-5e482b59de76": {"node_ids": ["f39d1b2f-6456-4318-b167-a97ec02f110c", "2bfbff1f-8323-4e62-89c3-531267fc11ca", "929c9895-ea8d-4c93-8415-b3f95285224e"], "metadata": {"file_path": "./near_dist/wallet-selector.md"}}, "b7a59e20-90be-406a-9dba-5de7dd950816": {"node_ids": ["89cfe3d0-72aa-4e76-869d-c070b1bf67bd", "18d8d8d3-7a00-439b-9e92-73a80b56315c", "6503cb14-7bf7-4156-bf5f-6899c273e8e9", "f160bbd5-fa14-40c3-9898-6f740c424d55", "7d2b65d9-1ab4-49b7-8294-4a4add3bd209", "50826074-5006-472e-9493-ea02241e1dd7", "98a0a7c0-167a-4971-b5bf-63c5c74de982"], "metadata": {"file_path": "./near_dist/social.md"}}, "a9a691c7-a6ae-42d1-b8a9-c5ecde059a76": {"node_ids": ["c87ce170-2b62-4538-bb0d-343371d46b0f", "373b8370-3a6f-44a5-8159-d334d19198b7", "931a6c3d-0906-4d89-9ca6-cc9c4c2265f9", "69618108-fe66-4978-ad52-4ca7afe74964", "1bbdb2b3-86d3-4d4e-b919-1f4e9642a855", "f96b9cd9-dccb-4f8a-9e3e-dc20701d6b3d", "2d10d9a9-c82f-44a1-9ff7-e6a9e34ede8c", "0dff6c25-6065-4c39-a86d-eba728f37510", "1cc9ea4a-405b-4c15-84c6-ce3f86a6599b", "f9ac36af-472c-4d94-915a-b4e65fafbc9f", "1f6f617d-79b4-4302-ab2a-16747208a051", "5fe3eae1-b15b-4585-92f9-18a4beda394f", "1feb9dd2-cc60-4afe-8d54-090e39753069", "b92567c5-0164-4c0a-8a6c-f152f6a5b505"], "metadata": {"file_path": "./near_dist/migrating-to-near-lake-framework.md"}}, "782d0397-4b30-4e7e-8b83-acfa21f18ee8": {"node_ids": ["aad78407-875d-4804-84d6-b4adf8135747", "3682b739-496d-43f7-8751-45f384ea91b6", "edde16c5-885e-44b9-83b2-8aad7a1dcb53", "abec586d-6b89-4544-be32-03708c348be4", "4fafbfb1-5164-47fd-b2b1-3db77d168583", "0413d080-c340-4c30-9893-32787e0db95a"], "metadata": {"file_path": "./near_dist/3-nft.md"}}, "0792f6db-1ce7-4ee2-8170-b9b8e92fe958": {"node_ids": ["a266fc35-1787-4591-a952-958a35c57cdb", "c4479d57-d4bb-490a-98e8-69e3e0a90a8d", "dfd1d7b9-b502-43c1-b0bf-3dea58e5b781", "31db45ac-33be-4d95-aa80-07a25748ea9f", "08dd9a74-d1ed-42b6-8ab7-fe386b100dd2", "8adf3ef0-5403-48fd-80cd-2a83499fca95", "a2dc1c17-aba5-4a24-b9cc-8a4e56b058a7", "6ad22a3b-287f-40f3-8097-c84bd800994f", "23cc9541-c961-4b8d-bb66-14a1717db31b", "e77d16f9-4ec4-4c06-8260-ac4682820aa7", "a81f5dfa-e6bf-48c9-ad0f-0ea0e248e432"], "metadata": {"file_path": "./near_dist/create-transactions.md"}}, "933fff30-0240-4e90-82f0-2259fce8b134": {"node_ids": ["77ad553f-14b1-433a-b2d4-5c06d0223be8", "19190b14-38e6-4aee-bdc1-08d7b03338f0", "b3aed713-8e59-4a4d-9655-2a2a9c3696b3", "e156f276-0995-4219-82df-3abc24cfcfd1", "e0993496-2f1a-4520-b405-35bfbacf9c4a", "18989de8-18a5-42f6-9d92-ceda02ac9b58", "c2680c37-82cc-4457-b4d2-a68e4e3ac520", "c1524dd0-bc5e-4a41-a44c-33ef8776d4d8", "a01fd0d7-1b43-4e72-8035-0921193917e2", "e61e2d84-2246-4ebe-9b86-b5a4fa40145a", "b8d976c5-5905-471b-807d-bfd42ebdef64", "e5cb992f-29e0-458b-8d3e-9589f13ba41d", "31f24550-f232-4993-9797-8eedf898624c", "b35ba429-f391-45d1-8712-1dbac6a55085", "fe229d58-d503-4f02-9143-9733d0775ae5", "7bf996a7-aa40-4f7f-bd57-319a28ed06f4", "af631a0d-99b1-438d-ad40-f0e1785ec530", "0ec10c6d-3947-4a4c-94e5-a4c4639845a6", "6e8ad128-bc0d-4659-acce-e78183df4d3f", "52fef8e1-92ac-48d0-9cc8-15ddda180959", "bf27a250-7d2f-4543-b11f-4acf97115d80"], "metadata": {"file_path": "./near_dist/9-series.md"}}, "00a1bfd1-8c4a-4c4c-b3da-a3501633a47f": {"node_ids": ["53616b96-c019-405a-b7a5-1e9289202e1a", "d801cf7b-fe58-479c-a5c4-cbdd9e50e0b3", "5999e17a-87b3-406d-970c-43fd5d75886e", "86a953a2-7a4b-4a74-8b5f-f6dfc4b2e904"], "metadata": {"file_path": "./near_dist/ai-assistant.md"}}, "bc57e199-fc1c-47c7-b6de-9683a3da9a46": {"node_ids": ["60531d1f-6e49-4e37-b6cc-f92c46e394e6", "880fbdc7-8413-40d9-beff-fd0abab4aeb2", "25fe93fe-4b10-4680-8bc3-42016de9675e", "5b888102-b5b1-4543-b20a-ed55eb8a42fe", "9b505d21-15dc-47bb-9d38-fc303801281f", "74e8f08e-9305-4cd2-92e1-a2068429210a", "e38fd8fe-d65b-400e-897b-c370e73a4e31", "90c2fec4-3b52-468b-9e09-7222d3676d66", "f4bcfed2-5f52-41a4-8ad7-ede8e8683871", "aba05a1e-e4e4-421b-9cfe-a02985e1e42e", "ab832f2e-1547-4687-b38b-93c03b2b229b", "6deb9200-5ce7-4516-9139-4d6fd10ccdc9", "21cf8d5d-a6f6-4a85-a732-1eb8680fd240", "048b6afe-2206-4ed2-a597-c841a58cb8d8", "1b1aed04-447e-47ef-a103-45a1b64cd549", "8dbf483e-d146-4726-9c8b-15d2fe44c62e"], "metadata": {"file_path": "./near_dist/collections.md"}}, "52de68ef-2841-4e50-8110-2cf411412210": {"node_ids": ["b0325023-1fbb-4932-8d67-dafe7a03de1e", "9b48adbd-4990-4f93-939e-5a1b5525a218", "9548e629-7c81-4155-acf5-5229c83e1591", "a44c0960-e966-48b6-82b8-51ad44ab343a"], "metadata": {"file_path": "./near_dist/03-linkdrop.md"}}, "1e030b1e-8b52-46cf-9d25-e4a2c954405e": {"node_ids": ["f552deb9-310e-4793-ad7e-365bc3571b62", "adf43604-1969-4ea6-afc2-96dee021d606", "c67d5d35-335d-4c9f-a353-0d24bdb73860", "42fee34b-0f57-4e4b-b933-57c91876f56d", "61f52d0e-30ac-4f13-8b40-e1f6391c1c3a", "af0da971-9012-4fd9-8b4a-6dd30c57fb27"], "metadata": {"file_path": "./near_dist/guest-book.md"}}, "24672da3-afbe-4b08-981c-3ae455b4d1db": {"node_ids": ["025068da-5304-436d-a2a5-38e9b8f5c44e", "c13dc6e6-cdf6-490f-8ab7-178a39195adb", "4c79da17-4608-4041-9f49-a5bb88876ed8", "49201b1e-bd14-434d-b9e6-93f4146450fc", "1f96e69a-2a17-4462-9cc5-fd707d0abfca"], "metadata": {"file_path": "./near_dist/blog.md"}}, "e59796b9-6244-4f53-8bd5-6b7eef09db3c": {"node_ids": ["c64fd44b-d449-41b3-886d-c4c35019b3b7"], "metadata": {"file_path": "./near_dist/get-dao-list.md"}}, "7969349f-0932-4054-b06a-1bb0a4013811": {"node_ids": ["3c3f0a9a-e744-4f3b-904e-4b35e72a1d99", "167c9395-3707-4d12-9417-373b682dde3f", "4b83e89a-b7c4-4de8-8ab4-a4cb820af648"], "metadata": {"file_path": "./near_dist/wallet.md"}}, "2b92e314-8ee8-4b36-ab4d-f277368f5408": {"node_ids": ["6e40ca45-410b-4269-8b6d-ac1a7dcc325f", "13c70787-8c2f-40dc-bab5-f2f73add34e9", "e81fe0a7-50d4-4cac-b064-9d0655a324ec", "fc139acf-0976-49ac-b49c-4b34e1e344c3", "04829d53-e19d-4a30-83f8-864ce7f72e09", "cf41b625-bbd3-4999-b417-1077dc1c8704", "8390c7e7-4b49-4925-b5e7-430138a6354c", "1dd56e0f-8f7c-4060-b62f-a24ad0eebeb3", "f011698b-98a0-45ab-aebc-167eb7265ebe", "2d694c27-0e0d-4c9a-b593-6db46c0e720c", "c3cf26f6-5e46-4836-afb4-309181ae9819", "649cfd30-52b2-48ef-94b5-3198b11cddd1", "0c28dfd6-3ba8-4ee2-9799-c305d99fd3e9"], "metadata": {"file_path": "./near_dist/5.transfers.md"}}, "94f103e9-fddd-4546-9829-c36e02b52ded": {"node_ids": ["5cdddecd-a33b-4725-9c05-8886e43cdc98", "c6f4f0ef-6227-434d-94d6-c58a560f1bc3", "833883dc-9c93-48a0-86ad-8b1e627bb377", "bfd0b70c-979c-46c7-b602-3b5fe19e2b30", "9d765341-96a3-4740-9a66-dace6c50b460", "50d7c084-8c60-4361-8d03-76866a07751a", "19d33ac9-ccd2-46b3-bf97-6003fcb830b0", "ed200732-cbc6-40dd-8784-8925d94b1e91"], "metadata": {"file_path": "./near_dist/8-marketplace.md"}}, "867e9760-a3f4-4901-a004-7ae1a7a9439b": {"node_ids": ["2fa82bc8-d180-4ab4-a194-bf0f178e2147", "837c91d8-f42b-4eb3-b982-037fad5f102c", "8b8c5105-0f69-484c-aae2-5188e7b37cf4", "8762e39f-af36-4ced-8238-076a9e3317aa", "d5c2a9a0-b11e-412d-8310-85a436df567d"], "metadata": {"file_path": "./near_dist/blog-posts.md"}}, "40bf8ca1-3df7-4bf0-bbaf-9ce1ae7fa7ea": {"node_ids": ["19cb0415-6b74-442f-89da-67355abbdd42", "363bf672-6994-43cc-9763-c2e3596abbf1", "e67db99c-df98-47d2-b438-f815b5f1ef41", "b79b80ac-d3b7-4ae3-95cf-c4943f1df0d6"], "metadata": {"file_path": "./near_dist/web-methods.md"}}, "d8ceb65e-9cb0-4e68-8f8d-44f3731653d4": {"node_ids": ["e2bb4f0c-2acd-4195-a13b-31d4c2092a4b", "4673e718-4b36-4a9d-85b3-6565914361a4", "71816b2d-ad3d-4820-8489-7ac8deafa0e4", "cfad766a-2027-4e61-b3f2-e6ffcd3b380a", "dcb3fef0-09fc-4f92-8a61-7ef7fc4c0283"], "metadata": {"file_path": "./near_dist/04-simple-frontend.md"}}, "351e3a3b-8bd0-4722-ae19-a52bce152361": {"node_ids": ["cdf21c5a-ad02-4ff4-a60e-7981a3d95b51", "01b242ab-eed3-44c6-a522-3847f0c5c782"], "metadata": {"file_path": "./near_dist/state.md"}}, "d58db4ad-45c6-461a-b257-b72c55b489b3": {"node_ids": ["7d0f260d-9140-45a7-bb6a-2b62b5591248", "78677192-2503-4e9e-8534-1e55cd7718b1", "e889a92f-7491-42ac-b5b2-29dce7ba71ca", "c42c4006-3f9d-4219-a357-e2fba71c34cd", "2c56525d-1ea1-44f0-bf0f-184830e6d12a", "96856653-95b4-4407-bc21-eb57aba40aee", "e2543353-00c6-4919-bfd6-8ddc2ce8a2e8", "f690f46a-64b9-44ab-952e-29b42331acb1", "33ce5610-8a30-4be6-8077-8468142ba023", "9494608e-ce09-4c80-9ae5-12200663cb68", "6a74d468-382d-4915-8d3b-3c5dfea5fba8", "1ad96e22-2867-4b73-9425-5cd871c859c5", "be1ab419-c0cc-428a-a12e-120c64e4a43a", "9fb6b280-4cd6-48ce-9146-418e5f79110f", "398ef57e-536f-4d13-ac3e-91e1130167e0", "fd72888a-3797-4837-a6d2-f7d306d3dae8", "32ed1467-361d-4545-88aa-cf7fba530e95", "18fce0c3-5ecd-4d74-8bcf-50afcf71257d", "40e05d76-5a1c-416d-8beb-72e9cec47985", "1052f0ef-6f06-4986-acfc-6c47f7f1f235", "c420dcb8-9aeb-4a4b-b3f9-9c4aa85faa64", "e9b050d1-94e9-47f6-9f08-18332b4a2bc1", "5be11002-2931-4632-8cce-f99377fee540", "2af4df6b-fea7-4425-8ecd-5902d9fb7697", "7c2db8fd-2b89-4fa6-9958-65647a1561e6", "5e474c96-88b9-4a9f-ad55-f91edea5f6d3", "9fea0b55-5e7b-470b-a88a-36be13f93541", "b667088b-ff12-4eb7-9fab-83d0e54fc8eb", "3b989b7f-6606-4829-a5d5-efbca591252e", "daa63ccc-1319-455b-8c20-ebc10dc6bb7a", "b792b641-cef8-43f7-99cd-57d683923604", "d0b1d3ee-7d56-4b2a-9483-bb30389168b0", "430d6580-313b-4f58-babf-d3d527b31fe6", "88ff04c8-706a-43f8-87ed-f1114f399a1a", "f8907831-93f8-44d3-bc79-477b259a01a4", "c27c61ba-939b-4fff-94e3-783c4ba68ba7", "643d933f-93f7-41e0-bb16-5a77476bce56", "e9579c81-d375-4c69-9e0e-07123c1a0b7a", "4da8cf59-9a19-4b8c-9c66-3276d5c85446", "d8811561-6e40-44a1-9bde-4f188cd0d163", "c5640466-b63e-406f-8ced-8b08f27ec704"], "metadata": {"file_path": "./near_dist/contracts.md"}}, "f06e036e-6253-4473-a59b-76a5e3cb2f3a": {"node_ids": ["f1ece6e9-208c-4def-a90c-0ceb778e5de0", "5bf61445-6aac-441a-97bf-286fbf2d4dfe", "ec671d78-b941-4cbc-b18d-82aec43c474c", "5c1f6285-16b5-477f-95c1-9d7ae0f599e1", "f48a217d-4cfa-4cd7-bc36-744cb34622a5", "01ccfb78-2a78-42ce-b28d-dadf553b774a", "63efe721-1a9a-4359-8488-156f687bbb89", "425d31b9-5c57-4bbe-978e-b64da79ba6a3", "6c94d748-472f-4a07-93f6-4238e1830b67", "2df096b4-c325-4a75-9e1b-267d395e6346", "6bb3b52f-96ce-47ac-9ff9-4b41bf5ad08e", "b7f82f91-f82e-4412-8bb5-48114dd314eb", "ea39dc5f-e065-41d9-a26a-e78bc209c26c", "77631eb6-9aa5-484a-9d9f-6ac6957649cd", "50aac91e-4dd9-4f36-b2bb-9eb2f4817b64", "19d4f248-7a22-42c0-9ac0-998ef0d2fa1b", "3abe22f2-1d87-41f7-9abe-5a2bff6f89ed", "18952842-9744-4c3f-8bd7-414eab6799c6", "92bb61fd-d4dc-415f-b4c0-40887ac4700d", "c1dc1a2d-47a7-46f1-a528-8f10f47f1b86", "a04b71bc-8440-438b-8606-6faacab14d13", "20be5359-5086-4d8c-9d24-96957a0eac0d"], "metadata": {"file_path": "./near_dist/block-chunk.md"}}, "6251e44c-e1b6-4d5b-a30e-b8fe02b3f70e": {"node_ids": ["0bf0ee60-402b-4684-ac11-822564cfe411"], "metadata": {"file_path": "./near_dist/check-balance.md"}}, "da1b57c2-08d7-4d25-b282-c70c2ce5dd51": {"node_ids": ["229b044f-86f2-40be-b8a0-4d2612b11638"], "metadata": {"file_path": "./near_dist/fastnear-api.md"}}, "5d7c14b2-a681-4d78-9fce-e4673c523ae4": {"node_ids": ["c3b313a6-d17e-4610-8d6c-40c0ff29410c"], "metadata": {"file_path": "./near_dist/create.md"}}, "0c928975-f723-497d-ae68-b6f93dc417bb": {"node_ids": ["5eecfd57-98c3-4490-b69a-544b7ace82fe"], "metadata": {"file_path": "./near_dist/get-price.md"}}, "3e92bde7-8419-4113-9a9a-88b7560ec57c": {"node_ids": ["076fbb71-57f8-4272-a0a6-bbf5009b5219", "10b669a7-6a81-4007-9400-70471121e386", "3fe33f7c-9d54-467a-9713-1144d87e3ee2", "9a7c2ea5-c3a7-497e-b8ba-6808361853fa", "71c55302-e8cb-45ba-bf17-521899adb206"], "metadata": {"file_path": "./near_dist/data-availability.md"}}, "43bf7128-51ff-47c0-bd05-ed5b2bfffe5a": {"node_ids": ["074e70c3-b309-4954-acab-64113cbfdad3", "d6d48449-a2ec-41c6-9895-38dc453ea51c", "619c66a2-618f-45d9-b469-e767421091af", "b82a3f66-d60a-4ed3-a5db-fd9dad8ef939"], "metadata": {"file_path": "./near_dist/js-lake-indexer.md"}}, "02aa9144-ddd0-4d46-9be5-3a21cd1ee053": {"node_ids": ["4937d2a3-2ea1-4179-890b-480c6807b64a"], "metadata": {"file_path": "./near_dist/reproducible-builds.md"}}, "a6ceab34-4c49-41a6-a67c-9b3edf2c3de4": {"node_ids": ["d9609390-b918-4d26-a848-9fffc2c1d130"], "metadata": {"file_path": "./near_dist/vote-for-proposal.md"}}, "011d0571-89c4-4b95-85a0-e0972b09b129": {"node_ids": ["aa29eb04-958c-43ed-bef4-c88cea03c4ab", "f2804286-d204-495d-ba2e-75c2efe23c25", "661fa226-e3a3-4fbe-9053-acdc045bc5e9", "fded3ba9-26f6-4928-9683-a1318974627b", "32761152-3ab7-4175-a1b5-74e527207785"], "metadata": {"file_path": "./near_dist/serialization-interface.md"}}, "362bd1bb-ce0a-48c7-ae49-75f524d99f94": {"node_ids": ["bf31f39f-c5bf-4852-95a3-c2645d469c01", "2d4554c3-01e2-4aaf-a7ba-5dccda2f55ec", "a22dbf5e-7584-411d-9e4a-a9c9804c2ee1", "fb7d8f9f-c877-443d-afd1-053b0c8c0790", "8a037d2b-5ee6-4d07-8046-2339cc67cb81", "3abaa560-2c5a-4c92-830e-5269428c6b60", "050bcd66-f3f6-43a3-a78a-8ceb04669d02", "9df2d7f0-73a8-45aa-9684-9069fba1faeb", "39d2b624-1f4b-472e-bd02-1bf43e2daa66"], "metadata": {"file_path": "./near_dist/4-core.md"}}, "544eba91-9453-4121-a0f2-755d201028ec": {"node_ids": ["c520cc71-d2a6-47d4-87d2-20a1e0e72aa0"], "metadata": {"file_path": "./near_dist/frontrunning.md"}}, "5be484f4-b737-443f-9af1-269692746303": {"node_ids": ["1e9574eb-622c-4959-912d-f8452a9c384d"], "metadata": {"file_path": "./near_dist/bos-gateway.md"}}, "e4c3c14e-8d01-4383-a055-74af7f4b8436": {"node_ids": ["94de6880-e513-4047-ab78-ef62d8c4e64e", "cf153b09-3417-481e-a345-59b72fd3983b", "2d5f23d3-7fff-4fe8-a1e2-6bd328183a33", "f5f561c7-2d3e-4342-8538-949ae3b132c1"], "metadata": {"file_path": "./near_dist/0-predeployed.md"}}, "b24a98e1-9b82-43df-ae4c-f107128ff70e": {"node_ids": ["21044cd6-4e05-4a9a-bb51-a3476fbb47f2"], "metadata": {"file_path": "./near_dist/one_yocto.md"}}, "0036f83c-b39b-4db2-b6b5-6921acb626bb": {"node_ids": ["a416f0ff-fa92-4ac2-80bd-95213376600e", "8dc1b91c-a0a5-45cf-ae0f-8698e07dbb90", "2ac973e8-e0c3-4306-bc23-612bc7c7e3ad", "53ad0a6c-e34f-4c80-8f78-3ccf4e5e2514"], "metadata": {"file_path": "./near_dist/chain-ui-tutorial.md"}}, "059bac7a-9ef5-460c-911b-9af7e18a16b2": {"node_ids": ["b3c0d5e9-0672-4a99-ba2d-24f5193db13f", "2365df1a-2d2e-447f-b542-c329badb0de5", "157b41a0-516a-491b-844f-bd50f050fbbd", "3a6c116f-7610-4ae6-9e88-99991fea484b", "4474b2ac-0251-4919-91a9-0c6bdb365bc8", "a1cdd4d4-5528-45a6-ac36-ebbce92be7e1", "6ea4b032-f86c-4cff-b333-8a0be413a389", "7f91160c-d9a6-4fd0-bbe6-f55ad87e4b12"], "metadata": {"file_path": "./near_dist/meta-transactions.md"}}, "56143d8f-aea3-4c4f-b6b3-ffa5f55cb2f0": {"node_ids": ["3b07a285-56af-48c0-868c-c0589783e1e3", "4ba0a0f7-646e-4105-9f52-89b000027861", "0c092060-7ade-4ea1-872f-5c2bffa9ce4e", "8d550912-8725-482b-a17a-bf37118dc5f5", "7d1f85f0-b966-4006-9329-c3643a850a5f", "27ce5537-f7dd-4f7c-ae23-a30b7ffcb426", "94dda322-bbe3-4722-b04d-2f9dbbc5ba99"], "metadata": {"file_path": "./near_dist/5-frontend.md"}}, "6e2c1e10-6020-4a52-8ebc-efddeffd4d79": {"node_ids": ["67fd2198-78c9-41e1-8b9f-56aa8398c297", "63b227f9-bac4-4a03-bd62-3052f6486f53", "b4aa7f5a-d47b-45b5-b294-030caf5865b2"], "metadata": {"file_path": "./near_dist/2-locking.md"}}, "41149372-3926-4ec8-ac78-2b3aad17d3b8": {"node_ids": ["e597305a-9364-45f7-adad-5d730cd5c73b", "b823047c-63d8-4108-a8e9-2e122c307b46", "dc8ea404-1916-45fb-9919-ec89b4542ee9", "605e54a2-169b-4171-99fd-8dbf73015725", "e68d7c6b-99fd-43a6-922d-bdf8563222de", "d49b3d1d-3a3f-4701-88d2-ea65e4e6c4cf"], "metadata": {"file_path": "./near_dist/xcc.md"}}, "58f1aa9d-800f-4fb6-96cc-bc5d9bb3ebad": {"node_ids": ["0414f415-eb44-44a1-8141-ec6c8e820a11", "7386bc0f-2a9c-4a51-8d53-39587165208d", "b5e0200c-defa-48a4-8510-04fd278f0d84"], "metadata": {"file_path": "./near_dist/6-indexing.md"}}, "813f192a-ff91-49ce-9b00-b2e9db964ea6": {"node_ids": ["09ea9c5c-8a19-4de7-a2a1-e68c60895493", "d58031ee-986b-4729-9268-7b507f562c44", "5edc9450-4492-4a8a-a316-18ab7a85e31e", "6db69581-f9bf-43e7-99d1-288bdf77370c", "0638e7b1-3cc2-4a69-bb58-f7eb2825e28e", "07fafbe5-b135-4c91-a6a6-3da116db23db", "612bf934-aa87-4113-8abb-870dfa4c8ea3", "b041cd39-6677-406e-956d-841e2aff6844", "6c3530de-fce5-464a-a0ef-efba2af46c68", "c67c1447-f67e-4d86-806f-2353a930e20e", "a545831a-ff62-4fff-bc1d-5590b3767c35", "f59f7a05-7b45-4528-87da-b936e060cf6c", "bc8a669f-def3-490b-bb43-a94290cadd00", "deaf647d-4cd5-40b7-90e3-7863debd9c48", "72654870-f4db-4bfb-b039-e5213ccaa82f", "d9562306-1890-4089-b802-0e83f82738f6", "37ed1b6b-7a60-4b62-ad47-cb67e9c7da12", "9a5f5e60-2ed0-4014-8ea9-5d82b13cb35c", "153af17c-18e7-447d-998a-d38b526cb5e6"], "metadata": {"file_path": "./near_dist/access-keys.md"}}}}